(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1025:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(6),a(16),a(9),a(4),a(316),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(6),a(28),a(442),a(42),a(16),a(9),a(4),a(316),a(22),a(23),a(57),a(17),a(7);var n=r(a(58)),o=r(a(43));a(41);var c,s,l=r(a(44)),i=r(a(61)),u=r(a(65)),d=r(a(36)),f=r(a(37)),p=r(a(88)),m=r(a(55)),h=r(a(56)),v=r(a(51)),g=r(a(49)),_=(r(a(66)),a(14)),y=r(a(60)),E=r(a(26)),b=r(a(63)),S=r(a(74));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var R=(c=function(e){(0,m.default)(g,e);var t,a,r,c,h,v=O(g);function g(){var e;(0,d.default)(this,g);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=v.call.apply(v,[this].concat(a))).module="microserviceinstances",(0,u.default)(e,"metrics",s,(0,p.default)(e)),e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/instances").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/instances")},e.getResult=function(e){var t=(0,y.default)(e)?e:[],a={};return(0,b.default)(t)||t.forEach((function(e){(0,S.default)(e,"data.values[0]",[Math.ceil(Date.now()/1e3),(0,E.default)(e,"data.measurements[0].value")]),a[e.metric_name]=e})),a},e.getRefreshResult=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,_.toJS)(a);return(0,b.default)(r)?t:(Object.values(t).forEach((function(t){var a=(0,E.default)(t,"metric_name"),n=r[a];if(n){var o=(0,E.default)(t,"data.values[0]",[]),c=(0,E.default)(n,"data.values",[]);(0,S.default)(n,"data.values",e.getNewValues(c,o))}})),r)},e.getNewValues=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(0,b.default)(e)?[]:(0,i.default)(e),r=t||[];return(0,b.default)(r)||(a.length>10&&a.shift(),a.push(r)),a},e}return(0,f.default)(g,[{key:"fetchStatistics",value:(h=(0,l.default)(o.default.mark((function e(){var t,a=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,request.get("".concat(this.apiVersion).concat(this.getPath(t),"/statistics"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"offLine",value:(c=(0,l.default)(o.default.mark((function e(t){var a,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.namespace,r=t.instanceId,n=t._originData,(0,S.default)(n,"spec.enabled",!1),e.next=5,request.put(this.getDetailUrl({namespace:a,name:r}),n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"onLine",value:(r=(0,l.default)(o.default.mark((function e(t){var a,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.namespace,r=t.instanceId,n=t._originData,(0,S.default)(n,"spec.enabled",!0),e.next=5,request.put(this.getDetailUrl({namespace:a,name:r}),n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchMetrics",value:(a=(0,l.default)(o.default.mark((function e(t){var a,r,c,s,l,u,d,f,p,m=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,c=t.name,s=t.autoRefresh,l=void 0!==s&&s,u=(0,n.default)(t,["cluster","namespace","name","autoRefresh"]),d=m.length>1&&void 0!==m[1]?m[1]:{},e.next=4,request.get("".concat(this.getDetailUrl({cluster:a,namespace:r,name:c}),"/metrics/collect"),u);case 4:if(f=e.sent,(0,b.default)(d)){e.next=11;break}return e.next=8,request.get("".concat(this.getDetailUrl({cluster:a,namespace:r,name:c}),"/metrics/collect"),d);case 8:p=e.sent,(0,S.default)(p,"[0].metric_name","jvm.memory.used.metaspace"),f=[].concat((0,i.default)(p),(0,i.default)(f));case 11:return f=this.getResult(f),l&&(f=this.getRefreshResult(f,this.metrics)),this.metrics=f,e.abrupt("return",f);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchEnv",value:function(e){var t=e.cluster,a=e.namespace,r=e.instanceId;return request.get("".concat(this.getDetailUrl({cluster:t,namespace:a,name:r}),"/env"),{},{},(function(){return{}}))}},{key:"checkHasMetrics",value:(t=(0,l.default)(o.default.mark((function e(t){var a,r,n,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,n=t.instanceId,e.next=3,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:a,namespace:r}),"/instances/").concat(n,"/metrics"),{},{},(function(){return!1}));case 3:return c=e.sent,e.abrupt("return",!!c);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"apis/aggregated.springcloud.kubesphere.io/v1alpha1"}}]),g}(r(a(1053)).default),s=(0,g.default)(c.prototype,"metrics",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,g.default)(c.prototype,"fetchStatistics",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"fetchStatistics"),c.prototype),(0,g.default)(c.prototype,"offLine",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"offLine"),c.prototype),(0,g.default)(c.prototype,"onLine",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"onLine"),c.prototype),(0,g.default)(c.prototype,"fetchMetrics",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"fetchMetrics"),c.prototype),(0,g.default)(c.prototype,"fetchEnv",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"fetchEnv"),c.prototype),(0,g.default)(c.prototype,"checkHasMetrics",[_.action],Object.getOwnPropertyDescriptor(c.prototype,"checkHasMetrics"),c.prototype),c);t.default=R},1238:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(5),r(11),r(6),r(84),r(192),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(28),r(192),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var c,s=n(r(315)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=o(r(0)),h=r(186),v=n(r(792)),g=r(52),_=r(791),y=r(239),E=n(r(961)),b=n(r(26));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var A=(0,y.inject)("rootStore","projectStore")(c=(0,y.observer)(c=(0,_.trigger)(c=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new E.default,e.handleTabChange=function(t){var a=e.props.match.params,r=a.workspace,n=a.cluster,o=a.namespace;e.props.rootStore.routing.push("/".concat(r,"/clusters/").concat(n,"/projects/").concat(o,"/applications/").concat(t))},e.showDeploySampleApp=function(){var t=e.props,a=t.rootStore,r=t.projectStore,n=t.match;e.trigger("crd.app.create",O(O({sampleApp:"bookinfo",module:"applications"},n.params),{},{store:e.store,projectDetail:r.detail,success:function(e){return a.routing.push(e)}}))},e}return(0,u.default)(r,[{key:"render",value:function(){return m.default.createElement(v.default,(0,s.default)({},this.props,{description:t("APPLICATIONS_DESC"),tabs:globals.app.hasKSModule("openpitrix")?this.tabs:void 0,tips:this.tips}))}},{key:"canDeployComposingApp",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=globals.app.getActions({workspace:t,cluster:a,project:r,module:"deployments"}).includes("create"),o=globals.app.getActions({workspace:t,cluster:a,project:r,module:"services"}).includes("create");return n&&o}},{key:"tabs",get:function(){var e=this.props.type,a=[];"composing"!==e&&a.push({value:"template",label:t("TEMPLATE_BASED_APP_PL")});var r={value:"database",label:t("RADONDB_APPS")};return(0,g.isHasRadonDBAuthorized)()&&a.splice(1,0,r),(0,b.default)(globals,"ksConfig.nativehelmrelease",!1)&&a.push({value:"others",label:t("OTHER_APP_PL")}),{value:e,onChange:this.handleTabChange,options:a}}},{key:"tips",get:function(){return"database"===this.props.type?[{title:t("WHAT_ARE_RADONDB_APPS"),description:t("RADONDB_APPS_DESC")}]:"template"===this.props.type?[{title:t("APP_TYPES_Q"),description:t("APP_TYPES_A")}]:[{title:t("HOW_TO_USE_APP_GOVERN_Q"),description:t("HOW_TO_USE_APP_GOVERN_A"),operation:this.canDeployComposingApp?m.default.createElement(h.Button,{onClick:this.showDeploySampleApp},t("DEPLOY_SAMPLE_APP")):null,closable:!1}]}}]),r}(m.Component))||c)||c)||c;a.default=A},1245:function(e,t,a){"use strict";function r(e){var t=e.toLowerCase();return t.includes("g")?1024*parseFloat(t):(t.includes("m"),parseFloat(t))}a(15),a(84),a(30),a(1929),a(4),a(22),a(24),a(85),a(136),a(75),a(1930),a(1933),a(1934),a(1935),a(1936),a(1937),a(1938),a(1939),a(1940),a(1941),a(1942),a(1943),a(1944),a(1945),a(1946),a(1947),a(1948),a(1949),a(1950),a(1951),a(1952),a(1953),a(1954),a(1955),Object.defineProperty(t,"__esModule",{value:!0}),t.copyToClipboard=function(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);var t=document.createElement("textarea");return t.value=e,t.style.position="absolute",t.style.opacity=0,t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((function(e,a){document.execCommand("copy")?e():a(),t.remove()}))},t.binaryStringToBlob=function(e){var t=e.length,a=new Uint8Array(t);for(;t--;)a[t]=e.charCodeAt(t);return new Blob([a])},t.convertToMebiBytes=r,t.convertJVMToMemoryMebiBytes=function(e){var t=e.split(" ")[0];if(t.startsWith("-Xms")){return r(t.substring(4))}return 0},a(84),a(30),a(1929),a(4802),a(4804),a(4805),a(4807),a(4),a(436),a(22),a(85),a(75),a(1930),a(4808),a(1933),a(1934),a(1935),a(1936),a(1937),a(1938),a(4809),a(4810),a(1939),a(1940),a(1941),a(1942),a(1943),a(1944),a(1945),a(1946),a(1947),a(1948),a(1949),a(1950),a(1951),a(1952),a(1953),a(1954),a(4811),a(4813),a(1955),a(4814)},1249:function(e,t,a){e.exports={triggerBox:"_18oz9jJspnnTzmxdiMcTvO",itemBox:"_19wJV0VwUuABLlpoGuI5RR",itemBoxTitle:"_2Ek20yzPmLZbe0Zvz_kewY",itemBoxBody:"TjVoqR4KzT6ZJhlj7F0Yb",itemBoxBody2Column:"_1wisn1exfeWbdYIMAjLveK",itemBoxBodyItem:"_2C0_4pcZsWPa06pViyMLVD",authentication:"_1SFJk2XAG7XOTNVKgWXTT6"}},1428:function(e,t,a){"use strict";var r=a(20);a(12),a(134),a(5),a(11),a(29),a(6),a(84),a(30),a(18),a(320),a(192),a(16),a(27),a(137),a(9),a(13),a(10),a(4),a(22),a(23),a(24),a(17),a(85),a(38),a(136),a(75),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.isAppRunning=function(e){var t=(0,D.default)(e,"resourceState"),a=q[t]||t;return z.includes(a)},t.default=t.RunningStatus=t.DMPStatus=void 0;var n=r(a(43)),o=r(a(61)),c=r(a(58));a(41);var s=r(a(44)),l=r(a(65)),i=r(a(36)),u=r(a(37)),d=r(a(88)),f=r(a(55)),p=r(a(56)),m=r(a(51)),h=r(a(49)),v=(r(a(66)),r(a(31)));a(12),a(134),a(45),a(5),a(11),a(29),a(6),a(84),a(30),a(18),a(28),a(245),a(320),a(192),a(859),a(191),a(42),a(16),a(159),a(27),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(436),a(319),a(22),a(23),a(57),a(17),a(85),a(38),a(75),a(1429),a(7),a(32),a(1430),a(1431),a(1432);var g,_,y,E,b,S,O,R,A,k,T=r(a(74)),D=r(a(26)),C=r(a(63)),P=r(a(454)),N=a(14),I=a(440),w=a(52),x=r(a(243)),M=r(a(458)),L=a(816),j=r(a(4510)),U=a(1015),B=r(a(1433)),Y=a(1539),F=a(1540);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={Creating:"Creating",Initializing:"Creating",Updating:"Updating",InProgress:"Updating",ScaleIn:"Updating",ScaleOut:"Updating",Completed:"Completed",Running:"Running",Ready:"Running",Closed:"Closed","pgcluster Shutdown":"Closed",CreateFailed:"Create Failed",UpdateFailed:"Update Failed",Terminating:"Terminating",FailedInvalidConfig:"Failed",FailedServiceConfig:"Failed",FailedTLSConfig:"Failed",FailedUserConfig:"Failed",FailedRBACConfig:"Failed",FailedDeployment:"Failed",FailedReset:"Failed",TLSNotValidYet:"Updating",ApplyingChanges:"Updating",MigratingData:"Updating",Stalled:"Updating",Invalid:"Failed","True-Ready":"Running","True-NotReady":"Creating",Expanding:"Updating"};t.DMPStatus={"Create Failed":"Failed","Update Failed":"Failed",Restoring:"Updating",Bootstapping:"Updating",Bootstapped:"Running","In The Backup":"Updating"};var z=[q.Running,q.Completed];t.RunningStatus=z;var K=function(e,t){var a;try{a=JSON.parse(e.customResource)}catch(e){a={}}var r=(0,L.getAppIdByKind)(a.kind),n=e.resourceState,o=e.creationTimestamp,c=e.appVersion,s=e.description,l=q[n]||n,i=H(H(H({},a.metadata),a),{},{workspace:t,creationTimestamp:o,app_id:r,version:c,description:s,status:l,isRunning:z.includes(l),app_name:(0,L.convertAppIdToName)(r)});switch(r){case L.RadonDBAppId.ClickHouse:var u=(0,D.default)(a,"spec.configuration.clusters[0].layout",{}),d=u.replicasCount,f=u.shardsCount,p=(0,D.default)(a,"spec.templates.podTemplates[0].spec.containers[0].resources.requests"),m=p.cpu,h=p.memory,v=(0,D.default)(a,"spec.templates.volumeClaimTemplates[0].spec.storageClassName");return H(H({},i),{},{icon:"/assets/click-house.svg",replicasCount:d,shardsCount:f,cpu:m,memory:h,storage:(0,D.default)(a,"spec.templates.volumeClaimTemplates[0].spec.resources.requests.storage"),storageclass:(0,D.default)(a,"spec.reources.storageClassName")||v,update_time:(0,D.default)(a,"metadata.managedFields[1].time")});case L.RadonDBAppId.PostgreSQL:var g=(0,D.default)(a,"spec.postgresql.readwriteinstance.podspec.containers[0].resources.requests"),_=g.cpu,y=g.memory,E=(0,D.default)(a,"spec.autofailover.podspec.containers[0].image",""),b=(0,D.default)(E.split(":"),"[1]","").split(".")[0];return H(H({},i),{},{icon:"/assets/postgre.svg",cpu:_,memory:y,storage:(0,D.default)(a,"spec.postgresql.readwriteinstance.volumeClaimTemplates[0].spec.resources.requests.storage"),storageclass:(0,D.default)(a,"spec.postgresql.readwriteinstance.volumeClaimTemplates[0].spec.storageClassName"),shardsCount:(0,D.default)(a,"spec.postgresql.readwriteinstance.replicas"),backupSchedule:(0,D.default)(a,"spec.fullBackupSchedule"),databaseVersion:b,databaseVersionText:"PostgreSQL ".concat(b)});case L.RadonDBAppId.MySQL:var S=(0,D.default)(a,"spec.mysqlOpts.resources.requests"),O=S.cpu,R=S.memory,A=(0,D.default)(a,"spec.replicas");return H(H({},i),{},{icon:"/assets/mysql-qkcp.svg",cpu:O,memory:R,shardsCount:A,storage:(0,D.default)(a,"spec.persistence.size"),storageclass:(0,D.default)(a,"spec.persistence.storageClass"),backupSchedule:(0,D.default)(a,"spec.backupSchedule","").substring(2),databaseVersion:(0,D.default)(a,"spec.mysqlVersion"),databaseVersionText:"MySQL ".concat((0,D.default)(a,"spec.mysqlVersion")),sidecarImage:(0,D.default)(a,"spec.podPolicy.sidecarImage")});case L.RadonDBAppId.RedisCluster:var k={master:(0,D.default)(a,"spec.redisLeader.replicas")};return"hostname"!==(0,D.default)(a,"spec.kubernetesConfig.endpointType")&&(k.proxy=(0,D.default)(a,"spec.redisProxy.replicas",0)),H(H({},i),{},{icon:"/assets/radondb_redis.svg",cpu:(0,D.default)(a,"spec.kubernetesConfig.resources.requests.cpu"),memory:(0,D.default)(a,"spec.kubernetesConfig.resources.requests.memory"),storage:(0,D.default)(a,"spec.storage.volumeClaimTemplate.spec.resources.requests.storage"),storageclass:(0,D.default)(a,"spec.storage.volumeClaimTemplate.spec.storageClassName"),shardsCount:(0,D.default)(a,"spec.redisLeader.replicas",0),replicasCount:(0,D.default)(a,"spec.redisFollower.replicas",0),specifications:{master:(0,D.default)(a,"spec.kubernetesConfig.resources.requests"),proxy:(0,D.default)(a,"spec.redisProxy.resources.requests")},nodes:k,databaseVersionText:"Redis ".concat((0,D.default)(a,"spec.kubernetesConfig.redisVersion"))});case L.RadonDBAppId.RedisSentinel:return H(H({},i),{},{icon:"/assets/radondb_redis.svg",cpu:(0,D.default)(a,"spec.kubernetesConfig.resources.requests.cpu"),memory:(0,D.default)(a,"spec.kubernetesConfig.resources.requests.memory"),storage:(0,D.default)(a,"spec.storage.volumeClaimTemplate.spec.resources.requests.storage"),storageclass:(0,D.default)(a,"spec.storage.volumeClaimTemplate.spec.storageClassName"),shardsCount:(0,D.default)(a,"spec.clusterSize",0),replicasCount:(0,D.default)(a,"spec.clusterSize",1)-1,databaseVersionText:"Redis ".concat((0,D.default)(a,"spec.kubernetesConfig.redisVersion"))});case L.RadonDBAppId.MongoDB:return H(H({},i),{},{icon:"/assets/mongo-db.svg",cpu:(0,D.default)(a,"spec.statefulSet.spec.template.spec.containers[0].resources.requests.cpu"),memory:(0,D.default)(a,"spec.statefulSet.spec.template.spec.containers[0].resources.requests.memory"),storage:(0,D.default)(a,"spec.statefulSet.spec.volumeClaimTemplates[0].spec.resources.requests.storage"),storageclass:(0,D.default)(a,"spec.statefulSet.spec.volumeClaimTemplates[0].spec.storageClassName"),shardsCount:(0,D.default)(a,"spec.members",0),databaseVersionText:"MongoDB ".concat((0,D.default)(a,"spec.version"))});case L.RadonDBAppId.Elasticsearch:var T=(0,D.default)(a,"spec.nodeSets",[]).map((function(e){return{name:e.name,count:e.count,specifications:(0,D.default)(e,"podTemplate.spec.containers[0].resources.requests"),storage:(0,D.default)(e,"volumeClaimTemplates[0].spec.resources.requests.storage")}})),C={count:0,specifications:{memory:"4Gi",cpu:"2000m"},storage:"20Gi"},P=T.find((function(e){return e.name.includes("master")}))||H(H({},C),{},{specifications:{memory:"1Gi",cpu:"2000m"}}),N=T.find((function(e){return e.name.includes("hot")}))||C,I=T.find((function(e){return e.name.includes("warm")}))||C,w=T.find((function(e){return e.name.includes("cold")}))||C;return H(H({},i),{},{icon:"/assets/eck.svg",app_name:"ECK",databaseVersionText:"ES ".concat((0,D.default)(a,"spec.version")),nodes:{master:P.count,hot:N.count,warm:I.count,cold:w.count},specifications:{master:P.specifications,hot:N.specifications,warm:I.specifications,cold:w.specifications,kibana:{}},storages:{hot:N.storage,warm:I.storage,cold:w.storage},storageclass:(0,D.default)(a,"spec.nodeSets[0].volumeClaimTemplates[0].spec.storageClassName")});case L.RadonDBAppId.Kafka:var x=(0,D.default)(a,"spec.kafka.listeners[0].authentication.type"),M=l?"Running"===l||"Creating"===l?l:"Failed":"Unknown";return H(H({},i),{},{status:M,icon:"/assets/radondb_kafka.svg",databaseVersionText:"Kafka ".concat((0,D.default)(a,"spec.kafka.version")),authentication:x,tls:(0,D.default)(a,"spec.kafka.listeners[0].tls"),nodes:{kafka:(0,D.default)(a,"spec.kafka.replicas"),zookeeper:(0,D.default)(a,"spec.zookeeper.replicas")},specifications:{kafka:(0,D.default)(a,"spec.kafka.resources.requests"),zookeeper:(0,D.default)(a,"spec.zookeeper.resources.requests")},storages:{kafka:(0,D.default)(a,"spec.kafka.storage.volumes[0].size"),zookeeper:(0,D.default)(a,"spec.zookeeper.storage.size")},storageclass:(0,D.default)(a,"spec.kafka.storage.volumes[0].class")});case L.RadonDBAppId.OpenSearch:var j=(0,D.default)(a,"spec.nodePools",[]).map((function(e){return{name:(0,D.default)(e,'additionalConfig["node.attr.datatier"]'),count:e.replicas,specifications:(0,D.default)(e,"resources.requests"),storage:(0,D.default)(e,"diskSize")}})),U={count:0,specifications:{memory:"4Gi",cpu:"2000m"},storage:"20Gi"},B=j.find((function(e){return e.name.includes("master")}))||H(H({},U),{},{specifications:{memory:"2Gi",cpu:"1000m"}}),Y=j.find((function(e){return e.name.includes("hot")}))||U,F=j.find((function(e){return e.name.includes("warm")}))||U,V=j.find((function(e){return e.name.includes("cold")}))||U;return H(H({},i),{},{databaseVersionText:"OpenSearch ".concat((0,D.default)(a,"spec.general.version")),nodes:{master:B.count,hot:Y.count,warm:F.count,cold:V.count,dashboard:(0,D.default)(a,"spec.dashboards.replicas",0)},specifications:{master:B.specifications,hot:Y.specifications,warm:F.specifications,cold:V.specifications,dashboard:(0,D.default)(a,"spec.dashboards.resources.requests",{memory:"2Gi",cpu:"1000m"}),logstash:{}},storages:{hot:Y.storage,warm:F.storage,cold:V.storage},storageclass:(0,D.default)(a,"spec.nodePools[0].persistence.pvc.storageClass")});default:return H({},i)}},W=(g=function(e){(0,f.default)(a,e);var t=V(a);function a(){var e;(0,i.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).serviceStore=new j.default,e.podStore=new B.default,e.getWatchListUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace;return"apis/application.kubesphere.io/v1alpha1/watch/manifests?labelSelector=".concat((0,w.joinSelector)({"kubesphere.io/cluster":globals.app.isMultiCluster?t:null,"kubesphere.io/namespace":a}))},e.getWatchUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return"apis/application.kubesphere.io/v1alpha1/watch/manifests/".concat(t)},(0,l.default)(e,"fetchList",_,(0,d.default)(e)),(0,l.default)(e,"fetchDetail",y,(0,d.default)(e)),e.updateDetailService=function(e,t){if(0!==t.length){var a=(0,D.default)(t,"[0]",{});if(e.app_id===L.RadonDBAppId.ClickHouse)e.services=[{label:"READ_AND_WRITE_ADDRESS",value:"http://".concat(a.address),type:a.type},{label:"READ_AND_WRITE_ADDRESS",value:"http://".concat(a.serviceName,".").concat(a.namespace,":").concat(a.tcpPort),type:"ClusterIP"}];else if(e.app_id===L.RadonDBAppId.MySQL||e.app_id===L.RadonDBAppId.PostgreSQL){e.services=[{label:"READ_AND_WRITE_ADDRESS",value:a.address,type:a.type}];var r=(0,D.default)(t,"[1]");r&&e.services.push({label:"READ_ONLY_ADDRESS",value:r.address,type:r.type})}else if(e.app_id===L.RadonDBAppId.Elasticsearch){var n=(0,D.default)(t,"[1]");if(n){var o=[{label:"READ_AND_WRITE_ADDRESS",value:a.address,type:a.type}];o.push({label:"KIBANA_ADDRESS",value:n.address,type:n.type}),e.services=o}}else if(e.app_id===L.RadonDBAppId.RedisSentinel){var c=(0,D.default)(t,"[1]",{});e.services=[{label:"PRIMARY_ADDRESS",value:a.address,type:a.type},{label:"STANDBY_ADDRESS",value:c.address,type:a.type}]}else if(e.app_id===L.RadonDBAppId.RedisCluster){var s=[],l=t.length,i=t[l-1];if(i.serviceName.includes("proxy")?(t.splice(-1,1),l--):i=null,l>2)s=t.filter((function(e){return"NodePort"===e.type})).map((function(e){var t=(0,D.default)(e,'_originData.metadata.labels["statefulset.kubernetes.io/pod-name"]');return{label:["master","leader"].includes(e.role)?"PRIMARY_ADDRESS":"STANDBY_ADDRESS",value:t?"".concat(e.serviceName,".").concat(t,".").concat(e.namespace,".svc:").concat(e.tcpPort):e.address,type:e.type}}));else{var u=(0,D.default)(t,"[1]",{});s=[{label:"PRIMARY_ADDRESS",value:a.address,type:a.type},{label:"STANDBY_ADDRESS",value:u.address,type:a.type}]}i&&s.unshift({label:"READ_AND_WRITE_ADDRESS",value:i.address,type:i.type}),e.services=s}else if(e.app_id===L.RadonDBAppId.Kafka){var d=[{label:"READ_AND_WRITE_ADDRESS",value:a.address,type:a.type||"ClusterIP"}];"NodePort"===a.type&&d.push({label:"READ_AND_WRITE_ADDRESS",value:"".concat(a.serviceName,".").concat(a.namespace,":").concat(a.tcpPort),type:"NodePort"}),e.services=d}else if(e.app_id===L.RadonDBAppId.OpenSearch&&t.length>1){e.services=[{label:"READ_AND_WRITE_ADDRESS",value:a.address,type:a.type}];var f=(0,D.default)(t,"[1]");f&&e.services.push({label:"DASHBOARD_ADDRESS",value:f.address,type:f.type})}else e.services=[{label:"READ_AND_WRITE_ADDRESS",value:a.address,type:a.type||"ClusterIP"}]}else e.services=[]},(0,l.default)(e,"delete",E,(0,d.default)(e)),(0,l.default)(e,"batchDelete",b,(0,d.default)(e)),(0,l.default)(e,"patch",S,(0,d.default)(e)),(0,l.default)(e,"updateVersion",O,(0,d.default)(e)),(0,l.default)(e,"updateShardsCount",R,(0,d.default)(e)),(0,l.default)(e,"updateStorage",A,(0,d.default)(e)),(0,l.default)(e,"updateSpecifications",k,(0,d.default)(e)),e}return(0,u.default)(a,[{key:"getSecretUrl",value:function(e,t,a){return"/api".concat(globals.app.isMultiCluster&&e?"/clusters/".concat(e):"","/v1/namespaces/").concat(t,"/secrets/").concat(a)}},{key:"updateDetail",value:function(e){var t=e.detail,a=e.namespace,r=e.cluster,n=e.workspace;this.detail=H(H(H({},this.detail),K(t,n)),{},{namespace:a,cluster:r})}},{key:"getECKKibanaUrl",value:function(e,t,a){return"/apis".concat(globals.app.isMultiCluster&&e?"/clusters/".concat(e):"","/kibana.k8s.elastic.co/v1/namespaces/").concat(t,"/kibanas").concat(a?"/".concat(a):"")}},{key:"getLogstashUrl",value:function(e,t,a){return"/apis".concat(globals.app.isMultiCluster&&e?"/clusters/".concat(e):"","/opensearch.opster.io/v1/namespaces/").concat(t,"/logstashes").concat(a?"/".concat(a):"")}}]),a}(M.default),_=(0,h.default)(g.prototype,"fetchList",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,r,s,l,i,u,d,f,p,m,h,v,g,_,y,E=arguments;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=E.length>0&&void 0!==E[0]?E[0]:{},r=a.limit,s=a.page,l=a.workspace,i=a.cluster,u=a.namespace,d=a.more,f=a.status,p=a.reverse,m=(0,c.default)(a,["limit","page","workspace","cluster","namespace","more","status","reverse"]),e.list.isLoading=!0,h={conditions:(0,w.getFilterString)({status:f||e.defaultStatus})},(0,C.default)(m)||(v=(0,w.getFilterString)(m),h.conditions+=v?",".concat(v):""),r!==1/0&&(h.paging="limit=".concat(r||10,",page=").concat(s||1)),t.next=7,request.get((0,U.getManifestApi)({workspace:l,namespace:u,cluster:i}),h);case 7:return g=t.sent,(_=(g.items||[]).map((function(e){return H(H({},K(e,l)),{},{cluster:i})}))).sort((function(e,t){return m.ascending?(0,x.default)(e.creationTimestamp).isSameOrBefore(t.creationTimestamp)?-1:1:(0,x.default)(e.creationTimestamp).isSameOrBefore(t.creationTimestamp)?1:-1})),y=_.map((function(t){return e.serviceStore.fetchList({cluster:i,namespace:u,chi:t.name,app_id:t.app_id})})),t.next=13,Promise.all(y);case 13:return t.sent.forEach((function(t,a){e.updateDetailService(_[a],t)})),Object.assign(e.list,{data:d?[].concat((0,o.default)(e.list.data),(0,o.default)(_)):_,total:g.total_count||_.length,limit:Number(r)||10,page:Number(s)||1,reverse:p,filters:m,isLoading:!1,selectedRowKeys:[]}),t.abrupt("return",_);case 17:case"end":return t.stop()}}),t)})))}}),y=(0,h.default)(g.prototype,"fetchDetail",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,o,c,s,l,i,u,d,f,p,m,h,v,g,_,y,E,b,S;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,o=a.namespace,c=a.cluster,s=a.id,e.isLoading=!0,t.next=4,request.get((0,U.getManifestApi)({workspace:r,namespace:o,cluster:c,cluster_id:s}));case 4:return l=t.sent,e.updateDetail({detail:l,namespace:o,cluster:c,workspace:r}),t.next=8,e.podStore.fetchList({workspace:r,namespace:o,cluster:c,chi:s,app_id:e.detail.app_id});case 8:return i=t.sent,t.next=11,e.serviceStore.fetchList({cluster:c,namespace:o,chi:s,app_id:e.detail.app_id});case 11:return u=t.sent,t.next=14,request.get("/kapis".concat(globals.app.isMultiCluster?"/clusters/".concat(c):"","/resources.kubesphere.io/v1alpha3/storageclasses?sortBy=createTime"));case 14:if(d=t.sent,f=d.items.map((function(e){return{name:e.metadata.name,allowVolumeExpansion:e.allowVolumeExpansion}})),p=(0,D.default)(f.find((function(t){return t.name===e.detail.storageclass})),"allowVolumeExpansion",!1),m=(0,D.default)(i,"[0].capacity",e.detail.storage),e.detail.app_id!==L.RadonDBAppId.PostgreSQL){t.next=22;break}m=(0,D.default)(i.find((function(e){return e.name.includes("postgresql")})),"capacity",e.detail.storage),t.next=44;break;case 22:if(e.detail.app_id!==L.RadonDBAppId.Elasticsearch){t.next=36;break}return e.detail.realStorages={hot:(0,D.default)(i.find((function(e){return!0===(0,D.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-hot"]')})),"capacity",e.detail.storages.hot),warm:(0,D.default)(i.find((function(e){return!0===(0,D.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-warm"]')})),"capacity",e.detail.storages.warm),cold:(0,D.default)(i.find((function(e){return!0===(0,D.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-cold"]')})),"capacity",e.detail.storages.cold)},h={},t.next=27,request.get(e.getECKKibanaUrl(c,o,s));case 27:h=t.sent,v=(0,D.default)(h,"spec.count",0),e.detail.nodes.kibana=v,g=(0,D.default)(h,"spec.podTemplate.spec.containers[0].resources.requests"),parseInt(g.cpu,10)<100&&(g.cpu="".concat(1e3*parseInt(g.cpu,10),"m")),e.detail.specifications.kibana=g,p=!0,t.next=44;break;case 36:if(e.detail.app_id!==L.RadonDBAppId.OpenSearch){t.next=44;break}return t.next=39,request.get(e.getLogstashUrl(c,o,s));case 39:_=t.sent,e.detail.nodes.logstash=(0,D.default)(_,"spec.replicas",0),y=(0,D.default)(_,"spec.podTemplate.spec.containers[0].resources.requests"),parseInt(y.cpu,10)<100&&(y.cpu="".concat(1e3*parseInt(y.cpu,10),"m")),e.detail.specifications.logstash=y;case 44:if(e.updateDetailService(e.detail,u),E=null,e.detail.app_id!==L.RadonDBAppId.Kafka||!e.detail.tls){t.next=52;break}return t.next=49,request.get(e.getSecretUrl(c,o,"".concat(s,"-cluster-ca-cert")));case 49:b=t.sent,S=window.atob||I.safeAtob,E={cert:S((0,D.default)(b,'data["ca.p12"]',"")),password:S((0,D.default)(b,'data["ca.password"]',"")),validDate:(0,w.getLocalTime)((0,D.default)(b,"metadata.creationTimestamp")).add(3650,"d").format("YYYY.MM.DD")};case 52:e.detail=H(H({},e.detail),{},{allowVolumeExpansion:p,realStorage:m,secret:E}),e.isLoading=!1;case 54:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),E=(0,h.default)(g.prototype,"delete",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.workspace,r=t.cluster_id,n=t.cluster,o=t.namespace,c=t.name;return e.submitting(request.delete((0,U.getManifestApi)({workspace:a,namespace:o,cluster_id:r||c,cluster:n})))}}}),b=(0,h.default)(g.prototype,"batchDelete",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=a.workspace,n=a.namespace,o=a.cluster;return e.submitting(Promise.all(t.map((function(e){return request.delete((0,U.getManifestApi)({workspace:r,namespace:n,cluster:o,cluster_id:e}))}))))}}}),S=(0,h.default)(g.prototype,"patch",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a,r){var o,c,s,l,i,u;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.workspace,c=r.cluster_id,s=r.cluster,l=r.namespace,i=r.description,t.next=3,request.get((0,U.getManifestApi)({workspace:o,namespace:l,cluster_id:c,cluster:s}));case 3:return(u=t.sent).description=i,u.version+=1,t.next=8,request.put((0,U.getManifestApi)({workspace:o,namespace:l,cluster_id:c,cluster:s}),u);case 8:e.updateDetail({detail:u,namespace:l,cluster:s,workspace:o});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),O=(0,h.default)(g.prototype,"updateVersion",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,o,c,s,l,i,u,d,f,p;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,o=a.cluster_id,c=a.workspace,s=a.namespace,t.next=3,request.get((0,U.getManifestApi)({workspace:c,namespace:s,cluster_id:o,cluster:r}));case 3:l=t.sent,i=JSON.parse(l.customResource),t.t0=a.app_id,t.next=t.t0===L.RadonDBAppId.OpenSearch?8:22;break;case 8:return(0,T.default)(i,"spec.general.version","2.8.0"),(0,T.default)(i,"spec.dashboards.version","2.8.0"),(0,T.default)(i,"spec.confMgmt.forceRestart",!0),u=e.getLogstashUrl(r,s,o),t.next=14,request.get(u);case 14:return d=t.sent,f={name:"exporter",resources:{requests:{memory:"400Mi",cpu:"200m"},limits:{memory:"400Mi",cpu:"200m"}}},p=(0,D.default)(d,"spec.podTemplate.spec.containers"),(0,P.default)(p,(function(e){return"exporter"===e.name}))||(p.push(f),(0,T.default)(d,"spec.podTemplate.spec.containers",p)),t.next=21,request.put(u,d);case 21:case 22:return t.abrupt("break",23);case 23:return l.customResource=JSON.stringify(i),l.version+=1,t.next=27,request.put((0,U.getManifestApi)({workspace:c,namespace:s,cluster_id:o,cluster:r}),l);case 27:e.updateDetail({detail:l,namespace:s,cluster:r,workspace:c});case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),R=(0,h.default)(g.prototype,"updateShardsCount",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,c,s,l,i,u,d,f,p,m,h,v,g,_,y,E,b,S,O,R,A,k,C,P;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,c=a.cluster_id,s=a.cluster,l=a.namespace,i=a.shardsCount,u=a.nodeRole,d=a.specifications,f=a.storage,t.next=3,request.get((0,U.getManifestApi)({workspace:r,namespace:l,cluster_id:c,cluster:s}));case 3:p=t.sent,m=JSON.parse(p.customResource),t.t0=e.detail.app_id,t.next=t.t0===L.RadonDBAppId.ClickHouse?8:t.t0===L.RadonDBAppId.PostgreSQL?11:t.t0===L.RadonDBAppId.MySQL?13:t.t0===L.RadonDBAppId.RedisCluster?15:t.t0===L.RadonDBAppId.RedisSentinel?18:t.t0===L.RadonDBAppId.MongoDB?21:t.t0===L.RadonDBAppId.Elasticsearch?23:t.t0===L.RadonDBAppId.Kafka?51:t.t0===L.RadonDBAppId.OpenSearch?53:78;break;case 8:return h=(0,D.default)(m,"spec.configuration.clusters[0].layout"),(0,T.default)(m,"spec.configuration.clusters[0].layout",H(H({},h),{},{shardsCount:i})),t.abrupt("break",79);case 11:return(0,T.default)(m,"spec.postgresql.readwriteinstance.replicas",i),t.abrupt("break",79);case 13:return(0,T.default)(m,"spec.replicas",i),t.abrupt("break",79);case 15:return v=(0,L.getCpuAndMemoryFromSpecifications)(d),"proxy"===u?((0,T.default)(m,"spec.redisProxy.replicas",i),(0,T.default)(m,"spec.redisProxy.resources.requests",v),(0,T.default)(m,"spec.redisProxy.resources.limits",v),i>0&&(0,T.default)(m,"spec.redisProxy.enabled",!0)):((0,T.default)(m,"spec.clusterSize",i),(0,T.default)(m,"spec.redisLeader.replicas",i),(0,T.default)(m,"spec.redisFollower.replicas",i)),t.abrupt("break",79);case 18:return(0,T.default)(m,"spec.clusterSize",i),(0,T.default)(m,"spec.redisReplica.replicas",i),t.abrupt("break",79);case 21:return(0,T.default)(m,"spec.members",i),t.abrupt("break",79);case 23:if(g=(0,L.getCpuAndMemoryFromSpecifications)(d),"kibana"!==u){t.next=36;break}return _=e.getECKKibanaUrl(s,l,c),t.next=28,request.get(_);case 28:return y=t.sent,(0,T.default)(y,"spec.count",i),(0,T.default)(y,"spec.podTemplate.spec.containers[0].resources.requests",g),(0,T.default)(y,"spec.podTemplate.spec.containers[0].resources.limits",g),t.next=34,request.put(_,y);case 34:return e.detail.nodes.kibana=i,t.abrupt("return");case 36:if(E=(0,D.default)(m,"spec.nodeSets",[]),b=E.find((function(e){return e.name.startsWith(u)}))){t.next=46;break}if(S=(0,D.default)(Y.eckYaml.resources,"spec.nodeSets",[]),b=S.find((function(e){return e.name.startsWith(u)}))){t.next=43;break}return t.abrupt("break",79);case 43:b=JSON.parse(JSON.stringify(b)),(0,T.default)(b,"volumeClaimTemplates[0].spec.storageClassName",(0,D.default)(E,"[0].volumeClaimTemplates[0].spec.storageClassName")),(0,T.default)(m,"spec.nodeSets",[].concat((0,o.default)(E),[b]));case 46:return(0,T.default)(b,"count",i),(0,T.default)(b,"podTemplate.spec.containers[0].resources",{limits:g,requests:g}),(0,T.default)(b,"podTemplate.spec.containers[0].env[0].value","-Xms".concat(parseInt(g.memory,10)/2,"g -Xmx").concat(parseInt(g.memory,10)/2,"g")),(0,T.default)(b,"volumeClaimTemplates[0].spec.resources.requests.storage",f),t.abrupt("break",79);case 51:return(0,T.default)(m,"spec.".concat(u,".replicas"),i),t.abrupt("break",79);case 53:if(O=(0,L.getCpuAndMemoryFromSpecifications)(d),"logstash"!==u){t.next=66;break}return R=e.getLogstashUrl(s,l,c),t.next=58,request.get(R);case 58:return A=t.sent,(0,T.default)(A,"spec.replicas",i),(0,T.default)(A,"spec.podTemplate.spec.containers[0].resources",{requests:O,limits:O}),t.next=63,request.put(R,A);case 63:return e.detail.nodes.logstash=i,e.detail=H({},e.detail),t.abrupt("return");case 66:if("dashboard"!==u){t.next=71;break}return i>0&&(0,T.default)(m,"spec.dashboards.enable",!0),(0,T.default)(m,"spec.dashboards.replicas",i),(0,T.default)(m,"spec.dashboards.resources",{requests:O,limits:O}),t.abrupt("break",79);case 71:return k=(0,D.default)(m,"spec.nodePools",[]),(C=k.find((function(e){return(0,D.default)(e,'additionalConfig["node.attr.datatier"]')===u})))||(P=(0,D.default)(k,"[0].persistence.pvc.storageClass"),C=JSON.parse(JSON.stringify(F.opensearchYaml.node)),(0,T.default)(C,'additionalConfig["node.attr.datatier"]',u),(0,T.default)(C,"component","data-node-".concat(u)),(0,T.default)(C,"persistence.pvc.storageClass",P),(0,T.default)(m,"spec.nodePools",[].concat((0,o.default)(k),[C]))),(0,T.default)(C,"replicas",i),(0,T.default)(C,"resources",{limits:O,requests:O}),(0,T.default)(C,"diskSize",f),t.abrupt("break",79);case 78:return t.abrupt("break",79);case 79:return p.customResource=JSON.stringify(m),p.version+=1,t.next=83,request.put((0,U.getManifestApi)({workspace:r,namespace:l,cluster_id:c,cluster:s}),p);case 83:e.updateDetail({detail:p,namespace:l,cluster:s,workspace:r});case 84:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),A=(0,h.default)(g.prototype,"updateStorage",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,o,c,s,l,i,u,d,f,p,m,h;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,o=a.cluster_id,c=a.cluster,s=a.namespace,l=a.storage,i=a.nodeRole,t.next=3,request.get((0,U.getManifestApi)({workspace:r,namespace:s,cluster_id:o,cluster:c}));case 3:u=t.sent,d=JSON.parse(u.customResource),parseFloat(l)<10&&(l="10Gi"),t.t0=e.detail.app_id,t.next=t.t0===L.RadonDBAppId.ClickHouse?9:t.t0===L.RadonDBAppId.PostgreSQL?11:t.t0===L.RadonDBAppId.MySQL?13:t.t0===L.RadonDBAppId.RedisCluster||t.t0===L.RadonDBAppId.RedisSentinel?15:t.t0===L.RadonDBAppId.MongoDB?17:t.t0===L.RadonDBAppId.Elasticsearch?19:t.t0===L.RadonDBAppId.Kafka?23:t.t0===L.RadonDBAppId.OpenSearch?25:29;break;case 9:return(0,T.default)(d,"spec.templates.volumeClaimTemplates[0].spec.resources.requests.storage",l),t.abrupt("break",30);case 11:return(0,T.default)(d,"spec.postgresql.readwriteinstance.volumeClaimTemplates[0].spec.resources.requests.storage",l),t.abrupt("break",30);case 13:return(0,T.default)(d,"spec.persistence.size",l),t.abrupt("break",30);case 15:return(0,T.default)(d,"spec.storage.volumeClaimTemplate.spec.resources.requests.storage",l),t.abrupt("break",30);case 17:return(0,T.default)(d,"spec.statefulSet.spec.volumeClaimTemplates[0].spec.resources.requests.storage",l),t.abrupt("break",30);case 19:return f=(0,D.default)(d,"spec.nodeSets",[]),(p=f.find((function(e){return e.name.startsWith(i)})))&&((0,T.default)(p,"volumeClaimTemplates[0].spec.resources.requests.storage",l),(0,T.default)(p,"name","".concat(i,"-").concat(l.toLowerCase()))),t.abrupt("break",30);case 23:return"kafka"===i?(0,T.default)(d,"spec.kafka.storage.volumes[0].size",l):(0,T.default)(d,"spec.zookeeper.storage.size",l),t.abrupt("break",30);case 25:return m=(0,D.default)(d,"spec.nodePools",[]),h=m.find((function(e){return(0,D.default)(e,'additionalConfig["node.attr.datatier"]')===i})),(0,T.default)(h,"diskSize",l),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:return u.customResource=JSON.stringify(d),u.version+=1,t.next=34,request.put((0,U.getManifestApi)({workspace:r,namespace:s,cluster_id:o,cluster:c}),u);case 34:i?(0,T.default)(e.detail,"realStorages[".concat(i,"]"),l):e.detail.realStorage=l,e.updateDetail({detail:u,namespace:s,cluster:c,workspace:r});case 36:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),k=(0,h.default)(g.prototype,"updateSpecifications",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,o,c,s,l,i,u,d,f,p,m,h,v,g,_,y,E;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,o=a.cluster_id,c=a.cluster,s=a.namespace,l=a.specifications,i=a.nodeRole,u=(0,L.getCpuAndMemoryFromSpecifications)(l),t.next=4,request.get((0,U.getManifestApi)({workspace:r,namespace:s,cluster_id:o,cluster:c}));case 4:d=t.sent,f=JSON.parse(d.customResource),t.t0=e.detail.app_id,t.next=t.t0===L.RadonDBAppId.ClickHouse?9:t.t0===L.RadonDBAppId.PostgreSQL?12:t.t0===L.RadonDBAppId.MySQL?14:t.t0===L.RadonDBAppId.RedisCluster?17:t.t0===L.RadonDBAppId.RedisSentinel?19:t.t0===L.RadonDBAppId.MongoDB?22:t.t0===L.RadonDBAppId.Elasticsearch?25:t.t0===L.RadonDBAppId.Kafka?40:t.t0===L.RadonDBAppId.OpenSearch?43:60;break;case 9:return(0,T.default)(f,"spec.templates.podTemplates[0].spec.containers[0].resources.limits",u),(0,T.default)(f,"spec.templates.podTemplates[0].spec.containers[0].resources.requests",u),t.abrupt("break",61);case 12:return(0,T.default)(f,"spec.postgresql.readwriteinstance.podspec.containers[0].resources",{requests:u,limits:u}),t.abrupt("break",61);case 14:return(0,T.default)(f,"spec.mysqlOpts.resources.requests",u),(0,T.default)(f,"spec.mysqlOpts.resources.limits",u),t.abrupt("break",61);case 17:return"proxy"===i?((0,T.default)(f,"spec.redisProxy.resources.requests",u),(0,T.default)(f,"spec.redisProxy.resources.limits",u)):((0,T.default)(f,"spec.kubernetesConfig.resources.requests",u),(0,T.default)(f,"spec.kubernetesConfig.resources.limits",u)),t.abrupt("break",61);case 19:return(0,T.default)(f,"spec.kubernetesConfig.resources.requests",u),(0,T.default)(f,"spec.kubernetesConfig.resources.limits",u),t.abrupt("break",61);case 22:return(0,T.default)(f,"spec.statefulSet.spec.template.spec.containers[0].resources.requests",u),(0,T.default)(f,"spec.statefulSet.spec.template.spec.containers[0].resources.limits",u),t.abrupt("break",61);case 25:if("kibana"!==i){t.next=36;break}return p=e.getECKKibanaUrl(c,s,o),t.next=29,request.get(p);case 29:return m=t.sent,(0,T.default)(m,"spec.podTemplate.spec.containers[0].resources.requests",u),(0,T.default)(m,"spec.podTemplate.spec.containers[0].resources.limits",u),t.next=34,request.put(p,m);case 34:return e.detail.specifications.kibana=u,t.abrupt("return");case 36:return h=(0,D.default)(f,"spec.nodeSets",[]),(v=h.find((function(e){return e.name.startsWith(i)})))&&((0,T.default)(v,"podTemplate.spec.containers[0].resources",{limits:u,requests:u}),(0,T.default)(v,"podTemplate.spec.containers[0].env[0].value","-Xms".concat(parseInt(u.memory,10)/2,"g -Xmx").concat(parseInt(u.memory,10)/2,"g"))),t.abrupt("break",61);case 40:return(0,T.default)(f,"spec.".concat(i,".resources.requests"),u),(0,T.default)(f,"spec.".concat(i,".resources.limits"),u),t.abrupt("break",61);case 43:if("logstash"!==i){t.next=53;break}return g=e.getLogstashUrl(c,s,o),t.next=47,request.get(g);case 47:return _=t.sent,(0,T.default)(_,"spec.podTemplate.spec.containers[0].resources",{requests:u,limits:u}),t.next=51,request.put(g,_);case 51:return e.detail=H({},e.detail),t.abrupt("return");case 53:if("dashboard"!==i){t.next=56;break}return(0,T.default)(f,"spec.dashboards.resources",{requests:u,limits:u}),t.abrupt("break",61);case 56:return y=(0,D.default)(f,"spec.nodePools",[]),E=y.find((function(e){return(0,D.default)(e,'additionalConfig["node.attr.datatier"]')===i})),(0,T.default)(E,"resources",{limits:u,requests:u}),t.abrupt("break",61);case 60:return t.abrupt("break",61);case 61:return d.customResource=JSON.stringify(f),d.version+=1,t.next=65,request.put((0,U.getManifestApi)({workspace:r,namespace:s,cluster_id:o,cluster:c}),d);case 65:e.updateDetail({detail:d,namespace:s,cluster:c,workspace:r});case 66:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g);t.default=W},1433:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(84),r(18),r(48),r(16),r(27),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(18),r(28),r(48),r(42),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(7);var o=n(r(43)),c=n(r(31)),s=n(r(58));r(41);var l,i,u,d=n(r(44)),f=n(r(65)),p=n(r(36)),m=n(r(37)),h=n(r(88)),v=n(r(55)),g=n(r(56)),_=n(r(51)),y=n(r(49)),E=(n(r(66)),n(r(26))),b=r(14),S=n(r(68)),O=r(434),R=r(816);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var D=(l=function(e){(0,v.default)(a,e);var t=T(a);function a(){var e;(0,p.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).resourceName="db_services",(0,f.default)(e,"data",i,(0,h.default)(e)),e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.cluster,r=t.namespace,n=t.chi,o=t.app_id,c="".concat(e.baseUrl).concat(e.getPath({cluster:a,namespace:r}),"/pods?labelSelector=");return c+=e.getLabelSelector(o,n)},e.getWatchListUrl=function(t){var a=t.namespace,r=t.cluster,n=t.app_id,o=t.chi;return"api/v1/watch/klusters/".concat(r,"/namespaces/").concat(a,"/pods?labelSelector=").concat(e.getLabelSelector(n,o))},(0,f.default)(e,"fetchList",u,(0,h.default)(e)),e}return(0,m.default)(a,[{key:"getPath",value:function(e){var t=e.namespace,a=e.cluster,r="";return globals.app.isMultiCluster&&a&&(r+="/clusters/".concat(a)),r+="/v1",t&&(r+="/namespaces/".concat(t)),r}},{key:"getCapacityUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=e.chi,n=e.app_id,o="".concat(this.baseUrl).concat(this.getPath({cluster:t,namespace:a}),"/persistentvolumeclaims?labelSelector=");return o+=this.getLabelSelector(n,r,!0)}},{key:"getLabelSelector",value:function(e,t,a){switch(e){case R.RadonDBAppId.ClickHouse:return"clickhouse.radondb.com/zooKeeper!=zookeeper,clickhouse.radondb.com/chi=".concat(t);case R.RadonDBAppId.PostgreSQL:return"app-name=".concat(t);case R.RadonDBAppId.RedisCluster:case R.RadonDBAppId.RedisSentinel:return"redis.radondb.com/name=".concat(t);case R.RadonDBAppId.Elasticsearch:return"elasticsearch.k8s.elastic.co/cluster-name=".concat(t);case R.RadonDBAppId.Kafka:return"app.kubernetes.io/instance=".concat(t,"".concat(a?"":",strimzi.io/controller=strimzipodset"));default:return"app.kubernetes.io/instance=".concat(t)}}},{key:"baseUrl",get:function(){return"/api"}}]),a}(S.default),i=(0,y.default)(l.prototype,"data",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,y.default)(l.prototype,"fetchList",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(o.default.mark((function a(){var r,n,c,l,i,u,d,f,p,m,h,v,g,_,y,b,S,A=arguments;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=A.length>0&&void 0!==A[0]?A[0]:{},n=r.esKibana,c=(0,s.default)(r,["esKibana"]),a.next=3,request.get(e.getUrl(c));case 3:return l=a.sent,a.next=6,request.get(e.getCapacityUrl(c));case 6:if(i=a.sent,e.isLoading=!0,u=c.dataFilters||{},d=u.limit,f=void 0===d?10:d,p=u.page,m=void 0===p?1:p,h=(0,s.default)(u,["limit","page"]),v={items:[]},g={items:[]},!n){a.next=19;break}return _=c.cluster,y=c.namespace,b=c.chi,a.next=15,request.get("".concat(e.baseUrl).concat(e.getPath({cluster:_,namespace:y}),"/pods?labelSelector=common.k8s.elastic.co/type=kibana,kibana.k8s.elastic.co/name=").concat(b));case 15:return v=a.sent,a.next=18,request.get("".concat(e.baseUrl).concat(e.getPath({cluster:_,namespace:y}),"/persistentvolumeclaims?labelSelector=common.k8s.elastic.co/type=kibana,kibana.k8s.elastic.co/name=").concat(b));case 18:g=a.sent;case 19:return S=l.items.concat(v.items||[]).map((function(e){var a=(0,E.default)(e,"metadata.labels.role"),r="",n=["leader","master","LEADER","primary"].includes(a)?t("PRIMARY_NODE"):t("STANDBY_NODE");if(c.app_id===R.RadonDBAppId.PostgreSQL)"autofailover"===(r=(0,E.default)(e,'metadata.labels["node-name"]'))&&(n=t("MANAGEMENT_NODE"));else if(c.app_id===R.RadonDBAppId.RedisSentinel)"master"===(0,E.default)(e,'metadata.labels["redis.radondb.com/role"]')&&(n=t("PRIMARY_NODE")),"sentinel"===a&&(n=t("SENTINEL_NODE"));else if(c.app_id===R.RadonDBAppId.Elasticsearch)"true"===(0,E.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-master"]')?(n=t("PRIMARY_NODE"),r="master"):"true"===(0,E.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-data_hot"]')?(n=t("HOT_NODE"),r="hot"):"true"===(0,E.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-data_warm"]')?(n=t("WARM_NODE"),r="warm"):"true"===(0,E.default)(e,'metadata.labels["elasticsearch.k8s.elastic.co/node-data_cold"]')?(n=t("COLD_NODE"),r="cold"):"kibana"===(0,E.default)(e,'metadata.labels["common.k8s.elastic.co/type"]')&&(n=t("KIBANA_NODE"),r="kibana");else if(c.app_id===R.RadonDBAppId.Kafka)"kafka"===(0,E.default)(e,'metadata.labels["app.kubernetes.io/name"]')?(n=t("KAFKA_NODE"),r="kafka"):"zookeeper"===(0,E.default)(e,'metadata.labels["app.kubernetes.io/name"]')&&(n=t("ZOOKEEPER_NODE"),r="zookeeper");else if(c.app_id===R.RadonDBAppId.OpenSearch){var o=(0,E.default)(e,'metadata.labels["opster.io/opensearch-nodepool"]');"data-node-hot"===o?(n=t("HOT_NODE"),r="hot"):"data-node-warm"===o?(n=t("WARM_NODE"),r="warm"):"data-node-cold"===o?(n=t("COLD_NODE"),r="cold"):"masters"===o&&(n=t("PRIMARY_NODE"),r="master"),(0,E.default)(e,'metadata.labels["opensearch.opster.io/logstash"]')&&(r="logstash",n=t("LOGSTASH_NODE")),(0,E.default)(e,'metadata.labels["opensearch.cluster.dashboards"]')&&(r="dashboard",n=t("DASHBOARD_NODE"),v.items.push(e))}var s="proxy"===(0,E.default)(e,"metadata.labels.redis_setup_type","");s&&(n=t("PROXY_NODE"));var l=(0,O.getPodStatusAndRestartCount)(e);return{name:e.metadata.name,creationTimestamp:e.metadata.creationTimestamp,status:(0,E.default)(l,"type","creating"),ip:e.status.podIP,spec:(0,E.default)(e,"spec.containers[0].resources.limits",{cpu:"",memory:""}),serviceName:e.spec.subdomain,capacity:(0,E.default)(i.items.concat(g.items||[]).find((function(t){return t.metadata.name.includes(e.metadata.name)||t.metadata.name===(0,E.default)(e,"metadata.labels[deployment-name]")})),"status.capacity.storage"),canDelete:c.app_id!==R.RadonDBAppId.ClickHouse,deploymentName:(0,E.default)(e,"metadata.labels[deployment-name]"),noMonitoring:(0,E.default)(v,"items",[]).includes(e),isPredixy:s,roleText:n,nodeRole:r}})).filter((function(e){var t=!0;if(c.app_id===R.RadonDBAppId.Elasticsearch&&e.name.includes("exporter")&&(t=!1),h)for(var a in h)if(e[a]&&!(t=e[a].includes(h[a])))break;return t})),e.list.update(k({data:S.slice((m-1)*f,m*f),total:S.length||0,filters:h,limit:Number(f),page:Number(m),isLoading:!1},e.list.silent?{}:{selectedRowKeys:[]})),e.data=S,e.isLoading=!1,a.abrupt("return",S);case 24:case"end":return a.stop()}}),a)})))}}),l);a.default=D},1441:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(9),a(4),a(23),a(57),a(17);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(49)),d=a(14);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var p=(n=function(e){(0,s.default)(a,e);var t=f(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).module="microservices",e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/services").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/services")},e}return(0,c.default)(a,[{key:"getNacosConfig",value:function(e){var t=e.cluster,a="apis/clusters/".concat(t,"/aggregated.springcloud.kubesphere.io/v1alpha1/configs/nacos");return request.get(a)}},{key:"apiVersion",get:function(){return"apis/aggregated.springcloud.kubesphere.io/v1alpha1"}}]),a}(r(a(1053)).default),(0,u.default)(n.prototype,"getNacosConfig",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"getNacosConfig"),n.prototype),n);t.default=p},1442:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(9),a(4),a(23),a(57),a(17);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(49)),d=a(14);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var p=(n=function(e){(0,s.default)(a,e);var t=f(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).module="microservicegateways",e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/gateways").concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/gateways")},e.getWatchListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion,"/watch").concat(e.getPath(t),"/gateways")},e}return(0,c.default)(a,[{key:"scale",value:function(e,t){var a={spec:{deployment:{replicas:t}}};return this.submitting(request.patch(this.getDetailUrl(e),a))}}]),a}(r(a(1053)).default),(0,u.default)(n.prototype,"scale",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"scale"),n.prototype),n);t.default=p},1443:function(e,t,a){e.exports={wrapper:"_1uaaKr3Qydwsg51ILBRYCg",tabs:"_3nJI9guJPMvk12Q7gjPZmU",tab:"_2O3IP_JlAV9AbTpuDHMXIl",on:"dtWNnffgqT6fXfJMluy0E",disc:"rNqC-zU5OV0lmTkB9WeqN",dictitle:"_26zXEdaVS1OkdX0T2prDH0",rulemenu:"_2hk_pGWlc9LZSlUNVZpB_L",rulebody:"_200wgR_dslfHnyTKUfp3CE",rulegroup:"_1aEBcghuz30TE0D3S8j9b1",subtitle:"_1o0TorXdL5BiqInf6gl9xV",disp:"_3gRCidjr27U-JF2kva4mez",row:"_2GRO4qEEEL8YVdvR1abyMa",prow:"_1ZcG7g_ZKJsG2z9VAyV3lg",cell:"_2L-swNbTQv9wN1kfqt6Onb",pcell:"_1y3YJPFi3g8WpOYzgcBbsx",port:"_3IK-Z28rsJJ9d3IbUC984X",avatar:"_3Em1hnqijkxpfnBYfFZO18"}},1444:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(30),a(18),a(16),a(9),a(13),a(10),a(4),a(22),a(23),a(17),a(38),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(30),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(38),a(7),a(32);var n=r(a(43)),o=r(a(31)),c=r(a(58));a(41);var s,l,i,u=r(a(44)),d=r(a(65)),f=r(a(36)),p=r(a(37)),m=r(a(88)),h=r(a(55)),v=r(a(56)),g=r(a(51)),_=r(a(49)),y=(r(a(66)),r(a(26))),E=r(a(74)),b=r(a(198)),S=r(a(63)),O=r(a(855)),R=r(a(480)),A=a(14),k=a(52),T=a(72),D=r(a(105));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var I=(s=function(e){(0,h.default)(s,e);var t,a,r=N(s);function s(){var e;(0,f.default)(this,s);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a)),(0,d.default)(e,"isComponentsLoading",l,(0,m.default)(e)),(0,d.default)(e,"components",i,(0,m.default)(e)),e.module="strategies",e}return(0,p.default)(s,[{key:"fetchList",value:(a=(0,u.default)(n.default.mark((function e(t){var a,r,o,s,l,i,u=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.cluster,r=t.namespace,o=t.selector,s=(0,c.default)(t,["cluster","namespace","selector"]),this.list.isLoading=!0,r){e.next=5;break}return this.list.isLoading=!1,e.abrupt("return");case 5:return l=s,(0,S.default)(o)||(l.labelSelector=(0,k.joinSelector)(o)),e.next=9,request.get(this.getListUrl({cluster:a,namespace:r}),l);case 9:i=e.sent,this.list.update({data:i.items.map((function(e){return P(P({},u.mapper(e)),{},{cluster:a})})),total:i.items.length,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchMetrics",value:function(e){var t=e.cluster,a=e.namespace,r=e.newWorkloadName,n=e.oldWorkloadName,o=e.protocol,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Math.floor((new Date).getTime()/1e3),l=P({queryTime:s,duration:300,step:30,rateInterval:"30s","filters[]":["request_count","request_duration","request_error_count","tcp_sent","tcp_received"],direction:"inbound",reporter:"destination"},c);return"http"===o&&(l.requestProtocol="http"),Promise.all([request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(r,"/metrics"),l),request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(n,"/metrics"),l)])}},{key:"fetchHealth",value:function(e){var t=e.cluster,a=e.namespace,r=e.newWorkloadName,n=e.oldWorkloadName,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=P({rateInterval:"30s"},o);return Promise.all([request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(r,"/health"),c),request.get("kapis/servicemesh.kubesphere.io/v1alpha2".concat(this.getPath({cluster:t,namespace:a}),"/workloads/").concat(n,"/health"),c)])}},{key:"fetchComponents",value:(t=(0,u.default)(n.default.mark((function e(t){var a,r,s,l,i,u,d,f,p,m,h,v,g,_,y;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cluster,s=t.namespace,l=t.labelSelector,i=t.newVersion,u=t.oldVersion,d=t.service,f=t.silent,p=(0,c.default)(t,["cluster","namespace","labelSelector","newVersion","oldVersion","service","silent"]),!f&&(this.isComponentsLoading=!0),s){e.next=5;break}return this.isComponentsLoading=!1,e.abrupt("return");case 5:return m=p,(0,S.default)(l)||(m.labelSelector=l),e.next=9,request.get("api/v1".concat(this.getPath({cluster:r,namespace:s}),"/pods"),m);case 9:h=e.sent,v=h.items.map(D.default.pods),g=(0,O.default)(v,"labels.version"),_=g[i]||[],y=g[u]||[],this.components.data=(a={},(0,o.default)(a,i,{name:d,version:i,pods:_,desire:_.length,available:_.filter((function(e){return"Running"===e.status.phase})).length}),(0,o.default)(a,u,{name:d,version:u,pods:y,desire:y.length,available:y.filter((function(e){return"Running"===e.status.phase})).length}),a),this.isComponentsLoading=!1;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"create",value:function(e,t){var a,r=t.cluster,n=t.namespace;if((0,b.default)(e,"strategy")&&(a=request.post(this.getListUrl({cluster:r,namespace:n}),e.strategy)),(0,b.default)(e,"workload")){var o=(0,y.default)(e,"workload.kind","Deployment"),c=(0,R.default)(T.MODULE_KIND_MAP,(function(e){return e===o}))||"deployments";a.then(request.post("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(c),e.workload))}return this.submitting(a)}},{key:"update",value:function(e,t){var a=e.name,r=e.cluster,n=e.namespace,o=e.newWorkloadName,c=e.newVersion,s=e.resourceVersion,l=[],i="";if((0,b.default)(t,"workload")){var u=(0,y.default)(t,"workload.kind","Deployment"),d=(0,R.default)(T.MODULE_KIND_MAP,(function(e){return e===u}))||"deployments";if((i=(0,y.default)(t.workload,"metadata.labels.version"))===c){var f=(0,y.default)(t.workload,"metadata.name");l.push(request.put("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(d,"/").concat(f),t.workload))}else l.push(request.delete("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(d,"/").concat(o)),request.post("apis/apps/v1".concat(this.getPath({cluster:r,namespace:n}),"/").concat(d),t.workload))}if((0,b.default)(t,"strategy")){if((0,E.default)(t.strategy,"metadata.resourceVersion",s),i&&i!==c)(0,y.default)(t.strategy,"spec.governor")===c&&(0,E.default)(t.strategy,"spec.governor",i),((0,y.default)(t.strategy,"spec.template.spec.http")||(0,y.default)(t.strategy,"spec.template.spec.tcp",[])).forEach((function(e){e.route&&e.route.length>0&&e.route.forEach((function(e){(0,y.default)(e,"destination.subset")===c&&(0,E.default)(e,"destination.subset",i)})),e.mirror&&e.mirror.subset===c&&(e.mirror.subset=i)}));l.push(request.put(this.getDetailUrl({name:a,cluster:r,namespace:n}),t.strategy))}return this.submitting(Promise.all(l))}}]),s}(r(a(68)).default),l=(0,_.default)(s.prototype,"isComponentsLoading",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i=(0,_.default)(s.prototype,"components",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{}}}}),(0,_.default)(s.prototype,"fetchList",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchList"),s.prototype),(0,_.default)(s.prototype,"fetchMetrics",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchMetrics"),s.prototype),(0,_.default)(s.prototype,"fetchHealth",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchHealth"),s.prototype),(0,_.default)(s.prototype,"fetchComponents",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchComponents"),s.prototype),(0,_.default)(s.prototype,"create",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"create"),s.prototype),(0,_.default)(s.prototype,"update",[A.action],Object.getOwnPropertyDescriptor(s.prototype,"update"),s.prototype),s);t.default=I},1445:function(e,t,a){e.exports={tag:"_3TU-AgwZKhTYBj4DFyGaYd",title:"_369ph_E2DAX2y_NpgwxabT",chart:"_277fRQi2DOGBy4yI3roVrO",chartDetail:"U6o8umlM6uCM_XaU0JaNm",circle:"_1xjLL8SyJTU8mVCMJafm71",leftPane:"_3De3dzq3-ZtBdXNIpWKeK7",selected:"_1Rq06DmTF8zwtDrYhm_Jm4",tip:"_2_wSsLRObqXFZ_kT0eXPhg"}},1446:function(e,t,a){e.exports={wrapper:"NIYOp_3ZpxtucxFOhGDxS",image:"_12zpgu_3ah3oONNKLDWl4c",footer:"_2R2JnOZA8qwhANxwDqziDW",items:"_3HAAkylLBWtyi2Ulicm5mP",item:"_3ap2A7wsdNinxlpfOJWRN8",icon:"_1dvmRmxMSb9SuqZATuQ3M4",iconExtra:"-pMYsB5LXpaiC807PW5sd",title:"_33LJI1QvrcWsEKm2a6JbX1",left:"_3u7seBT_Bxszz6-KADL9rG",right:"_1CV-q62afWGICi54uwkQM-",versions:"_1N38nS5eFjvxklmLdiNBJi",tag:"_10BSpN1wSXatPsR4gumtiH",loading:"_3oncm8IhLXZJiwMH55s8mf",chart:"_20slDQ31DTSOgN5QFZMsWa",chartDetail:"bGmKWnw69cnOMBg1gKklH",circle:"_2au74k5NIUPy1uZMIhmp4j",tip:"_6o9I9WEuv9Q3iooA87p-2"}},1447:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var o,c,s,l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(1)),h=n(r(63)),v=r(239),g=r(186),_=n(r(789)),y=n(r(443)),E=r(52),b=n(r(4736)),S=n(r(1910));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=(0,v.observer)((s=c=function(e){(0,u.default)(r,e);var a=O(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e.getData=function(){var t=e.props,a=t.selector,r=t.cluster,n=t.namespace;(0,h.default)(a)||e.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:(0,E.joinSelector)(a)})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,a=this.store.list,r=a.data,n=a.isLoading;return(0,h.default)(r)&&!n?p.default.createElement("div",{className:S.default.empty},t("EMPTY_WRAPPER",{resource:t("SERVICE")})):p.default.createElement(g.Loading,{spinning:n},p.default.createElement("div",{className:S.default.content},r.map((function(t){return p.default.createElement(b.default,{key:t.uid,prefix:e,detail:t})}))))}},{key:"render",value:function(){var e=this.props.className;return p.default.createElement(_.default,{className:e,title:t("SERVICE_PL")},this.renderContent())}}]),r}(p.default.Component),c.propTypes={className:m.default.string,prefix:m.default.string,selector:m.default.object},c.defaultProps={prefix:"",selector:{}},o=s))||o;a.default=R},1448:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var o=n(r(43));r(41);var c,s,l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(1)),g=r(239),_=n(r(63)),y=n(r(454)),E=n(r(789)),b=r(52),S=n(r(917)),O=n(r(834)),R=n(r(4738));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,g.observer)((l=s=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={gateway:{}},e.store=new S.default,e.gatewayStore=new O.default,e.getData=(0,i.default)(o.default.mark((function t(){var a,r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.namespace,c=a.selector,(0,_.default)(c)){t.next=8;break}return s={cluster:r,namespace:n,labelSelector:(0,b.joinSelector)(c)},t.next=5,e.gatewayStore.getNewGatewayByProject({cluster:r,namespace:n});case 5:l=t.sent,e.setState({gateway:l}),e.store.fetchListByK8s(s);case 8:case"end":return t.stop()}}),t)}))),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,t=this.store.list.data,a=this.state.gateway;return(0,_.default)(t)?null:t.map((function(t){var r=(0,y.default)(a,(function(e){return e.ingressClass===t.ingressClassName}));return h.default.createElement(R.default,{key:t.name,prefix:e,detail:t,gateway:r})}))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=this.renderContent();return n?h.default.createElement(E.default,{className:a,title:r||t("ROUTE_PL")},n):null}}]),r}(h.default.Component),s.propTypes={className:v.default.string,prefix:v.default.string,selector:v.default.object,title:v.default.string},s.defaultProps={prefix:""},c=l))||c;a.default=k},1449:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var o,c,s,l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(1)),h=n(r(63)),v=r(239),g=n(r(831)),_=n(r(789)),y=r(52),E=n(r(4740)),b=n(r(1911));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=(0,v.observer)((s=c=function(e){(0,u.default)(r,e);var a=S(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new g.default,e.getData=function(){var t=e.props,a=t.selector,r=t.cluster,n=t.namespace;(0,h.default)(a)||e.store.fetchListByK8s({cluster:r,namespace:n,labelSelector:(0,y.joinSelector)(a)})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"renderContent",value:function(){var e=this.props.prefix,t=this.store.list.data;return(0,h.default)(t)?null:p.default.createElement("div",{className:b.default.content},t.map((function(t,a){return p.default.createElement(E.default,{key:a,volume:t,prefix:e})})))}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=this.renderContent();return n?p.default.createElement(_.default,{className:a,title:r||t("VOLUME_PL")},n):null}}]),r}(p.default.Component),c.propTypes={className:m.default.string,title:m.default.string,selector:m.default.object},c.defaultProps={className:""},o=s))||o;a.default=O},1888:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(30),a(18),a(16),a(27),a(137),a(9),a(13),a(10),a(4),a(22),a(23),a(17),a(38),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(43)),o=r(a(61)),c=r(a(58));a(41);var s=r(a(44)),l=r(a(65)),i=r(a(36)),u=r(a(37)),d=r(a(88)),f=r(a(55)),p=r(a(56)),m=r(a(51)),h=r(a(49));r(a(66));a(12),a(45),a(5),a(11),a(6),a(30),a(18),a(28),a(245),a(42),a(16),a(27),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(38),a(7),a(32);var v,g,_,y,E,b=r(a(31)),S=r(a(26)),O=r(a(63)),R=a(14),A=a(52),k=r(a(458));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,b.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={creating:"Creating",created:"Creating",active:"Running",failed:"Failed",deleting:"Deleting",upgrading:"Upgrading",upgraded:"Upgrading",deployed:"Running"},N=function(e){var t=(0,S.default)(e,"cluster.status");return C(C(C({},e),e.cluster),{},{selector:{"application.kubesphere.io/instance":e.cluster.name},status:P[t]})},I=(v=function(e){(0,f.default)(a,e);var t=T(a);function a(){var e;(0,i.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).getWatchListUrl=function(t){var a=t.cluster,r=t.namespace;return"".concat(e.baseUrl).concat(e.getPath({namespace:r,cluster:a}),"/releases?watch=true")},e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.namespace,r=t.cluster,n=t.name,o="".concat(e.baseUrl).concat(e.getPath({namespace:a,cluster:r}),"/applications");return n?"".concat(o,"/").concat(n):o},e.getDeleteUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.workspace,r=t.namespace,n=t.cluster,o=t.name,c="".concat(e.baseUrl).concat(e.getDeletePath({workspace:a,namespace:r,cluster:n}),"/applications");return o?"".concat(c,"/").concat(o):c},(0,l.default)(e,"fetchList",g,(0,d.default)(e)),(0,l.default)(e,"fetchDetail",_,(0,d.default)(e)),(0,l.default)(e,"delete",y,(0,d.default)(e)),(0,l.default)(e,"batchDelete",E,(0,d.default)(e)),e}return(0,u.default)(a,[{key:"getPath",value:function(e){var t=e.cluster,a=e.namespace,r="";return globals.app.isMultiCluster&&t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"getDeletePath",value:function(e){var t=e.workspace,a=e.cluster,r=e.namespace,n="";return t&&(n+="/workspaces/".concat(t)),globals.app.isMultiCluster&&a&&(n+="/clusters/".concat(a)),r&&(n+="/namespaces/".concat(r)),n}},{key:"baseUrl",get:function(){return"kapis/native.helm/v1alpha1"}}]),a}(k.default),g=(0,h.default)(v.prototype,"fetchList",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var a,r,s,l,i,u,d,f,p,m,h,v,g,_,y,E=arguments;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=E.length>0&&void 0!==E[0]?E[0]:{},r=a.limit,s=a.page,l=a.cluster,i=a.namespace,u=a.workspace,d=a.more,f=a.status,p=a.sortBy,m=a.reverse,h=(0,c.default)(a,["limit","page","cluster","namespace","workspace","more","status","sortBy","reverse"]),e.list.isLoading=!0,v={conditions:(0,A.getFilterString)({status:f})||void 0},p||void 0!==m||(p="status_time"),(0,O.default)(h)||(g=(0,A.getFilterString)(h))&&(v.conditions+=",".concat(g)),r!==1/0&&(v.paging="limit=".concat(r||10,",page=").concat(s||1)),p&&(v.orderBy=p),m&&(v.reverse=!0),t.next=10,request.get(e.getUrl({namespace:i,cluster:l}),v);case 10:return _=t.sent,y=(_.items||[]).map((function(e){return C(C({},N(e)),{},{workspace:u,cluster:l})})),Object.assign(e.list,{data:d?[].concat((0,o.default)(e.list.data),(0,o.default)(y)):y,total:_.total_count||0,limit:Number(r)||10,page:Number(s)||1,order:p,reverse:m,filters:h,selectedRowKeys:[]}),e.list.isLoading=!1,t.abrupt("return",y);case 15:case"end":return t.stop()}}),t)})))}}),_=(0,h.default)(v.prototype,"fetchDetail",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,s.default)(n.default.mark((function t(a){var r,o,c,s,l;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,o=a.namespace,c=a.cluster,s=a.name,e.isLoading=!0,t.next=4,request.get(e.getUrl({namespace:o,cluster:c,name:s}));case 4:l=t.sent,e.detail=C(C({},N(l)),{},{workspace:r,namespace:o,cluster:c}),e.isLoading=!1;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),y=(0,h.default)(v.prototype,"delete",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.name,r=t.cluster,n=t.workspace,o=t.zone;return e.submitting(request.delete(e.getDeleteUrl({namespace:o,name:a,cluster:r,workspace:n})))}}}),E=(0,h.default)(v.prototype,"batchDelete",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=a.namespace,n=a.cluster,o=a.workspace;return e.submitting(Promise.all(t.map((function(t){return request.delete(e.getDeleteUrl({namespace:r,cluster:n,workspace:o,name:t}))}))))}}}),v);t.default=I},1899:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(26)),f=n(r(0)),p=r(239),m=r(317),h=n(r(961)),v=n(r(792)),g=n(r(1609));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,l.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showDeployApp:!1,sampleApp:""},e.store=new h.default,e.hideDeployAppModal=function(){e.setState({showDeployApp:!1,sampleApp:""})},e.handleDeployApp=function(t){var a=e.props.match.params,r=a.workspace,n=a.cluster,o=a.namespace;e.store.create(t).then((function(){e.hideDeployAppModal(),e.routing.push("/".concat(r,"/clusters/").concat(n,"/projects/").concat(o,"/composing/").concat((0,d.default)(t,"application.metadata.name")))}))},e.showDeploySampleApp=function(){e.setState({showDeployApp:!0,sampleApp:"bookinfo"})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.route,a=this.state,r=a.showDeployApp,n=a.sampleApp,o=this.props.match.params,c=o.cluster,s=o.namespace;return f.default.createElement("div",null,f.default.createElement(v.default,{icon:"bird",module:"grayrelease",title:t("GRAYSCALE_RELEASE"),description:t("GRAYSCALE_RELEASE_DESC"),tips:this.tips,routes:e.routes}),(0,m.renderRoutes)(e.routes),f.default.createElement(g.default,{store:this.store,visible:r,namespace:s,cluster:c,sampleApp:n,onOk:this.handleDeployApp,onCancel:this.hideDeployAppModal,isSubmitting:this.store.isSubmitting}))}},{key:"tips",get:function(){return[{title:t("PREREQUEST_FOR_USE_GRAYRELEASE_Q"),description:t("PREREQUEST_FOR_USE_GRAYRELEASE_A")}]}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(f.default.Component))||o)||o;a.default=y},1900:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(18),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var n=r(a(43)),o=r(a(61)),c=r(a(31)),s=r(a(58));a(41);var l,i=r(a(44)),u=r(a(36)),d=r(a(37)),f=r(a(55)),p=r(a(56)),m=r(a(51)),h=r(a(49)),v=a(72),g=r(a(26)),_=a(14);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var S=(l=function(e){(0,f.default)(r,e);var t,a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).module="configurations",e.getListResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.listApiVersion).concat(e.getPath(t),"/").concat(e.module)},e}return(0,d.default)(r,[{key:"fetchList",value:(t=(0,i.default)(n.default.mark((function e(){var t,a,r,c,l,i,u,d,f,p=this,m=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,r=t.workspace,c=t.namespace,l=t.more,i=t.devops,u=(0,s.default)(t,["cluster","workspace","namespace","more","devops"]),this.list.isLoading=!0,u.sortBy||void 0!==u.ascending||(u.sortBy=v.LIST_DEFAULT_ORDER[this.module]||"createTime"),u.limit!==1/0&&-1!==u.limit||(u.limit=-1,u.page=1),u.limit=u.limit||10,u.page=u.page||1,e.next=8,request.get(this.getListResourceUrl({cluster:a,workspace:r,namespace:c,devops:i}),this.getFilterParams(u));case 8:return d=e.sent,f=((0,g.default)(d,"items")||[]).map((function(e){return E({cluster:a,namespace:c},p.mapper(e))})),this.list.update(E(E({data:l?[].concat((0,o.default)(this.list.data),(0,o.default)(f)):f,total:d.totalItems||d.total_count||f.length||0},u),{},{limit:Number(u.limit)||10,page:Number(u.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"rollBack",value:function(e,t){e.module;var a=(0,s.default)(e,["module"]);return this.submitting(request.patch(this.getDetailUrl(a),t))}},{key:"listApiVersion",get:function(){return"apis/aggregated.springcloud.kubesphere.io/v1alpha1"}}]),r}(r(a(1053)).default),(0,h.default)(l.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),(0,h.default)(l.prototype,"rollBack",[_.action],Object.getOwnPropertyDescriptor(l.prototype,"rollBack"),l.prototype),l);t.default=S},1901:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(18),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var n=r(a(43)),o=r(a(61)),c=r(a(31)),s=r(a(58));a(41);var l,i=r(a(44)),u=r(a(36)),d=r(a(37)),f=r(a(55)),p=r(a(56)),m=r(a(51)),h=r(a(49)),v=r(a(26)),g=a(72),_=a(14);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var S=(l=function(e){(0,f.default)(r,e);var t,a=b(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).module="gatewayrouteconfigs",e.getListResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.listApiVersion).concat(e.getPath(t),"/").concat(e.module)},e}return(0,d.default)(r,[{key:"fetchList",value:(t=(0,i.default)(n.default.mark((function e(){var t,a,r,c,l,i,u,d,f,p=this,m=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,r=t.workspace,c=t.namespace,l=t.more,i=t.devops,u=(0,s.default)(t,["cluster","workspace","namespace","more","devops"]),this.list.isLoading=!0,u.sortBy||void 0!==u.ascending||(u.sortBy=g.LIST_DEFAULT_ORDER[this.module]||"createTime"),u.limit!==1/0&&-1!==u.limit||(u.limit=-1,u.page=1),u.limit=u.limit||10,u.page=u.page||1,e.next=8,request.get(this.getListResourceUrl({cluster:a,workspace:r,namespace:c,devops:i}),this.getFilterParams(u));case 8:return d=e.sent,f=((0,v.default)(d,"items")||[]).map((function(e){return E({cluster:a,namespace:c},p.mapper(e))})),this.list.update(E(E({data:l?[].concat((0,o.default)(this.list.data),(0,o.default)(f)):f,total:d.totalItems||d.total_count||f.length||0},u),{},{limit:Number(u.limit)||10,page:Number(u.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"listApiVersion",get:function(){return"apis/aggregated.springcloud.kubesphere.io/v1alpha1"}}]),r}(r(a(1053)).default),(0,h.default)(l.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),l);t.default=S},1902:function(e,t,a){e.exports={listWrapper:"_306SJ8014hcSqWLICeoQA",item:"WDWTymPoLAk-NQaV-aiJT",col:"_3D8OkQ4Q7A-gzFzxd-vk68",statusBox:"_3qTllmrJpXsLHpT_-vq2bz",taints:"_1QLp3UgzsreIUcdgtIi6PQ",overview:"_1_WQtAn7QzNo8GxtaUlItg",resource:"QKy3dkJINg9lS382QMPIE",name:"_2Bfv6QYK-ju5cdp3QTu_vM",status:"_1pqlIBzzPmu3gQVb79O-Y_",cpu:"_1sKADynqdyHmISVoZg-Ts8",pods:"_4a-eEXscRDVajQp1U3zb8",empty:"_2rmLYtfLiXo3OI9AFcR07S",icon:"_3ylajECHnbMgeDYGzkNFwb",title:"_3c9b_Ta0BkrA6TrJaCxqXI"}},1903:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(26)),p=n(r(74)),m=n(r(800)),h=n(r(0)),v=r(239),g=r(186),_=n(r(1684)),y=n(r(932)),E=n(r(318)),b=r(52),S=r(72),O=n(r(4674)),R=n(r(4676));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var k=(0,v.observer)(o=function(e){(0,i.default)(r,e);var a=A(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).versionValidator=function(e,a,r){if(!a)return r();var o=(0,f.default)(n.formTemplate,"metadata.labels.app",""),c="".concat(o,"-").concat(a);n.workloadStore.checkName({name:c,namespace:n.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NEW_VERSION_NUMBER_EXIST_DESC",{name:c}),field:e.field});r()}))},n.handleVersionChange=(0,m.default)((function(e){var t=(0,f.default)(n.formTemplate,"metadata.labels.app",""),a="".concat(t,"-").concat(e);(0,p.default)(n.formTemplate,"metadata.name",a),(0,b.mergeLabels)(n.formTemplate,{version:e}),(0,p.default)(n.props.formTemplate,'strategy.metadata.annotations["servicemesh.kubesphere.io/newWorkloadName"]',a)}),200),n.module=(0,f.default)(e.formTemplate,'strategy.metadata.annotations["servicemesh.kubesphere.io/workloadType"]',"deployments"),n.workloadStore=new E.default(n.module),n}return(0,l.default)(r,[{key:"renderReplicasControl",value:function(){return h.default.createElement(g.Column,{className:"is-narrow"},h.default.createElement(g.Form.Item,{className:R.default.narrow,label:t("NEW_VERSION_NUMBER"),desc:t("NEW_VERSION_NUMBER_DESC"),rules:[{required:!0,message:t("NEW_VERSION_NUMBER_EMPTY_DESC")},{pattern:S.PATTERN_COMPONENT_VERSION,message:t("NEW_VERSION_NUMBER_INVALID_DESC")},{validator:this.versionValidator}]},h.default.createElement(g.Input,{name:"metadata.labels.version",onChange:this.handleVersionChange,disabled:this.isEdit,maxLength:16})),h.default.createElement("div",{className:R.default.specify},h.default.createElement(g.Form.Item,null,h.default.createElement(_.default,{name:"spec.replicas"}))))}},{key:"renderContainerList",value:function(){var e=(0,f.default)(this.formTemplate,"".concat(this.prefix,"spec"));return h.default.createElement(g.Column,null,h.default.createElement(g.Form.Item,{rules:[{validator:this.containersValidator}]},h.default.createElement(O.default,{className:R.default.containers,name:"".concat(this.prefix,"spec.containers"),onShow:this.showContainer,onDelete:this.handleDelete,specTemplate:e,disabled:this.isEdit})))}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=this.state,n=r.showContainer,o=r.selectContainer;return n?this.renderContainerForm(o):h.default.createElement(g.Form,(0,c.default)({data:this.formTemplate,ref:t},a),h.default.createElement(g.Columns,null,this.renderReplicasControl(),this.renderContainerList()))}},{key:"formTemplate",get:function(){return this.props.formTemplate.workload||{}}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}}]),r}(y.default))||o;a.default=k},1904:function(e,t,a){e.exports={list:"_1y7srBKDMimPCBz1ivcnXL",card:"_1CNnvTpcwGUSGgDJtaTxgE",inputs:"_3JM-KVcZd0CJ9NCBQTJ3r",limits:"_36BBL6z_siYtS2MY-CTltL",limit:"qFBDqsZYRUQVnqH4lnOAL"}},1905:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n,o=r(a(315)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=a(239),p=r(a(26)),m=r(a(4677)),h=r(a(4688)),v=r(a(4692));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _={Canary:m.default,Bluegreen:h.default,Mirror:v.default},y=(0,f.observer)(n=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=_[this.strategyType];return r?d.default.createElement(r,(0,o.default)({formRef:t,formTemplate:this.formTemplate},a)):null}},{key:"strategyType",get:function(){return(0,p.default)(this.formTemplate,"strategy.spec.type","")}},{key:"formTemplate",get:function(){return this.props.formTemplate}}]),a}(d.default.Component))||n;t.default=y},1906:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(63)),f=n(r(0)),p=r(186),m=r(239),h=n(r(240)),v=n(r(833)),g=n(r(4694)),_=n(r(1444)),y=n(r(4704)),E=n(r(1446));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var R=function(e){(0,l.default)(r,e);var a=O(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).showDetail=function(e){n.setState({showDetailModal:!0,selectItem:S(S({},e),{},{workspace:n.workspace})})},n.hideDetail=function(){n.setState({showDetailModal:!1,selectItem:{}},(function(){n.getData()}))},n.handleDelete=function(){n.store.delete(n.state.selectItem).then((function(){h.default.success({content:"".concat(t("DELETED_SUCCESSFULLY"))}),n.hideDetail()}))},n.showCreateGrayReleaseJob=function(){var e=n.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;n.props.rootStore.routing.push("/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/grayrelease/cates"))},n.state={showDetailModal:!1,selectItem:{}},n.store=new _.default,n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){this.store.fetchList({namespace:this.namespace,cluster:this.cluster})}},{key:"renderHeader",value:function(){return null}},{key:"renderEmpty",value:function(){return f.default.createElement(v.default,{icon:"istio",title:t("NO_GRAYSCALE_RELEASE_TASK_FOUND"),desc:t("NO_GRAYSCALE_RELEASE_TASK_FOUND_DESC"),actions:this.canCreate?f.default.createElement(p.Button,{type:"control",onClick:this.showCreateGrayReleaseJob},t("CREATE")):null})}},{key:"renderContent",value:function(){var e=this,t=this.store.list,a=t.data;return t.isLoading?f.default.createElement(p.Loading,{className:E.default.loading}):(0,d.default)(a)?this.renderEmpty():f.default.createElement("div",{className:E.default.items},a.map((function(t){return f.default.createElement(y.default,{key:t.name,data:t,onClick:e.showDetail,store:e.store})})))}},{key:"renderFooter",value:function(){var e=this.store.list.total;return f.default.createElement("div",{className:E.default.footer},f.default.createElement("p",null,t("TOTAL_ITEMS",{num:e})))}},{key:"render",value:function(){return f.default.createElement("div",null,this.renderHeader(),this.renderContent(),this.renderFooter(),f.default.createElement(g.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetail,onDelete:this.handleDelete}))}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.getActions({cluster:t,workspace:a,project:r,module:"applications"}).includes("edit")&&this.serviceMeshEnable}},{key:"serviceMeshEnable",get:function(){return globals.app.hasClusterModule(this.cluster,"servicemesh")}}]),r}(f.default.Component),A=(0,m.inject)("rootStore")((0,m.observer)(R));a.default=A;var k=R;a.Component=k},1907:function(e,t,a){e.exports={wrapper:"_1FRrrBxl8UqvsswigK4p6Z",header:"_17yDbHoZkGlCh5TkvVpYH0",title:"_1ND4Co3PGwICLYv_4P9q5o",right:"_3DW67iu4ZbODnkFe0_ZzTW",pods:"_2dJagf8ndTpszvQ1fnOpg_",metric:"_3MWAAAkSCUGt62thgWlL4o",icon:"_22V6MJt30xmcn4CU7xZ5Es",status:"_22doJB7j2BHvCiBEcyoKJO",running:"_3UPN8mbj93pxkXP4kJvdXs",updating:"S6AbHUgraNCIVXqWPgLCD",offline:"_15G7mRB5qpNeQrLLnQFLb5"}},1908:function(e,t,a){e.exports={main:"_3FVOoLe3AtEM-Ina_k0TMi",header:"_1QxSokFr00ZeqXzWJWKu5q",search:"_1mqfzqGxwtNfLoj7bNsrB7",actions:"_29olG9fpd8VsjgYCku9KLj",body:"_19qKNuGn_wGSaaXk3xQEqV",footer:"_30i7Etan9B--N4_rAJheqh",item:"_3tEAiD42QbObcriYbTfY_M",loading:"_1t63vAEjKcTB-Gyk1gZlf9",empty:"_2hMfNIZo0mxOzUKquFdREn",icon:"_1oqKJow1T-rUFNanaf-bgh",indicator:"_2bn9NbI3HEU5Te6h2A51lR",text:"_2SiqpOgGzdA0d3-7TXkxGG",name:"Wqj5utzxUOoQ8ZFnW24ly"}},1909:function(e,t,a){e.exports={wrapper:"lV1cQZAoKlYmok5suxT3C",envWrapper:"Ee3TtlJeR1l1vuPChKVHs"}},1910:function(e,t,a){e.exports={content:"s1iKHdiKYS2KAnOGr2xOi",item:"_3B11hCO238i0BN6mQcovhe"}},1911:function(e,t,a){e.exports={content:"_3EopWXM9d6_WAtA5H6rBsx",item:"DU1A13TYH9JFcLds2K7oM"}},1926:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(84),a(73),a(18),a(48),a(320),a(16),a(27),a(137),a(9),a(13),a(10),a(4),a(23),a(17),a(85),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(43)),o=r(a(58));a(41);var c=r(a(44)),s=r(a(65)),l=r(a(36)),i=r(a(37)),u=r(a(88)),d=r(a(55)),f=r(a(56)),p=r(a(51)),m=r(a(49)),h=(r(a(66)),r(a(31)));a(12),a(45),a(5),a(11),a(6),a(84),a(73),a(18),a(28),a(245),a(48),a(320),a(442),a(191),a(42),a(16),a(159),a(27),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(85),a(1429),a(7),a(1430),a(1431),a(1432);var v,g,_,y,E,b,S=a(14),O=r(a(26)),R=r(a(74)),A=r(a(446)),k=r(a(242)),T=r(a(68)),D=a(440),C=a(816),P=a(1015);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={apiVersion:"mysql.radondb.com/v1alpha1",kind:"Backup",metadata:{annotations:{"kubesphere.io/alias-name":""},name:"",namespace:""},spec:{clusterName:"",image:"larryhuang142/mysql57-sidecar:v202205301443"}},M={Started:"Creating",Complete:"Success"},L=function(e,t){var a=t.app_id,r=t.workspace,n=t.namespace,o=t.cluster,c={name:(0,O.default)(e,"metadata.name"),createAt:(0,O.default)(e,"metadata.creationTimestamp"),app_id:a,workspace:r,namespace:n,cluster:o},s=(0,A.default)((0,O.default)(e,"status.conditions"),"lastTransitionTime").reverse();switch(a){case C.RadonDBAppId.MySQL:return w(w({},c),{},{status:M[(0,O.default)(s,"[0].type","Creating")]||"Failed",completeAt:(0,O.default)(s,"[0].lastTransitionTime"),restoreParams:{restoreFrom:(0,O.default)(e,"status.backupName")}});case C.RadonDBAppId.PostgreSQL:return w(w({},c),{},{name:e.backup_id,createAt:new Date(e.begin_time),size:e.size,repoPath:e.repoPath,status:"Success",completeAt:new Date(e.end_time),restoreParams:{restoreFrom:e.repoPath,restoreTarget:e.name},specifications:"".concat((0,O.default)(e,"cpu"),", ").concat((0,O.default)(e,"memory")),volume:(0,O.default)(e,"pvc_size"),nodes:(0,O.default)(e,"replicas")});default:return c}},j=(v=function(e){(0,d.default)(a,e);var t=N(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).yamlJSONObj=void 0,e.getUrl=function(t){switch(t.app_id){case C.RadonDBAppId.MySQL:return e.getMysqlBackupUrl(t);case C.RadonDBAppId.PostgreSQL:return e.getPGBackupUrl(t);default:return""}},e.getWatchListUrl=function(e){var t=e.cluster_id,a=e.cluster,r=e.name,n=e.app_id,o=e.namespace;switch(n){case C.RadonDBAppId.MySQL:return"/apis".concat(globals.app.isMultiCluster&&a?"/clusters/".concat(a):"","/mysql.radondb.com/v1alpha1/watch/namespaces/").concat(o,"/backups").concat(r?"/".concat(r):"?labelSelector=cluster=".concat(t));default:return""}},(0,s.default)(e,"fetchList",g,(0,u.default)(e)),(0,s.default)(e,"add",_,(0,u.default)(e)),(0,s.default)(e,"delete",y,(0,u.default)(e)),(0,s.default)(e,"batchDelete",E,(0,u.default)(e)),(0,s.default)(e,"autoBackup",b,(0,u.default)(e)),e}return(0,i.default)(a,[{key:"getMysqlBackupUrl",value:function(e){var t=e.cluster_id,a=e.cluster,r=e.namespace,n=e.name;return"/apis".concat(globals.app.isMultiCluster&&a?"/clusters/".concat(a):"","/mysql.radondb.com/v1alpha1/namespaces/").concat(r,"/backups").concat(n?"/".concat(n):"?labelSelector=cluster=".concat(t))}},{key:"getPGBackupUrl",value:function(e){var t=e.cluster_id,a=e.cluster,r=e.namespace;return"/apis".concat(globals.app.isMultiCluster&&a?"/clusters/".concat(a):"","/postgres.radondb.io/v1/namespaces/").concat(r,"/postgresqls").concat(t?"/".concat(t):"")}}]),a}(T.default),g=(0,m.default)(v.prototype,"fetchList",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,c.default)(n.default.mark((function t(){var a,r,c,s,l,i,u,d,f,p,m,h,v,g,_,y,E=arguments;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=E.length>0&&void 0!==E[0]?E[0]:{},r=a.limit,c=void 0===r?10:r,s=a.page,l=void 0===s?1:s,i=a.workspace,u=a.cluster,d=a.namespace,a.more,a.status,f=a.reverse,p=a.id,m=a.app_id,h=(0,o.default)(a,["limit","page","workspace","cluster","namespace","more","status","reverse","id","app_id"]),e.list.isLoading=!0,v=[],m!==C.RadonDBAppId.PostgreSQL){t.next=10;break}return t.next=6,request.get(e.getUrl({app_id:m,workspace:i,namespace:d,cluster:u,cluster_id:p}));case 6:g=t.sent,v=(0,O.default)(g,"status.backups_list",[]).reverse(),t.next=14;break;case 10:return t.next=12,request.get(e.getUrl({app_id:m,workspace:i,namespace:d,cluster:u,cluster_id:p}));case 12:_=t.sent,v=_.items?_.items.sort((function(e,t){return new Date(t.metadata.creationTimestamp).getTime()-new Date(e.metadata.creationTimestamp).getTime()})):[];case 14:return y=v.map((function(e){return w(w({},L(e,{app_id:m,workspace:i,namespace:d,cluster:u})),{},{cluster:u})})).filter((function(e){return!h.keyword||(0,O.default)(e,"name","").includes(h.keyword)})),Object.assign(e.list,{data:y.slice((l-1)*c,l*c),total:y.length,limit:Number(c)||10,page:Number(l)||1,reverse:f,filters:h,selectedRowKeys:[]}),e.list.isLoading=!1,t.abrupt("return",y);case 18:case"end":return t.stop()}}),t)})))}}),_=(0,m.default)(v.prototype,"add",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,c.default)(n.default.mark((function t(a){var r,o,c,s,l,i,u,d,f,p,m,h,v,g,_;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.name,o=a.namespace,c=a.cluster_id,s=a.alias,l=a.image,t.t0=a.app_id,t.next=t.t0===C.RadonDBAppId.MySQL?4:t.t0===C.RadonDBAppId.PostgreSQL?14:38;break;case 4:return i=JSON.parse(JSON.stringify(x)),(0,R.default)(i,"metadata.name","".concat(c.substring(0,30),"-").concat(r)),(0,R.default)(i,"metadata.namespace",o),(0,R.default)(i,'metadata.annotations["kubesphere.io/alias-name"]',s),(0,R.default)(i,"spec.clusterName",c),(0,R.default)(i,'metadata.labels["cluster"]',c),(0,R.default)(i,"spec.image",l),t.next=13,request.post(e.getUrl(a),i);case 13:return t.abrupt("break",39);case 14:return u=window.atob||D.safeAtob,t.next=17,request.get((0,P.getManifestApi)(a));case 17:return d=t.sent,t.next=20,request.get((0,P.getDmpSecrets)({namespace:"dmp-system",cluster_id:"dmp-managed-s3-secret"}));case 20:return f=t.sent,p=u((0,O.default)(f,"data.s3-access-key")),m=u((0,O.default)(f,"data.s3-secret-key")),h=u((0,O.default)(f,"data.pg-s3-bucket")),v=u((0,O.default)(f,"data.s3-endpoint")),g=JSON.parse(d.customResource),_=(0,O.default)(g,"spec.backupCluster.backupToS3.manual.trigger-id",1),(0,R.default)(g,"spec.S3.ACCESS_KEY",p),(0,R.default)(g,"spec.S3.SECRET_KEY",m),(0,R.default)(g,"spec.S3.BUCKET",h),(0,R.default)(g,"spec.S3.ENDPOINT",v),(0,R.default)(g,"spec.S3.PATH","".concat(o,"/backup")),(0,R.default)(g,"spec.backupCluster.backupToS3.manual.trigger-id",_+1),d.customResource=JSON.stringify(g),d.version+=1,t.next=37,request.put((0,P.getManifestApi)(a),d);case 37:case 38:return t.abrupt("break",39);case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),y=(0,m.default)(v.prototype,"delete",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,c.default)(n.default.mark((function t(a){var r,o,c;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a.app_id,t.next=t.t0===C.RadonDBAppId.MySQL?3:t.t0===C.RadonDBAppId.PostgreSQL?6:17;break;case 3:return t.next=5,request.delete(e.getUrl(a));case 5:return t.abrupt("break",18);case 6:return r=(0,P.getManifestApi)(w(w({},a),{},{cluster_id:a.id})),t.next=9,request.get(r);case 9:return o=t.sent,c=JSON.parse(o.customResource),(0,R.default)(c,"spec.backupToDelete","".concat(Date.now(),"|").concat(a.name)),o.customResource=JSON.stringify(c),o.version+=1,t.next=16,request.put(r,o);case 16:case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),E=(0,m.default)(v.prototype,"batchDelete",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,c.default)(n.default.mark((function e(t){var a,r,c,s,l,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.selectedItems,r=void 0===a?[]:a,c=(0,o.default)(t,["selectedItems"]),s=(0,P.getManifestApi)(w(w({},c),{},{cluster_id:c.id})),e.next=4,request.get(s);case 4:l=e.sent,e.t0=c.app_id,e.next=e.t0===C.RadonDBAppId.PostgreSQL?8:15;break;case 8:return i=JSON.parse(l.customResource),(0,R.default)(i,"spec.backupToDelete","".concat(Date.now(),"|").concat(r.map((function(e){return e.name})).join("|"))),l.customResource=JSON.stringify(i),l.version+=1,e.next=14,request.put(s,l);case 14:case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,m.default)(v.prototype,"autoBackup",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,c.default)(n.default.mark((function e(t){var a,r,c,s,l,i,u;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.backupSchedule,r=t.retentionTime,c=(0,o.default)(t,["backupSchedule","retentionTime"]),s=(0,P.getManifestApi)(c),e.next=4,request.get(s);case 4:l=e.sent,e.t0=c.app_id,e.next=e.t0===C.RadonDBAppId.PostgreSQL?8:e.t0===C.RadonDBAppId.MySQL?15:22;break;case 8:return i=JSON.parse(l.customResource),""!==a?((0,R.default)(i,"spec.backupCluster.backupToS3.cron.enable",!0),(0,R.default)(i,"spec.backupCluster.backupToS3.cron.schedule",a),(0,R.default)(i,"spec.backupCluster.backupToS3.policy.retention","RECOVERY WINDOW OF ".concat(r," DAYS"))):((0,k.default)(i,"spec.backupCluster.backupToS3.cron"),(0,R.default)(i,"spec.backupCluster.backupToS3.policy.retention","REDUNDANCY 10")),l.customResource=JSON.stringify(i),l.version+=1,e.next=14,request.put(s,l);case 14:return e.abrupt("break",23);case 15:return u=JSON.parse(l.customResource),(0,R.default)(u,"spec.backupSchedule",a?"0 ".concat(a):""),l.customResource=JSON.stringify(u),l.version+=1,e.next=21,request.put(s,l);case 21:case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v);t.default=j},1927:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(29),a(6),a(84),a(73),a(18),a(87),a(48),a(16),a(27),a(931),a(137),a(98),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(85),a(64),a(136),a(75),a(812),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(249),a(45),a(5),a(11),a(29),a(6),a(84),a(73),a(18),a(28),a(87),a(48),a(191),a(42),a(16),a(159),a(27),a(931),a(137),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(193),a(17),a(85),a(64),a(75),a(812),a(7);var n=r(a(58)),o=r(a(96)),c=r(a(31)),s=r(a(43));a(41);var l,i,u,d=r(a(44)),f=r(a(65)),p=r(a(36)),m=r(a(37)),h=r(a(88)),v=r(a(55)),g=r(a(56)),_=r(a(51)),y=r(a(49)),E=(r(a(66)),a(14)),b=r(a(26)),S=r(a(74)),O=r(a(189)),R=r(a(63)),A=r(a(902)),k=r(a(895)),T=r(a(1023)),D=r(a(4789)),C=r(a(4790)),P=r(a(242)),N=r(a(158)),I=r(a(458)),w=a(1245),x=a(816),M=a(4816),L=a(1015),j=a(1093);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var F=(l=function(e){(0,v.default)(g,e);var t,a,r,c,l=Y(g);function g(){var e;(0,p.default)(this,g);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=l.call.apply(l,[this].concat(a))).resourceName="params",e.app_id="",e.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspace,a=e.namespace,r=e.cluster,n=e.cluster_id;return(0,L.getManifestApi)({workspace:t,namespace:a,cluster:r,cluster_id:n})},(0,f.default)(e,"fetchList",i,(0,h.default)(e)),(0,f.default)(e,"updateParams",u,(0,h.default)(e)),e.updateCKParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u,d,f;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,o=a.cluster,c=a.namespace,l=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}));case 3:if(i=t.sent,u=JSON.parse(i.customResource),!(0,R.default)(l)){t.next=7;break}return t.abrupt("return");case 7:return d=l.max_memory_usage,(f=l.max_server_memory_usage)&&(0,S.default)(u,"spec.configuration.settings.max_server_memory_usage",f),d&&(0,S.default)(u,'spec.configuration.profiles["default/max_memory_usage"]',d),i.customResource=JSON.stringify(u),i.version+=1,t.next=14,request.put(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}),i);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updatePGParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,c,l,i,u,d,f,p,m,h;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,c=a.cluster,l=a.namespace,i=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:l,cluster:c,cluster_id:n}));case 3:if(u=t.sent,d=JSON.parse(u.customResource),f=(0,b.default)(d,"spec.postgresql.configs"),p=e.getPGParamsByConfig(f),55555!==(m=B({},i)).port){t.next=10;break}throw new Error("PG_PORT_FORBIDDEN_ERROR");case 10:return m.port&&m.port!==p.port&&((0,S.default)(d,"spec.services[1].spec.ports[0].port",m.port),(0,S.default)(d,"spec.services[2].spec.ports[0].port",m.port)),["shared_buffers","temp_buffers","work_mem","wal_buffers","maintenance_work_mem","wal_writer_flush_after"].forEach((function(e){m[e]&&(m[e]+="MB")})),["bgwriter_flush_after"].forEach((function(e){m[e]&&(m[e]+="kB")})),h=Object.entries(B(B({},p),m)).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})),(0,S.default)(d,"spec.postgresql.configs",h),u.customResource=JSON.stringify(d),u.version+=1,t.next=21,request.put(e.getUrl({workspace:r,namespace:l,cluster:c,cluster_id:n}),u);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateMySQLParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u,d;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,o=a.cluster,c=a.namespace,l=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}));case 3:return i=t.sent,u=JSON.parse(i.customResource),d=(0,b.default)(u,"spec.mysqlOpts.mysqlConf"),Object.keys(l).forEach((function(e){l[e]=l[e].toString()})),(0,S.default)(u,"spec.mysqlOpts.mysqlConf",B(B({},d),l)),i.customResource=JSON.stringify(u),i.version+=1,t.next=12,request.put(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}),i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getParamsFromMongoYaml=function(e){return{port:(0,b.default)(e,"spec.additionalMongodConfig.net.port"),oplogSizeMB:(0,b.default)(e,"spec.additionalMongodConfig.replication.oplogSizeMB"),maxIncomingConnections:(0,b.default)(e,"spec.additionalMongodConfig.net.maxIncomingConnections"),cursorTimeoutMillis:(0,b.default)(e,"spec.additionalMongodConfig.setParameter.cursorTimeoutMillis"),profilingMode:(0,b.default)(e,"spec.additionalMongodConfig.operationProfiling.mode"),slowOpThresholdMs:(0,b.default)(e,"spec.additionalMongodConfig.operationProfiling.slowOpThresholdMs"),enableMajorityReadConcern:(0,b.default)(e,"spec.additionalMongodConfig.replication.enableMajorityReadConcern",!0).toString(),commandVerbosity:(0,b.default)(e,"spec.additionalMongodConfig.systemLog.component.command.verbosity",0).toString(),indexVerbosity:(0,b.default)(e,"spec.additionalMongodConfig.systemLog.component.index.verbosity",0).toString(),queryVerbosity:(0,b.default)(e,"spec.additionalMongodConfig.systemLog.component.query.verbosity",0).toString(),networkVerbosity:(0,b.default)(e,"spec.additionalMongodConfig.systemLog.component.network.verbosity",0).toString(),writeVerbosity:(0,b.default)(e,"spec.additionalMongodConfig.systemLog.component.write.verbosity",0).toString()}},e.updateMongoParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u,d,f,p,m,h,v,g,_,y,E,b,O,R,A;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,o=a.cluster,c=a.namespace,l=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}));case 3:return i=t.sent,u=JSON.parse(i.customResource),d=e.getParamsFromMongoYaml(u),f=B(B({},d),l),p=f.port,m=f.oplogSizeMB,h=f.maxIncomingConnections,v=f.cursorTimeoutMillis,g=f.profilingMode,_=f.slowOpThresholdMs,y=f.enableMajorityReadConcern,E=f.commandVerbosity,b=f.indexVerbosity,O=f.queryVerbosity,R=f.networkVerbosity,A=f.writeVerbosity,(0,S.default)(u,"spec.additionalMongodConfig.net.port",p),(0,S.default)(u,"spec.additionalMongodConfig.replication.oplogSizeMB",m),(0,S.default)(u,"spec.additionalMongodConfig.net.maxIncomingConnections",h),(0,S.default)(u,"spec.additionalMongodConfig.setParameter.cursorTimeoutMillis",v),(0,S.default)(u,"spec.additionalMongodConfig.operationProfiling.mode",g),(0,S.default)(u,"spec.additionalMongodConfig.operationProfiling.slowOpThresholdMs",_),(0,S.default)(u,"spec.additionalMongodConfig.replication.enableMajorityReadConcern","true"===y),(0,S.default)(u,"spec.additionalMongodConfig.systemLog.component.command.verbosity",Number(E)),(0,S.default)(u,"spec.additionalMongodConfig.systemLog.component.index.verbosity",Number(b)),(0,S.default)(u,"spec.additionalMongodConfig.systemLog.component.query.verbosity",Number(O)),(0,S.default)(u,"spec.additionalMongodConfig.systemLog.component.network.verbosity",Number(R)),(0,S.default)(u,"spec.additionalMongodConfig.systemLog.component.write.verbosity",Number(A)),i.customResource=JSON.stringify(u),i.version+=1,t.next=23,request.put(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}),i);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateECKParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,o=a.cluster,c=a.namespace,l=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}));case 3:return i=t.sent,u=JSON.parse(i.customResource),Object.keys(l).forEach((function(e){["action.destructive_requires_name","http.cors.enabled"].includes(e)&&(l[e]="true"===l[e])})),(0,b.default)(u,"spec.nodeSets",[]).forEach((function(e){var t=(0,b.default)(e,"config",{});(0,S.default)(e,"config",B(B({},t),l))})),i.customResource=JSON.stringify(u),i.version+=1,t.next=12,request.put(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}),i);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateLogStashConfig=function(){var t=(0,d.default)(s.default.mark((function t(a,r){var n,o,c,l,i,u,d,f,p,m,h,v,g,_,y;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.namespace,o=r.cluster,c=r.cluster_id,l={},i=/^logstash./,(0,k.default)(a,(function(e,t){if(i.test(t)){var r=t.replace(i,"");l[r]=e,delete a[t]}})),!(0,T.default)(l)){t.next=19;break}return t.next=7,e.getLogstashParams({namespace:n,cluster:o,cluster_id:c});case 7:return u=t.sent,d=u.oldConfig,f=u.configMap,p=(0,A.default)({},d.logstash,l),(m=(0,b.default)(p,"jvm",0))&&(h=(0,b.default)(f,"spec.podTemplate.spec.containers[0].resources.limits.memory"),v=(0,w.convertToMebiBytes)(h),g=(0,D.default)(v*(m/100)),(0,S.default)(f,"spec.config.jvm","-Xms".concat(g,"m -Xmx").concat(g,"m")),delete p.jvm),_=[],(0,k.default)(p,(function(e,t){_.push({name:t,value:String(e)})})),(0,S.default)(f,"spec.config.logstashConfig",_),y="apis".concat(globals.app.isMultiCluster&&o?"/clusters/".concat(o):"","/opensearch.opster.io/v1/namespaces/").concat(n,"/logstashes/").concat(c),t.next=19,request.put(y,f);case 19:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.updateOpenSearchParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u,d;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.cluster_id,o=a.cluster,c=a.namespace,l=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}));case 3:return i=t.sent,u=JSON.parse(i.customResource),Object.keys(l).forEach((function(e){["action.destructive_requires_name","http.cors.enabled"].includes(e)&&(l[e]="true"===l[e])})),Object.keys(l).forEach((function(e){["thread_pool.write.queue_size","thread_pool.search.queue_size","action.destructive_requires_name","http.cors.enabled"].includes(e)&&(l[e]=String(l[e]))})),d=(0,b.default)(u,"spec.general.additionalConfig",{}),t.next=10,e.updateLogStashConfig(l,{namespace:c,cluster:o,cluster_id:n});case 10:return(0,S.default)(u,"spec.general.additionalConfig",B(B({},d),l)),i.customResource=JSON.stringify(u),i.version+=1,t.next=15,request.put(e.getUrl({workspace:r,namespace:c,cluster:o,cluster_id:n}),i);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateKafkaParams=function(){var t=(0,d.default)(s.default.mark((function t(a){var r,o,c,l,i,u,d,f,p,m,h,v,g,_,y,E,O,R;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,o=a.cluster_id,c=a.cluster,l=a.namespace,i=a.nodeRole,u=a.params,t.next=3,request.get(e.getUrl({workspace:r,namespace:l,cluster:c,cluster_id:o}));case 3:if(d=t.sent,f=JSON.parse(d.customResource),p=u.tls,m=u.authentication,h=u.nodePort,v=u.jmxOptions,g=(0,n.default)(u,["tls","authentication","nodePort","jmxOptions"]),!(_=(0,b.default)(f,"spec.kafka.listeners[0"))){t.next=25;break}if(y=(0,b.default)(_,"authentication.type"),E=m||y,!p){t.next=14;break}if("false"!==p||"tls"!==E){t.next=13;break}throw new Error("KAFKA_EDIT_PARAMS_ERROR");case 13:(0,S.default)(_,"tls","true"===p);case 14:if(!m){t.next=24;break}if("no"!==m){t.next=20;break}delete _.authentication,delete f.spec.kafka.authorization,t.next=24;break;case 20:if("tls"!==m||_.tls){t.next=22;break}throw new Error("KAFKA_EDIT_PARAMS_ERROR");case 22:(0,S.default)(f,"spec.kafka.authorization",(0,b.default)(j.kafkaYaml.resources,"spec.kafka.authorization")),(0,S.default)(_,"authentication.type",m);case 24:h&&(0,S.default)(_,"type","true"===h?"nodeport":"internal");case 25:return Object.keys(g).forEach((function(e){"log.cleaner.enable"===e&&(g[e]="true"===g[e])})),"kafka"===i?(O=(0,b.default)(f,"spec.kafka.config",{}),(0,S.default)(f,"spec.kafka.config",B(B({},O),g)),"password"===v?(0,S.default)(f,"spec.kafka.jmxOptions.authentication.type","password"):"enable"===v?(0,S.default)(f,"spec.kafka.jmxOptions",{}):(0,P.default)(f,"spec.kafka.jmxOptions")):(R=(0,b.default)(f,"spec.zookeeper.config",{}),(0,S.default)(f,"spec.zookeeper.config",B(B({},R),g)),"password"===v?(0,S.default)(f,"spec.zookeeper.jmxOptions.authentication.type","password"):"enable"===v?(0,S.default)(f,"spec.zookeeper.jmxOptions",{}):(0,P.default)(f,"spec.zookeeper.jmxOptions")),d.customResource=JSON.stringify(f),d.version+=1,t.next=31,request.put(e.getUrl({workspace:r,namespace:l,cluster:c,cluster_id:o}),d);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,m.default)(g,[{key:"getParamsFromYamlJSON",value:(c=(0,d.default)(s.default.mark((function e(t,a){var r,n,c,l,i,u,d,f,p,m,h,v,g,_,y,E,S,O,R,k,T,D,C,P,I,w;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.app_id=(0,x.getAppIdByKind)(t.kind),e.t0=this.app_id,e.next=e.t0===x.RadonDBAppId.ClickHouse?4:e.t0===x.RadonDBAppId.PostgreSQL?11:e.t0===x.RadonDBAppId.MySQL?16:e.t0===x.RadonDBAppId.MongoDB?17:e.t0===x.RadonDBAppId.RedisCluster||e.t0===x.RadonDBAppId.RedisSentinel?18:e.t0===x.RadonDBAppId.Elasticsearch?26:e.t0===x.RadonDBAppId.Kafka?28:e.t0===x.RadonDBAppId.OpenSearch?38:45;break;case 4:return r=(0,b.default)(t,"spec.templates.serviceTemplates[0].spec.ports"),n=(0,b.default)(t,"spec.configuration.clusters[0].layout"),c=n.replicasCount,l=r.find((function(e){return"http"===e.name})),i=r.find((function(e){return"tcp"===e.name})),u=(0,b.default)(t,"spec.configuration.settings.max_server_memory_usage",18e8),d=(0,b.default)(t,'spec.configuration.profiles["default/max_memory_usage"]',2e8),e.abrupt("return",(0,M.getCKParams)({replicasCount:c,httpPort:l,tcpPort:i,max_server_memory_usage:u,max_memory_usage:d}));case 11:return f=(0,b.default)(t,"spec.postgresql.configs",[]),p=(0,b.default)(t,"spec.autofailover.podspec.containers[0].image",""),m=(0,b.default)(Object.entries(x.PGImage).find((function(e){var t=(0,o.default)(e,2)[1];return p.startsWith(t)})),"[0]"),h=this.getPGParamsByConfig(f),e.abrupt("return",(0,M.getPGParams)(B(B({},h),{},{pgVersion:m})));case 16:return e.abrupt("return",(0,M.getMySQLParams)((0,b.default)(t,"spec.mysqlOpts.mysqlConf")));case 17:return e.abrupt("return",(0,M.getMongoDBParams)(this.getParamsFromMongoYaml(t)));case 18:return e.next=20,this.getRedisParams(a);case 20:if(v=e.sent,"7.0.4"!==(0,b.default)(t,"spec.kubernetesConfig.redisVersion")){e.next=25;break}return g="hostname"===(0,b.default)(t,"spec.kubernetesConfig.endpointType"),e.abrupt("return",(0,M.getRedisParams)(B(B({},v),{},{endpointType:g})));case 25:return e.abrupt("return",(0,M.getRedisParams)(v).slice(1,-1));case 26:return _=(0,b.default)(t,"spec.nodeSets[0].config",{}),e.abrupt("return",(0,M.getECKParams)(_));case 28:return y=a.nodeRole,E=(0,b.default)(t,"spec.".concat(y,".config"),{}),S=(0,b.default)(t,"spec.kafka.listeners[0]",{}),O=S.tls,R=S.authentication?S.authentication.type:"no",k="nodeport"===S.type,T=(0,b.default)(t,"spec.".concat(y,".jmxOptions")),D="disable",D="password"===(0,b.default)(T,"authentication.type")?"password":(0,N.default)(T)?"disable":"enable",e.abrupt("return",(0,M.getKafkaParams)(B(B({},E),{},{tls:O,authentication:R,nodePort:k,jmxOptions:D}),y));case 38:return C=(0,b.default)(t,"spec.general.additionalConfig",{}),e.next=41,this.getLogstashParams(a);case 41:return P=e.sent,I=P.oldConfig,w=(0,A.default)({},I,C),e.abrupt("return",(0,M.getOpenSearchParams)(w));case 45:return e.abrupt("return",[]);case 46:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getPGParamsByConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.trim().split("="),r=(0,o.default)(a,2),n=r[0],c=r[1];if(n){var s=Number(c);e[n]=Number.isNaN(s)?c:s}return e}),{})}},{key:"getRedisParams",value:(r=(0,d.default)(s.default.mark((function e(t){var a,r,n,o,c,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.namespace,r=t.cluster,n=t.cluster_id,o="api".concat(globals.app.isMultiCluster&&r?"/clusters/".concat(r):"","/v1/namespaces/").concat(a,"/configmaps/").concat(n,"-external-config"),e.next=4,request.get(o);case 4:return c=e.sent,l=(0,b.default)(c,'data["redis-external.conf"]',""),e.abrupt("return",this.configMapToObject(l));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getLogstashParams",value:(a=(0,d.default)(s.default.mark((function e(t){var a,r,n,o,c,l,i,u,d,f,p,m,h;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.namespace,r=t.cluster,n=t.cluster_id,o="apis".concat(globals.app.isMultiCluster&&r?"/clusters/".concat(r):"","/opensearch.opster.io/v1/namespaces/").concat(a,"/logstashes/").concat(n),e.next=4,request.get(o);case 4:return c=e.sent,l=(0,b.default)(c,"spec.config",{}),i=(0,b.default)(l,"logstashConfig",[]),u=(0,b.default)(l,"jvm",""),d=(0,b.default)(c,"spec.podTemplate.spec.containers[0].resources.limits.memory"),f=(0,w.convertToMebiBytes)(d),p=(0,w.convertJVMToMemoryMebiBytes)(u),m={},(0,k.default)(i,(function(e){var t=(0,b.default)(e,"name",""),a=(0,b.default)(e,"value","");m[t]=a})),(0,S.default)(m,"jvm",(0,C.default)(p/f*100)||50),h=(0,A.default)({},{logstash:m}),e.abrupt("return",{oldConfig:h,configMap:c});case 17:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"configMapToObject",value:function(e){var t={};return e.split("\n").forEach((function(e){var a=e.toString().trim().split(" "),r=(0,o.default)(a,2),n=r[0],c=r[1];n&&(t[n]=c)})),t}},{key:"updateRedisParam",value:(t=(0,d.default)(s.default.mark((function e(t){var a,r,n,o,c,l,i,u,d,f,p,m,h,v,g;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,r=t.cluster_id,n=t.cluster,o=t.namespace,c=t.params,l="api".concat(globals.app.isMultiCluster&&n?"/clusters/".concat(n):"","/v1/namespaces/").concat(o,"/configmaps/").concat(r,"-external-config"),e.next=4,request.get(l);case 4:if(i=e.sent,u=(0,b.default)(i,'data["redis-external.conf"]',""),d=this.configMapToObject(u),"number"==typeof(f=c.maxmemory)&&(c.maxmemory="".concat(f,"MB")),"number"==typeof(p=c["repl-backlog-size"])&&(c["repl-backlog-size"]="".concat(p,"mb")),!c.endpointType){e.next=27;break}return e.next=14,request.get(this.getUrl({workspace:a,namespace:o,cluster:n,cluster_id:r}));case 14:if(m=e.sent,h=JSON.parse(m.customResource),"true"!==c.endpointType){e.next=22;break}if(!((0,b.default)(h,"spec.redisProxy.replicas")>0)){e.next=19;break}throw new Error("ENDPOINT_TYPE_ERROR");case 19:(0,S.default)(h,"spec.kubernetesConfig.endpointType","hostname"),e.next=23;break;case 22:(0,S.default)(h,"spec.kubernetesConfig",(0,O.default)((0,b.default)(h,"spec.kubernetesConfig"),"endpointType"));case 23:return m.customResource=JSON.stringify(h),m.version+=1,e.next=27,request.put(this.getUrl({workspace:a,namespace:o,cluster:n,cluster_id:r}),m);case 27:return v=B(B({},d),(0,O.default)(c,"endpointType")),g=Object.entries(v).map((function(e){return e.join(" ")})).join("\n"),(0,S.default)(i,'data["redis-external.conf"]',g),e.next=32,request.put(l,i);case 32:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),g}(I.default),i=(0,y.default)(l.prototype,"fetchList",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(s.default.mark((function t(a){var r,n,o,c,l,i,u,d,f,p;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.workspace,n=a.namespace,o=a.cluster,c=a.cluster_id,l=a.keyword,i=a.nodeRole,e.list.isLoading=!0,t.next=4,request.get(e.getUrl({workspace:r,namespace:n,cluster:o,cluster_id:c}));case 4:return u=t.sent,d=JSON.parse(u.customResource),t.next=8,e.getParamsFromYamlJSON(d,{workspace:r,namespace:n,cluster:o,cluster_id:c,nodeRole:i});case 8:f=t.sent,p={},l&&(f=f.filter((function(e){return e.name.includes(l)})),p={keyword:l}),Object.assign(e.list,{data:f,total:f.length,filters:p,isLoading:!1,selectedRowKeys:[]});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),u=(0,y.default)(l.prototype,"updateParams",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(s.default.mark((function t(a){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.app_id||a.app_id,t.next=t.t0===x.RadonDBAppId.ClickHouse?3:t.t0===x.RadonDBAppId.PostgreSQL?6:t.t0===x.RadonDBAppId.MySQL?9:t.t0===x.RadonDBAppId.MongoDB?12:t.t0===x.RadonDBAppId.RedisCluster||t.t0===x.RadonDBAppId.RedisSentinel?15:t.t0===x.RadonDBAppId.Elasticsearch?18:t.t0===x.RadonDBAppId.Kafka?21:t.t0===x.RadonDBAppId.OpenSearch?24:27;break;case 3:return t.next=5,e.updateCKParams(a);case 5:return t.abrupt("break",28);case 6:return t.next=8,e.updatePGParams(a);case 8:return t.abrupt("break",28);case 9:return t.next=11,e.updateMySQLParams(a);case 11:return t.abrupt("break",28);case 12:return t.next=14,e.updateMongoParams(a);case 14:return t.abrupt("break",28);case 15:return t.next=17,e.updateRedisParam(a);case 17:return t.abrupt("break",28);case 18:return t.next=20,e.updateECKParams(a);case 20:return t.abrupt("break",28);case 21:return t.next=23,e.updateKafkaParams(a);case 23:return t.abrupt("break",28);case 24:return t.next=26,e.updateOpenSearchParams(a);case 26:case 27:return t.abrupt("break",28);case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l);t.default=F},1961:function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(18),a(9),a(13),a(10),a(4),a(316),a(23),a(24),a(17),a(62),a(64),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(18),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(316),a(23),a(57),a(24),a(193),a(17),a(62),a(64),a(7);var n,o,c=r(a(315)),s=r(a(31)),l=r(a(36)),i=r(a(37)),u=r(a(55)),d=r(a(56)),f=r(a(51)),p=r(a(0)),m=a(239),h=r(a(63)),v=r(a(26)),g=r(a(74)),_=r(a(135)),y=r(a(1023)),E=a(186),b=a(794),S=r(a(4822)),O=a(798),R=a(47),A=a(14),k=r(a(4823)),T=a(816),D=r(a(4825)),C=r(a(4836)),P=a(4837);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var w=(n=(0,m.inject)("detailStore"),(0,R.withRouter)(o=n(o=(0,m.observer)(o=function(e){(0,u.default)(a,e);var t=I(a);function a(e){var r;return(0,l.default)(this,a),(r=t.call(this,e)).fetchData=function(e){r.step=e.step,r.times=e.times,r.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({config:r.getConfig(),metrics:[],fillZero:!1,cluster:r.cluster,namespace:r.namespace},e))},r.getMonitoringCfgs=function(){return r.chartConfig.getMonitoringCfgs(r.metrics)},r.renderSimpleArea=function(e){for(var t=r.props.columns||1,a=Math.ceil(e.length/t),n=[],o=0;o<a;o++){for(var s=[],l=0;l<t;l++){var i=e[o+l];i.dot=i.dot?i.dot:0;var u=(0,b.getAreaChartOps)(i);s.push(p.default.createElement(E.Column,null,p.default.createElement(O.SimpleArea,(0,c.default)({showAll:!0,key:u.title,width:"100%",isTranslate:!1},u))))}n.push(p.default.createElement(E.Columns,null,s))}return n},r.monitorStore=new S.default({cluster:r.cluster}),r.step="10m",r.times=30,r}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(e){e.monitorDbNode===this.props.monitorDbNode&&e.nodeRole===this.props.nodeRole||this.fetchData({step:this.step,times:this.times})}},{key:"getConfig",value:function(){var e=this.props,t=e.monitorDbNode,a=e.detailStore;return this.chartConfig.getConfig(a,t)}},{key:"render",value:function(){var e=this.monitorStore,t=e.isLoading,a=e.isRefreshing,r=this.getMonitoringCfgs(),n=this.props,o=n.exitHandler,c=n.customSelect;return p.default.createElement(k.default,{onFetch:this.fetchData,loading:t,refreshing:a,closeBtn:o?p.default.createElement(E.Button,{className:C.default.button,type:"control",icon:"close",iconType:"light",onClick:o}):null,step:this.step,times:this.times,isEmpty:(0,h.default)(this.metrics),customSelect:c},this.renderSimpleArea(r))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"metrics",get:function(){var e=(0,_.default)((0,v.default)((0,A.toJS)(this.monitorStore),"data",{}));return Object.values(e).map((function(e){var t=(0,v.default)(e,"data.result",[]);if((0,y.default)(t)){var a=(0,P.mergerValues)(t);(0,g.default)(e,"data.result",[a])}return e})),e}},{key:"namespace",get:function(){var e=this.props.detailStore;return(0,v.default)(e,"detail.namespace","")}},{key:"chartConfig",get:function(){var e=this.props,t=e.detailStore,a=e.monitorDbNode,r=void 0===a?{}:a,n=e.nodeRole;if((0,v.default)(r,"isPredixy"))return D.default.predixy;var o="";switch((0,v.default)(t,"detail.app_id")){case T.RadonDBAppId.ClickHouse:o="ck";break;case T.RadonDBAppId.PostgreSQL:return o="pg.".concat(r.nodeRole||"postgresql"),(0,v.default)(D.default,o);case T.RadonDBAppId.MySQL:o="mysql";break;case T.RadonDBAppId.RedisCluster:case T.RadonDBAppId.RedisSentinel:o="redis";break;case T.RadonDBAppId.MongoDB:o="mongo";break;case T.RadonDBAppId.Elasticsearch:o="eck.pod";break;case T.RadonDBAppId.Kafka:o="".concat(n,".pod");break;case T.RadonDBAppId.OpenSearch:var c=(0,v.default)(r,"name");o=/^oslst/.test(c)?"opensearch.logstash":"opensearch.pod"}return(0,h.default)(r)&&(o=o.replace(".pod",".main")),(0,v.default)(D.default,o)}}]),a}(p.default.Component))||o)||o)||o);t.default=w},1972:function(e,t,a){e.exports={container:"_3-ZkTbqukj22B-pJzneW6n",content:"_3U8DBG0oSm5MXPDbku5MVv","search-box":"knY_VVSNv5AHBYkq5g0CT","monitor-btn":"_236daVZSbHdsGL_zC_owf7",item:"u6oOOhm6ovvflYDM-HgwK",empty:"_2iYjjPU8G3gJgqGLKwJlqZ",fullScreen:"Fcv9QgUXVv4TMVIGDPRk5"}},1974:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);r(827),r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.password,r=e.color,n=(0,s.useState)(!1),o=(0,c.default)(n,2),d=o[0],f=o[1];return s.default.createElement(s.default.Fragment,null,d?s.default.createElement("span",null,a):Array(10).fill("").map((function(e,t){return s.default.createElement(l.Icon,{key:t,size:12,name:"dot",style:{marginRight:-6},color:r})})),a&&s.default.createElement(s.default.Fragment,null,s.default.createElement(l.Icon,{name:"eye",onClick:function(){return f(!d)},style:{margin:"0 4px 0 6px"}}),s.default.createElement("a",{href:"#",style:{color:"#329dce"},onClick:function(e){e.preventDefault(),(0,u.copyToClipboard)(a).then((function(){i.default.success({content:t("COPY_SUCCESSFUL")})}))}},t("COPY"))))},r(827),r(18);var c=o(r(96)),s=n(r(0)),l=r(186),i=o(r(240)),u=r(1245)},1975:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7),r(109);var o=n(r(43)),c=n(r(31));r(41);var s,l,i,u=n(r(44)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(0)),g=r(239),_=n(r(1)),y=n(r(3)),E=n(r(63)),b=n(r(472)),S=r(186),O=n(r(4890)),R=n(r(4892));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var D=(0,g.observer)((i=l=function(e){(0,p.default)(r,e);var a=T(r);function r(e){var n;return(0,d.default)(this,r),(n=a.call(this,e)).setAutoRefresh=function(){var e=n.store.list.data;clearInterval(n.timer),e.some((function(e){return!["successful","failed"].includes(e.status)||(0,E.default)(e.status)}))&&(n.timer=setInterval(n.fetchData,4e3))},n.fetchData=(0,u.default)(o.default.mark((function e(){var t,a,r,c,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=n.props,r=a.limit,c=a.params,e.next=4,n.store.fetchS2IRunRecords(k(k({limit:r},c),t));case 4:n.setAutoRefresh();case 5:case"end":return e.stop()}}),e)}))),n.getPagination=function(){var e=n.store.list;return{page:e.page,limit:e.limit,total:e.total}},n.handleSearch=function(e){n.searchValue=e,n.fetchData({name:e}).then((function(){n.props.onSearch(e)}))},n.handlePage=function(e){n.fetchData({page:e}).then((function(){n.props.onPage(e)}))},n.renderFooter=function(){var e=n.getPagination(),a=e.total,r=e.page,o=e.limit;return v.default.createElement(S.Level,{className:R.default.footer},v.default.createElement(S.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),v.default.createElement(S.LevelRight,null,v.default.createElement(S.Pagination,{page:r,total:a,limit:o,onChange:n.handlePage})))},n.store=new b.default,n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderContent",value:function(){var e=this,a=this.store.list,r=a.data,n=a.isLoading,o=v.default.createElement("div",{className:R.default.body},(0,E.default)(r)?v.default.createElement("div",{className:R.default.empty},t("NO_DATA")):r.map((function(t){return e.renderItem(t)})));return this.isTable?v.default.createElement(S.Loading,{spinning:n},o):o}},{key:"renderItem",value:function(e){var t=this.store.list.isLoading;return v.default.createElement(O.default,{key:e.name,runDetail:e,loading:t,store:this.store,isB2i:this.props.isB2i})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.hideFooter;return v.default.createElement("div",{className:(0,y.default)(t,R.default.content)},this.renderContent(),!a&&this.renderFooter())}},{key:"isTable",get:function(){var e=this.props,t=e.hideHeader,a=e.hideFooter;return!t||!a}}]),r}(v.default.Component),l.propTypes={prefix:_.default.string,title:_.default.string,detail:_.default.object,hideHeader:_.default.bool,hideFooter:_.default.bool,onSearch:_.default.func,onRefresh:_.default.func,onPage:_.default.func,limit:_.default.number},l.defaultProps={isB2i:!1,detail:{},hideHeader:!1,hideFooter:!1,onSearch:function(){},onRefresh:function(){},onPage:function(){}},s=i))||s;a.default=D},1976:function(e,a,r){"use strict";r(15);var n=r(20),o=r(157);r(11),r(18),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(11),r(18),r(10),r(4);var c=o(r(0)),s=n(r(63)),l=r(186),i=n(r(4910)),u=function(e){var a=e.data;return(0,s.default)(a)?c.default.createElement("ul",{className:i.default.annotations},c.default.createElement("li",null,t("NO_DATA"))):c.default.createElement("ul",{className:i.default.annotations},Object.keys(a).filter((function(e){return!(0,s.default)(a[e])})).map((function(e){return c.default.createElement("li",{key:e},c.default.createElement(l.Columns,null,c.default.createElement(l.Column,{className:"is-narrow"},c.default.createElement("p",{style:{width:317}},e)),c.default.createElement(l.Column,null,c.default.createElement("p",null,a[e]))))})))},d=(0,c.memo)(u);a.default=d},1977:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a,r=e.status,n=e.toEvent,u=null!==(a=null==r?void 0:r.conditions)&&void 0!==a?a:[],d=function(e){return o.default.createElement(c.Icon,{className:"close"===l[e].name?s.default.closeIcon:"",name:l[e].name,size:15,color:{primary:"#fff",secondary:l[e].color}})};return o.default.createElement(c.Tooltip,{content:o.default.createElement("div",null,o.default.createElement("div",null,t("STATUS_INFORMATION")),u.map((function(e,a){return o.default.createElement("div",{className:s.default.textItem,key:a},o.default.createElement("div",{className:s.default.textItemTitle},d(e.status),o.default.createElement("span",null,i[e.type])),o.default.createElement("ul",null,o.default.createElement("li",null,t("STATUS_VALUE",{value:e.status})),o.default.createElement("li",null,e.reason&&t("REASON_VALUE",{value:e.reason})),o.default.createElement("li",null,e.message&&t("MESSAGE_VALUE",{value:e.message}))))})),o.default.createElement(c.Button,{type:"primary",onClick:n,className:"width-full"},t("VIEW_EVENTS"))),placement:"right"},o.default.createElement("div",{className:s.default.container},u.map((function(e,t){return o.default.createElement("div",{className:s.default.item,key:t},d(e.status))}))))},a.STATUS_TITLE=a.ICON_TYPES=void 0,r(18),r(16);var o=n(r(0)),c=r(186),s=n(r(4913)),l={False:{name:"close",color:"#AB2F29"},True:{name:"success",color:"#55BC8A"},Unknown:{name:"question",color:"#E0992C"}};a.ICON_TYPES=l;var i={Ready:t("STRETCH_OBJECT_READY"),Active:t("TRIGGER_ACTIVE"),Fallback:t("RETRACTOR_FALLBACK")};a.STATUS_TITLE=i},4507:function(e,t,a){"use strict";a(15);var r=a(20);a(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(5);var n=r(a(61)),o=a(317),c=r(a(4508)),s=r(a(4512)),l=r(a(4513)),i=r(a(4537)),u=r(a(4538)),d=r(a(4539)),f=r(a(4540)),p=r(a(4541)),m=r(a(4542)),h=r(a(4543)),v=r(a(4545)),g=r(a(4546)),_=r(a(4547)),y=r(a(4548)),E=r(a(1899)),b=r(a(4617)),S=r(a(4619)),O=r(a(4621)),R=r(a(4623)),A=r(a(4626)),k=r(a(4627)),T=r(a(4628)),D=r(a(4630)),C=r(a(4636)),P=r(a(4637)),N=r(a(4641)),I=r(a(4642)),w=r(a(4643)),x=r(a(4644)),M=r(a(1798)),L=r(a(1796)),j=r(a(4647)),U=r(a(4650)),B=r(a(4657)),Y=r(a(4660)),F=r(a(4664)),V=r(a(4706)),G=r(a(4921)),H=r(a(4923)),q="/:workspace/clusters/:cluster/projects/:namespace",z=[].concat((0,n.default)((0,V.default)(q)),[{path:q,component:s.default,routes:[].concat((0,n.default)(F.default),[{path:"".concat(q,"/overview"),component:l.default,exact:!0},{path:"".concat(q,"/edgeappsets"),component:B.default,exact:!0},{path:"".concat(q,"/applications/others"),component:d.default,exact:!0},{path:"".concat(q,"/applications/database"),component:c.default,exact:!0},{path:"".concat(q,"/applications/template"),component:u.default,exact:!0},{path:"".concat(q,"/deployments"),component:f.default,exact:!0},{path:"".concat(q,"/statefulsets"),component:p.default,exact:!0},{path:"".concat(q,"/daemonsets"),component:m.default,exact:!0},{path:"".concat(q,"/pods"),component:h.default,exact:!0},{path:"".concat(q,"/jobs"),component:v.default,exact:!0},{path:"".concat(q,"/s2ibuilders"),component:g.default,exact:!0},{path:"".concat(q,"/cronjobs"),component:_.default,exact:!0},{path:"".concat(q,"/services"),component:y.default,exact:!0},{path:"".concat(q,"/grayrelease"),component:E.default,exact:!0},{path:"".concat(q,"/composing"),component:i.default,exact:!0},{path:"".concat(q,"/ingresses"),component:b.default,exact:!0},{path:"".concat(q,"/volumes"),component:S.default,exact:!0},{path:"".concat(q,"/volume-snapshots"),component:O.default,exact:!0},{path:"".concat(q,"/base-info"),component:R.default,exact:!0},{path:"".concat(q,"/networkpolicies"),component:U.default,exact:!0},{path:"".concat(q,"/configmaps"),component:A.default,exact:!0},{path:"".concat(q,"/serviceaccounts"),component:k.default,exact:!0},{path:"".concat(q,"/secrets"),component:T.default,exact:!0},{path:"".concat(q,"/microservices"),component:D.default,exact:!0},{path:"".concat(q,"/configurations"),component:C.default,exact:!0},{path:"".concat(q,"/microservicegateways"),component:P.default,exact:!0},{path:"".concat(q,"/servicerouting"),component:N.default,exact:!0},{path:"".concat(q,"/roles"),component:I.default,exact:!0},{path:"".concat(q,"/members"),component:w.default,exact:!0},{path:"".concat(q,"/log-collections"),component:x.default,exact:!0},{path:"".concat(q,"/gateways"),component:G.default,exact:!0},{path:"".concat(q,"/alert-rules"),component:M.default,exact:!0},{path:"".concat(q,"/alerts"),component:L.default,exact:!0},{path:"".concat(q,"/custom-monitoring"),component:j.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(q,"/custom-scaling"),component:H.default,exact:!0},{path:"".concat(q,"/node-groups"),component:Y.default,exact:!0},(0,o.getIndexRoute)({path:"".concat(q,"/workloads"),to:"".concat(q,"/deployments"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(q,"/applications"),to:"".concat(q,"/applications/template"),exact:!0}),(0,o.getIndexRoute)({path:q,to:"".concat(q,"/overview"),exact:!0}),(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})])}]);t.default=z},4508:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(134),r(5),r(11),r(29),r(6),r(84),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(64),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(29),r(6),r(84),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(64),r(188),r(7);var c,s=n(r(315)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(244),v=n(r(800)),g=n(r(26)),_=r(433),y=r(186),E=n(r(795)),b=n(r(836)),S=n(r(1024)),O=r(793),R=n(r(796)),A=r(52),k=o(r(1428)),T=r(816),D=n(r(1238)),C=n(r(4511));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=(0,O.withProjectList)({store:new k.default,module:"applications",name:"APP"})(c=function(e){(0,d.default)(r,e);var a=I(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).type="database",e.state={appList:[]},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return m.default.createElement(S.default,{isApp:!0,to:"".concat(e.prefix,"/").concat(t),avatar:(0,g.default)(a,"icon"),iconLetter:a.kind,iconSize:40,title:t,desc:a.description})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:e.renderStatus},{title:t("APP_TEMPLATE"),dataIndex:"app_name",isHideable:!0,render:function(e,t){return m.default.createElement(_.Link,{to:"/apps/".concat(t.app_id)},"RadonDB ",e)}},{title:t("VERSION"),dataIndex:"version",isHideable:!0},{title:t("ACCESS_ADDRESS_PL"),dataIndex:"services",isHideable:!0,width:"272px",render:function(e,a){var r="",n=(0,g.default)(a,"services.length",0);if(n>1){var o=e.filter((function(e){return"ClusterIP"===e.type})),c=e.filter((function(e){return"NodePort"===e.type}));r=m.default.createElement("div",{className:C.default.tooltips},o.length>0&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:C.default.tooltipTitle},"ClusterIP"),o.map((function(e){var a=e.label,r=e.value;return m.default.createElement("div",{key:r},m.default.createElement("div",null,t(a),": ",r))}))),c.length>0&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:C.default.tooltipTitle},"NodePort"),c.map((function(e){var a=e.label,r=e.value;return m.default.createElement("div",{key:r},m.default.createElement("div",null,t(a),": ",r))}))))}return m.default.createElement("div",null,m.default.createElement("span",null,(0,g.default)(e,"[0].value",(0,g.default)(e,"[1].value"))),n>1&&m.default.createElement(y.Tooltip,{content:r,style:{top:"-8px"}},m.default.createElement("span",{className:C.default.tag},n)))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"creationTimestamp",sorter:!0,sortOrder:a("creationTimestamp"),isHideable:!0,width:180,render:function(e,t){return(0,A.getLocalTime)(t.creationTimestamp||t.status_time).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderStatus=function(e,a){return e?a.additional_info?m.default.createElement(y.Tooltip,{content:a.additional_info},m.default.createElement(E.default,{name:t("DATABASE_STATUS_".concat(e.replace(/[-\s]/g,"_").toUpperCase())),type:e,flicker:!0})):m.default.createElement(E.default,{name:t("DATABASE_STATUS_".concat(e.replace(/[-\s]/g,"_").toUpperCase())),type:k.DMPStatus[e]||e,flicker:!0}):"-"},e.showDeploy=function(t,a){var r=e.props,n=r.match,o=r.module,c=r.projectStore,s=r.trigger;return e.props.trigger("openpitrix.db.app.create",{module:o,app_id:a,detail:e.state.appList.find((function(e){return e.app_id===a})),namespace:n.params.namespace,cluster:n.params.cluster,workspace:(0,g.default)(c,"detail.workspace"),routing:e.props.rootStore.routing,success:e.handleFetch,trigger:s})},e.handleFetch=(0,v.default)((function(t){var a=e.props,r=a.store,n=a.getData;if(!r.list.isLoading)return n(N(N(N({},(0,h.parse)(location.search.slice(1))),t),{},{silent:!0}))}),1e3),e.handleWatch=function(t){"Manifest"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.handleFetch()},e.getApplist=function(){request.get("/kapis/application.kubesphere.io/v2/apps",{orderBy:"create_time",conditions:"status=active,repo_id=repo-helm,category_id=radondb",reverse:!0}).then((function(t){e.setState({appList:t.items})}))},e}return(0,u.default)(r,[{key:"getTableProps",value:function(){var e=this,a=this.props,r=a.tableProps,n=a.store,o=m.default.createElement(y.Menu,{onClick:this.showDeploy},this.state.appList.map((function(e){return m.default.createElement(y.Menu.MenuItem,{key:e.app_id},m.default.createElement(b.default,{width:"16px",style:{marginRight:"8px"},src:e.icon,iconLetter:e.name,iconSize:12}),e.name)}))),c=(0,g.default)(n,"list.data.length",0)>0?"bottomRight":"bottom",s=this.canCreate?[{key:"deploy",type:"control",customDom:m.default.createElement(y.Dropdown,{key:"app-list",className:C.default.appCreate,positionFixed:!0,content:o,placement:c},m.default.createElement(y.Button,{key:"deploy",type:"control",disabled:this.state.appList<1},m.default.createElement("div",{className:C.default.deployButton},m.default.createElement("span",null,t("INSTALL")),m.default.createElement(y.Icon,{name:"caret-down",color:{primary:"#fff",secondary:"#fff"},style:{marginLeft:"4px"}}))))}]:[],l=[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.props.trigger("resource.batch.delete",N(N({type:"APP",rowKey:r.rowKey,success:e.handleFetch},e.props.match.params),e.props.query))}}];return{tableActions:N(N({},r.tableActions),{},{actions:s,onCreate:null}),selectActions:l,emptyProps:{desc:t("CREATE_APP_TEMPLATE_DESC")},searchType:"keyword"}}},{key:"componentDidMount",value:function(){this.getApplist()}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match;return m.default.createElement(O.ListPage,(0,s.default)({},this.props,{onMessage:this.handleWatch}),m.default.createElement(D.default,(0,s.default)({},t,{match:r,type:this.type})),m.default.createElement(R.default,(0,s.default)({className:C.default.DBApps},a,this.getTableProps(),{itemActions:this.itemActions,columns:this.getColumns(),rowKey:"name",alwaysUpdate:!0})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/applications/").concat(this.type)}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasPermission({cluster:t,project:a,module:"applications",action:"create"})}},{key:"itemActions",get:function(){var e=this,a=this.props.trigger,r=this.props.match.params,n=r.cluster,o=r.namespace,c=r.workspace;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return a("openpitrix.db.app.edit",{detail:{cluster:n,namespace:o,workspace:c,cluster_id:t.name,name:t.name,description:t.description},success:e.handleFetch})}},{key:"update",icon:"update",text:t("UPDATE_VERSION"),action:"edit",show:function(e){return!(e.app_id!==T.RadonDBAppId.OpenSearch||!e.databaseVersionText.includes("2.3.0"))},onClick:function(r){return a("openpitrix.db.app.update",{resource:r.name,title:t("UPDATE_VERSION"),detail:{cluster:n,namespace:o,workspace:c,cluster_id:r.name,app_id:r.app_id},success:e.handleFetch})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return a("resource.delete",{type:"APP",detail:{name:t.name,cluster:n,namespace:o,workspace:c},success:e.handleFetch})}}]}}]),r}(m.default.Component))||c;a.default=w},4510:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(29),a(6),a(84),a(18),a(320),a(16),a(9),a(13),a(10),a(4),a(23),a(17),a(110),a(85),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(29),a(6),a(84),a(18),a(28),a(320),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(110),a(85),a(7);var n=r(a(43)),o=r(a(61)),c=r(a(96)),s=r(a(31));a(41);var l,i,u,d=r(a(44)),f=r(a(65)),p=r(a(36)),m=r(a(37)),h=r(a(88)),v=r(a(55)),g=r(a(56)),_=r(a(51)),y=r(a(49)),E=(r(a(66)),r(a(26))),b=r(a(74)),S=a(14),O=r(a(443)),R=r(a(856)),A=a(816);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var C=(l=function(e){(0,v.default)(a,e);var t=D(a);function a(){var e;(0,p.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).resourceName="db_services",e.nodeStore=new R.default,(0,f.default)(e,"data",i,(0,h.default)(e)),e.getUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.namespace,r=t.chi,n=t.app_id,o=t.cluster,c="".concat(e.baseUrl).concat(e.getPath({cluster:o,namespace:a}),"/services?labelSelector=");switch(n){case A.RadonDBAppId.ClickHouse:c="".concat(c,"clickhouse.radondb.com/chi=").concat(r,",clickhouse.radondb.com/Service=chi ");break;case A.RadonDBAppId.MySQL:c="".concat(c,"app.kubernetes.io/instance=").concat(r,",mysql.radondb.com/service-type+in+(leader-service,follower-service)");break;case A.RadonDBAppId.PostgreSQL:c="".concat(c,"app-name=").concat(r);break;case A.RadonDBAppId.RedisCluster:c="".concat(c,"redis.radondb.com/name=").concat(r,",role+in+(leader,follower,proxy)");break;case A.RadonDBAppId.RedisSentinel:c="".concat(c,"redis.radondb.com/name=").concat(r,",redis.radondb.com/role+in+%28master%2Cslave%29");break;case A.RadonDBAppId.Elasticsearch:c="".concat(c,"elasticsearch.k8s.elastic.co/cluster-name=").concat(r);break;case"kibana":c="".concat(c,"common.k8s.elastic.co/type=kibana,kibana.k8s.elastic.co/name=").concat(r);break;case A.RadonDBAppId.OpenSearch:c="".concat(c,"app.kubernetes.io/service=").concat(r);break;default:c="".concat(c,"app.kubernetes.io/instance=").concat(r)}return c},e.dataFormatter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(0,E.default)(e,"spec.ports[0].port",""),r=e.spec.type,n=(0,E.default)(e,"spec.ports[0].nodePort",""),o=e.metadata.namespace,c=e.metadata.name,s=e.spec.clusterIP;return{serviceName:c,namespace:o,role:(0,E.default)(e,"metadata.labels.role",""),uid:e.metadata.uid,tcpPort:a,httpPort:n,nodeIP:t,type:r,clusterIP:s,address:"NodePort"===r?"".concat(t,":").concat(n):"".concat(c,".").concat(o,":").concat(a),_originData:e}},(0,f.default)(e,"fetchList",u,(0,h.default)(e)),e}return(0,m.default)(a,[{key:"getPath",value:function(e){var t=e.namespace,a=e.cluster,r="";return globals.app.isMultiCluster&&a&&(r+="/clusters/".concat(a)),r+="/v1",t&&(r+="/namespaces/".concat(t)),r}},{key:"baseUrl",get:function(){return"/api"}}]),a}(O.default),i=(0,y.default)(l.prototype,"data",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,y.default)(l.prototype,"fetchList",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(n.default.mark((function t(a){var r,s,l,i,u,d,f,p,m,h,v,g,_,y;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.nodeStore.fetchList({cluster:a.cluster,namespace:a.namespace,workspace:a.workspace});case 2:return r=(0,E.default)(e.nodeStore,"list.data[0].ip",location.hostname),s=(0,E.default)(e.nodeStore.list.data.find((function(e){return"master"===(0,E.default)(e,"role[1]")})),"ip",r),t.next=6,request.get(e.getUrl(a));case 6:if(l=t.sent,i=[],i=l.items.map((function(t){return e.dataFormatter(t,s)})),a.app_id!==A.RadonDBAppId.MySQL){t.next=13;break}i.sort((function(e){return e.serviceName.endsWith("leader")?-1:0})),t.next=31;break;case 13:if(a.app_id!==A.RadonDBAppId.PostgreSQL){t.next=18;break}(u=i.find((function(e){return e.serviceName.endsWith("readwrite")})))?(d=i.find((function(e){return e.serviceName.endsWith("standby-readonly")})),i=[u],d&&i.push(d)):i=[],t.next=31;break;case 18:if(a.app_id!==A.RadonDBAppId.MongoDB){t.next=22;break}i=i.filter((function(e){return!e.serviceName.endsWith("arb-svc")})),t.next=31;break;case 22:if(a.app_id!==A.RadonDBAppId.Elasticsearch){t.next=30;break}return t.next=25,request.get(e.getUrl(T(T({},a),{},{app_id:"kibana"})));case 25:f=t.sent,p=f.items.map((function(t){return e.dataFormatter(t,s)})),i=i.filter((function(e){return e.serviceName.endsWith("es-http")})).concat(p),t.next=31;break;case 30:a.app_id===A.RadonDBAppId.RedisCluster?(i=i.filter((function(e){return!("ClusterIP"===e.type&&"None"===e.clusterIP)})),m=i.filter((function(e){return"proxy"===e.role})),h=(0,c.default)(m,1),v=h[0],g=i.filter((function(e){return["master","leader"].includes(e.role)})),_=i.filter((function(e){return["slave","follower"].includes(e.role)})),i=[].concat((0,o.default)(g),(0,o.default)(_)),v&&i.push(v)):a.app_id===A.RadonDBAppId.Kafka?((y=i.find((function(e){return e.serviceName==="".concat(a.chi,"-kafka-external-bootstrap")})))||((y=i.find((function(e){return e.serviceName==="".concat(a.chi,"-kafka-bootstrap")})))?((0,b.default)(y,"tcpPort",9092),(0,b.default)(y,"address","".concat(y.serviceName,".").concat(y.namespace,":").concat(y.tcpPort))):y={}),i=[y]):a.app_id===A.RadonDBAppId.OpenSearch&&(i=i.filter((function(e){return["".concat(a.chi,"-dashboards"),a.chi].includes(e.serviceName)})));case 31:return e.data=i,t.abrupt("return",i);case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l);t.default=C},4511:function(e,t,a){e.exports={DBApps:"_3-0tmC5ougAAijdgdXVLxt",appCreate:"s7pbKzK7DM6633M7NaihK",deployButton:"_23Ikqf30Vp5V0MKr2gVpMY",tooltips:"_1gRd-xJ4oMIOrNkh9Sqwe2",tooltipTitle:"_1nGcPtm4xUo0acXoJoML88",tag:"_1938FqkHFBzXN_r2XiKL0N"}},4512:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(5),a(11),a(6),a(16),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=n(a(0)),f=a(239),p=r(a(26)),m=a(317),h=r(a(445));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,f.inject)("rootStore","workspaceStore","projectStore")(o=(0,f.observer)(o=function(e){(0,l.default)(a,e);var t=v(a);function a(e){var r;return(0,c.default)(this,a),(r=t.call(this,e)).workspaceStore=new h.default,r.state={fetchFin:!1},r.handleChange=function(e){return r.props.rootStore.routing.push(e)},r.workspaceStore=new h.default,r}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.match;this.workspaceStore.fetchDetail(e.params)}},{key:"getRoutes",value:function(e){var t=this.props.route,a=t.routes,r=t.path,n=(0,p.default)(e,"[0]",{}),o=(0,p.default)(n.children,"[0].name")||n.name;return o?(a&&a.forEach((function(e){e.path===r&&e.redirect&&(e.redirect.to="".concat(r,"/").concat(o))})),a):[]}},{key:"render",value:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=globals.app.getProjectNavs({cluster:a,workspace:t,project:r,licenseInfo:this.licenseInfo,isEdge:this.props.workspaceStore.isEdge});if(""===this.edgeCluster){var o,c,s,l=null==n||null===(o=n[0])||void 0===o||null===(c=o.items)||void 0===c||null===(s=c.filter((function(e){return"settings"===e.name})))||void 0===s?void 0:s[0];l&&(l.children=l.children.filter((function(e){return"node-groups"!==e.name})))}return d.default.createElement(d.default.Fragment,null,(0,m.renderRoutes)(this.getRoutes(n)))}},{key:"edgeCluster",get:function(){return(0,p.default)(this.workspaceStore.detail,"_originData.metadata.labels['cluster-role.kubesphere.io/edge']","")}},{key:"licenseInfo",get:function(){return this.props.rootStore.licenseInfo}}]),a}(d.Component))||o)||o;t.default=g},4513:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=r(186),h=n(r(26)),v=n(r(885)),g=r(14),_=n(r(4514)),y=n(r(4515)),E=n(r(4517)),b=n(r(4519)),S=n(r(4521)),O=n(r(4523)),R=n(r(4525)),A=n(r(4527)),k=n(r(4529)),T=n(r(4533));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var N=(0,p.inject)("rootStore","workspaceStore","projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=P(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={rankModalVisible:!1},e.quotaStore=new v.default,e.showRankModal=function(){e.setState({rankModalVisible:!0})},e.hideRankModal=function(){e.setState({rankModalVisible:!1})},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.quotaStore.fetch(this.params)}},{key:"render",value:function(){var e=this.project.detail,a=this.props.workspaceStore.isEdge;return f.default.createElement("div",{className:_.default.container},f.default.createElement("div",{className:_.default.header},f.default.createElement("div",{className:_.default.title},t("OVERVIEW"))),f.default.createElement("div",{className:_.default.content},f.default.createElement(m.Columns,{className:_.default["margin-t0"]},f.default.createElement(m.Column,{className:"is-8"},f.default.createElement(y.default,{currentResource:this.props.match.params,isEdge:a}),this.hasMonitoring&&f.default.createElement(E.default,{currentResource:this.props.match.params,isEdge:a}),!a&&f.default.createElement(k.default,{detail:(0,g.toJS)(this.quotaStore.data),isLoading:(0,g.toJS)(this.quotaStore.isLoading),currentResource:this.props.match.params}),this.hasAlerting&&f.default.createElement(O.default,{currentResource:this.props.match.params}),this.hasMonitoring&&f.default.createElement(b.default,{currentResource:this.props.match.params})),f.default.createElement(m.Column,{className:"is-4"},f.default.createElement(S.default,{detail:e}),this.hasRolesAndMembersPermission&&f.default.createElement(A.default,{currentResource:this.props.match.params}),this.hasMonitoring&&f.default.createElement(R.default,{currentResource:this.props.match.params,showRankModal:this.showRankModal,isEdge:a})))),f.default.createElement(T.default,{visible:this.state.rankModalVisible,currentResource:this.props.match.params,onCancel:this.hideRankModal}))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,h.default)(this.props.match,"params.namespace")}},{key:"project",get:function(){return this.props.projectStore}},{key:"hasMonitoring",get:function(){return globals.app.hasClusterModule(this.params.cluster,"whizard-monitoring")}},{key:"hasAlerting",get:function(){return globals.app.hasClusterModule(this.params.cluster,"whizard-alerting")}},{key:"hasRolesAndMembersPermission",get:function(){return globals.app.hasPermission(C(C({module:"members",action:"view"},this.props.match.params),{},{project:this.namespace}))&&globals.app.hasPermission(C(C({module:"roles",action:"view"},this.props.match.params),{},{project:this.namespace}))}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}}]),r}(f.default.Component))||o)||o;a.default=N},4514:function(e,t,a){e.exports={header:"_1Um9mkZMhZpKEABScgLNpJ",title:"_2wVmDmuR6LGiOpXlQeUi-x","margin-t0":"_1pISvCPNfllVcAULglinkQ",padding12:"nfkKAFwB8GcBcPniXLbts",clusterTitle:"_2cHhlQr83260nQS0tPEMWW",content:"BtcrYnedHHxDgD_5bJQiz"}},4515:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);r(11),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=o(r(31)),s=o(r(43));r(41);var l=o(r(44)),i=o(r(96));r(11),r(18),r(16),r(4),r(22);var u=n(r(0)),d=o(r(788)),f=o(r(801)),p=o(r(26)),m=r(186),h=o(r(3)),v=o(r(959)),g=o(r(4516)),_=(0,u.memo)((function(e){var a=e.currentResource,r=e.isEdge,n=[{name:"pod",icon:"pod",title:"POD"},{name:"deployment",icon:"backup",title:"DEPLOYMENT"},{name:"statefulset",icon:"stateful-set",title:"STATEFULSET",isHidden:r},{name:"daemonset",icon:"deamon-set",title:"DAEMONSET",isHidden:r},{name:"job",icon:"backup",title:"JOB"},{name:"cronjob",icon:"backup",title:"CRONJOB"},{name:"persistentvolumeclaim",icon:"storage",title:"PERSISTENT_VOLUME_CLAIM",isHidden:r},{name:"service",icon:"appcenter",title:"SERVICE",isHidden:r},{name:"ingress",icon:"loadbalancer",title:"ROUTE",isHidden:r}].filter((function(e){return!e.isHidden})),o=(0,u.useState)({}),_=(0,i.default)(o,2),y=_[0],E=_[1],b=(0,u.useState)(!1),S=(0,i.default)(b,2),O=S[0],R=S[1],A=(0,u.useCallback)(function(){var e=(0,l.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,t.getBaseResourcesSummary({namespace:a.namespace,cluster:a.cluster});case 3:r=e.sent,E(r),R(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,u.useEffect)((function(){var e=new v.default({cluster:a.cluster});A(e)}),[]),u.default.createElement(f.default,{className:g.default.resourceSummary},u.default.createElement(m.Loading,{spinning:O},u.default.createElement("div",{className:g.default.wrapper},n.map((function(e){var a="namespace_".concat(e.name,"_count"),r=(0,p.default)(y,"".concat(a,".value.[1]"),0);return u.default.createElement("div",{className:(0,h.default)(g.default.wrapperItem,(0,c.default)({},g.default.wrapperItemHover,e.more)),key:e.name},u.default.createElement(d.default,{noLink:!0,className:g.default.avatar,icon:e.icon,title:r,desc:t("1"===r?e.title:"".concat(e.title,"_PL")),iconSize:40}))})))))}));a.default=_},4516:function(e,t,a){e.exports={resourceSummary:"Nagl9ihmr1bayFuDkeBTn",wrapper:"EAT7YapwWYDVekN6Fo34-",wrapperItem:"_3yhyyvQSH9XcDKt6IZuCjV",wrapperItemHover:"_3VfNpdurl4SNdOlghpDW5n",avatar:"_2nEc5ZKsZzGv3jSQ1W7_Co"}},4517:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(190),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var o=n(r(315)),c=n(r(43)),s=n(r(31));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(186),g=n(r(959)),_=n(r(890)),y=r(798),E=r(239),b=n(r(3)),S=n(r(26)),O=r(52),R=n(r(1402)),A=r(794),k=n(r(4518));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={cpu_usage:"namespace_cpu_usage",gpu_usage:"namespace_gpu_usage",gpu_memory_usage:"namespace_gpu_memory_usage",memory_usage:"namespace_memory_usage",limit_memory_usage:"namespace_memory_requests_hard",limit_cpu_usage:"namespace_cpu_requests_hard",storage_size_usage:"namespace_pvc_bytes_used",storage_size_usage_block:"namespace_block_storage_pvc_bytes_used",storage_size_usage_file:"namespace_file_storage_pvc_bytes_used",storage_size_usage_object:"namespace_object_storage_pvc_bytes_used",storage_size_usage_undefined:"namespace_undefined_pvc_bytes_used",storage_size_total:"namespace_pvc_bytes_total",storage_size_total_block:"namespace_block_storage_pvc_bytes_total",storage_size_total_file:"namespace_file_storage_pvc_bytes_total",storage_size_total_object:"namespace_object_storage_pvc_bytes_total",storage_size_total_undefined:"namespace_undefined_pvc_bytes_total"},N={cpu_total:"cluster_cpu_total",gpu_total:"cluster_gpu_total",gpu_memory_total:"cluster_gpu_memory_total",memory_total:"cluster_memory_total"},I={BlockStorage:{total:"storage_size_total_block",usage:"storage_size_usage_block"},FileStorage:{total:"storage_size_total_file",usage:"storage_size_usage_file"},ObjectStorage:{total:"storage_size_total_object",usage:"storage_size_usage_object"},UndefinedStorage:{total:"storage_size_total_undefined",usage:"storage_size_usage_undefined"},all:{total:"storage_size_total",usage:"storage_size_usage"}},w=(0,E.observer)(l=function(e){(0,f.default)(r,e);var a=C(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={active:"cpu",params:{times:10,step:"48m"},storageClass:"all"},e.monitorStore=new g.default({cluster:e.cluster}),e.clusterMonitorStore=new _.default({cluster:e.cluster}),e.fetchData=function(){var t=(0,i.default)(c.default.mark((function t(a){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(D(D({metrics:Object.values((0,O.hideGPUByLicense)(P,e.cluster))},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchClusterData=function(){var t=(0,i.default)(c.default.mark((function t(a){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterMonitorStore.fetchMetrics(D(D({metrics:Object.values((0,O.hideGPUByLicense)(N,e.cluster))},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return(0,S.default)(e,"value[1]",0)},e.handleSelect=function(t){e.setState({active:t})},e.renderTabItem=function(a){var r,n,o=a.type,c=a.icon,l=a.name,i=a.unit,u=a.used,d=a.total,f=a.unitType,p=a.filters,m=(0,A.getSuitableUnit)(d||u,f)||i,g=(0,A.getValueByUnit)(u,m),_=(0,A.getValueByUnit)(d,m),y="core"===m?"CORE_PL":m,E=e.state.active===o,S=g&&_?g/_*100:0,O=e.tabOptions.length,T="PERSISTENT_VOLUME"===l;return h.default.createElement("div",{className:(0,b.default)(k.default.tabItem,(0,s.default)({},k.default.checked,E)),key:o,onClick:function(){return e.handleSelect(o)}},h.default.createElement("div",{className:k.default.labelRow},h.default.createElement("div",{className:k.default.label},h.default.createElement(v.Icon,{name:c,size:20,type:E?"light":"dark"}),h.default.createElement("span",{className:T&&5===O?k.default.text:"",title:t(l)},t(l)),h.default.createElement("span",null,t(y)),T&&h.default.createElement(v.Tooltip,{content:t("PVC_USAGE_TOOLTIP_MESSAGE")},h.default.createElement(v.Icon,{name:"question",size:20}))),p&&h.default.createElement("div",{onClick:function(e){e.stopPropagation()}},h.default.createElement(v.Select,{size:"small",options:p.options,value:null!==(r=e.state[p.key])&&void 0!==r?r:"all",onChange:null!==(n=p.onChange)&&void 0!==n?n:function(t){e.setState({params:D(D({},e.state.params),{},(0,s.default)({},p.key,"all"===t?void 0:t))})}}))),h.default.createElement("div",{className:k.default.value},h.default.createElement("span",null,g),h.default.createElement("span",null,"/",_)),h.default.createElement("div",{className:k.default.progress},h.default.createElement(R.default,{className:(0,b.default)((0,s.default)({},k.default.progressActive,E)),percent:parseFloat(S.toFixed(2)),content:h.default.createElement("div",{className:k.default.tabItem_tooltip},h.default.createElement("div",null,t(l)),h.default.createElement("p",null,h.default.createElement("i",null),"core"===m?t("USED_VALUE_CORES_PERCENTAGE",{value:g,percentage:0!==S?"".concat(S.toFixed(2),"%"):"0%"}):t("USED_VALUE_UNIT_PERCENTAGE",{value:g,unit:m,percentage:0!==S?"".concat(S.toFixed(2),"%"):"0%"})),h.default.createElement("p",null,h.default.createElement("i",null),"core"===m?t("TOTAL_VALUE_CORES",{value:_}):t("TOTAL_VALUE_UNIT",{value:_,unit:m})))})))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData({namespace:this.namespace}),this.fetchClusterData()}},{key:"renderChart",value:function(){var e=this,t=this.renderChartOption.filter((function(t){return t.category===e.state.active}))[0],a={key:t.title,width:"100%",height:"100%",referenceLineColor:"yellow",showReferenceLabel:!1},r=(0,A.getAreaChartOps)(t);return h.default.createElement(y.SimpleArea,(0,o.default)({},a,r))}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading,r=this.clusterMonitorStore.isLoading;return h.default.createElement("div",{className:k.default.container},h.default.createElement("div",{className:k.default.header},h.default.createElement("div",{className:k.default.title},t("RESOURCE_USAGE"))),h.default.createElement(v.Loading,{spinning:a||r},h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:k.default.tabs},h.default.createElement("div",{className:k.default.tabsHeader},this.tabOptions.map((function(t){return e.renderTabItem(t)}))),h.default.createElement("div",{className:k.default.tabsBody})),h.default.createElement("div",{className:k.default.chartContainer},this.renderChart()))))}},{key:"cluster",get:function(){return this.props.currentResource.cluster}},{key:"workspace",get:function(){return this.props.currentResource.workspace}},{key:"namespace",get:function(){return this.props.currentResource.namespace}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"clusterMetrics",get:function(){return this.clusterMonitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,S.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"tabOptions",get:function(){var e,a,r=this,n=(0,A.getLastMonitoringData)(this.metrics),o=(0,A.getLastMonitoringData)(this.clusterMetrics),c=[{icon:"cpu",type:"cpu",name:"CPU",unitType:"cpu",used:this.getValue(n[P.cpu_usage]),total:this.getValue(o[N.cpu_total])},{icon:"memory",type:"memory",name:"MEMORY",unitType:"memory",used:this.getValue(n[P.memory_usage]),total:this.getValue(o[N.memory_total])},{icon:"gpu",type:"gpu",name:"GPU",used:this.getValue(n[P.gpu_usage]),total:this.getValue(o[N.gpu_total])},{icon:"computing",type:"gpu_merrory",name:"GPU_MEMORY",unitType:"memory",used:this.getValue(n[P.gpu_memory_usage]),total:this.getValue(o[N.gpu_memory_total])},{icon:"storage",type:"storage",name:"PERSISTENT_VOLUME",unitType:"memory",used:this.getValue(n[P[null===(e=I[this.state.storageClass])||void 0===e?void 0:e.usage]]),total:this.getValue(n[P[null===(a=I[this.state.storageClass])||void 0===a?void 0:a.total]]),filters:{key:"storageClass",onChange:function(e){r.setState({storageClass:e})},options:[{value:"all",label:t("ALL")},{value:"BlockStorage",label:t("BLOCK_STORAGE")},{value:"ObjectStorage",label:t("OBJECT_STORAGE")},{value:"FileStorage",label:t("FILE_STORAGE")},{value:"UndefinedStorage",label:t("UNCLASSIFIED")}]}}].filter((function(e){return!e.isHidden}));return(0,O.hideGPUByLicense)(c,this.cluster)}},{key:"renderChartOption",get:function(){var e,t=(0,A.getLastMonitoringData)(this.metrics),a=[{key:"CPU_USAGE",title:"CPU_USAGE",category:"cpu",unitType:"cpu",legend:["CPU_USAGE"],alert:{name:"requests.cpu",value:this.getValue(t[P.limit_cpu_usage])},data:(0,S.default)(this.metrics,"".concat(P.cpu_usage,".data.result"))},{key:"MEMORY_USAGE",title:"MEMORY_USAGE",category:"memory",unitType:"memory",legend:["MEMORY_USAGE"],alert:{name:"requests.memory",value:this.getValue(t[P.limit_memory_usage])},data:(0,S.default)(this.metrics,"".concat(P.memory_usage,".data.result"))},{key:"GPU_USAGE",title:"GPU_USAGE",category:"gpu",unitType:"gpu",legend:["GPU_USAGE"],data:(0,S.default)(this.metrics,"".concat(P.gpu_usage,".data.result"))},{key:"GPU_MEMORY_USAGE",title:"GPU_MEMORY_USAGE",category:"gpu_merrory",unitType:"memory",legend:["GPU_MEMORY_USAGE"],data:(0,S.default)(this.metrics,"".concat(P.gpu_memory_usage,".data.result"))},{key:"PERSISTENT_VOLUME_CLAIM_LOW_PL",title:"PVC_BYTES_USED_TCAP",category:"storage",unitType:"memory",legend:["PVC_BYTES_USED_TCAP"],data:(0,S.default)(this.metrics,"".concat(P[null===(e=I[this.state.storageClass])||void 0===e?void 0:e.usage],".data.result"))}];return(0,O.hideGPUByLicense)(a,this.cluster)}}]),r}(h.default.Component))||l;a.default=w},4518:function(e,t,a){e.exports={container:"_3GuPSynBq8zocA9pvy1Ig2",header:"_3Dn5F_MUwQCpUIP-qze0DY",title:"_8mdqHiY75DhNe5P25vG85",timeSelector:"_362USm0EEQ8y-vsnwJMRuW",tabs:"DocLdUqTU7qlKQSKxZ84H",tabsHeader:"_2mdJ7e7ovp9QabPEipj61I",tabItem:"EQVjl0TkIG5YrcLYxVMlM",labelRow:"_1FXNPHdAzjtEzGkjNVUgm-",label:"_1ew8X41G8sAUSHeKM0UQVU",text:"_1xJXV3bC0Z_kKsuoSmgXJm",value:"mpWStIWpNScCj7BFebtwK",progress:"DCbpfvNsqaAkYqdLwMSPL",progressActive:"_21ll_AQdCEgk4kmSUvBN3v",checked:"_3tH3fb2Mc5dAo6pB3sVl3P",chartContainer:"_3FExDcARUBT0TG2-IX5Cwz",tabItem_tooltip:"_1-P_-DA076FbC5a-z4z9MY"}},4519:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(187),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var o=n(r(315)),c=n(r(43)),s=n(r(31));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),g=n(r(959)),_=r(186),y=r(798),E=n(r(3)),b=n(r(26)),S=n(r(63)),O=r(794),R=n(r(4520));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D={oomkilled:"namespace_pod_oomkilled_count",pending:"namespace_pod_pending_count",evict:"namespace_pod_evicted_count",pod_total:"namespace_pod_count",pod_running:"namespace_pod_running_count",pod_pending:"namespace_pod_pending_count",pod_succeeded:"namespace_pod_succeeded_count",pod_failed:"namespace_pod_failed_count",pod_unknown:"namespace_pod_unknown_count",guaranteed:"namespace_pod_qos_guaranteed_count",burstable:"namespace_pod_qos_burstable_count",bestEffort:"namespace_pod_qos_besteffort_count"},C=(0,v.observer)(l=function(e){(0,f.default)(r,e);var a=T(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).monitorStore=new g.default({cluster:e.props.currentResource.cluster}),e.state={params:{times:10,step:"48m"}},e.fetchData=function(){var t=(0,i.default)(c.default.mark((function t(a){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(k(k({metrics:Object.values(D)},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return parseFloat((0,b.default)(e,"value[1]",0))},e.renderChartTitle=function(e){var a=e.icon,r=e.used,n=e.title;return h.default.createElement("div",{className:R.default.chartTitle},h.default.createElement(_.Icon,{name:a,size:42}),h.default.createElement("div",{className:R.default.chartInfo},h.default.createElement("p",null,r),h.default.createElement("p",null,t(n))))},e.renderTooltipQos=function(){var e=h.default.createElement("div",{className:R.default.qosContent},h.default.createElement("p",null,t.html("QOS_GUARANTEED")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BURSTABLE")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BESTEFFORT")));return h.default.createElement(_.Tooltip,{content:e},h.default.createElement(_.Icon,{name:"question",size:16}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData({namespace:this.props.currentResource.namespace})}},{key:"renderChart",value:function(e){var a=(0,O.getAreaChartOps)(e);return(0,S.default)(a.data)?h.default.createElement("p",{className:R.default.noData},t("NO_DATA")):h.default.createElement(y.MediumArea,(0,o.default)({},a,{noTitle:!0,top:4,width:"100%",height:48,key:e.title}))}},{key:"renderPie",value:function(e){return h.default.createElement(y.MultiPie,{legendClassName:R.default.legendClassName,dataList:e.dataList,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 166px)"}})}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading;return h.default.createElement("div",{className:R.default.container},h.default.createElement("div",{className:R.default.header},h.default.createElement("div",{className:R.default.title},t("POD_PL"))),h.default.createElement(_.Loading,{spinning:a},h.default.createElement("div",{className:R.default.flexcontainer},h.default.createElement("div",{className:(0,E.default)(R.default.chartbox,R.default.status)},this.renderPieOption.map((function(a,r){var n=a.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement("div",{className:(0,E.default)(R.default.item_pie,R.default.item),key:r},h.default.createElement("div",{className:R.default.pie_title},t(a.title),h.default.createElement("span",{className:R.default.pie_title_tooltip},"QoS"===a.title&&e.renderTooltipQos())),h.default.createElement("div",{className:R.default.pie_box},n?h.default.createElement("div",{className:R.default.pieNoData},h.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),h.default.createElement("p",null,t("NO_DATA"))):h.default.createElement(h.default.Fragment,null,e.renderPie(a),h.default.createElement("div",{className:R.default.summary},h.default.createElement("p",null,a.total),h.default.createElement("p",null,t("ALL"))))))}))),h.default.createElement("div",{className:R.default.chartbox},this.renderChartOption.map((function(t,a){return h.default.createElement("div",{className:(0,E.default)(R.default.item,R.default.areaChartItem),key:a},e.renderChartTitle(t),h.default.createElement("div",{className:R.default.chartBox},e.renderChart(t)))}))))))}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"renderChartOption",get:function(){var e=(0,O.getLastMonitoringData)(this.metrics);return[{category:"oomkilled",title:"OOM_KILL_PODS",icon:"error",unit:"",legend:["OOM_KILL_PODS"],data:(0,b.default)(this.metrics,"".concat(D.oomkilled,".data.result")),used:this.getValue(e[D.oomkilled])},{category:"pending",title:"PENDING_PODS",icon:"history-duotone",unit:"",legend:["PENDING_PODS"],data:(0,b.default)(this.metrics,"".concat(D.pending,".data.result")),used:this.getValue(e[D.pending])},{category:"evict",title:"EVICTED_PODS",unit:"",legend:["EVICTED_PODS"],icon:"logout-right-duotone",data:(0,b.default)(this.metrics,"".concat(D.evict,".data.result")),used:this.getValue(e[D.evict])}]}},{key:"renderPieOption",get:function(){var e=(0,O.getLastMonitoringData)(this.metrics);return[{title:"POD_STATUS",total:this.getValue(e[D.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#F5A623","#79879C","#CA2621","#E3E9EF","#EFF4F9"],data:[{name:t("RUNNING"),value:this.getValue(e[D.pod_running])},{name:t("PENDING"),value:this.getValue(e[D.pod_pending])},{name:t("COMPLETED"),value:this.getValue(e[D.pod_succeeded])},{name:t("FAILED"),value:this.getValue(e[D.pod_failed])},{name:t("UNKNOWN"),value:this.getValue(e[D.pod_unknown])}]}]},{title:"QoS",total:this.getValue(e[D.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#329DCE","#F5A623","#EFF4F9"],data:[{name:"Guaranteed",value:this.getValue(e[D.guaranteed])},{name:"Burstable",value:this.getValue(e[D.burstable])},{name:"BestEffort",value:this.getValue(e[D.bestEffort])}]}]}]}}]),r}(h.default.Component))||l;a.default=C},4520:function(e,t,a){e.exports={container:"J7tCTUkswYRzJsO0NgZZu",flexcontainer:"_3CbN5d3vZaXavemUVHDVQS",header:"_6ghRiiHWXvLKQ5w0BO8NR",title:"_32H4kdJD2BX6Z8o7AeuUd1",chartbox:"_1RvtU7HdY8e0s8UfhruFyB",status:"sqJBrDv3OrN6212SdDYj2",item:"WpOtBbMQ3nE17kvQjxi94",chartTitle:"_23OWBoKYAh-Alfe0hAkvd3",chartInfo:"mK8cfzKDGDLdtPHDIGMnV",areaChartItem:"_1OtGRViD8iWgPVGEtUp0b9",chartBox:"_2ECTbwKe_aXrhhQPEVcpUY",noData:"_1XiL3NmVhlR-30vmZL-FtS",item_pie:"_25d6HtFivLrIB_26I9aCIg",pie_title:"_3tCIO14zcjmn8h0GItIWRO",pie_title_tooltip:"_322njTecIZj8AZPp2RM7ni",pie_box:"_3yq5IiX8rFrsIuGBLEWU85",legendClassName:"_2AY_MsBBZmz9Mjg-PL2mmZ",pieNoData:"_1UTXz37gIdPgjcVmeHitIF",summary:"_3Fu0ReLngxrRaQYLgK7HXi"}},4521:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134);var o=n(r(3)),c=n(r(788)),s=n(r(243)),l=n(r(0)),i=r(433),u=r(52),d=n(r(4522)),f=function(e){var a=e.className,r=e.detail,n=void 0===r?{}:r;return l.default.createElement("div",{className:(0,o.default)(d.default.wrapper,a)},l.default.createElement("div",{className:d.default.header},l.default.createElement(c.default,{noLink:!0,className:d.default.avatar,icon:"project",title:(0,u.showNameAndAlias)(n),desc:n.description||"-",iconSize:48,iconType:"light"})),l.default.createElement("div",{className:d.default.content},l.default.createElement("div",{className:d.default.title},t("BASIC_INFORMATION")),l.default.createElement("div",{className:d.default.infoList},l.default.createElement("div",{className:d.default.text},l.default.createElement("div",null,(0,u.showNameAndAlias)(n.cluster,"cluster",{},!1,void 0,!0)||"-"),l.default.createElement("p",null,t("CLUSTER"))),l.default.createElement("div",{className:d.default.text},l.default.createElement("div",null,n.workspace?l.default.createElement(i.Link,{to:"/workspaces/".concat(n.workspace,"/overview")},(0,u.showNameAndAlias)(n.workspace,"workspace",{},void 0,void 0,!0)):"-"),l.default.createElement("p",null,t("WORKSPACE"))),l.default.createElement("div",{className:d.default.text},l.default.createElement("div",null,n.creator||"-"),l.default.createElement("p",null,t("CREATOR"))),l.default.createElement("div",{className:d.default.text},l.default.createElement("div",null,n.createTime?(0,s.default)(n.createTime).format("YYYY-MM-DD HH:mm:ss"):"-"),l.default.createElement("p",null,t("CREATION_TIME"))))))};a.default=f},4522:function(e,t,a){e.exports={wrapper:"_3krx7rpQbk7J9P3x6V9xc7",header:"_1yX2Zr69asT3KEERbB2lgG",avatar:"_1JgmWPB54tUdOiiCFwAi6J",content:"JgySaCSUzjxdMRSTvyDYm",title:"_2y8D379qMiuJoM7xfn2fJ1",infoList:"_1nNWjTTGqcG024P7VX7kB7",text:"j5DVVp4LaRGIfr1uYxeNt"}},4523:function(e,a,r){"use strict";var n=r(157),o=r(20);r(12),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(187),r(11),r(6),r(18),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(22),r(7);var c=o(r(315)),s=o(r(43)),l=o(r(31));r(41);var i=o(r(44)),u=o(r(96)),d=n(r(0)),f=r(798),p=o(r(26)),m=r(794),h=r(14),v=o(r(959)),g=o(r(4524));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var a=e.currentResource,r=(0,d.useState)({data:[],isLoading:!1}),n=(0,u.default)(r,2),o=n[0],l=n[1],_=(0,d.useCallback)(function(){var e=(0,i.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({isLoading:!0,data:[]}),e.next=3,t.fetchAlertData(y({},a));case 3:l((0,h.toJS)(t.alertData));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);(0,d.useEffect)((function(){var e=new v.default({cluster:a.cluster});_(e)}),[]);var E=(0,d.useCallback)((function(e){return parseFloat((0,p.default)(e,"value[1]",0))}),[]),b=(0,d.useCallback)((function(){var e=(0,h.toJS)(o.data),a=(0,m.getLastMonitoringData)(e);return[{category:"criticalAlert",data:(0,p.default)(e,"namespace_alerts_critical_total.data.result"),title:t("CRITICAL_ALERT"),unit:"",legend:[t("CRITICAL_ALERT")],used:E(a.namespace_alerts_critical_total),areaColors:["red"]},{category:"errorAlert",data:(0,p.default)(e,"namespace_alerts_error_total.data.result"),title:t("ERROR_ALERT"),unit:"",legend:[t("ERROR_ALERT")],used:E(a.namespace_alerts_error_total),areaColors:["yellow"]},{category:"warningAlert",data:(0,p.default)(e,"namespace_alerts_warning_total.data.result"),title:t("WARNING_ALERT"),legend:[t("WARNING_ALERT")],unit:"",used:E(a.namespace_alerts_warning_total),areaColors:["darkGray"]}]}),[o.data]),S=(0,d.useCallback)((function(){var e=(0,h.toJS)(o.data),a=(0,m.getLastMonitoringData)(e);return{title:"PROJECT_ALERTS",total:E(a.namespace_alerts_total),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,cx:55,colors:["#CA2621","#F5A623","#EFF4F9"],data:[{name:t("ALERT_RULE_FIRING"),value:E(a.namespace_alerts_firing_total)},{name:t("ALERT_RULE_PENDING"),value:E(a.namespace_alerts_pending_total)}]}]}}),[o.data]),O=S().dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return d.default.createElement("div",{className:g.default.alertStatus},d.default.createElement("div",{className:g.default.alertWrapper},d.default.createElement("div",{className:g.default.title},t("PROJECT_ALERTS")),d.default.createElement("div",{className:g.default.charts},d.default.createElement("div",{className:g.default.pieCharts},O?d.default.createElement("div",{className:g.default.noData},d.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),d.default.createElement("p",null,t("NO_DATA"))):d.default.createElement(d.default.Fragment,null,d.default.createElement(f.MultiPie,{legendClassName:g.default.legendClassName,dataList:S().dataList}),d.default.createElement("div",{className:g.default.summary},d.default.createElement("p",null,S().total),d.default.createElement("p",null,1===S().total?t("ALERTING_MESSAGE"):t("ALERTING_MESSAGE_PL"))))),d.default.createElement("div",{className:g.default.lineCharts},b().map((function(e){return d.default.createElement("div",{className:g.default.areaCharts,key:e.category},d.default.createElement(f.MediumArea,(0,c.default)({},(0,m.getAreaChartOps)(e),{key:e.title,width:"100%",height:60,renderTitle:function(){return d.default.createElement("div",{className:g.default.areaTitle},d.default.createElement("p",null,e.title),d.default.createElement("b",null,e.used))},top:4})))}))))))}var b=(0,d.memo)(E);a.default=b},4524:function(e,t,a){e.exports={alertStatus:"_3dwBaTednocPLrn9rhgL8d",noData:"_7rCUIvCK2KPNOwS8marRR",alertWrapper:"_3w0Dx88mSxOKG62IcyzWwh",title:"_2onnfl9VLXp4j7v9x3ePPe",charts:"BZTFs8T-Zj404Ew_fXEtP",pieCharts:"_2yHipYWAgbMVOGoeVtjJeV",legendClassName:"_1QFVzVgmxZsOq-F-qQG2bH",summary:"_3DRhpNtWePmNT1fAMAzHSI",lineCharts:"_1GPbpz08yeTbzekF6RMRcI",areaCharts:"VDO6ylkIcklOvCsyEC_B-",areaTitle:"_3rOImp328502JDkKwFnKdk"}},4525:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(5),r(11),r(6),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(7);var c,s,l,i=n(r(65)),u=n(r(31)),d=n(r(36)),f=n(r(37)),p=n(r(88)),m=n(r(55)),h=n(r(56)),v=n(r(51)),g=n(r(49)),_=(n(r(66)),r(186)),y=n(r(3)),E=n(r(1103)),b=n(r(790)),S=n(r(26)),O=n(r(63)),R=r(14),A=r(239),k=o(r(0)),T=r(433),D=n(r(1434)),C=r(72),P=r(794),N=n(r(4526));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var M={limit:10,page:1,sort_type:"desc"},L=(0,A.observer)((s=function(e){(0,m.default)(r,e);var a=x(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).sourceMap={workload:{store:new D.default(w(w({},M),{},{cluster:e.cluster,namespaces:e.namespace})),icon:"backup",name:"workload"},deployment:{store:new D.default(w(w({},M),{},{cluster:e.cluster,namespaces:e.namespace,kind:"deployment"})),icon:"backup",name:"deployment",url:function(t){return e.getLink(t,"Deployment")}},statefulset:{store:new D.default(w(w({},M),{},{cluster:e.cluster,namespaces:e.namespace,kind:"statefulset"})),icon:"stateful-set",name:"statefulset",url:function(t){return e.getLink(t,"StatefulSet")}},daemonset:{store:new D.default(w(w({},M),{},{cluster:e.cluster,namespaces:e.namespace,kind:"daemonset"})),icon:"deamon-set",name:"daemonset",url:function(t){return e.getLink(t,"DaemonSet")}}},e.getLink=function(t,a){var r=e.props.currentResource,n=r.workspace,o=r.cluster,c=r.namespace,s="".concat(n?"/".concat(n):"","/clusters/").concat(o,"/projects/").concat(c);return{Deployment:"".concat(s,"/deployments/").concat(t),StatefulSet:"".concat(s,"/statefulsets/").concat(t),DaemonSet:"".concat(s,"/daemonsets/").concat(t)}[a]},e.transData=function(a){var r="",n="",o=(0,S.default)(a,e.store.sort_metric,0),c=C.MONITOR_RANK_UNIT_MAP[e.store.sort_metric];return"%"===c?r="".concat((0,P.getValueByUnit)(o,c),"%"):""===c?r=Math.round(100*o)/100:(n=(0,P.getSuitableUnit)(o,c),r=(0,P.getValueByUnit)(o,n)),"".concat("gpu"===n?"".concat(r," GPU"):"core"===n?t("VALUE_CORES",{value:r}):t("VALUE_UNIT",{value:r,unit:n}))},(0,i.default)(e,"store",l,(0,p.default)(e)),e.state={sourceType:e.props.isEdge?"deployment":"workload",data:[],sortType:"desc",isFold:!0},e.getMetrics=function(t){e.store.fetchAll(w({},t))},e.handleChangeSource=function(t){e.setState({sourceType:t,sortType:"desc"}),e.store=e.sourceMap[t].store,e.getMetrics()},e.handleChangeSortMetric=function(t){e.setState({sortType:"desc"}),e.store.changeSortMetric(t)},e.handleTypeChange=function(t){e.setState({sortType:t}),e.getMetrics({sort_type:t})},e.renderPanelHeader=function(){var a=e.state.sortType;return k.default.createElement("div",{className:N.default.title},k.default.createElement("div",null,t("RESOURCE_USAGE_RANKING")),k.default.createElement(_.RadioGroup,{mode:"button",value:a,onChange:e.handleTypeChange},k.default.createElement(_.RadioButton,{value:"desc"},k.default.createElement(_.Icon,{name:"sort-descending",size:16})),k.default.createElement(_.RadioButton,{value:"asc"},k.default.createElement(_.Icon,{name:"sort-ascending",size:16}))))},e.renderListItems=function(a,r){return(0,O.default)(a)?k.default.createElement(E.default,null):k.default.createElement(k.default.Fragment,null,a.map((function(a,n){var o,c,s,l=e.sourceMap[r].icon,i=null===(o=(c=e.sourceMap[r]).url)||void 0===o?void 0:o.call(c),d=(0,S.default)(a,e.sourceMap[r].name,"-");return a.workload_type&&(i=e.getWorkloadLink(a),d=a.workload.replace(/\w+:/,""),l=C.PROJECT_RANK_RESOURCE_ICON_MAP[a.workload_type]),k.default.createElement("div",{key:"".concat(d,"-").concat(n),className:N.default.listItem},k.default.createElement(_.Icon,{style:{width:52},name:l,size:40,className:"margin-r12"}),k.default.createElement(b.default,{className:N.default.textBox,title:k.default.createElement("div",{className:(0,y.default)(N.default.text,(0,u.default)({},N.default.noLabel,"master"!==a.role))},k.default.createElement(T.Link,{to:i},d),"master"===a.role&&k.default.createElement("span",{className:N.default.label},t("CONTROL_PLANE"))),description:t(null==a||null===(s=a.workload_type)||void 0===s?void 0:s.toUpperCase())}),k.default.createElement("p",{className:N.default.cpu},e.transData(a)))})))},e.toggleFold=function(){e.setState({isFold:!e.state.isFold})},e.showMoreModal=function(){var t,a;null===(t=(a=e.props).showRankModal)||void 0===t||t.call(a)},e}return(0,f.default)(r,[{key:"getWorkloadLink",value:function(e){var t,a=e.workload_type;if("Pod"!==a){var r=null!==(t=null==e?void 0:e.workload.replace(/\w+:/,""))&&void 0!==t?t:"-";return this.getLink(r,a)}}},{key:"componentDidMount",value:function(){this.getMetrics()}},{key:"render",value:function(){var e=this.store,a=e.data,r=e.isLoading,n=this.state,o=n.sourceType,c=n.isFold,s=a.length>5,l=c?a.slice(0,5):a;return k.default.createElement("div",{className:N.default.container},this.renderPanelHeader(),k.default.createElement(_.Loading,{spinning:r},k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{className:N.default.header},k.default.createElement(_.Select,{className:N.default.select,value:o,onChange:this.handleChangeSource,options:this.sourceOptions}),k.default.createElement(_.Select,{className:N.default.select,value:this.store.sort_metric,onChange:this.handleChangeSortMetric,options:this.options})),k.default.createElement("div",{className:N.default.list,style:{height:s&&!c?"auto":"392px"}},this.renderListItems(l,o),s&&k.default.createElement(_.Button,{className:N.default.fold,icon:c?"chevron-down":"chevron-up",onClick:this.toggleFold},c?t("UNFOLD"):t("FOLD"))),k.default.createElement("div",{className:N.default.more},k.default.createElement(_.Button,{onClick:this.showMoreModal},t("VIEW_MORE"))))))}},{key:"cluster",get:function(){return this.props.currentResource.cluster}},{key:"namespace",get:function(){return this.props.currentResource.namespace}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"sourceOptions",get:function(){var e=this.props.isEdge;return[{label:t("WORKLOAD_PL"),value:"workload",isHidden:e},{label:t("DEPLOYMENT_PL"),value:"deployment"},{label:t("STATEFULSET_PL"),value:"statefulset",isHidden:e},{label:t("DAEMONSET_PL"),value:"daemonset",isHidden:e}].filter((function(e){return!e.isHidden}))}}]),r}(k.Component),l=(0,g.default)(s.prototype,"store",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sourceMap[this.state.sourceType].store}}),c=s))||c;a.default=L},4526:function(e,t,a){e.exports={container:"WUp_s1gsgr3xjZE-TLfFy",title:"MNoZg4Uw3ghathQUO2qdn",header:"_3DIgkOu1Z8XQBOuX5B5BmC",select:"_1uhE3pKI5LOTwAz5aKaXut",list:"_1X4T38f6yd41_Mmkb7iXLq",listItem:"_3OESwUwGF8C2r8cGijHadO",textBox:"_2rZn3DZLuvGRkQFYI0Cp07",text:"_1WsQhhK0Q2NkjFsa4sUdHf",label:"_3bvLV4piiuVGDzdqk8LNKo",noLabel:"_3chFFPAM6DHtOQoayA5y84",cpu:"fcQo8oVv314LZAog_r8Jx",fold:"dFUpEkr3fe7F_Vw_73JhR",more:"_3F8y08pFovou8ARGvzXVlh"}},4527:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);r(5),r(11),r(18),r(192),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a,r,n=e.currentResource,o=n.cluster,_=n.workspace,y=n.namespace,E=(0,i.useState)(0),b=(0,l.default)(E,2),S=b[0],O=b[1],R=(0,i.useState)({data:[]}),A=(0,l.default)(R,2),k=A[0],T=A[1];(0,i.useEffect)((function(){var e=new m.default,t=new h.default;D(t),C(e)}),[]);var D=(0,i.useCallback)(function(){var e=(0,s.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchList({cluster:o,workspace:_,namespace:y,limit:-1});case 2:O(t.list.total);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),C=(0,i.useCallback)(function(){var e=(0,s.default)(c.default.mark((function e(t){var a,r,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchList({cluster:o,workspace:_,namespace:y,limit:-1});case 2:a=(0,f.toJS)(t.list),r=a.data.filter((function(e){return void 0!==e.lastLoginTime&&""!==e.lastLoginTime})),n=(0,v.default)(r,(function(e){e.lastLoginTime})).splice(0,3),a.data=n,T((0,f.toJS)(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return i.default.createElement("div",{className:g.default.container},i.default.createElement("div",{className:g.default.title},t("PROJECT_MEMBERS_AND_ROLES")),i.default.createElement("div",{className:g.default.body},i.default.createElement(d.Loading,{spinning:!1},i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:g.default.summary},i.default.createElement("div",{className:g.default.item},i.default.createElement(u.default,{icon:"human",iconSize:40,title:k.total,className:g.default.avatar,desc:1===k.total?t("PROJECT_MEMBER_SCAP"):t("PROJECT_MEMBER_SCAP_PL"),noLink:!0})),i.default.createElement("div",{className:g.default.item},i.default.createElement(u.default,{icon:"role",iconSize:40,title:S,className:g.default.avatar,desc:1===S?t("PROJECT_ROLE_SCAP"):t("PROJECT_ROLE_SCAP_PL"),noLink:!0}))),i.default.createElement("div",{className:g.default.bolderText},t("RECENTLY_LOGGED_IN_MEMBERS")),i.default.createElement("div",{className:g.default.memberList},i.default.createElement("div",{className:g.default.item},null!==(a=null==k||null===(r=k.data)||void 0===r?void 0:r.map((function(e){return i.default.createElement(u.default,{key:e.name,className:g.default.memberListAvatarItem,avatar:e.avatar_url||"/assets/default-user.svg",title:e.name,desc:e.email,noLink:!0})})))&&void 0!==a?a:t("NO_DATA"))),i.default.createElement("div",{className:g.default.more},i.default.createElement(p.Link,{to:"/".concat(_,"/clusters/").concat(o,"/projects/").concat(y,"/members")},i.default.createElement(d.Button,null,t("VIEW_MORE"))))))))},r(5),r(11),r(18),r(192),r(16),r(4),r(22);var c=o(r(43));r(41);var s=o(r(44)),l=o(r(96)),i=n(r(0)),u=o(r(788)),d=r(186),f=r(14),p=r(433),m=o(r(322)),h=o(r(441)),v=o(r(446)),g=o(r(4528))},4528:function(e,t,a){e.exports={container:"_3PyNLKna1UJr9RGqCXq2PN",title:"_36c75SV8VUsbaSkzmcoJJe",summary:"_2jDNzW5aPH0rkDq6Evp0wY",bolderText:"_3oZ257HLpDJNyVLhz1wlOq",item:"_3LVmb3Jpwh_n7D82NQHHOz",memberListAvatarItem:"_2EQzaqbgYPQUUGY_pVhor",more:"RTaiJ5yZDpXcpzO5uW90D",avatar:"_3NvIlrVaMhliCGGQxahanO"}},4529:function(e,a,r){"use strict";var n=r(157),o=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(98),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.detail,r=e.isLoading,n=e.currentResource,o=n.cluster,v=n.workspace,g=n.namespace,_=(0,l.useState)([]),y=(0,s.default)(_,2),E=y[0],b=y[1];return(0,l.useEffect)((function(){var e=Object.entries(d.ONLY_CPU_MEMORY_QUOTAS_MAP).map((function(e){var t=(0,s.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({label:t[0]},t[1])}));b(e)}),[]),l.default.createElement("div",{className:m.default.container},l.default.createElement("div",{className:m.default.title},t("PROJECT_QUOTA_PL")),l.default.createElement(f.Loading,{spinning:r},l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:m.default.quotaList},E.map((function(e,t){var r=e.label,n=e.name;return l.default.createElement(p.default,{key:"".concat(r,"-").concat(t),name:r,total:(0,u.default)(a,'hard["'.concat(n,'"]')),used:(0,u.default)(a,'used["'.concat(n,'"]'),0),left:(0,u.default)(a,'left["'.concat(n,'"]'))})}))),l.default.createElement("div",{className:m.default.more},l.default.createElement(i.Link,{to:"/".concat(v,"/clusters/").concat(o,"/projects/").concat(g,"/base-info")},l.default.createElement(f.Button,null,t("VIEW_MORE")))))))},r(12),r(5),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(7);var c=o(r(31)),s=o(r(96)),l=n(r(0)),i=r(433),u=o(r(26)),d=r(72),f=r(186),p=o(r(4530)),m=o(r(4532));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}},4530:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(86),r(16),r(27),r(190),r(10),r(24),r(62),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(96));r(5),r(6),r(86),r(16),r(27),r(190),r(10),r(4),r(436),r(24),r(62),r(64),r(7);var c=n(r(0)),s=n(r(26)),l=n(r(158)),i=r(186),u=n(r(1044)),d=r(52),f=r(72),p=n(r(4531)),m=["limits.cpu","limits.memory","pods"],h={Ti:Math.pow(1024,4),Gi:Math.pow(1024,3),Mi:Math.pow(1024,2),Ki:1024,TB:Math.pow(1e3,4),GB:Math.pow(1e3,3),MB:Math.pow(1e3,2),KB:1e3,T:Math.pow(1e3,4),G:Math.pow(1e3,3),M:Math.pow(1e3,2),K:1e3,Bytes:1,B:1},v=function(e){var a=e.name,r=e.total,n=e.used;if(!r&&!Number(n)&&-1===m.indexOf(a))return null;var v=0,g="",_="",y=function(e){return function(e,t){return e?[e,parseFloat(t)*(f.ICON_TYPES[a]||!h[e]?1:h[e])]:["",parseFloat(t)]}(function(e){var t=Object.keys(h),a=(0,s.default)(e.match(/[0-9]+([a-zA-Z]+)/),"1","");return t.forEach((function(e){if(a.indexOf(e)>-1)return a=e,!1})),a}(e),e)};if("limits.cpu"===a||"requests.cpu"===a)r&&(v=Number((0,d.cpuFormat)(n))/Number((0,d.cpuFormat)(r)),n="".concat((0,d.cpuFormat)(n)," Core"),r="".concat((0,d.cpuFormat)(r)," Core"));else if("limits.memory"===a||"requests.memory"===a)r&&(v=Number((0,d.memoryFormat)(n))/Number((0,d.memoryFormat)(r)),n="".concat((0,d.memoryFormat)(n,"Gi")," Gi"),r="".concat((0,d.memoryFormat)(r,"Gi")," Gi"));else if(r){var E=y(n),b=(0,o.default)(E,2),S=b[0],O=b[1],R=y(r),A=(0,o.default)(R,2),k=A[0],T=A[1];g=S,_=k,v=O/T}v=Math.min(Math.max(v,0),1);var D=a.indexOf("gpu")>-1?"gpu":a,C="gpu"===D?"".concat(D,".limit"):D;return c.default.createElement("div",{className:p.default.quota},c.default.createElement("div",{className:p.default.quotaItem},c.default.createElement(i.Icon,{name:f.ICON_TYPES[D]||"resource",size:40}),c.default.createElement("div",{className:p.default.item},c.default.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.ICON_TYPES[D]?t(e.replace(/[. ]/g,"_").toUpperCase()):e}(C)),c.default.createElement("p",null,t("RESOURCE_TYPE_SCAP"))),c.default.createElement("div",{className:p.default.item},c.default.createElement("div",null,function(e){if(_&&!g){var t=f.ICON_TYPES[a]||!h[_]?1:h[_];return"".concat(e/t).concat(e>0?_:"")}return e}(n)),c.default.createElement("p",null,t("USED"))),c.default.createElement("div",{className:p.default.item},c.default.createElement("div",null,(0,l.default)(r)?t("NO_LIMIT_TCAP"):r),c.default.createElement("p",null,t("QUOTA")))),c.default.createElement(u.default,{value:Math.min(v,1),className:p.default.bar,rightText:r?"":t("NO_LIMIT"),text:t("USED_PERCENT",{percent:Number((100*v).toFixed(2))})}))};a.default=v},4531:function(e,t,a){e.exports={quota:"wPXTphh_v2X9WNrzqgEp2",quotaItem:"_1LGCyv1ogf6UGeQWOrXqPh",item:"_39N8hvK9R02dew_Ly7Lk0F",bar:"_1a14YNWybcwkUtp0TtLUbx"}},4532:function(e,t,a){e.exports={container:"_3QcJZz9OQTZg1pRtfi0S_9",title:"_2DVNlEQK6CzxXnKQFB0ete",quotaList:"_1NUnZVruuUa7Evki-XrV1m",more:"_2TZLtWlWRQzWFUpCzBhAE_"}},4533:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=o(r(96)),s=n(r(0)),l=o(r(787)),i=o(r(4534)),u=o(r(4536));function d(e){var a=e.visible,r=void 0===a||a,n=e.onCancel,o=e.currentResource,d=(0,s.useState)(!1),f=(0,c.default)(d,2),p=f[0],m=f[1];(0,s.useEffect)((function(){m(r)}),[r]);var h=(0,s.useCallback)((function(){m(!1),null==n||n()}),[]);return s.default.createElement(l.default,{bodyClassName:u.default.body,title:t("RESOURCE_USAGE_RANKING"),visible:p,onCancel:h,fullScreen:!0,hideFooter:!0},s.default.createElement(i.default,{currentResource:o}))}var f=(0,s.memo)(d);a.default=f},4534:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(85),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(64),r(7);var o,c,s,l,i,u,d=n(r(61)),f=n(r(31)),p=n(r(65)),m=n(r(36)),h=n(r(37)),v=n(r(88)),g=n(r(55)),_=n(r(56)),y=n(r(51)),E=n(r(49)),b=(n(r(66)),n(r(0))),S=r(14),O=r(239),R=n(r(3)),A=n(r(1434)),k=n(r(788)),T=n(r(846)),D=r(186),C=n(r(1047)),P=n(r(886)),N=r(72),I=r(794),w=r(52),x=n(r(987)),M=n(r(4535));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var B={limit:10,page:1,sort_type:"desc"},Y=(0,O.inject)("rootStore")(o=(0,O.observer)((c=function(e){(0,g.default)(r,e);var a=U(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=a.call.apply(a,[this].concat(o)),(0,p.default)(e,"hideColumns",s,(0,v.default)(e)),(0,p.default)(e,"type",l,(0,v.default)(e)),e.sourceMap={workload:{store:new A.default(j(j({},B),{},{cluster:e.cluster,namespaces:e.namespace})),icon:"backup",name:"workload"},deployment:{store:new A.default(j(j({},B),{},{cluster:e.cluster,namespaces:e.namespace,kind:"deployment"})),icon:"backup",name:"deployment",url:function(t){return e.getLink(t,"Deployment")}},statefulset:{store:new A.default(j(j({},B),{},{cluster:e.cluster,namespaces:e.namespace,kind:"statefulset"})),icon:"stateful-set",name:"statefulset",url:function(t){return e.getLink(t,"StatefulSet")}},daemonset:{store:new A.default(j(j({},B),{},{cluster:e.cluster,namespaces:e.namespace,kind:"daemonset"})),icon:"deamon-set",name:"daemonset",url:function(t){return e.getLink(t,"DaemonSet")}}},e.transData=function(e,a){var r,n="",o="",c=null!==(r=null==e?void 0:e[a])&&void 0!==r?r:0,s=N.MONITOR_RANK_UNIT_MAP[a];return"%"===s?n="".concat((0,I.getValueByUnit)(c,s),"%"):""===s?n=Math.round(100*c)/100:(o=(0,I.getSuitableUnit)(c,s),n=(0,I.getValueByUnit)(c,o)),"".concat(n," ").concat("core"===o?t("CORE_PL"):o)},e.getLink=function(t,a){var r=e.props.currentResource,n=r.workspace,o=r.cluster,c=r.namespace,s="".concat(n?"/".concat(n):"","/clusters/").concat(o,"/projects/").concat(c);return{Deployment:"".concat(s,"/deployments/").concat(t),StatefulSet:"".concat(s,"/statefulsets/").concat(t),DaemonSet:"".concat(s,"/daemonsets/").concat(t)}[a]},e.fetchRankData=function(t){e.store.fetchAll(j({},t))},(0,p.default)(e,"onChange",i,(0,v.default)(e)),(0,p.default)(e,"handleColumnsHide",u,(0,v.default)(e)),e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.fetchRankData()}},{key:"getWorkloadLink",value:function(e){var t,a=e.workload_type;if("Pod"!==a){var r=null!==(t=null==e?void 0:e.workload.replace(/\w+:/,""))&&void 0!==t?t:"-";return this.getLink(r,a)}}},{key:"renderToolbar",value:function(){return b.default.createElement("div",{className:(0,R.default)(M.default.toolbar,M.default.pane__toolbar,M.default.pane)},b.default.createElement(D.RadioGroup,{wrapClassName:"radio-group-button",value:this.type,onChange:this.onChange},b.default.createElement(D.RadioButton,{value:"workload"},t("WORKLOAD")),b.default.createElement(D.RadioButton,{value:"deployment"},t("DEPLOYMENT")),b.default.createElement(D.RadioButton,{value:"statefulset"},t("STATEFULSET")),b.default.createElement(D.RadioButton,{value:"daemonset"},t("DAEMONSET"))),b.default.createElement("div",{className:M.default.toolbar_filter},b.default.createElement(C.default,{className:M.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:this.columns,value:(0,S.toJS)(this.hideColumns),onChange:this.handleColumnsHide}),b.default.createElement(D.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),b.default.createElement(D.Select,{className:M.default.sortTypeSelect,value:this.store.sort_type,onChange:this.store.changeSortType,options:[{value:"desc",label:t("SORT_BY_DESC")},{value:"asc",label:t("SORT_BY_ASC")}]})))}},{key:"renderList",value:function(){var e=this.store.data.toJS();return b.default.createElement("div",{className:M.default.listContainer},b.default.createElement(x.default,{columns:this.filteredColumns,dataSource:e,emptyText:b.default.createElement(T.default,null),loading:this.store.isLoading,store:this.store}),this.renderPagination())}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,r=e.limit;return b.default.createElement("div",{className:(0,R.default)(M.default.pane,M.default.pane__pagination)},b.default.createElement(P.default,{page:t,total:a,limit:r,onChange:this.store.changePagination}))}},{key:"render",value:function(){return b.default.createElement("div",{className:M.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"store",get:function(){return this.sourceMap[this.type].store}},{key:"cluster",get:function(){return this.props.currentResource.cluster}},{key:"namespace",get:function(){return this.props.currentResource.namespace}},{key:"options",get:function(){var e=this,a=this.sourceMap[this.type].name;return this.store.sort_metric_options.filter((function(t){return!(0,S.toJS)(e.hideColumns).includes("".concat(t,"-").concat(a))})).map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"columns",get:function(){var e,a=this,r=this.sourceMap[this.type],n=r.store,o=r.url,c=r.name,s=r.icon,l=null===(e=n.sort_metric_options)||void 0===e?void 0:e.map((function(e){return{key:"".concat(e,"-").concat(c),sort_metric:e,title:t(N.MONITOR_RANK_METERIC_LOCALS[e]),isHideable:!0,render:function(t){return b.default.createElement("div",null,b.default.createElement("h3",null,a.transData(t,e)))}}})),i=[{title:t("namespace"===c?"PROJECT":c.toUpperCase()),width:"15%",key:c,render:function(e){var r,n=null==o?void 0:o(),l=null==e?void 0:e[c],i=s;return e.workload_type&&(n=a.getWorkloadLink(e),l=e.workload.replace(/\w+:/,""),i=N.PROJECT_RANK_RESOURCE_ICON_MAP[e.workload_type]),b.default.createElement(k.default,{className:M.default.avatar,icon:i,title:l,desc:t(null==e||null===(r=e.workload_type)||void 0===r?void 0:r.toUpperCase()),iconSize:40,to:n})}}];return(0,w.hideGPUByLicense)([].concat(i,(0,d.default)(l)),this.cluster)}},{key:"filteredColumns",get:function(){var e=this;return this.columns.filter((function(t){return!e.hideColumns.includes(t.key||t.dataIndex)}))}}]),r}(b.default.Component),s=(0,E.default)(c.prototype,"hideColumns",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,E.default)(c.prototype,"type",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"workload"}}),i=(0,E.default)(c.prototype,"onChange",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.store.sort_metric=e.store.sort_metric_options[0],e.hideColumns=[],new Promise((function(a){e.type=t,a()})).then((function(){e.fetchRankData()}))}}}),u=(0,E.default)(c.prototype,"handleColumnsHide",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hideColumns=t;var a=e.sourceMap[e.type].name;if(t.includes("".concat(e.store.sort_metric,"-").concat(a))){var r,n=e.store.sort_metric_options.filter((function(e){return!t.includes("".concat(e,"-").concat(a))}));e.store.changeSortMetric(null!==(r=n[0])&&void 0!==r?r:"")}}}}),o=c))||o)||o;a.default=Y},4535:function(e,t,a){e.exports={wrapper:"_39um7aZUG1pnR-CKIcu1TN",pane:"_2iDnSjq4uXAZJyGIrOmhoL",pane__toolbar:"_3QFk5Yaj49gXPFxd7kynrv",title:"_3LWzfDEgM4lCz09h7NPAsH",toolbar:"xWikrJmPVeNPguM3lAc3A",toolbar_buttons:"_2YCWXwPUPJ8xdyxkK1Jcdc",toolbar_filter:"aChO9CzgvR6ufSgZRgumH",sortTypeSelect:"_1i3fvIhSh6hddUE-Y-V616",sort_button:"_3Lzj6vN-NcuiW0iw0XUQ4z",table:"_1hYG_xXdPmjYe0wvfjKsdZ",table_rank:"_2vY8rDr9oLjdfQQLnSfv8M",table_no_border:"mWcvW9frLws6x7CQhOK-t",rankList_row:"_1wfX3qYkv1mSNgL0Ull9Dm",rankCol:"_22R2n2cWUIc23KL1SWzfz4",listContainer:"_3OWzoUJkfgC7VdrEOKGDNE",pane__pagination:"_1dyu7s2DExSUjbsEGTQCRR",avatar:"_2vxFx2PXwkoT-UTdRZVLV1"}},4536:function(e,t,a){e.exports={body:"_28-dXCzEhnCMuP6T-4CzDY"}},4537:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(26)),h=n(r(795)),v=n(r(1024)),g=r(793),_=n(r(796)),y=r(52),E=n(r(961)),b=n(r(1238));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,g.withProjectList)({store:new E.default,module:"applications",name:"APP"})(o=function(e){(0,u.default)(r,e);var a=R(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).type="composing",e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:function(t,a){return p.default.createElement(v.default,{title:(0,y.getDisplayName)(a),avatar:a.icon||"/assets/default-app.svg",to:"".concat(e.props.match.url,"/").concat(t),desc:(0,m.default)(a,'annotations["kubesphere.io/description"]',"-")})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return p.default.createElement(h.default,{name:t(e.toUpperCase()),type:e,flicker:!0})}},{title:t("VERSION"),dataIndex:"version",isHideable:!0,width:"20%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:180,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore,o=t.getData;return e.props.trigger("crd.app.create",O(O({module:r},a.params),{},{projectDetail:n.detail,success:o}))},e}return(0,i.default)(r,[{key:"getTableProps",value:function(){var e=this.props.tableProps,a=this.canCreate?[{key:"create",type:"control",text:t("CREATE"),onClick:this.showCreate}]:[];return{tableActions:O(O({},e.tableActions),{},{actions:a,onCreate:null}),emptyProps:{title:t("NO_COMPOSED_APP_FOUND"),desc:t("COMPOSED_APP_EMPTY_DESC")},searchType:"name"}}},{key:"render",value:function(){var e=this.props,a=e.tableProps,r=e.bannerProps,n=e.match;return p.default.createElement(g.ListPage,this.props,p.default.createElement(b.default,(0,c.default)({},r,{title:t("COMPOSED_APP_PL"),match:n,type:this.type})),p.default.createElement(_.default,(0,c.default)({},a,this.getTableProps(),{columns:this.getColumns()})))}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=globals.app.getActions({workspace:t,cluster:a,project:r,module:"deployments"}).includes("create"),o=globals.app.getActions({workspace:t,cluster:a,project:r,module:"services"}).includes("create");return n&&o}}]),r}(p.default.Component))||o;a.default=A},4538:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(84),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(84),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(244),h=n(r(800)),v=n(r(26)),g=r(433),_=r(186),y=n(r(795)),E=n(r(1024)),b=r(793),S=n(r(796)),O=r(52),R=n(r(1206)),A=n(r(1238));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,b.withProjectList)({store:new R.default,module:"applications",name:"APP"})(o=function(e){(0,u.default)(r,e);var a=D(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).type="template",e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return p.default.createElement(E.default,{isApp:!0,to:"".concat(e.prefix,"/").concat(a.cluster_id),avatar:(0,v.default)(a,"app.icon"),iconLetter:t,iconSize:40,title:t,desc:a.description})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"16%",render:e.renderStatus},{title:t("APP_TEMPLATE"),dataIndex:"app.name",isHideable:!0,width:"16%",render:function(e,t){return p.default.createElement(g.Link,{to:"/apps/".concat((0,v.default)(t,"version.app_id"))},e)}},{title:t("VERSION"),dataIndex:"version.name",isHideable:!0,width:"16%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"status_time",sorter:!0,sortOrder:a("status_time"),isHideable:!0,width:180,render:function(e,t){return(0,O.getLocalTime)(t.update_time||t.status_time).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderStatus=function(e,a){return a.additional_info?p.default.createElement(_.Tooltip,{content:a.additional_info},p.default.createElement(y.default,{name:t(e.toUpperCase()),type:e,flicker:!0})):p.default.createElement(y.default,{name:t(e),type:e,flicker:!0})},e.showDeploy=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore,o=t.trigger;return e.props.trigger("app.deploy",{module:r,namespace:a.params.namespace,cluster:a.params.cluster,workspace:(0,v.default)(n,"detail.workspace"),routing:e.props.rootStore.routing,trigger:o})},e.handleFetch=(0,h.default)((function(t){var a=e.props,r=a.store,n=a.getData;if(!r.list.isLoading)return n(T(T(T({},(0,m.parse)(location.search.slice(1))),t),{},{silent:!0}))}),1e3),e.handleWatch=function(t){"HelmRelease"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.handleFetch()},e}return(0,i.default)(r,[{key:"getTableProps",value:function(){var e=this.props.tableProps,a=this.canCreate?[{key:"deploy",type:"control",text:t("CREATE"),onClick:this.showDeploy}]:[];return{tableActions:T(T({},e.tableActions),{},{actions:a,onCreate:null}),emptyProps:{title:t("NO_TEMPLATE_BASED_APP_FOUND"),desc:t("TEMPLATE_BASED_APP_EMPTY_DESC")},searchType:"keyword"}}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match;return p.default.createElement(b.ListPage,(0,c.default)({},this.props,{onMessage:this.handleWatch}),p.default.createElement(A.default,(0,c.default)({},t,{match:r,type:this.type})),p.default.createElement(S.default,(0,c.default)({},a,this.getTableProps(),{itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/applications/").concat(this.type)}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasKSModule("openpitrix")&&globals.app.hasPermission({cluster:t,project:a,module:"applications",action:"create"})}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){return a("openpitrix.app.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(p.default.Component))||o;a.default=C},4539:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(84),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(84),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(26)),h=n(r(800)),v=r(433),g=r(186),_=n(r(795)),y=n(r(1024)),E=r(793),b=n(r(796)),S=r(244),O=r(52),R=n(r(1888)),A=n(r(1238));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,E.withProjectList)({store:new R.default,module:"applications",name:"APP"})(o=function(e){(0,u.default)(r,e);var a=D(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).type="others",e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return p.default.createElement(y.default,{isApp:!0,to:"".concat(e.prefix,"/").concat(a.name),avatar:(0,m.default)(a,"app.icon"),iconLetter:t,iconSize:40,title:t,desc:a.description})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"16%",render:e.renderStatus},{title:t("APP"),dataIndex:"app.name",isHideable:!0,width:"16%",render:function(e,t){return p.default.createElement(v.Link,{to:"/apps/".concat((0,m.default)(t,"version.app_id"))},e)}},{title:t("VERSION"),dataIndex:"version.name",isHideable:!0,width:"16%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"status_time",sorter:!0,sortOrder:a("status_time"),isHideable:!0,width:180,render:function(e,t){return(0,O.getLocalTime)(t.update_time||t.status_time).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderStatus=function(e,a){return a.additional_info?p.default.createElement(g.Tooltip,{content:a.additional_info},p.default.createElement(_.default,{name:t(e),type:e,flicker:!0})):p.default.createElement(_.default,{name:t(e),type:e,flicker:!0})},e.handleFetch=(0,h.default)((function(t){var a=e.props,r=a.store,n=a.getData;if(!r.list.isLoading)return n(T(T(T({},(0,S.parse)(location.search.slice(1))),t),{},{silent:!0}))}),1e3),e.handleWatch=function(t){"HelmRelease"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.handleFetch()},e}return(0,i.default)(r,[{key:"getTableProps",value:function(){return{tableActions:T(T({},this.props.tableProps.tableActions),{},{actions:[],onCreate:null}),emptyProps:{desc:t("OTHER_APP_EMPTY_DESC")},searchType:"keyword"}}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match;return p.default.createElement(E.ListPage,(0,c.default)({},this.props,{onMessage:this.handleWatch}),p.default.createElement(A.default,(0,c.default)({},t,{match:r,type:this.type})),p.default.createElement(b.default,(0,c.default)({},a,this.getTableProps(),{itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/applications/").concat(this.type)}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(p.default.Component))||o;a.default=C},4540:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(86),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(61)),l=n(r(315)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=r(239),g=n(r(788)),_=n(r(792)),y=r(793),E=n(r(796)),b=n(r(804)),S=n(r(865)),O=n(r(318)),R=r(52),A=r(72),k=r(14),T=r(434);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,y.withProjectList)({store:new O.default("deployments"),module:"deployments",name:"DEPLOYMENT",rowKey:"uid"})(o=(0,v.inject)("workspaceStore")(o=(0,v.observer)(o=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,k.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,T.getDeployStatus)(e)}))},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,k.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,T.getDeployStatus)(e)}))},e.getItemDesc=function(a){var r=(0,T.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?m.default.createElement(b.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return m.default.createElement(g.default,{icon:A.ICON_TYPES[o],iconSize:40,title:(0,R.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return m.default.createElement(S.default,{data:t,module:o})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:150,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0,isProject:!0,isEdge:e.isEdge,rootStore:e.props.rootStore})},e}return(0,u.default)(r,[{key:"getStatus",value:function(){return A.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return m.default.createElement(y.ListPage,this.props,m.default.createElement(_.default,(0,l.default)({},a,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),m.default.createElement(E.default,(0,l.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"isEdge",get:function(){return this.props.workspaceStore.isEdge}},{key:"k8sVersion",get:function(){var e,t,a=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.k8sVersion}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},!this.isEdge&&{value:"statefulsets",label:t("STATEFULSETS")},!this.isEdge&&{value:"daemonsets",label:t("DAEMONSETS")}].filter(Boolean)}}},{key:"selectActions",get:function(){var e=this,a=this.props,r=a.tableProps,n=a.trigger,o=a.name,c=a.rootStore,l=this.disableStopButton();return(0,s.default)((0,h.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:l,action:"edit",onClick:function(){return n("resource.batch.stop",{type:o,rowKey:"uid",success:c.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.module,n=a.trigger,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return n("workload.redeploy",{module:r,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){n("workload.delete",{type:o,detail:t,k8sVersion:e.k8sVersion})}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.rowKey;return C(C({},a.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:n,rowKey:o,k8sVersion:e.k8sVersion})}}]})}}]),r}(m.default.Component))||o)||o)||o,I=(0,v.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return m.default.createElement(N,(0,l.default)({k8sVersion:n},e))}));a.default=I},4541:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(86),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(61)),l=n(r(315)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=r(239),g=n(r(788)),_=n(r(792)),y=r(793),E=n(r(796)),b=n(r(804)),S=n(r(865)),O=r(14),R=r(52),A=r(72),k=r(434),T=n(r(318));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,y.withProjectList)({store:new T.default("statefulsets"),module:"statefulsets",name:"STATEFULSET",rowKey:"uid"})(o=(0,v.inject)("workspaceStore")(o=(0,v.observer)(o=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,O.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,k.getStatefulSetStatus)(e)}))},e.getItemDesc=function(a){var r=(0,k.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?m.default.createElement(b.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return m.default.createElement(g.default,{icon:A.ICON_TYPES[o],iconSize:40,title:(0,R.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return m.default.createElement(S.default,{data:t,module:o})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,rootStore:e.props.rootStore})},e}return(0,u.default)(r,[{key:"getStatus",value:function(){return A.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=e.workspaceStore.isEdge?{emptyProps:{desc:null}}:{onCreate:this.showCreate};return m.default.createElement(y.ListPage,this.props,m.default.createElement(_.default,(0,l.default)({},a,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),m.default.createElement(E.default,(0,l.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,selectActions:this.selectActions,columns:this.getColumns()},n)))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"k8sVersion",get:function(){var e,t,a=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.k8sVersion}},{key:"selectActions",get:function(){var e=this,a=this.props,r=a.tableProps,n=a.trigger,o=a.name,c=a.rootStore,l=this.disableStopButton();return(0,s.default)((0,h.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:l,action:"edit",onClick:function(){return n("resource.batch.stop",{type:o,rowKey:"uid",success:c.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.module,n=a.trigger,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return n("workload.redeploy",{module:r,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return n("workload.delete",{type:o,detail:t,k8sVersion:e.k8sVersion})}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.rowKey;return C(C({},a.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:n,rowKey:o,k8sVersion:e.k8sVersion})}}]})}}]),r}(m.default.Component))||o)||o)||o,I=(0,v.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return m.default.createElement(N,(0,l.default)({k8sVersion:n},e))}));a.default=I},4542:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(86),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(61)),l=n(r(315)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=r(239),g=n(r(788)),_=n(r(792)),y=r(793),E=n(r(865)),b=n(r(804)),S=n(r(796)),O=r(52),R=r(14),A=r(434),k=r(72),T=n(r(318));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,y.withProjectList)({store:new T.default("daemonsets"),module:"daemonsets",name:"DAEMONSET",rowKey:"uid"})(o=(0,v.inject)("workspaceStore")(o=(0,v.observer)(o=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,R.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,A.getDaemonSetStatus)(e)}))},e.getItemDesc=function(a){var r=(0,A.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?m.default.createElement(b.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return m.default.createElement(g.default,{icon:k.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return m.default.createElement(E.default,{data:t,module:o})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,rootStore:e.props.rootStore})},e}return(0,u.default)(r,[{key:"getStatus",value:function(){return k.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=e.workspaceStore.isEdge?{emptyProps:{desc:null}}:{onCreate:this.showCreate};return m.default.createElement(y.ListPage,this.props,m.default.createElement(_.default,(0,l.default)({},a,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),m.default.createElement(S.default,(0,l.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,selectActions:this.selectActions,columns:this.getColumns()},n)))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,r=e.trigger,n=e.name,o=e.rootStore,c=this.disableStopButton();return[].concat((0,s.default)((0,h.default)(a,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),disabled:c,action:"edit",onClick:function(){return r("resource.batch.stop",{type:n,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,a=e.module,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=e.rowKey;return C(C({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workload.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(m.default.Component))||o)||o)||o;a.default=N},4543:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(433),m=r(186),h=n(r(838)),v=n(r(792)),g=n(r(796)),_=r(793),y=n(r(804)),E=r(52),b=r(72),S=n(r(452)),O=r(239),R=n(r(4544));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var k=(0,_.withProjectList)({store:new S.default,module:"pods",name:"POD"})(o=(0,O.inject)("workspaceStore")(o=function(e){(0,i.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(e){var a=e.podStatus,r=a.status,n=a.type;return"running"!==n&&"completed"!==n?f.default.createElement(y.default,{status:n,reason:t(r),data:e,type:"pod"}):t(n.toUpperCase())},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:e.renderAvatar},{title:t("PODS.PHASE"),dataIndex:"phase",filters:e.getPodPhaseOptions(),isHideable:!0,search:!0,render:function(e,a){var r=a.status,n=null==r?void 0:r.phase,o=(0,b.getPodPhaseDetail)({phase:n}).text;return f.default.createElement("span",null,t(o))}},{title:t("NODE"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIP",search:!0,isHideable:!0,width:"15%",render:function(e,t){var a=t.podIp;return f.default.createElement("span",null,a)}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"15%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:a("startTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderAvatar=function(t,a){var r=e.props.module,n=e.props.match.params,o=n.workspace,c=n.cluster,s=n.namespace,l=a.podStatus;return f.default.createElement("div",{className:R.default.avatar},f.default.createElement("div",{className:R.default.icon},f.default.createElement(m.Icon,{name:b.ICON_TYPES[r],size:40}),f.default.createElement(h.default,{className:R.default.indicator,type:l.type,flicker:!0})),f.default.createElement("div",null,f.default.createElement(p.Link,{className:R.default.title,to:"/".concat(o,"/clusters/").concat(c,"/projects/").concat(s,"/").concat(r,"/").concat(t)},t),f.default.createElement("div",{className:R.default.desc},e.getItemDesc(a))))},e.renderNode=function(a,r){var n=e.props.workspaceStore.isEdge,o=e.props.match.params.cluster,c=r.node,s=r.nodeIp;if(!c)return"-";var l=t("NODE_IP",{node:c,ip:s});return f.default.createElement(p.Link,{to:"".concat(n?"/v2/edgewize":"","/clusters/").concat(o,"/nodes/").concat(c)},l)},e.renderStatus=function(e){return f.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getStatus",value:function(){return b.POD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getPodPhaseOptions",value:function(){return b.POD_PHASE_DETAILS.map((function(e){var a=e.value,r=e.text;return{value:a,text:t(r)}}))}},{key:"getPodsStatus",value:function(){return b.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement(_.ListPage,this.props,f.default.createElement(v.default,t),f.default.createElement(g.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),hideColumn:["status"],onCreate:null})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,r=e.trigger,n=e.name;return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return r("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e,success:a})}}]}}]),r}(f.default.Component))||o)||o;a.default=k},4544:function(e,t,a){e.exports={avatar:"_18wjE6YwKuGCc6QtMtarcr",icon:"asHVqalQGd7LEpy4uq86g",indicator:"Hf_3Y6V-3PISqkpZmPeSG",title:"_3C8yRkma8RNtyONr5I2J0t",desc:"_2Xm1Gh4UKoaBZc2amYMF34"}},4545:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(18),r(16),r(4),r(22),r(196),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(18),r(28),r(42),r(16),r(4),r(22),r(196),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(788)),h=n(r(240)),v=n(r(792)),g=r(793),_=n(r(1069)),y=n(r(804)),E=n(r(796)),b=r(52),S=r(434),O=r(72),R=n(r(318));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var k=(0,g.withProjectList)({store:new R.default("jobs"),module:"jobs",name:"JOB"})(o=(0,p.inject)("workspaceStore")(o=function(e){(0,i.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(a){var r=(0,S.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?f.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return f.default.createElement(m.default,{icon:O.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return f.default.createElement(_.default,{data:t,module:o})}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0,isProject:!0,isEdge:e.isEdge,rootStore:e.props.rootStore})},e}return(0,l.default)(r,[{key:"getStatus",value:function(){return O.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement(g.ListPage,this.props,f.default.createElement(v.default,(0,c.default)({},t,{tabs:this.tabs})),f.default.createElement(E.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"isEdge",get:function(){return this.props.workspaceStore.isEdge}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.store,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:function(a){n.rerun(a).then((function(){h.default.success(t("OPERATION_SUCCESS"))})).catch((function(e){console.error(e),h.default.error(t("OPERATION_FAILED"),e.message)})).finally((function(){e.props.routing.query()}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(e){return r("resource.delete",{type:o,detail:e})}}]}}]),r}(f.default.Component))||o)||o;a.default=k},4546:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(97),r(16),r(4),r(23),r(24),r(17),r(62),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(97),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62),r(109);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(433),h=n(r(26)),v=n(r(788)),g=n(r(795)),_=n(r(792)),y=r(793),E=n(r(796)),b=r(52),S=r(72),O=n(r(456));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var A=(0,y.withProjectList)({store:new O.default("s2ibuilders"),module:"s2ibuilders",name:"IMAGE_BUILDER"})(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.prefix,n=a.module;return[{title:t("NAME"),dataIndex:"name",render:function(e,a){return f.default.createElement(v.default,{icon:S.ICON_TYPES[n],iconSize:40,title:(0,b.getDisplayName)(a),desc:a.serviceName?t("BUILD_IMAGE_FOR_SERVICE",{service:a.serviceName}):"-",to:"".concat(r,"/").concat(e)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"15%",render:function(e){var a=(0,h.default)(e,"lastRunState","");return a="Running"===a?"Building":a,f.default.createElement(g.default,{name:t(a.toUpperCase()||"NOT_RUNNING_YET"),type:a||"Unknown",flicker:!0})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"15%",render:function(e){return e&&t(e.toUpperCase())}},{title:t("SERVICE"),dataIndex:"serviceName",isHideable:!0,width:"15%",render:function(e){return e?f.default.createElement(m.Link,{to:"./services/".concat(e,"/")},e):"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("imagebuilder.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.freshDisposer=(0,p.reaction)((function(){return e.store.list.isLoading}),(function(){var t=e.store.list.data.some((function(e){return"Running"===(0,h.default)(e,"status.lastRunState","Running")}));clearTimeout(e.freshTimer),t&&(e.freshTimer=setTimeout(e.handleFresh,4e3))}),{fireImmediately:!0})}},{key:"componentWillUnmount",value:function(){this.freshDisposer&&this.freshDisposer(),clearTimeout(this.freshTimer)}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return f.default.createElement(y.ListPage,this.props,f.default.createElement(_.default,(0,c.default)({},a,{description:t("IMAGE_BUILDER_DESC")})),f.default.createElement(E.default,(0,c.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"store",get:function(){return this.props.store}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(f.default.Component))||o;a.default=A},4547:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(788)),h=n(r(795)),v=n(r(792)),g=r(793),_=n(r(804)),y=n(r(796)),E=r(52),b=r(434),S=r(72),O=n(r(318));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var A=(0,g.withProjectList)({store:new O.default("cronjobs"),module:"cronjobs",name:"CRONJOB"})(o=(0,p.inject)("workspaceStore")(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.handleSwitch=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.props.store.switch(t,a,r).then((function(){e.props.routing.query()}))},e.getItemDesc=function(a){var r=(0,b.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?f.default.createElement(_.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return f.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),to:"".concat(e.prefix,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"15%",render:function(e,a){var r=(0,b.getWorkloadStatus)(a,o).status;return f.default.createElement(h.default,{type:r,name:t("CRONJOB_".concat(r.toUpperCase()))})}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,supportGpuSelect:!0,isProject:!0,isEdge:e.isEdge,k8sVersion:e.k8sVersion,success:function(){return e.props.routing.query()},rootStore:e.props.rootStore})},e}return(0,l.default)(r,[{key:"getStatus",value:function(){return S.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement(g.ListPage,this.props,f.default.createElement(v.default,(0,c.default)({},t,{tabs:this.tabs})),f.default.createElement(y.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"k8sVersion",get:function(){var e,t,a=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.k8sVersion}},{key:"isEdge",get:function(){return this.props.workspaceStore.isEdge}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){r("resource.baseinfo.edit",{detail:t,k8sVersion:e.k8sVersion,success:function(){return e.props.routing.query()}})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){r("resource.yaml.edit",{detail:t,k8sVersion:e.k8sVersion,success:function(){return e.props.routing.query()}})}},{show:function(e){return e.suspend},key:"start",icon:"start",text:t("START"),action:"edit",onClick:function(t){e.handleSwitch(t,!0,e.k8sVersion)}},{show:function(e){return!e.suspend},key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:function(t){e.handleSwitch(t,!1,e.k8sVersion)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){r("resource.delete",{type:n,detail:t,k8sVersion:e.k8sVersion,success:function(){return e.props.routing.query()}})}}]}}]),r}(f.default.Component))||o)||o,k=(0,p.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return f.default.createElement(A,(0,c.default)({k8sVersion:n},e))}));a.default=k},4548:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(315)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(788)),g=n(r(790)),_=n(r(792)),y=r(793),E=n(r(796)),b=r(186),S=r(52),O=r(72),R=n(r(443)),A=n(r(4549));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,y.withProjectList)({store:new R.default,module:"services",name:"SERVICE",searchByApp:!0})(o=(0,m.inject)("workspaceStore")(o=function(e){(0,u.default)(r,e);var a=D(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={type:"list"},e.handleTabChange=function(t){e.setState({type:t})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,width:"20%",render:function(t,a){return p.default.createElement(v.default,{icon:O.ICON_TYPES[n],iconSize:40,title:(0,S.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("SERVICE_TYPE_TCAP"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"15%",render:function(e,a){return p.default.createElement(g.default,{title:e?t("SERVICE_TYPE_".concat(e.toUpperCase())):t("CUSTOM_SERVICE"),description:t(a.type)||"-"})}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"15%",render:function(e,t){var a=(0,h.default)(t,'labels["application.kubesphere.io/instance"]'),r=(0,h.default)(t,'labels["app.kubernetes.io/name"]');return a||r||e||"-"}},{title:t("INTERNAL_ACCESS"),dataIndex:"clusterIP",isHideable:!0,width:"15%",render:function(e,a){return p.default.createElement(g.default,{title:a.clusterIP||"",description:t("".concat(a.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,a){return e.renderExternalService(a)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"15%",render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderExternalService=function(e){var a={des:"-",title:"-"};return"NodePort"===e.specType&&(a.des=t("NODE_PORTS_SCAP"),a.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(a.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),a.title=e.loadBalancerIngress.join("; ")),e.externalName?p.default.createElement(g.default,{description:a.des,title:function(){return p.default.createElement(b.Tooltip,{content:e.externalName},p.default.createElement("span",null,a.title))}}):p.default.createElement(g.default,{description:t("".concat(a.des)),title:a.title})},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("service.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state.type,t=this.props,a=t.bannerProps,r=t.tableProps,n=t.match,o=t.workspaceStore.isEdge?{}:{onCreate:this.showCreate};return p.default.createElement(y.ListPage,this.props,p.default.createElement(_.default,(0,s.default)({},a,{tabs:this.tabs,tips:this.tips})),"topology"===e?p.default.createElement(A.default,{match:n}):p.default.createElement(E.default,(0,s.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns()},o)))}},{key:"tabs",get:function(){var e=this.props.match.params.cluster;return globals.app.hasClusterModule(e,"network.topology")?{value:this.state.type,onChange:this.handleTabChange,options:[{value:"list",label:t("SERVICE_LIST")},{value:"topology",label:t("SERVICE_TOPOLOGY")}]}:{}}},{key:"tips",get:function(){return[{title:t("SERVICE_TYPES_Q"),description:t("SERVICE_TYPES_A")},{title:t("SCENARIOS_FOR_SERVICES_Q"),description:t("SCENARIOS_FOR_SERVICES_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",onClick:function(e){return a("service.edit",{detail:e})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:function(e){return e.type===O.SERVICE_TYPES.VirtualIP},onClick:function(e){return a("service.gateway.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("service.delete",{type:r,detail:e})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,r=e.name,n=e.rowKey,o=e.trigger;return T(T({},a.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return o("service.batch.delete",{type:r,rowKey:n})}}]})}}]),r}(p.default.Component))||o)||o;a.default=C},4549:function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(5),a(11),a(6),a(18),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=r(a(31)),s=r(a(36)),l=r(a(37)),i=r(a(88)),u=r(a(55)),d=r(a(56)),f=r(a(51)),p=n(a(0)),m=r(a(3)),h=a(239),v=a(186),g=a(5764),_=a(892),y=r(a(789)),E=r(a(4550)),b=a(794),S=r(a(4596)),O=r(a(4598)),R=r(a(4600)),A=r(a(4602)),k=r(a(4616));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.observer)(o=function(e){(0,u.default)(a,e);var t=C(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={type:"pause",selectService:null,fullscreen:!1},e.store=new E.default,e.handleZoom=function(){var t=_.event.transform;e.transPan.attr("transform","scale(".concat(t.k,") translate(").concat(t.x/t.k,", ").concat(t.y/t.k,")"))},e.fetchData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.store.fetchList(D(D({},e.props.match.params),t))},e.handleChange=function(t){e.setState({type:t},(function(){"auto"===e.state.type?(0,b.startAutoRefresh)((0,i.default)(e),{method:"fetchData",leading:!1,interval:1e4}):(0,b.stopAutoRefresh)((0,i.default)(e))}))},e.handleRefresh=function(){e.fetchData()},e.handleServiceClick=function(t){e.setState((function(e){var a=e.selectService;return{selectService:a&&a.id===t.id?null:t}}))},e.handleDetailClose=function(){e.setState({selectService:null})},e.toggleFullscreen=function(){e.setState((function(e){return{fullscreen:!e.fullscreen}}))},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData(),this.svg=(0,_.select)("#canvas").call((0,g.zoom)().extent([[0,0],[9999,9999]]).scaleExtent([.1,1.5]).on("zoom",this.handleZoom)),this.transPan=this.svg.select("g.transform")}},{key:"componentWillUnmount",value:function(){(0,b.stopAutoRefresh)(this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,r=t.fullscreen,n=t.selectService,o=this.store,s=o.topologies,l=s.nodes,i=void 0===l?[]:l,u=s.edges,d=void 0===u?[]:u,f=o.isLoading;return p.default.createElement(y.default,{className:(0,m.default)((0,c.default)({},k.default.fullscreen,r))},p.default.createElement("div",{className:k.default.toolbar},p.default.createElement(S.default,{value:a,options:this.options,onChange:this.handleChange}),p.default.createElement("div",{className:k.default.right},p.default.createElement(v.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}),p.default.createElement(v.Button,{type:"flat",icon:r?"minimize":"maximize",onClick:this.toggleFullscreen}))),p.default.createElement("div",{className:k.default.content},p.default.createElement("svg",{id:"canvas"},p.default.createElement("g",{className:"transform"},p.default.createElement("g",{className:"chart"},d.map((function(e){return p.default.createElement(R.default,{key:e.v+e.w,data:e})})),i.map((function(t){return p.default.createElement(O.default,{key:t.id,data:t,isSelected:n&&n.id===t.id,onClick:e.handleServiceClick})}))))),f&&p.default.createElement(v.Loading,{className:k.default.loading}),!!n&&p.default.createElement(A.default,{data:n,store:this.store,match:this.props.match,onClose:this.handleDetailClose})))}},{key:"options",get:function(){return[{label:"AUTO_REFRESH",icon:"start",value:"auto"},{label:"PAUSE",icon:"pause",value:"pause"}]}}]),a}(p.Component))||o;t.default=P},4550:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(16),a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(5),a(16),a(9),a(4),a(22);var n=r(a(43));a(41);var o,c,s,l,i=r(a(44)),u=r(a(65)),d=r(a(36)),f=r(a(37)),p=r(a(49)),m=(r(a(66)),r(a(26))),h=a(14),v=a(4551),g=(o=function(){function e(t){var a=this;(0,d.default)(this,e),this.topologies={},(0,u.default)(this,"detail",c,this),(0,u.default)(this,"isLoading",s,this),(0,u.default)(this,"isSubmitting",l,this),this.getListUrl=function(e){return"kapis/network.kubesphere.io/v1alpha2".concat(a.getPath(e),"/topology")},this.getDetailUrl=function(e){return"".concat(a.getListUrl(e),"/").concat(e.name)},this.module=t}var t,a;return(0,f.default)(e,[{key:"getPath",value:function(e){var t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchList",value:(a=(0,i.default)(n.default.mark((function e(t){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getListUrl(t),t);case 3:a=e.sent,this.topologies=(0,v.processTopology)((0,m.default)(a,"nodes",{})),this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchDetail",value:(t=(0,i.default)(n.default.mark((function e(t){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getDetailUrl(t));case 3:a=e.sent,this.detail=a,this.isLoading=!1;case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),c=(0,p.default)(o.prototype,"detail",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,p.default)(o.prototype,"isLoading",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=(0,p.default)(o.prototype,"isSubmitting",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,p.default)(o.prototype,"fetchList",[h.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchList"),o.prototype),(0,p.default)(o.prototype,"fetchDetail",[h.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchDetail"),o.prototype),o);t.default=g},4551:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(29),a(6),a(18),a(137),a(9),a(13),a(10),a(316),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.processTopology=void 0,a(12),a(5),a(11),a(29),a(6),a(18),a(28),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(316),a(7);var n=r(a(31)),o=r(a(1891)),c=r(a(1515)),s=r(a(1281)),l=r(a(446));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.processTopology=function(e){var t=new o.default.graphlib.Graph;t.setGraph({ranksep:"100",marginx:20,marginy:20}),t.setDefaultEdgeLabel((function(){return{}})),Object.keys(e).forEach((function(a){t.setNode(a,{label:e[a].label,width:150,height:100}),e[a].adjacency&&e[a].adjacency.forEach((function(e){var r=a===e?1:0;t.setEdge(a,e,{id:"".concat(a,"-").concat(e),minlen:r})}))})),o.default.layout(t),t.nodes().forEach((function(a){var r=t.node(a);e[a].x=r.x,e[a].y=r.y,e[a].degree=0})),t.edges().forEach((function(t){t.v===t.w?e[t.v].degree+=1:(e[t.v].degree+=1,e[t.w].degree+=1)}));var a=t.edges().map((function(e){var a=t.edge(e).points;return u(u({},e),{},{points:a})})),r=t.graph(),n=r.width,i=r.height,d={width:n,height:i,gWidth:n,gHeight:i,nodes:Object.values(e),edges:a};return d=function(e){var t=u({},e),a=0,r=0,n=e.gHeight||e.height,o=e.gWidth||e.width,i=n?o/n:1,d=e.nodes,f=d.filter((function(e){return 0===e.degree}));if(f.length){var p,m,h=d.filter((function(e){return 0!==e.degree}));h.length>0&&(i<1?(p=(0,c.default)(h,(function(e){return e.x})).x,m=(0,s.default)(h,(function(e){return e.y})).y,p&&(p+=200)):(p=(0,s.default)(h,(function(e){return e.x})).x,(m=(0,c.default)(h,(function(e){return e.y})).y)&&(m+=150))),p=p||(a+150)/2,m=m||(r+100)/2;var v,g,_=Math.ceil(Math.sqrt(f.length)),y=0,E=0;d=(d=(0,l.default)(d,(function(e){return e.rank}))).map((function(e){return f.find((function(t){return t.id===e.id}))?(E===_&&(E=0,y+=1),v=200*E+p,g=150*y+m,E+=1,Object.assign(e,{x:v,y:g})):e})),t.width=Math.max(e.width,v+75+50),t.height=Math.max(e.height,g+50+50),t.nodes=d}return t}(d)}},4596:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var c=o(r(36)),s=o(r(37)),l=o(r(55)),i=o(r(56)),u=o(r(51)),d=n(r(0)),f=r(186),p=o(r(4597));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,l.default)(r,e);var a=m(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(t){e.props.onChange(t.currentTarget.dataset.value)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.options;return d.default.createElement("div",{className:p.default.buttons},n.map((function(a){return d.default.createElement(f.Button,{key:a.value,icon:a.icon,iconType:r===a.value?"light":"dark",type:r===a.value?"control":"default","data-value":a.value,onClick:e.handleClick},t(a.label))})))}}]),r}(d.Component);a.default=h},4597:function(e,t,a){e.exports={buttons:"_3ikNc9_I9L02SEeuiDIB8K"}},4598:function(e,a,r){"use strict";r(15);var n=r(157),o=r(20);r(12),r(134),r(5),r(29),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(29),r(42),r(4),r(23),r(57),r(24),r(17),r(64);var c=o(r(31)),s=o(r(36)),l=o(r(37)),i=o(r(55)),u=o(r(56)),d=o(r(51)),f=n(r(0)),p=o(r(3)),m=r(186),h=o(r(4599));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var g={cloud:"cloud",heptagon:"appcenter"},_=function(e){(0,i.default)(r,e);var a=v(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props;(0,t.onClick)(t.data)},e}return(0,l.default)(r,[{key:"render",value:function(){var e,a=this.props,r=a.data,n=a.isSelected,o=r.label,s=r.labelMinor,l=r.x,i=r.y;if(r&&r.metadata){var u=r.metadata.find((function(e){return"kubernetes_ip"===e.id}));u&&(e=u.value)}return f.default.createElement("g",{className:h.default.wrapper,transform:"translate(".concat(l-75,", ").concat(i-50,")")},f.default.createElement("rect",{width:150,height:100,rx:4}),f.default.createElement("foreignObject",{width:150,height:100},f.default.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",className:(0,p.default)(h.default.service,(0,c.default)({},h.default.selected,n)),onClick:this.handleClick},f.default.createElement("div",{className:h.default.header},f.default.createElement("div",{className:h.default.icon},f.default.createElement(m.Icon,{name:g[r.shape],size:40})),f.default.createElement("div",{className:h.default.text},f.default.createElement("div",{className:h.default.title,title:o},o),f.default.createElement("div",{className:h.default.description},t("POD_COUNT_VALUE",{value:s.replace(/[ a-z]/g,"")})))),f.default.createElement("div",{className:h.default.footer},e?t(e.toUpperCase()):o))))}}]),r}(f.Component);a.default=_},4599:function(e,t,a){e.exports={wrapper:"_2mbWHDU8BXHZcz5hAFRFT9",service:"cDzX6CWqX8JTPvK7XG_V-",selected:"_17O1b_bi1TWkvP4qUDXe-l",footer:"_1snnFCQH5RtnJZWYAqZUcF",header:"_2SWMK_i9x7vbpLW_jXhnsr",icon:"_3ymyQLD4nmoQzxCPoBEAlA",text:"_3TjppLQqLTe5Q1mwo9qwg9",title:"_31AGol0Nr3rJCWoc_NeyPk",description:"_2rjNLpcCtfELHU6J_2NRp-"}},4600:function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),s=n(a(55)),l=n(a(56)),i=n(a(51)),u=r(a(0)),d=a(1256),f=n(a(4601));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=p(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props.data,t=void 0===e?{}:e,a=(0,d.line)().curve(d.curveBasis).x((function(e){return e.x})).y((function(e){return e.y})),r=t.v+t.w;return u.default.createElement("g",{className:f.default.wrapper},u.default.createElement("defs",null,u.default.createElement("marker",{id:"triangle-".concat(r),viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse"},u.default.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),u.default.createElement("path",{d:a(t.points),markerEnd:"url(#triangle-".concat(r,")")}))}}]),a}(u.Component);t.default=m},4601:function(e,t,a){e.exports={wrapper:"_3Q_ifBkTTIHEBmNsHEApJj"}},4602:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var o,c,s,l=r(a(36)),i=r(a(37)),u=r(a(55)),d=r(a(56)),f=r(a(51)),p=n(a(0)),m=a(14),h=a(239),v=a(186),g=r(a(4603)),_=r(a(4605)),y=r(a(4608)),E=r(a(4611)),b=r(a(4613)),S=r(a(4615));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=v.Collapse.CollapseItem,A=(0,h.observer)((s=c=function(e){(0,u.default)(a,e);var t=O(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={activeKey:["Info"]},e.handleJump=function(t){e.fetchDetail(t.id)},e.handleCollapseChange=function(t){e.setState({activeKey:t})},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchDetail(this.props.data.id)}},{key:"componentDidUpdate",value:function(e){e.data.id!==this.props.data.id&&this.fetchDetail(this.props.data.id)}},{key:"fetchDetail",value:function(e){var t=this.props,a=t.store,r=t.match.params,n=r.cluster,o=r.namespace;e&&a.fetchDetail({cluster:n,namespace:o,name:e})}},{key:"render",value:function(){var e=this.props.onClose,t=(0,m.toJS)(this.props.store.detail).node,a=void 0===t?{}:t,r=this.props.match;return p.default.createElement("div",{className:S.default.wrapper},p.default.createElement("div",{className:S.default.header},p.default.createElement("div",{className:S.default.icon},p.default.createElement(v.Icon,{name:"appcenter",size:40})),p.default.createElement("div",{className:S.default.title},a.label),p.default.createElement(v.Button,{className:S.default.close,icon:"close",iconType:"light",type:"control",onClick:e,"data-test":"modal-close"})),p.default.createElement("div",{className:S.default.content},p.default.createElement(v.Collapse,{activeKey:this.state.activeKey,onChange:this.handleCollapseChange,accordion:!0},p.default.createElement(R,{label:"info",key:"info"},p.default.createElement(g.default,{detail:a})),p.default.createElement(R,{label:"Traffic",key:"traffic"},p.default.createElement(_.default,{detail:a,jumpTo:this.handleJump})),p.default.createElement(R,{label:"Pods",key:"pods"},p.default.createElement(y.default,{detail:a})),p.default.createElement(R,{label:"Containers",key:"containers"},p.default.createElement(E.default,{detail:a,match:r})),p.default.createElement(R,{label:"Kubernetes labels",key:"labels"},p.default.createElement(b.default,{detail:a})))))}}]),a}(p.Component),c.defaultProps={data:{}},o=s))||o;t.default=A},4603:function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(6),a(18),a(4),a(23),a(24),a(17),a(64),a(812),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(6),a(18),a(42),a(4),a(23),a(57),a(24),a(17),a(64),a(812),a(7);var o=n(a(36)),c=n(a(37)),s=n(a(55)),l=n(a(56)),i=n(a(51)),u=r(a(0)),d=n(a(26)),f=n(a(63)),p=a(52),m=n(a(4604));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"getValue",value:function(e){return"datetime"===e.type?(0,p.getLocalTime)(e.value).format("YYYY-MM-DD HH:mm:ss"):e.value}},{key:"render",value:function(){var e=this,t=(0,d.default)(this.props.detail,"metadata",[]);return(0,f.default)(t)?null:(t.forEach((function(e){"Created"===e.label&&(e.value=(0,p.getLocalTime)(e.value).format("YYYY-MM-DD HH:mm:ss")),"pod"===e.id&&(e.label=e.label.replace(/#/g,"").trim())})),u.default.createElement("div",{className:m.default.info},t.map((function(t){return u.default.createElement("dl",{key:t.id},u.default.createElement("dd",null,t.label,":"),u.default.createElement("dd",null,e.getValue(t)))}))))}}]),a}(u.Component);t.default=v},4604:function(e,t,a){e.exports={info:"_1VN50mOqkK2M8SD1iavjaj"}},4605:function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(5),a(11),a(6),a(18),a(87),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(87),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var o=n(a(31)),c=n(a(61)),s=n(a(36)),l=n(a(37)),i=n(a(55)),u=n(a(56)),d=n(a(51)),f=r(a(0)),p=n(a(26)),m=n(a(63)),h=n(a(4606));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=_(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).format=function(e){return"number"!==e.dataType&&"count"!==e.id&&"port"!==e.id||(e.value=Number(e.value)),e},e}return(0,l.default)(a,[{key:"getColumns",value:function(e){var t=this.props.jumpTo;return[{id:"label",label:e.label,defaultSort:!1,render:function(e,a){return f.default.createElement("a",{onClick:function(){return t(a)}},e)}}].concat((0,c.default)(e.columns))}},{key:"getData",value:function(e){var t=this;return e.connections.map((function(e){return g({id:e.nodeId,label:{value:e.label}},e.metadata.reduce((function(e,a){return g(g({},e),{},(0,o.default)({},a.id,t.format(a)))}),{}))}))}},{key:"render",value:function(){var e=this,t=(0,p.default)(this.props.detail,"connections",[]);return(0,m.default)(t)?null:t.map((function(t){return f.default.createElement(h.default,{key:t.id,columns:e.getColumns(t),data:e.getData(t)})}))}}]),a}(f.Component);t.default=y},4606:function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),a(29),a(18),a(4),a(23),a(17),a(75),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(36)),c=n(a(37)),s=n(a(55)),l=n(a(56)),i=n(a(51));a(45),a(5),a(29),a(18),a(245),a(42),a(4),a(23),a(57),a(17),a(75);var u=n(a(446)),d=n(a(63)),f=r(a(0)),p=a(186),m=a(794),h=n(a(4607));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=v(a);function a(e){var r;(0,o.default)(this,a),(r=t.call(this,e)).handleTitleClick=function(e){var t=e.currentTarget.dataset.id;r.setState((function(e){var a=e.sortKey,r=e.order;return{sortKey:t,order:a!==t?"asc":"asc"===r?"desc":"asc"}}))};var n=r.props.columns.find((function(e){return e.defaultSort}));return r.state={sortKey:n?n.id:"",order:"asc"},r}return(0,c.default)(a,[{key:"componentDidUpdate",value:function(e,t){if(!t.sortKey&&e.columns!==this.props.columns){var a=this.props.columns.find((function(e){return e.defaultSort}));a&&this.setState({sortKey:a.id,order:"asc"})}}},{key:"getValue",value:function(e){return(0,d.default)(e)?"":"percent"===e.format?"".concat(e.value,"%"):"filesize"===e.format?"".concat((0,m.getSuitableValue)(e.value,"disk")):e.value}},{key:"render",value:function(){var e=this,t=this.props,a=t.columns,r=t.data,n=this.state,o=n.sortKey,c=n.order,s=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!t)return e;var r=(0,u.default)(e,"".concat(t,".value"));return"asc"===a&&(r=r.reverse()),r}(r,o,c);return f.default.createElement("table",{className:h.default.table},f.default.createElement("thead",null,f.default.createElement("tr",null,a.map((function(t){return f.default.createElement("th",{key:t.id,title:t.label,"data-id":t.id,onClick:e.handleTitleClick},"number"===t.dataType&&t.label.startsWith("#")?"#":t.label,o===t.id&&f.default.createElement(p.Icon,{name:"asc"===c?"caret-down":"caret-up"}))})))),f.default.createElement("tbody",null,s.map((function(t,r){return f.default.createElement("tr",{key:"".concat(t.id,"-").concat(r)},a.map((function(a){var r=e.getValue(t[a.id]);return f.default.createElement("td",{key:a.id,title:r},a.render?a.render(r,t):r)})))}))))}}]),a}(f.Component);t.default=g},4607:function(e,t,a){e.exports={table:"_3_MT8fZBjSbHX5gZjAySbf"}},4608:function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(5),a(11),a(6),a(18),a(87),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(87),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var o=n(a(31)),c=n(a(61)),s=n(a(36)),l=n(a(37)),i=n(a(55)),u=n(a(56)),d=n(a(51)),f=r(a(0)),p=n(a(26)),m=n(a(63)),h=n(a(4609));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=_(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).format=function(e){return"number"!==e.dataType&&"count"!==e.id&&"port"!==e.id||(e.value=Number(e.value)),e},e}return(0,l.default)(a,[{key:"getColumns",value:function(e){return[{id:"label",label:e.label,defaultSort:!1,render:function(e){return f.default.createElement("strong",null,e)}}].concat((0,c.default)(e.columns))}},{key:"getData",value:function(e){var t=this;return e.nodes.map((function(e){return g({id:e.id,label:{value:e.label}},[].concat((0,c.default)(e.metadata||[]),(0,c.default)(e.metrics||[])).reduce((function(e,a){return g(g({},e),{},(0,o.default)({},a.id,t.format(a)))}),{}))}))}},{key:"render",value:function(){var e=this,t=(0,p.default)(this.props.detail,"children",[]);return(0,m.default)(t)?null:t.filter((function(e){return"Pods"===e.label})).map((function(t){return f.default.createElement(h.default,{key:t.topologyId,data:e.getData(t)})}))}}]),a}(f.Component);t.default=y},4609:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),o=r(a(37)),c=r(a(55)),s=r(a(56)),l=r(a(51)),i=r(a(0)),u=r(a(813)),d=r(a(4610));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var p=function(e){(0,c.default)(a,e);var t=f(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"getDetails",value:function(e){return[{title:this.props.data.length,description:"COUNT",className:d.default.texts},{title:e.kubernetes_ip.value||"-",description:"IP",className:d.default.texts}]}},{key:"render",value:function(){var e=this,t=this.props.data;return i.default.createElement(u.default,null,t.map((function(t){return i.default.createElement(u.default.Item,{key:t.id,className:d.default.wrapper,titleClass:d.default.title,icon:"pod",status:t.kubernetes_state.value,title:t.label.value,description:t.kubernetes_state.value,details:e.getDetails(t)})})))}}]),a}(i.default.PureComponent);t.default=p},4610:function(e,t,a){e.exports={wrapper:"_3SzOUWHncKQV9RIjkdt7-i",title:"_25QmO4RglXBi95C7a6fl1M",texts:"_3kLVYFdpQWZpML2WX7CNie"}},4611:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(11),a(86),a(18),a(4),a(316),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(11),a(86),a(18),a(28),a(42),a(4),a(316),a(23),a(57),a(24),a(17),a(62);var o,c=r(a(61)),s=r(a(36)),l=r(a(37)),i=r(a(55)),u=r(a(56)),d=r(a(51)),f=n(a(0)),p=r(a(26)),m=a(186),h=r(a(1416)),v=a(239),g=r(a(4612)),_=r(a(1850));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var E={cpu_usage:"container_cpu_usage",memory_usage:"container_memory_usage_wo_cache"},b=(0,v.observer)(o=function(e){(0,i.default)(a,e);var t=y(a);function a(e){var r;return(0,s.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=r.state.containerName,t=r.props.match.params,a=t.cluster,n=t.namespace;r.monitorStore.fetchMetrics({cluster:a,namespace:n,container:e,podName:r.podName,metrics:Object.values(E)})},r.handleContainerChange=function(e){r.setState({containerName:e},(function(){r.fetchData()}))},r.state={podsId:"",containerName:""},r.monitorStore=new h.default,r}return(0,l.default)(a,[{key:"getOptions",value:function(e){if(e.length>0){var t=["POD"];e[0].nodes=e[0].nodes.filter((function(e){return-1===t.indexOf(e.label)}))}for(var a=e.length>0?(0,c.default)(e[0].nodes.map((function(e){return{label:e.label,value:e.label,icon:"docker"}}))):[],r=[],n={},o=0;o<a.length;o++)n[a[o].label]||(r.push(a[o]),n[a[o].label]=!0);return r}},{key:"render",value:function(){var e=this.monitorStore,t=e.isLoading,a=e.isRefreshing,r=this.state.containerName;return f.default.createElement("div",{className:g.default.container},f.default.createElement(m.Select,{className:g.default.containerSelect,options:this.getOptions(this.containers),onChange:this.handleContainerChange,value:r}),f.default.createElement("div",null,f.default.createElement(_.default,{type:"cpu",title:"CPU Usage(m)",metrics:this.cpuMetric,isLoading:t||a,showDay:172800}),f.default.createElement(_.default,{type:"memory",title:"Memory Usage(Mi)",metrics:this.memoryMetric,isLoading:t||a,showDay:172800})))}},{key:"podName",get:function(){var e=(0,p.default)(this.props.detail,"children",[]).filter((function(e){return"Pods"===e.label}));return e.length>0?e[0].nodes[0].label:""}},{key:"containers",get:function(){return(0,p.default)(this.props.detail,"children",[]).filter((function(e){return"Containers"===e.label}))}},{key:"cpuMetric",get:function(){var e=this.state.containerName,t=this.monitorStore.data;return""===e?[]:(0,p.default)(t,"".concat(E.cpu_usage,".data.result"))}},{key:"memoryMetric",get:function(){var e=this.state.containerName,t=this.monitorStore.data;return""===e?[]:(0,p.default)(t,"".concat(E.memory_usage,".data.result"))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,p.default)(e.detail,"id","");return a!==t.podsId?{containerName:"",podsId:a}:null}}]),a}(f.Component))||o;t.default=b},4612:function(e,t,a){e.exports={container:"_1OCYhwQxIVBiwoZgjC9Vt2",containerSelect:"x2gN32eQq4Fk7DwDRYlMt"}},4613:function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(30),a(18),a(4),a(23),a(17),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(30),a(18),a(42),a(4),a(23),a(57),a(17),a(32);var o=n(a(36)),c=n(a(37)),s=n(a(55)),l=n(a(56)),i=n(a(51)),u=r(a(0)),d=n(a(26)),f=n(a(63)),p=n(a(1045)),m=n(a(4614));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=(0,d.default)(this.props.detail,"tables",[]);return(0,f.default)(e)?null:e.map((function(e){return u.default.createElement("div",{key:e.id,className:m.default.info},e.rows.map((function(e){return u.default.createElement(p.default,{key:e.id,name:e.entries.label,value:e.entries.value})})))}))}}]),a}(u.Component);t.default=v},4614:function(e,t,a){e.exports={info:"_7d5WNeWa0X-J5GxQTmMvl"}},4615:function(e,t,a){e.exports={wrapper:"lu0R0_JuvYcj7r7Qy0otO",header:"_26TkzcTc5C6Em8vDEeBJEz",icon:"_1NAGSmlNiebgr8p6Cjjxsn",title:"_31yHnayK288K6G7r3t0WIm",close:"BBrUJQnPG4Qc4u1_NstsV",content:"_1SDKhZ-aItpEmZbrbTYtRJ"}},4616:function(e,t,a){e.exports={toolbar:"_2GsMGEQTK2HjeeJMHK207X",right:"_18ABRRL3yE8zHX7GNA-zgr",content:"_1SRN7Iw9zGbVNj2koryPUT",loading:"_3B7Ub5NbMtv9vH9XEk3Jyc",fullscreen:"_2ocL9fqKky1rPQumdGqZaN"}},4617:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(73),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(73),r(28),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var o=n(r(315)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(63)),v=r(186),g=n(r(240)),_=n(r(788)),y=n(r(790)),E=n(r(789)),b=n(r(792)),S=n(r(796)),O=r(793),R=r(52),A=r(72),k=n(r(917)),T=n(r(834)),D=n(r(4618));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,O.withProjectList)({store:new k.default,module:"ingresses",name:"ROUTE"})(s=function(e){(0,d.default)(r,e);var a=C(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).gatewayStore=new T.default,e.state={ingressClassScopes:[]},e.getGateway=(0,l.default)(c.default.mark((function t(){var a,r,n,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,r=a.cluster,n=a.namespace,t.next=3,e.gatewayStore.getNewGatewayByProject({cluster:r,namespace:n});case 3:o=t.sent,e.setState({ingressClassScopes:o});case 5:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return m.default.createElement(_.default,{icon:A.ICON_TYPES[n],iconSize:40,title:(0,R.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("GATEWAY_ADDRESS_TCAP"),dataIndex:"loadBalancerIngress",isHideable:!0,width:"22%",render:function(e){return(0,h.default)(e)?"-":e.join("; ")}},{title:t("Ingress Class"),dataIndex:"ingressClassName",isHideable:!0,width:"18%",render:function(e){return e||"-"}},{title:t("APP"),dataIndex:"app",isHideable:!0,search:!0,width:"22%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("router.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,gatewayStore:e.gatewayStore})},e.showAddGateway=function(){var a=e.props.rootStore,r=e.props.match.params,n=r.cluster,o=r.workspace,c=r.namespace;globals.app.hasKSModule("gateway")?a.routing.push("/".concat(o,"/clusters/").concat(n,"/projects/").concat(c,"/gateways")):g.default.warning({content:t("PLEASE_INSTALL_GATEWAY")})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.getGateway()}},{key:"renderCreateGateway",value:function(){return m.default.createElement(E.default,{className:"margin-t12 margin-b12"},m.default.createElement("div",{className:"flexbox"},m.default.createElement(v.Icon,{className:"margin-r12",name:"loadbalancer",size:40}),m.default.createElement(y.default,{className:D.default.text,title:t("GATEWAY_NOT_ENABLED"),description:t("ENT_ENABLE_GATEWAY_TIP")}),this.canSetGateway&&m.default.createElement(v.Button,{className:D.default.button,type:"control",onClick:this.showAddGateway},t("ENABLE_GATEWAY"))))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=this.state.ingressClassScopes;return m.default.createElement(O.ListPage,this.props,m.default.createElement(b.default,(0,o.default)({},t,{tips:this.tips})),(0,h.default)(r)&&this.renderCreateGateway(),m.default.createElement(S.default,(0,o.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"canSetGateway",get:function(){return globals.app.hasPermission({module:"project-settings",action:"manage",cluster:this.props.match.params.cluster,project:this.props.match.params.namespace})}},{key:"tips",get:function(){return[{title:t("PREREQUESTS_FOR_USE_ROUTE_Q"),description:t("PREREQUESTS_FOR_USE_ROUTE_A")},{title:t("ACCESS_TYPES_OF_ROUTE_Q"),description:t("ACCESS_TYPES_OF_ROUTE_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=this.props.match.params.namespace;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:function(e){return a("router.rules.edit",{detail:e,namespace:n})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:function(e){return a("router.annotations.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(m.default.Component))||s;a.default=P},4618:function(e,t,a){e.exports={text:"_2UwflePCO7DX0nbD3YecbW",button:"_3d_LjjEdrEtEXU2IB6YRTZ"}},4619:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(73),r(18),r(192),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(18),r(192),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var o=n(r(315)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=r(186),h=n(r(63)),v=n(r(0)),g=n(r(907)),_=n(r(831)),y=r(52),E=r(72),b=r(434),S=n(r(804)),O=n(r(788)),R=n(r(795)),A=n(r(792)),k=r(793),T=n(r(796)),D=n(r(1131)),C=n(r(4620));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,k.withProjectList)({store:new _.default,module:"persistentvolumeclaims",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(s=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).pvStore=new g.default,e.getItemDesc=function(e){var t=(0,b.getVolumeStatus)(e);return(0,h.default)(t)?e.storageClassName||"-":v.default.createElement(S.default,{reason:t,data:e,type:"volume"})},e.renderAccessTitle=function(){var e=v.default.createElement("div",null,v.default.createElement("div",null,t("RWO_DESC")),v.default.createElement("div",null,t("ROX_DESC")),v.default.createElement("div",null,t("RWX_DESC")));return v.default.createElement("div",{className:C.default.mode_title},t("ACCESS_MODE_TCAP"),v.default.createElement(m.Tooltip,{content:e},v.default.createElement(m.Icon,{name:"question",size:16,className:C.default.question})))},e.mapperAccessMode=function(e){var t=(0,y.map_accessModes)(e);return v.default.createElement("span",null,t.join(","))},e.pvYamlView=function(){var t=(0,l.default)(c.default.mark((function t(a){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.spec.volumeName,n=e.props.match.params.cluster,t.next=4,e.pvStore.fetchDetail({cluster:n,name:r});case 4:return t.abrupt("return",e.props.trigger("resource.yaml.edit",{detail:e.pvStore.detail,yaml:e.pvStore.detail._originData,readOnly:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore,o=t.store;return e.props.trigger("volume.create",{module:r,store:o,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster,onAddPv:function(){return e.props.trigger("pv.create",{store:e.pvStore})}})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.props.store.getKsVersion(this.props.match.params)}},{key:"getStatus",value:function(){return E.VOLUME_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,o={title:t("PERSISTENT_VOLUME"),dataIndex:"_originData",isHideable:!0,search:!1,width:"28.5%",render:function(a){return v.default.createElement("div",{id:"pvColumn",className:C.default.pv_content},a.spec.volumeName,a.spec.volumeName&&v.default.createElement(m.Tooltip,{content:t("VIEW_YAML")},v.default.createElement(m.Icon,{className:C.default.yaml,name:"log",size:20,onClick:function(){return e.pvYamlView(a)}})))}},c=[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(t,a){return v.default.createElement(O.default,{icon:"storage",iconSize:40,to:"".concat(e.props.match.url,"/").concat(t),desc:e.getItemDesc(a),title:(0,y.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"10.6%",render:function(e,a){var r=a.phase;return v.default.createElement(R.default,{type:r,className:C.default.status,name:t("VOLUME_STATUS_".concat(r.toUpperCase())),flicker:!0})}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.3%",render:function(t){return e.mapperAccessMode(t)}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"7.7%",render:function(e,t){return v.default.createElement(D.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:140,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}];return this.props.store.ksVersion>=3.2&&c.splice(2,0,o),c}},{key:"render",value:function(){var e=this.props,t=e.query,a=e.match,r=e.bannerProps,n=e.tableProps;return v.default.createElement(k.ListPage,this.props,v.default.createElement(A.default,(0,o.default)({},r,{tips:this.tips})),v.default.createElement(T.default,(0,o.default)({},n,{className:"table-2-6",itemActions:this.itemActions,namespace:t.namespace,columns:this.getColumns(),onCreate:this.showCreate,cluster:a.params.cluster})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(v.default.Component))||s;a.default=N},4620:function(e,t,a){e.exports={capacity:"_243L3gRj5L4Y9ESqEZMwQ5",pv_content:"_3H1A5jhLvHEPU7G5_KY0o6",yaml:"_2OW8dgKGOIskdPsJxUWKrg",status:"_3XGLspL44wlb4JRFycBpB6"}},4621:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=r(186),p=n(r(788)),m=n(r(795)),h=n(r(792)),v=r(793),g=n(r(796)),_=n(r(63)),y=n(r(0)),E=n(r(914)),b=r(52),S=r(72),O=n(r(4622));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var A=(0,v.withProjectList)({store:new E.default,module:"volume-snapshots",authKey:"volumesnapshots",name:"VOLUME_SNAPSHOT"})(o=function(e){(0,i.default)(r,e);var a=R(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"getStatus",value:function(){return S.VOLUME_SNAPSHOT_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),search:!0,sorter:!0,render:function(t,a){return y.default.createElement(p.default,{icon:"snapshot",iconSize:40,to:"".concat(e.props.match.url,"/").concat(t),title:t,desc:a.snapshotClassName})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,filters:this.getStatus(),search:!0,render:function(e,a){var r=a.errorMessage,n=a.backupStatus;return y.default.createElement("div",{className:O.default.status},y.default.createElement(m.default,{type:n,name:t("CREATE_STATUS_".concat(n.toUpperCase()))})," ",!(0,_.default)(r)&&y.default.createElement(f.Tooltip,{content:r},y.default.createElement(f.Icon,{name:"question"})))}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,render:function(e){return y.default.createElement("div",null,(0,b.showNameAndAlias)(e,"project"))}},{title:t("VOLUME_SNAPSHOT_CONTENT"),dataIndex:"boundVolumeSnapshotContentName",isHideable:!0,render:function(e){return e}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"20%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:a("createTime"),width:"20%",render:function(e){return e?(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return y.default.createElement(v.ListPage,(0,c.default)({},this.props,{noWatch:!0}),y.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),y.default.createElement(g.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.routing,n=e.name;return[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e,success:r.query})}}]}}]),r}(y.default.Component))||o;a.default=A},4622:function(e,t,a){e.exports={taints:"_2vLaCVxzXLnnQ_T1ttX8Cg",overview:"_1Q_WW2VkvXhYbDUAhp48jH",namespaceFilter:"_2MbiUC9KKqCf8a9u_HI2bZ"}},4623:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(84),r(73),r(18),r(48),r(192),r(16),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(62),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(73),r(18),r(28),r(48),r(192),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c=n(r(61)),s=n(r(31)),l=n(r(96)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=r(239),g=n(r(26)),_=n(r(447)),y=n(r(855)),E=r(52),b=n(r(441)),S=n(r(322)),O=n(r(885)),R=n(r(1096)),A=r(791),k=n(r(792)),T=n(r(1219)),D=n(r(866)),C=n(r(4624)),P=n(r(1234)),N=n(r(1233));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var M="storageclass.storage.k8s.io/requests.storage",L="storageclass.storage.k8s.io/persistentvolumeclaims",j=["requests.storage","persistentvolumeclaims"],U=(0,v.inject)("rootStore","workspaceStore","projectStore")(o=(0,v.observer)(o=(0,A.trigger)(o=function(e){(0,d.default)(r,e);var a=x(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).roleStore=new b.default,e.memberStore=new S.default,e.quotaStore=new O.default,e.limitRangeStore=new R.default,e.storageClassStore=new D.default,e.state={showEdit:!1,showDelete:!1,showEditQuota:!1,showEditDefaultResource:!1},e.getData=function(){e.store.fetchDetail(e.params)},e.handleMoreMenuClick=function(t,a){var r=e.enabledItemActions.find((function(e){return e.key===a}));r&&r.onClick&&r.onClick()},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.canViewMembers&&this.memberStore.fetchList(this.params),this.canViewRoles&&this.roleStore.fetchList(this.params),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params),this.storageClassStore.fetchList({cluster:this.params.cluster})}},{key:"render",value:function(){var e=(0,h.toJS)(this.store.detail),a=this.roleStore.list.total,r=this.memberStore.list.total,n=(0,g.default)(this.quotaStore,'data.used["count/services"]',0),o=(0,h.toJS)(this.limitRangeStore.list.data)[0],c=(0,h.toJS)(this.quotaStore.data);return m.default.createElement("div",null,m.default.createElement(k.default,{icon:"cdn",title:t("BASIC_INFORMATION"),description:t("PROJECT_BASIC_INFO_DESC"),module:"project_base_info",tips:this.isEdge?void 0:this.tips}),m.default.createElement(C.default,{detail:e,roleCount:a,memberCount:r,serviceCount:n,workspace:this.workspace,actions:this.enabledItemActions,onMenuClick:this.handleMoreMenuClick,showDetail:this.canViewMembers&&this.canViewRoles}),!this.isEdge&&m.default.createElement(m.default.Fragment,null,m.default.createElement(N.default,{detail:o}),m.default.createElement(P.default,{detail:c,storageClassResource:this.storageClassResource,relateStorageClass:this.relateStorageClass,allStorageClass:this.allStorageClass})),m.default.createElement(T.default,{annotations:e.annotations,hiddenKeys:globals.config.preservedAnnotations}))}},{key:"allStorageClass",get:function(){return(0,h.toJS)(this.storageClassStore.list.data)}},{key:"storageClassResource",get:function(){var e=(0,h.toJS)(this.quotaStore.data.hard),t=(0,h.toJS)(this.quotaStore.data.used);return j.map((function(a){var r=(0,g.default)(e,[a],a.includes("claims")?"0":"0Gi"),n=(0,g.default)(t,[a],a.includes("claims")?"0":"0Gi"),o=a.includes("claims")?r:(0,E.memoryFormat)(r,"Gi");return{key:a,name:a,total:o>0?a.includes("claims")?o:"".concat(o,"Gi"):void 0,used:a.includes("claims")?n:(0,E.memoryFormat)(n,"Gi")}}))}},{key:"relateStorageClass",get:function(){var e=(0,h.toJS)(this.quotaStore.data),t=(0,g.default)(e,"hard",{}),a=(0,g.default)(e,"used",{}),r=Object.entries(t).filter((function(e){var t=(0,l.default)(e,1)[0];return(0,_.default)(t,M)||(0,_.default)(t,L)})).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return(0,s.default)({},a,r)})),n=r.map((function(e){var t=Object.keys(e)[0];return(0,s.default)({},t,(0,g.default)(a,t))})),o={total:(0,c.default)(r),used:(0,c.default)(n)};if(o.total.length>0){var i,u=(0,y.default)((0,c.default)(o.total),(function(e){return Object.keys(e)[0].split(".").slice(1).join(".")}));return i={},(0,s.default)(i,M,(0,g.default)(u,[M],[]).map((function(e){var t=Object.keys(e)[0],a=o.used.filter((function(e){return Object.keys(e)[0]===t}))[0];return{name:t,total:Object.values(e)[0],used:Object.values(a)[0]}}))),(0,s.default)(i,L,(0,g.default)(u,[L],[]).map((function(e){var t=Object.keys(e)[0],a=o.used.filter((function(e){return Object.keys(e)[0]===t}))[0];return{name:t,total:Object.values(e)[0],used:Object.values(a)[0]}}))),i}return{}}},{key:"isClusterManage",get:function(){return globals.app.isPlatformAdmin||globals.app.hasPermission({module:"clusters",action:"manage"})}},{key:"store",get:function(){return this.props.projectStore}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,g.default)(this.props.match,"params",{})}},{key:"workspace",get:function(){return this.params.workspace}},{key:"isEdge",get:function(){return this.props.workspaceStore.isEdge}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_QUOTA_Q"),description:t.html("HOW_TO_USE_QUOTA_A")},{title:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_Q"),description:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions(w(w({module:"project-settings"},this.params),{},{project:this.params.namespace}))}},{key:"canViewRoles",get:function(){return globals.app.hasPermission(w(w({module:"roles",action:"view"},this.params),{},{project:this.params.namespace}))}},{key:"canViewMembers",get:function(){return globals.app.hasPermission(w(w({module:"members",action:"view"},this.params),{},{project:this.params.namespace}))}},{key:"itemActions",get:function(){var e=this,a=this.props.rootStore.routing,r=this.store.detail,n=this.limitRangeStore.list.data,o=[{key:"edit",icon:"pen",action:"edit",text:t("EDIT_INFORMATION"),onClick:function(){return e.trigger("resource.baseinfo.edit",{detail:r,success:e.getData})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),isHidden:this.isEdge,onClick:function(){return e.trigger("project.default.resource",w(w({},e.props.match.params),{},{store:e.limitRangeStore,detail:n[0],supportGpuSelect:!0,success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",action:"delete",text:t("DELETE_PROJECT"),onClick:function(){return e.trigger("resource.delete",{detail:r,desc:t.html("DELETE_PROJECT_TIP",{resource:r.name}),success:function(){(0,E.removeV4DashboardHistory)(globals.user.username,r.uid),a.push("/workspaces/".concat(e.params.workspace,"/projects"))}})}}];return globals.app.hasPermission({workspace:this.workspace,module:"projects",action:"manage"})&&o.splice(1,0,{key:"edit-quota",icon:"pen",action:"edit",text:t("EDIT_PROJECT_QUOTAS"),isHidden:this.isEdge,onClick:function(){return e.trigger("project.quota.edit",{detail:r,success:function(){return e.quotaStore.fetch(e.params)}})}}),this.isClusterManage&&o.splice(1,0,{key:"edit-annotations",icon:"pen",action:"manage",text:t("EDIT_ANNOTATIONS"),onClick:function(){return e.trigger("resource.annotations.edit",{detail:r,success:e.getData})}}),o}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return(!t.action||e.enabledActions.includes(t.action))&&!t.isHidden}))}}]),r}(m.default.Component))||o)||o)||o;a.default=U},4624:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=r(186),f=n(r(3)),p=n(r(789)),m=n(r(790)),h=n(r(26)),v=n(r(63)),g=n(r(1216)),_=n(r(0)),y=r(433),E=r(52),b=n(r(4625));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,l.default)(r,e);var a=S(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"renderMoreMenu",value:function(){var e=this.props,t=e.actions,a=e.onMenuClick;return _.default.createElement(d.Menu,{onClick:a},t.map((function(e){return _.default.createElement(d.Menu.MenuItem,{key:e.key},_.default.createElement(d.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.workspace,n=e.serviceCount,c=e.memberCount,s=e.roleCount,l=e.actions,i=e.showDetail;return _.default.createElement(p.default,{className:(0,f.default)(b.default.wrapper,(0,o.default)({},b.default.single,!i)),title:t("PROJECT_INFO")},_.default.createElement("div",{className:b.default.header},_.default.createElement(m.default,{icon:"project",title:(0,E.getDomTitle)((0,E.getDisplayNameNew)(a)),description:t("NAME"),ellipsis:!0}),_.default.createElement("div",{className:(0,f.default)(b.default.item,"ellipsis")},_.default.createElement("div",null,_.default.createElement(y.Link,{to:"/workspaces/".concat(r),className:"ellipsis block"},(0,E.showNameAndAlias)(r,"workspace"))),_.default.createElement("p",null,t("WORKSPACE"))),_.default.createElement("div",{className:b.default.item},_.default.createElement("div",null,(0,h.default)(a,"creator")||"-"),_.default.createElement("p",null,t("CREATOR"))),_.default.createElement("div",{className:b.default.item},_.default.createElement("div",null,(0,E.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),_.default.createElement("p",null,t("CREATION_TIME"))),!(0,v.default)(l)&&_.default.createElement(g.default,{content:this.renderMoreMenu()})),i&&_.default.createElement("div",{className:b.default.content},_.default.createElement("div",{className:b.default.contentItem},_.default.createElement(d.Icon,{name:"appcenter",size:40}),_.default.createElement("div",{className:b.default.item},_.default.createElement("div",null,n),_.default.createElement("p",null,"1"===n?t("SERVICE"):t("SERVICE_PL")))),_.default.createElement("div",{className:b.default.contentItem},_.default.createElement(d.Icon,{name:"role",size:40}),_.default.createElement("div",{className:b.default.item},_.default.createElement("div",null,s),_.default.createElement("p",null,"1"===s?t("PROJECT_ROLE_SCAP"):t("PROJECT_ROLE_SCAP_PL")))),_.default.createElement("div",{className:b.default.contentItem},_.default.createElement(d.Icon,{name:"group",size:40}),_.default.createElement("div",{className:b.default.item},_.default.createElement("div",null,c),_.default.createElement("p",null,1===c?t("PROJECT_MEMBER_SCAP"):t("PROJECT_MEMBER_SCAP_PL"))))))}}]),r}(_.default.Component);a.default=O},4625:function(e,t,a){e.exports={wrapper:"y1eLrGpaohxMQDmsuRFMf",single:"_3rv-wCj02PzvuQG7qSSKZM",header:"_363Ff0hbZt6NBtRrxtkMAZ",item:"_2DA2psiwLtN9ceOhO9r16S",content:"nMtAhiQIHvZlW09dFBhY7",contentItem:"_2NiYmn1-SSZjJzHwbNSDOf",button:"_1mI2OrNuD9gi0be-QgMLGw"}},4626:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(73),r(16),r(10),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(73),r(42),r(16),r(10),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(796)),g=r(52),_=r(72),y=n(r(1e3));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var b=(0,h.withProjectList)({store:new y.default,module:"configmaps",name:"CONFIGMAP"})(o=function(e){(0,i.default)(r,e);var a=E(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return f.default.createElement(p.default,{icon:_.ICON_TYPES[n],iconSize:40,title:(0,g.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("FIELDS"),dataIndex:"data",isHideable:!0,width:"33%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("configmap.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement(h.ListPage,this.props,f.default.createElement(m.default,(0,c.default)({},t,{tabs:this.tabs})),f.default.createElement(v.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return a("configmap.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(f.default.Component))||o;a.default=b},4627:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(315)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(433),h=n(r(788)),v=r(793),g=n(r(792)),_=n(r(796)),y=r(52),E=r(72),b=n(r(1214));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,v.withProjectList)({store:new b.default,module:"serviceaccounts",name:"SERVICE_ACCOUNT"})(o=function(e){(0,u.default)(r,e);var a=R(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return p.default.createElement(h.default,{icon:E.ICON_TYPES[n],iconSize:40,title:(0,y.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("ROLE"),dataIndex:"role",isHideable:!0},{title:t("SECRET"),dataIndex:"secrets",isHideable:!0,render:function(t){return t.map((function(t){return p.default.createElement("div",null,p.default.createElement(m.Link,{to:"".concat(e.prefix,"/secrets/").concat(t.name)},t.name))}))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.projectStore;return e.props.trigger("serviceaccount.create",{module:r,projectDetail:n.detail,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(g.default,t),p.default.createElement(_.default,(0,s.default)({},a,{columns:this.getColumns(),itemActions:this.itemActions,onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"".concat(a?"/".concat(a):"","/clusters/").concat(t,"/projects/").concat(r)}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return r("serviceaccount.edit",O({detail:t},e.props.match.params))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return r("serviceaccount.role.edit",O({detail:t},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),r}(p.default.Component))||o;a.default=A},4628:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(10),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(42),r(16),r(10),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(796)),g=r(52),_=r(72),y=n(r(851)),E=n(r(4629));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var S=(0,h.withProjectList)({store:new y.default,module:"secrets",name:"SECRET"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).showSetDefault=function(e){return"kubernetes.io/dockerconfigjson"===e.type&&!e.isDefault},e.getDefaultLabel=function(e,a){return a.isDefault?f.default.createElement("div",{className:E.default.titleRow},f.default.createElement("span",{className:E.default.title},e),f.default.createElement("span",{className:E.default.tag},t("DEFAULT_IMAGE_REGISTRY"))):e},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return f.default.createElement(p.default,{icon:_.ICON_TYPES[n],iconSize:40,title:e.getDefaultLabel((0,g.getDisplayName)(a),a),desc:a.description||"-",to:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"24%",render:function(e){return _.SECRET_TYPES[e]?t(_.SECRET_TYPES[e]):e}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"20%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module;return e.props.trigger("secret.create",{module:r,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement(h.ListPage,this.props,f.default.createElement(m.default,(0,c.default)({},t,{tabs:this.tabs})),f.default.createElement(v.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.getData,n=a.trigger,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return n("secret.edit",{detail:e,success:r})}},{key:"default",icon:"star",text:t("SET_AS_DEFAULT"),action:"edit",show:this.showSetDefault,onClick:function(t){var a=e.props.match;n("secret.default",{detail:t,cluster:a.params.cluster,success:r})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{type:o,detail:e})}}]}}]),r}(f.default.Component))||o;a.default=S},4629:function(e,t,a){e.exports={baseTag:"_2PDb7M6nc6OgOrIC5Sn3jg",titleRow:"_281TM-PGi2UlyVdRmWW2Ew",tag:"_2K1ZZc95tRXTDHms3yur8J",title:"nbmekP5IrfJL_HpfH_KOw"}},4630:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(84),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(84),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o=n(r(315)),c=n(r(31)),s=n(r(43));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(793),g=n(r(788)),_=n(r(789)),y=n(r(790)),E=n(r(792)),b=n(r(796)),S=n(r(4631)),O=r(52),R=r(72),A=n(r(1441)),k=n(r(1025)),T=n(r(318)),D=n(r(439)),C=n(r(26)),P=n(r(74)),N=r(186),I=r(14),w=n(r(240)),x=n(r(4633)),M=n(r(4634));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var B=(0,v.withProjectList)({store:new A.default,module:"microservices",name:"MICROSERVICE",rowKey:"uid",authKey:"springcloud-microservices"})(l=function(e){(0,f.default)(r,e);var a=U(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).workloadStore=new T.default("deployments"),e.instanceStore=new k.default,e.projectStore=new D.default,e.state={overview:{},isRefresh:!1},e.fetchProjectDetail=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.workspace;e.projectStore.fetchDetail({cluster:a,workspace:n,namespace:r})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,searchKey:"serviceName",render:function(t,a){return h.default.createElement(g.default,{icon:R.ICON_TYPES[n],iconSize:40,title:(0,O.getDisplayName)(a),desc:a.description||"-",to:"".concat(e.prefix,"/").concat(n,"/").concat(t)})}},{title:t("MICROSERVICE_HEALTHY_INSTANCE_COUNT"),dataIndex:"healthyInstanceCount",isHideable:!0,width:"18%"},{title:t("MICROSERVICE_INSTANCE_COUNT"),dataIndex:"instanceCount",isHideable:!0,width:"18%"},{title:t("HEALTH_PROTECTION_TRIGGERED"),dataIndex:"triggerFlag",isHideable:!0,width:"18%"}]},e.openProjectSpringCloud=(0,i.default)(s.default.mark((function a(){var r,n;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,I.toJS)(e.projectStore.detail),n=(0,C.default)(r,"_originData"),(0,P.default)(n,'metadata.labels["springcloud.kubesphere.io/enabled"]',"true"),a.next=5,e.projectStore.update(r,n);case 5:w.default.success({content:"".concat(t("UPDATE_SUCCESSFUL"))}),e.fetchProjectDetail();case 7:case"end":return a.stop()}}),a)}))),e.getData=function(){var t=(0,i.default)(s.default.mark((function t(a){var r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.fetchList(j(j({},a),e.props.match.params));case 2:return t.next=4,e.instanceStore.fetchStatistics(j({},e.props.match.params));case 4:r=t.sent,e.setState({overview:r,isRefresh:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRefresh=function(){e.getData(),e.setState({isRefresh:!0})},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchProjectDetail()}},{key:"renderProjectLabelSpringCloud",value:function(){return h.default.createElement(_.default,{className:"margin-t12 margin-b12"},h.default.createElement("div",{className:"flexbox"},h.default.createElement(N.Icon,{className:"margin-r12",name:"springcloudgateway",size:40}),h.default.createElement(y.default,{className:x.default.text,title:t("SPRING_CLOUD_PROJECT_NOT_LABEL"),description:t("SPRING_CLOUD_PROJECT_NOT_LABEL_DESC")}),h.default.createElement(N.Button,{className:x.default.button,type:"control",onClick:this.openProjectSpringCloud},t("OPEN_PROJECT_SPRING_CLOUD"))))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.trigger,n=this.props.match.params,c=n.workspace,s=n.namespace,l=n.cluster,i=this.state,u=i.overview,d=i.isRefresh;return h.default.createElement(v.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(E.default,(0,o.default)({},t,{tips:this.tips})),!this.projectSpringCloudEnabled&&this.getProjectEditEnabled&&this.renderProjectLabelSpringCloud(),h.default.createElement(M.default,{detail:u,cluster:l}),h.default.createElement(b.default,(0,o.default)({},a,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),expandedRowRender:function(e){var t=e.name,a=e.status;return h.default.createElement(S.default,{serviceName:t,serviceStatus:a,isRefresh:d,workspace:c,cluster:l,namespace:s,trigger:r})},rowExpandable:function(e){return e.instanceCount},onRefresh:this.handleRefresh})))}},{key:"getProjectEditEnabled",get:function(){return globals.app.getActions({workspace:this.props.match.params.workspace,module:"projects"}).includes("edit")}},{key:"projectSpringCloudEnabled",get:function(){return"true"===(0,C.default)(this.projectStore.detail,'labels["springcloud.kubesphere.io/enabled"]',"false")}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tips",get:function(){return[{title:t("WHAT_IS_SERVICE_REGISTRATION_CENTER_Q"),description:t("WHAT_IS_SERVICE_REGISTRATION_CENTER_A")}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.tableProps,o=a.match,c=a.projectStore;return j(j({},n.tableActions),{},{actions:[{key:"create",type:"control",action:"manage",text:t("CREATE"),onClick:function(){r("microservice.create",{title:t("CREATE_MICROSERVICE"),module:"deployments",store:e.workloadStore,projectDetail:c.detail,namespace:o.params.namespace,cluster:o.params.cluster,supportGpuSelect:!0,success:e.getData})}}],selectActions:[]})}}]),r}(h.default.Component))||l;a.default=B},4631:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7),r(109);var o,c,s,l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(1)),v=r(239),g=r(433),_=r(186),y=r(14),E=n(r(26)),b=n(r(838)),S=n(r(796)),O=n(r(240)),R=r(52),A=n(r(1025)),k=n(r(4632));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,v.observer)((s=c=function(e){(0,d.default)(r,e);var a=C(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).name="microserviceinstances",e.module="microserviceinstances",e.authKey="springcloud-microservices",e.store=new A.default,e.getData=function(){var t=e.props,a=t.serviceName,r=t.cluster,n=t.namespace;e.store.fetchList({cluster:r,namespace:n,labelSelector:"springcloud.kubesphere.io/app=".concat(a),limit:-1})},e.addWeightToSpec=function(t){var a,r=(0,E.default)(t,"spec.weight"),n=(0,E.default)(t,"spec.podName"),o=(0,E.default)(t,"spec.namespace"),c=(0,y.toJS)(e.store.list.data),s=[];c.forEach((function(e){e.namespace===o&&e.podName===n?a=D({},e):s.push(D({},e))})),e.store.list.update({data:[].concat(s,[D(D({},a),{},{weight:r})])})},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"podName",render:e.renderAvatar},{title:t("WEIGHT"),dataIndex:"weight",width:"15%"},{title:t("IP_ADDRESS"),dataIndex:"ip",width:"15%"},{title:t("PORT"),dataIndex:"port",width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"podStartTime",width:"15%",render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderAvatar=function(a,r){var n=r.enabled,o=r.instanceId,c=e.props,s=c.workspace,l=c.cluster,i=c.namespace;return m.default.createElement("div",{className:k.default.avatar},m.default.createElement("div",{className:k.default.icon},m.default.createElement(_.Icon,{name:"pod",size:40}),m.default.createElement(b.default,{className:k.default.indicator,type:n?"running":"stopped",flicker:!0})),m.default.createElement("div",null,m.default.createElement(g.Link,{className:k.default.title,to:"/".concat(s,"/clusters/").concat(l,"/projects/").concat(i,"/microservice-instances/").concat(a,"/").concat(encodeURIComponent(o))},a),m.default.createElement("div",{className:k.default.desc},n?t("MICROSERVICE_INSTANCE_STATUS_RUNNING"):t("MICROSERVICE_INSTANCE_STATUS_OFFLINE"))))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.serviceStatus,r=t.isRefresh;(e.serviceStatus!==a||e.isRefresh!==r&&r)&&this.getData()}},{key:"renderEmptyText",value:function(){return m.default.createElement("div",{className:k.default.emptyText},m.default.createElement("span",{className:k.default.emptyTipIcon},m.default.createElement(_.Icon,{name:"exclamation",size:48})),m.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),m.default.createElement("p",null,t("YOU_CAN_TRY_TO"),m.default.createElement("span",{className:k.default.action,onClick:this.getData},t("REFRESH_DATA"))))}},{key:"render",value:function(){var e=this.store.list,t=e.data,a=e.isLoading;return m.default.createElement(S.default,{className:k.default.table,hideHeader:!0,hideFooter:!0,module:this.module,name:this.name,data:t,isLoading:a,columns:this.getColumns(),itemActions:this.itemActions,enabledActions:this.enabledActions,emptyText:this.renderEmptyText(),rowKey:"podName"})}},{key:"enabledActions",get:function(){var e=this.props,t=e.cluster,a=e.namespace;return globals.app.getActions({module:this.authKey,cluster:t,project:a})}},{key:"itemActions",get:function(){var e=this;return[{key:"offline",icon:"circle-down",text:t("TAKE_OFFLINE"),action:"edit",show:function(e){return e.specEnabled},onClick:function(a){return e.store.offLine(a).then((function(){setTimeout((function(){O.default.success({content:t("TAKE_OFFLINE_SUCCESS")}),e.getData()}),1e3)}))}},{key:"online",icon:"circle-up",text:t("TAKE_ONLINE"),action:"edit",show:function(e){return!e.specEnabled},onClick:function(a){return e.store.onLine(a).then((function(){setTimeout((function(){O.default.success({content:t("TAKE_ONLINE_SUCCESS")}),e.getData()}),1e3)}))}},{key:"weight",icon:"pen",text:t("EDIT_WEIGHT"),action:"edit",onClick:function(a){e.props.trigger("microservice.instance.weight.edit",{title:t("EDIT_WEIGHT"),detail:a,store:e.store,namespace:a.namespace,cluster:a.cluster,success:e.addWeightToSpec})}}]}}]),r}(m.default.Component),c.propTypes={serviceName:h.default.string},c.defaultProps={serviceName:""},o=s))||o;a.default=P},4632:function(e,t,a){e.exports={avatar:"_3gqccHDpPNb4Nv6ZcYbk0w",icon:"_3se41qeQpHr3Ax5tCg0OPG",indicator:"_37gfN6ftHdxwE70JSN3xJi",title:"_4KFg1cvRmMc8aOwX0_ved",desc:"jjy03-Yge9DO0q4Z8m69B",table:"_2SaB5vScxUn8COfdkFaGRb",emptyText:"GkCXWuUAqAO1TLgbUYlKF",emptyTipIcon:"ZDRR2LpZuHfGKQfG7vzxH"}},4633:function(e,t,a){e.exports={text:"_23iOdFkuHbu2v1F_KoPt4-",button:"_3zOYI3YygJeAuBfAvIsCX2"}},4634:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(789)),f=n(r(790)),p=n(r(1441)),m=n(r(4635));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).store=new p.default,e.state={nacos:{}},e.fetchNacosConfig=function(){var t=e.props.cluster;e.store.getNacosConfig({cluster:t}).then((function(t){e.setState({nacos:t})}))},e.handleDownload=function(){window.open("".concat(window.location.protocol,"//").concat(window.location.host,"/").concat(e.store.apiVersion,"/files/bootstrap.yml"))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchNacosConfig()}},{key:"render",value:function(){var e=this.props.detail,a=void 0===e?{}:e,r=this.state.nacos,n=r.Host,o=r.Port;return u.default.createElement(d.default,{className:"margin-b12"},u.default.createElement("div",{className:m.default.header},u.default.createElement("div",{className:m.default.title},t("SERVICE_REGISTRY")),u.default.createElement("a",{onClick:this.handleDownload},t("DOWNLOAD_SAMPLE_CONFIGURATION"))),u.default.createElement("div",{className:m.default.overview},u.default.createElement("div",{className:m.default.item},u.default.createElement(f.default,{className:"",icon:"eip-group",title:n&&o&&"".concat(n,":").concat(o),description:t("SERVICE_REGISTRY_ADDRESS")})),u.default.createElement("div",{className:m.default.item},u.default.createElement("div",{className:m.default.content},u.default.createElement(f.default,{icon:"java",title:a.allServiceCount,description:1===a.allServiceCount?t("MICROSERVICE"):t("MICROSERVICE_PL")}),u.default.createElement(f.default,{title:a.allInstanceCount,description:1===a.allInstanceCount?t("INSTANCE"):t("INSTANCE_PL")}),u.default.createElement(f.default,{title:a.healthyInstanceCount,description:1===a.healthyInstanceCount?t("HEALTHY_INSTANCE"):t("HEALTHY_INSTANCE_PL")})))))}}]),r}(u.default.Component);a.default=v},4635:function(e,t,a){e.exports={header:"FTPaL9xyKBzDPrEzMDZmR",title:"QWTSWUN8THde5V07Iozai",overview:"_1h1i463knuDsaO4Xf2VKYY",item:"_3WSl_eWp1weNpcxTEFcRMW",content:"_21fledRXsEVdkXbFyozoL",progressPrimary:"_2jYfGBJrSLqtrRBUXRI8-Y",progressBlue:"_3RQ3G2EUcMVsaY_C4rsK15"}},4636:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(31)),s=n(r(315)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(793),h=n(r(792)),v=n(r(796)),g=n(r(788)),_=n(r(795)),y=r(52),E=r(72),b=n(r(1900));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,m.withProjectList)({store:new b.default,module:"configurations",name:"SQ_CONFIGURATION",rowKey:"uid",authKey:"springcloud-microservices"})(o=function(e){(0,u.default)(r,e);var a=R(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=e.props.query.name;e.props.store.fetchList({cluster:a,namespace:r,name:n})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),sorter:!0,search:!0,render:function(t,a){return p.default.createElement(g.default,{icon:E.ICON_TYPES[n],iconSize:40,title:(0,y.getDisplayName)(a),to:"".concat(e.prefix,"/").concat(n,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),isHideable:!0,search:!0,width:"20%",render:function(e){return p.default.createElement(_.default,{name:t("CONFIGURATION_STATUS_".concat(e.toUpperCase())),type:e,flicker:!0})}},{title:t("DATA_ID"),dataIndex:"data",isHideable:!0,width:"20%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,isHideable:!0,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var a=e.props,r=a.match,n=a.module,o=a.projectStore;return e.props.trigger("configuration.create",{module:n,projectDetail:o.detail,namespace:r.params.namespace,cluster:r.params.cluster,title:t("CREATE_CONFIGURATION"),success:e.fetchData})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return E.CONFIGURATION_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(m.ListPage,(0,s.default)({},this.props,{noWatch:!0}),p.default.createElement(h.default,t),p.default.createElement(v.default,(0,s.default)({},a,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(a){return r("configuration.edit",{title:t("EDIT_CONFIGURATION"),detail:a,success:e.fetchData})}},{key:"copy",icon:"copy",text:t("REPLICATE"),action:"edit",onClick:function(a){return r("configuration.copy",{title:t("REPLICATE_CONFIGURATION_NAME",{name:a.name}),isCopy:!0,detail:a,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return r("resource.delete",{type:n,detail:t,success:e.fetchData})}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.tableProps,c=o.rowKey;return O(O({},o.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){r("resource.batch.delete",{type:n,rowKey:c,success:e.fetchData})}}]})}}]),r}(p.default.Component))||o;a.default=A},4637:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(29),r(84),r(18),r(97),r(16),r(4),r(23),r(24),r(17),r(85),r(62),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(29),r(84),r(18),r(28),r(97),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(109);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=n(r(63)),m=r(186),h=n(r(792)),v=n(r(4638)),g=r(72),_=r(791),y=n(r(1442)),E=r(14),b=n(r(4640));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=(0,f.inject)("rootStore")(o=(0,f.observer)(o=(0,_.trigger)(o=function(e){(0,l.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).module="microservicegateways",e.store=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace;e.store.fetchList({cluster:a,namespace:r,labelSelector:"springcloud.kubesphere.io/is-default-gateway=true"})},e.handleTabChange=function(t){e.props.rootStore.routing.push("".concat(e.prefix,"/").concat(t))},e.handleMoreMenuClick=function(t,a,r){var n=e.enabledItemActions.find((function(e){return e.key===a}));n&&n.onClick&&n.onClick(r)},e.handleCreate=function(){var a=e.props,r=a.match.params,n=r.cluster,o=r.namespace,c=r.workspace,s=a.rootStore;return e.trigger("microservicegateway.create",{title:t("CREATE_MICROSERVICE_GATEWAY"),module:e.module,namespace:o,cluster:n,workspace:c,store:e.store,rootStore:s,success:e.fetchData})},e.renderGatewayCard=function(){var t=e.store.list.data;return(0,p.default)(t)?e.renderEmpty():t.map((function(t){return d.default.createElement(v.default,{module:e.module,actions:e.enabledItemActions,onMenuClick:e.handleMoreMenuClick,detail:t,key:t.uid})}))},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.fetchData(),this.dispather=(0,E.reaction)((function(){return e.store.list.data}),(function(t){((0,p.default)(t)||t.some((function(e){return"UPDATING"===e.status.toUpperCase()})))&&setTimeout((function(){e.fetchData()}),2e4)}),{delay:1e4})}},{key:"componentWillUnmount",value:function(){this.dispather&&this.dispather()}},{key:"renderEmpty",value:function(){return d.default.createElement("div",{className:b.default.empty},d.default.createElement("div",{className:b.default.image},d.default.createElement(m.Icon,{name:g.ICON_TYPES[this.module],size:48})),d.default.createElement("div",{className:b.default.title},t("MICROSERVICE_GATEWAY_EMPTY_DESC")),d.default.createElement("p",{className:b.default.desc},t("MICROSERVICE_GATEWAY_EMPTY_TIP")),this.enabledActions.includes("create")&&d.default.createElement(m.Button,{type:"control",className:b.default.create,onClick:this.handleCreate},t("CREATE")))}},{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{icon:"springcloudgateway",title:t("MICROSERVICE_GATEWAY_PL"),description:t("MICROSERVICE_GATEWAY_DESC"),tabs:this.tabs}),this.renderGatewayCard())}},{key:"tabs",get:function(){return{value:this.module,onChange:this.handleTabChange,options:[{value:"microservicegateways",label:t("MICROSERVICE_GATEWAY_PL")},{value:"servicerouting",label:t("MICROSERVICE_ROUTE_PL")}]}}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.namespace,a=e.cluster;return globals.app.getActions({module:"springcloud-microservices",project:t,cluster:a})}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.match.params,n=r.cluster,o=r.namespace,c=r.workspace,s=a.rootStore;return[{key:"view",icon:"eye",action:"view",text:t("VIEW_DETAILS"),onClick:function(t){return s.routing.push("".concat(e.prefix,"/").concat(e.module,"/").concat(t.name))}},{key:"edit",icon:"pen",action:"edit",text:t("EDIT"),onClick:function(t){return e.trigger("microservicegateway.edit",{module:e.module,detail:t,namespace:o,cluster:n,workspace:c,store:e.store,rootStore:s,success:e.fetchData})}},{key:"delete",icon:"trash",action:"delete",text:t("DELETE"),onClick:function(t){return e.trigger("resource.delete",{detail:t,type:"MICROSERVICE_GATEWAY",success:e.fetchData})}}]}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}}]),r}(d.default.Component))||o)||o)||o;a.default=O},4638:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(73),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(63)),f=n(r(26)),p=n(r(3)),m=r(186),h=n(r(789)),v=n(r(795)),g=n(r(790)),_=r(52),y=n(r(4639));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=E(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"renderMoreMenu",value:function(){var e=this.props,t=e.actions,a=e.onMenuClick,r=e.detail;return u.default.createElement(m.Menu,{onClick:function(e,t){return a(e,t,r)}},t.map((function(e){return u.default.createElement(m.Menu.MenuItem,{key:e.key},u.default.createElement(m.Icon,{name:e.icon})," ",e.text)})))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.actions;return u.default.createElement(h.default,{title:t("MICROSERVICE_GATEWAY")},u.default.createElement("div",{className:y.default.header},u.default.createElement(m.Icon,{name:"springcloudgateway",size:40}),u.default.createElement("div",{className:y.default.item},u.default.createElement("div",null,t("MICROSERVICE_GATEWAY")),u.default.createElement("p",null,t("GATEWAY_TYPE"))),u.default.createElement("div",{className:y.default.item},u.default.createElement("div",null,u.default.createElement(v.default,{name:t("MICROSERVICE_GATEWAY_STATUS_".concat(a.status.toUpperCase())),type:a.status,flicker:!0})),u.default.createElement("p",null,t("STATUS"))),u.default.createElement("div",{className:y.default.item},u.default.createElement("div",null,(0,f.default)(a,"creator","-")),u.default.createElement("p",null,t("CREATOR"))),u.default.createElement("div",{className:y.default.item},u.default.createElement("div",null,(0,_.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),u.default.createElement("p",null,t("CREATION_TIME"))),!(0,d.default)(r)&&u.default.createElement("div",{className:(0,p.default)(y.default.item,"text-right")},u.default.createElement(m.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},u.default.createElement(m.Button,null,t("MANAGE"))))),u.default.createElement("div",{className:y.default.content},u.default.createElement(g.default,{icon:"eip-group",title:(0,f.default)(a,"specType"),description:t("ACCESS_MODE_SCAP")}),u.default.createElement(g.default,{icon:"container",title:this.gatewayIp,description:t("GATEWAY_ADDRESS_SCAP")}),u.default.createElement(g.default,{icon:"ip",title:this.gatewayPort,description:"ClusterIP"===a.specType?t("SERVICE_PORT_SCAP"):t("NODE_PORT")}),u.default.createElement(g.default,{icon:"pod",title:(0,f.default)(a,"replicas"),description:1===(0,f.default)(a,"replicas")?t("REPLICA"):t("REPLICA_PL")})))}},{key:"gatewayIp",get:function(){var e=this.props.detail.loadBalancerIngress;return(0,d.default)(e)?"-":e.join(";")}},{key:"gatewayPort",get:function(){var e=this.props.detail,t=e.ports,a=e.specType;return(0,d.default)(t)?"-":t.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat("NodePort"===a?e.nodePort:e.port)})).join("/")}}]),r}(u.default.Component);a.default=b},4639:function(e,t,a){e.exports={wrapper:"_3kb4DklDI6kQJSuSBfwVYF",header:"KUbIUrwkR9381wTB8pulU",item:"_1nJkTh4C_YbRslmXTcZ_6h",content:"_35A8jpUM-ZwLXCCfS38AmD"}},4640:function(e,t,a){e.exports={empty:"GWEW5vGn763WMdJ2Nchp_",image:"_27P39uTiQhfeMz6f-_vzG3",title:"_1xxrhUuV2RRERsrhljvP0B",desc:"_2jDn7Tbahjk-0N7CXCdwCb",create:"_3oeQ3EL1ibyWG9Jx3_5Nt5"}},4641:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(43)),s=n(r(31));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(63)),g=n(r(26)),_=r(239),y=n(r(788)),E=n(r(792)),b=r(793),S=n(r(796)),O=r(52),R=r(72),A=n(r(1442)),k=n(r(1901));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,b.withProjectList)({store:new k.default,module:"gatewayrouteconfigs",name:"MICROSERVICE_ROUTE",authKey:"springcloud-microservices"})(l=(0,_.observer)(l=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).fetchGatewayData=(0,i.default)(c.default.mark((function e(){var t;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,e.next=3,n.gatewayStore.fetchList(D({labelSelector:"springcloud.kubesphere.io/is-default-gateway=true"},t));case 3:n.setState({disableCreate:(0,v.default)(n.gatewayStore.list.data)});case 4:case"end":return e.stop()}}),e)}))),n.handleTabChange=function(e){n.props.routing.push("".concat(n.prefix,"/").concat(e))},n.getColumns=function(){var e=n.props,a=e.getSortOrder,r=e.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:function(e,t){return h.default.createElement(y.default,{icon:R.ICON_TYPES[r],iconSize:40,title:(0,O.getDisplayName)(t),to:"".concat(n.prefix,"/servicerouting/").concat(e)})}},{title:t("MICROSERVICE_ORDER"),dataIndex:"order",isHideable:!0,width:"22%"},{title:t("URL"),dataIndex:"uri",isHideable:!0,width:"22%"},{title:t("CREATION_TIME"),dataIndex:"createTime",sorter:!0,isHideable:!0,width:"18%",render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.getActions=function(){return[{type:"control",key:"create",text:t("CREATE"),action:"create",forbidden:n.state.disableCreate,onClick:n.handleCreate}]},n.handleCreate=function(){var e=n.props,a=e.match,r=e.projectStore,o=e.routing,c=n.gatewayStore.list.data,s=(0,g.default)(c,"[0].name");return n.props.trigger("servicerouting.create",{title:t("CREATE_MICROSERVICE_ROUTE"),module:"servicerouting",gateway:s,projectDetail:r.detail,namespace:a.params.namespace,cluster:a.params.cluster,success:o.query})},n.gatewayStore=new A.default,n.state={disableCreate:!1},n}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchGatewayData()}},{key:"render",value:function(){var e=this.props.tableProps;return h.default.createElement(b.ListPage,(0,o.default)({},this.props,{noWatch:!0}),h.default.createElement(E.default,{icon:"springcloudgateway",title:t("MICROSERVICE_GATEWAY_PL"),description:t("MICROSERVICE_GATEWAY_DESC"),tabs:this.tabs}),h.default.createElement(S.default,(0,o.default)({},e,{itemActions:this.itemActions,columns:this.getColumns(),actions:this.getActions()})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.namespace,r=e.cluster;return"/".concat(t,"/clusters/").concat(r,"/projects/").concat(a)}},{key:"tabs",get:function(){return{value:"servicerouting",onChange:this.handleTabChange,options:[{value:"microservicegateways",label:t("MICROSERVICE_GATEWAY")},{value:"servicerouting",label:t("MICROSERVICE_ROUTE_PL")}]}}},{key:"itemActions",get:function(){var e=this,a=this.props.match.params,r=a.cluster,n=a.namespace,o=this.props,c=o.trigger,s=o.name,l=o.routing;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return c("servicerouting.edit",{detail:t,cluster:r,namespace:n,store:e.props.store,success:l.query})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return c("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return c("resource.delete",{type:s,detail:e,success:l.query})}}]}}]),r}(h.default.Component))||l)||l;a.default=P},4642:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c=n(r(31)),s=n(r(315)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=n(r(788)),v=n(r(792)),g=r(793),_=n(r(796)),y=r(52),E=r(72),b=n(r(441));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,g.withProjectList)({store:new b.default,module:"roles",name:"PROJECT_ROLE"})(o=function(e){(0,u.default)(r,e);var a=R(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!globals.config.presetRoles.includes(e.name)},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,a){return p.default.createElement(h.default,{icon:E.ICON_TYPES[n],title:t,desc:a.aliasName,iconSize:40,to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"40%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.getData,n=t.store;return e.props.trigger("role.create",{namespace:a.params.namespace,cluster:a.params.cluster,roleTemplates:(0,m.toJS)(n.roleTemplates.data),roleModules:(0,m.toJS)(n.roleCategory),basicRoleTemplates:(0,m.toJS)(n.basicRoleTemplates.data),success:r})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates("namespace","iam.kubesphere.io/scope=namespace,iam.kubesphere.io/hidden-role-template!=true,kubesphere.io/managed=true"),this.props.store.fetchBasicRoleTemplates("namespace","iam.kubesphere.io/scope=namespace,iam.kubesphere.io/basic-role-template=true,kubesphere.io/managed=true"),this.props.store.fetchTemplatesCategory("namespace")}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return p.default.createElement(g.ListPage,(0,s.default)({},this.props,{noWatch:!0}),p.default.createElement(v.default,(0,s.default)({},a,{tabs:this.tabs,description:t("PROJECT_ROLE_DESC")})),p.default.createElement(_.default,(0,s.default)({},r,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.routing,n=a.trigger,o=a.store,c=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e,success:r.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(e){return n("role.edit",{detail:e,roleTemplates:(0,m.toJS)(o.roleTemplates.data),basicRoleTemplates:(0,m.toJS)(o.basicRoleTemplates.data),roleModules:(0,m.toJS)(o.roleCategory),success:r.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("role.delete",{detail:t,type:c,cluster:e.props.match.params.cluster,namespace:e.props.match.params.namespace,success:r.query})}}]}},{key:"tableActions",get:function(){return O(O({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("PROJECT_ROLE_EMPTY_DESC")}}}]),r}(p.default.Component))||o;a.default=A},4643:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(26)),h=r(14),v=n(r(788)),g=n(r(795)),_=n(r(792)),y=r(793),E=n(r(796)),b=r(52),S=n(r(322)),O=n(r(441));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,y.withProjectList)({store:new S.default,module:"users",authKey:"members",name:"PROJECT_MEMBER",rowKey:"username"})(o=function(e){(0,u.default)(r,e);var a=k(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).roleStore=new O.default,e.getColumns=function(){return[{title:t("NAME"),dataIndex:"username",sorter:!0,render:function(e,t){return p.default.createElement(v.default,{avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return p.default.createElement(g.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"role",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return p.default.createElement("p",null,e?(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList(A(A({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,(0,c.default)({},this.props,{noWatch:!0}),p.default.createElement(_.default,(0,c.default)({},a,{tabs:this.tabs,description:t("PROJECT_MEMBER_DESC")})),p.default.createElement(E.default,(0,c.default)({},r,{searchType:"name",tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns()})))}},{key:"canViewRoles",get:function(){return globals.app.hasPermission(A(A({},this.props.match.params),{},{project:this.props.match.params.namespace,module:"roles",action:"view"}))}},{key:"tips",get:function(){return[{title:t("HOW_TO_INVITE_MEMBER_Q"),description:t("HOW_TO_INVITE_MEMBER_A")}]}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.getData,n=a.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",show:this.showAction,onClick:function(t){return n("member.edit",A(A({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.role,success:r}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",show:this.showAction,onClick:function(t){return n("member.remove",A({detail:t,success:r},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.routing,n=a.getData,o=a.trigger;return A(A({},a.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return o("member.invite",A(A({},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,workspace:(0,m.default)(e.props,"projectStore.detail.workspace"),title:t("INVITE_MEMBER"),desc:t("INVITE_MEMBER_DESC"),searchPlaceholder:t("SEARCH_BY_NAME"),success:r.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return o("member.remove.batch",A({success:n},e.props.match.params))}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}},emptyProps:{desc:t("PROJECT_MEMBER_EMPTY_DESC")}})}}]),r}(p.default.Component))||o;a.default=T},4644:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c=n(r(31)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(63)),h=n(r(792)),v=n(r(4645));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var E=(0,p.inject)("rootStore","projectStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=y(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(h.default,{icon:"log",title:t("LOG_COLLECTION"),description:t("DISK_LOG_COLLECTION_DESC"),tips:this.tips}),globals.app.hasClusterExtensionModule(this.cluster,"whizard-logging")&&!this.disabledLoggingSideCar&&f.default.createElement(v.default,{store:this.store,actions:this.enableActions}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enableActions",get:function(){return globals.app.getActions(_(_({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}},{key:"disabledLoggingSideCar",get:function(){return!(0,m.default)(globals.config.disabledLoggingSidecarNamespace)&&globals.config.disabledLoggingSidecarNamespace.includes(this.namespace)}},{key:"tips",get:function(){return[{title:t("COLLECT_LOGS_ON_VOLUMES_Q"),description:t("COLLECT_LOGS_ON_VOLUMES_A")}]}}]),r}(f.default.Component))||o)||o;a.default=E},4645:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(84),r(16),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(42),r(16),r(4),r(23),r(57),r(17),r(85);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(3)),p=n(r(26)),m=r(239),h=r(186),v=n(r(850)),g=n(r(789)),_=n(r(787)),y=n(r(4646));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=(0,m.observer)(o=function(e){(0,l.default)(r,e);var a=E(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showCloseConfirm:!1},e.handleSwitch=function(){var t=e.props.store.detail;return"enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]')?e.setState({showCloseConfirm:!0}):e.handleToggle()},e.handleToggle=function(){var t=e.props.store.detail,a="enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]');e.props.store.patch(t,{metadata:{labels:{"logging.kubesphere.io/logsidecar-injection":a?"disabled":"enabled"}}}).then((function(){e.hideCloseConfirm(),e.props.store.fetchDetail({namespace:t.name,cluster:t.cluster})}))},e.hideCloseConfirm=function(){e.setState({showCloseConfirm:!1})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state.showCloseConfirm,a=this.props.store.detail,r="enabled"===(0,p.default)(a,'labels["logging.kubesphere.io/logsidecar-injection"]');return d.default.createElement(d.default.Fragment,null,d.default.createElement(g.default,{title:t("COLLECT_LOGS_ON_VOLUMES")},d.default.createElement("div",{className:y.default.header},d.default.createElement(h.Icon,{name:"log",size:40}),d.default.createElement("div",{className:y.default.item},d.default.createElement("div",null,r?t("ENABLED"):t("DISABLED")),d.default.createElement("p",null,t("LOG_COLLECTION_ENABLED_DESC"))),this.canEdit&&d.default.createElement("div",{className:(0,f.default)(y.default.item,"text-right")},d.default.createElement(v.default,{type:"control",text:r?t("ENABLED"):t("DISABLED"),onChange:this.handleSwitch,checked:r})))),this.canEdit&&d.default.createElement(_.default,{visible:e,onOk:this.handleToggle,onCancel:this.hideCloseConfirm,width:520,hideHeader:!0},d.default.createElement("div",{className:y.default.modalHeader},d.default.createElement(h.Icon,{name:"question",size:40,color:{primary:"#fff",secondary:"#329dce"}}),d.default.createElement("div",{className:y.default.title},d.default.createElement("div",null,t("DISABLE_LOG_COLLECTION")))),d.default.createElement("div",null,t("DISABLE_LOG_COLLECTION_TIP"))))}},{key:"canEdit",get:function(){return this.props.actions.includes("manage")}}]),r}(d.default.Component))||o;a.default=b},4646:function(e,t,a){e.exports={header:"_36wPCvwx5H9-Cd8YZx_Use",item:"_1MsqwSMR161g7QxBAzfume",modalHeader:"_1kxSvzFA81yixs5Vc17WLk",title:"_38himUh0C_ehcUxRxRJzL-"}},4647:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(134),r(5),r(11),r(6),r(84),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(84),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var c,s=n(r(315)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(790)),v=n(r(792)),g=o(r(793)),_=n(r(796)),y=r(52),E=n(r(4648)),b=n(r(4649));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var A=(0,g.default)({store:new E.default,module:"dashboards",authKey:"monitoring",name:"CUSTOM_MONITORING_DASHBOARD"})(c=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).showCreate=function(){e.props.trigger("custom.monitoring.create",O(O({},e.props.match.params),{},{module:"dashboards"}))},e.showEdit=function(t){e.props.trigger("custom.monitoring.edit",O(O({},e.props.match.params),{},{readOnly:!e.props.tableProps.enabledActions.includes("edit"),detail:t}))},e}return(0,u.default)(r,[{key:"getColumns",value:function(){var e=this;return[{title:t("NAME"),dataIndex:"title",render:function(t,a){return m.default.createElement(h.default,{title:m.default.createElement("div",{className:b.default.title,onClick:function(){return e.showEdit(a)}},(0,y.getDisplayName)(a)),description:a.description||"-"})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:150,render:function(e){return(0,y.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return m.default.createElement("div",null,m.default.createElement(g.ListPage,this.props,m.default.createElement(v.default,(0,s.default)({},t,{tabs:this.tabs})),m.default.createElement(_.default,(0,s.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"}))))}},{key:"itemActions",get:function(){var e=this.props,a=e.name,r=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),r}(m.default.Component))||c;a.default=A},4648:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(9),a(4),a(23),a(57),a(17);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(49)),d=a(14);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var p=(n=function(e){(0,s.default)(a,e);var t=f(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).module="dashboards",e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/monitoring.kubesphere.io/v1alpha1".concat(e.getPath(t),"/").concat(e.module)},e}return(0,c.default)(a,[{key:"createGrafana",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.submitting(request.post("/kapis/monitoring.kubesphere.io/v1alpha1/".concat(this.getPath(t),"/dashboards/").concat(e.grafanaDashboardName,"/template"),e))}}]),a}(r(a(68)).default),(0,u.default)(n.prototype,"createGrafana",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"createGrafana"),n.prototype),n);t.default=p},4649:function(e,t,a){e.exports={title:"AB68PnUYdCxRDBPIEIYpP"}},4650:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c=n(r(31)),s=n(r(315)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(74)),g=r(186),_=n(r(789)),y=n(r(792)),E=n(r(833)),b=r(72),S=r(52),O=n(r(4651)),R=n(r(4654)),A=n(r(4656));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,m.inject)("projectStore")(o=(0,m.observer)(o=function(e){(0,u.default)(r,e);var a=D(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).name="NETWORK_ISOLATION",n.module="namespacenetworkpolicies",n.tips=function(){var e=t.html("NETWORK_POLICY_A1");return[{title:t("NETWORK_ISOLATION_Q"),description:t.html("NETWORK_POLICY_A")},{title:t("NETWORK_ISOLATION_Q1"),description:(0,S.htmlLinkControl)(e)}]},n.toggleNetworkIsolate=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};(0,v.default)(t,'metadata.annotations["kubesphere.io/network-isolate"]',e?"enabled":""),n.projectStore.patch({name:n.namespace,cluster:n.cluster},t).then((function(){n.projectStore.fetchDetail(n.params)}))},n.handleEditNetworkIsolate=function(e){n.toggleNetworkIsolate(e)},n.projectStore=n.props.projectStore,n}return(0,i.default)(r,[{key:"render",value:function(){var e=this.module,a=this.name,r=this.tips,n=this.namespace,o=this.cluster,c=this.workspace,l=this.projectStore.isSubmitting,i="enabled"===(0,h.default)(this.projectStore,'detail.annotations["kubesphere.io/network-isolate"]'),u=this.enabledActions.includes("edit");return p.default.createElement("div",null,p.default.createElement(y.default,{module:e,className:"margin-b12",title:t(a),tips:r(),description:t("NETWORK_ISOLATION_DESC")}),p.default.createElement("div",{className:A.default.subtitle},t(a)),i?p.default.createElement(_.default,{className:A.default.wrapper},p.default.createElement(R.default,(0,s.default)({module:e,networkIsolate:i,onEdit:this.handleEditNetworkIsolate,canEdit:u},this.props)),p.default.createElement(O.default,(0,s.default)({module:e,namespace:n,cluster:o,workspace:c,canEdit:u},this.props))):p.default.createElement(E.default,{icon:b.ICON_TYPES[e],title:t("NETWORK_POLICY_EMP_TITLE"),desc:t("NETWORK_POLICY_EMP_DESC"),className:A.default.eplist,actions:u&&p.default.createElement(g.Button,{type:"control",loading:l,onClick:this.toggleNetworkIsolate},t("ENABLE"))}))}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"namespace",get:function(){return(0,h.default)(this.params,"namespace")}},{key:"cluster",get:function(){return(0,h.default)(this.params,"cluster")}},{key:"workspace",get:function(){return(0,h.default)(this.projectStore,"detail.workspace","")}},{key:"enabledActions",get:function(){return globals.app.getActions(T(T({module:"networkpolicies"},this.params),{},{project:this.params.namespace}))}}]),r}(p.default.Component))||o)||o;a.default=C},4651:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,c=n(r(31)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(3)),h=r(186),v=r(791),g=n(r(443)),_=n(r(4652)),y=n(r(4653)),E=n(r(1443));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var R=(0,p.inject)("rootStore","projectStore")(o=(0,v.trigger)(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).module=e.module,t.projectStore=e.projectStore,t.serviceStore=new g.default,t.state={curTab:"inner"},t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.namespace,a={cluster:e.cluster,limit:-1};this.projectStore.fetchList(S({},a)),this.serviceStore.fetchList(S({namespace:t},a))}},{key:"renderTabs",value:function(){var e=this,a=this.state.curTab;return f.default.createElement("div",{className:E.default.tabs},f.default.createElement("div",{className:(0,m.default)(E.default.tab,"inner"===a&&E.default.on),onClick:function(){return e.setState({curTab:"inner"})}},f.default.createElement(h.Icon,{name:"eip-pool",size:40}),f.default.createElement("div",{className:E.default.disc},f.default.createElement("div",{className:E.default.dictitle},t("INTERNAL_ALLOWLIST")),f.default.createElement("div",null,t("INTERNAL_ALLOWLIST_DESC")))),f.default.createElement("div",{className:(0,m.default)(E.default.tab,"outer"===a&&E.default.on),onClick:function(){return e.setState({curTab:"outer"})}},f.default.createElement(h.Icon,{name:"eip",size:40}),f.default.createElement("div",{className:E.default.disc},f.default.createElement("div",{className:E.default.dictitle},t("EXTERNAL_ALLOWLIST")),f.default.createElement("div",null,t("EXTERNAL_ALLOWLIST_DESC")))))}},{key:"renderInner",value:function(){var e=this.state.curTab;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:(0,m.default)({hide:"outer"===e})},f.default.createElement(_.default,this.props)),f.default.createElement("div",{className:(0,m.default)({hide:"inner"===e})},f.default.createElement(y.default,this.props)))}},{key:"render",value:function(){return f.default.createElement("div",{className:E.default.wrapper},this.renderTabs(),this.renderInner())}}]),r}(f.default.Component))||o)||o)||o;a.default=R},4652:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,c=n(r(31)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),g=n(r(3)),_=r(186),y=r(791),E=n(r(1417)),b=n(r(1443));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var A=(0,m.inject)("rootStore")(o=(0,y.trigger)(o=(0,m.observer)(o=function(e){(0,i.default)(r,e);var a=R(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).fetchInside=function(){var e=t.props,a=e.cluster,r=e.namespace,n=e.workspace;t.store.fetchList({cluster:a,namespace:r,workspace:n,limit:-1,labelSelector:"kubesphere.io/policy-traffic=inside"})},t.addAllowList=function(){t.trigger("network.policies.add",O(O({},t.props),{},{store:t.store,success:t.fetchInside}))},t.handleDelete=function(e){t.trigger("network.policies.delete",O(O({},t.props),{},{ruleName:e,resource:e,store:t.store,type:"ALLOWLIST_ENTRY",success:t.fetchInside}))},t.getDiscription=function(e,a){var r="",n=(0,h.default)(e?t.projectStore:t.serviceStore,"list.data");if(n){var o=n.find((function(e){return e.name===a}));o&&(r=(0,h.default)(o,"description"))}return r},t.getInnerData=function(){var e=t.store.list,a=[],r=[],n=[],o=[];return e.data.forEach((function(e){var t=(0,h.default)((0,p.toJS)(e),"_originData");(0,v.default)((0,h.default)(t,"spec.egress[0].ports"))?(0,v.default)((0,h.default)(t,"spec.egress[0].to"))||((0,v.default)((0,h.default)(t,"spec.egress[0].to[0].ipBlock"))?a.push(t):n.push(t)):n.push(t),(0,v.default)((0,h.default)(t,"spec.ingress[0].ports"))?(0,v.default)((0,h.default)(t,"spec.ingress[0].from"))||((0,v.default)((0,h.default)(t,"spec.ingress[0].from[0].ipBlock"))?r.push(t):o.push(t)):o.push(t)})),{innerEgressData:a,innerIngressData:r}},t.renderRules=function(e,a){return f.default.createElement(f.default.Fragment,null,e.map((function(e){return f.default.createElement("div",{key:(0,h.default)(e,"metadata.name"),className:b.default.row},f.default.createElement("div",{className:b.default.prow},(0,h.default)(e,"spec.".concat(a,"[0].").concat("egress"===a?"to":"from"),[]).map((function(a,r,n){var o=!!(0,h.default)(a,"namespace.name"),c=o?"project":"appcenter",s=o?(0,h.default)(a,"namespace.name"):(0,h.default)(a,"service.name"),l=t.getDiscription(o,s),i="";if(!o&&r+1===n.length){var u=(0,h.default)(a,"service.namespace"),d=t.getDiscription(!0,u);i=f.default.createElement("span",{className:b.default.pcell},f.default.createElement(_.Icon,{name:"project"}),f.default.createElement("b",null,u,f.default.createElement("span",null,"(",(0,h.default)(e,"metadata.name"),")")),f.default.createElement("label",null,!(0,v.default)(d)&&"(".concat(d,")")))}return f.default.createElement("span",{className:b.default.cell,key:s},f.default.createElement(_.Icon,{name:c}),f.default.createElement("b",null,s," (",f.default.createElement("span",null,(0,h.default)(e,"metadata.name")),")"),f.default.createElement("label",null,!(0,v.default)(l)&&"(".concat(l,")")),i)}))),t.props.canEdit&&f.default.createElement(_.Icon,{name:"trash",changeable:!0,onClick:function(){t.handleDelete((0,h.default)(e,"metadata.name"))}}))})))},t.store=new E.default(e.module),t.projectStore=e.projectStore,t.serviceStore=e.serviceStore,t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchInside()}},{key:"render",value:function(){var e=this.props.canEdit,a=this.getInnerData(),r=a.innerEgressData,n=a.innerIngressData;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:b.default.rulemenu},f.default.createElement("div",null,t("INTERNAL_ALLOWLIST_TIP")),e&&f.default.createElement(_.Button,{type:"control",onClick:this.addAllowList},t("ADD_ALLOWLIST_ENTRY"))),f.default.createElement("div",{className:b.default.rulebody},f.default.createElement("div",{className:(0,g.default)(b.default.rulegroup,{hide:0===r.length})},f.default.createElement("div",{className:b.default.subtitle},t("EGRESS")),f.default.createElement("div",{className:b.default.disp},t("INTERNAL_EGRESS_DESC")),this.renderRules(r,"egress")),f.default.createElement("div",{className:(0,g.default)(b.default.rulegroup,{hide:0===n.length})},f.default.createElement("div",{className:b.default.subtitle},t("INGRESS")),f.default.createElement("div",{className:b.default.disp},t("INTERNAL_INGRESS_DESC")),this.renderRules(n,"ingress"))))}}]),r}(f.default.Component))||o)||o)||o;a.default=A},4653:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(134),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var c,s=n(r(315)),l=n(r(31)),i=n(r(58)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),g=r(14),_=n(r(26)),y=n(r(788)),E=r(186),b=o(r(793)),S=n(r(796)),O=r(52),R=r(791),A=n(r(1417)),k=n(r(1443));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,b.default)({store:new A.default("namespacenetworkpolicies"),module:"namespacenetworkpolicies",name:"ALLOWLIST_ENTRY",authKey:"networkpolicies"})(c=(0,v.inject)("rootStore")(c=(0,R.trigger)(c=(0,v.observer)(c=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).fetchOutside=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction,a=(0,i.default)(e,["direction"]),r=n.props,o=r.cluster,c=r.namespace,s=r.workspace,l=["kubesphere.io/policy-traffic=outside"];t&&"all"!==t&&l.push("kubesphere.io/policy-type=".concat(t)),n.outsideStore.fetchListOut(D({cluster:o,namespace:c,workspace:s,limit:10,labelSelector:l.join(",")},a))},n.addIpBlock=function(){n.trigger("network.policies.addIpBlock",D(D({},n.props),{},{success:n.fetchOutside}))},n.editIpBlock=function(e,t){n.trigger("network.policies.editIpBlock",D(D({},n.props),{},{formTemplate:(0,g.toJS)(t._originData),edit:!0,name:e,store:n.outsideStore,success:n.fetchOutside}))},n.viewIpBlock=function(e,t){n.trigger("network.policies.viewIpBlock",D(D({},n.props),{},{formTemplate:(0,g.toJS)(t._originData),edit:!0,name:e,store:n.outsideStore,fetchOutside:n.fetchOutside,success:n.fetchOutside}))},n.handleDelete=function(e){n.trigger("network.policies.delete",D(D({},n.props),{},{ruleName:e,resource:e,store:n.outsideStore,type:"ALLOWLIST_ENTRY",success:n.fetchOutside}))},n.getColumns=function(){var e=n.props,a=e.getSortOrder,r=e.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:function(e,t){return h.default.createElement(y.default,{onClick:function(){n.viewIpBlock(e,t)},className:k.default.avatar,desc:t.description||"-",title:t.aliasName?"".concat(t.name,"(").concat(t.aliasName,")"):t.name})}},{title:t("TRAFFIC_DIRECTION"),dataIndex:"direction",filters:n.getStatus(),filteredValue:r("direction"),isHideable:!0,search:!0,render:function(e){return h.default.createElement("div",null,"ingress"===e?t("INGRESS"):t("EGRESS"))}},{title:t("NETWORK_SEGMENT_QUANTITY"),dataIndex:"ipBlockNumber",isHideable:!0,search:!0},{title:t("PORT_QUANTITY"),dataIndex:"portsNumber",isHideable:!0,search:!0},{title:t("UPDATE_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("updateTime"),isHideable:!0,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.module=e.module,n.outsideStore=e.store,n}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchOutside()}},{key:"getStatus",value:function(){return[{text:"ALL",value:"all"},{text:"EGRESS",value:"egress"},{text:"INGRESS",value:"ingress"}].map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e,a=this.props,r=a.canEdit,n=a.tableProps,o=null===(e=this.outsideStore.list.data)||void 0===e?void 0:e.map((function(e){var t=(0,g.toJS)(e._originData),a=(0,_.default)(t,"spec.ingress[0].ports")||(0,_.default)(t,"spec.egress[0].ports")||[],r=(0,_.default)(t,"spec.ingress[0].to")||(0,_.default)(t,"spec.egress[0].to")||(0,_.default)(t,"spec.ingress[0].from")||(0,_.default)(t,"spec.egress[0].from")||[],n=a.length;return D(D({},e),{},{direction:(0,_.default)(t,"spec.ingress[0]")?"ingress":"egress",portsNumber:n,ipBlockNumber:r.length})}));return h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:k.default.rulemenu},h.default.createElement("div",null,t("EXTERNAL_ALLOWLIST_TIP")),r&&h.default.createElement(E.Button,{type:"control",onClick:this.addIpBlock},t("ADD_ALLOWLIST_ENTRY"))),h.default.createElement(b.ListPage,(0,s.default)({},this.props,{getData:this.fetchOutside,noWatch:!0}),h.default.createElement(S.default,(0,s.default)({},n,{rowKey:"name",data:o,hideSearch:!0,itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns()}))))}},{key:"itemActions",get:function(){var e=this;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){e.editIpBlock(t.name,t)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("resource.delete",{detail:t,type:"ALLOWLIST_ENTRY",store:e.outsideStore,success:e.fetchOutside})}}]}},{key:"tableActions",get:function(){return D(D({},this.props.tableProps.tableActions),{},{onFetch:this.fetchOutside})}}]),r}(h.default.Component))||c)||c)||c)||c;a.default=P},4654:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=r(186),m=r(72),h=r(791),v=n(r(850)),g=n(r(4655));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,f.inject)("rootStore")(o=(0,h.trigger)(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=_(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).toggle=function(){var e=n.state.opened;e?n.trigger("network.policies.toggle",{resource:t("DISABLED_PROJECT_NETWORK_ISOLATION"),title:t("DISABLED_PROJECT_NETWORK_ISOLATION"),desc:t.html("DISABLED_RESOURCE_TYPE_DESC",{resource:t("DISABLED_PROJECT_NETWORK_ISOLATION")}),success:function(){n.props.onEdit(!e),n.setState({opened:!e})}}):(n.props.onEdit(!e),n.setState({opened:!e}))},n.state={opened:e.networkIsolate},n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state.opened,a=this.props,r=a.module,n=a.canEdit;return d.default.createElement("div",{className:g.default.wrapper},d.default.createElement("div",{className:g.default.left},d.default.createElement(p.Icon,{name:m.ICON_TYPES[r],size:40,color:{primary:"#324558",secondary:"#f5a623"}}),d.default.createElement("div",{className:g.default.isolate},d.default.createElement("div",{className:g.default.isolatetitle},t("ENABLED")),d.default.createElement("div",null,t("PROJECT_NETWORK_ISOLATION")))),n&&d.default.createElement(v.default,{className:g.default.switch,text:e?t("ENABLED"):t("DISABLED"),onChange:this.toggle,checked:e}))}}]),r}(d.default.Component))||o)||o)||o;a.default=y},4655:function(e,t,a){e.exports={wrapper:"_2yyqmdLMQV7jExw4-99r2V",left:"_3NfpPZF4t2tLIAFo8aCkod",isolate:"_2Gn52m3ytjk9-uNyzg2pHS",isolatetitle:"_3A7x-YmULSD9DlRZAIcLO7"}},4656:function(e,t,a){e.exports={wrapper:"ggsECpK2-iUDno_sJog6s",subtitle:"_2FnrF0AWM2BVASqvjWI14c",eplist:"_1_D3iOzFw4bLc5I38oh41Q"}},4657:function(e,a,r){"use strict";(function(e){var n=r(20);r(12),r(134),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(31)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(26)),g=r(186),_=n(r(240)),y=n(r(796)),E=n(r(1024)),b=n(r(792)),S=r(793),O=r(52),R=n(r(483)),A=n(r(4658));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,S.withProjectList)({store:new R.default,module:"edgeappsets",name:"BATCH_APP_DEPLOY"})(s=function(a){(0,f.default)(n,a);var r=D(n);function n(a){var o;return(0,u.default)(this,n),(o=r.call(this,a)).getData=function(e){var t=o.props,a=t.match;t.store.fetchList(T(T({},a.params),e))},o.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",isHideable:!0,search:!0,width:412,render:function(e,t){return h.default.createElement(E.default,{isApp:!0,avatar:(0,v.default)(t,"app.icon"),iconLetter:e,iconSize:40,title:(0,O.getDisplayName)(t),desc:t.description||"-",to:"".concat(o.props.match.url,"/").concat(e),isMultiCluster:t.isFedManaged})}},{title:t("TASK_EXE_STATUS"),dataIndex:"status",isHideable:!0,width:412,render:function(e){return h.default.createElement(A.default,{workloadStatus:e})}},{title:t("UPDATE_TIME_SCAP"),dataIndex:"updateTime",isHideable:!0,width:200,sorter:!0,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},o.handleDeleteWorkloadsChange=function(e){o.setState({delete_workloads:e})},o.handleDelete=function(){var e=(0,l.default)(c.default.mark((function e(a){var r,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.props.store,n=(0,v.default)(o.state,"delete_workloads",!1),e.next=4,r.delete(a,n);case 4:_.default.success({content:t("DELETED_SUCCESSFULLY")});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleBatchDelete=function(){var e=o.props.store,t=e.list.selectedRowKeys,a=o.state.delete_workloads;return e.batchDelete(t,a)},o.showCreate=function(){var t=o.props,a=t.match,r=t.trigger,n=t.rootStore;o.props.trigger("batch.deploy.app.create",T(T({module:e},a.params),{},{routing:n.routing,trigger:r}))},o.state={delete_workloads:!1},o}return(0,d.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return h.default.createElement(S.ListPage,(0,o.default)({},this.props,{noWatch:!0}),h.default.createElement(b.default,(0,o.default)({},t,{icon:"application",getData:this.getData})),h.default.createElement(y.default,(0,o.default)({},a,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.tableProps,n=a.trigger,o=a.store.list.selectedRowKeys;return T(T({},r.tableActions),{},{onCreate:this.showCreate,selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return n("app.deploy.batch.delete",{type:"EDGE_APPLICATION",selectedRowKeys:o,onOk:e.handleBatchDelete,success:function(){e.getData(),e.setState({delete_workloads:void 0})},renderExtra:function(){return h.default.createElement(g.Checkbox,{className:"margin-t12",onChange:e.handleDeleteWorkloadsChange},t("DEL_ALL_WORKLOAD_IN_EDGE_APP"))}})}}],emptyProps:{icon:"application"}})}},{key:"itemActions",get:function(){var e=this,a=this.props.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return a("resource.baseinfo.edit",{detail:t,hideAlias:!0,success:e.getData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(r){return a("resource.delete",{type:"EDGE_APPLICATION",detail:r,onOk:function(){return e.handleDelete(r)},success:function(){e.getData(),e.setState({delete_workloads:void 0})},renderExtra:function(){return h.default.createElement(g.Checkbox,{className:"margin-t12",onChange:e.handleDeleteWorkloadsChange},t("DEL_ALL_WORKLOAD_IN_EDGE_APP"))}})}}]}}]),n}(h.default.Component))||s;a.default=C}).call(this,r(138)(e))},4658:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(98),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(31)),c=n(r(96));r(18),r(98);var s=n(r(0)),l=n(r(3)),i=n(r(26)),u=r(186),d=n(r(4659)),f=function(e){var a=e.workloadStatus,r={succeeded:t("SUCCEEDED"),processing:t("PROCESSING"),failed:t("FAILED")},n=Object.entries(r).map((function(e){var t=(0,c.default)(e,2),r=t[0];return{label:t[1],type:r,value:(0,i.default)(a,r,0)}}));return s.default.createElement(u.Tooltip,{content:s.default.createElement(s.default.Fragment,null,n.map((function(e,t){return s.default.createElement("div",{key:t,className:(0,l.default)(d.default.tipContent,[d.default[e.type]],(0,o.default)({},d.default.disabled,0===e.value))},s.default.createElement("span",null,e.label),s.default.createElement("span",null,e.value))}))),placement:"right"},s.default.createElement("ul",{className:d.default.statusBox},n.map((function(e,t){return s.default.createElement("li",{key:t,className:(0,l.default)([d.default["li-".concat(e.type)]],(0,o.default)({},d.default.iconDisabled,0===e.value))},e.value)}))))};a.default=f},4659:function(e,t,a){e.exports={statusBox:"_2SxhL6FOlOUE0ueV6aMi8g",tipContent:"-dPc0P4WSpwItbhz69-MQ","li-succeeded":"_1LYI5bjMNep5hKUywxMlav","li-processing":"_2V9Bn_4YHLRRa0KSxjNn0l","li-failed":"hrhqCpKU2is8rdHsKDfSy",processing:"V3-jxMnici-1HBP9gpqSP",succeeded:"_7EYmhcOm3498KbYuC_rGB",failed:"_1sWi0xI5il3pf534i8K8mc",disabled:"_2du-Ix95aFjU5DawofjeXS",iconDisabled:"_2Cix69Z-_d2fNFK14pYpKu"}},4660:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(134),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var c,s=n(r(315)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=n(r(792)),g=n(r(788)),_=n(r(838)),y=n(r(796)),E=r(52),b=o(r(793)),S=n(r(852)),O=n(r(4661)),R=n(r(4663));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D={active:"RUNNING"},C=(0,b.default)({store:new S.default,module:"node-groups",name:"NODE_GROUP",rowKey:"uid",skipAuth:!0})(c=function(e){(0,d.default)(r,e);var a=T(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getData=function(t){e.props.store.fetchListProjectGroups(k(k({},t),{},{cluster:e.cluster,labelSelector:"apps.edgewize.io/namespaces-".concat(e.namespace)}))},e.getColumns=function(){var a=e.props.getSortOrder,r=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),render:function(e,t){return m.default.createElement(g.default,{to:"Terminating"===t.status?null:"/node-groups/clusters/".concat(r,"/").concat(e),avatar:"/assets/disk_group.svg",iconSize:40,isMultiCluster:t.isFedHostNamespace,desc:t.description||"-",title:(0,E.getDisplayName)(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"12.5%",render:function(e){var a=(0,h.default)(D,e);return a?m.default.createElement("div",{className:R.default.status},m.default.createElement(_.default,{type:e,flicker:!0}),m.default.createElement("span",null,t(a))):"-"}},{title:t("NODE_COUNT"),dataIndex:"count",isHideable:!0,width:"12.5%",render:function(e,t){return(0,h.default)(t,'_originData.metadata.labels["apps.edgewize.io/nodes-count"]')}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:"17.8%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.bannerProps,n=a.tableProps;return m.default.createElement(b.ListPage,(0,s.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(v.default,(0,s.default)({},r,{icon:"node-group"})),m.default.createElement(y.default,(0,s.default)({},n,{columns:this.getColumns(),itemActions:[],emptyProps:{icon:"edge-node",title:t("NO_NODE_GROUP_FOUNDED"),desc:t("NO_NODE_GROUP_FOUNDED_DESC")},expandedRowRender:function(t){var a=t.name;return m.default.createElement(O.default,{name:a,cluster:e.cluster,namespace:e.namespace})},searchType:"name"})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name,n=e.getData,o=e.match;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("node.group.baseinfo.edit",k(k({detail:e},o.params),{},{success:n}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){a("resource.delete",{type:r,detail:e,success:n})}}]}}]),r}(m.default.Component))||c;a.default=C},4661:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var o=n(r(43)),c=n(r(31));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=r(239),g=n(r(63)),_=n(r(26)),y=r(186),E=n(r(788)),b=n(r(795)),S=n(r(790)),O=n(r(863)),R=r(444),A=r(72),k=r(52),T=r(794),D=n(r(852)),C=n(r(954)),P=n(r(4662)),N=n(r(1902));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var M={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},L=(0,v.observer)(s=function(e){(0,d.default)(r,e);var a=x(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=a.call.apply(a,[this].concat(c))).store=new D.default,e.monitoringStore=new C.default({cluster:e.cluster}),e.getData=function(){var t=(0,l.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.name,t.next=3,e.store.fetchChildResource(w(w({},a),{},{cluster:e.cluster,group:r,kind:"nodes"}));case 3:return t.next=5,e.monitoringStore.fetchMetrics({cluster:e.cluster,name:r,resources:e.store.list.data.map((function(e){return e.name})),metrics:Object.values(M),last:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.getLastValue=function(t,a,r){var n=e.monitoringStore.data,o=((0,_.default)(n[a],"data.result")||[]).find((function(e){return(0,_.default)(e,"metric.node")===t.name}));return(0,T.getValueByUnit)((0,_.default)(o,"value[1]",0),r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){r[a.type]=parseFloat(e.getLastValue(t,M[a.type],a.unit))})),r},e.renderTaintsTip=function(e){return m.default.createElement("div",null,m.default.createElement("div",null,t("TAINTS"),":"),m.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return m.default.createElement("div",{key:t},t)}))))},e.Columns=function(){return[{dataIndex:"name",className:N.default.name,render:function(e,t){var a=t.ip,r=t.labels,n=t.importStatus,o=t.cluster,c=(null==r?void 0:r["kubeedge.io/internal-ip"])||a;return m.default.createElement(E.default,{icon:"edge-node",iconSize:40,to:"success"!==n?null:"/v2/edgewize/clusters/".concat(o,"/nodes/").concat(e),title:e,desc:null!=c?c:"-"})}},{dataIndex:"status",className:N.default.status,render:function(a,r){var n=(0,R.getNodeStatus)(r),o=r.taints;return m.default.createElement("div",{className:N.default.statusBox},m.default.createElement(b.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),!(0,g.default)(o)&&"success"===r.importStatus&&m.default.createElement(y.Tooltip,{content:e.renderTaintsTip(o)},m.default.createElement("span",{className:N.default.taints},o.length)))}},{key:"cpu",className:N.default.cpu,render:function(a){var r=e.getRecordMetrics(a,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return m.default.createElement(S.default,{title:m.default.createElement("div",{className:N.default.resource},m.default.createElement("span",null,"".concat(Math.round(100*r.cpu_utilisation),"%")),r.cpu_utilisation>=.9&&m.default.createElement(y.Icon,{name:"exclamation"}),m.default.createElement("span",null,"(".concat(r.cpu_used,"/").concat(r.cpu_total," Core)"))),description:t("CPU_USAGE_SCAP")})}},{key:"memory",className:N.default.cpu,render:function(a){var r=e.getRecordMetrics(a,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return m.default.createElement(S.default,{title:m.default.createElement("div",{className:N.default.resource},m.default.createElement("span",null,"".concat(Math.round(100*r.memory_utilisation),"%")),r.memory_utilisation>=.9&&m.default.createElement(y.Icon,{name:"exclamation"}),m.default.createElement("span",null,"(".concat(r.memory_used,"/").concat(r.memory_total," GiB)"))),description:t("MEMORY_USAGE_TCAP")})}},{key:"pods",className:N.default.pods,render:function(a){var r=e.getRecordMetrics(a,[{type:"pod_used"},{type:"pod_total"}]),n=r.pod_total?parseFloat(r.pod_used/r.pod_total):0;return m.default.createElement(S.default,{title:"".concat(Math.round(100*n),"%(").concat(r.pod_used,"/").concat(r.pod_total,")"),description:t("PODS")})}}]},e.renderCPUTooltip=function(e){var a=m.default.createElement("p",null,1===(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_LIMIT_SI",{core:(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_LIMIT_PL",{core:(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}));return m.default.createElement(y.Tooltip,{content:a,placement:"top"},m.default.createElement(S.default,{title:1===(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_REQUEST_SI",{core:(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,_.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_REQUEST_PL",{core:(0,k.cpuFormat)((0,_.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,_.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(e){var a=m.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,k.memoryFormat)((0,_.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,_.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}));return m.default.createElement(y.Tooltip,{content:a,placement:"top"},m.default.createElement(S.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,k.memoryFormat)((0,_.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,_.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderEmpty=function(){return m.default.createElement("div",{className:N.default.empty},m.default.createElement("div",{className:N.default.icon},m.default.createElement(y.Icon,{name:"edge-node",size:40})),m.default.createElement("div",{className:N.default.title},m.default.createElement("span",null,t("NO_EDGE_CLUSTER")),m.default.createElement("p",null,t("NO_EDGE_CLUSTER_DESC"))))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getStatus",value:function(){return A.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this,t=this.store.list,a=t.data,r=t.total,n=t.page,o=t.isLoading;return m.default.createElement(O.default,{wrapperClassName:N.default.listWrapper,data:(0,h.toJS)(a),total:r,page:n,loading:o,onFetch:this.getData,empty:this.renderEmpty()},a.map((function(t,a){return m.default.createElement(P.default,{key:a,data:t,Columns:e.Columns()})})))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"isExpired",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.isExpired)||!1}},{key:"isOverLimit",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.isOverLimit)||!1}},{key:"tips",get:function(){return[{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}}]),r}(m.default.Component))||s;a.default=L},4662:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),o=r(a(37)),c=r(a(55)),s=r(a(56)),l=r(a(51)),i=r(a(0)),u=r(a(3)),d=r(a(1902));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var p=function(e){(0,c.default)(a,e);var t=f(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.Columns;return i.default.createElement("div",{className:d.default.item},a.map((function(e,a){return i.default.createElement("div",{key:a,className:(0,u.default)(d.default.col,e.className)},e.render(t[e.dataIndex],t))})))}}]),a}(i.default.Component);t.default=p},4663:function(e,t,a){},4664:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(1899)),c=r(a(4665)),s=r(a(1906)),l="/:workspace/clusters/:cluster/projects/:namespace/grayrelease",i=[{name:"cates",title:"RELEASE_MODE_PL",component:c.default},{name:"jobs",title:"RELEASE_TASKS",component:s.default}],u=[{path:l,component:o.default,routes:(0,n.getChildRoutes)(i,l)}];t.default=u},4665:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(29),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(29),r(18),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=r(186),m=n(r(240)),h=n(r(825)),v=r(72),g=n(r(435)),_=n(r(901)),y=n(r(1444)),E=n(r(4666)),b=n(r(4693));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=(0,f.inject)("rootStore")(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=S(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).showCreate=function(e){n.setState({showCreateModal:!0,selectType:e.currentTarget.dataset.type})},n.hideCreate=function(){n.setState({showCreateModal:!1,selectType:""})},n.handleCreate=function(e){var a=n.props.match.params,r=a.workspace,o=a.cluster,c=a.namespace;n.store.create(e,{cluster:o,namespace:c}).then((function(){n.hideCreate(),m.default.success({content:t("CREATE_SUCCESSFUL")}),n.routing.push("/".concat(r,"/clusters/").concat(o,"/projects/").concat(c,"/grayrelease/jobs")),_.default.delete("".concat(n.module,"_create_form"))}))},n.state={showCreateModal:!1,selectType:""},n.store=new y.default,n.module="strategies",n.namespace=n.props.match.params.namespace,n.cluster=n.props.match.params.cluster,n}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.state,r=a.showCreateModal,n=a.selectType,o=v.GRAY_RELEASE_CATEGORIES.find((function(e){return e.type===n}))||{};return d.default.createElement("div",null,d.default.createElement("ul",{className:b.default.wrapper},v.GRAY_RELEASE_CATEGORIES.map((function(a){return d.default.createElement("li",{key:a.title},d.default.createElement("div",{className:b.default.content},d.default.createElement("div",{className:b.default.icon},d.default.createElement(p.Icon,{name:a.icon,size:24,type:"light"})),d.default.createElement("div",{className:b.default.text},d.default.createElement("div",{className:"h5"},t(a.title)),d.default.createElement("p",null,t.html(a.desc)))),d.default.createElement("div",{className:b.default.footer},e.canCreate&&d.default.createElement(p.Button,{type:"control","data-type":a.type,onClick:e.showCreate},t("CREATE"))))}))),d.default.createElement(h.default,{title:t("CREATE_".concat(o.title,"_TASK")),module:"grayreleases_".concat(o.type),formTemplate:this.formTemplate,cluster:this.cluster,namespace:this.namespace,store:this.store,visible:r,steps:this.steps,onCancel:this.hideCreate,onOk:this.handleCreate,closable:!0,noCodeEdit:!0}))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"formTemplate",get:function(){return{strategy:g.default[this.module]({namespace:this.namespace,type:this.state.selectType})}}},{key:"steps",get:function(){return E.default}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.hasPermission({cluster:t,workspace:a,project:r,module:"grayscale-release",action:"create"})}}]),r}(d.default.Component))||o)||o;a.default=O},4666:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(4667)),o=r(a(4668)),c=r(a(1903)),s=r(a(1905)),l=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"SERVICE_SETTINGS",component:o.default,required:!0},{title:"NEW_VERSION_SETTINGS",component:c.default,required:!0},{title:"STRATEGY_SETTINGS",component:s.default,required:!0}];t.default=l},4667:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(26)),f=n(r(0)),p=r(239),m=r(72),h=r(186);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,p.observer)(o=function(e){(0,l.default)(r,e);var a=v(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return f.default.createElement(h.Form,{data:this.formTemplate,ref:e},f.default.createElement(h.Columns,null,f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})},{validator:this.nameValidator}]},f.default.createElement(h.Input,{name:"metadata.name",maxLength:253}))),f.default.createElement(h.Column,null)))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"strategyType",get:function(){return(0,d.default)(this.formTemplate,"spec.type")}}]),r}(f.default.Component))||o;a.default=g},4668:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(29),r(6),r(84),r(30),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(85),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(29),r(6),r(84),r(30),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(38),r(7),r(32);var o=n(r(31)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(26)),h=n(r(63)),v=n(r(74)),g=n(r(242)),_=n(r(830)),y=n(r(0)),E=r(14),b=r(239),S=r(186),O=r(52),R=r(72),A=n(r(435)),k=n(r(961)),T=n(r(443)),D=n(r(4669)),C=n(r(4673));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=["http","http2","grpc"],x=(0,b.observer)(s=function(e){(0,d.default)(r,e);var a=I(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).valueRenderer=function(e){return y.default.createElement("p",{className:C.default.option},y.default.createElement("img",{src:e.icon||"/assets/default-app.svg",alt:""}),t("GRAY_APP_NAME",{name:e.name}),e.disabled&&y.default.createElement(S.Tooltip,{trigger:"click",content:t("NO_SERVICE_MESH_TIP"),positionFixed:!0,placement:"left"},y.default.createElement(S.Icon,{name:"question",className:"float-right"})))},n.optionRenderer=n.valueRenderer,n.updateAppInfo=function(e){(0,v.default)(n.formTemplate,"metadata.labels",e.selector),(0,v.default)(n.formTemplate,"spec.selector.matchLabels",e.selector),(0,v.default)(n.formTemplate,'metadata.annotations["app.kubernetes.io/icon"]',e.icon)},n.selectApp=function(){var e=(0,l.default)(c.default.mark((function e(t){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.updateAppInfo(t),n.setState({isLoading:!0}),a={namespace:n.namespace,cluster:n.props.cluster,labelSelector:(0,O.joinSelector)(t.selector)},e.next=5,Promise.all([n.store.fetchList(a),n.serviceStore.fetchListByK8s(a),n.serviceStore.fetchWorkloads(a)]).then((function(){var e=(0,E.toJS)(n.serviceStore.list.data),t=(0,E.toJS)(n.serviceStore.workloads.data),a=(0,E.toJS)(n.store.list.data);(0,g.default)(n.formTemplate,"spec.hosts"),n.setState({components:e.map((function(e){e.workloads=[];var r=(0,m.default)(e,"labels.app");t.forEach((function(t){r===(0,m.default)(t,"labels.app")&&e.workloads.push(t)}));var n=(0,m.default)(e.workloads,"[0].type","");return e.workloadType=R.MODULE_KIND_MAP[n]||"",e.strategies=a.filter((function(t){return t.hosts.includes(e.name)}))||[],e})),isLoading:!1})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleAppChange=function(e){n.setState({selectApp:e},(function(){var t=(0,E.toJS)(n.appStore.list.data).find((function(t){return t.name===e}))||{};t.selector&&n.selectApp(t)}))},n.handleComponentSelect=function(e,t){var a=n.state.components.find((function(t){return t.name===e}))||{};if(!(0,h.default)(a.selector)){var r=(0,_.default)(a.workloads[0]),o=A.default[r.type]({namespace:n.namespace}),c=(0,m.default)(a,"ports[0].name",""),s=w.includes((c.split("-")[0]||"").toLowerCase())?"http":"tcp",l=r.labels.version;(0,v.default)(n.formTemplate,"metadata.labels.app",e),(0,v.default)(n.formTemplate,"spec.selector.matchLabels.app",e),(0,v.default)(n.formTemplate,"spec.template.spec",{hosts:[e]}),(0,v.default)(n.formTemplate,"spec.principal",l),(0,v.default)(n.formTemplate,"spec.protocol",s),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/oldWorkloadName"]',r.name),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/workloadType"]',r.type),(0,v.default)(n.formTemplate,'metadata.annotations["servicemesh.kubesphere.io/workloadReplicas"]',String(r.podNums)),n.props.formTemplate.workload={apiVersion:o.apiVersion,kind:o.kind,metadata:{name:"",namespace:r.namespace,labels:r.labels,annotations:r.annotations},spec:r.spec},(0,O.mergeLabels)(n.props.formTemplate.workload,{version:""})}t&&t(e)},n.handleIstioProxyChange=function(e){n.setState({istioProxyChecked:e})},n.state={istioProxyChecked:!0,selectApp:"",components:[],isLoading:!1},n.store=e.store,n.appStore=new k.default,n.serviceStore=new T.default,n}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.appStore.fetchList({namespace:this.namespace,cluster:this.props.cluster,limit:-1}).then((function(){var t=(0,E.toJS)(e.appStore.list.data).find((function(e){return e.serviceMeshEnable}))||{};e.setState({selectApp:t.name}),t.selector&&e.selectApp(t)}))}},{key:"getApplications",value:function(){return(0,E.toJS)(this.appStore.list.data).map((function(e){return N(N({},e),{},{value:e.name,disabled:!e.serviceMeshEnable})}))}},{key:"renderForm",value:function(){var e=this.props.formRef,a=this.state,r=a.components,n=a.isLoading;return y.default.createElement(S.Form,{data:this.formTemplate,ref:e},y.default.createElement(S.Form.Item,{rules:[{required:!0,message:t("SELECT_GRAY_COMPONENT_TIP")}]},y.default.createElement(D.default,{name:"spec.hosts",data:r,loading:n,onSelect:this.handleComponentSelect})))}},{key:"render",value:function(){var e=this.state.selectApp;return y.default.createElement("div",null,y.default.createElement("div",{className:C.default.bar},y.default.createElement(S.Select,{value:e,onChange:this.handleAppChange,options:this.getApplications(),isLoading:this.appStore.list.isLoading,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,placeholder:" "})),y.default.createElement("div",{className:C.default.formWrapper},this.renderForm()))}},{key:"namespace",get:function(){return(0,m.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"strategyType",get:function(){return(0,m.default)(this.formTemplate,"spec.type")}}]),r}(y.default.Component))||s;a.default=x},4669:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(36)),o=r(a(37)),c=r(a(55)),s=r(a(56)),l=r(a(51)),i=r(a(0)),u=r(a(1)),d=a(186),f=r(a(4670)),p=r(a(4672));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=m(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={loadingName:""},e.handleCardSelect=function(t,a){var r=e.props,n=r.onChange,o=r.onSelect;e.setState({loadingName:t.name}),o(a?t.name:"",(function(t){n(t),e.setState({loadingName:""})}))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.value,n=t.loading,o=this.state.loadingName;return n?i.default.createElement("div",{className:"text-center margin-t12"},i.default.createElement(d.Loading,{spinning:!0})):i.default.createElement("div",{className:p.default.wrapper},a.map((function(t){return i.default.createElement(f.default,{key:t.name,component:t,value:t.name===r,loading:t.name===o,onSelect:e.handleCardSelect})})))}}]),a}(i.default.Component);t.default=h,h.propTypes={data:u.default.array,value:u.default.string,onChange:u.default.func,onSelect:u.default.func},h.defaultProps={data:[],value:"",onChange:function(){},onSelect:function(){}}},4670:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(73),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(1)),f=n(r(26)),p=n(r(63)),m=r(186),h=n(r(4671));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.value,r=t.component;(0,t.onSelect)(r,!a)},e}return(0,c.default)(r,[{key:"renderActions",value:function(){var e=this.props,a=e.value,r=e.component,n=e.loading;return r.workloads.length<=0?u.default.createElement("span",{className:h.default.right},t("NO_WORKLOAD_FOUND_TIP")):"Deployment"!==r.workloadType?u.default.createElement("span",{className:h.default.right},t("UNSUPPORTED_WORKLOAD_TYPE")):r.strategies.length>0?u.default.createElement("span",{className:h.default.right},t("UNFINISHED_GRAY_TASK")):u.default.createElement(m.Button,{className:h.default.right,type:a?"control":"default",loading:n,onClick:this.handleClick},a?t("DESELECT"):t("SELECT"))}},{key:"render",value:function(){var e=this.props.component,a=e.workloads.map((function(e){return(0,f.default)(e,"labels.version")})).filter((function(e){return!(0,p.default)(e)})),r="true"===(0,f.default)(e,'annotations["servicemesh.kubesphere.io/enabled"]');return u.default.createElement("div",{className:h.default.card},u.default.createElement("div",{className:h.default.icon},u.default.createElement(m.Icon,{name:"network-router",size:40}),r&&u.default.createElement("span",{className:h.default.istio},u.default.createElement(m.Icon,{name:"istio",size:16,color:{primary:"#329dce"}}))),u.default.createElement("div",{className:h.default.text},u.default.createElement("div",{className:"h6"},e.name),u.default.createElement("p",null,e.workloadType?t("TYPE_SERVICE_".concat(e.workloadType.toUpperCase())):"")),u.default.createElement("div",{className:h.default.version},u.default.createElement("strong",null,a.join(", ")||"-"),u.default.createElement("p",null,1===a.length?t("VERSION"):t("VERSIONS"))),this.renderActions())}}]),r}(u.default.PureComponent);a.default=g,g.propTypes={component:d.default.object,value:d.default.bool,loading:d.default.bool,onSelect:d.default.func},g.defaultProps={component:{},value:!1,loading:!1,onSelect:function(){}}},4671:function(e,t,a){e.exports={card:"_3vdiLN4Az6-6fCKu8ttzIa",text:"_2C5MPZP86Hmq9uLh1-prt5",version:"_3BdnFvaVFC2V8wsrWb3j1F",right:"_22_hdrLm_dtJeJueL5yCgt",icon:"NrHNPh-9ONr5JnVvXUTCp",istio:"QsKsUbWftNYVLE1oT6Mc"}},4672:function(e,t,a){e.exports={wrapper:"_3jlq6ji_fVJNJXEVJYPoTi"}},4673:function(e,t,a){e.exports={bar:"j7RcImezSmT-OprCulkMk",checkbox:"ZE5YWXYsULV5eiGXfcYP7",formWrapper:"_3ytQ7Vaf_iycMg_bFmBAUm",option:"_34g2-hBf74QtaHOUh6qYBM"}},4674:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(36)),o=r(a(37)),c=r(a(332)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=r(a(1555)),f=r(a(4675)),p=r(a(1904));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var h=function(e){(0,s.default)(a,e);var t=m(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"renderEmpty",value:function(){return null}},{key:"renderContainers",value:function(){var e=this,t=this.props,a=t.value,r=t.disabled;return u.default.createElement("ul",{className:p.default.list},a.map((function(t){return u.default.createElement(f.default,{container:t,key:t.name,onEdit:e.handleEdit,onDelete:e.handleDelete,disabled:r})})))}},{key:"renderInitContainers",value:function(){var e=this,t=this.props,a=t.specTemplate.initContainers,r=void 0===a?[]:a,n=t.disabled;return r.map((function(t){return u.default.createElement(f.default,{container:t,key:t.name,type:"init",onEdit:e.handleEdit,onDelete:e.handleDelete,disabled:n})}))}},{key:"renderAdd",value:function(){return this.props.disabled?null:(0,c.default)((0,i.default)(a.prototype),"renderAdd",this).call(this)}}]),a}(d.default);t.default=h},4675:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=n(r(31)),c=n(r(0)),s=n(r(1)),l=r(186),i=n(r(813)),u=n(r(1904));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=function(e){var a=e.type,r=void 0===a?"worker":a,n=e.container,o=e.onEdit,s=e.onDelete,d=e.disabled,p=c.default.createElement("div",{className:u.default.inputs},c.default.createElement(l.Input,{defaultValue:n.image,onChange:function(e,t){n.image=t},disabled:d})),m="init"===r?c.default.createElement("span",null,n.name,c.default.createElement(l.Tag,{className:"margin-l8",type:"warning"},t("INIT_CONTAINER"))):n.name;return c.default.createElement(i.default.Item,{icon:"docker",title:m,className:u.default.card,description:t("GRAYSCALE_IMAGE",{image:n.image}),extras:p,onDelete:!d&&function(){return s(f({type:r},n))},onEdit:!d&&function(){return o(f({type:r},n))}})};p.propTypes={container:s.default.object};var m=p;a.default=m},4676:function(e,t,a){e.exports={narrow:"_3MyIBanS39Yy2xFvGvD2Ax",specify:"_2_94GzmKeNJkOU-YlzOdQX",containers:"_2WkVQ3Y2P9QTDsKKkqH3gR"}},4677:function(e,a,r){"use strict";r(15);var n=r(20);r(29),r(6),r(97),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(29),r(6),r(97),r(42),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(26)),d=n(r(74)),f=n(r(63)),p=n(r(830)),m=n(r(0)),h=r(186),v=n(r(4678)),g=n(r(4680)),_=n(r(4687));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var E=function(e){(0,s.default)(r,e);var a=y(r);function r(e){var t;(0,o.default)(this,r),(t=a.call(this,e)).initFormTemplate=function(e){var a=t.props.formTemplate,r=(0,u.default)(a,"strategy.spec.template.spec.hosts[0]"),n=(0,u.default)(a,"strategy.spec.principal"),o=(0,u.default)(a,"workload.metadata.labels.version"),c="traffic"===e?[{route:[{destination:{subset:n,host:r}},{destination:{subset:o,host:r}}]}]:[{route:[{destination:{subset:o,host:r},weight:100}]},{route:[{destination:{subset:n,host:r},weight:100}]}];if(t.oldHttpData&&(1===t.oldHttpData.length&&"traffic"===e||2===t.oldHttpData.length&&"content"===e))if("traffic"===e){var s=(0,u.default)(t.oldHttpData,"[0].route",[]),l=s.find((function(e){return(0,u.default)(e,"destination.subset")===n})),i=s.find((function(e){return(0,u.default)(e,"destination.subset")===o}));l&&i&&((0,d.default)(c[0],"route[0].weight",l.weight),(0,d.default)(c[0],"route[1].weight",i.weight))}else{var f=t.oldHttpData.find((function(e){return!!e.match}));(0,d.default)(c[0],"match",f.match)}"tcp"===t.protocol&&c.forEach((function(e){e.match=e.match||[]})),(0,d.default)(t.formTemplate,t.strategyPath,c)},t.handleModeChange=function(e){t.initFormTemplate(e),t.setState({mode:e})};var n=(0,u.default)(t.formTemplate,t.strategyPath,[]);return t.state={mode:n.some((function(e){return!(0,f.default)(e.match)}))?"content":"traffic"},t.oldHttpData=(0,p.default)(n),t.initFormTemplate(t.state.mode),t}return(0,c.default)(r,[{key:"renderContent",value:function(){return"traffic"===this.state.mode?m.default.createElement(v.default,this.props):m.default.createElement(g.default,this.props)}},{key:"render",value:function(){return m.default.createElement("div",{className:_.default.wrapper},m.default.createElement("div",{className:_.default.bar},m.default.createElement(h.RadioGroup,{mode:"button",value:this.state.mode,onChange:this.handleModeChange,size:"small"},m.default.createElement(h.RadioButton,{value:"traffic"},t("SPECIFY_TRAFFIC_DISTRIBUTION")),m.default.createElement(h.RadioButton,{value:"content",disabled:"http"!==this.protocol},t("SPECIFY_REQUEST_PARAMETERS"))),this.protocol&&m.default.createElement(h.Tooltip,{content:t("POLICY_REQUEST_CONTENT_TIP")},m.default.createElement(h.Icon,{className:_.default.tip,name:"question"}))),m.default.createElement("div",{className:_.default.contentWrapper},this.renderContent()))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,u.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(m.default.Component);a.default=E},4678:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=n(r(315)),c=n(r(58)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(26)),p=n(r(74)),m=n(r(158)),h=n(r(0)),v=r(186),g=n(r(1364)),_=n(r(4679));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var E=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleRatioChange=function(e){t.setState({ratio:e},(function(){(0,p.default)(t.oldRoute,"weight",100-e)}))},t.state={ratio:(0,f.default)(t.newRoute,"weight",50)},t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=(0,f.default)(this.oldRoute,"weight"),t=(0,f.default)(this.newRoute,"weight");(0,m.default)(e)&&(0,p.default)(this.oldRoute,"weight",100-this.state.ratio),(0,m.default)(t)&&(0,p.default)(this.newRoute,"weight",this.state.ratio)}},{key:"render",value:function(){var e=this.state.ratio,a=this.props,r=a.formRef,n=(a.formTemplate,(0,c.default)(a,["formRef","formTemplate"])),s=(0,f.default)(this.formTemplate,"spec.template.spec.hosts[0]"),l=(0,f.default)(this.newRoute,"destination.subset"),i=(0,f.default)(this.oldRoute,"destination.subset"),u="".concat(l," ").concat(t("TRAFFIC_LOW")),d="".concat(i," ").concat(t("TRAFFIC_LOW"));return h.default.createElement("div",{className:_.default.wrapper},h.default.createElement("div",{className:_.default.item},h.default.createElement(v.Alert,{type:"info",message:t.html("CANARY_BY_TRAFFIC_DESC",{ratio:e,component:s,newVersion:l})})),h.default.createElement("div",{className:_.default.item},h.default.createElement("div",{className:_.default.title},t("TRAFFIC_DISTRIBUTION")),h.default.createElement(v.Form,(0,o.default)({ref:r,data:this.formTemplate},n),h.default.createElement(v.Form.Item,null,h.default.createElement(g.default,{name:"".concat(this.strategyPath,"[0].route[1].weight"),min:0,max:100,leftContent:u,rightContent:d,onChange:this.handleRatioChange})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"strategyPath",get:function(){var e=(0,f.default)(this.formTemplate,"spec.protocol","http");return"spec.template.spec.".concat(e)}},{key:"oldRoute",get:function(){return(0,f.default)(this.formTemplate,"".concat(this.strategyPath,"[0].route[0]"),{})}},{key:"newRoute",get:function(){return(0,f.default)(this.formTemplate,"".concat(this.strategyPath,"[0].route[1]"),{})}}]),r}(h.default.Component);a.default=E},4679:function(e,t,a){e.exports={wrapper:"nETb4KMOztrWN5hml6q98",title:"_1rwGy_A6FaU6W5jHRrwFlf",item:"_383D6mqvtF_Sw426o7q_GW"}},4680:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(10),r(4),r(316),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(10),r(4),r(316),r(23),r(57),r(17);var o=n(r(315)),c=n(r(58)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(26)),p=n(r(63)),m=n(r(242)),h=n(r(0)),v=r(186),g=r(72),_=n(r(4681)),y=n(r(4683)),E=n(r(4685)),b=n(r(4686));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleCookieChange=function(t){e.setState({cookie:t})},e.handleFormChange=function(t,a){t==="".concat(e.prefix,".match[0].headers.cookie")?(0,p.default)(Object.values(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].headers")?(0,p.default)(Object.keys(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].uri")?(0,p.default)(Object.values(a)[0])&&(0,m.default)(e.formTemplate,t):t==="".concat(e.prefix,".match[0].headers['User-Agent'].regex")&&(0,p.default)(a)&&(0,m.default)(e.formTemplate,"".concat(e.prefix,".match[0].headers['User-Agent']"))},e}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=(e.formTemplate,(0,c.default)(e,["formRef","formTemplate"]));return h.default.createElement("div",{className:b.default.wrapper},h.default.createElement("div",{className:b.default.item},h.default.createElement(v.Alert,{type:"info",message:t("SPECIFY_REQUEST_PARAMETERS_DESC")})),h.default.createElement("div",{className:b.default.item},h.default.createElement("div",{className:b.default.title},t("REQUEST_PARAMETERS")),h.default.createElement(v.Form,(0,o.default)({ref:a,data:this.formTemplate,onChange:this.handleFormChange},r),h.default.createElement(v.Form.Item,{label:t("COOKIE")},h.default.createElement(_.default,{name:"".concat(this.prefix,".match[0].headers.cookie"),onChange:this.handleCookieChange,placeholder:t("KEY_EQ_VALUE")})),h.default.createElement(v.Form.Item,{label:t("HEADER")},h.default.createElement(y.default,{name:"".concat(this.prefix,".match[0].headers")})),h.default.createElement(v.Form.Item,{label:"URL"},h.default.createElement(_.default,{name:"".concat(this.prefix,".match[0].uri"),placeholder:"URL",matchTypes:["prefix","regex"]})),h.default.createElement(v.Form.Item,{label:t("CLIENT_OS")},h.default.createElement(E.default,{name:"".concat(this.prefix,".match[0].headers['User-Agent'].regex"),options:g.GRAY_RELEASE_CANARY_CONTENT})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"prefix",get:function(){var e=(0,f.default)(this.formTemplate,"spec.protocol","http");return"spec.template.spec.".concat(e,"[0]")}}]),r}(h.default.Component);a.default=O},4681:function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(84),r(10),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(84),r(42),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(1)),p=n(r(800)),m=r(186),h=n(r(4682));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,l.default)(r,e);var a=v(r);function r(e){var t;(0,c.default)(this,r),(t=a.call(this,e)).triggerChange=(0,p.default)((function(){var e=t.state,a=e.match,r=e.value,n=t.props.onChange;a&&n((0,o.default)({},a,r||""))}),200),t.handleMatchChange=function(e){t.setState({match:e},(function(){t.triggerChange()}))},t.handleValueChange=function(e,a){t.setState({value:a},(function(){t.triggerChange()}))};var n=Object.keys(e.value)[0]||t.matchTypes[0].value;return t.state={match:n,value:e.value[n]||""},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state,a=e.match,r=e.value;return d.default.createElement("div",{className:h.default.match},d.default.createElement(m.Select,{value:a,options:this.matchTypes,onChange:this.handleMatchChange}),d.default.createElement(m.Input,{value:r,placeholder:this.props.placeholder||t("KEY_EQ_VALUE"),onChange:this.handleValueChange}))}},{key:"matchTypes",get:function(){var e=this.props.matchTypes;return[{label:t("EXACT_MATCH"),value:"exact"},{label:t("PREFIX_MATCH"),value:"prefix"},{label:t("REGEX_MATCH"),value:"regex"}].filter((function(t){var a=t.value;return e.includes(a)}))}}]),r}(d.default.Component);a.default=g,g.propTypes={value:f.default.object,onChange:f.default.func,matchTypes:f.default.array},g.defaultProps={value:{},onChange:function(){},matchTypes:["exact","regex"]}},4682:function(e,t,a){e.exports={match:"_1NxalZ4Q_iF0oawMFUygN8"}},4683:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51));r(12),r(45),r(11),r(6),r(84),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(62),r(7);var d=n(r(0)),f=n(r(1)),p=n(r(800)),m=n(r(241)),h=r(186),v=n(r(4684));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=["cookie","User-Agent"],E=function(e){(0,l.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).triggerChange=(0,p.default)((function(){var e=t.state,a=e.match,r=e.key,n=e.value,c=t.props,s=c.onChange,l=c.value;s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}((0,o.default)({},r,(0,o.default)({},a,n)),(0,m.default)(l,y)))}),200),t.handleMatchChange=function(e){t.setState({match:e},(function(){t.triggerChange()}))},t.handleKeyChange=function(e,a){t.setState({key:a},(function(){t.triggerChange()}))},t.handleValueChange=function(e,a){t.setState({value:a},(function(){t.triggerChange()}))},t.state=function(e){var t=Object.keys(e.value).filter((function(e){return!y.includes(e)}))[0];return{key:t,match:(t?Object.keys(e.value[t])[0]:"exact")||"exact",value:(t?Object.values(e.value[t])[0]:"")||""}}(e),t}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state,a=e.match,r=e.key,n=e.value;return d.default.createElement("div",{className:v.default.match},d.default.createElement(h.Select,{value:a,defaultValue:"exact",options:this.matchTypes,onChange:this.handleMatchChange}),d.default.createElement(h.Input,{value:r,placeholder:t("KEY"),onChange:this.handleKeyChange}),d.default.createElement(h.Input,{value:n,placeholder:t("VALUE"),onChange:this.handleValueChange}))}},{key:"matchTypes",get:function(){return[{label:t("EXACT_MATCH"),value:"exact"},{label:t("REGEX_MATCH"),value:"regex"}]}}]),r}(d.default.Component);a.default=E,E.propTypes={value:f.default.object,onChange:f.default.func},E.defaultProps={value:{},onChange:function(){}}},4684:function(e,t,a){e.exports={match:"_38Cti3g5qY_E84pX1BMFTq"}},4685:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(73),a(48),a(4),a(23),a(24),a(17),a(136),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(73),a(48),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=r(a(1683)),f=r(a(63));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var m=function(e){(0,s.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).getValueFromProps=function(e){return e.value?e.value.slice(3,e.value.length-3).split("|"):[]},e.handleChange=function(t){var a=e.props.onChange;(0,f.default)(t)?a&&a(""):a&&a(".*(".concat(t.join("|"),").*"))},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this.getValueFromProps(this.props);return u.default.createElement(d.default,(0,n.default)({},this.props,{value:e,onChange:this.handleChange}))}}]),a}(u.default.Component);t.default=m},4686:function(e,t,a){e.exports={wrapper:"_1aRgespwFUWU9GqbQKeG92",title:"_3z2kLZ8Z3DiGGoAJcdF4mK",item:"dfPzevqogHOiFt1iKPbzS"}},4687:function(e,t,a){e.exports={wrapper:"-dBWXCBE13eJRQLETuS_r",bar:"_1sECNuIPwCvR2dUOMjhl4R",contentWrapper:"_3b2bEEWVzoUh58GIlURRy6",tip:"_2hEEnwJXIG-QlbIGZ8yWGY"}},4688:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(42),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(58)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(26)),m=n(r(74)),h=n(r(63)),v=r(186),g=n(r(4689)),_=n(r(4691));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var E=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={versions:[]},e.handleVersionChange=function(t){(0,p.default)(e.formTemplate,"spec.principal")===t?((0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[0].weight"),100),(0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[1].weight"),0)):((0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[0].weight"),0),(0,m.default)(e.formTemplate,"".concat(e.strategyPath,"[0].route[1].weight"),100))},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=(0,p.default)(e,"strategy.spec.template.spec.hosts[0]"),a=(0,p.default)(e,"strategy.spec.principal"),r=(0,p.default)(e,"workload.metadata.labels.version"),n=(0,p.default)(e,"workload.spec.replicas"),o=(0,p.default)(e,'strategy.metadata.annotations["servicemesh.kubesphere.io/workloadReplicas"]',0),c=[{route:[{destination:{subset:a,host:t},weight:100},{destination:{subset:r,host:t},weight:0}]}];"tcp"===this.protocol&&c.forEach((function(e){e.match=e.match||[]})),(0,h.default)((0,p.default)(this.formTemplate,"spec.governor"))&&(0,m.default)(this.formTemplate,"spec.governor",a),(0,h.default)((0,p.default)(this.formTemplate,this.strategyPath))&&(0,m.default)(this.formTemplate,this.strategyPath,c),this.setState({versions:[{name:a,replicas:o},{name:r,replicas:n}]})}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=(e.formTemplate,(0,c.default)(e,["formRef","formTemplate"]));return f.default.createElement("div",{className:_.default.wrapper},f.default.createElement("div",{className:_.default.item},f.default.createElement("p",null,t("BLUE_GREEN_STRATEGY_DESC"))),f.default.createElement("div",{className:_.default.item},f.default.createElement("div",{className:_.default.title},t("SELECT_VERSION")),f.default.createElement(v.Form,(0,o.default)({ref:a,data:this.formTemplate},r),f.default.createElement(v.Form.Item,null,f.default.createElement(g.default,{name:"spec.governor",options:this.state.versions,onChange:this.handleVersionChange})))))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,p.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(f.default.Component);a.default=E},4689:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(29),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(29),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(1)),p=n(r(3)),m=r(186),h=n(r(4690));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,l.default)(r,e);var a=v(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleTakeOver=function(t){e.props.onChange(t.currentTarget.dataset.version)},e.handleOffline=function(t){var a=e.props,r=a.onChange,n=a.options,o=t.currentTarget.dataset.version,c=n.find((function(e){return e.name!==o}));c&&r(c.name)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.value,n=a.options;return d.default.createElement("ul",{className:h.default.wrapper},n.map((function(a){return d.default.createElement("li",{key:a.name,className:(0,p.default)((0,o.default)({},h.default.selected,r===a.name))},d.default.createElement(m.Icon,{name:"appcenter",size:40}),d.default.createElement("div",{className:h.default.text},d.default.createElement("p",null,t("GRAYSCALE_VERSION",{version:a.name})),d.default.createElement("p",null,1===a.replicas?t("GRAYSCALE_REPLICA_SI",{count:a.replicas}):t("GRAYSCALE_REPLICA_PL",{count:a.replicas}))),r!==a.name?d.default.createElement(m.Button,{className:h.default.button,type:"control","data-version":a.name,onClick:e.handleTakeOver},t("TAKE_OVER")):d.default.createElement(m.Button,{className:h.default.button,"data-version":a.name,onClick:e.handleOffline},t("TAKE_OFFLINE")))})))}}]),r}(d.default.Component);a.default=g,g.propTypes={value:f.default.string,options:f.default.array,onChange:f.default.func},g.defaultProps={value:"",options:[],onChange:function(){}}},4690:function(e,t,a){e.exports={wrapper:"_3XscnuxSwuZleg8ScGet9M",selected:"pu6IlaTV5o0udnBBkp9Ff",text:"_3EXmNHMRGFVnK-HPq3geRQ",button:"_1Y__cTEragjsYM7DeIP9FS"}},4691:function(e,t,a){e.exports={wrapper:"fPQ8Td9R5A7pYRg5B86NM",title:"_65t8-S2AxDctXS8qxxP-X",item:"hyg1hbrClRD8y-DIg_jOm"}},4692:function(e,a,r){"use strict";r(15);var n=r(20);r(6),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(6),r(42),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(26)),f=n(r(74)),p=n(r(63)),m=r(186);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(r,e);var a=h(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=(0,d.default)(e,"strategy.spec.template.spec.hosts[0]"),a=[{route:[{destination:{subset:(0,d.default)(e,"strategy.spec.principal"),host:t},weight:100}],mirror:{host:t,subset:(0,d.default)(e,"workload.metadata.labels.version")}}];"tcp"===this.protocol&&a.forEach((function(e){e.match=e.match||[]})),(0,p.default)((0,d.default)(this.formTemplate,this.strategyPath))&&(0,f.default)(this.formTemplate,this.strategyPath,a)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return u.default.createElement(m.Form,{ref:a,data:r},u.default.createElement(m.Alert,{type:"info",message:t("MIRROR_POLICY_DESC")}))}},{key:"formTemplate",get:function(){return this.props.formTemplate.strategy}},{key:"protocol",get:function(){return(0,d.default)(this.formTemplate,"spec.protocol","http")}},{key:"strategyPath",get:function(){return"spec.template.spec.".concat(this.protocol)}}]),r}(u.default.Component);a.default=v},4693:function(e,t,a){e.exports={wrapper:"_2dK7FFyZnKdm4m4h3RFFUY",footer:"_1eOm_TZRHzjXGWKYjHLQKX",content:"_2nDIfLTPkKJn_3gV0fCjJk",icon:"_2PXqSpZYeiJuiswouqxw1n",text:"_29dUSJM-WzbeMs4Rz22dHw"}},4694:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(84),r(73),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(73),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(17),r(85),r(7);var o,c,s,l=n(r(315)),i=n(r(58)),u=n(r(31)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(26)),g=n(r(74)),_=n(r(242)),y=n(r(63)),E=n(r(321)),b=n(r(854)),S=n(r(0)),O=n(r(1)),R=n(r(3)),A=r(14),k=r(239),T=r(186),D=n(r(787)),C=n(r(1102)),P=n(r(1364)),N=n(r(1444)),I=n(r(318)),w=r(52),x=r(72),M=n(r(435)),L=n(r(4695)),j=n(r(4697)),U=n(r(4700)),B=n(r(4703));function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var G={exact:"EXACT_MATCH",prefix:"PREFIX_MATCH",regex:"REGEX_MATCH"},H=(0,E.default)(x.GRAY_RELEASE_CANARY_CONTENT,"value"),q=(0,k.inject)("rootStore")(o=(0,k.observer)((s=c=function(e){(0,p.default)(r,e);var a=V(r);function r(e){var n;return(0,d.default)(this,r),(n=a.call(this,e)).updateTipInfo=function(){var e=(0,A.toJS)(n.store.detail),a=e.governor,r=e.newVersion,o=e.oldVersion;a?n.setState({tipType:"info",tipInfo:a===o?t.html("OLD_VERSION_TAKEOVER_DESC",{newVersion:r,oldVersion:o}):t.html("NEW_VERSION_TAKEOVER_DESC",{newVersion:r,oldVersion:o})}):n.setState({tipInfo:""})},n.handlePatch=function(e){var t=(0,A.toJS)(n.store.detail);n.store.patch(t,e).then((function(){n.store.fetchDetail(t).then((function(){var e=(0,A.toJS)(n.store.detail);if("Canary"===e.type&&!e.byContent){var t=(0,v.default)(e,"newRoute.weight",50);n.setState({ratio:t})}n.updateTipInfo()}))}))},n.handleRatioChange=function(e){n.setState({ratio:e})},n.handleConfirmSaveRatio=function(){var e=n.state.ratio;n.handleSaveRatio(e)},n.handleSaveRatio=function(e){var t=(0,A.toJS)(n.store.detail),a=t.oldRoute,r=t.oldVersion,o=t.newRoute,c=t.newVersion,s=t.protocol,l={};(0,g.default)(l,"spec.template.spec.".concat(s,"[0].route"),[F(F({},a),{},{weight:100-e}),F(F({},o),{},{weight:e})]),"tcp"===s&&(0,g.default)(l,"spec.template.spec.".concat(s,"[0].match"),[]),100===e?(0,g.default)(l,"spec.governor",c):0===e?(0,g.default)(l,"spec.governor",r):(0,g.default)(l,"spec.governor",""),n.handlePatch(l)},n.handleResetRatio=function(){var e=(0,A.toJS)(n.store.detail),t=(0,v.default)(e,"newRoute.weight");n.setState({ratio:t})},n.showEditModal=function(){n.setState({showEditModal:!0})},n.hideEditModal=function(){n.setState({showEditModal:!1})},n.updateStrategy=function(e){var t=(0,v.default)(e,"spec.protocol","http"),a="spec.template.spec.".concat(t,"[0]"),r=(0,v.default)(e,"".concat(a,".match[0].headers.cookie"));r&&(0,y.default)(Object.values(r)[0])&&(0,_.default)(e,"".concat(a,".match[0].headers.cookie"));var n=(0,v.default)(e,"".concat(a,".match[0].headers"));n&&Object.keys(n).forEach((function(t){(0,y.default)(t)&&(0,_.default)(e,"".concat(a,".match[0].headers.").concat(t))}));var o=(0,v.default)(e,"".concat(a,".match[0].uri"));o&&(0,y.default)(Object.values(o)[0])&&(0,_.default)(e,"".concat(a,".match[0].uri"));var c=(0,v.default)(e,"".concat(a,".match[0].headers['User-Agent'].regex"));return c&&(0,y.default)(Object.values(c)[0])&&(0,_.default)(e,"".concat(a,".match[0].headers['User-Agent'].regex")),(0,_.default)(e,"spec.governor"),e},n.handleComponentEdit=function(e,t){var a=(0,A.toJS)(n.store.detail),r={};t.includes("grayReleaseStrategy")&&(r.strategy=n.updateStrategy(e.strategy)),t.includes("grayReleaseComponent")&&(r.workload=e.workload),n.store.update(a,r).then((function(){n.store.fetchDetail(a).then((function(){n.hideEditModal();var e=(0,A.toJS)(n.store.detail);if("Canary"===e.type&&!e.byContent){var t=(0,v.default)(e,"newRoute.weight",50);n.setState({ratio:t})}n.updateTipInfo()}))}))},n.handleOffline=function(){var e=(0,A.toJS)(n.store.detail),a=e.type,r=e.cluster,o=e.namespace,c=e.governor,s=e.oldVersion,l=e.oldWorkloadName,i=e.newWorkloadName;if(c){var u=n.props.onDelete,d=c===s?i:l;d&&(n.workloadStore.delete({name:d,cluster:r,namespace:o}),u())}else if("Mirror"!==a)n.setState({tipType:"warning",tipInfo:t("DELETE_GRAYSCALE_RELEASE_TASK_DESC")});else{var f=n.props.onDelete;i&&(n.workloadStore.delete({name:i,cluster:r,namespace:o}),f())}},n.handleTakeover=function(e){var t=(0,A.toJS)(n.store.detail);"Canary"===t.type?t.byContent?n.handlePatch({spec:{governor:"new"===e?t.newVersion:t.oldVersion}}):n.handleSaveRatio("new"===e?100:0):"Bluegreen"===t.type&&n.handlePatch({spec:{governor:"new"===e?t.newVersion:t.oldVersion}})},n.handleRecover=function(){n.handlePatch({spec:{governor:""}})},n.state={tipType:"",tipInfo:"",ratio:50,showEditModal:!1},n.store=new N.default,n.workloadType=(0,v.default)(e.detail,'annotations["servicemesh.kubesphere.io/workloadType"]',"deployments"),n.workloadStore=new I.default(n.workloadType),e.visible&&(n.getData(e.detail),n.getWorkLoadDetail(e.detail)),n}return(0,f.default)(r,[{key:"initWebsocket",value:function(e){var t=this,a=e||{},r=a.cluster,n=a.namespace,o=a.selector,c="api/v1/watch/".concat(r?"klusters/".concat(r,"/"):"","namespaces/").concat(n,"/pods?labelSelector=").concat((0,w.joinSelector)(o));c&&n&&o&&(this.websocket.watch(c),this.getWorkLoadDetail=(0,b.default)(this.getWorkLoadDetail,2e3),this.disposer=(0,A.reaction)((function(){return t.websocket.message}),(function(a){"Pod"===a.object.kind&&"ADDED"!==a.type&&t.getWorkLoadDetail(F(F({},e),{},{silent:!0}))})))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&(this.getData(r),this.getWorkLoadDetail(r))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.name&&t.namespace&&this.store.fetchDetail(t).then((function(){var t=(0,A.toJS)(e.store.detail);if("Canary"===t.type&&!t.byContent){var a=(0,v.default)(t,"newRoute.weight",50);e.setState({ratio:a})}e.initWebsocket(t),e.updateTipInfo()}))}},{key:"getWorkLoadDetail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.silent,a=(0,i.default)(e,["silent"]),r=a.cluster,n=a.namespace,o=a.selector,c=a.hosts,s=a.newVersion,l=a.oldVersion;if(n&&o){var u=(0,w.joinSelector)(o);this.workloadStore.fetchListByK8s({cluster:r,namespace:n,labelSelector:u}),this.store.fetchComponents({cluster:r,namespace:n,service:c,labelSelector:u,newVersion:s,oldVersion:l,silent:t})}}},{key:"renderTitle",value:function(){var e=(0,A.toJS)(this.store.detail),a=x.GRAY_RELEASE_CATEGORIES.find((function(t){return t.type===e.type}))||{};return S.default.createElement("div",{className:B.default.title},S.default.createElement("img",{src:"/assets/default-app.svg",alt:""}),S.default.createElement("div",{className:B.default.text},S.default.createElement("div",{className:"h4"},e.name),S.default.createElement("p",null,t("RELEASE_MODE"),": ",S.default.createElement("strong",null,t("".concat(a.title,"_LOW"))))),this.CanDelete&&S.default.createElement(T.Button,{onClick:this.handleOffline},t("DELETE")))}},{key:"renderComponents",value:function(){var e=(0,A.toJS)(this.store.detail),a=this.store.components.data,r=this.store.isComponentsLoading;if(r)return S.default.createElement("div",null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("VERSIONS")),S.default.createElement("p",null,t("GRAY_COMPONENT_DESC"))),S.default.createElement(T.Loading,{spinning:r,className:B.default.loading}));var n={showEditModal:this.showEditModal,onTakeover:"Mirror"!==e.type?this.handleTakeover:null,namespace:this.props.detail.namespace,cluster:this.props.detail.cluster,workspace:this.props.detail.workspace,maxLength:Math.min(Math.max((0,v.default)(a,"[".concat(e.newVersion,"].pods.length"),0),(0,v.default)(a,"[".concat(e.oldVersion,"].pods.length"),0)),3),jobDetail:e,workloadType:this.workloadType};return S.default.createElement("div",null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("VERSIONS")),S.default.createElement("p",null,t("GRAY_COMPONENT_DESC"))),S.default.createElement(T.Columns,null,S.default.createElement(T.Column,null,S.default.createElement(L.default,(0,l.default)({data:a[e.newVersion],pods:(0,A.toJS)((0,v.default)(a,"[".concat(e.newVersion,"].pods"),[])),type:"new",isGovernor:e.governor===e.newVersion},n))),S.default.createElement(T.Column,null,S.default.createElement(L.default,(0,l.default)({data:a[e.oldVersion],pods:(0,A.toJS)((0,v.default)(a,"[".concat(e.oldVersion,"].pods"),[])),type:"old",isGovernor:e.governor===e.oldVersion},n)))))}},{key:"renderTraffic",value:function(){var e=(0,A.toJS)(this.store.detail),a=this.state.ratio,r=(0,v.default)(e,"newRoute.weight");return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),S.default.createElement("p",null,t("ALLOCATE_TRAFFIC_DESC"))),S.default.createElement(P.default,{min:0,max:100,value:a,leftContent:e.newVersion,rightContent:e.oldVersion,onChange:this.handleRatioChange}),S.default.createElement(C.default,{visible:a!==r,width:400,title:t("ADJUST_TRAFFIC_DISTRIBUTION"),content:t.html("ADJUST_TRAFFIC_DISTRIBUTION_DESC",{newVersion:e.newVersion,oldVersion:e.oldVersion,ratioNew:a,ratioOld:100-a}),cancelText:t("CANCEL"),confirmText:t("OK"),isSubmitting:this.store.isSubmitting,onCancel:this.handleResetRatio,onConfirm:this.handleConfirmSaveRatio}))}},{key:"renderBluegreen",value:function(){var e=(0,A.toJS)(this.store.detail),a=e.governor||(100===e.oldRoute.weight?e.oldVersion:e.newVersion);return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),S.default.createElement("p",null,t("BLUE_GREEN_TRAFFIC_DISTRI_DESC"))),S.default.createElement("div",{className:B.default.barWrapper},S.default.createElement("div",{className:B.default.bar},t("VERSION_TRAFFIC_PERCENT",{version:a,percent:"100"}))))}},{key:"renderMirror",value:function(){var e=(0,A.toJS)(this.store.detail),a=e.governor||(100===e.oldRoute.weight?e.oldVersion:e.newVersion);return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("TRAFFIC_DISTRIBUTION")),S.default.createElement("p",null,t("TRAFFIC_MIRRORING_TRAFFIC_DISTRI_DESC"))),S.default.createElement("div",{className:B.default.mirror},S.default.createElement("div",{className:B.default.barWrapper},S.default.createElement("div",{className:(0,R.default)(B.default.bar,(0,u.default)({},B.default.mirrorBar,a!==e.newVersion))},t("VERSION_TRAFFIC_PERCENT",{version:e.newVersion,percent:"100"}))),S.default.createElement("div",{className:(0,R.default)(B.default.mirrorIcon,(0,u.default)({},B.default.revertMirrorIcon,a===e.oldVersion))},S.default.createElement("img",{src:"/assets/mirror.svg",alt:""})),S.default.createElement("div",{className:B.default.barWrapper},S.default.createElement("div",{className:(0,R.default)(B.default.bar,(0,u.default)({},B.default.mirrorBar,a!==e.oldVersion))},t("VERSION_TRAFFIC_PERCENT",{version:e.oldVersion,percent:"100"})))))}},{key:"renderContentMatch",value:function(){var e=(0,A.toJS)(this.store.detail),a=this.store.components.data,r=this.store.isComponentsLoading;if(r)return S.default.createElement("div",null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("REQUEST_PARAMETERS")),S.default.createElement("p",null,t("SPECIFY_REQUEST_PARAMETERS_DESC"))),S.default.createElement(T.Loading,{spinning:r,className:B.default.loading}));var n=(0,v.default)(e,"newRoute.match[0]"),o=a[e.newVersion]||{};if(!n)return null;var c=(0,v.default)(n,"uri",{}),s=(0,v.default)(n,"headers",{}),l=Object.keys(c)[0]||"",i=c[l]||"-",u=s.cookie||{},d=Object.keys(u)[0]||"",f=u[d]||"-",p=s["User-Agent"]||{},m=p.regex&&p.regex.slice(3,p.regex.length-3).split("|").map((function(e){return H[e]?H[e].label:e})).join(", ")||"-",h=Object.keys(s).find((function(e){return!["cookie","User-Agent"].includes(e)})),g=s[h]||{},_=Object.keys(g)[0]||"",y=g[_]||"-";return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:B.default.sectionTitle},S.default.createElement("div",null,t("REQUEST_PARAMETERS")),S.default.createElement("p",null,t("SPECIFY_REQUEST_PARAMETERS_DESC"))),S.default.createElement("div",{className:B.default.matchWrapper},e.governor&&S.default.createElement("div",{className:B.default.governor},S.default.createElement("div",null,S.default.createElement("div",null,S.default.createElement(T.Icon,{name:"appcenter",size:40})),S.default.createElement("div",null,t.html("SERVICE_VERSION_RECEIVE_ALL_TRAFFIC",{version:e.governor})),S.default.createElement("div",null,S.default.createElement(T.Button,{onClick:this.handleRecover},t("RESTORE"))))),S.default.createElement(T.Columns,null,S.default.createElement(T.Column,null,S.default.createElement("ul",null,S.default.createElement("li",null,S.default.createElement(T.Icon,{name:"earth",size:24}),S.default.createElement("strong",null,d?t("COOKIE_".concat(G[d])):t("COOKIE")),f),S.default.createElement("li",null,S.default.createElement(T.Icon,{name:"image",size:24}),S.default.createElement("strong",null,t("OS")),m),S.default.createElement("li",null,S.default.createElement(T.Icon,{name:"pen",size:24}),S.default.createElement("strong",null,_?t("HEADER_".concat(G[_])):t("HEADER")),h?"".concat(h,": ").concat(y):""),S.default.createElement("li",null,S.default.createElement(T.Icon,{name:"ip",size:24}),S.default.createElement("strong",null,l?t("URL_".concat(G[l])):t("URL")),i))),S.default.createElement(T.Column,{className:"is-narrow"},S.default.createElement("div",{className:B.default.matchArrow},S.default.createElement(T.Icon,{name:"update",color:{primary:"#329dce"},size:24}))),S.default.createElement(T.Column,{className:"is-narrow"},S.default.createElement("div",{className:B.default.matchVersion},S.default.createElement("div",null,S.default.createElement("div",null,S.default.createElement(T.Icon,{name:"appcenter",size:40})),S.default.createElement("div",null,S.default.createElement("span",{className:"ks-tag"},e.newVersion)),S.default.createElement("div",null,S.default.createElement("strong",null,e.hosts)),S.default.createElement("p",null,t("REPLICA_COUNT"),": ",S.default.createElement("strong",null,o.available),"/",o.desire)))))))}},{key:"renderPolicy",value:function(){var e=(0,A.toJS)(this.store.detail);return"Canary"===e.type?S.default.createElement("div",{style:{marginTop:20}},e.byContent?this.renderContentMatch():this.renderTraffic()):"Bluegreen"===e.type?S.default.createElement("div",{style:{marginTop:20}},this.renderBluegreen()):"Mirror"===e.type?S.default.createElement("div",{style:{marginTop:20}},this.renderMirror()):null}},{key:"renderMonitor",value:function(){var e=(0,A.toJS)(this.store.detail);return S.default.createElement(j.default,{detail:e,store:this.store})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.state,o=n.showEditModal,c=n.tipInfo,s=n.tipType,l=(0,A.toJS)(this.store.detail);return S.default.createElement(D.default,{className:B.default.modal,bodyClassName:B.default.body,headerClassName:B.default.header,title:t("TASK_STATUS"),cancelText:t("CLOSE"),onCancel:r,visible:a,fullScreen:!0},c&&S.default.createElement(T.Alert,{className:"margin-b8",type:s,message:c}),this.renderTitle(),S.default.createElement("div",{className:B.default.wrapper},this.renderComponents(),this.renderPolicy()),S.default.createElement("div",{className:B.default.monitor},this.renderMonitor()),S.default.createElement(U.default,{visible:o,module:"grayreleases",formData:this.formData,cluster:l.cluster,onOk:this.handleComponentEdit,onCancel:this.hideEditModal,isSubmitting:this.store.isSubmitting}))}},{key:"websocket",get:function(){return this.props.rootStore.websocket}},{key:"formData",get:function(){var e=(0,A.toJS)(this.store.detail),t="".concat(e.hosts,"-").concat(e.newVersion),a=(0,A.toJS)(this.workloadStore.list.data).find((function(e){return e.name===t}))||{},r=M.default[this.workloadType]({namespace:e.namespace}),n={strategy:(0,A.toJS)(e._originData),workload:{apiVersion:r.apiVersion,kind:r.kind,metadata:{name:t,namespace:a.namespace,labels:a.labels,annotations:a.annotations},spec:a.spec}};return(0,w.mergeLabels)(n.workload,{version:e.newVersion}),n}},{key:"CanDelete",get:function(){var e=this.store.detail,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.hasPermission({cluster:t,workspace:a,project:r,module:"grayscale-release",action:"delete"})}}]),r}(S.default.Component),c.propTypes={visible:O.default.bool,detail:O.default.object,onCancel:O.default.func,onDelete:O.default.func},c.defaultProps={visible:!1,detail:{},onCancel:function(){},onDelete:function(){}},o=s))||o)||o;a.default=q},4695:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(84),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(17),r(7);var o=n(r(31)),c=n(r(96)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(1)),m=n(r(3)),h=r(433),v=n(r(837)),g=n(r(26)),_=n(r(63)),y=n(r(194)),E=r(14),b=r(186),S=n(r(989)),O=n(r(4696)),R=n(r(1907));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var D={cpu:"pod_cpu_usage",memory:"pod_memory_usage_wo_cache"},C=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleMoreMenuClick=function(e,a){switch(a){case"edit":t.props.showEditModal();break;case"offline":t.props.onOffline(t.props.type);break;case"takeover":t.props.onTakeover(t.props.type)}},t.state={pods:e.pods||[]},t.monitorStore=new S.default,t.getData(e.pods),t}return(0,l.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.pods;(0,v.default)(t,e.pods)||this.getData(t)}},{key:"getData",value:function(e){var t=this;(0,_.default)(e)||this.monitorStore.fetchMetrics({cluster:this.props.cluster,namespace:this.props.namespace,resources:e.map((function(e){return e.name})),metrics:Object.values(D),last:!0}).then((function(){var a=(0,E.toJS)(t.monitorStore.data);t.setState({pods:e.map((function(e){var t={};return Object.entries(D).forEach((function(r){var n=(0,c.default)(r,2),o=n[0],s=n[1],l=(0,g.default)(a,"".concat(s,".data.result"))||[];t[o]=l.find((function(t){return(0,g.default)(t,"metric.pod")===e.name}))})),k(k({},e),{},{metrics:t})}))})}))}},{key:"renderMoreMenu",value:function(){var e=this.props,a=e.type,r=e.isGovernor,n=e.onTakeover;return f.default.createElement(b.Menu,{onClick:this.handleMoreMenuClick},"new"===a&&f.default.createElement(b.Menu.MenuItem,{key:"edit"},f.default.createElement(b.Icon,{name:"update",type:"light"})," ",t("EDIT")),!r&&(0,y.default)(n)&&f.default.createElement(b.Menu.MenuItem,{key:"takeover"},f.default.createElement(b.Icon,{name:"linechart",type:"light"})," ",t("TAKE_OVER")))}},{key:"render",value:function(){var e=this,a=this.props,r=a.data,n=a.type,o=a.isGovernor,c=a.onTakeover,s=a.jobDetail,l=a.maxLength,i=a.workloadType,u=this.state.pods,d="new"!==n&&(o||!(0,y.default)(c)),p={minHeight:40*l+4*(l-1)},v=["Bluegreen","Mirror"].includes(s.type)&&!o;return f.default.createElement("div",{className:R.default.wrapper},f.default.createElement("div",{className:R.default.header},f.default.createElement(b.Icon,{name:"appcenter",size:40}),f.default.createElement("div",{className:R.default.title},f.default.createElement("div",{className:"h6"},f.default.createElement(h.Link,{to:"".concat(this.prefix,"/").concat(i,"/").concat(r.name,"-").concat(r.version)},r.name),"",f.default.createElement("span",{className:(0,m.default)("ks-tag",{"ks-tag-disable":v})},r.version),v&&f.default.createElement(b.Tooltip,{content:"Mirror"===s.type?t("MIRRORED_TRAFFIC_TIP"):t("OFFLINE_TIP")},f.default.createElement("span",{className:"ks-tag ks-tag-disable"},"Mirror"===s.type?t("MIRRORED_TRAFFIC"):t("OFFLINE")))),f.default.createElement("p",null,t("REPLICA_COUNT"),": ",f.default.createElement("strong",null,r.available),"/",r.desire)),!d&&f.default.createElement("div",{className:R.default.right},f.default.createElement(b.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},f.default.createElement(b.Button,{icon:"more",type:"flat"})))),f.default.createElement("ul",{className:R.default.pods,style:p},u.map((function(t){return f.default.createElement(O.default,{data:t,key:t.uid,prefix:e.prefix})}))))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),r}(f.default.Component);a.default=C,C.propTypes={namespace:p.default.string,data:p.default.object,isGovernor:p.default.bool,showEditModal:p.default.func,onTakeover:p.default.func},C.defaultProps={namespace:"",data:{},isGovernor:!0,maxLength:0,jobDetail:{},showEditModal:function(){}}},4696:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(36)),o=r(a(37)),c=r(a(55)),s=r(a(56)),l=r(a(51)),i=r(a(0)),u=a(433),d=r(a(26)),f=a(186),p=r(a(838)),m=a(794),h=r(a(1907));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(a,e);var t=v(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleLinkClick=function(){localStorage.setItem("pod-detail-referrer","".concat(e.props.prefix,"/pods"))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.prefix,r=t.podStatus.type,n="".concat(a,"/pods/").concat(t.name);return i.default.createElement("li",null,i.default.createElement("div",{className:h.default.icon},i.default.createElement(f.Icon,{name:"pod",size:24}),i.default.createElement(p.default,{type:r.toLowerCase(),className:h.default.status,flicker:!0})),i.default.createElement(u.Link,{to:n},i.default.createElement("span",{onClick:this.handleLinkClick},t.name)),i.default.createElement("div",{className:h.default.metric},i.default.createElement(f.Icon,{name:"memory",size:20}),i.default.createElement("div",null,(0,m.getSuitableValue)((0,d.default)(t,"metrics.memory.value[1]"),"memory"))),i.default.createElement("div",{className:h.default.metric},i.default.createElement(f.Icon,{name:"cpu",size:20}),i.default.createElement("div",null,(0,m.getSuitableValue)((0,d.default)(t,"metrics.cpu.value[1]"),"cpu"))))}}]),a}(i.default.Component);t.default=g},4697:function(e,a,r){"use strict";r(15);var n=r(20);r(29),r(18),r(4),r(23),r(17),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(29),r(18),r(42),r(4),r(436),r(23),r(57),r(17),r(109);var o=n(r(315)),c=n(r(31)),s=n(r(96)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(837)),h=n(r(26)),v=n(r(1)),g=n(r(3)),_=r(186),y=r(474),E=n(r(4698)),b=n(r(4699)),S=n(r(1445));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=function(e){(0,u.default)(r,e);var a=O(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){var a=e.currentTarget.dataset.type;t.setState({selectedType:a})},t.state={newMetrics:{},oldMetrics:{},selectedType:"traffic-in"},t.getData(),t}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,m.default)(this.props.detail,e.detail)||this.getData(this.props)}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.getData()}),1e4)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(e){var t=this,a=(e||this.props).detail;a&&a.namespace&&this.store.fetchMetrics(a,{duration:1800}).then((function(e){var a=(0,s.default)(e,2),r=a[0],n=a[1];t.setState({newMetrics:r,oldMetrics:n})}))}},{key:"render",value:function(){var e=this,t=this.state.selectedType,a="tcp"===this.props.detail.protocol?this.tcpMetrics:this.metrics,r=a.find((function(e){return e.type===t}));return p.default.createElement(_.Columns,null,p.default.createElement(_.Column,{className:"is-narrow"},p.default.createElement("ul",{className:S.default.leftPane},a.map((function(a){return p.default.createElement("li",{key:a.type,className:(0,g.default)((0,c.default)({},S.default.selected,a.type===t)),"data-type":a.type,onClick:e.handleTypeChange},p.default.createElement(E.default,(0,o.default)({},a,{whiteMode:a.type===t})))})))),p.default.createElement(_.Column,null,r&&p.default.createElement(b.default,r)))}},{key:"store",get:function(){return this.props.store}},{key:"metrics",get:function(){var e=this.props.detail;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,h.default)(r,"request_count[0].datapoints",[]),(0,h.default)(n,"request_count[0].datapoints",[])],c=[(0,h.default)(r,"request_error_count[0].datapoints",[]),(0,h.default)(n,"request_error_count[0].datapoints",[])],l=[o[0].map((function(e,t){return(0,y.getSuccessRate)(e,c[0][t])})),o[1].map((function(e,t){return(0,y.getSuccessRate)(e,c[1][t])}))],i=[(0,h.default)(r,"request_duration_millis[0].datapoints",[]).map((function(e){var t=(0,s.default)(e,2),a=t[0],r=t[1];return[a,parseFloat(r)/1e3]})),(0,h.default)(n,"request_duration_millis[0].datapoints",[]).map((function(e){var t=(0,s.default)(e,2),a=t[0],r=t[1];return[a,parseFloat(r)/1e3]}))];return[{type:"traffic-in",title:t("TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"RPS",tip:t("TRAFFIC_IN_LAST_FIVE_MINUTES")},{type:"request_success_rate",title:t("SUCCESSFUL_REQUEST_RATE"),legendData:[e.newVersion,e.oldVersion],data:l,unit:"%"},{type:"request_duration",title:t("REQUEST_LATENCY"),legendData:[e.newVersion,e.oldVersion],data:i,unit:"ms"}]}},{key:"tcpMetrics",get:function(){var e=this.props.detail;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,h.default)(r,"tcp_received[0].datapoints",[]),(0,h.default)(n,"tcp_received[0].datapoints",[])],c=[(0,h.default)(r,"tcp_sent[0].datapoints",[]),(0,h.default)(n,"tcp_sent[0].datapoints",[])];return[{type:"traffic-in",title:t("TCP_INBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o,unit:"B/s",icon:"next"},{type:"traffic-out",title:t("TCP_OUTBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:c,unit:"B/s",icon:"previous"}]}}]),r}(p.default.Component);a.default=R,R.propTypes={detail:v.default.object,store:v.default.object}},4698:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(27),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(27),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(1)),f=n(r(26)),p=r(186),m=r(798),h=r(794),v=n(r(1445));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).getSeriesData=function(){var t=e.props,a=t.data,r=t.legendData,n=t.whiteMode,o=a[0]?(0,f.default)(a[0],"[".concat(a[0].length-1,"].[1]"),NaN):NaN,c=a[1]?(0,f.default)(a[1],"[".concat(a[1].length-1,"].[1]"),NaN):NaN;return[{name:r[0],itemStyle:{fill:n?"#ffffff":"#329dce"},value:Number(o)},{name:r[1],itemStyle:{fill:n?"#6fbadc":"#c7deef"},value:Number(c)}]},e}return(0,c.default)(r,[{key:"renderTip",value:function(){var e=this.props,t=e.tip,a=e.whiteMode;return u.default.createElement(p.Tooltip,{content:t},u.default.createElement(p.Icon,{name:"information",className:v.default.tip,type:a?"light":"dark"}))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.tip,n=e.data,o=e.unit,c=n[0]?(0,f.default)(n[0],"[".concat(n[0].length-1,"].[1]"),NaN):NaN,s=n[1]?(0,f.default)(n[1],"[".concat(n[1].length-1,"].[1]"),NaN):NaN;return u.default.createElement("div",{className:v.default.chart},u.default.createElement("div",{className:v.default.circle},u.default.createElement(m.PieChart,{width:40,height:40,data:this.getSeriesData()})),u.default.createElement("div",{className:v.default.chartDetail},u.default.createElement("div",{className:v.default.title},a," ",r&&this.renderTip()),u.default.createElement("div",null,u.default.createElement("span",{className:v.default.tag},isNaN(c)?t("NO_DATA_SCAP"):"".concat((0,h.getSuitableValue)(c,o)," ").concat(o)),u.default.createElement("span",{className:v.default.tag},isNaN(s)?t("NO_DATA_SCAP"):"".concat((0,h.getSuitableValue)(s,o)," ").concat(o)))))}}]),r}(u.default.Component);a.default=_,_.propTypes={title:d.default.string,unit:d.default.string,data:d.default.array,legendData:d.default.array,whiteMode:d.default.bool},_.defaultProps={title:"",data:[],legendData:[],whiteMode:!1}},4699:function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(18),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(18),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(31)),o=r(a(58)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=r(a(1)),p=a(794),m=a(798),h=r(a(1445));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.legendData,r=(0,o.default)(e,["data","legendData"]),c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({width:"100%",legend:a,data:t.map((function(e){return{values:e}})),areaColors:["#329dce","#c7deef"]},r);return d.default.createElement("div",{className:h.default.chart},d.default.createElement(m.SimpleArea,(0,p.getAreaChartOps)(c)))}}]),a}(d.default.Component);t.default=_,_.propTypes={title:f.default.string,unit:f.default.string,data:f.default.array,legendData:f.default.array},_.defaultProps={title:"",data:[],legendData:[]}},4700:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),o=r(a(58)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=r(a(1)),p=r(a(1123)),m=r(a(4701));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,o.default)(e,["module"]);return d.default.createElement(p.default,(0,n.default)({title:"EDIT_GRAYSCALE_RELEASE_TASK",icon:"components",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default}}]),a}(d.default.Component);t.default=v,v.propTypes={module:f.default.string},v.defaultProps={module:"grayreleases"}},4701:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(4702)),o=r(a(1905)),c=[{icon:"appcenter",name:"grayReleaseComponent",title:"NEW_VERSION_SETTINGS",component:n.default},{icon:"appcenter",name:"grayReleaseStrategy",title:"STRATEGY_SETTINGS",component:o.default}];t.default=c},4702:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(26));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,s.default)(r,e);var a=d(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=a.call.apply(a,[this].concat(c))).versionValidator=function(a,r,n){if(!r)return n();if(r===(0,u.default)(e.formTemplate,'metadata.labels["version"]',""))return n();var o=(0,u.default)(e.formTemplate,"metadata.labels.app",""),c="".concat(o,"-").concat(r);e.workloadStore.checkName({name:c,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("VERSION_EXISTS"),field:a.field});n()}))},e}return(0,c.default)(r,[{key:"templatePrefix",get:function(){return"workload"}},{key:"isEdit",get:function(){return!0}}]),r}(n(r(1903)).default);a.default=f},4703:function(e,t,a){e.exports={modal:"_1YO6qAa4o5CIAXihai2gp7",header:"_2vVO-uv8lJHWqrVv11v0KR",body:"_2vJZEtSz_f9o_ieM2tvSDQ",title:"_31-lgqfez3yBbVlFo_tUcz",text:"_89vaF9RK4xiC6CTS8AMv7",wrapper:"_3rzjtTdrtDtIU3oXBYyX6A",loading:"lwBciOx7X_Aiezt5FYLpb",sectionTitle:"_3k9GdhtEu1-2BO5qFF2Mb0",matchWrapper:"_1pNGhihrUvVdQ5sBH7TTmb",matchArrow:"_3ruGexdrbaeOPbmO9YdgNM",matchVersion:"Q1EqkLXYIAMTFlJDYgV6b",governor:"_2MPS2QWyT6zjz7d2WTFE8Y",barWrapper:"_2NHJds2bdFgZ_CD9y4Ysvd",bar:"_1V8kzO-zzW71tEbOPLFeU3",mirrorBar:"pK-EmPX1F-LcM21gsSMZP",mirror:"_2r0HBgs_ICewriI-7OZBi8",mirrorIcon:"_25PLS8q5MC3mcxhp2UWRCA",revertMirrorIcon:"LxkxCr-ExgyPESSixjvSr",monitor:"_1DCVu0WUnzdaAxKRZ3yPPS"}},4704:function(e,a,r){"use strict";r(15);var n=r(20);r(29),r(18),r(16),r(27),r(190),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(315)),c=n(r(96)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51));r(45),r(29),r(18),r(42),r(16),r(27),r(190),r(4),r(23),r(57),r(17);var f=n(r(26)),p=n(r(0)),m=n(r(837)),h=r(186),v=r(474),g=r(72),_=n(r(4705)),y=n(r(1446));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}function b(e){var t,a=Number(e);return isNaN(a)||(t=a,Number(t)===t&&t%1==0)?a:a.toFixed(2)}var S=function(e){(0,i.default)(r,e);var a=E(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleClick=function(){var e=t.props,a=e.data;(0,e.onClick)(a)},t.state={newMetrics:{},oldMetrics:{},newHealth:{},oldHealth:{}},t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"componentDidUpdate",value:function(e){(0,m.default)(this.props.data,e.data)||this.getData(this.props)}},{key:"getData",value:function(e){var t=this,a=(e||this.props).data;this.store.fetchMetrics(a).then((function(e){var a=(0,c.default)(e,2),r=a[0],n=a[1];t.unmount||t.setState({newMetrics:r,oldMetrics:n})})),this.store.fetchHealth(a).then((function(e){var a=(0,c.default)(e,2),r=a[0],n=a[1];t.unmount||t.setState({newHealth:r,oldHealth:n})}))}},{key:"render",value:function(){var e=this.props.data,a=this.state,r=a.newHealth,n=a.oldHealth,c=g.GRAY_RELEASE_CATEGORIES.find((function(t){return t.type===e.type}))||{},s="tcp"===e.protocol?this.tcpMetrics:this.metrics;return p.default.createElement("div",{className:y.default.item,onClick:this.handleClick},p.default.createElement("div",{className:y.default.left},p.default.createElement("div",{className:y.default.icon},p.default.createElement("img",{src:(0,f.default)(e,'annotations["app.kubernetes.io/icon"]',"/assets/default-app.svg"),alt:""}),p.default.createElement("div",{className:y.default.iconExtra},p.default.createElement(h.Icon,{name:c.icon,size:24,type:"light"}))),p.default.createElement("div",{className:y.default.title},p.default.createElement("div",{className:"h5"},e.name),p.default.createElement("p",null,p.default.createElement("span",null,t("APP")),":"," ",(0,f.default)(e,'labels["app.kubernetes.io/name"]')),p.default.createElement("p",null,p.default.createElement("span",null,t("RELEASE_MODE")),": ",t("".concat(c.title,"_LOW"))),p.default.createElement("p",null,p.default.createElement("span",null,t("SERVICE")),": ",e.hosts))),p.default.createElement("div",{className:y.default.right},p.default.createElement("div",{className:y.default.versions},p.default.createElement("p",null,p.default.createElement("strong",null,t("VERSIONS"))),p.default.createElement("p",{className:y.default.tag},e.newVersion,"",p.default.createElement("span",null,"(",t("REPLICA_COUNT_LOW"),":"," ",(0,f.default)(r,"workloadStatus.available")||(0,f.default)(r,"workloadStatus.availableReplicas"),"/",(0,f.default)(r,"workloadStatus.replicas")||(0,f.default)(r,"workloadStatus.desiredReplicas"),")")),p.default.createElement("p",{className:y.default.tag},e.oldVersion,"",p.default.createElement("span",null,"(",t("REPLICA_COUNT_LOW"),":"," ",(0,f.default)(n,"workloadStatus.available")||(0,f.default)(n,"workloadStatus.availableReplicas"),"/",(0,f.default)(n,"workloadStatus.replicas")||(0,f.default)(n,"workloadStatus.desiredReplicas"),")"))),s.map((function(e){return p.default.createElement(_.default,(0,o.default)({key:e.type},e))}))))}},{key:"store",get:function(){return this.props.store}},{key:"metrics",get:function(){var e=this.props.data;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,v.getMetricData)((0,f.default)(r,"request_count[0].datapoints",[]),0),(0,v.getMetricData)((0,f.default)(n,"request_count[0].datapoints",[]),0)],c=[(0,v.getMetricData)((0,f.default)(r,"request_error_count[0].datapoints",[]),0),(0,v.getMetricData)((0,f.default)(n,"request_error_count[0].datapoints",[]),0)],s=[o[0]>0?Number((100*(o[0]-c[0])/o[0]).toFixed(2)):NaN,o[1]>0?Number((100*(o[1]-c[1])/o[1]).toFixed(2)):NaN],l=[(0,v.getMetricData)((0,f.default)(r,"request_duration_millis[0].datapoints",[]),NaN),(0,v.getMetricData)((0,f.default)(n,"request_duration_millis[0].datapoints",[]),NaN)];return[{type:"traffic",name:t("TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o.map(b),unit:"RPS",icon:"changing-over",tip:t("TRAFFIC_IN_LAST_FIVE_MINUTES")},{type:"request_success_rate",name:t("SUCCESSFUL_REQUEST_RATE"),legendData:[e.newVersion,e.oldVersion],data:s.map(b),icon:"check",unit:"%"},{type:"request_duration",name:t("REQUEST_LATENCY"),legendData:[e.newVersion,e.oldVersion],data:l.map(b),icon:"timed-task",unit:"ms"}]}},{key:"tcpMetrics",get:function(){var e=this.props.data;if(!e)return[];var a=this.state,r=a.newMetrics,n=a.oldMetrics,o=[(0,v.getMetricData)((0,f.default)(r,"tcp_received[0].datapoints",[]),0),(0,v.getMetricData)((0,f.default)(n,"tcp_received[0].datapoints",[]),0)],c=[(0,v.getMetricData)((0,f.default)(r,"tcp_sent[0].datapoints",[]),0),(0,v.getMetricData)((0,f.default)(n,"tcp_sent[0].datapoints",[]),0)];return[{type:"traffic-in",name:t("TCP_INBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:o.map(b),unit:"B/s",icon:"next"},{type:"traffic-out",name:t("TCP_OUTBOUND_TRAFFIC"),legendData:[e.newVersion,e.oldVersion],data:c.map(b),unit:"B/s",icon:"previous"}]}}]),r}(p.default.Component);a.default=S},4705:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(1)),f=r(186),p=r(798),m=n(r(1446));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var v=function(e){(0,s.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).getSeriesData=function(){var t=e.props,a=t.data,r=t.legendData;return[{name:r[0],itemStyle:{fill:"#329dce"},value:a[0]||0},{name:r[1],itemStyle:{fill:"#c7deef"},value:a[1]||0}]},e}return(0,c.default)(r,[{key:"renderTip",value:function(){var e=this.props.tip;return u.default.createElement(f.Tooltip,{content:e},u.default.createElement(f.Icon,{name:"information",className:m.default.tip}))}},{key:"render",value:function(){var e=this.props,a=e.name,r=e.icon,n=e.data,o=e.unit,c=e.tip;return u.default.createElement("div",{className:m.default.chart},u.default.createElement("div",{className:m.default.circle},u.default.createElement(f.Icon,{name:r,size:20}),u.default.createElement(p.PieChart,{width:60,height:60,data:this.getSeriesData()})),u.default.createElement("div",{className:m.default.chartDetail},u.default.createElement("div",null,u.default.createElement("strong",null,a)," ",c&&this.renderTip()),u.default.createElement("p",{className:m.default.tag},isNaN(n[0])?t("NO_DATA_SCAP"):"".concat(n[0]," ").concat(o)),u.default.createElement("p",{className:m.default.tag},isNaN(n[1])?t("NO_DATA_SCAP"):"".concat(n[1]," ").concat(o))))}}]),r}(u.default.Component);a.default=v,v.propTypes={name:d.default.string,tip:d.default.string,unit:d.default.string,data:d.default.array,legendData:d.default.array},v.defaultProps={name:"",data:[],legendData:[]}},4706:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1235)),o=r(a(1217)),c=r(a(1411)),s=r(a(1222)),l=r(a(1223)),i=r(a(1225)),u=r(a(1229)),d=r(a(1230)),f=r(a(1226)),p=r(a(1228)),m=r(a(1231)),h=r(a(1418)),v=r(a(1413)),g=r(a(1414)),_=r(a(1415)),y=r(a(4707)),E=r(a(4712)),b=r(a(4718)),S=r(a(4725)),O=r(a(4729)),R=r(a(4733)),A=r(a(4778)),k=r(a(4786)),T=r(a(4877)),D=r(a(4883)),C=r(a(4885)),P=r(a(1846)),N=r(a(4902)),I=r(a(4915));t.default=function(e){return[{path:"".concat(e,"/deployments/:name"),component:o.default},{path:"".concat(e,"/statefulsets/:name"),component:c.default},{path:"".concat(e,"/daemonsets/:name"),component:s.default},{path:"".concat(e,"/jobs/:name"),component:l.default},{path:"".concat(e,"/cronjobs/:name"),component:i.default},{path:"".concat(e,"/pods/:podName/containers/:containerName"),component:d.default},{path:"".concat(e,"/pods/:podName"),component:u.default},{path:"".concat(e,"/services/:name"),component:f.default},{path:"".concat(e,"/ingresses/:name"),component:p.default},{path:"".concat(e,"/volumes/:name"),component:m.default},{path:"".concat(e,"/volume-snapshots/:name"),component:h.default},{path:"".concat(e,"/secrets/:name"),component:v.default},{path:"".concat(e,"/configmaps/:name"),component:g.default},{path:"".concat(e,"/serviceAccounts/:name"),component:_.default},{path:"".concat(e,"/microservices/:name"),component:y.default},{path:"".concat(e,"/microservice-instances/:podName/:instanceId"),component:E.default},{path:"".concat(e,"/configurations/:name"),component:b.default},{path:"".concat(e,"/microservicegateways/:name"),component:S.default},{path:"".concat(e,"/servicerouting/:name"),component:O.default},{path:"".concat(e,"/composing/:name"),component:R.default},{path:"".concat(e,"/applications/template/:id"),component:A.default},{path:"".concat(e,"/applications/database/:id"),component:k.default},{path:"".concat(e,"/applications/others/:name"),component:T.default},{path:"".concat(e,"/edgeappsets/:name"),component:I.default},{path:"".concat(e,"/roles/:name"),component:D.default},{path:"".concat(e,"/s2ibuilders/:name"),component:C.default},{path:"".concat(e,"/custom-scaling/:name"),component:N.default},{path:"".concat(e,"/gateways/:gatewayName"),component:n.default},{path:["".concat(e,"/alert-rules/builtin/:name"),"".concat(e,"/alert-rules/:name")],component:P.default}]}},4707:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(63)),m=r(239),h=r(186),v=n(r(805)),g=r(52),_=r(791),y=n(r(1441)),E=n(r(4708));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var S=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,o=e.store.detail,c=void 0===o?{}:o;return(0,p.default)(c)?null:[{name:t("CLUSTER"),value:(0,g.showNameAndAlias)(r,"cluster")},{name:t("PROJECT"),value:(0,g.showNameAndAlias)(n,"project")}]},e.handleLine=function(){var t=e.store.detail,a=t.status,r=t.name,n=t.cluster,o=t.namespace;"Running"===a?e.store.offLine({name:r,cluster:n,namespace:o}).then(e.fetchData):e.store.onLine({name:r,cluster:n,namespace:o}).then(e.fetchData)},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(h.Loading,{className:"ks-page-loading"});var a={icon:this.icon,module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),breadcrumbs:[{label:t("MICROSERVICE_PL"),url:this.listUrl}]};return f.default.createElement(v.default,(0,c.default)({stores:e},a,{routes:(0,E.default)(this.props.match.path)}))}},{key:"module",get:function(){return"microservices"}},{key:"icon",get:function(){return"java"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(f.default.Component))||o)||o)||o;a.default=S},4708:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(814)),c=r(a(4709)),s=r(a(4710));t.default=function(e){return[{path:"".concat(e,"/instances"),title:"INSTANCE_PL",component:s.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/instances"),exact:!0})]}},4709:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(98),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(98),a(4),a(23),a(57),a(17);var n,o=r(a(96)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=a(14),p=r(a(63)),m=a(239),h=r(a(789)),v=r(a(1045));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(0,m.inject)("detailStore")(n=(0,m.observer)(n=function(e){(0,l.default)(a,e);var t=g(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"render",value:function(){var e=(0,f.toJS)(this.store.detail).metadata;return(0,p.default)(e)?null:d.default.createElement(h.default,null,d.default.createElement("div",null,Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return d.default.createElement(v.default,{key:a,name:a,value:r})}))))}},{key:"store",get:function(){return this.props.detailStore}}]),a}(d.default.Component))||n)||n;t.default=_},4710:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(43)),s=n(r(31));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),g=n(r(63)),_=n(r(789)),y=n(r(1025)),E=n(r(4711)),b=n(r(1908));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(0,v.inject)("detailStore")(l=(0,v.observer)(l=function(e){(0,f.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e.detailStore=e.props.detailStore,e.state={enabled:e.detailStore.detail.enabled},e.fetchData=(0,i.default)(c.default.mark((function t(){var a,r,n,o,s,l,i=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},r=e.props,n=r.detailStore.detail.name,o=r.match.params,s=o.cluster,l=o.namespace,t.next=4,e.store.fetchList(O({cluster:s,namespace:l,labelSelector:"springcloud.kubesphere.io/app=".concat(n)},a));case 4:case"end":return t.stop()}}),t)}))),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){var a=this.detailStore.detail.enabled;a!==t.enabled&&(this.setState({enabled:a}),this.fetchData())}},{key:"renderContent",value:function(){var e=this,a=this.store.list.data;return h.default.createElement("div",{className:b.default.body},(0,g.default)(a)?h.default.createElement("div",{className:b.default.empty},t("NO_INSTANCE_FOUND")):a.map((function(t){return h.default.createElement(E.default,(0,o.default)({key:t.podName,detail:t},e.props.match.params))})))}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.isLoading;return h.default.createElement(_.default,{className:b.default.main,title:t("INSTANCE_PL"),empty:t("NO_INSTANCE_FOUND"),isEmpty:(0,g.default)(a),loading:r},this.renderContent())}}]),r}(h.default.Component))||l)||l;a.default=A},4711:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(3)),f=r(433),p=r(186),m=n(r(838)),h=r(52),v=n(r(1908));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=a.enabled,n=a.ip,o=a.port,c=a.podName,s=a.podStartTime,l=a.weight,i=a.instanceId,g=e.workspace,_=e.cluster,y=e.namespace;return u.default.createElement("div",{className:v.default.item},u.default.createElement("div",{className:v.default.icon},u.default.createElement(p.Icon,{name:"pod",size:40}),u.default.createElement(m.default,{className:v.default.indicator,type:r?"running":"stopped",flicker:!0})),u.default.createElement("div",{className:(0,d.default)(v.default.text,v.default.name)},u.default.createElement("div",null,u.default.createElement(f.Link,{className:v.default.title,to:"/".concat(g,"/clusters/").concat(_,"/projects/").concat(y,"/microservice-instances/").concat(c,"/").concat(encodeURIComponent(i))},c)),u.default.createElement("p",null,t("CREATED_AGO",{diff:(0,h.getLocalTime)(s).fromNow()}))),u.default.createElement("div",{className:v.default.text},u.default.createElement("div",null,l),u.default.createElement("p",null,t("WEIGHT"))),u.default.createElement("div",{className:v.default.text},u.default.createElement("div",null,n),u.default.createElement("p",null,t("IP_ADDRESS"))),u.default.createElement("div",{className:v.default.text},u.default.createElement("div",null,o),u.default.createElement("p",null,t("PORT"))))}}]),r}(u.default.Component);a.default=_},4712:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62),r(109);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(63)),m=r(239),h=r(186),v=n(r(240)),g=r(52),_=n(r(1025)),y=n(r(452)),E=n(r(805)),b=n(r(4713));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=(0,m.observer)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new _.default,e.podStore=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.instanceId;e.store.fetchDetail({cluster:a,namespace:r,name:decodeURIComponent(n)})},e.fetchPodData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.podName;e.podStore.fetchDetail({cluster:a,namespace:r,name:n})},e.getOperations=function(){var a=e.store.detail.specEnabled;return[{key:"online",text:a?t("TAKE_OFFLINE"):t("TAKE_ONLINE"),action:"edit",type:a?"danger":"control",onClick:e.handleLine}]},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,o=e.store.detail,c=void 0===o?{}:o;if((0,p.default)(c))return null;var s=c.instanceId,l=c.enabled,i=e.podDetail,u=i.app,d=i.podIp,f=i.node,m=i.nodeIp,h=i.podStatus,v=void 0===h?{}:h,_=i.status,y=void 0===_?{}:_,E=i.createTime;return[{name:t("CLUSTER"),value:(0,g.showNameAndAlias)(r,"cluster")},{name:t("PROJECT"),value:(0,g.showNameAndAlias)(n,"project")},{name:t("APP"),value:u},{name:t("MICROSERVICE_INSTANCE_ID"),value:s},{name:t("MICROSERVICE_INSTANCE_STATUS"),value:l?t("MICROSERVICE_INSTANCE_STATUS_RUNNING"):t("MICROSERVICE_INSTANCE_STATUS_OFFLINE")},{name:t("POD_STATUS"),value:t(v.status)},{name:t("POD_IP_ADDRESS"),value:d},{name:t("NODE_NAME"),value:f},{name:t("NODE_IP_ADDRESS"),value:m},{name:t("RESTART_PL"),value:v.restarts},{name:t("QOS_CLASS"),value:y.qosClass},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(E).format("YYYY-MM-DD HH:mm:ss")}]},e.handleLine=function(){var a=e.store,r=a.detail;a.detail.specEnabled?e.store.offLine(r).then(setTimeout((function(){v.default.success({content:t("TAKE_OFFLINE_SUCCESS")}),e.fetchData()}),1e3)):e.store.onLine(r).then(setTimeout((function(){v.default.success({content:t("TAKE_ONLINE_SUCCESS")}),e.fetchData()}),1e3))},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.fetchPodData()}},{key:"render",value:function(){var e=this.props.match.params.podName,a={detailStore:this.podStore,instanceDetailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(h.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:"springcloud-microservices",name:this.store.detail.podName||e,desc:this.store.detail.description,icon:"pod",operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("MICROSERVICE_INSTANCE_PL"),url:this.listUrl}]};return f.default.createElement(E.default,(0,c.default)({stores:a},r,{routes:(0,b.default)(this.props.match.path)}))}},{key:"module",get:function(){return"microservices"}},{key:"podDetail",get:function(){return this.podStore.detail}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(f.default.Component))||o;a.default=O},4713:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(814)),c=r(a(4714)),s=r(a(4715)),l=r(a(1837)),i=r(a(1840)),u=r(a(4716));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,exact:!0},{path:"".concat(e,"/schedule"),title:"SCHEDULING_INFORMATION",component:i.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:s.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:u.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4714:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(73),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,c=n(r(31)),s=n(r(96)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(63)),g=n(r(26)),_=n(r(1406)),y=n(r(1025)),E=n(r(1407)),b=n(r(789)),S=n(r(1909));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=["systemProperties","systemEnvironment"],k=(0,h.inject)("instanceDetailStore","detailStore")(o=(0,h.observer)(o=function(e){(0,u.default)(r,e);var a=R(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).fetchData=function(){t.envStore.fetchList({namespace:t.namespace,cluster:t.cluster,containers:t.containers,initContainers:t.initContainers})},t.fentchInstanceData=function(){var e=t.props.instanceDetailStore.detail.instanceId;t.instanceStore.fetchEnv({namespace:t.namespace,cluster:t.cluster,instanceId:e}).then((function(e){t.setState({instanceEnv:e})}))},t.state={instanceEnv:{}},t.envStore=new _.default,t.instanceStore=new y.default,t.fetchData(),t.fentchInstanceData(),t}return(0,i.default)(r,[{key:"render",value:function(){var e=(0,m.toJS)(this.envStore.list),a=e.data,r=e.isLoading,n=this.state.instanceEnv,o=n.activeProfiles,l=n.propertySources;return p.default.createElement("div",null,!(0,v.default)(l)&&p.default.createElement(b.default,{className:S.default.envWrapper,title:t("SPRING_BOOT_CONFIGURATION_INFOMATION",{resources:"(".concat(o.join(", "),")")})},l.filter((function(e){return!A.includes(e.name)})).map((function(e,a){var r=e.name,n=e.properties;return p.default.createElement(E.default,{key:a,icon:"springcloud",emptyText:t("PROPERTY_NOT_SET"),detail:{name:r,variables:Object.entries(n).map((function(e){var t=(0,s.default)(e,2);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:t[0]},t[1])}))},expand:0===a,loading:!1})}))),p.default.createElement(b.default,{className:S.default.envWrapper,title:t("POD_ENVIRONMENT_VARIABLE")},a.map((function(e,t){return p.default.createElement(E.default,{key:t,detail:e,expand:0===t,loading:r})}))))}},{key:"module",get:function(){return this.store.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"namespace",get:function(){return this.store.detail.namespace}},{key:"cluster",get:function(){return this.store.detail.cluster}},{key:"containers",get:function(){var e=(0,m.toJS)(this.store.detail),t=e.spec,a=e.containers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,v.default)(r)?(0,v.default)(t)?[]:(0,g.default)(t,"template.spec.containers",[]):r}},{key:"initContainers",get:function(){var e=(0,m.toJS)(this.store.detail),t=e.spec,a=e.initContainers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,v.default)(r)?(0,v.default)(t)?[]:(0,g.default)(t,"template.spec.initContainers",[]):r}}]),r}(p.default.Component))||o)||o;a.default=k},4715:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(63)),p=r(239),m=n(r(789)),h=n(r(1821)),v=n(r(1219)),g=n(r(1025)),_=n(r(1909));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=(0,p.inject)("detailStore","instanceDetailStore")(o=(0,p.observer)(o=function(e){(0,l.default)(r,e);var a=y(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=new g.default,e}return(0,s.default)(r,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,!(0,f.default)(this.instanceAnnotations)&&d.default.createElement(m.default,{title:t("SPRING_CLOUD_METADATA")},d.default.createElement(v.default,{annotations:this.instanceAnnotations})),d.default.createElement(m.default,{title:t("POD_METADATA")},d.default.createElement(h.default,{className:_.default.wrapper,labels:this.detail.labels}),d.default.createElement(v.default,{className:_.default.wrapper,annotations:this.detail.annotations})))}},{key:"detail",get:function(){return this.props.detailStore.detail}},{key:"instanceAnnotations",get:function(){return this.props.instanceDetailStore.detail.annotations}}]),r}(d.default.Component))||o)||o;a.default=E},4716:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(73),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(96)),c=n(r(315)),s=n(r(43)),l=n(r(31));r(41);var i,u=n(r(44)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(0)),g=r(239),_=n(r(63)),y=n(r(26)),E=r(822),b=r(798),S=n(r(801)),O=r(52),R=r(794),A=n(r(989)),k=n(r(4717));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var P={cpu_usage:"pod_cpu_usage",memory_usage:"pod_memory_usage_wo_cache",gpu_usage:"pod_gpu_usage",gpu_memory_usage:"pod_gpu_memory_usage",net_transmitted:"pod_net_bytes_transmitted",net_received:"pod_net_bytes_received"},N=(0,g.inject)("instanceDetailStore","detailStore")(i=(0,g.observer)(i=function(e){(0,p.default)(r,e);var a=C(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).monitorStore=new A.default,e.state={hasMetrics:!1},e.fetchData=function(){var t=(0,u.default)(s.default.mark((function t(a){var r,n,o,c,l;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store.detail,n=r.cluster,o=r.namespace,c=r.name,l=e.props.match.params.instanceId,t.next=4,e.instanceDetailStore.checkHasMetrics({cluster:n,namespace:o,instanceId:l});case 4:t.sent?(e.setState({hasMetrics:!0}),e.monitorStore.fetchMetrics(D({cluster:n,namespace:o,pod:c,metrics:Object.values((0,O.hideGPUByLicense)(P,n))},a))):e.setState({hasMetrics:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",legend:["USAGE"],data:(0,y.default)(e.metrics,"".concat(P.cpu_usage,".data.result"))},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,y.default)(e.metrics,"".concat(P.memory_usage,".data.result"))},{type:"gpu",title:"GPU_USAGE",unitType:"gpu",legend:["USAGE"],data:(0,y.default)(e.metrics,"".concat(P.gpu_usage,".data.result"))},{type:"gpu_memory",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,y.default)(e.metrics,"".concat(P.gpu_memory_usage,".data.result"))},{type:"bandwidth",title:"NETWORK_BYTESOUT",unitType:"bandwidth",legend:["Outbound"],data:(0,y.default)(e.metrics,"".concat(P.net_transmitted,".data.result"))},{type:"bandwidth",title:"NETWORK_BYTESIN",unitType:"bandwidth",legend:["Inbound"],data:(0,y.default)(e.metrics,"".concat(P.net_received,".data.result"))}]},e}return(0,f.default)(r,[{key:"render",value:function(){var e=this.instanceDetailStore.detail,a=e.cluster,r=e.namespace,n=e.instanceId,o=this.store.detail.createTime,s=this.monitorStore,l=s.isLoading,i=s.isRefreshing,u=this.state.hasMetrics,d=(0,O.hideGPUByLicense)(this.getMonitoringCfgs(this.metrics),a);return v.default.createElement(v.default.Fragment,null,v.default.createElement(S.default,{title:t("SPRING_CLOUD_MONITORING"),empty:t("NO_MONITORING_DATA"),isEmpty:!u},u&&this.instanceConfigs.map((function(e){return v.default.createElement(k.default,{key:e.title,config:e,namespace:r,cluster:a,instanceId:n})}))),v.default.createElement(E.Controller,{createTime:o,onFetch:this.fetchData,loading:l,refreshing:i,isEmpty:(0,_.default)(this.metrics)},d.map((function(e){e.data=(0,_.default)(e.data)?[{values:(0,R.getZeroValues)()}]:e.data;var t=(0,R.getAreaChartOps)(e);return v.default.createElement(b.SimpleArea,(0,c.default)({key:e.title,width:"100%"},t))}))))}},{key:"store",get:function(){return this.props.detailStore}},{key:"instanceDetailStore",get:function(){return this.props.instanceDetailStore}},{key:"metrics",get:function(){var e={};return Object.entries(this.monitorStore.data).forEach((function(t){var a=(0,o.default)(t,2),r=a[0],n=a[1];(0,y.default)(n,"data.result")&&(e["".concat(r)]=n)})),e}},{key:"instanceConfigs",get:function(){return[{type:"count",title:"Thread",unit:"",legend:["JVM_THREADS_LIVE","JVM_THREADS_DAEMON"],extraLegend:"JVM_THREADS_PEAK",filters:{metrics_filter:"".concat(["jvm.threads.live","jvm.threads.daemon","jvm.threads.peak"].join("|"),"$")}},{type:"count",title:"Heap",unitType:"memory",legend:["JVM_MEMORY_USED","JVM_MEMORY_COMMITTED"],extraLegend:"JVM_MEMORY_MAX",filters:{metrics_filter:"".concat(["jvm.memory.used","jvm.memory.committed","jvm.memory.max"].join("|"),"$"),tag:"area:heap"}},{type:"count",title:"Non Heap",unitType:"memory",legend:["JVM_MEMORY_USED_METASPACE","JVM_MEMORY_USED","JVM_MEMORY_COMMITTED"],extraLegend:"JVM_MEMORY_MAX",filters:{metrics_filter:"".concat(["jvm.memory.used","jvm.memory.committed","jvm.memory.max"].join("|"),"$"),tag:"area:nonheap"},metaspaceFilters:{metrics_filter:"".concat(["jvm.memory.used"].join("|"),"$"),metaspace:"area:nonheap,id:Metaspace"}}]}}]),r}(v.default.Component))||i)||i;a.default=N},4717:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(315)),c=n(r(58)),s=n(r(43)),l=n(r(31));r(41);var i,u=n(r(44)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(0)),g=r(14),_=r(239),y=n(r(63)),E=n(r(26)),b=r(798),S=r(794),O=n(r(1025));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var T={JVM_THREADS_LIVE:"jvm.threads.live",JVM_THREADS_DAEMON:"jvm.threads.daemon",JVM_THREADS_PEAK:"jvm.threads.peak",JVM_MEMORY_MAX:"jvm.memory.max",JVM_MEMORY_USED:"jvm.memory.used",JVM_MEMORY_COMMITTED:"jvm.memory.committed",JVM_MEMORY_USED_METASPACE:"jvm.memory.used.metaspace"},D=(0,_.observer)(i=function(e){(0,p.default)(r,e);var a=k(r);function r(e){var n;return(0,d.default)(this,r),(n=a.call(this,e)).fetchData=function(){var e=(0,u.default)(s.default.mark((function e(t){var a,r,o,c,l,i,u;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.cluster,o=a.namespace,c=a.instanceId,l=a.config,i=l.filters,u=l.metaspaceFilters,e.next=3,n.instanceStore.fetchMetrics(A(A({cluster:r,namespace:o,name:c},i),t),u);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getInstanceMonitoringCfgs=function(){var e=n.props.config,a=e.unitType,r=e.legend,o=e.extraLegend,s=(e.metaspaceFilters,(0,c.default)(e,["unitType","legend","extraLegend","metaspaceFilters"])),l=(0,S.getSuitableValue)((0,E.default)(n.instanceMetrics,"['".concat(T[o],"'].data.values[0][1]")),a);return A(A({},s),{},{unitType:a,legend:r,extraLegend:"".concat(t(o),": ").concat(l),data:r.map((function(e){return(0,E.default)(n.instanceMetrics,"['".concat(T[e],"'].data"))}))})},n.instanceStore=new O.default,n.fetchData(),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){(0,S.startAutoRefresh)(this,{interval:2500})}},{key:"componentWillUnmount",value:function(){(0,S.stopAutoRefresh)(this)}},{key:"render",value:function(){var e=(0,S.getAreaChartOps)(this.getInstanceMonitoringCfgs());return(0,y.default)(e.data)?null:v.default.createElement("div",{key:e.title},v.default.createElement(b.SimpleArea,(0,o.default)({width:"100%"},e))," ")}},{key:"instanceMetrics",get:function(){return(0,g.toJS)(this.instanceStore.metrics)}}]),r}(v.default.Component))||i;a.default=D},4718:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(63)),m=r(239),h=r(186),v=r(52),g=r(791),_=n(r(1900)),y=n(r(1643)),E=n(r(805)),b=n(r(4719));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,g.trigger)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).name="SQ_CONFIGURATION",e.store=new _.default,e.historyStore=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.fetchHistory=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.historyStore.fetchList({cluster:a,namespace:r,labelSelector:"springcloud.kubesphere.io/configuration.name=".concat(n)})},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(){return e.trigger("configuration.edit",{detail:e.store.detail,success:function(){e.fetchData(),e.fetchHistory()}})}},{key:"rollBack",icon:"timed-task",text:t("ROLL_BACK"),action:"edit",onClick:function(){return e.trigger("configuration.rollback",{title:t("ROLL_BACK_MICROSERVICE_CONFIGURATION"),detail:e.store.detail,success:function(){e.fetchData(),e.fetchHistory()}})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,o=e.store.detail,c=void 0===o?{}:o;return(0,p.default)(c)?null:[{name:t("CLUSTER"),value:(0,v.showNameAndAlias)(r,"cluster")},{name:t("PROJECT"),value:(0,v.showNameAndAlias)(n,"project")},{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(c.createTime).format("YYYY-MM-DD HH:mm:ss")}]},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,historyStore:this.historyStore};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(h.Loading,{className:"ks-page-loading"});var a={icon:this.icon,module:this.module,authKey:"springcloud-microservices",name:(0,v.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SQ_CONFIGURATION_PL"),url:this.listUrl}]};return f.default.createElement(E.default,(0,c.default)({stores:e},a,{routes:(0,b.default)(this.props.match.path)}))}},{key:"module",get:function(){return"configurations"}},{key:"icon",get:function(){return"hammer"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(f.default.Component))||o)||o)||o;a.default=O},4719:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(814)),c=r(a(4720)),s=r(a(4722));t.default=function(e){return[{path:"".concat(e,"/data"),title:"DATA",component:c.default,exact:!0},{path:"".concat(e,"/history"),title:"HISTORICAL_VERSIONS",component:s.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/data"),exact:!0})]}},4720:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(16),r(98),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(16),r(98),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(96)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(801)),h=n(r(944)),v=n(r(4721));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var _=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=g(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.module=e.module,t}return(0,l.default)(r,[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.default.createElement("div",{className:v.default.wrapper},f.default.createElement("ul",null,Object.entries(e).map((function(e){var t=(0,c.default)(e,2),a=t[0],r=t[1];return f.default.createElement("li",{key:a},f.default.createElement("div",{className:"h6"},a),f.default.createElement("pre",{className:v.default.value},r))}))))}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?f.default.createElement(h.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return f.default.createElement("div",null,this.renderPlacement(),f.default.createElement(m.default,{title:t("DATA"),loading:r},this.renderContent(a.data)))}}]),r}(f.default.Component))||o)||o;a.default=_},4721:function(e,t,a){e.exports={wrapper:"MmIGU7TxTUZMEQR4HrO_A",value:"_3OCiQozLSfsc6vFANx_hhg"}},4722:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(18),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(239),f=r(a(789)),p=r(a(4723));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var h=(0,d.inject)("detailStore","historyStore")(n=(0,d.observer)(n=function(e){(0,s.default)(a,e);var t=m(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={expandItem:""},e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.historyStore.fetchList({cluster:a,namespace:r,labelSelector:"springcloud.kubesphere.io/configuration.name=".concat(n)})},e.handleExpand=function(t){e.setState((function(e){return{expandItem:e.expandItem===t?"":t}}))},e}return(0,c.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=this.historyStore.list.data,a=this.state.expandItem;return u.default.createElement(f.default,null,t.map((function(t,r){return u.default.createElement(p.default,{key:t.uid,index:r,detail:t,isExpand:a===t.uid,onExpand:e.handleExpand})})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"historyStore",get:function(){return this.props.historyStore}}]),a}(u.default.Component))||n)||n;t.default=h},4723:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(98),r(4),r(23),r(57),r(17);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(1)),p=n(r(3)),m=n(r(26)),h=r(52),v=r(186),g=n(r(1345)),_=n(r(4724));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,l.default)(r,e);var a=y(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleExpandExtra=function(){var t=e.props,a=t.detail;(0,t.onExpand)(a.uid)},e}return(0,s.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.detail,r=a.name,n=a.createTime,o=e.isExpand,c=e.index;return d.default.createElement("div",{className:_.default.content,onClick:this.handleExpandExtra},d.default.createElement("div",{className:_.default.detail},d.default.createElement(v.Icon,{name:"backup",size:40,type:o?"light":"dark"}),d.default.createElement("div",{className:_.default.text},d.default.createElement("div",{className:_.default.title},r,0===c&&d.default.createElement(v.Tag,{className:"margin-l8",type:"primary"},t("RUNNING"))),d.default.createElement("p",{className:_.default.desc},t("REVISION_RECORD"))),d.default.createElement("div",{className:_.default.text},d.default.createElement("div",{className:_.default.title},(0,h.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")),d.default.createElement("p",{className:_.default.desc},t("CREATION_TIME")))),d.default.createElement("div",{className:_.default.arrow},d.default.createElement(v.Icon,{name:"chevron-down",type:o?"light":"",size:20})))}},{key:"renderExtraContent",value:function(){var e=this.props.detail,a=(0,m.default)(e,'annotations["springcloud.kubesphere.io/extension"]',""),r=Object.entries(e.data)[0][1];return d.default.createElement("div",{className:_.default.itemExtra},d.default.createElement(g.default,{data:{mode:a,config:r},title:t("CONFIGURATION_CONTNET_TYPE",{type:a.toUpperCase()}),readOnly:!0,showSelect:!1}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.isExpand;return d.default.createElement("div",{className:(0,p.default)(_.default.item,t,(0,o.default)({},_.default.expanded,a))},this.renderContent(),this.renderExtraContent())}}]),r}(d.default.PureComponent);a.default=E,E.propTypes={className:f.default.string,detail:f.default.object,isExpand:f.default.bool,onExpand:f.default.func},E.defaultProps={detail:{},isExpand:!1,onExpand:function(){}}},4724:function(e,t,a){e.exports={item:"-pWk8648LNrjg8n1BKnS3",expanded:"_3Tz3dwKun2rD-MXR3leA2",content:"_2TTqVnaYN_ygKPQ5XQh0lW",text:"_1ZF6H9SI_BMQ-g0zO5u4S5",title:"_3dPiDW8tYVWTgkPxXOeq_2",desc:"_1jn7VIIXoLyGd2vW57PrS_",itemExtra:"_2XILCxvhZdjb-Bb0q3WUzr",detail:"_3bM-2e33LJHxttcFJKZ5TR"}},4725:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(86),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(86),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(63)),v=r(186),g=r(52),_=r(791),y=n(r(1442)),E=n(r(823)),b=n(r(4726));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),action:"manage",onClick:function(){return e.trigger("microservicegateway.edit",{module:e.module,cluster:e.cluster,namespace:e.namespace,detail:e.store.detail,store:e.store,rootStore:e.props.store,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("microservicegateway.delete",{cluster:e.cluster,namespace:e.namespace,detail:e.store.detail,success:function(){e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:(0,g.showNameAndAlias)(e.cluster,"cluster")},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,g.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),authKey:"springcloud-microservices",operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("MICROSERVICE_GATEWAY"),url:this.listUrl}]};return f.default.createElement(E.default,(0,c.default)({stores:e,routes:(0,b.default)(this.props.match.path)},a))}},{key:"module",get:function(){return"microservicegateways"}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(f.default.Component))||o)||o)||o;a.default=O},4726:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(821)),c=r(a(4727));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:c.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4727:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(84),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(85),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(84),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(85),a(62),a(7);var n,o=r(a(31)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=a(14),p=a(239),m=r(a(63)),h=r(a(450)),v=r(a(861)),g=r(a(857)),_=r(a(849)),y=r(a(1071)),E=r(a(1221)),b=r(a(4728));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var A=(0,p.inject)("detailStore")(n=(0,p.observer)(n=function(e){(0,l.default)(a,e);var t=R(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.handleScale=function(t){var a=e.store.detail,r=a.cluster,n=a.namespace,o=a.name;e.store.scale({cluster:r,namespace:n,name:o},t).then(e.fetchData)},e}return(0,s.default)(a,[{key:"renderReplicaInfo",value:function(){var e=(0,f.toJS)(this.store.detail);return d.default.createElement(E.default,{module:this.module,detail:e,onScale:this.handleScale,enableScale:this.enableScaleReplica})}},{key:"renderContainerPorts",value:function(){var e=this.store.isLoading,t=(0,f.toJS)(this.store.detail).containers;t=(0,g.default)(t)?[]:t;var a=(0,v.default)((0,h.default)(t.map((function(e){return(0,m.default)(e.ports)?[]:e.ports}))),"name");return(0,m.default)(a)?null:d.default.createElement(y.default,{ports:a,loading:e})}},{key:"renderPods",value:function(){return d.default.createElement(_.default,{prefix:this.prefix,detail:O(O({},this.store.detail),{},{kind:"ReplicaSet"})})}},{key:"render",value:function(){return d.default.createElement("div",{className:b.default.main},this.renderReplicaInfo(),this.renderContainerPorts(),this.renderPods())}},{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return"microservicegateways"}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster;return"".concat(t?"/".concat(t):"","/clusters/").concat(a)}},{key:"enabledActions",get:function(){return globals.app.getActions(O(O({module:this.module},this.props.match.params),{},{project:this.props.match.params.namespace}))}},{key:"enableScaleReplica",get:function(){return this.enabledActions.includes("edit")&&!this.store.detail.isFedManaged}}]),a}(d.default.Component))||n)||n;t.default=A},4728:function(e,t,a){e.exports={deployment_codeResource:"_3S2kBU2RFEbeDkrjVoi31c"}},4729:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(63)),m=r(239),h=r(186),v=n(r(805)),g=r(52),_=r(791),y=n(r(1901)),E=n(r(4730));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var S=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new y.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=t.name;e.store.fetchDetail({cluster:a,namespace:r,name:n})},e.getOperations=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,o=e.store.detail;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(){return e.trigger("servicerouting.edit",{module:e.module,detail:o,store:e.store,cluster:r,namespace:n,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{detail:o,type:e.name,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,o=e.store.detail,c=void 0===o?{}:o;if((0,p.default)(c))return null;var s=c.gateway,l=c.creator,i=c.createTime;return[{name:t("CLUSTER"),value:(0,g.showNameAndAlias)(r,"cluster")},{name:t("PROJECT"),value:(0,g.showNameAndAlias)(n,"project")},{name:t("GATEWAY"),value:s},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(i).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:l}]},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(h.Loading,{className:"ks-page-loading"});var a={module:this.module,icon:"loadbalancer",name:(0,g.getDisplayName)(this.store.detail),authKey:"springcloud-microservices",desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("MICROSERVICE_ROUTE_PL"),url:this.listUrl}]};return f.default.createElement(v.default,(0,c.default)({stores:e},a,{routes:(0,E.default)(this.props.match.path)}))}},{key:"module",get:function(){return"servicerouting"}},{key:"name",get:function(){return"MICROSERVICE_ROUTE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/clusters/".concat(a,"/").concat(this.module)}}]),r}(f.default.Component))||o)||o)||o;a.default=S},4730:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(814)),c=r(a(4731));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4731:function(e,a,r){"use strict";r(15);var n=r(20);r(30),r(18),r(4),r(23),r(17),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(30),r(18),r(191),r(42),r(159),r(4),r(23),r(57),r(17),r(32);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=r(186),m=n(r(789)),h=n(r(63)),v=n(r(195)),g=n(r(4732));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,f.inject)("detailStore")(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=_(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"renderConfig",value:function(e,t){return(0,h.default)(e)?null:d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:g.default.text},t),d.default.createElement("ul",{className:g.default.values},e.map((function(e,t){return d.default.createElement("li",{key:t},d.default.createElement("span",null,(0,v.default)(e)?e:JSON.stringify(e)))}))))}},{key:"render",value:function(){var e=this.detailStore.detail,a=e.uri,r=e.order,n=e.filters,o=e.predicates;return d.default.createElement("div",{className:g.default.main},d.default.createElement(m.default,{title:t("RULES")},d.default.createElement("div",{className:g.default.card},d.default.createElement("div",{className:g.default.content},d.default.createElement(p.Icon,{name:"loadbalancer",size:40}),d.default.createElement("div",{className:g.default.title},a,d.default.createElement("div",null,t("MICROSERVICE_ORDER"),": ",r))),this.renderConfig(o,t("PREDICATE")),this.renderConfig(n,t("MICROSERVICE_ROUTE_FILTER")))))}},{key:"detailStore",get:function(){return this.props.detailStore}}]),r}(d.default.Component))||o)||o;a.default=y},4732:function(e,t,a){e.exports={card:"y_6NyCjc_ScDQ-Ltns1vQ",content:"qARVNMAlFLM9mBhYs1cqg",title:"_1cH9MmxWl2lxbaa9rgjM6E",text:"_2SGZ55MrXKMfelfGZM21gX",values:"_16ih3dFXk35XOC65g3Ii3L"}},4733:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(26)),g=n(r(63)),_=r(186),y=r(52),E=r(791),b=n(r(961)),S=n(r(795)),O=n(r(805)),R=n(r(4734));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,E.trigger)(o=function(e){(0,u.default)(r,e);var a=T(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new b.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"addComponent",icon:"add",text:t("ADD_SERVICE"),action:"edit",onClick:function(){return e.trigger("crd.app.addservice",k({success:e.fetchComponents,detail:(0,m.toJS)(e.store.detail)},e.props.match.params))}},{key:"addRoute",icon:"add",text:t("ADD_ROUTE"),action:"edit",onClick:function(){return e.trigger("crd.app.addroute",k({success:e.fetchData,detail:(0,m.toJS)(e.store.detail)},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,g.default)(a))return[{name:t("CLUSTER"),value:(0,y.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,y.showNameAndAlias)(o,"project")},{name:t("STATUS"),value:p.default.createElement(S.default,{name:t((a.status||"").toUpperCase()),type:a.status})},{name:t("VERSION"),value:a.version},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,y.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator},{name:t("APPLICATION_GOVERNANCE_SCAP"),value:"true"===(0,v.default)(a,'annotations["servicemesh.kubesphere.io/enabled"]')?t("ON"):t("OFF")}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(_.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return p.default.createElement(O.default,(0,c.default)({stores:e},a,{routes:R.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/composing")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||o)||o)||o;a.default=D},4734:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(4735)),c=r(a(4742)),s=r(a(4765)),l=r(a(4767)),i="/:workspace/clusters/:cluster/projects/:namespace/composing/:name",u=[{path:"".concat(i,"/components"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(i,"/traffic"),title:"TRAFFIC_MONITORING",component:c.default,clusterModule:"servicemesh",exact:!0},{path:"".concat(i,"/grayrelease"),title:"GRAYSCALE_RELEASE",component:s.default,clusterModule:"servicemesh",exact:!0},{path:"".concat(i,"/tracing"),title:"TRACING",component:l.default,clusterModule:"servicemesh",exact:!0},(0,n.getIndexRoute)({path:i,to:"".concat(i,"/components"),exact:!0})];t.default=u},4735:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(239),f=r(a(1447)),p=r(a(1227)),m=r(a(1448)),h=r(a(1449)),v=r(a(4741));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,s.default)(a,e);var t=g(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,c.default)(a,[{key:"render",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector;return u.default.createElement("div",{className:v.default.main},u.default.createElement(m.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(f.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(p.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(h.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),a}(u.default.Component))||n)||n;t.default=_},4736:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(26)),d=n(r(0)),f=n(r(1)),p=r(433),m=n(r(3)),h=r(186),v=n(r(790)),g=n(r(4737)),_=r(52),y=n(r(1910));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=E(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.detail,n=e.prefix;if(!r)return null;var o=(0,u.default)(r,"monitor.name"),c=(0,_.getDisplayName)(r);return d.default.createElement("div",{className:(0,m.default)(y.default.item,a)},d.default.createElement(v.default,{icon:"network-router",title:d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Link,{to:"".concat(n,"/services/").concat(r.name)},c),o&&d.default.createElement(h.Tooltip,{content:t("MONITORING_EXPORTER_VALUE",{value:o})},d.default.createElement(h.Icon,{className:"margin-l8",name:"monitor",size:20}))),description:t(r.type)}),d.default.createElement(g.default,{data:r}))}}]),r}(d.default.Component);a.default=b,b.propTypes={className:f.default.string,prefix:f.default.string,detail:f.default.object},b.defaultProps={prefix:"",detail:{}}},4737:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(73),r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.data;if("ClusterIP"===a.specType)return o.default.createElement(c.default,{description:t("VIRTUAL_IP_ADDRESS"),title:a.clusterIP});if("NodePort"===a.specType)return o.default.createElement(c.default,{description:t("PORT_PL"),title:a.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.port,":").concat(e.nodePort,"/").concat(e.protocol)})).join("; ")});if("LoadBalancer"===a.specType)return o.default.createElement(c.default,{description:a.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),title:a.loadBalancerIngress.join("; ")});return o.default.createElement(c.default,{description:a.specType,title:a.externalName})},r(5),r(11),r(73),r(18),r(4);var o=n(r(0)),c=n(r(790))},4738:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(84),r(73),r(18),r(16),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(6),r(84),r(73),r(18),r(16),r(4),r(85),r(7);var o=n(r(26)),c=n(r(63)),s=n(r(0)),l=n(r(1)),i=r(433),u=r(186),d=r(52),f=n(r(4739)),p=function(e){var a=e.detail,r=e.gateway,n=e.prefix,l={},p=(0,o.default)(r,"service",[]);if((0,c.default)(p)||null==p||p.forEach((function(e){"http"===e.name&&80!==e.nodePort&&(l.http=e.nodePort),"https"===e.name&&443!==e.nodePort&&(l.https=e.nodePort)})),(0,c.default)(a.rules))return null;var m=a.tls||[],h=(0,d.getDisplayName)(a);return s.default.createElement("div",{className:f.default.card},s.default.createElement("div",{className:f.default.content},s.default.createElement(u.Icon,{name:"loadbalancer",size:40}),s.default.createElement("div",{className:f.default.text},s.default.createElement(i.Link,{to:"".concat(n,"/ingresses/").concat(a.name)},h),s.default.createElement("p",null,t("DOMAIN_NAME_VALUE",{value:a.rules.map((function(e){return e.host})).join(", ")})))),s.default.createElement("ul",{className:f.default.rules},a.rules.map((function(e){var a=m.hosts&&m.hosts.includes(e.host)?"https":"http",r="".concat(a,"://").concat(e.host);return l[a]&&(r="".concat(r,":").concat(l[a])),e.http.paths.map((function(a){return s.default.createElement("li",{key:"".concat(e.host).concat(a.path)},s.default.createElement("span",null,"URL:"),s.default.createElement("span",null,s.default.createElement("strong",null,r,a.path)),s.default.createElement("a",{href:"".concat(r).concat(a.path),target:"_blank",rel:"noreferrer noopener"},s.default.createElement(u.Button,{className:f.default.access},t("ACCESS_SERVICE"))))}))}))))};p.propTypes={rule:l.default.object};var m=p;a.default=m},4739:function(e,t,a){e.exports={card:"_1cG8fQKm3-Tkqa6zrOyoAt",content:"_2K1EVvQAkTRqBliWP9y_UW",text:"_1y1LWjMboGREreksS8-Bre",rules:"_2flmPvDu28-zUq_VX5ZqEy",access:"yZPxinr4XZvaHAzm7Wr-V",empty:"NmU26TG_b_FLHQfw9ynFW"}},4740:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(315));r(5),r(18),r(16);var c=n(r(26)),s=n(r(0)),l=n(r(1)),i=r(433),u=n(r(790)),d=n(r(1911)),f=function(e){var a=e.volume,r=e.prefix,n=t("STORAGE_CLASS_VALUE",{value:(0,c.default)(a,"storageClassName","-")}),l=[{title:(0,c.default)(a,"capacity","-"),description:t("CAPACITY")},{title:(0,c.default)(a,"accessMode","-"),description:t("ACCESS_MODE_TCAP")}];return s.default.createElement("div",{className:d.default.item},s.default.createElement(u.default,{icon:"storage",title:s.default.createElement(i.Link,{to:"".concat(r,"/volumes/").concat(a.name)},a.name),description:n}),l.map((function(e,t){return s.default.createElement(u.default,(0,o.default)({key:t},e))})))};f.propTypes={container:l.default.object};var p=f;a.default=p},4741:function(e,t,a){e.exports={ports:"_1pZVLp9qAjWNtg0beO2Nnr",card:"_21H0IPfRMqfBUSQXZqjFaQ",content:"_1g_x-Rf6m671ilDIqQ7dij",title:"_3wM7e49lglrGDX6Nvyt8Fb",path:"_1AKuvdVsWBs2vcilYDQefn",access:"_2TU8aTcZX_e1mhZBihzVpA"}},4742:function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(24),r(17),r(62),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62),r(109);var o,c=n(r(58)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(63)),p=n(r(0)),m=r(239),h=r(186),v=n(r(833)),g=n(r(949)),_=r(845),y=n(r(1912)),E=n(r(4764));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var S=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,i.default)(r,e);var a=b(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).handleRefresh=function(){n.getData()},n.handleAutoFetch=function(){var e=n.state.autoFetch;n.setState({autoFetch:!e},(function(){n.state.autoFetch?n.interval=setInterval((function(){n.getData()}),1e4):n.interval&&clearInterval(n.interval)}))},n.handleLookbackChange=function(e){var t=e.step,a=e.times,r=(0,c.default)(e,["step","times"]),o=(0,_.getTimeRange)({step:(0,_.getMinuteValue)(t),times:a}),s=o.start,l=o.end,i=r.start||s,u=r.end||l,d=Math.floor(u-i);n.setState({duration:d},(function(){n.getData()}))},n.operations=function(){var e=n.state.autoFetch;return p.default.createElement("div",{className:E.default.operations},p.default.createElement(g.default,{className:E.default.timeSelect,onChange:n.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down",step:"1m",times:1}),p.default.createElement(h.Button,{type:"flat",icon:e?"pause":"start",onClick:n.handleAutoFetch}),p.default.createElement(h.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh}))},n.renderHeader=function(){return p.default.createElement("div",{className:E.default.cardHeader},n.operations(),t("TRAFFIC_MONITORING"))},n.state={isGraphLoading:!0,duration:60,autoFetch:!1},n.store=e.detailStore,n.module=e.module,n}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.interval&&clearInterval(this.interval)}},{key:"getData",value:function(){var e=this,t=this.props.match.params,a=t.cluster,r=t.namespace,n=t.name,o=this.state.duration;this.setState({isGraphLoading:!0}),this.store.fetchGraph({cluster:a,namespace:r,app:n,duration:o}).then((function(){e.unmount||e.setState({isGraphLoading:!1})}))}},{key:"renderContent",value:function(){var e=this.state.isGraphLoading,a=this.store.graph,r=a.data,n=a.health;return(0,f.default)(r)||(0,f.default)(r.nodes)?e?p.default.createElement(h.Loading,{className:E.default.loading}):p.default.createElement(v.default,{className:E.default.emptyList,image:"/assets/traffic-management.svg",title:t("NO_DATA"),desc:t("TRAFFIC_MONITORING_UNAVAILABLE_DESC")}):p.default.createElement("div",{className:E.default.main},p.default.createElement(y.default,{className:E.default.graph,data:r,health:n,store:this.store,loading:e,onFetch:this.handleRefresh}))}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderHeader(),this.renderContent())}}]),r}(p.default.Component))||o)||o;a.default=S},4764:function(e,t,a){e.exports={main:"_2iPG6M7MGzMxbPdbDEWKTS",graph:"_1DNY4Ckxe-2VlpvOswSGWY",tracing:"_1U4YYpaZmy1CDP-SUtxJ2s",cardHeader:"_5WqgHfksXAkqCtNbKg2cp",operations:"_3j3KuCy2m-nw5bx3PSeVbs",timeSelect:"_3cUfdUjfIvXc4idqihXfUw",emptyList:"_1t2nghWnemmp2lgjyfQ4Ql",loading:"_1KcntxCOV8bBEr8KBomL9T"}},4765:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(63)),f=n(r(0)),p=r(433),m=r(186),h=r(14),v=r(239),g=r(52),_=n(r(833)),y=r(1906),E=n(r(4766));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=(0,v.inject)("detailStore")(o=(0,v.observer)(o=function(e){(0,l.default)(r,e);var a=b(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).detailStore=e.detailStore,t.module=e.module,t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.disposer=(0,h.when)((function(){return!(0,d.default)(e.detailStore.detail)}),(function(){return e.getData()}))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"getData",value:function(){var e=(0,h.toJS)(this.detailStore.detail).selector,t={namespace:this.namespace,cluster:this.cluster,labelSelector:(0,g.joinSelector)(e)};this.store.fetchList(t).then()}},{key:"renderEmpty",value:function(){return f.default.createElement(_.default,{icon:"istio",title:t("NO_GRAYSCALE_RELEASE_TASK_FOUND"),desc:t("NO_GRAYSCALE_RELEASE_TASK_FOUND_DESC")})}},{key:"renderHeader",value:function(){var e=this.props.match.params,a=e.cluster,r=e.workspace,n=e.namespace;return f.default.createElement("div",{className:E.default.header},f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement("p",{className:E.default.headerTip},t("GRAYSCALE_RELEASE_DESC"))),f.default.createElement(m.Column,{className:"is-narrow"},f.default.createElement(p.Link,{to:"/".concat(r,"/clusters/").concat(a,"/projects/").concat(n,"/grayrelease/cates")},this.canCreate&&f.default.createElement(m.Button,{type:"control"},t("CREATE_GRAYSCALE_RELEASE_TASK"))))))}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return globals.app.hasPermission({cluster:t,workspace:a,project:r,module:"grayscale-release",action:"create"})}}]),r}(y.Component))||o)||o;a.default=S},4766:function(e,t,a){e.exports={header:"_1NlihNgeoVDB3R-HjKAgoV",headerTip:"_2ewkr_stwSEswFhRlWo0M8"}},4767:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,c=n(r(58)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(63)),m=n(r(0)),h=r(14),v=r(239),g=r(52),_=r(186),y=n(r(1915)),E=n(r(1917)),b=n(r(949)),S=r(845),O=n(r(443)),R=n(r(4777));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,v.inject)("detailStore")(o=(0,v.observer)(o=function(e){(0,u.default)(r,e);var a=T(r);function r(e){var n;(0,l.default)(this,r),(n=a.call(this,e)).fetchTracing=function(){var e=(0,h.toJS)(n.detailStore.detail),t=k({cluster:e.cluster,namespace:e.namespace,service:n.state.serviceName},n.state.query);n.detailStore.fetchTracing(t)},n.showDetailModal=function(e){n.setState({showDetailModal:!0,selectItem:e})},n.hideDetailModal=function(){n.setState({showDetailModal:!1,selectItem:{}})},n.handleServiceChange=function(e){n.setState({serviceName:e},(function(){n.fetchTracing()}))},n.handleRefresh=function(){n.fetchTracing()},n.handleLookbackChange=function(e){var t=e.step,a=e.times,r=(0,c.default)(e,["step","times"]),o=(0,S.getTimeRange)({step:(0,S.getMinuteValue)(t),times:a}),s=o.start,l=o.end,i=1e3*(r.start||s),u=1e3*(r.end||l);n.setState((function(e){return{query:k(k({},e.query),{},{start:i,end:u})}}),(function(){return n.fetchTracing()}))},n.handleLimitChange=function(e){n.setState((function(t){return{query:k(k({},t.query),{},{limit:e})}}),(function(){return n.fetchTracing()}))},n.serviceRenderer=function(e){return m.default.createElement("span",null,t("SERVICE_VALUE",{value:e.label}))},n.detailStore=e.detailStore,n.serviceStore=new O.default;var o=(0,S.getTimeRange)({step:(0,S.getMinuteValue)("5m"),times:60}),s=o.start,i=o.end;return n.state={showDetailModal:!1,selectItem:{},serviceName:"",query:{limit:5,start:1e3*s,end:1e3*i}},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.disposer=(0,h.when)((function(){return!(0,p.default)(e.detailStore.detail)}),(function(){return e.getData()}))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"getData",value:function(){var e=this,t=(0,h.toJS)(this.detailStore.detail),a=t.selector,r=t.cluster,n=t.namespace;if(a){var o={cluster:r,namespace:n,labelSelector:(0,g.joinSelector)(a)};this.serviceStore.fetchListByK8s(o).then((function(){var t=(0,h.toJS)(e.serviceStore.list.data);t.length>0&&e.setState({serviceName:t[0].name},(function(){return e.fetchTracing()}))}))}}},{key:"renderOperations",value:function(){var e=this.state.query;return m.default.createElement("div",{className:R.default.operations},m.default.createElement(_.Select,{options:this.services,value:this.state.serviceName,prefixIcon:m.default.createElement(_.Icon,{name:"appcenter"}),onChange:this.handleServiceChange,valueRenderer:this.serviceRenderer}),m.default.createElement(b.default,{className:R.default.timeSelect,onChange:this.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down"}),m.default.createElement(_.Select,{value:e.limit,options:this.limitOptions,onChange:this.handleLimitChange}),m.default.createElement(_.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"renderTracing",value:function(){var e=this.detailStore,t=e.tracing,a=e.isTracingLoading,r=this.serviceStore.list,n=r.isLoading,o=r.data;return!n&&(0,p.default)(o)?null:m.default.createElement(y.default,{loading:a,data:t.data,operations:this.renderOperations(),onItemClick:this.showDetailModal})}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderTracing(),m.default.createElement(E.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetailModal}))}},{key:"limitOptions",get:function(){return[{label:t("LAST_NUM_RECORDS",{num:5}),value:5},{label:t("LAST_NUM_RECORDS",{num:10}),value:10},{label:t("LAST_NUM_RECORDS",{num:20}),value:20},{label:t("LAST_NUM_RECORDS",{num:50}),value:50}]}},{key:"services",get:function(){return this.serviceStore.list.data.map((function(e){return{label:e.name,value:e.name,type:e.type}}))}}]),r}(m.default.Component))||o)||o;a.default=D},4777:function(e,t,a){e.exports={operations:"_-15riN_1mHwid5aQz6xwZ",timeSelect:"_1jv6axOPYBWD4xXsZgGZBB"}},4778:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(26)),g=n(r(63)),_=r(186),y=r(52),E=r(791),b=n(r(1206)),S=n(r(836)),O=n(r(795)),R=n(r(805)),A=n(r(4779)),k=n(r(4785));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.inject)("rootStore","projectStore")(o=(0,h.observer)(o=(0,E.trigger)(o=function(e){(0,u.default)(r,e);var a=C(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new b.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("openpitrix.app.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"editTemplate",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("openpitrix.app.template.edit",D(D({},e.props.match.params),{},{detail:(0,m.toJS)(e.store.detail),success:e.fetchData}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,g.default)(a))return[{name:t("CLUSTER"),value:(0,y.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,y.showNameAndAlias)(o,"project")},{name:t("STATUS"),value:e.renderStatus()},{name:t("VERSION"),value:(0,v.default)(a,"version.name","-")},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)((0,v.default)(a,"create_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,y.getLocalTime)((0,v.default)(a,"status_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.owner}]},e.renderStatus=function(){var a=(0,m.toJS)(e.store.detail),r=a.status;return a.additional_info?p.default.createElement(_.Tooltip,{content:a.additional_info},p.default.createElement(O.default,{name:t(r),type:r})):p.default.createElement(O.default,{name:t(r),type:r})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,m.toJS)(this.store.detail),a={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(_.Loading,{className:"ks-page-loading"});var r={icon:p.default.createElement("label",{className:k.default.icon},p.default.createElement(S.default,{iconLetter:(0,v.default)(e,"app.name"),src:(0,v.default)(e,"app.icon"),alt:""})),module:this.module,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return p.default.createElement(R.default,(0,c.default)({stores:a},r,{routes:A.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"/".concat(a,"/clusters/").concat(t,"/projects/").concat(r,"/").concat(this.module,"/template")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||o)||o)||o;a.default=P},4779:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(4780)),c=r(a(4781)),s=r(a(4783)),l="/:workspace/clusters/:cluster/projects/:namespace/applications/template/:id",i=[{path:"".concat(l,"/resource-status"),name:"resource-status",title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(l,"/template"),title:"APP_TEMPLATE",component:c.default,exact:!0},{path:"".concat(l,"/config"),title:"APP_SETTINGS",component:s.default,exact:!0},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/resource-status"),exact:!0})];t.default=i},4780:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(239),f=r(a(1447)),p=r(a(1227)),m=r(a(1448)),h=r(a(1449));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var g=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,s.default)(a,e);var t=v(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,c.default)(a,[{key:"render",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector;return u.default.createElement(u.default.Fragment,null,u.default.createElement(m.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(f.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(p.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(h.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),a}(u.default.Component))||n)||n;t.default=g},4781:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(63)),p=r(14),m=r(239),h=r(186),v=n(r(942)),g=n(r(935)),_=n(r(801)),y=n(r(1001)),E=n(r(1721)),b=n(r(4782));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=h.Tabs.TabPanel,R=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,l.default)(r,e);var a=S(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleTabChange=function(e){t.setState({tab:e})},t.state={tab:"readme"},t.store=e.detailStore,t.appVersionStore=new v.default,t.appFileStore=new g.default,(0,p.when)((function(){return!(0,f.default)(t.store.detail)}),(function(){return t.getData()})),t}return(0,s.default)(r,[{key:"getData",value:function(){var e=(0,p.toJS)(this.store).detail,t=e.app_id,a=e.version_id;this.appVersionStore.fetchList({app_id:t,status:"active"}),this.appFileStore.fetch({app_id:t,version_id:a})}},{key:"renderReadme",value:function(){var e=this.appFileStore.files;return e["README.md"]||this.appFileStore.isLoading?d.default.createElement(y.default,{source:e["README.md"],className:b.default.markdown}):d.default.createElement("p",null,t("NO_APP_DESC_FOUND"))}},{key:"renderSettings",value:function(){var e=this.appFileStore.files;return d.default.createElement(E.default,{files:e})}},{key:"render",value:function(){var e=this.state.tab;return d.default.createElement(_.default,{title:t("APP_TEMPLATE"),className:b.default.wrapper},d.default.createElement(h.Tabs,{type:"button",activeName:e,onChange:this.handleTabChange},d.default.createElement(O,{label:t("APP_DESCRIPTION"),name:"readme"},this.renderReadme()),d.default.createElement(O,{label:t("CHART_FILES"),name:"settings"},this.renderSettings())))}}]),r}(d.default.Component))||o)||o;a.default=R},4782:function(e,t,a){e.exports={wrapper:"_2pJacSa2ZXD7ds8HDYKw9l"}},4783:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=n(r(789)),m=n(r(841)),h=n(r(4784));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,f.inject)("rootStore","detailStore")(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=v(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.store,a=e.isLoading,r=e.detail;return d.default.createElement(p.default,{title:t("APP_SETTINGS"),loading:a},d.default.createElement(m.default,{className:h.default.yaml,value:r.env||""}))}},{key:"store",get:function(){return this.props.detailStore}}]),r}(d.default.Component))||o)||o;a.default=g},4784:function(e,t,a){e.exports={yaml:"_2YSMOV4ZrOWlGFo_rsn-eF"}},4785:function(e,t,a){e.exports={icon:"_2hq_evgK9i1gndFgNOU-kf"}},4786:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(134),r(5),r(11),r(29),r(6),r(84),r(30),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(38),r(62),r(64),r(7),r(32),r(1244),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(29),r(6),r(84),r(30),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(319),r(23),r(57),r(24),r(17),r(85),r(38),r(62),r(64),r(7),r(32),r(1244),r(1921),r(1922),r(1923),r(1924),r(1925);var c,s=n(r(315)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=r(239),g=n(r(26)),_=n(r(63)),y=r(186),E=n(r(240)),b=r(52),S=r(791),O=o(r(1428)),R=n(r(1926)),A=n(r(1927)),k=n(r(4817)),T=r(1245),D=r(816),C=n(r(325)),P=n(r(836)),N=n(r(795)),I=n(r(1218)),w=n(r(805)),x=n(r(4818)),M=n(r(4876));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var B=(0,v.inject)("rootStore")(c=(0,v.observer)(c=(0,S.trigger)(c=function(e){(0,d.default)(r,e);var a=U(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new O.default,e.rebalanceStore=new k.default,e.backupStore=new R.default,e.websocket=new C.default,e.fetchData=function(){var t=e.props.match.params;return e.store.fetchDetail(t)},e.getOperations=function(){var a=e.props.match.params,r=a.cluster,n=a.workspace,o=a.namespace,c=a.id,s=(0,h.toJS)(e.store.detail),l={cluster:r,workspace:n,namespace:o,cluster_id:c,app_id:s.app_id};return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("openpitrix.db.app.edit",{type:t(e.name),detail:j(j({},l),{},{name:s.name,description:s.description}),success:e.fetchData})}},{key:"createDBNode",icon:"backup",text:t("SCALE_OUT"),action:"create",onClick:function(){return e.trigger("openpitrix.db.createDBNode",j(j({type:t(e.name)},l),{},{shardsCount:s.shardsCount,nodes:s.nodes,icon:"backup",specificationsObject:s.specifications,storage:s.storage,storages:s.storages}))},disabled:!s.isRunning},{key:"rebalance",icon:"loadbalancer",text:t("REBALANCE_NODES"),action:"manage",onClick:function(){return e.trigger("openpitrix.db.kafka.rebalance",j({type:t(e.name),icon:"loadbalancer",title:t("REBALANCE_NODES"),store:e.rebalanceStore},l))},disabled:!s.isRunning,includeApp:[D.RadonDBAppId.Kafka]},{key:"Specification",icon:"scaling",text:t("ADJUST_RESOURCES"),action:"manage",onClick:function(){return e.trigger("openpitrix.db.adjustSpecification",j(j(j({},e.props.match.params),{},{icon:"scaling",cpu:s.cpu,memory:s.memory,specificationsObject:s.specifications,nodes:s.nodes},l),{},{success:function(e){if(s.app_id===D.RadonDBAppId.RedisCluster||s.app_id===D.RadonDBAppId.RedisSentinel){var t=(0,D.getCpuAndMemoryFromSpecifications)(e).memory;(new A.default).updateParams(j(j({},l),{},{params:{maxmemory:1024*parseFloat(t)-50}}))}}}))},disabled:!s.isRunning},{key:"storage",icon:"storage",text:t("EXPAND_VOLUME"),action:"manage",onClick:function(){return e.trigger("openpitrix.db.adjustCapacity",j({type:t(e.name),icon:"storage",storage:s.realStorage||s.storage,storages:s.realStorages||s.storages,nodes:s.nodes},l))},disabled:!s.allowVolumeExpansion||!s.isRunning},{key:"backup",icon:"backup",text:t("BACK_UP"),action:"manage",onClick:function(){return e.trigger("openpitrix.db.backup.create",j({type:t(e.name),icon:"backup",title:t("BACK_UP"),store:e.backupStore,image:s.sidecarImage,success:e.fetchData},l))},disabled:!s.isRunning,includeApp:[D.RadonDBAppId.MySQL,D.RadonDBAppId.PostgreSQL]},{key:"autoBackup",icon:"storage",text:t("SET_AUTO_BACKUP"),action:"manage",onClick:function(){var a=s.backupSchedule,r=0,n=!1;return s.app_id===D.RadonDBAppId.PostgreSQL&&(a=(0,g.default)(s,"spec.backupCluster.backupToS3.cron.schedule",""),n="REDUNDANCY 10"!==(0,g.default)(s,"spec.backupCluster.backupToS3.policy.retention","REDUNDANCY 10"),r=(0,g.default)(s,"spec.backupCluster.backupToS3.policy.retention","REDUNDANCY 10").replace(/[^\d]/g,"")),e.trigger("openpitrix.db.backup.auto",j({type:t(e.name),icon:"backup",title:t("SET_AUTO_BACKUP"),store:e.backupStore,backupSchedule:a,isScheduledDelete:n,retentionTime:n?parseInt(r,10):30,success:e.fetchData},l))},disabled:!s.isRunning,includeApp:[D.RadonDBAppId.MySQL,D.RadonDBAppId.PostgreSQL]},{key:"update",icon:"update",text:t("UPDATE_VERSION"),action:"edit",show:e.showUpdateVersion,onClick:function(){e.trigger("openpitrix.db.app.update",{resource:s.name,title:t("UPDATE_VERSION"),detail:j({},l),success:function(){return e.fetchData}})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:s,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,h.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,_.default)(a))return[{name:t("CLUSTER"),value:(0,b.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,b.showNameAndAlias)(o,"project")},{name:t("STATUS"),value:e.renderStatus()},{name:t("APP_TEMPLATE"),value:(0,g.default)(a,"app_name","-")},{name:t("VERSION"),value:(0,g.default)(a,"version","-")},{name:t("KERNEL_VERSION"),value:(0,g.default)(a,"databaseVersionText")},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)((0,g.default)(a,"creationTimestamp")).format("YYYY-MM-DD HH:mm:ss")}].filter((function(e){return e.value}))},e.getCustomAttrs=function(){var a=e.store.detail,r=a.services,n=void 0===r?[]:r,o=a.secret,c=o?(0,T.binaryStringToBlob)(o.cert):new Blob,s=n.filter((function(e){return"ClusterIP"===e.type})),l=n.filter((function(e){return"NodePort"===e.type}));return m.default.createElement("div",{"data-test":"detail-attrs"},m.default.createElement("div",{style:{margin:"24px 0 12px"},className:"h6"},t("ACCESS_ADDRESS_PL")),s.length>0&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{style:{margin:"12px 0 4px"}},"CluserIP"),m.default.createElement(I.default,null,s.map((function(e){var a=e.label,r=e.value;return m.default.createElement(I.default.Item,{name:t(a),value:r||"-"})})))),l.length>0&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{style:{margin:"12px 0 4px"}},"NodePort"),m.default.createElement(I.default,null,l.map((function(e){var a=e.label,r=e.value;return m.default.createElement(I.default.Item,{name:t(a),value:r||"-"})})))),o&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{style:{margin:"24px 0 12px"},className:"h6"},""),m.default.createElement(I.default,null,m.default.createElement(I.default.Item,{name:t("CA_CERTIFICATE"),value:o.cert?m.default.createElement("div",{className:M.default.flexRow},m.default.createElement("span",null,"ca.p12"),m.default.createElement("a",{href:URL.createObjectURL(c),download:"ca.p12"},t("DOWNLOAD"))):"-"}),m.default.createElement(I.default.Item,{name:t("CA_PASSWORD"),value:m.default.createElement("div",{className:M.default.flexRow},m.default.createElement("span",null,o.password||"-"),m.default.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),(0,T.copyToClipboard)(o.password).then((function(){E.default.success({content:t("COPY_SUCCESSFUL")})}))}},t("COPY")))}),m.default.createElement(I.default.Item,{name:t("VALIDITY_PERIOD"),value:o.validDate||"-"}))))},e.renderStatus=function(){var a=(0,h.toJS)(e.store.detail),r=a.status;return r?a.additional_info?m.default.createElement(y.Tooltip,{content:a.additional_info},m.default.createElement(N.default,{name:t("DATABASE_STATUS_".concat(r.replace(/[-\s]/g,"_").toUpperCase())),type:O.DMPStatus[r]||r})):m.default.createElement(N.default,{name:t("DATABASE_STATUS_".concat(r.replace(/[-\s]/g,"_").toUpperCase())),type:O.DMPStatus[r]||r,flicker:!0}):"-"},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.fetchData().then((function(){e.initWebsocket(),(0,g.default)(e.store,"detail.app_id")===D.RadonDBAppId.Kafka&&e.rebalanceStore.fetchList(e.props.match.params)}))}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"checkAlertRulesPermission",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasClusterModule(t,"alerting")&&globals.app.hasPermission({cluster:t,project:a,action:"view",module:"alert-rules"})}},{key:"initWebsocket",value:function(){var e=this,t=this.props.match.params.id,a=this.store.getWatchUrl({name:t});a&&(this.websocket.watch(a),this.disposer=(0,h.reaction)((function(){return e.websocket.message}),(function(t){"Manifest"===t.object.kind&&["MODIFIED","DELETED"].includes(t.type)&&e.fetchData()}),{name:a}))}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var a=m.default.createElement("label",{className:M.default.icon},m.default.createElement(P.default,{iconLetter:this.store.detail.kind,src:this.store.detail.icon,alt:""})),r=this.store.detail.app_id,n={icon:a,module:this.module,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations().filter((function(e){return!e.includeApp||e.includeApp.includes(r)})),attrs:this.getAttrs(),customAttrs:this.getCustomAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]},o=x.default;this.checkAlertRulesPermission()||(o=x.default.filter((function(e){return!e.path.includes("alerting")})));var c=x.default.find((function(e){return e.path.includes("account")}));return c&&(r===D.RadonDBAppId.Kafka?c.title="KAFKA_USERS":c.title="DATABASE_USERS"),o=o.filter((function(e){return e.excludeApp?!e.excludeApp.includes(r):!e.only||e.only===r})),m.default.createElement(w.default,(0,s.default)({stores:e},n,{routes:o}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"/".concat(a,"/clusters/").concat(t,"/projects/").concat(r,"/").concat(this.module,"/database")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showUpdateVersion",get:function(){var e=(0,h.toJS)(this.store.detail);return!(e.app_id!==D.RadonDBAppId.OpenSearch||!e.databaseVersionText.includes("2.3.0"))}}]),r}(m.default.Component))||c)||c)||c;a.default=B},4816:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(27),r(4),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.getCKParams=function(e){var a=e.replicasCount,r=e.tcpPort,n=e.httpPort,c=e.max_server_memory_usage,s=e.max_memory_usage;return[{key:"replicasCount",name:t("REPLICA_COUNT"),value:a,description:t("DBPARAM_REPLICACOUNT_DESC"),range:{min:1,max:3},disable:!0},{key:"tcpPort",name:t("TCP_PORT"),value:(0,o.default)(r,"port"),description:t("DBPARAM_TCPPORT_DESC"),range:{min:1,max:65535},disable:!0},{key:"httpPort",name:t("HTTP_PORT"),value:(0,o.default)(n,"port"),description:t("DBPARAM_HTTPPORT_DESC"),range:{min:1,max:65535},disable:!0},{key:"max_server_memory_usage",name:"max_server_memory_usage",value:Number(c),description:t("DBPARAM_MAX_SERVER_MEMORY_USAGE"),restart:t("YES"),range:{min:1e9,max:128e9}},{key:"max_memory_usage",name:"max_memory_usage",value:Number(s),description:t("DBPARAM_MAX_MEMORY_USAGE"),restart:t("NO"),range:{min:2e7,max:128e9}}]},a.getPGParams=function(e){return[{key:"database_version",name:t("DBPARAM_DATABASE_VERSION"),value:(0,o.default)(e,"pgVersion","12"),description:t("DBPARAM_DATABASE_VERSION_DESC"),restart:"-",disable:!0},{key:"port",name:"port",value:(0,o.default)(e,"port",5432),description:t("DBPARAM_PG_PORT_DESC"),range:{min:1,max:65534},restart:t("YES")},{key:"fsync",name:"fsync",value:(0,o.default)(e,"fsync",!0).toString(),description:t("DBPARAM_FSYNC_DESC"),restart:t("NO"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"full_page_writes",name:"full_page_writes",value:(0,o.default)(e,"full_page_writes",!0).toString(),description:t("DBPARAM_FULL_PAGE_WRITES_DESC"),restart:t("NO"),type:"select",options:[{label:"true",value:"true"}]},{key:"wal_compression",name:"wal_compression",value:(0,o.default)(e,"wal_compression",!1).toString(),description:t("DBPARAM_WAL_COMPRESSION_DESC"),restart:t("NO"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"jit",name:"jit",value:(0,o.default)(e,"jit",!1).toString(),description:t("DBPARAM_JIT_DESC"),restart:t("NO"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"autovacuum",name:"autovacuum",value:(0,o.default)(e,"autovacuum",!0).toString(),description:t("DBPARAM_AUTOVACUUM_DESC"),restart:t("NO"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"synchronous_commit",name:"synchronous_commit",value:(0,o.default)(e,"synchronous_commit","on"),description:t("DBPARAM_SYNCHRONOUS_COMMIT_DESC"),restart:t("NO"),type:"select",options:[{label:"off",value:"off"},{label:"local",value:"local"},{label:"on",value:"on"},{label:"remote_write",value:"remote_write"},{label:"remote_apply",value:"remote_apply"}]},{key:"wal_level",name:"wal_level",value:(0,o.default)(e,"wal_level","replica"),description:t("DBPARAM_LOG_WAL_LEVEL_DESC"),restart:t("YES"),type:"select",options:[{label:"replica",value:"replica"},{label:"logical",value:"logical"}]},{key:"temp_buffers",name:"temp_buffers",value:parseInt((0,o.default)(e,"temp_buffers","1MB"),10),description:t("DBPARAM_TEMP_BUFFERS_DESC"),restart:t("NO"),range:{min:1,max:32768}},{key:"work_mem",name:"work_mem",value:parseInt((0,o.default)(e,"work_mem","4MB"),10),description:t("DBPARAM_WORK_MEM_DESC"),range:{min:1,max:1024},restart:t("NO")},{key:"maintenance_work_mem",name:"maintenance_work_mem",value:parseInt((0,o.default)(e,"maintenance_work_mem","64MB"),10),description:t("DBPARAM_MAINTENANCE_WORK_MEM_DESC"),range:{min:64,max:1024},restart:t("NO")},{key:"shared_buffers",name:"shared_buffers",value:parseInt((0,o.default)(e,"shared_buffers","128MB"),10),description:t("DBPARAM_SHARED_BUFFERS_DESC"),range:{min:128,max:10240},restart:t("YES")},{key:"max_connections",name:"max_connections",value:(0,o.default)(e,"max_connections",100),description:t("DBPARAM_MAX_CONNECTIONS_DESC"),range:{min:100,max:262143},restart:t("YES")},{key:"max_worker_processes",name:"max_worker_processes",value:(0,o.default)(e,"max_worker_processes",20),description:t("DBPARAM_WORKER_PROCESSES_DESC"),range:{min:10,max:65536},restart:t("YES")},{key:"wal_writer_delay",name:"wal_writer_delay",value:(0,o.default)(e,"wal_writer_delay",10),description:t("DBPARAM_WAL_WRITER_DELAY_DESC"),range:{min:1,max:1e4},restart:t("NO")},{key:"wal_writer_flush_after",name:"wal_writer_flush_after",value:parseInt((0,o.default)(e,"wal_writer_flush_after","1MB"),10),description:t("DBPARAM_WAL_WRITER_FLUSH_AFTER_DESC"),restart:t("NO"),range:{min:1,max:1024}},{key:"commit_delay",name:"commit_delay",value:(0,o.default)(e,"commit_delay",0),description:t("DBPARAM_COMMIT_DELAY_DESC"),range:{min:0,max:1e5},restart:t("NO")},{key:"commit_siblings",name:"commit_siblings",value:(0,o.default)(e,"commit_siblings",5),description:t("DBPARAM_COMMIT_SIBLINGS_DESC"),range:{min:0,max:1e3},restart:t("NO")},{key:"bgwriter_delay",name:"bgwriter_delay",value:(0,o.default)(e,"bgwriter_delay",10),description:t("DBPARAM_BGWRITER_DELAY_DESC"),range:{min:10,max:1e4},restart:t("NO")},{key:"bgwriter_lru_maxpages",name:"bgwriter_lru_maxpages",value:(0,o.default)(e,"bgwriter_lru_maxpages",1e3),description:t("DBPARAM_BGWRITER_LRU_MAXPAGES_DESC"),range:{min:0,max:1073741823},restart:t("NO")},{key:"bgwriter_flush_after",name:"bgwriter_flush_after",value:parseInt((0,o.default)(e,"bgwriter_flush_after","512KB"),10),description:t("DBPARAM_BGWRITER_FLUSH_AFTER_DESC"),restart:t("NO"),range:{min:0,max:2048}},{key:"statement_timeout",name:"statement_timeout",value:(0,o.default)(e,"statement_timeout",0),description:t("DBPARAM_STATEMENT_TIMEOUT_DESC"),range:{min:0,max:2147483647},restart:t("NO")},{key:"idle_in_transaction_session_timeout",name:"idle_in_transaction_session_timeout",value:(0,o.default)(e,"idle_in_transaction_session_timeout",864e5),description:t("DBPARAM_IDLE_IN_TRANSACTION_SESSION_TIMEOUT_DESC"),range:{min:0,max:2147483647},restart:t("NO")},{key:"log_min_duration_statement",name:"log_min_duration_statement",value:(0,o.default)(e,"log_min_duration_statement",1e4),description:t("DBPARAM_LOG_MIN_DURATION_STATEMENT_DESC"),range:{min:-1,max:2147483647},restart:t("NO")},{key:"checkpoint_timeout",name:"checkpoint_timeout",value:(0,o.default)(e,"checkpoint_timeout",300),description:t("DBPARAM_CHECKPOINT_TIMEOUT_DESC"),range:{min:30,max:86400},restart:t("NO")},{key:"autovacuum_vacuum_cost_delay",name:"autovacuum_vacuum_cost_delay",value:(0,o.default)(e,"autovacuum_vacuum_cost_delay",0),description:t("DBPARAM_AUTOVACUUM_VACUUM_COST_DELAY_DESC"),range:{min:-1,max:100},restart:t("NO")},{key:"autovacuum_vacuum_cost_limit",name:"autovacuum_vacuum_cost_limit",value:(0,o.default)(e,"autovacuum_vacuum_cost_limit",1e4),description:t("DBPARAM_AUTOVACUUM_VACUUM_COST_LIMIT_DESC"),restart:t("NO"),range:{min:-1,max:1e4}},{key:"autovacuum_vacuum_scale_factor",name:"autovacuum_vacuum_scale_factor",value:(0,o.default)(e,"autovacuum_vacuum_scale_factor",.02),description:t("DBPARAM_AUTOVACUUM_VACUUM_SCALE_FACTOR_DESC"),restart:t("NO"),integer:!1,range:{min:.01,max:100}},{key:"autovacuum_analyze_scale_factor",name:"autovacuum_analyze_scale_factor",value:(0,o.default)(e,"autovacuum_analyze_scale_factor",.05),description:t("DBPARAM_AUTOVACUUM_ANALYZE_SCALE_FACTOR_DESC"),restart:t("NO"),integer:!1,range:{min:.01,max:100}},{key:"vacuum_defer_cleanup_age",name:"vacuum_defer_cleanup_age",value:(0,o.default)(e,"vacuum_defer_cleanup_age",1e4),description:t("DBPARAM_VACUUM_DEFER_CLEANUP_AGE_DESC"),restart:t("NO"),range:{min:0,max:1e6}},{key:"seq_page_cost",name:"seq_page_cost",value:(0,o.default)(e,"seq_page_cost",1),description:t("DBPARAM_SEQ_PAGE_COST_DESC"),restart:t("NO"),integer:!1,range:{min:0,max:1e8}},{key:"random_page_cost",name:"random_page_cost",value:(0,o.default)(e,"random_page_cost",1.1),description:t("DBPARAM_RANDOM_PAGE_COST_DESC"),restart:t("NO"),integer:!1,range:{min:0,max:1e8}},{key:"cpu_tuple_cost",name:"cpu_tuple_cost",value:(0,o.default)(e,"cpu_tuple_cost",.01),description:t("DBPARAM_CPU_TUPLE_COST_DESC"),restart:t("NO"),integer:!1,range:{min:0,max:1e8}},{key:"cpu_index_tuple_cost",name:"cpu_index_tuple_cost",value:(0,o.default)(e,"cpu_index_tuple_cost",.005),description:t("DBPARAM_CPU_INDEX_TUPLE_COST_DESC"),restart:t("NO"),integer:!1,range:{min:0,max:1e8}},{key:"log_min_messages",name:"log_min_messages",value:(0,o.default)(e,"log_min_messages","WARNING"),description:t("DBPARAM_LOG_MIN_MESSAGES_DESC"),restart:t("NO"),type:"select",options:c.map((function(e){return{label:e,value:e}}))},{key:"log_statement",name:"log_statement",value:(0,o.default)(e,"log_statement","none"),description:t("DBPARAM_LOG_STATEMENT_DESC"),restart:t("NO"),type:"select",options:[{label:"none",value:"none"},{label:"ddl",value:"ddl"},{label:"mod",value:"mod"},{label:"all",value:"all"}]},{key:"max_wal_senders",name:"max_wal_senders",value:(0,o.default)(e,"max_wal_senders",15),description:t("DBPARAM_MAX_WAL_SENDERS_DESC"),restart:t("YES"),range:{min:10,max:262143}},{key:"max_replication_slots",name:"max_replication_slots",value:(0,o.default)(e,"max_replication_slots",15),description:t("DBPARAM_MAX_REPLICATION_SLOTS_DESC"),restart:t("YES"),range:{min:10,max:262143}}]},a.getMySQLParams=function(e){return[{key:"audit_log_policy",name:"audit_log_policy",value:e.audit_log_policy||"NONE",description:t("DBPARAM_AUDIT_LOG_POLICY_DESC"),restart:t("YES"),type:"select",options:[{label:"ALL",value:"ALL"},{label:"LOGINS",value:"LOGINS"},{label:"QEURIES",value:"QEURIES"},{label:"NONE",value:"NONE"}]},{key:"audit_log_format",name:"audit_log_format",value:e.audit_log_format||"OLD",description:t("DBPARAM_AUDIT_LOG_FORMAT_DESC"),restart:t("YES"),type:"select",options:[{label:"OLD",value:"OLD"},{label:"NEW",value:"NEW"},{label:"JSON",value:"JSON"}]},{key:"audit_log_rotate_on_size",name:"audit_log_rotate_on_size",value:parseInt(e.audit_log_rotate_on_size||104857600,10),description:t("DBPARAM_AUDIT_LOG_ROTATE_ON_SIZE_DESC"),restart:t("YES"),range:{min:20971520,max:2147483648}},{key:"audit_log_rotations",name:"audit_log_rotations",value:e.audit_log_rotations||6,description:t("DBPARAM_AUDIT_LOG_ROTATIONS_DESC"),restart:t("YES"),range:{min:6,max:48}},{key:"default_storage_engine",name:"default_storage_engine",value:e.default_storage_engine||"InnoDB",description:t("DBPARAM_DEFAULT_STORAGE_ENGINE_DESC"),restart:t("YES"),type:"select",options:[{label:"InnoDB",value:"InnoDB"},{label:"TokuDB",value:"TokuDB"}]},{key:"innodb_buffer_pool_size",name:"innodb_buffer_pool_size",value:parseInt((0,o.default)(e,"innodb_buffer_pool_size","-1"),10),description:t("DBPARAM_INNODB_BUFFER_POOL_SIZE_DESC"),restart:t("YES"),range:{min:-1}},{key:"character_set_server",name:"character_set_server",value:(0,o.default)(e,"character_set_server","utf8mb4"),description:t("DBPARAM_CHARACTER_SET_SERVER_DESC"),restart:t("YES"),type:"text"},{key:"expire_logs_days",name:"expire_logs_days",value:parseInt((0,o.default)(e,"expire_logs_days","7"),10),description:t("DBPARAM_EXPIRE_LOGS_DAYS_DESC"),restart:t("YES"),range:{min:0,max:14}},{key:"long_query_time",name:"long_query_time",value:parseInt((0,o.default)(e,"long_query_time","3"),10),description:t("DBPARAM_LONG_QUERY_TIME_DESC"),restart:t("YES"),range:{min:0,max:300}},{key:"max_connections",name:"max_connections",value:parseInt((0,o.default)(e,"max_connections","1024"),10),description:t("DBPARAM_MAX_CONNECTIONS_DESC"),restart:t("YES"),range:{min:1024,max:16384}},{key:"max_connect_errors",name:"max_connect_errors",value:parseInt((0,o.default)(e,"max_connect_errors","655360"),10),description:t("DBPARAM_MAX_CONNECT_ERRORS_DESC"),restart:t("YES"),range:{min:1,max:4294967295}},{key:"wait_timeout",name:"wait_timeout",value:parseInt((0,o.default)(e,"wait_timeout","3600"),10),description:t("DBPARAM_WAIT_TIMEOUT_DESC"),restart:t("YES"),range:{min:1,max:2147483}},{key:"max_allowed_packet",name:"max_allowed_packet",value:parseInt((0,o.default)(e,"max_allowed_packet","1073741824"),10),description:t("DBPARAM_MAX_ALLOWED_PACKET_DESC"),restart:t("YES"),range:{min:1024,max:1073741824}},{key:"slave_parallel_workers",name:"slave_parallel_workers",value:parseInt((0,o.default)(e,"slave_parallel_workers","8"),10),description:t("DBPARAM_SLAVE_PARALLEL_WORKERS_DESC"),restart:t("YES"),range:{min:0,max:1024}},{key:"skip_name_resolve",name:"skip_name_resolve",value:(0,o.default)(e,"skip_name_resolve","0"),description:t("DBPARAM_SKIP_NAME_RESOLVE_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"autocommit",name:"autocommit",value:(0,o.default)(e,"autocommit","1"),description:t("DBPARAM_AUTOCOMMIT_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"transaction_isolation",name:"transaction_isolation",value:(0,o.default)(e,"transaction_isolation","READ-COMMITTED"),description:t("DBPARAM_TRANSACTION_ISOLATION_DESC"),restart:t("YES"),type:"select",options:[{label:"REPEATABLE-READ",value:"REPEATABLE-READ"},{label:"READ-UNCOMMITTED",value:"READ-UNCOMMITTED"},{label:"READ-COMMITTED",value:"READ-COMMITTED"},{label:"SERIALIZABLE",value:"SERIALIZABLE"}]},{key:"innodb_flush_method",name:"innodb_flush_method",value:(0,o.default)(e,"innodb_flush_method","O_DIRECT"),description:t("DBPARAM_INNODB_FLUSH_METHOD_DESC"),restart:t("YES"),type:"select",options:[{label:"O_DIRECT",value:"O_DIRECT"},{label:"fsync",value:"fsync"}]},{key:"innodb_use_native_aio",name:"innodb_use_native_aio",value:(0,o.default)(e,"innodb_use_native_aio","1"),description:t("DBPARAM_INNODB_USE_NATIVE_AIO_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]}]},a.getMongoDBParams=function(e){return[{key:"port",name:"port",value:(0,o.default)(e,"port",27017),description:t("DBPARAM_MONGODB_PORT_DESC"),restart:t("YES")},{key:"oplogSizeMB",name:"oplogSizeMB",value:(0,o.default)(e,"oplogSizeMB",10240),description:t("DBPARAM_OPLOGSIZEMB_DESC"),range:{min:1024,max:51200},restart:t("NO")},{key:"maxIncomingConnections",name:"maxIncomingConnections",value:(0,o.default)(e,"maxIncomingConnections",1e4),description:t("DBPARAM_MAXINCOMINGCONNECTIONS_DESC"),range:{min:3e3,max:2e4},restart:t("YES")},{key:"cursorTimeoutMillis",name:"cursorTimeoutMillis",value:(0,o.default)(e,"cursorTimeoutMillis",6e5),description:t("DBPARAM_CURSORTIMEOUTMILLIS_DESC"),restart:t("YES")},{key:"profilingMode",name:"profilingMode",value:(0,o.default)(e,"profilingMode","off"),description:t("DBPARAM_PROFILINGMODE_MODE"),restart:t("YES"),type:"select",options:[{label:"off",value:"off"},{label:"slowOp",value:"slowOp"},{label:"all",value:"all"}]},{key:"slowOpThresholdMs",name:"slowOpThresholdMs",value:(0,o.default)(e,"slowOpThresholdMs",100),description:t("DBPARAM_SLOWOPTHRESHOLDMS_DESC"),restart:t("YES")},{key:"enableMajorityReadConcern",name:"enableMajorityReadConcern",value:(0,o.default)(e,"enableMajorityReadConcern","true").toString(),description:t("DBPARAM_ENABLEMAJORITYREADCONCERN_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"commandVerbosity",name:"commandVerbosity",value:(0,o.default)(e,"commandVerbosity","0"),description:t("DBPARAM_COMMANDVERBOSITY_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"indexVerbosity",name:"indexVerbosity",value:(0,o.default)(e,"indexVerbosity","0"),description:t("DBPARAM_INDEXVERBOSITY_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"queryVerbosity",name:"queryVerbosity",value:(0,o.default)(e,"queryVerbosity","0"),description:t("DBPARAM_QUERYVERBOSITY_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"networkVerbosity",name:"networkVerbosity",value:(0,o.default)(e,"networkVerbosity","0"),description:t("DBPARAM_NETWORKVERBOSITY_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]},{key:"writeVerbosity",name:"writeVerbosity",value:(0,o.default)(e,"writeVerbosity","0"),description:t("DBPARAM_WRITEVERBOSITY_DESC"),restart:t("YES"),type:"select",options:[{label:"0",value:"0"},{label:"1",value:"1"}]}]},a.getRedisParams=function(e){return[{key:"endpointType",name:t("ENDPOINT_TYPE"),value:(0,o.default)(e,"endpointType","false").toString(),description:t("ENDPOINT_TYPE_DESC"),restart:t("YES"),type:"select",options:[{label:t("ENABLED"),value:"true"},{label:t("DISABLED"),value:"false"}]},{key:"maxmemory",name:"maxmemory",value:parseInt((0,o.default)(e,"maxmemory",0),10),description:t("DBPARAM_MAXMEMORY_DESC"),range:{min:0},restart:t("NO")},{key:"activerehashing",name:"activerehashing",value:(0,o.default)(e,"activerehashing","yes"),description:t("DBPARAM_ACTIVEREHASHING_DESC"),restart:t("NO"),type:"select",options:[{label:"yes",value:"yes"},{label:"no",value:"no"}]},{key:"appendonly",name:"appendonly",value:(0,o.default)(e,"appendonly","yes"),description:t("DBPARAM_APPENDONLY_DESC"),restart:t("NO"),type:"select",options:[{label:"yes",value:"yes"},{label:"no",value:"no"}]},{key:"appendfsync",name:"appendfsync",value:(0,o.default)(e,"appendfsync","everysec"),description:t("DBPARAM_APPENDFSYNC_DESC"),restart:t("NO"),type:"select",options:[{label:"no",value:"no"},{label:"everysec",value:"everysec"},{label:"always",value:"always"}]},{key:"cluster-node-timeout",name:"cluster-node-timeout",value:parseInt((0,o.default)(e,"cluster-node-timeout",15e3),10),description:t("DBPARAM_CLUSTER_NODE_TIMEOUT_DESC"),range:{min:1e3,max:6e6},restart:t("NO")},{key:"latency-monitor-threshold",name:"latency-monitor-threshold",value:parseInt((0,o.default)(e,"latency-monitor-threshold",0),10),description:t("DBPARAM_LATENCY_MONITOR_THRESHOLD_DESC"),range:{min:0},restart:t("NO")},{key:"maxclients",name:"maxclients",value:parseInt((0,o.default)(e,"maxclients",102400),10),description:t("DBPARAM_MAXCLIENTS_DESC"),range:{min:10},restart:t("NO")},{key:"maxmemory-policy",name:"maxmemory-policy",value:(0,o.default)(e,"maxmemory-policy","volatile-lru"),description:t("DBPARAM_MAXMEMORY_POLICY_DESC"),restart:t("NO"),type:"select",options:[{label:"volatile-lru",value:"volatile-lru"},{label:"allkeys-lru",value:"allkeys-lru"},{label:"volatile-random",value:"volatile-random"},{label:"allkeys-random",value:"allkeys-random"},{label:"volatile-ttl",value:"volatile-ttl"},{label:"noevtication",value:"noevtication"}]},{key:"maxmemory-samples",name:"maxmemory-samples",value:parseInt((0,o.default)(e,"maxmemory-samples",3),10),description:t("DBPARAM_MAXMEMORY_SAMPLES_DESC"),range:{min:1,max:100},restart:t("NO")},{key:"min-slaves-max-lag",name:"min-slaves-max-lag",value:parseInt((0,o.default)(e,"min-slaves-max-lag",10),10),description:t("DBPARAM_MIN_SLAVES_MAX_LAG_DESC"),range:{min:0},restart:t("NO")},{key:"min-slaves-to-write",name:"min-slaves-to-write",value:parseInt((0,o.default)(e,"min-slaves-to-write",0),10),description:t("DBPARAM_MIN_SLAVES_TO_WRITE_DESC"),range:{min:0},restart:t("NO")},{key:"no-appendfsync-on-rewrite",name:"no-appendfsync-on-rewrite",value:(0,o.default)(e,"no-appendfsync-on-rewrite","no"),description:t("DBPARAM_NO_APPENDFSYNC_ON_REWRITE_DESC"),restart:t("NO"),type:"select",options:[{label:"yes",value:"yes"},{label:"no",value:"no"}]},{key:"notify-keyspace-events",name:"notify-keyspace-events",value:(0,o.default)(e,"notify-keyspace-events",""),description:t("DBPARAM_NOTIFY_KEYSPACE_EVENTS_DESC"),restart:t("NO")},{key:"repl-backlog-size",name:"repl-backlog-size",value:parseInt((0,o.default)(e,"repl-backlog-size",1),10),description:t("DBPARAM_REPL_BACKLOG_SIZE_DESC"),range:{min:1,max:1024},restart:t("NO")},{key:"repl-backlog-ttl",name:"repl-backlog-ttl",value:parseInt((0,o.default)(e,"repl-backlog-ttl",3600),10),description:t("DBPARAM_REPL_BACKLOG_TTL_DESC"),range:{min:1,max:864e3},restart:t("NO")},{key:"repl-timeout",name:"repl-timeout",value:parseInt((0,o.default)(e,"repl-timeout",60),10),description:t("DBPARAM_REPL_TIMEOUT_DESC"),range:{min:1,max:86400},restart:t("NO")},{key:"set-max-intset-entries",name:"set-max-intset-entries",value:parseInt((0,o.default)(e,"set-max-intset-entries",512),10),description:t("DBPARAM_SET_MAX_INTSET_ENTRIES_DESC"),restart:t("NO")},{key:"slowlog-log-slower-than",name:"slowlog-log-slower-than",value:parseInt((0,o.default)(e,"slowlog-log-slower-than",-1),10),description:t("DBPARAM_SLOWLOG_LOG_SLOWER_THAN_DESC"),range:{min:-1,max:6e7},restart:t("NO")},{key:"slowlog-max-len",name:"slowlog-max-len",value:parseInt((0,o.default)(e,"slowlog-max-len",128),10),description:t("DBPARAM_SLOWLOG_MAX_LEN_DESC"),range:{min:1},restart:t("NO")},{key:"hash-max-ziplist-entries",name:"hash-max-ziplist-entries",value:parseInt((0,o.default)(e,"hash-max-ziplist-entries",512),10),description:t("DBPARAM_HASH_MAX_ZIPLIST_ENTRIES_DESC"),range:{min:0},restart:t("NO")},{key:"hash-max-ziplist-value",name:"hash-max-ziplist-value",value:parseInt((0,o.default)(e,"hash-max-ziplist-value",64),10),description:t("DBPARAM_HASH_MAX_ZIPLIST_VALUE_DESC"),range:{min:0},restart:t("NO")},{key:"list-max-ziplist-entries",name:"list-max-ziplist-entries",value:parseInt((0,o.default)(e,"list-max-ziplist-entries",512),10),description:t("DBPARAM_LIST_MAX_ZIPLIST_ENTRIES_DESC"),range:{min:0},restart:t("NO")},{key:"list-max-ziplist-value",name:"list-max-ziplist-value",value:parseInt((0,o.default)(e,"list-max-ziplist-value",64),10),description:t("DBPARAM_LIST_MAX_ZIPLIST_VALUE_DESC"),range:{min:0},restart:t("NO")},{key:"zset-max-ziplist-entries",name:"zset-max-ziplist-entries",value:parseInt((0,o.default)(e,"zset-max-ziplist-entries",128),10),description:t("DBPARAM_ZSET_MAX_ZIPLIST_ENTRIES_DESC"),range:{min:0},restart:t("NO")},{key:"zset-max-ziplist-value",name:"zset-max-ziplist-value",value:parseInt((0,o.default)(e,"zset-max-ziplist-value",64),10),description:t("DBPARAM_ZSET_MAX_ZIPLIST_VALUE_DESC"),range:{min:0},restart:t("NO")},{key:"lua-time-limit",name:"lua-time-limit",value:parseInt((0,o.default)(e,"lua-time-limit",5e3),10),description:t("DBPARAM_LUA_TIME_LIMIT_DESC"),range:{min:0},restart:t("NO")},{key:"io-threads-do-reads",name:"io-threads-do-reads",value:(0,o.default)(e,"io-threads-do-reads","no"),description:t("DBPARAM_IO_THREADS_DO_READS_DESC"),restart:t("YES"),type:"select",options:[{label:"yes",value:"yes"},{label:"no",value:"no"}]},{key:"io-threads",name:"io-threads",value:parseInt((0,o.default)(e,"io-threads",1),10),description:t("DBPARAM_IO_THREADS_DESC"),range:{min:1,max:100},restart:t("YES")},{key:"logfile",name:"logfile",value:(0,o.default)(e,"logfile","logfile"),description:t("DBPARAM_LOGFILE_DESC"),restart:t("YES"),type:"select",options:[{label:"logfile",value:"logfile"},{label:"stdout",value:"stdout"}]}]},a.getECKParams=function(e){return[{key:"thread_pool.write.queue_size",name:"thread_pool.write.queue_size",value:(0,o.default)(e,'["thread_pool.write.queue_size"]',1e4),description:t("DBPARAM_THREAD_POOL_WRITE_QUEUE_SIZE_DESC"),range:{min:1e3,max:2e4},restart:t("YES")},{key:"thread_pool.search.queue_size",name:"thread_pool.search.queue_size",value:(0,o.default)(e,'["thread_pool.search.queue_size"]',1e3),description:t("DBPARAM_THREAD_POOL_SEARCH_QUEUE_SIZE_DESC"),range:{min:1e3,max:2e4},restart:t("YES")},{key:"action.destructive_requires_name",name:"action.destructive_requires_name",value:(0,o.default)(e,'["action.destructive_requires_name"]',"true").toString(),description:t("DBPARAM_ACTION_DESTRUCTIVE_REQUIRES_NAME_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"http.cors.enabled",name:"http.cors.enabled",value:(0,o.default)(e,'["http.cors.enabled"]',"false").toString(),description:t("DBPARAM_HTTP_CORS_ENABLED_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"http.cors.allow-origin",name:"http.cors.allow-origin",value:(0,o.default)(e,'["http.cors.allow-origin"]',""),description:t("DBPARAM_HTTP_CORS_ALLOW_ORIGIN_DESC"),restart:t("YES")},{key:"indices.fielddata.cache.size",name:"indices.fielddata.cache.size",value:(0,o.default)(e,'["indices.fielddata.cache.size"]',"-1b"),description:t("DBPARAM_INDICES_FIELDDATA_CACHE_SIZE"),restart:t("YES")},{key:"indices.memory.index_buffer_size",name:"indices.memory.index_buffer_size",value:(0,o.default)(e,'["indices.memory.index_buffer_size"]',"10%"),description:t("DBPARAM_INDICES_MEMORY_INDEX_BUFFER_SIZE_DESC"),restart:t("YES")},{key:"indices.queries.cache.size",name:"indices.queries.cache.size",value:(0,o.default)(e,'["indices.queries.cache.size"]',"10%"),description:t("DBPARAM_INDICES_QUERIES_CACHE_SIZE_DESC"),restart:t("YES")},{key:"indices.requests.cache.size",name:"indices.requests.cache.size",value:(0,o.default)(e,'["indices.requests.cache.size"]',"1%"),description:t("DBPARAM_INDICES_REQUESTS_CACHE_SIZE_DESC"),restart:t("YES")},{key:"reindex.remote.whitelist",name:"reindex.remote.whitelist",value:(0,o.default)(e,'["reindex.remote.whitelist"]',""),description:t("DBPARAM_REINDEX_REMOTE_WHITELIST_DESC"),restart:t("YES")},{key:"cluster.routing.allocation.awareness.attributes",name:"cluster.routing.allocation.awareness.attributes",value:(0,o.default)(e,'["cluster.routing.allocation.awareness.attributes"]',""),description:t("DBPARAM_CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES_DESC"),restart:t("YES")}]},a.getKafkaParams=function(e,a){if("kafka"===a)return[{key:"num.partitions",name:"num.partitions",value:(0,o.default)(e,"num.partitions",3),description:t("DBPARAM_KAFKA_PARTITIONS_DESC"),range:{min:1,max:1e3},restart:t("YES")},{key:"tls",name:"TLS",value:(0,o.default)(e,"tls","true").toString(),description:t("DBPARAM_KAFKA_TLS_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"authentication",name:t("DBPARAM_AUTHENTICATION_TYPE"),value:(0,o.default)(e,"authentication","tls").toString(),description:t("DBPARAM_KAFKA_AUTHENTICATION_TYPE_DESC"),restart:t("YES"),type:"select",options:[{label:t("NO_AUTH"),value:"no"},{label:"TLS",value:"tls"},{label:"SCRAM-SHA-512",value:"scram-sha-512"}]},{key:"nodePort",name:t("DBPARAM_NODE_PORT"),value:(0,o.default)(e,"nodePort","false").toString(),description:t("DBPARAM_NODE_PORT_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"log.retention.bytes",name:"log.retention.bytes",value:(0,o.default)(e,'["log.retention.bytes"]',-1),description:t("DBPARAM_LOG_RETENTION_BYTES_DESC"),range:{min:-1,max:2147483647},restart:t("YES")},{key:"log.retention.hours",name:"log.retention.hours",value:(0,o.default)(e,'["log.retention.hours"]',168),description:t("DBPARAM_LOG_RETENTION_HOURS_DESC"),range:{min:1,max:8760},restart:t("YES")},{key:"log.segment.bytes",name:"log.segment.bytes",value:(0,o.default)(e,'["log.segment.bytes"]',1073741824),description:t("DBPARAM_LOG_SEGMENT_BYTES_DESC"),range:{min:1048576,max:2147483647},restart:t("YES")},{key:"log.segment.delete.delay.ms",name:"log.segment.delete.delay.ms",value:(0,o.default)(e,'["log.segment.delete.delay.ms"]',6e4),description:t("DBPARAM_LOG_SEGMENT_DELETE_DELAY_MS_DESC"),range:{min:0},restart:t("YES")},{key:"log.roll.hours",name:"log.roll.hours",value:(0,o.default)(e,'["log.roll.hours"]',168),description:t("DBPARAM_LOG_ROLL_HOURS_DESC"),range:{min:1},restart:t("YES")},{key:"offsets.topic.replication.factor",name:"offsets.topic.replication.factor",value:(0,o.default)(e,'["offsets.topic.replication.factor"]',3),description:t("DBPARAM_OFFSETS_TOPIC_REPLICATION_FACTOR"),range:{min:1,max:100},restart:t("YES")},{key:"log.cleanup.policy",name:"log.cleanup.policy",value:(0,o.default)(e,'["log.cleanup.policy"]',"delete"),description:t("DBPARAM_LOG_CLEANUP_POLICY_DESC"),restart:t("YES"),type:"select",options:[{label:"delete",value:"delete"},{label:"compact",value:"compact"}]},{key:"log.cleaner.enable",name:"log.cleaner.enable",value:(0,o.default)(e,'["log.cleaner.enable"]',"true").toString(),description:t("DBPARAM_LOG_CLEANER_ENABLE_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"compression.type",name:"compression.type",value:(0,o.default)(e,'["compression.type"]',"producer"),description:t("DBPARAM_COMPRESSION_TYPE_DESC."),restart:t("YES"),type:"select",options:["uncompressed","zstd","lz4","snappy","gzip","producer"].map((function(e){return{label:e,value:e}}))},{key:"message.max.bytes",name:"message.max.bytes",value:(0,o.default)(e,'["message.max.bytes"]',1e6),description:t("DBPARAM_MESSAGE_MAX_BYTES_DESC"),range:{min:1024,max:2147483647},restart:t("YES")},{key:"num.network.threads",name:"num.network.threads",value:(0,o.default)(e,'["num.network.threads"]',3),description:t("DBPARAM_NUM_NETWORK_THREADS_DESC"),range:{min:1},restart:t("YES")},{key:"num.io.threads",name:"num.io.threads",value:(0,o.default)(e,'["num.io.threads"]',8),description:t("DBPARAM_NUM_IO_THREADS_DESC"),range:{min:1,max:20},restart:t("YES")},{key:"num.recovery.threads.per.data.dir",name:"num.recovery.threads.per.data.dir",value:(0,o.default)(e,'["num.recovery.threads.per.data.dir"]',1),description:t("DBPARAM_NUM_RECOVERY_THREADS_PER_DATA_DIR_DESC"),range:{min:1},restart:t("YES")},{key:"num.replica.fetchers",name:"num.replica.fetchers",value:(0,o.default)(e,'["num.replica.fetchers"]',1),description:t("DBPARAM_NUM_REPLICA_FETCHERS_DESC"),range:{min:1,max:10},restart:t("YES")},{key:"queued.max.requests",name:"queued.max.requests",value:(0,o.default)(e,'["queued.max.requests"]',500),description:t("DBPARAM_QUEUED_MAX_REQUESTS_DESC"),range:{min:1,max:5e3},restart:t("YES")},{key:"replica.lag.time.max.ms",name:"replica.lag.time.max.ms",value:(0,o.default)(e,'["replica.lag.time.max.ms"]',1e4),description:t("DBPARAM_REPLICA_LAG_TIME_MAX_MS_DESC"),range:{min:6e3,max:99999},restart:t("YES")},{key:"group.max.session.timeout.ms",name:"group.max.session.timeout.ms",value:(0,o.default)(e,'["group.max.session.timeout.ms"]',18e5),description:t("DBPARAM_GROUP_MAX_SESSION_TIMEOUT_MS_DESC"),range:{min:0,max:9999999},restart:t("YES")},{key:"group.min.session.timeout.ms",name:"group.min.session.timeout.ms",value:(0,o.default)(e,'["group.min.session.timeout.ms"]',6e3),description:t("DBPARAM_GROUP_MIN_SESSION_TIMEOUT_MS_DESC"),range:{min:0,max:6e4},restart:t("YES")},{key:"auto.create.topics.enable",name:"auto.create.topics.enable",value:(0,o.default)(e,'["auto.create.topics.enable"]',"true").toString(),description:t("DBPARAM_AUTO_CREATE_TOPICS_ENABLE_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"min.insync.replicas",name:"min.insync.replicas",value:(0,o.default)(e,'["min.insync.replicas"]',2),description:t("DBPARAM_MIN_INSYNC_REPLICAS_DESC"),range:{min:1,max:6},restart:t("YES")},{key:"default.replication.factor",name:"default.replication.factor",value:(0,o.default)(e,'["default.replication.factors"]',3),description:t("DBPARAM_DEFAULT_REPLICATION_FACTORS_DESC"),range:{min:1,max:6},restart:t("YES")},{key:"jmxOptions",name:"jmxOptions",value:(0,o.default)(e,"jmxOptions","disable"),description:t("DBPARAM_JMXOPTIONS_DESC"),restart:t("YES"),type:"select",options:[{label:"disable",value:"disable"},{label:"enable",value:"enable"},{label:"password",value:"password"}]}];return[{key:"tickTime",name:"tickTime",value:(0,o.default)(e,"tickTime",2e3),range:{min:1,max:1e6},description:t("DBPARAM_TICKTIME_DESC"),restart:t("YES")},{key:"initLimit",name:"initLimit",value:(0,o.default)(e,"initLimit",5),range:{min:1,max:1e6},description:t("DBPARAM_INITLIMIT_DESC"),restart:t("YES")},{key:"syncLimit",name:"syncLimit",value:(0,o.default)(e,"syncLimit",2),range:{min:1,max:1e6},description:t("DBPARAM_SYNCLIMIT_DESC"),restart:t("YES")},{key:"maxClientCnxns",name:"maxClientCnxns",value:(0,o.default)(e,"maxClientCnxns",1e3),range:{min:1,max:1e6},description:t("DBPARAM_MAXCLIENTCNXNS_DESC"),restart:t("YES")},{key:"autopurge.snapRetainCount",name:"autopurge.snapRetainCount",value:(0,o.default)(e,'["autopurge.snapRetainCount"]',3),range:{min:3,max:1e8},description:t("DBPARAM_AUTOPURGE_SNAPRETAINCOUNT_DESC"),restart:t("YES")},{key:"autopurge.purgeInterval",name:"autopurge.purgeInterval",value:(0,o.default)(e,'["autopurge.purgeInterval"]',1),range:{min:0,max:720},description:t("DBPARAM_AUTOPURGE_PURGEINTERVAL_DESC"),restart:t("YES")},{key:"jmxOptions",name:"jmxOptions",value:(0,o.default)(e,"jmxOptions","disable"),description:t("DBPARAM_JMXOPTIONS_DESC"),restart:t("YES"),type:"select",options:[{label:"disable",value:"disable"},{label:"enable",value:"enable"},{label:"password",value:"password"}]}]},a.getOpenSearchParams=function(e){return[{key:"thread_pool.write.queue_size",name:"thread_pool.write.queue_size",value:(0,o.default)(e,'["thread_pool.write.queue_size"]',1e4),description:t("DBPARAM_THREAD_POOL_WRITE_QUEUE_SIZE_DESC"),range:{min:1e3,max:2e4},restart:t("YES")},{key:"thread_pool.search.queue_size",name:"thread_pool.search.queue_size",value:(0,o.default)(e,'["thread_pool.search.queue_size"]',1e3),description:t("DBPARAM_THREAD_POOL_SEARCH_QUEUE_SIZE_DESC"),range:{min:1e3,max:2e4},restart:t("YES")},{key:"action.destructive_requires_name",name:"action.destructive_requires_name",value:(0,o.default)(e,'["action.destructive_requires_name"]',"true").toString(),description:t("DBPARAM_ACTION_DESTRUCTIVE_REQUIRES_NAME_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"http.cors.enabled",name:"http.cors.enabled",value:(0,o.default)(e,'["http.cors.enabled"]',"false").toString(),description:t("DBPARAM_HTTP_CORS_ENABLED_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"http.cors.allow-origin",name:"http.cors.allow-origin",value:(0,o.default)(e,'["http.cors.allow-origin"]',""),description:t("DBPARAM_HTTP_CORS_ALLOW_ORIGIN_DESC"),restart:t("YES")},{key:"indices.fielddata.cache.size",name:"indices.fielddata.cache.size",value:(0,o.default)(e,'["indices.fielddata.cache.size"]',"-1b"),description:t("DBPARAM_INDICES_FIELDDATA_CACHE_SIZE"),restart:t("YES")},{key:"indices.memory.index_buffer_size",name:"indices.memory.index_buffer_size",value:(0,o.default)(e,'["indices.memory.index_buffer_size"]',"10%"),description:t("DBPARAM_INDICES_MEMORY_INDEX_BUFFER_SIZE_DESC"),restart:t("YES")},{key:"indices.queries.cache.size",name:"indices.queries.cache.size",value:(0,o.default)(e,'["indices.queries.cache.size"]',"10%"),description:t("DBPARAM_INDICES_QUERIES_CACHE_SIZE_DESC"),restart:t("YES")},{key:"indices.requests.cache.size",name:"indices.requests.cache.size",value:(0,o.default)(e,'["indices.requests.cache.size"]',"1%"),description:t("DBPARAM_INDICES_REQUESTS_CACHE_SIZE_DESC"),restart:t("YES")},{key:"reindex.remote.whitelist",name:"reindex.remote.whitelist",value:(0,o.default)(e,'["reindex.remote.whitelist"]',""),description:t("DBPARAM_REINDEX_REMOTE_WHITELIST_DESC"),restart:t("YES")},{key:"logstash.PIPELINE_WORKERS",name:"LOGSTASH_PIPELINE_WORKERS",value:Number((0,o.default)(e,"logstash.PIPELINE_WORKERS",1)),description:t("DBPARAM_PIPELINE_WORKERS_DESC"),range:{min:1},restart:t("YES")},{key:"logstash.PIPELINE_BATCH_SIZE",name:"LOGSTASH_PIPELINE_BATCH_SIZE",value:Number((0,o.default)(e,"logstash.PIPELINE_BATCH_SIZE",125)),description:t("DBPARAM_PIPELINE_BATCH_SIZE_DESC"),range:{min:1},restart:t("YES")},{key:"logstash.PIPELINE_BATCH_DELAY",name:"LOGSTASH_PIPELINE_BATCH_DELAY",value:Number((0,o.default)(e,"logstash.PIPELINE_BATCH_DELAY",50)),description:t("DBPARAM_PIPELINE_BATCH_DELAY_DESC"),range:{min:1},restart:t("YES")},{key:"logstash.PIPELINE_UNSAFE_SHUTDOWN",name:"LOGSTASH_PIPELINE_UNSAFE_SHUTDOWN",value:(0,o.default)(e,"logstash.PIPELINE_UNSAFE_SHUTDOWN","false").toString(),description:t("DBPARAM_PIPELINE_UNSAFE_SHUTDOWN_DESC"),restart:t("YES"),type:"select",options:[{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"logstash.PIPELINE_ORDERED",name:"LOGSTASH_PIPELINE_ORDERED",value:(0,o.default)(e,"logstash.PIPELINE_ORDERED","auto"),description:t("DBPARAM_PIPELINE_ORDERED_DESC"),restart:t("YES"),type:"select",options:[{label:"auto",value:"auto"},{label:"true",value:"true"},{label:"false",value:"false"}]},{key:"logstash.PIPELINE.ECS_COMPATIBILITY",name:"LOGSTASH_PIPELINE.ECS_COMPATIBILITY",value:(0,o.default)(e,'logstash["PIPELINE.ECS_COMPATIBILITY"]',"v8"),description:t("DBPARAM_ECS_COMPATIBILITY_DESC"),restart:t("YES"),type:"select",options:[{label:"disabled",value:"disabled"},{label:"v1",value:"v1"},{label:"v8",value:"v8"}]},{key:"logstash.LOG_LEVEL",name:"LOGSTASH_LOG_LEVEL",value:(0,o.default)(e,"logstash.LOG_LEVEL","info"),description:t("DBPARAM_LOG_LEVEL_DESC"),restart:t("YES"),type:"select",options:[{label:"fatal",value:"fatal"},{label:"error",value:"error"},{label:"warn",value:"warn"},{label:"info",value:"info"},{label:"debug",value:"debug"},{label:"trace",value:"trace"}]},{key:"logstash.LOG_FORMAT",name:"LOGSTASH_LOG_FORMAT",value:(0,o.default)(e,"logstash.LOG_FORMAT","plain"),description:t("DBPARAM_LOG_FORMAT_DESC"),restart:t("YES"),type:"select",options:[{label:"plain",value:"plain"},{label:"json",value:"json"}]},{key:"logstash.jvm",name:"LOGSTASH_JVM",value:Number((0,o.default)(e,"logstash.jvm","50")),description:t("DBPARAM_LOG_JVM_DESC"),range:{min:50,max:75},restart:t("YES")}]},r(45),r(18),r(42),r(27),r(4),r(319),r(17);var o=n(r(26));var c=["DEBUG5","DEBUG","INFO","NOTICE","WARNING","ERROR"]},4817:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(18),a(48),a(27),a(137),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(245),a(48),a(442),a(191),a(42),a(159),a(27),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var n=r(a(43)),o=r(a(61)),c=r(a(31)),s=r(a(58));a(41);var l,i=r(a(44)),u=r(a(36)),d=r(a(37)),f=r(a(55)),p=r(a(56)),m=r(a(51)),h=r(a(49)),v=r(a(26)),g=r(a(74)),_=a(14),y=r(a(68)),E=a(1015),b=a(1093);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(l=function(e){(0,f.default)(r,e);var t,a=R(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).getListUrl=function(e){var t=e.cluster,a=e.namespace,r=e.id;return"/apis".concat(globals.app.isMultiCluster&&t?"/clusters/".concat(t):"","/kafka.strimzi.io/v1beta2/namespaces/").concat(a,"/kafkarebalances").concat(r?"?labelSelector=strimzi.io/cluster=".concat(r):"")},e.getResourceUrl=e.getListUrl,e.statusMap={"True-Ready":"Success","True-NotReady":"Failed"},e.statusNameMap={Success:"REBALANCE_SUCCESS",Failed:"REBALANCE_FAILED",Creating:"REBALANCING"},e}return(0,d.default)(r,[{key:"fetchList",value:(t=(0,i.default)(n.default.mark((function e(){var t,a,r,c,l,i,u,d,f,p=this,m=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},a=t.cluster,t.workspace,r=t.namespace,c=t.more,l=t.id,i=(0,s.default)(t,["cluster","workspace","namespace","more","id"]),this.list.isLoading=!0,i.sortBy="createTime",i.limit!==1/0&&-1!==i.limit||(i.limit=-1,i.page=1),i.limit=i.limit||10,e.next=7,request.get(this.getResourceUrl({cluster:a,namespace:r,id:l}));case 7:return u=e.sent,d=((0,v.default)(u,"items")||[]).reverse().slice(0,3).map((function(e){var t=p.statusMap[(0,E.getStatusFromYaml)(e)]||"Creating";return{cluster:a,namespace:r,status:t,name:(0,v.default)(e,"metadata.name"),creationTimestamp:(0,v.default)(e,"metadata.creationTimestamp"),statusName:p.statusNameMap[t]}})),f=Number(u.total||d.length),this.list.update(O(O({data:c?[].concat((0,o.default)(this.list.data),(0,o.default)(d)):d,total:f},i),{},{limit:Number(i.limit)||10,page:Number(i.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",d);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getYamlFromData",value:function(e){var t=JSON.parse(JSON.stringify(b.kafkaYaml.rebalance));return(0,g.default)(t,"metadata.name","".concat(e,"-").concat(Date.now())),(0,g.default)(t,'metadata.labels["strimzi.io/cluster"]',e),t}},{key:"create",value:function(e){var t=Object.assign({},e),a=this.getYamlFromData(t.id);return delete t.id,request.post(this.getListUrl(t),a)}}]),r}(y.default),(0,h.default)(l.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchList"),l.prototype),(0,h.default)(l.prototype,"create",[_.action],Object.getOwnPropertyDescriptor(l.prototype,"create"),l.prototype),l);t.default=A},4818:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=a(816),c=r(a(4819)),s=r(a(4858)),l=r(a(4862)),i=r(a(4864)),u=r(a(4869)),d=r(a(4871)),f=r(a(4873)),p="/:workspace/clusters/:cluster/projects/:namespace/applications/database/:id",m=[{path:"".concat(p,"/resource-status"),name:"resource-status",title:"OVERVIEW",component:c.default,exact:!0},{path:"".concat(p,"/monitoring"),title:"MONITORING",component:d.default,exact:!0},{path:"".concat(p,"/alerting"),title:"ALERT_RULE_GROUP_PL",component:u.default,exact:!0},{path:"".concat(p,"/account"),title:"DATABASE_USERS",component:s.default,exact:!0,excludeApp:[o.RadonDBAppId.MongoDB,o.RadonDBAppId.Elasticsearch,o.RadonDBAppId.OpenSearch]},{path:"".concat(p,"/backup"),title:"BACKUPS",component:l.default,exact:!0,excludeApp:[o.RadonDBAppId.ClickHouse,o.RadonDBAppId.RedisSentinel,o.RadonDBAppId.RedisCluster,o.RadonDBAppId.MongoDB,o.RadonDBAppId.Elasticsearch,o.RadonDBAppId.Kafka,o.RadonDBAppId.OpenSearch]},{path:"".concat(p,"/topic"),title:"TOPICS",component:f.default,exact:!0,only:o.RadonDBAppId.Kafka},{path:"".concat(p,"/config"),title:"PARAMETERS",component:i.default,exact:!0},(0,n.getIndexRoute)({path:p,to:"".concat(p,"/resource-status"),exact:!0})];t.default=m},4819:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(23),r(57),r(24),r(17),r(85),r(62),r(64),r(7);var o,c,s,l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(239),v=r(186),g=n(r(243)),_=n(r(789)),y=n(r(795)),E=n(r(836)),b=r(52),S=r(816),O=r(1428),R=n(r(4820)),A=n(r(4857));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=m.default.createContext({nodeIP:"",updateState:null}),P=(0,h.inject)("detailStore")(o=(0,h.observer)((s=c=function(e){(0,d.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).deleteNode=function(e){var a=t.props.match.params,r=a.cluster,n=a.namespace,o=a.id,c=a.workspace;t.store.deleteNode({workspace:c,podName:e,namespace:n,cluster:r,cluster_id:o})},t.store=e.detailStore,t.module=e.module,t.state={nodeIP:""},t}return(0,u.default)(r,[{key:"hasDeleteAction",get:function(){return(globals.app.getActions({workspace:this.props.match.params.workspace,module:"applications"})||[]).includes("delete")}}]),(0,u.default)(r,[{key:"renderPanel",value:function(){var e=this.store.detail,a=e.app_id,r=e.status,n=e.creationTimestamp,o=e.shardsCount,c=e.cpu,s=e.memory,l=e.storage,i=e.replicasCount,u=(0,g.default)(n),d=[];if(a===S.RadonDBAppId.Elasticsearch)d.push.apply(d,[{iconSrc:"/assets/pod.svg",label:this.store.detail.nodes.master,desc:1===this.store.detail.nodes.master?t("PRIMARY_NODE"):t("PRIMARY_NODE_PL")},{iconName:"database",label:this.store.detail.nodes.hot,desc:1===this.store.detail.nodes.hot?t("HOT_NODE"):t("HOT_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.warm,desc:1===this.store.detail.nodes.warm?t("WARM_NODE"):t("WARM_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.cold,desc:1===this.store.detail.nodes.cold?t("COLD_NODE"):t("COLD_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.kibana,desc:1===this.store.detail.nodes.cold?t("KIBANA_NODE"):t("KIBANA_NODE_PL")}]);else if(a===S.RadonDBAppId.OpenSearch)d.push.apply(d,[{iconSrc:"/assets/pod.svg",label:this.store.detail.nodes.master,desc:1===this.store.detail.nodes.master?t("PRIMARY_NODE"):t("PRIMARY_NODE_PL")},{iconName:"database",label:this.store.detail.nodes.hot,desc:1===this.store.detail.nodes.hot?t("HOT_NODE"):t("HOT_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.warm,desc:1===this.store.detail.nodes.warm?t("WARM_NODE"):t("WARM_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.cold,desc:1===this.store.detail.nodes.cold?t("COLD_NODE"):t("COLD_NODE_PL")},{iconName:"cluster",label:this.store.detail.nodes.dashboard,desc:t("DASHBOARD_NODE")},{iconName:"cluster",label:this.store.detail.nodes.logstash,desc:t("LOGSTASH_NODE")}]);else if(a===S.RadonDBAppId.Kafka){var f=this.store.detail.specifications.kafka,p=this.store.detail.specifications.zookeeper;d.push.apply(d,[{iconSrc:"/assets/radondb_kafka.svg",label:this.store.detail.nodes.kafka,desc:this.store.detail.nodes.kafka?t("KAFKA_NODE"):t("KAFKA_NODE_PL")},{iconName:"cpu",label:"".concat(parseFloat(f.cpu)>500?t("VALUE_CORES",{value:(0,b.cpuFormat)(f.cpu)}):f.cpu||""," ").concat(f.memory||""," | ").concat(this.store.detail.storages.kafka),desc:t("KAFKA_RESOURCES")},{iconSrc:"/assets/radondb_zookeeper.svg",label:this.store.detail.nodes.zookeeper,desc:1===this.store.detail.nodes.zookeeper?t("ZOOKEEPER_NODE"):t("ZOOKEEPER_NODE_PL")},{iconName:"cpu",label:"".concat(parseFloat(p.cpu)>500?t("VALUE_CORES",{value:(0,b.cpuFormat)(p.cpu)}):p.cpu||""," ").concat(p.memory||""," | ").concat(this.store.detail.storages.zookeeper),desc:t("ZOOKEEPER_RESOURCES")}])}else{if(a===S.RadonDBAppId.ClickHouse)d.push({iconSrc:"/assets/pod.svg",label:o,desc:1===o?t("SHARD"):t("SHARD_PL")}),d.push({iconName:"database",label:i,desc:1===i?t("REPLICA"):t("REPLICA_PL")});else if(a===S.RadonDBAppId.RedisSentinel)d.push({iconSrc:"/assets/pod.svg",label:1,desc:t("PRIMARY_NODE_PL")}),d.push({iconName:"database",label:i,desc:1===i?t("STANDBY_NODE"):t("STANDBY_NODE_PL")});else if(a===S.RadonDBAppId.RedisCluster)d.push({iconSrc:"/assets/pod.svg",label:o,desc:t("PRIMARY_NODE_PL")}),d.push({iconName:"database",label:i,desc:1===i?t("STANDBY_NODE"):t("STANDBY_NODE_PL")});else{var h=a===S.RadonDBAppId.PostgreSQL?o+1:o;d.push({iconSrc:"/assets/pod.svg",label:h,desc:t("NODE_PL")}),d.push({iconName:"database",label:o>0?o-1:o,desc:o-1==1?t("REPLICA"):t("REPLICA_PL")})}d.push({iconName:"cpu",label:"".concat(parseFloat(c)>500?"".concat((0,b.cpuFormat)(c),"Core"):c||""," ").concat(s||""),desc:t("RESOURCES")}),d.push({iconName:"storage",label:l,desc:t("VOLUME")})}return m.default.createElement(_.default,{className:A.default.overview},m.default.createElement("div",null,m.default.createElement("div",{className:A.default.title},t("BASIC_INFORMATION")),m.default.createElement("div",{className:A.default.desc},t("DATABASE_RUNNING_FOR_VALUE",{value:u.toNow(!0)}))),m.default.createElement("div",{className:A.default.info},m.default.createElement("div",{className:A.default.card},m.default.createElement("div",null,r?m.default.createElement(y.default,{name:t("DATABASE_STATUS_".concat(r.replace(/[-\s]/g,"_").toUpperCase())),type:O.DMPStatus[r]||r,flicker:!0}):"-",m.default.createElement("div",{className:A.default.desc},t("STATUS")))),d.map((function(e){var t=e.iconSrc,a=e.iconName,r=e.label,n=e.desc;return m.default.createElement("div",{className:A.default.card,key:"".concat(r).concat(n)},t&&m.default.createElement(E.default,{src:t,iconSize:40}),a&&m.default.createElement(v.Icon,{name:a,size:40}),m.default.createElement("div",{className:A.default.detail},m.default.createElement("div",{className:A.default.label},r),m.default.createElement("div",{className:A.default.desc},n)))}))))}},{key:"render",value:function(){var e=this,t=this.store.detail,a=t.cluster,r=t.namespace,n=t.name,o=t.app_id,c=C.Provider,s=C.Consumer;return m.default.createElement(c,{value:{state:this.state,updateState:function(t){e.setState(T(T({},e.state),t))}}},m.default.createElement(h.Provider,{Consumer:s},this.renderPanel(),m.default.createElement(R.default,{cluster:a,chi:n,namespace:r,prefix:this.prefix,app_id:o,replicasCount:this.store.detail.replicasCount,showDelete:this.hasDeleteAction,deleteNode:this.deleteNode})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),r}(m.default.Component),c.contextType=C,o=s))||o)||o;a.default=P},4820:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.DBNODE_STATUS=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(4821),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(31)),s=n(r(43));r(41);var l,i,u,d=n(r(44)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),g=n(r(0)),_=r(106),y=r(47),E=n(r(3)),b=r(239),S=r(14),O=n(r(854)),R=n(r(26)),A=n(r(1433)),k=n(r(1961)),T=r(816),D=n(r(789)),C=n(r(796)),P=r(793),N=n(r(325)),I=n(r(4856)),w=n(r(1972));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var j=[{text:"RUNNING",value:"Running"},{text:"UPDATING",value:"Updating"},{text:"STOPPED",value:"Stopped"},{text:"PENDING",value:"Pending"}];a.DBNODE_STATUS=j;var U=(l=(0,b.inject)("Consumer"),i=(0,P.withProjectList)({store:new A.default,module:"applications",name:"NODE",rowKey:"name"}),l(u=(0,y.withRouter)(u=i(u=(0,b.observer)(u=function(e){(0,m.default)(r,e);var a=L(r);function r(e){var n;(0,f.default)(this,r),(n=a.call(this,e)).store=null,n.searchName="",n.state={currentMonitorDbNode:[],isShowMonitor:!1,nodeRole:""},n.fetchData=(0,O.default)((function(){var e=n.props,t=e.chi,a=e.namespace,r=e.getData,o=e.app_id;r({namespace:a,chi:t,app_id:o,esKibana:o===T.RadonDBAppId.Elasticsearch})}),2e3),n.deleteNode=function(e){return function(t){var a;t.stopPropagation(),t.preventDefault(),n.props.trigger("resource.delete",{detail:e,type:"NODE",success:(a=(0,d.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.deleteNode(e.deploymentName);case 2:n.searchName="",n.fetchData();case 4:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})})}},n.switchItemShowMonitor=function(e){return function(t){t.stopPropagation(),t.preventDefault(),n.setState(M(M({},n.state),{},{currentMonitorDbNode:e,nodeRole:(0,R.default)(e,"nodeRole","")}),(function(){n.switchShowMonitor(!0)}))}},n.getColumns=function(){var e=n.props,a=e.getSortOrder,r=e.app_id,o=e.showDelete;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),render:function(e,t){return g.default.createElement("div",null," ",g.default.createElement(I.default,{key:"".concat(t.name,"-").concat(t.status),detail:t,app_id:r,switchShowMonitor:n.switchItemShowMonitor(t),deleteNode:n.deleteNode(t),showDelete:o}))}}]};var o=e.store;return n.store=o,n.websocket=new N.default,n.initWebsocket(),n}return(0,p.default)(r,[{key:"initWebsocket",value:function(){var e=this,t=this.props,a=t.chi,r=t.namespace,n=t.app_id,o=this.props.match.params.cluster,c=this.props.store.getWatchListUrl({namespace:r,chi:a,app_id:n,cluster:o});c&&r&&(this.websocket.watch(c),this.disposer=(0,S.reaction)((function(){return e.websocket.message}),(function(t){"Pod"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.fetchData()})))}},{key:"componentDidMount",value:function(){this.fetchData(),localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer(),this.store.clear()}},{key:"switchShowMonitor",value:function(e){this.setState(M(M({},this.state),{},{isShowMonitor:e}))}},{key:"getStatus",value:function(){return j.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"renderContent",value:function(){var e=this,t=this.props.Consumer;return g.default.createElement(g.default.Fragment,null,g.default.createElement(t,null,(function(t){var a=t.updateState;e.updateState=a})),this.state.isShowMonitor&&(0,_.createPortal)(g.default.createElement("div",{className:w.default.fullScreen},g.default.createElement(k.default,{monitorDbNode:this.state.currentMonitorDbNode,nodeRole:this.state.nodeRole,exitHandler:function(){e.switchShowMonitor(!1)}})),document.body))}},{key:"getTableProps",value:function(){var e=this,t=this.props,a=t.tableProps,r=t.store,n=function(t){t?Object.hasOwn(t,"name")?(void 0===t.name&&(t.name=""),e.searchName=t.name):t.name=e.searchName:e.searchName="";var a=e.props,n=a.chi,o=a.namespace,c=a.getData,s=a.app_id;r.list.isLoading=!0,c({namespace:o,chi:n,dataFilters:t,app_id:s,esKibana:s===T.RadonDBAppId.Elasticsearch})};return{tableActions:M(M({},a.tableActions),{},{onFetch:n,onRefresh:function(){n({limit:a.pagination.limit,page:a.pagination.page}),e.initWebsocket()},actions:[],onCreate:null}),selectActions:[],emptyProps:{desc:""},emptyText:r.list.isLoading?" ":null,searchType:"name"}}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.tableProps,n=e.replicasCount;return g.default.createElement(D.default,{className:(0,E.default)(w.default.container,a),title:t("NODE_PL")},g.default.createElement(C.default,(0,o.default)({},r,{itemActions:[],columns:this.getColumns()},this.getTableProps(),{className:n>0?"split-".concat(n):""})),this.renderContent())}}]),r}(g.default.Component))||u)||u)||u)||u);a.default=U},4822:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(30),a(73),a(18),a(87),a(98),a(9),a(4),a(22),a(23),a(17),a(38),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(43));a(41);var o=r(a(44)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(49));a(249),a(45),a(5),a(30),a(73),a(18),a(87),a(191),a(42),a(159),a(98),a(9),a(4),a(22),a(23),a(57),a(17),a(38),a(32);var f,p=r(a(96)),m=r(a(58)),h=a(14),v=a(794);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(f=function(e){(0,l.default)(i,e);var t,a,r=g(i);function i(){var e;(0,c.default)(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return(e=r.call.apply(r,[this].concat(a))).resourceName="node",e.getApi=function(){return"".concat(e.apiVersion,"/node_metrics")},e.config=[],e.fetchMetric=function(){var e=(0,o.default)(n.default.mark((function e(t){var a,r,o,c,s,l,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.expr,r=t.step,o=t.start,c=t.end,s=t.cluster,l=t.namespace,a){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,request.get("kapis/monitoring.kubesphere.io/v1beta1/targets/query",{cluster:s,namespace:l,expr:a,step:r,start:o,end:c},null,(function(e,t){throw new Error(t.message)}));case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return i=e.t0,e.abrupt("return",i.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return(0,s.default)(i,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return globals.app.isMultiCluster&&t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchMetrics",value:(a=(0,o.default)(n.default.mark((function e(t){var a,r,o,c,s,l,i,u,d,f,p;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.autoRefresh,r=void 0!==a&&a,o=t.more,c=void 0!==o&&o,s=t.fillZero,l=void 0===s||s,i=t.cluster,u=t.namespace,d=(0,m.default)(t,["autoRefresh","more","fillZero","cluster","namespace"]),r?(d.last=!0,this.isRefreshing=!0):this.isLoading=!0,d.cluster&&(this.cluster=d.cluster),f=this.getParams(d),this.config=f.config.reduce((function(e,t){return e.targets=e.targets.concat(t.targets),e}),{namespace:u,cluster:i,targets:[]}),e.t0=this,e.next=8,this.fetchMetricsAll(f);case 8:return e.t1=e.sent,p=e.t0.getResult.call(e.t0,e.t1),r&&(p=this.getRefreshResult(p,this.data)),c&&(p=this.getMoreResult(p,this.data)),this.data=l?(0,v.fillEmptyMetrics)(f,p):p,this.isLoading=!1,this.isRefreshing=!1,e.abrupt("return",p);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchMetricsAll",value:(t=(0,o.default)(n.default.mark((function e(t){var a,r,c,s,l,i,u,d,f,p,m=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.start,r=t.end,c=t.step,s=this.config,l=s.targets,i=void 0===l?[]:l,u=s.cluster,d=s.namespace,this.timeRange={start:a,end:r},f={ID:++this.requestID,errorMessage:"",metrics:[]},e.prev=4,e.next=7,Promise.all(i.map(function(){var e=(0,o.default)(n.default.mark((function e(t){var o,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.expr,e.next=3,m.fetchMetric({cluster:u,namespace:d,expr:o,step:c,start:a,end:r});case 3:return s=e.sent,e.abrupt("return",{data:s,target:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:p=e.sent,f.metrics=p.reduce((function(e,t){var a=t.data,r=void 0===a?[]:a,n=t.target,o=void 0===n?{}:n,c=o.expr,s=o.refId,l=(null==r?void 0:r.result).map((function(e){var t=e.values,a=void 0===t?[]:t,r=e.metric,n=void 0===r?{}:r,l=y(n)||c,i="".concat(s,".").concat(l);return{values:a,metric:n,target:o,id:i,responseMetricID:l}}));return e.concat(l)}),[]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),f.errorMessage=e.t0.message;case 14:return e.prev=14,f.ID===this.requestID&&(this.metrics=f.metrics,this.errorMessage=f.errorMessage),e.finish(14);case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,this,[[4,11,14,17]])}))),function(e){return t.apply(this,arguments)})}]),i}(r(a(845)).default),(0,d.default)(f.prototype,"fetchMetrics",[h.action],Object.getOwnPropertyDescriptor(f.prototype,"fetchMetrics"),f.prototype),(0,d.default)(f.prototype,"fetchMetricsAll",[h.action],Object.getOwnPropertyDescriptor(f.prototype,"fetchMetricsAll"),f.prototype),f);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.__name__,a=(0,m.default)(e,["__name__"]);if(!t)return JSON.stringify(a||{});var r=Object.entries(a||{}).map((function(e){var t=(0,p.default)(e,2),a=t[0],r=t[1];return"".concat(a,'="').concat(r,'"')})),n=r.length?"{".concat(r.join(","),"}"):"";return"".concat(t).concat(n)}t.default=_},4823:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(442),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=n(r(31)),c=n(r(36)),s=n(r(37)),l=n(r(88)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(1)),m=n(r(3)),h=n(r(63)),v=n(r(60)),g=n(r(450)),_=r(794),y=r(186),E=n(r(801)),b=n(r(949)),S=n(r(4824));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var k=function(e){(0,i.default)(r,e);var a=A(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).initParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e||{},r=a.times,n=a.step,o=a.createTime,c={times:r,step:n};if(o){var s=new Date(o).valueOf()/1e3,l=Date.now()/1e3,i=l-s;switch(!0){case i<=1800:c.times=30,c.step="1m";break;case i<=3600:c.times=60,c.step="1m";break;case i<=18e3:c.times=60,c.step="5m"}}t.params=c},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=R(R({},t.params),e);t.props.onFetch(a)},t.handleChange=function(e){t.params=e;var a=!e.start&&!e.end&&t.props.enableAutoRefresh;t.setState({enableAutoRefresh:a,autoRefresh:!1},(function(){(0,_.stopAutoRefresh)((0,l.default)(t)),t.fetchData()}))},t.handleRefresh=function(){t.fetchData()},t.handleAutoRefresh=function(){t.setState({autoRefresh:!t.state.autoRefresh},(function(){t.state.autoRefresh?(0,_.startAutoRefresh)((0,l.default)(t)):(0,_.stopAutoRefresh)((0,l.default)(t))}))},t.handleToggle=function(e){t.setState({active:e})},t.state={active:!1,enableAutoRefresh:e.enableAutoRefresh,autoRefresh:!1},t.init(),t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){e.step===this.props.step&&e.times===this.props.times&&e.createTime===this.props.createTime||(this.initParams(this.props),this.fetchData())}},{key:"componentWillUnmount",value:function(){(0,_.stopAutoRefresh)(this)}},{key:"init",value:function(){this.initParams(this.props),this.fetchData()}},{key:"renderAutoRefresh",value:function(){var e=this.state,t=e.enableAutoRefresh,a=e.autoRefresh;return t?f.default.createElement(y.Button,{className:S.default.button,type:"control",icon:a?"pause":"start",iconType:"light",onClick:this.handleAutoRefresh}):null}},{key:"renderCustomActions",value:function(){return this.props.customAction||null}},{key:"renderOperations",value:function(){var e=this.state.active,t=this.params,a=t.step,r=t.times,n=this.props.closeBtn;return f.default.createElement("div",{className:(0,m.default)(S.default.operations,(0,o.default)({},S.default.active,e))},this.props.customSelect||null,f.default.createElement(b.default,{step:a,times:r,onChange:this.handleChange,onToggle:this.handleToggle}),this.renderAutoRefresh(),f.default.createElement(y.Button,{className:S.default.button,type:"control",icon:"refresh",iconType:"light",onClick:this.handleRefresh}),this.renderCustomActions(),n)}},{key:"renderTitle",value:function(){var e=this.props.title||t("MONITORING");return f.default.createElement("div",{className:S.default.title},f.default.createElement("span",null,e),this.renderOperations())}},{key:"renderContent",value:function(){var e=this.props.children;return(0,h.default)(e)||(0,v.default)(e)&&(0,h.default)((0,g.default)(e).filter((function(e){return e})))?null:e}},{key:"render",value:function(){var e=this.props.loading,a=this.state.active;return f.default.createElement(y.Loading,{style:{zIndex:0},spinning:e},f.default.createElement(E.default,{className:(0,m.default)(S.default.card,(0,o.default)({},S.default.showDropDown,a)),title:this.renderTitle(),empty:e?" ":t("NO_MONITORING_DATA"),isEmpty:this.props.isEmpty},f.default.createElement("div",{className:S.default.content},this.renderContent())))}}]),r}(f.default.Component);a.default=k,k.propTypes={title:p.default.string,step:p.default.string,times:p.default.number,createTime:p.default.string,onFetch:p.default.func,loading:p.default.bool,refreshing:p.default.bool,isEmpty:p.default.bool,enableAutoRefresh:p.default.bool,customAction:p.default.oneOfType([p.default.node,p.default.element]),customSelect:p.default.oneOfType([p.default.node,p.default.element])},k.defaultProps={step:"10m",times:30,createTime:"",onFetch:function(){},loading:!1,refreshing:!1,isEmpty:!1,enableAutoRefresh:!0,customAction:""}},4824:function(e,t,a){e.exports={card:"_65_m-_4Ubjwu9QSuJvfzt",title:"_Xd78Z9vissC3z3MsYARn",operations:"hkQOkv4O5PZpDcwI2cWWl",button:"_1lWhAFrlevv8CiN813fzw8",content:"JUQudezMo9M8whf3hhuc5",showDropDown:"_1p7Rp4uYKW2hAUoSs2zLfw"}},4825:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(4826)),o=r(a(4827)),c=r(a(4828)),s=r(a(4829)),l=r(a(4830)),i=r(a(4831)),u=r(a(4832)),d=r(a(4833)),f=r(a(4834)),p=r(a(4835)),m={mysql:n.default,ck:o.default,pg:c.default,redis:s.default,mongo:i.default,eck:u.default,predixy:l.default,kafka:d.default,zookeeper:f.default,opensearch:p.default};t.default=m},4826:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={getConfig:function(e,t){var a=e.detail,r=a.name,n=a.namespace,o=t.name;return[{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**Max Connections** \n\nMax Connections is the maximum permitted number of simultaneous client connections. By default, this is 151. Increasing this value increases the number of file descriptors that mysqld requires. If the required number of descriptors are not available, the server reduces the value of Max Connections.\n\nmysqld actually permits Max Connections + 1 clients to connect. The extra connection is reserved for use by accounts that have the SUPER privilege, such as root.\n\nMax Used Connections is the maximum number of connections that have been in use simultaneously since the server started.\n\nConnections is the number of connection attempts (successful or not) to the MySQL server.",id:92,lines:!0,targets:[{expr:"mysql_global_status_threads_connected{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Connections",refId:1,step:"1m"},{expr:"mysql_global_status_max_used_connections{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Max Used Connections",refId:2,step:"1m"},{expr:"mysql_global_variables_max_connections{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Max Connections",refId:3,step:"1m"}],title:"MYSQL_CONNECTIONS",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Active Threads**\n\nThreads Connected is the number of open connections, while Threads Running is the number of threads not sleeping.",id:10,lines:!0,targets:[{expr:"max_over_time(mysql_global_status_threads_connected{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[3m])",legendFormat:"Peak Threads Connected",refId:1,step:"1m"},{expr:"max_over_time(mysql_global_status_threads_running{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[3m])",legendFormat:"Peak Threads Running",refId:2,step:"1m"},{expr:"avg_over_time(mysql_global_status_threads_running{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[3m])",legendFormat:"Avg Threads Running",refId:3,step:"1m"}],title:"MYSQL_CLIENT_THREAD_ACTIVITY",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Questions**\n\nThe number of statements executed by the server. This includes only statements sent to the server by clients and not statements executed within stored programs, unlike the Queries used in the QPS calculation. \n\nThis variable does not count the following commands:\n* ``COM_PING``\n* ``COM_STATISTICS``\n* ``COM_STMT_PREPARE``\n* ``COM_STMT_CLOSE``\n* ``COM_STMT_RESET``",id:53,lines:!0,targets:[{expr:"rate(mysql_global_status_questions{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Questions",refId:1,step:"1m"}],title:"MYSQL_QUESTIONS",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Thread Cache**\n\nThe thread_cache_size variable sets how many threads the server should cache to reuse. When a client disconnects, the client's threads are put in the cache if the cache is not full. It is autosized in MySQL 5.6.8 and above (capped to 100). Requests for threads are satisfied by reusing threads taken from the cache if possible, and only when the cache is empty is a new thread created.\n\n* *Threads_created*: The number of threads created to handle connections.\n* *Threads_cached*: The number of threads in the thread cache.",id:11,lines:!0,targets:[{expr:"mysql_global_variables_thread_cache_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Thread Cache Size",refId:1,step:"1m"},{expr:"mysql_global_status_threads_cached{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Threads Cached",refId:2,step:"1m"},{expr:"rate(mysql_global_status_threads_created{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Threads Created",refId:3,step:"1m"}],title:"MYSQL_THREAD_CACHE",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],id:22,lines:!0,targets:[{expr:"rate(mysql_global_status_created_tmp_tables{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"CREATED_TEMP_TABLES",refId:1,step:"1m"},{expr:"rate(mysql_global_status_created_tmp_disk_tables{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Created Tmp Disk Tables",refId:2,step:"1m"},{expr:"rate(mysql_global_status_created_tmp_files{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Created Tmp Files",refId:3,step:"1m"}],title:"MySQL Temporary Objects",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Select Types**\n\nAs with most relational databases, selecting based on indexes is more efficient than scanning an entire table's data. Here we see the counters for selects not done with indexes.\n\n* ***Select Scan*** is how many queries caused full table scans, in which all the data in the table had to be read and either discarded or returned.\n* ***Select Range*** is how many queries used a range scan, which means MySQL scanned all rows in a given range.\n* ***Select Full Join*** is the number of joins that are not joined on an index, this is usually a huge performance hit.",id:311,lines:!0,targets:[{expr:"rate(mysql_global_status_select_full_join{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Select Full Join",refId:1,step:"1m"},{expr:"rate(mysql_global_status_select_full_range_join{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Select Full Range Join",refId:2,step:"1m"},{expr:"rate(mysql_global_status_select_range{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Select Range",refId:3,step:"1m"},{expr:"rate(mysql_global_status_select_range_check{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Select Range Check",refId:4,step:"1m"},{expr:"rate(mysql_global_status_select_scan{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Select Scan",refId:5,step:"1m"}],title:"MySQL Select Types",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Sorts**\n\nDue to a query's structure, order, or other requirements, MySQL sorts the rows before returning them. For example, if a table is ordered 1 to 10 but you want the results reversed, MySQL then has to sort the rows to return 10 to 1.\n\nThis graph also shows when sorts had to scan a whole table or a given range of a table in order to return the results and which could not have been sorted via an index.",id:30,lines:!0,targets:[{expr:"rate(mysql_global_status_sort_rows{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Sort Rows",refId:1,step:"1m"},{expr:"rate(mysql_global_status_sort_range{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Sort Range",refId:2,step:"1m"},{expr:"rate(mysql_global_status_sort_merge_passes{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Sort Merge Passes",refId:3,step:"1m"},{expr:"rate(mysql_global_status_sort_scan{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Sort Scan",refId:4,step:"1m"}],title:"MySQL Sorts",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Slow Queries**\n\nSlow queries are defined as queries being slower than the long_query_time setting. For example, if you have long_query_time set to 3, all queries that take longer than 3 seconds to complete will show on this graph.",id:48,lines:!0,targets:[{expr:"rate(mysql_global_status_slow_queries{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Slow Queries",refId:1,step:"1m"}],title:"MySQL Slow Queries",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**Aborted Connections**\n\nWhen a given host connects to MySQL and the connection is interrupted in the middle (for example due to bad credentials), MySQL keeps that info in a system table (since 5.6 this table is exposed in performance_schema).\n\nIf the amount of failed requests without a successful connection reaches the value of max_connect_errors, mysqld assumes that something is wrong and blocks the host from further connection.\n\nTo allow connections from that host again, you need to issue the ``FLUSH HOSTS`` statement.",id:47,lines:!0,targets:[{expr:"rate(mysql_global_status_aborted_connects{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Aborted Connects (attempts)",refId:1,step:"1m"},{expr:"rate(mysql_global_status_aborted_clients{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Aborted Clients (timeout)",refId:2,step:"1m"}],title:"MySQL Aborted Connections",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**Table Locks**\n\nMySQL takes a number of different locks for varying reasons. In this graph we see how many Table level locks MySQL has requested from the storage engine. In the case of InnoDB, many times the locks could actually be row locks as it only takes table level locks in a few specific cases.\n\nIt is most useful to compare Locks Immediate and Locks Waited. If Locks waited is rising, it means you have lock contention. Otherwise, Locks Immediate rising and falling is normal activity.",id:32,lines:!0,targets:[{expr:"rate(mysql_global_status_table_locks_immediate{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Table Locks Immediate",refId:1,step:"1m"},{expr:"rate(mysql_global_status_table_locks_waited{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Table Locks Waited",refId:2,step:"1m"}],title:"MySQL Table Locks",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Network Traffic**\n\nHere we can see how much network traffic is generated by MySQL. Outbound is network traffic sent from MySQL and Inbound is network traffic MySQL has received.",id:9,lines:!0,stack:!0,targets:[{expr:"rate(mysql_global_status_bytes_received{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Inbound",refId:1,step:"1m"},{expr:"rate(mysql_global_status_bytes_sent{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Outbound",refId:2,step:"1m"}],title:"MySQL Network Traffic",type:"graph",yaxes:[{format:"Byte"}]},{bars:!0,colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Network Usage Hourly**\n\nHere we can see how much network traffic is generated by MySQL per hour. You can use the bar graph to compare data sent by MySQL and data received by MySQL.",id:381,stack:!0,targets:[{expr:"increase(mysql_global_status_bytes_received{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[1h])",legendFormat:"Received",refId:1,step:"1m"},{expr:"increase(mysql_global_status_bytes_sent{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[1h])",legendFormat:"Sent",refId:2,step:"1m"}],title:"MySQL Network Usage Hourly",type:"graph",yaxes:[{format:"Byte"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"***System Memory***: Total Memory for the system.\\\n***InnoDB Buffer Pool Data***: InnoDB maintains a storage area called the buffer pool for caching data and indexes in memory.\\\n***TokuDB Cache Size***: Similar in function to the InnoDB Buffer Pool,  TokuDB will allocate 50% of the installed RAM for its own cache.\\\n***Key Buffer Size***: Index blocks for MYISAM tables are buffered and are shared by all threads. key_buffer_size is the size of the buffer used for index blocks.\\\n***Adaptive Hash Index Size***: When InnoDB notices that some index values are being accessed very frequently, it builds a hash index for them in memory on top of B-Tree indexes.\\\n ***Query Cache Size***: The query cache stores the text of a SELECT statement together with the corresponding result that was sent to the client. The query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time.\\\n***InnoDB Dictionary Size***: The data dictionary is InnoDB s internal catalog of tables. InnoDB stores the data dictionary on disk, and loads entries into memory while the server is running.\\\n***InnoDB Log Buffer Size***: The MySQL InnoDB log buffer allows transactions to run without having to write the log to disk before the transactions commit.",id:50,lines:!0,stack:!0,targets:[{expr:"node_memory_MemTotal_bytes{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"System Memory",refId:1,step:"1m"},{expr:"mysql_global_status_innodb_page_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"InnoDB Buffer Pool Data",refId:2,step:"1m"},{expr:"mysql_global_variables_innodb_log_buffer_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"InnoDB Log Buffer Size",refId:3,step:"1m"},{expr:"mysql_global_variables_innodb_additional_mem_pool_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"InnoDB Additional Memory Pool Size",refId:4,step:"1m"},{expr:"mysql_global_status_innodb_mem_dictionary{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"InnoDB Dictionary Size",refId:5,step:"1m"},{expr:"mysql_global_variables_key_buffer_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Key Buffer Size",refId:6,step:"1m"},{expr:"mysql_global_variables_query_cache_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Query Cache Size",refId:7,step:"1m"},{expr:"mysql_global_status_innodb_mem_adaptive_hash{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Adaptive Hash Index Size",refId:8,step:"1m"},{expr:"mysql_global_variables_tokudb_cache_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"TokuDB Cache Size",refId:9,step:"1m"}],title:"MySQL Internal Memory Overview",type:"graph",yaxes:[{format:"Byte"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**Top Command Counters**\n\nThe Com_{{xxx}} statement counter variables indicate the number of times each xxx statement has been executed. There is one status variable for each type of statement. For example, Com_delete and Com_update count [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements, respectively. Com_delete_multi and Com_update_multi are similar but apply to [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements that use multiple-table syntax.",id:14,lines:!0,targets:[{expr:"topk(5, rate(mysql_global_status_commands_total{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m]))",legendFormat:"Com_{{command}}",refId:1,step:"1m"}],title:"Top Command Counters",type:"graph",yaxes:[{format:"none"}]},{bars:!0,colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**Top Command Counters Hourly**\n\nThe Com_{{xxx}} statement counter variables indicate the number of times each xxx statement has been executed. There is one status variable for each type of statement. For example, Com_delete and Com_update count [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements, respectively. Com_delete_multi and Com_update_multi are similar but apply to [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements that use multiple-table syntax.",id:39,stack:!0,targets:[{expr:"topk(5, increase(mysql_global_status_commands_total{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[1h]))",legendFormat:"Com_{{command}}",refId:1,step:"1m"}],title:"Top Command Counters Hourly",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Handlers**\n\nHandler statistics are internal statistics on how MySQL is selecting, updating, inserting, and modifying rows, tables, and indexes.\n\nThis is in fact the layer between the Storage Engine and MySQL.\n\n* `read_rnd_next` is incremented when the server performs a full table scan and this is a counter you don't really want to see with a high value.\n* `read_key` is incremented when a read is done with an index.\n* `read_next` is incremented when the storage engine is asked to 'read the next index entry'. A high value means a lot of index scans are being done.",id:8,lines:!0,targets:[{expr:"rate(mysql_global_status_handlers_total{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"{{handler}}",refId:1,step:"1m"}],title:"MySQL Handlers",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],id:28,lines:!0,targets:[{expr:"rate(mysql_global_status_handlers_total{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"{{handler}}",refId:1,step:"1m"}],title:"MySQL Transaction Handlers",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Query Cache Memory**\n\nThe query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time. This serialization is true not only for SELECTs, but also for INSERT/UPDATE/DELETE.\n\nThis also means that the larger the `query_cache_size` is set to, the slower those operations become. In concurrent environments, the MySQL Query Cache quickly becomes a contention point, decreasing performance. MariaDB and AWS Aurora have done work to try and eliminate the query cache contention in their flavors of MySQL, while MySQL 8.0 has eliminated the query cache feature.\n\nThe recommended settings for most environments is to set:\n  ``query_cache_type=0``\n  ``query_cache_size=0``\n\nNote that while you can dynamically change these values, to completely remove the contention point you have to restart the database.",id:46,lines:!0,targets:[{expr:"mysql_global_status_qcache_free_memory{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Free Memory",refId:1,step:"1m"},{expr:"mysql_global_variables_query_cache_size{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Query Cache Size",refId:2,step:"1m"}],title:"MySQL Query Cache Memory",type:"graph",yaxes:[{format:"Byte"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Query Cache Activity**\n\nThe query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time. This serialization is true not only for SELECTs, but also for INSERT/UPDATE/DELETE.\n\nThis also means that the larger the `query_cache_size` is set to, the slower those operations become. In concurrent environments, the MySQL Query Cache quickly becomes a contention point, decreasing performance. MariaDB and AWS Aurora have done work to try and eliminate the query cache contention in their flavors of MySQL, while MySQL 8.0 has eliminated the query cache feature.\n\nThe recommended settings for most environments is to set:\n``query_cache_type=0``\n``query_cache_size=0``\n\nNote that while you can dynamically change these values, to completely remove the contention point you have to restart the database.",id:45,lines:!0,targets:[{expr:"rate(mysql_global_status_qcache_hits{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Hits",refId:1,step:"1m"},{expr:"rate(mysql_global_status_qcache_inserts{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Inserts",refId:2,step:"1m"},{expr:"rate(mysql_global_status_qcache_not_cached{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Not Cached",refId:3,step:"1m"},{expr:"rate(mysql_global_status_qcache_lowmem_prunes{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Prunes",refId:4,step:"1m"},{expr:"mysql_global_status_qcache_queries_in_cache{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Queries in Cache",refId:5,step:"1m"}],title:"MySQL Query Cache Activity",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],id:43,lines:!0,targets:[{expr:"rate(mysql_global_status_opened_files{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Openings",refId:1,step:"1m"}],title:"MySQL File Openings",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],id:41,lines:!0,targets:[{expr:"mysql_global_status_open_files{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Open Files",refId:1,step:"1m"},{expr:"mysql_global_variables_open_files_limit{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Open Files Limit",refId:2,step:"1m"},{expr:"mysql_global_status_innodb_num_open_files{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"InnoDB Open Files",refId:3,step:"1m"}],title:"MySQL Open Files",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Table Open Cache Status**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).",id:44,lines:!0,targets:[{expr:"rate(mysql_global_status_opened_tables{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Openings",refId:1,step:"1m"},{expr:"rate(mysql_global_status_table_open_cache_hits{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Hits",refId:2,step:"1m"},{expr:"rate(mysql_global_status_table_open_cache_misses{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Misses",refId:3,step:"1m"},{expr:"rate(mysql_global_status_table_open_cache_overflows{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Misses due to Overflows",refId:4,step:"1m"},{expr:"(rate(mysql_global_status_table_open_cache_hits{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m]))",legendFormat:"Table Open Cache Hit Ratio",refId:5,step:"1m"}],title:"MySQL Table Open Cache Status",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Open Tables**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).",id:42,lines:!0,targets:[{expr:"mysql_global_status_open_tables{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Open Tables",refId:1,step:"1m"},{expr:"mysql_global_variables_table_open_cache{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Table Open Cache",refId:2,step:"1m"}],title:"MySQL Open Tables",type:"graph",yaxes:[{format:"none"}]},{colors:["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],description:"**MySQL Table Definition Cache**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).",id:54,lines:!0,targets:[{expr:"mysql_global_status_open_table_definitions{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Open Table Definitions",refId:1,step:"1m"},{expr:"mysql_global_variables_table_definition_cache{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}",legendFormat:"Table Definitions Cache Size",refId:2,step:"1m"},{expr:"rate(mysql_global_status_opened_table_definitions{"+'service="'.concat(r,'-metrics",namespace="').concat(n,'",pod="').concat(o,'"')+"}[5m])",legendFormat:"Opened Table Definitions",refId:3,step:"1m"}],title:"MySQL Table Definition Cache",type:"graph",yaxes:[{format:"none"}]}]},getMonitoringCfgs:function(e){return[{type:"utilisation",title:t("MAX_USED_CONNECTIONS"),legend:[t("MAX_USED_CONNECTIONS")],data:[(0,o.default)(e,"[2].data.result[0]",{})]},{type:"utilisation",title:"THREADS",legend:[t("PEAK_THREADS_CONNECTED"),t("PEAK_THREADS_RUNNING"),t("AVG_THREADS_RUNNING")],data:[(0,o.default)(e,"[4].data.result[0]",{}),(0,o.default)(e,"[5].data.result[0]",{}),(0,o.default)(e,"[6].data.result[0]",{})]},{type:"utilisation",title:t("ABORTED_CONNECTIONS"),legend:[t("ABORTED_CONNECTION_ATTEMPTS"),t("ABORTED_CLIENT_TIMEOUTS")],data:[(0,o.default)(e,"[24].data.result[0]",{}),(0,o.default)(e,"[25].data.result[0]",{})]},{type:"utilisation",title:t("QUESTIONS"),legend:[t("QUESTIONS")],data:[(0,o.default)(e,"[7].data.result[0]",{})]},{type:"utilisation",title:t("SELECT_BY_TYPE"),legend:[t("SELECT_FULL_JOIN"),t("SELECT_FULL_RANGE_JOIN"),t("SELECT_RANGE"),t("SELECT_RANGE_CHECK"),t("SELECT_SCAN")],data:[(0,o.default)(e,"[14].data.result[0]",{}),(0,o.default)(e,"[15].data.result[0]",{}),(0,o.default)(e,"[16].data.result[0]",{}),(0,o.default)(e,"[17].data.result[0]",{}),(0,o.default)(e,"[18].data.result[0]",{})]},{type:"utilisation",title:t("SORT_BY_TYPE"),legend:[t("SORT_ROWS"),t("SORT_RANGE"),t("SORT_MERGE_PASSES"),t("SORT_SCAN")],data:[(0,o.default)(e,"[19].data.result[0]",{}),(0,o.default)(e,"[20].data.result[0]",{}),(0,o.default)(e,"[21].data.result[0]",{}),(0,o.default)(e,"[22].data.result[0]",{})]},{type:"utilisation",title:t("SLOW_QUERIES"),legend:[t("SLOW_QUERIES")],data:[(0,o.default)(e,"[23].data.result[0]",{})]},{type:"utilisation",title:t("TABLE_LOCKS"),legend:[t("TABLE_LOCKS_IMMEDIATE"),t("TABLE_LOCKS_WAITED")],data:[(0,o.default)(e,"[26].data.result[0]",{}),(0,o.default)(e,"[27].data.result[0]",{})]},{type:"utilisation",title:t("TMP_TABLES_AND_FILES"),legend:[t("CREATED_TMP_TABLES"),t("CREATED_TMP_DISK_TABLES"),t("CREATED_TMP_FILES")],data:[(0,o.default)(e,"[11].data.result[0]",{}),(0,o.default)(e,"[12].data.result[0]",{}),(0,o.default)(e,"[13].data.result[0]",{})]},{type:"utilisation",title:t("MYSQL_NETWORK_TRAFFIC"),legend:[t("MYSQL_INBOUND"),t("MYSQL_OUTBOUND")],data:[(0,o.default)(e,"[28].data.result[0]",{}),(0,o.default)(e,"[29].data.result[0]",{})]}]}};a.default=c},4827:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(18),r(16);var o=n(r(26));var c={getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'sum by(hostname) (chi_clickhouse_metric_TCPConnection{namespace="'.concat(a,'",pod="').concat(r,'"})')},{expr:'sum by(hostname) (chi_clickhouse_metric_HTTPConnection{namespace="'.concat(a,'",pod="').concat(r,'"})')}]},{targets:[{expr:'chi_clickhouse_metric_DiskDataBytes{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_SelectQuery{namespace="'.concat(a,'",pod="').concat(r,'"}[2m]))')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_Query{namespace="'.concat(a,'",pod="').concat(r,'"}[2m]))')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_InsertedBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[2m]))')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_InsertedRows{namespace="'.concat(a,'",pod="').concat(r,'"}[2m]))')}]},{targets:[{expr:'chi_clickhouse_metric_ReplicasMaxAbsoluteDelay{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'chi_clickhouse_metric_ReplicasMaxRelativeDelay{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'chi_clickhouse_metric_TotalPartsOfMergeTreeTables{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'chi_clickhouse_metric_DelayedInserts{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'increase(chi_clickhouse_event_DelayedInserts{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')},{expr:'increase(chi_clickhouse_event_RejectedInserts{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')},{expr:'chi_clickhouse_metric_DistributedFilesToInsert{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_CompressedReadBufferBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReadCompressedBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReadBufferFromFileDescriptorReadBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_OSReadBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')}]},{targets:[{expr:'chi_clickhouse_metric_MemoryTracking{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedDataLoss{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartChecks{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartChecksFailed{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartFetches{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartFailedFetches{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartFetchesOfMerged{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_ReplicatedPartMerges{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')},{expr:'chi_clickhouse_metric_ReplicasMaxQueueSize{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_Merge{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_MergedRows{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_MergedUncompressedBytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]))')}]},{targets:[{expr:'sum by(pod) (chi_clickhouse_table_parts{namespace="'.concat(a,'",pod="').concat(r,'",active="1"})')}]},{targets:[{expr:'sum by(pod) (chi_clickhouse_table_parts{namespace="'.concat(a,'",pod="').concat(r,'",active="0"})')}]},{targets:[{expr:'chi_clickhouse_metric_MaxPartCountForPartition{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'chi_clickhouse_metric_MemoryCode{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'chi_clickhouse_metric_MemoryResident{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'chi_clickhouse_metric_MemoryShared{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'chi_clickhouse_metric_MemoryPrimaryKeyBytesAllocated{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'chi_clickhouse_metric_MemoryDictionaryBytesAllocated{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'irate(chi_clickhouse_event_MarkCacheHits{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) / (irate(chi_clickhouse_event_MarkCacheHits{namespace="').concat(a,'",pod="').concat(r,'"}[1m]))')}]},{targets:[{expr:'chi_clickhouse_metric_BackgroundPoolTask{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'chi_clickhouse_metric_BackgroundSchedulePoolTask{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'chi_clickhouse_metric_BackgroundMovePoolTask{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'sum by (pod) (chi_clickhouse_table_mutations{namespace="'.concat(a,'",pod="').concat(r,'"})')},{expr:'sum by (pod) (chi_clickhouse_table_mutations_parts_to_do{namespace="'.concat(a,'",pod="').concat(r,'"})')}]},{targets:[{expr:'sum by(pod) (irate(chi_clickhouse_event_DiskReadElapsedMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_DiskWriteElapsedMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_NetworkReceiveElapsedMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_NetworkSendElapsedMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_RealTimeMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_UserTimeMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_SystemTimeMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_OSIOWaitMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_OSCPUWaitMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')},{expr:'sum by(pod) (irate(chi_clickhouse_event_OSCPUVirtualTimeMicroseconds{namespace="'.concat(a,'",pod=~"').concat(r,'"}[1m]))')}]}]},getMonitoringCfgs:function(e){return[{title:t("CONNECTIONS"),legend:["TCP","HTTP"],data:[(0,o.default)(e,"1.data.result[0]",{}),(0,o.default)(e,"2.data.result[0]",{})]},{title:t("CLICKHOUSE_DATA_SIZE_ON_DISK"),unit:"MB",legend:[t("CLICKHOUSE_DATA_SIZE_ON_DISK")],data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("QUERIES"),legend:[t("SELECT_QUERIES"),t("ALL_QUERIES")],data:[(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{})]},{title:t("INSERTED_BYTES"),unit:"KiB",legend:(0,o.default)(e,"6.data.result",[]).map((function(){return t("INSERTED_BYTES")})),data:(0,o.default)(e,"6.data.result",[])},{title:t("INSERTED_ROWS"),legend:(0,o.default)(e,"7.data.result",[]).map((function(){return t("INSERTED_ROWS")})),data:(0,o.default)(e,"7.data.result",[])},{title:t("MAXIMUM_REPLICATION_DEPLAY"),legend:[t("RELATIVE_DELAY"),t("ABSOLUTE_DELAY")],unit:"s",data:[(0,o.default)(e,"8.data.result[0]",{}),(0,o.default)(e,"9.data.result[0]",{})]},{title:t("TOTAL_PARTS_OF_MERGETREE_TABLES"),legend:[t("TOTAL_PARTS_OF_MERGETREE_TABLES")],data:[(0,o.default)(e,"10.data.result[0]",{})]},{title:t("DELAYED_REJECTED_INSERTS"),legend:[t("DELAYED_QUERIES"),t("DELAYED_BLOCKS"),t("REJECTED_BLOCKS"),t("DELAYED_DISTRIBUTED_FILES")],data:[(0,o.default)(e,"11.data.result[0]",{}),(0,o.default)(e,"12.data.result[0]",{}),(0,o.default)(e,"13.data.result[0]",{}),(0,o.default)(e,"14.data.result[0]",{})]},{title:t("READ_BYTES"),legend:[t("UNCOMPRESSED"),t("COMPRESSED"),t("FILE_DESCRIPTOR"),t("CLICKHOUSE_OS")],unitType:"memory",data:[(0,o.default)(e,"15.data.result[0]",{}),(0,o.default)(e,"16.data.result[0]",{}),(0,o.default)(e,"17.data.result[0]",{}),(0,o.default)(e,"18.data.result[0]",{})]},{title:t("MEMORY_FOR_QUERIES"),legend:[t("MEMORY_FOR_QUERIES")],unitType:"memory",data:[(0,o.default)(e,"19.data.result[0]",{})]},{title:t("REPLICATION_QUEUE_JOBS"),legend:[t("DATA_LOSS"),t("CHECK"),t("CHECK_FAIL"),t("FETCH"),t("FETCH_FAIL"),t("FETCH_MERGED"),t("REPLICATED_MERGED"),t("MAX_QUEUE_SIZE")],unitType:"memory",data:[(0,o.default)(e,"20.data.result[0]",{}),(0,o.default)(e,"21.data.result[0]",{}),(0,o.default)(e,"22.data.result[0]",{}),(0,o.default)(e,"23.data.result[0]",{}),(0,o.default)(e,"24.data.result[0]",{}),(0,o.default)(e,"25.data.result[0]",{}),(0,o.default)(e,"26.data.result[0]",{}),(0,o.default)(e,"27.data.result[0]",{})]},{title:t("MERGES"),legend:[t("MERGES")],data:[(0,o.default)(e,"28.data.result[0]",{})]},{title:t("MERGED_ROWS"),legend:[t("MERGED_ROWS")],data:[(0,o.default)(e,"29.data.result[0]",{})]},{title:t("MERGED_UNCOMPRESSED_BYTES"),legend:[t("MERGED_UNCOMPRESSED_BYTES")],unitType:"disk",data:[(0,o.default)(e,"30.data.result[0]",{})]},{title:t("ACTIVE_PARTS"),legend:[t("ACTIVE_PARTS")],data:[(0,o.default)(e,"31.data.result[0]",{})]},{title:t("DETACHED_PARTS"),legend:[t("DETACHED_PARTS")],data:[(0,o.default)(e,"32.data.result[0]",{})]},{title:t("MAX_PART_COUNT_FOR_PARTITION"),legend:[t("MAX_PART_COUNT_FOR_PARTITION")],data:[(0,o.default)(e,"33.data.result[0]",{})]},{title:t("CLICKHOUSE_SERVER_PROCESS_MEMORY"),legend:["CODE","RES","SHR"],unitType:"memory",data:[(0,o.default)(e,"34.data.result[0]",{}),(0,o.default)(e,"35.data.result[0]",{}),(0,o.default)(e,"36.data.result[0]",{})]},{title:t("PRIMARY_KEYS_MEMORY"),legend:[t("PRIMARY_KEYS_MEMORY")],unitType:"memory",data:[(0,o.default)(e,"37.data.result[0]",{})]},{title:t("DICTIONARY_MEMORY"),legend:[t("DICTIONARY_MEMORY")],unitType:"memory",data:[(0,o.default)(e,"38.data.result[0]",{})]},{title:t("BACKGROUND_TASKS"),legend:[t("MERGE_MUTATE_FETCH"),t("CLEAN_ALTER_REPLICA_REINIT"),t("MOVES")],unitType:"memory",data:[(0,o.default)(e,"40.data.result[0]",{}),(0,o.default)(e,"41.data.result[0]",{}),(0,o.default)(e,"42.data.result[0]",{})]},{title:t("CPU_TIME_PER_SECOND"),legend:[t("DISK_READ_SYSCALL"),t("DISK_WRITE_SYSCALL"),t("NETWORK_RECEIVE"),t("NETWORK_SEND"),t("REAL_TIME"),t("USER_TIME"),t("SYSTEM_TIME"),t("OS_IO_WAIT"),t("OS_CPU_WAIT"),t("OS_CPU_VIRTUAL")],unit:"s",data:[(0,o.default)(e,"45.data.result[0]",{}),(0,o.default)(e,"46.data.result[0]",{}),(0,o.default)(e,"47.data.result[0]",{}),(0,o.default)(e,"48.data.result[0]",{}),(0,o.default)(e,"49.data.result[0]",{}),(0,o.default)(e,"50.data.result[0]",{}),(0,o.default)(e,"51.data.result[0]",{}),(0,o.default)(e,"52.data.result[0]",{}),(0,o.default)(e,"53.data.result[0]",{}),(0,o.default)(e,"54.data.result[0]",{})]}]}};a.default=c},4828:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(61));r(5),r(18),r(16);var c=n(r(26));function s(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'sum(pg_stat_activity_count{namespace="'.concat(a,'",pod="').concat(r,'",state="active"})')},{expr:'sum(pg_stat_activity_count{namespace="'.concat(a,'",pod="').concat(r,'",state="idle in transaction"})')},{expr:'sum(pg_stat_activity_count{namespace="'.concat(a,'",pod="').concat(r,'",state="idle"})')}]},{targets:[{expr:'(sum(pg_stat_database_numbackends{namespace="'.concat(a,'",pod="').concat(r,'"}) / sum(pg_settings_max_connections{namespace="').concat(a,'",pod="').concat(r,'"}))')}]},{targets:[{expr:'round(sum(pg_stat_database_blks_hit{namespace="'.concat(a,'",pod="').concat(r,'"}) / (sum(pg_stat_database_blks_hit{namespace="').concat(a,'",pod="').concat(r,'"}) + sum(pg_stat_database_blks_read{namespace="').concat(a,'",pod="').concat(r,'"})),0.001)')}]},{targets:[{expr:'pg_stat_database_blks_hit{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""} / (pg_stat_database_blks_read{namespace="').concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""} + pg_stat_database_blks_hit{namespace="').concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""})')}]},{targets:[{expr:'irate(pg_stat_database_tup_fetched{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_tup_inserted{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_tup_updated{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_tup_deleted{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_tup_returned{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')}]},{targets:[{expr:'irate(pg_stat_database_conflicts{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_deadlocks{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_xact_commit{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')},{expr:'irate(pg_stat_database_xact_rollback{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}[1m])')}]},{targets:[{expr:'max(pg_stat_activity_max_tx_duration{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}) by (datname)')}]},{targets:[{expr:'pg_locks_count{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""} > 0')}]},{targets:[{expr:'pg_database_size_bytes{namespace="'.concat(a,'",pod="').concat(r,'",datname!="template0", datname!="template1",datname!=""}')}]}]}function l(e){return[{title:t("CONNECTIONS"),legend:[t("ACTIVE_CONNECTIONS"),t("IDLE_IN_TRANSACTION"),t("IDLE_CONNECTIONS")],data:[(0,c.default)(e,"[1].data.result[0]",{}),(0,c.default)(e,"[2].data.result[0]",{}),(0,c.default)(e,"[3].data.result[0]",{})]},{title:t("ACTIVE_SESSIONS"),legend:[t("ACTIVE_SESSIONS")],unit:"%",dot:2,data:[(0,c.default)(e,"[4].data.result[0]",{})]},{title:t("CACHE_HIT_RATIO"),legend:[t("CACHE_HIT_RATIO")],unit:"%",dot:2,data:[(0,c.default)(e,"[5].data.result[0]",{})]},{title:t("CACHE_HIT_RATIO_EACH_DATABASE"),legend:(0,c.default)(e,"[6].data.result",[]).map((function(e){return e.metric.datname})),unit:"%",dot:2,data:(0,c.default)(e,"[6].data.result",[])},{title:t("FETCHED_PER_SECOND"),legend:(0,c.default)(e,"[7].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[7].data.result",[])},{title:t("INSERTED_PER_SECOND"),legend:(0,c.default)(e,"[8].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[8].data.result",[])},{title:t("UPDATED_PER_SECOND"),legend:(0,c.default)(e,"[9].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[9].data.result",[])},{title:t("DELETED_PER_SECOND"),legend:(0,c.default)(e,"[10].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[10].data.result",[])},{title:t("RETURNED_PER_SECOND"),legend:(0,c.default)(e,"[11].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[11].data.result",[])},{title:t("CONFLICTS_PER_SECOND"),legend:(0,c.default)(e,"[12].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[12].data.result",[])},{title:t("DEADLOCKS_PER_SECOND"),legend:(0,c.default)(e,"[13].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[13].data.result",[])},{title:t("COMMITS_PER_SECOND"),legend:(0,c.default)(e,"[14].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[14].data.result",[])},{title:t("ROLLBACKS_PER_SECOND"),legend:(0,c.default)(e,"[15].data.result",[]).map((function(e){return e.metric.datname})),dot:2,data:(0,c.default)(e,"[15].data.result",[])},{title:t("MAX_TX_DURATION"),legend:(0,c.default)(e,"[15].data.result",[]).map((function(e){return e.metric.datname})),data:(0,c.default)(e,"[16].data.result",[])},{title:t("LOCKS"),legend:(0,c.default)(e,"[17].data.result",[]).map((function(e){return"".concat(e.metric.datname,"-").concat(e.metric.mode)})),data:(0,c.default)(e,"[17].data.result",[])},{title:t("DATABASE_SIZE"),unitType:"disk",legend:(0,c.default)(e,"[18].data.result",[]).map((function(e){return e.metric.datname})),data:(0,c.default)(e,"[18].data.result",[])}]}var i={postgresql:{getConfig:s,getMonitoringCfgs:l},autofailover:{getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[].concat((0,o.default)(s(e,t)),[{targets:[{expr:'pg_auto_failover_async_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'pg_auto_failover_invalid_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'pg_auto_failover_not_running_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'pg_auto_failover_unhealth_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]}])},getMonitoringCfgs:function(e){return[{title:t("ASYNC_NODE_NUMBER"),legend:[t("ASYNC_NODE_NUMBER")],data:[(0,c.default)(e,"[19].data.result[0]",{})]},{title:t("INVALID_STATUS_NODE_NUMBER"),legend:[t("INVALID_STATUS_NODE_NUMBER")],data:[(0,c.default)(e,"[20].data.result[0]",{})]},{title:t("NOT_RUNNING_NODE_NUMBER"),legend:[t("NOT_RUNNING_NODE_NUMBER")],data:[(0,c.default)(e,"[21].data.result[0]",{})]},{title:t("UNHEALTH_NODE_NUMBER"),legend:[t("UNHEALTH_NODE_NUMBER")],data:[(0,c.default)(e,"[22].data.result[0]",{})]}].concat(l(e))}}};a.default=i},4829:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(18),r(16);var o=n(r(26));var c={getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'redis_memory_used_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'redis_memory_max_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'redis_memory_used_bytes{namespace="'.concat(a,'",pod="').concat(r,'"} / redis_memory_max_bytes{namespace="').concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'rate(redis_commands_processed_total{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')}]},{targets:[{expr:'topk(5, irate(redis_commands_total{namespace="'.concat(a,'",pod="').concat(r,'"} [1m]))')}]},{targets:[{expr:'rate(redis_net_input_bytes_total{namespace="'.concat(a,'",pod="').concat(r,'"}[5m])')},{expr:'rate(redis_net_output_bytes_total{namespace="'.concat(a,'",pod="').concat(r,'"}[5m])')}]},{targets:[{expr:'sum (redis_db_keys{namespace="'.concat(a,'",pod="').concat(r,'"}) by (db)')}]},{targets:[{expr:'sum (redis_db_keys{namespace="'.concat(a,'",pod="').concat(r,'"}) - sum (redis_db_keys_expiring{namespace="').concat(a,'",pod="').concat(r,'"})')},{expr:'sum (redis_db_keys_expiring{namespace="'.concat(a,'",pod="').concat(r,'"})')}]},{targets:[{expr:'redis_connected_clients{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'irate(redis_keyspace_hits_total{namespace="'.concat(a,'",pod="').concat(r,'"}[5m]) * 100')},{expr:'irate(redis_keyspace_misses_total{namespace="'.concat(a,'",pod="').concat(r,'"}[5m]) * 100')}]},{targets:[{expr:'redis_mem_fragmentation_ratio{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'rate(redis_rejected_connections_total{namespace="'.concat(a,'",pod="').concat(r,'"}[5m])')}]},{targets:[{expr:'redis_evicted_keys_total{namespace="'.concat(a,'",pod="').concat(r,'"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("REDIS_MEMORY_USAGE"),legend:[t("REDIS_USED_MEMORY"),t("REDIS_MAX_MEMORY")],unitType:"memory",data:[(0,o.default)(e,"1.data.result[0]",{}),(0,o.default)(e,"2.data.result[0]",{})]},{title:t("REDIS_MEMORY_USAGE"),unit:"%",dot:2,legend:[t("REDIS_MEMORY_USAGE")],data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("COMMANDS_EXECUTED_PER_MINUTE"),legend:[t("COMMANDS_EXECUTED_PER_MINUTE")],data:[(0,o.default)(e,"4.data.result[0]",{})]},{title:t("TOP_5_REDIS_COMMANDS_PER_MINUTE"),dot:2,legend:(0,o.default)(e,"5.data.result",[]).map((function(e){return(0,o.default)(e,"metric.cmd")})),data:(0,o.default)(e,"5.data.result")},{title:t("NETWORK_IO"),unitType:"memory",legend:[t("NETWORK_INPUT_BYTES"),t("NETWORK_OUTPUT_BYTES")],data:[(0,o.default)(e,"6.data.result[0]",{}),(0,o.default)(e,"7.data.result[0]",{})]},{title:t("TOTAL_DB_KEYS"),legend:[t("TOTAL_DB_KEYS")],data:[(0,o.default)(e,"8.data.result[0]",{})]},{title:t("DB_KEYS"),legend:[t("VALID_KEYS"),t("EXPIRED_KEYS")],data:[(0,o.default)(e,"9.data.result[0]",{}),(0,o.default)(e,"10.data.result[0]",{})]},{title:t("CLIENT_COUNT"),legend:[t("CLIENT_COUNT")],data:[(0,o.default)(e,"11.data.result[0]",{})]},{title:t("KEYSPACE"),legend:[t("KEYSPACE_HITS_TOTAL"),t("KEYSPACE_MISSES_TOTAL")],data:[(0,o.default)(e,"12.data.result[0]",{}),(0,o.default)(e,"13.data.result[0]",{})]},{title:t("MEMORY_FRAGMENTATION_RATIO"),legend:[t("MEMORY_FRAGMENTATION_RATIO")],unit:"%",data:[(0,o.default)(e,"14.data.result[0]",{})]},{title:t("REJECTED_CONNECTION_RATIO"),legend:[t("REJECTED_CONNECTION_RATIO")],unit:"%",data:[(0,o.default)(e,"15.data.result[0]",{})]},{title:t("REVICTED_KEY_RATIO"),legend:[t("REVICTED_KEY_RATIO")],data:[(0,o.default)(e,"16.data.result[0]",{})]}]}};a.default=c},4830:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'predixy_used_memory{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'predixy_redis_cluster_connections{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'rate(predixy_redis_cluster_total_recv_client_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')},{expr:'rate(predixy_redis_cluster_total_recv_server_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')},{expr:'rate(predixy_redis_cluster_total_send_client_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')},{expr:'rate(predixy_redis_cluster_total_send_server_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')}]},{targets:[{expr:'rate(predixy_total_requests{namespace="'.concat(a,'",pod="').concat(r,'"}[1m])')}]},{targets:[{expr:'count(predixy_redis_cluster_server_connections{namespace="'.concat(a,'",pod="').concat(r,'"})')}]}]},getMonitoringCfgs:function(e){return[{title:t("PREDIXY_MEMORY_USAGE"),legend:[t("PREDIXY_MEMORY_USAGE")],unitType:"memory",data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("CLIENT_COUNT"),unit:"%",dot:2,legend:[t("CLIENT_COUNT")],data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("NETWORK_IO"),legend:[t("RECV_CLIENT_BYTES"),t("RECV_SERVER_BYTES"),t("SEND_CLIENT_BYTES"),t("SEND_SERVER_BYTES")],data:[(0,o.default)(e,"3.data.result[0]",{}),(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{}),(0,o.default)(e,"6.data.result[0]",{})]},{title:t("COMMANDS_EXECUTED_PER_MINUTE"),legend:[t("COMMANDS_EXECUTED_PER_MINUTE")],data:[(0,o.default)(e,"7.data.result[0]",{})]},{title:t("REDIS_CLUSTER_COUNT"),legend:[t("REDIS_CLUSTER_COUNT")],data:[(0,o.default)(e,"8.data.result[0]",{})]}]}};a.default=c},4831:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'sum(max_over_time(mongodb_opcounters_insert{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_insert{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcounters_query{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_query{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcounters_update{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_update{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcounters_delete{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_delete{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcounters_getmore{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_getmore{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcounters_command{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcounters_command{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')}]},{targets:[{expr:'sum(max_over_time(mongodb_opcountersRepl_insert{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_insert{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcountersRepl_query{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_query{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcountersRepl_update{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_update{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcountersRepl_delete{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_delete{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcountersRepl_getmore{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_getmore{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')},{expr:'sum(max_over_time(mongodb_opcountersRepl_command{namespace="'.concat(a,'",pod="').concat(r,'"}[1m]) or vector(0)) - sum(max_over_time(mongodb_opcountersRepl_command{namespace="').concat(a,'",pod="').concat(r,'"}[1m] offset 1m) or vector(0))')}]},{targets:[{expr:'mongodb_connections_current{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_connections_totalCreated{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_connections_available{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_connections_active{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_metrics_cursor_timedOut{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_cursor_open_noTimeout{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_cursor_open_pinned{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_cursor_open_total{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_network_bytesIn{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_network_bytesOut{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_wiredTiger_concurrentTransactions_write_out{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_wiredTiger_concurrentTransactions_write_available{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_wiredTiger_concurrentTransactions_read_out{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_wiredTiger_concurrentTransactions_read_available{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_metrics_document_deleted{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_document_inserted{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_document_returned{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_document_updated{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_metrics_queryExecutor_scanned{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_metrics_queryExecutor_scannedObjects{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_globalLock_activeClients_total{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_globalLock_activeClients_readers{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_globalLock_activeClients_writers{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_globalLock_currentQueue_total{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_globalLock_currentQueue_readers{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_globalLock_currentQueue_writers{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'mongodb_wiredTiger_cache_tracked_dirty_bytes_in_the_cache{namespace="'.concat(a,'",pod="').concat(r,'"} / mongodb_wiredTiger_cache_maximum_bytes_configured{namespace="').concat(a,'",pod="').concat(r,'"}')},{expr:'mongodb_wiredTiger_cache_bytes_currently_in_the_cache{namespace="'.concat(a,'",pod="').concat(r,'"} / mongodb_wiredTiger_cache_maximum_bytes_configured{namespace="').concat(a,'",pod="').concat(r,'"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("OP_COUNTERS"),legend:[t("OP_INSERT"),t("OP_QUERY"),t("OP_UPDATE"),t("OP_DELETE"),t("OP_GETMORE"),t("OP_COMMAND")],data:[(0,o.default)(e,"1.data.result[0]",{}),(0,o.default)(e,"2.data.result[0]",{}),(0,o.default)(e,"3.data.result[0]",{}),(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{}),(0,o.default)(e,"6.data.result[0]",{})]},{title:t("OPREPL_COUNTERS"),legend:[t("OPREPL_INSERT"),t("OPREPL_QUERY"),t("OPREPL_UPDATE"),t("OPREPL_DELETE"),t("OPREPL_GETMORE"),t("OPREPL_COMMAND")],data:[(0,o.default)(e,"7.data.result[0]",{}),(0,o.default)(e,"8.data.result[0]",{}),(0,o.default)(e,"9.data.result[0]",{}),(0,o.default)(e,"10.data.result[0]",{}),(0,o.default)(e,"11.data.result[0]",{}),(0,o.default)(e,"12.data.result[0]",{})]},{title:t("CONNECTIONS"),legend:[t("CONNECTIONS_CURRENT"),t("CONNECTIONS_TOTALCREATED"),t("CONNECTIONS_AVAILABLE"),t("CONNECTIONS_ACTIVE")],data:[(0,o.default)(e,"13.data.result[0]",{}),(0,o.default)(e,"14.data.result[0]",{}),(0,o.default)(e,"15.data.result[0]",{}),(0,o.default)(e,"16.data.result[0]",{})]},{title:t("CURSOR_COUNT"),legend:[t("CURSOR_TIMEDOUT"),t("CURSOR_OPEN_NOTIMEOUT"),t("CURSOR_OPEN_PINNED"),t("CURSOR_OPEN_TOTAL")],data:[(0,o.default)(e,"17.data.result[0]",{}),(0,o.default)(e,"18.data.result[0]",{}),(0,o.default)(e,"19.data.result[0]",{}),(0,o.default)(e,"20.data.result[0]",{})]},{title:t("MONGODB_NETWORK_TRAFFIC"),legend:[t("NETWORK_BYTESIN"),t("NETWORK_BYTESOUT")],unitType:"memory",data:[(0,o.default)(e,"21.data.result[0]",{}),(0,o.default)(e,"22.data.result[0]",{})]},{title:t("WIREDTIGER_OPERATION_COUNT"),legend:[t("WT_WRITE_OUT"),t("WT_WRITE_AVAILABLE"),t("WT_READ_OUT"),t("WT_READ_AVAILABLE")],data:[(0,o.default)(e,"23.data.result[0]",{}),(0,o.default)(e,"24.data.result[0]",{}),(0,o.default)(e,"25.data.result[0]",{}),(0,o.default)(e,"26.data.result[0]",{})]},{title:t("DOC_COUNT"),legend:[t("DOC_DELETED"),t("DOC_INSERTED"),t("DOC_RETURNED"),t("DOC_UPDATED")],data:[(0,o.default)(e,"27.data.result[0]",{}),(0,o.default)(e,"28.data.result[0]",{}),(0,o.default)(e,"29.data.result[0]",{}),(0,o.default)(e,"30.data.result[0]",{})]},{title:t("QUERYEXECUTOR"),legend:[t("SCANNEDKEYS"),t("SCANNEDDOCS")],data:[(0,o.default)(e,"31.data.result[0]",{}),(0,o.default)(e,"32.data.result[0]",{})]},{title:t("ACTIVECLIENTS"),legend:[t("CLIENTS_TOTAL"),t("CLIENTS_READERS"),t("CLIENTS_WRITERS")],data:[(0,o.default)(e,"33.data.result[0]",{}),(0,o.default)(e,"34.data.result[0]",{}),(0,o.default)(e,"35.data.result[0]",{})]},{title:t("QUEUED_OPERATIONS"),legend:[t("QUEUE_TOTAL"),t("QUEUE_READERS"),t("QUEUE_WRITERS")],unitType:"%",data:[(0,o.default)(e,"36.data.result[0]",{}),(0,o.default)(e,"37.data.result[0]",{}),(0,o.default)(e,"38.data.result[0]",{})]},{title:t("WIREDTIGER_CACHE"),legend:[t("WIREDTIGER_CACHE_USAGED"),t("WIREDTIGER_CACHE_DIRTY_USAGE")],unitType:"%",data:[(0,o.default)(e,"39.data.result[0]",{}),(0,o.default)(e,"40.data.result[0]",{})]}]}};a.default=c},4832:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={main:{getConfig:function(e){var t=e.detail,a=t.namespace,r=t.name;return[{targets:[{expr:'sum(elasticsearch_cluster_health_task_max_waiting_in_queue_millis{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')}]},{targets:[{expr:'sum(elasticsearch_cluster_health_number_of_in_flight_fetch{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_number_of_pending_tasks{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')}]},{targets:[{expr:'sum(elasticsearch_cluster_health_number_of_data_nodes{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_number_of_nodes{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')}]},{targets:[{expr:'sum(elasticsearch_cluster_health_delayed_unassigned_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_initializing_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_relocating_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_unassigned_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_active_primary_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')},{expr:'sum(elasticsearch_cluster_health_active_shards{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'"})')}]},{targets:[{expr:'sum(elasticsearch_cluster_health_status{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'",color="green"})')},{expr:'sum(elasticsearch_cluster_health_status{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'",color="yellow"})')},{expr:'sum(elasticsearch_cluster_health_status{service="'.concat(r,'-es-elasticsearch-exporter",namespace="').concat(a,'",color="red"})')}]}]},getMonitoringCfgs:function(e){return[{title:t("CLUSTER_TASK_WAITING_TIME"),legend:[t("CLUSTER_TASK_WAITING_TIME")],unit:"ms",data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("CLUSTER_TASK_STATUS"),legend:[t("CLUSTER_NUMBER_OF_IN_FLIGHT_FETCH"),t("CLUSTER_NUMBER_OF_PENDING_TASKS")],data:[(0,o.default)(e,"2.data.result[0]",{}),(0,o.default)(e,"3.data.result[0]",{})]},{title:t("CLUSTER_NUMBER_OF_NODES"),legend:[t("CLUSTER_NUMBER_OF_DATA_NODES"),t("CLUSTER_NUMBER_OF_ALL_NODES")],data:[(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{})]},{title:t("SHARD_STATUS"),dot:2,legend:[t("CLUSTER_DELAYED_UNASSIGNED_SHARDS"),t("CLUSTER_INITIALIZING_SHARDS"),t("CLUSTER_RELOCATING_SHARDS"),t("CLUSTER_UNASSIGNED_SHARDS"),t("CLUSTER_ACTIVE_PRIMARY_SHARDS"),t("CLUSTER_ACTIVE_SHARDS")],data:[(0,o.default)(e,"6.data.result[0]"),(0,o.default)(e,"7.data.result[0]"),(0,o.default)(e,"8.data.result[0]"),(0,o.default)(e,"9.data.result[0]"),(0,o.default)(e,"10.data.result[0]"),(0,o.default)(e,"11.data.result[0]")]},{title:t("CLUSTER_HEALTH_STATUS"),legend:[t("CLUSTER_HEALTH_STATUS_GREEN"),t("CLUSTER_HEALTH_STATUS_YELLOW"),t("CLUSTER_HEALTH_STATUS_RED")],data:[(0,o.default)(e,"12.data.result[0]",{}),(0,o.default)(e,"13.data.result[0]",{}),(0,o.default)(e,"14.data.result[0]",{})]}]}},pod:{getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'round(elasticsearch_jvm_memory_used_bytes{namespace="'.concat(a,'",name="').concat(r,'",area="heap"}/elasticsearch_jvm_memory_max_bytes{namespace="').concat(a,'",name="').concat(r,'",area="heap"},0.001)')}]},{targets:[{expr:'round(elasticsearch_filesystem_data_available_bytes{namespace="'.concat(a,'",name="').concat(r,'"},0.1)')}]},{targets:[{expr:'round(elasticsearch_filesystem_data_free_bytes{namespace="'.concat(a,'",name="').concat(r,'"}/elasticsearch_filesystem_data_size_bytes{namespace="').concat(a,'",name="').concat(r,'"},0.001)')}]},{targets:[{expr:'(elasticsearch_os_cpu_percent{namespace="'.concat(a,'",name="').concat(r,'"}/100)')}]},{targets:[{expr:'elasticsearch_os_load1{namespace="'.concat(a,'",name="').concat(r,'"}')},{expr:'elasticsearch_os_load5{namespace="'.concat(a,'",name="').concat(r,'"}')},{expr:'elasticsearch_os_load15{namespace="'.concat(a,'",name="').concat(r,'"}')}]},{targets:[{expr:'elasticsearch_indices_docs{namespace="'.concat(a,'",name="').concat(r,'"}')},{expr:'elasticsearch_indices_docs_deleted{namespace="'.concat(a,'",name="').concat(r,'"}')}]},{targets:[{expr:'rate(elasticsearch_indices_indexing_index_total{namespace="'.concat(a,'",name="').concat(r,'"}[5m])')}]},{targets:[{expr:'rate(elasticsearch_indices_search_query_total{namespace="'.concat(a,'",name="').concat(r,'"}[5m])')}]},{targets:[{expr:'round(rate(elasticsearch_indices_indexing_index_time_seconds_total{namespace="'.concat(a,'",name="').concat(r,'"}[5m])*1000)')}]},{targets:[{expr:'round(rate(elasticsearch_indices_search_query_time_seconds{namespace="'.concat(a,'",name="').concat(r,'"}[5m])*1000)')}]}]},getMonitoringCfgs:function(e){return[{title:t("HEAP_MEMORY"),legend:[t("JVM_MEMORY_HEAP_USAGE_PER")],unit:"%",dot:"2",data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("DATA_AVAILABLE_BYTES"),legend:[t("DATA_AVAILABLE_BYTES")],unitType:"memory",data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("DATA_AVAILABLE_PERCENT"),legend:[t("DATA_AVAILABLE_PERCENT")],unit:"%",dot:2,data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:"CPU",legend:[t("ECK_CPU_USAGE")],unit:"%",dot:2,data:[(0,o.default)(e,"4.data.result[0]",{})]},{title:t("OS_LOAD"),legend:[t("OS_LOAD1"),t("OS_LOAD5"),t("OS_LOAD15")],data:[(0,o.default)(e,"5.data.result[0]",{}),(0,o.default)(e,"6.data.result[0]",{}),(0,o.default)(e,"7.data.result[0]",{})]},{title:t("DOC_STATISTICS"),legend:[t("ELASTICSEARCH_INDICES_DOCS"),t("ELASTICSEARCH_INDICES_DOCS_DELETED")],data:[(0,o.default)(e,"8.data.result[0]",{}),(0,o.default)(e,"9.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_INDEXING_INDEX_QPS"),legend:[t("ELASTICSEARCH_INDICES_INDEXING_INDEX_QPS")],data:[(0,o.default)(e,"10.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_SEARCH_QUERY_QPS"),legend:[t("ELASTICSEARCH_INDICES_SEARCH_QUERY_QPS")],data:[(0,o.default)(e,"11.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_INDEXING_TIME_MS"),legend:[t("ELASTICSEARCH_INDICES_INDEXING_TIME_MS")],unit:"ms",data:[(0,o.default)(e,"12.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_SEARCH_TIME_MS"),legend:[t("ELASTICSEARCH_INDICES_SEARCH_TIME_MS")],unit:"ms",data:[(0,o.default)(e,"13.data.result[0]",{})]}]}}};a.default=c},4833:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={main:{getConfig:function(e){var t=e.detail,a=t.namespace,r=t.name;return[{targets:[{expr:'count(kafka_server_replicamanager_leadercount{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*"})')}]},{targets:[{expr:'sum(kafka_cluster_partition_underminisr{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*"})')}]},{targets:[{expr:'sum(kafka_controller_kafkacontroller_offlinepartitionscount{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*"})')}]},{targets:[{expr:'sum(irate(kafka_server_brokertopicmetrics_bytesin_total{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",topic!~"strimzi.cruisecontrol.modeltrainingsamples|strimzi.cruisecontrol.metrics|trainingsamples|__consumer_offsets|__strimzi-topic-operator-kstreams-topic-store-changelog|__strimzi_store_topic|strimzi.cruisecontrol.partitionmetricsamples|"}[2m]))')}]},{targets:[{expr:'sum(irate(kafka_server_brokertopicmetrics_bytesout_total{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",topic!~"strimzi.cruisecontrol.modeltrainingsamples|strimzi.cruisecontrol.metrics|trainingsamples|__consumer_offsets|__strimzi-topic-operator-kstreams-topic-store-changelog|__strimzi_store_topic|strimzi.cruisecontrol.partitionmetricsamples|"}[2m]))')}]},{targets:[{expr:'sum(irate(kafka_server_brokertopicmetrics_messagesin_total{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",topic!~"strimzi.cruisecontrol.modeltrainingsamples|strimzi.cruisecontrol.metrics|trainingsamples|__consumer_offsets|__strimzi-topic-operator-kstreams-topic-store-changelog|__strimzi_store_topic|strimzi.cruisecontrol.partitionmetricsamples|"}[2m]))')}]},{targets:[{expr:'sum(irate(kafka_server_brokertopicmetrics_totalproducerequests_total{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",topic!~"strimzi.cruisecontrol.modeltrainingsamples|strimzi.cruisecontrol.metrics|trainingsamples|__consumer_offsets|__strimzi-topic-operator-kstreams-topic-store-changelog|__strimzi_store_topic|strimzi.cruisecontrol.partitionmetricsamples|"}[2m]))')}]}]},getMonitoringCfgs:function(e){return[{title:t("ONLINE_BROKER_COUNT"),legend:[t("ONLINE_BROKER_COUNT")],data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("PARTITIONS_UNDER_MINIMUM_ISR"),legend:[t("PARTITIONS_UNDER_MINIMUM_ISR")],data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("OFFLINE_PARTITION_COUNT"),legend:[t("OFFLINE_PARTITION_COUNT")],data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("TOPIC_INCOMING_DATA_RATE"),legend:[t("TOPIC_INCOMING_DATA_RATE")],unitType:"traffic",data:[(0,o.default)(e,"4.data.result[0]")]},{title:t("TOPIC_OUTGOING_DATA_RATE"),legend:[t("TOPIC_OUTGOING_DATA_RATE")],unitType:"traffic",data:[(0,o.default)(e,"5.data.result[0]",{})]},{title:t("TOPIC_INCOMING_MESSAGE_RATE"),legend:[t("TOPIC_INCOMING_MESSAGE_RATE")],data:[(0,o.default)(e,"6.data.result[0]",{})]},{title:t("TOPIC_OUTGOING_MESSAGE_RATE"),legend:[t("TOPIC_OUTGOING_MESSAGE_RATE")],data:[(0,o.default)(e,"7.data.result[0]",{})]}]}},pod:{getConfig:function(e,t){var a=e.detail,r=a.namespace,n=a.name,o=t.name;return[{targets:[{expr:'kafka_network_socketserver_networkprocessoravgidle_percent{namespace="'.concat(r,'",strimzi_io_cluster="').concat(n,'",job=~"').concat(r,"/").concat(n,'.*",kubernetes_pod_name=~"').concat(o,'"}')}]},{targets:[{expr:'irate(kafka_server_kafkaserver_linux_disk_write_bytes{namespace="'.concat(r,'",strimzi_io_cluster="').concat(n,'",job=~"').concat(r,"/").concat(n,'.*",kubernetes_pod_name=~"').concat(o,'"}[2m])')}]},{targets:[{expr:'irate(kafka_server_kafkaserver_linux_disk_read_bytes{namespace="'.concat(r,'",strimzi_io_cluster="').concat(n,'",job=~"').concat(r,"/").concat(n,'.*",kubernetes_pod_name=~"').concat(o,'"}[2m])')}]},{targets:[{expr:'sum(container_memory_usage_bytes{namespace="'.concat(r,'",pod=~"').concat(o,'",container="kafka"}) by (pod)')}]},{targets:[{expr:'sum(rate(container_cpu_usage_seconds_total{namespace="'.concat(r,'",pod=~"').concat(o,'",container="kafka"}[5m])) by (pod)')}]},{targets:[{expr:'process_open_fds{namespace="'.concat(r,'",pod=~"').concat(o,'",job=~"').concat(r,"/").concat(n,'.*",container="kafka"}')}]},{targets:[{expr:'sum(jvm_memory_bytes_used{namespace="'.concat(r,'",kubernetes_pod_name=~"').concat(o,'",strimzi_io_name="').concat(n,'-kafka",job=~".*').concat(n,'.*"}) by (kubernetes_pod_name)')}]},{targets:[{expr:'jvm_threads_current{namespace="'.concat(r,'",kubernetes_pod_name=~"').concat(o,'",strimzi_io_name="').concat(n,'-kafka",job=~".*').concat(n,'.*"}')}]},{targets:[{expr:'kubelet_volume_stats_available_bytes{namespace="'.concat(r,'",persistentvolumeclaim=~"data-0-').concat(n,'-kafka-0"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("NETWORK_PROCESSOR_AVG_IDLE_PERCENT"),legend:[t("NETWORK_PROCESSOR_AVG_IDLE_PERCENT")],unit:"%",dot:2,data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("DISK_WRITES"),legend:[t("DISK_WRITES")],unitType:"traffic",data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("DISK_READS"),legend:[t("DISK_READS")],unitType:"traffic",data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("KAFKA_MEMORY_USAGE"),legend:[t("KAFKA_MEMORY_USAGE")],unitType:"memory",data:[(0,o.default)(e,"4.data.result[0]")]},{title:t("KAFKA_CPU_USAGE"),legend:[t("KAFKA_CPU_USAGE")],data:[(0,o.default)(e,"5.data.result[0]",{})]},{title:t("KAFKA_OPEN_FILE_DESC"),legend:[t("KAFKA_OPEN_FILE_DESC")],data:[(0,o.default)(e,"6.data.result[0]",{})]},{title:t("JVM_MEMORY_USAGE"),legend:[t("JVM_MEMORY_USAGE")],unitType:"memory",data:[(0,o.default)(e,"7.data.result[0]",{})]},{title:t("JVM_THREAD_COUNT"),legend:[t("JVM_THREAD_COUNT")],data:[(0,o.default)(e,"8.data.result[0]",{})]},{title:t("AVAILABLE_DISK_SPACE"),legend:[t("AVAILABLE_DISK_SPACE")],unitType:"memory",data:[(0,o.default)(e,"9.data.result[0]",{})]}]}}};a.default=c},4834:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(48),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(48),r(16);var o=n(r(26));var c={main:{getConfig:function(e){var t=e.detail,a=t.namespace,r=t.name;return[{targets:[{expr:'max(zookeeper_quorumsize{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",strimzi_io_kind="Kafka"})')}]},{targets:[{expr:'avg(zookeeper_inmemorydatatree_nodecount{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",strimzi_io_kind="Kafka"})')}]},{targets:[{expr:'sum(zookeeper_numaliveconnections{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",strimzi_io_kind="Kafka"})')}]},{targets:[{expr:'sum(zookeeper_inmemorydatatree_watchcount{namespace="'.concat(a,'",strimzi_io_cluster="').concat(r,'",job=~"').concat(a,"/").concat(r,'.*",strimzi_io_kind="Kafka"})')}]}]},getMonitoringCfgs:function(e){return[{title:t("QUORUM_SIZE"),legend:[t("QUORUM_SIZE")],data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("ZNODE_COUNT"),legend:[t("ZNODE_COUNT")],data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("ACTIVE_CONNECTIONS"),legend:[t("ACTIVE_CONNECTIONS")],data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("WATCHER_COUNT"),legend:[t("WATCHER_COUNT")],data:[(0,o.default)(e,"4.data.result[0]")]}]}},pod:{getConfig:function(e,t){var a=e.detail,r=a.namespace,n=a.name,o=t.name;return[{targets:[{expr:'sum(container_memory_usage_bytes{namespace="'.concat(r,'",pod=~"').concat(o,'",container="zookeeper"}) by (pod)')}]},{targets:[{expr:'sum(rate(container_cpu_usage_seconds_total{namespace="'.concat(r,'",pod=~"').concat(o,'",container="zookeeper"}[5m])) by (pod)')}]},{targets:[{expr:'process_open_fds{namespace="'.concat(r,'",pod=~"').concat(o,'",job=~"').concat(r,"/").concat(n,'.*",container="zookeeper"}')}]},{targets:[{expr:'jvm_threads_current{namespace="'.concat(r,'",kubernetes_pod_name=~"').concat(o,'",strimzi_io_name="').concat(n,'-zookeeper",job=~".*').concat(n,'.*"}')}]},{targets:[{expr:'sum(jvm_memory_bytes_used{namespace="'.concat(r,'",kubernetes_pod_name=~"').concat(o,'",strimzi_io_name="').concat(n,'-zookeeper",job=~".*').concat(n,'.*"}) by (kubernetes_pod_name)')}]},{targets:[{expr:'zookeeper_avgrequestlatency{namespace="'.concat(r,'",job=~"').concat(r,"/").concat(n,'.*",kubernetes_pod_name=~"').concat(o,'"}')}]},{targets:[{expr:'zookeeper_maxrequestlatency{namespace="'.concat(r,'",job=~"').concat(r,"/").concat(n,'.*",kubernetes_pod_name=~"').concat(o,'"}')}]},{targets:[{expr:'kubelet_volume_stats_available_bytes{namespace="'.concat(r,'",persistentvolumeclaim=~"data-').concat(n,"-zookeeper-").concat(o.slice(-1),'"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("ZOOKEEPER_MEMORY_USAGE"),legend:[t("ZOOKEEPER_MEMORY_USAGE")],unitType:"memory",data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("ZOOKEEPER_CPU_USAGE"),legend:[t("ZOOKEEPER_CPU_USAGE")],data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("OPEN_FILE_DESCRIPTORS"),legend:[t("OPEN_FILE_DESCRIPTORS")],data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:t("JVM_THREAD_COUNT"),legend:[t("JVM_THREAD_COUNT")],data:[(0,o.default)(e,"4.data.result[0]")]},{title:t("JVM_MEMORY_USAGE"),legend:[t("JVM_MEMORY_USAGE")],unitType:"memory",data:[(0,o.default)(e,"5.data.result[0]",{})]},{title:t("REQUEST_LATENCY_AVERAGE"),legend:[t("REQUEST_LATENCY_AVERAGE")],unitType:"second",data:[(0,o.default)(e,"6.data.result[0]",{})]},{title:t("REQUEST_LATENCY_MAXIMUM"),legend:[t("REQUEST_LATENCY_MAXIMUM")],unitType:"second",data:[(0,o.default)(e,"7.data.result[0]",{})]},{title:t("AVAILABLE_DISK_SPACE"),legend:[t("AVAILABLE_DISK_SPACE")],unitType:"memory",data:[(0,o.default)(e,"8.data.result[0]",{})]}]}}};a.default=c},4835:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5),r(16);var o=n(r(26));var c={main:{getConfig:function(e){var t=e.detail,a=t.namespace,r=t.name;return[{targets:[{expr:'opensearch_cluster_task_max_waiting_time_seconds{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')}]},{targets:[{expr:'opensearch_cluster_inflight_fetch_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')},{expr:'opensearch_cluster_pending_tasks_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')}]},{targets:[{expr:'opensearch_cluster_datanodes_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')},{expr:'opensearch_cluster_nodes_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')}]},{targets:[{expr:'round(opensearch_cluster_shards_active_percent{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"} / 100, 0.01)')}]},{targets:[{expr:'opensearch_cluster_shards_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0",type="initializing"}')},{expr:'opensearch_cluster_shards_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0",type="relocating"}')},{expr:'opensearch_cluster_shards_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0",type="unassigned"}')},{expr:'opensearch_cluster_shards_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0",type="active_primary"}')},{expr:'opensearch_cluster_shards_number{namespace="'.concat(a,'",pod="').concat(r,'-masters-0",type="active"}')}]},{targets:[{expr:'opensearch_cluster_status{namespace="'.concat(a,'",pod="').concat(r,'-masters-0"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("CLUSTER_TASK_WAITING_TIME"),legend:[t("CLUSTER_TASK_WAITING_TIME")],unit:"s",data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("CLUSTER_TASK_STATUS"),legend:[t("CLUSTER_NUMBER_OF_IN_FLIGHT_FETCH"),t("CLUSTER_NUMBER_OF_PENDING_TASKS")],data:[(0,o.default)(e,"2.data.result[0]",{}),(0,o.default)(e,"3.data.result[0]",{})]},{title:t("CLUSTER_NUMBER_OF_NODES"),legend:[t("CLUSTER_NUMBER_OF_DATA_NODES"),t("CLUSTER_NUMBER_OF_ALL_NODES")],data:[(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{})]},{title:t("CLUSTER_SHARDS_ACTIVE_PERCENT"),legend:[t("CLUSTER_SHARDS_ACTIVE_PERCENT")],unit:"%",dot:2,data:[(0,o.default)(e,"6.data.result[0]",{})]},{title:t("SHARD_STATUS"),legend:[t("CLUSTER_INITIALIZING_SHARDS"),t("CLUSTER_RELOCATING_SHARDS"),t("CLUSTER_UNASSIGNED_SHARDS"),t("CLUSTER_ACTIVE_PRIMARY_SHARDS"),t("CLUSTER_ACTIVE_SHARDS")],data:[(0,o.default)(e,"7.data.result[0]",{}),(0,o.default)(e,"8.data.result[0]",{}),(0,o.default)(e,"9.data.result[0]",{}),(0,o.default)(e,"10.data.result[0]",{}),(0,o.default)(e,"11.data.result[0]",{})]},{title:t("CLUSTER_HEALTH_STATUS"),legend:[t("CLUSTER_HEALTH_STATUS")],data:[(0,o.default)(e,"12.data.result[0]",{})]}]}},pod:{getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'round(opensearch_jvm_mem_heap_used_percent{namespace="'.concat(a,'",pod="').concat(r,'"} / 100, 0.01)')}]},{targets:[{expr:'round(opensearch_fs_total_available_bytes{namespace="'.concat(a,'",pod="').concat(r,'"})')}]},{targets:[{expr:'opensearch_fs_total_available_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}/opensearch_fs_total_total_bytes{namespace="').concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'round(opensearch_os_cpu_percent{namespace="'.concat(a,'",pod="').concat(r,'"} /100, 0.01)')}]},{targets:[{expr:'opensearch_os_load_average_one_minute{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'opensearch_os_load_average_five_minutes{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'opensearch_os_load_average_fifteen_minutes{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'opensearch_indices_doc_number{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'opensearch_indices_doc_deleted_number{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'opensearch_indices_indexing_index_current_number{namespace="'.concat(a,'", pod="').concat(r,'"}')}]},{targets:[{expr:'opensearch_indices_search_query_current_number{namespace="'.concat(a,'", pod="').concat(r,'"}')}]},{targets:[{expr:'delta(opensearch_indices_indexing_index_time_seconds{namespace="'.concat(a,'", pod="').concat(r,'"}[5m])')}]},{targets:[{expr:'delta(opensearch_indices_search_query_time_seconds{namespace="'.concat(a,'", pod="').concat(r,'"}[5m])')}]}]},getMonitoringCfgs:function(e){return[{title:t("HEAP_MEMORY"),legend:[t("JVM_MEMORY_HEAP_USAGE_PER")],unit:"%",dot:2,data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("DATA_AVAILABLE_BYTES"),legend:[t("DATA_AVAILABLE_BYTES")],unitType:"memory",data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("DATA_AVAILABLE_PERCENT"),legend:[t("DATA_AVAILABLE_PERCENT")],unit:"%",dot:2,data:[(0,o.default)(e,"3.data.result[0]",{})]},{title:"CPU",legend:[t("ECK_CPU_USAGE")],unit:"%",dot:2,data:[(0,o.default)(e,"4.data.result[0]",{})]},{title:t("OS_LOAD"),legend:[t("OS_LOAD1"),t("OS_LOAD5"),t("OS_LOAD15")],data:[(0,o.default)(e,"5.data.result[0]",{}),(0,o.default)(e,"6.data.result[0]",{}),(0,o.default)(e,"7.data.result[0]",{})]},{title:t("DOC_STATISTICS"),legend:[t("ELASTICSEARCH_INDICES_DOCS"),t("ELASTICSEARCH_INDICES_DOCS_DELETED")],data:[(0,o.default)(e,"8.data.result[0]",{}),(0,o.default)(e,"9.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_INDEXING_INDEX_QPS"),legend:[t("ELASTICSEARCH_INDICES_INDEXING_INDEX_QPS")],data:[(0,o.default)(e,"10.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_SEARCH_QUERY_QPS"),legend:[t("ELASTICSEARCH_INDICES_SEARCH_QUERY_QPS")],data:[(0,o.default)(e,"11.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_INDEXING_TIME_MS"),legend:[t("ELASTICSEARCH_INDICES_INDEXING_TIME_MS")],unit:"s",data:[(0,o.default)(e,"12.data.result[0]",{})]},{title:t("ELASTICSEARCH_INDICES_SEARCH_TIME_MS"),legend:[t("ELASTICSEARCH_INDICES_SEARCH_TIME_MS")],unit:"s",data:[(0,o.default)(e,"13.data.result[0]",{})]}]}},logstash:{getConfig:function(e,t){var a=e.detail.namespace,r=t.name;return[{targets:[{expr:'logstash_stats_jvm_mem_heap_used_bytes{namespace="'.concat(a,'",pod="').concat(r,'"}/logstash_stats_jvm_mem_heap_max_bytes{namespace="').concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'logstash_stats_process_cpu_percent{namespace="'.concat(a,'",pod="').concat(r,'"}*0.01')}]},{targets:[{expr:'logstash_stats_process_cpu_load_average_1m{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'logstash_stats_process_cpu_load_average_5m{namespace="'.concat(a,'",pod="').concat(r,'"}')},{expr:'logstash_stats_process_cpu_load_average_15m{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'rate(logstash_stats_events_in{namespace="'.concat(a,'",pod="').concat(r,'"}[2m])')},{expr:'rate(logstash_stats_events_filtered{namespace="'.concat(a,'",pod="').concat(r,'"}[2m])')},{expr:'rate(logstash_stats_events_out{namespace="'.concat(a,'",pod="').concat(r,'"}[2m])')}]},{targets:[{expr:'logstash_stats_queue_events_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]},{targets:[{expr:'logstash_stats_jvm_threads_count{namespace="'.concat(a,'",pod="').concat(r,'"}')}]}]},getMonitoringCfgs:function(e){return[{title:t("OPENSEARCH_HEAP_MEMORY"),legend:[t("OPENSEARCH_HEAP_MEMORY_PER")],unit:"%",dot:2,data:[(0,o.default)(e,"1.data.result[0]",{})]},{title:t("OPENSEARCH_CPU_USAGE"),legend:[t("OPENSEARCH_CPU_USAGE_PER")],unit:"%",dot:2,data:[(0,o.default)(e,"2.data.result[0]",{})]},{title:t("CPU_LOAD"),legend:[t("CPU_LOAD1"),t("CPU_LOAD5"),t("CPU_LOAD15")],data:[(0,o.default)(e,"3.data.result[0]",{}),(0,o.default)(e,"4.data.result[0]",{}),(0,o.default)(e,"5.data.result[0]",{})]},{title:t("EVENTS_STATISTICS"),legend:[t("IN_EVENTS_STATISTICS"),t("FILTERED_EVENTS_STATISTICS"),t("OUT_EVENTS_STATISTICS")],data:[(0,o.default)(e,"6.data.result[0]",{}),(0,o.default)(e,"7.data.result[0]",{}),(0,o.default)(e,"8.data.result[0]",{})]},{title:t("QUEUE_EVENTS_COUNT"),legend:[t("QUEUE_EVENTS_COUNT")],data:[(0,o.default)(e,"9.data.result[0]",{})]},{title:t("JVM_THREADS_COUNT"),legend:[t("JVM_THREADS_COUNT")],data:[(0,o.default)(e,"10.data.result[0]",{})]}]}}};a.default=c},4836:function(e,t,a){e.exports={button:"_22FIaIAalrDvw6HPWCx4Ev",pieChartZone:"_1rJo533Xe-a4cxKBg2vbTM",pieChartCompose:"aBgq2MYPWuFtdzADvOyTZ"}},4837:function(e,t,a){"use strict";a(15);var r=a(20);a(5),Object.defineProperty(t,"__esModule",{value:!0}),t.mergerValues=void 0;var n=r(a(61));a(5),a(160);var o=r(a(4838)),c=r(a(4854)),s=r(a(135)),l=r(a(4855)),i=r(a(806));t.mergerValues=function(e){var t=(0,s.default)(e);return(0,o.default)(c.default,(function(e,t){return Array.isArray(e)?(0,l.default)(e.concat(t),i.default):e})).apply(void 0,(0,n.default)(t))}},4856:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(84),r(16),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var o,c,s,l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(1)),h=r(186),v=r(433),g=n(r(790)),_=n(r(795)),y=n(r(836)),E=n(r(804)),b=r(52),S=r(434),O=r(791),R=r(816),A=n(r(1972));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,O.trigger)(o=(0,v.withRouter)((s=c=function(e){(0,u.default)(r,e);var a=k(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"getDescription",value:function(e){var a=(0,S.getWorkloadStatus)(e,e.module),r=a.status,n=a.reason;if(n)return p.default.createElement(E.default,{status:r,reason:t(n),data:e});var o=e.updateTime,c=e.createTime;return o?t("CREATED_AGO",{diff:(0,b.getLocalTime)(o).fromNow()}):t("CREATED_AGO",{diff:(0,b.getLocalTime)(c).fromNow()})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.switchShowMonitor,n=e.app_id;if(!a)return null;var o=a.roleText,c=a.spec.cpu?a.spec.cpu.includes("m")?a.spec.cpu:"".concat(a.spec.cpu,"Core"):"-",s=a.status;return p.default.createElement(v.Link,{to:"".concat(this.prefix,"/").concat(a.name)},p.default.createElement("div",{className:A.default.item},p.default.createElement(g.default,{icon:"pod",title:a.name,description:this.getDescription({createTime:a.creationTimestamp})}),p.default.createElement(g.default,{title:p.default.createElement(_.default,{type:s,name:t(String(s).toUpperCase()),flicker:!0}),description:t("STATUS")}),p.default.createElement(g.default,{title:a.ip,description:t("POD_IP_ADDRESS_SCAP")}),n!==R.RadonDBAppId.ClickHouse&&p.default.createElement(g.default,{title:o,description:t("TYPE")}),p.default.createElement(g.default,{title:"".concat(c," ").concat(a.spec.memory),description:t("RESOURCES")}),p.default.createElement(g.default,{title:a.capacity,description:t("CAPACITY")}),a.noMonitoring?p.default.createElement("div",{className:A.default["monitor-btn"]}):p.default.createElement(g.default,{className:A.default["monitor-btn"],title:p.default.createElement(h.Button,{type:"flat",onClick:r},p.default.createElement(y.default,{src:"/assets/cloudsat.svg",iconSize:16}))})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n="/clusters/".concat(a,"/projects/").concat(r,"/pods");return t?"/".concat(t).concat(n):n}}]),r}(p.default.PureComponent),c.propTypes={className:m.default.string,detail:m.default.object,switchShowMonitor:m.default.func,deleteNode:m.default.func,app_id:m.default.string},c.defaultProps={detail:{}},o=s))||o)||o;a.default=T},4857:function(e,t,a){e.exports={overview:"_1fnEV5GTezTAO2J1NJCFKq",title:"_1guWoWd8H4DWntBkj9A5Ug",info:"_2j1zlhy-uQmfOtcORtrmV4",card:"SLCjWxnBFeiGgClaPx_D9",detail:"_1rmZebXPUOrP7hDWV7mYRf",label:"_3eI23drWQTHTOW8EZuzaRM",desc:"_3BhV772zHxeTa7HYP3bXsR"}},4858:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(5),r(11),r(6),r(30),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(38),r(62),r(1973),r(7),r(32),r(1244),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(r(43));r(41);var s=n(r(44)),l=n(r(315)),i=n(r(31)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51));r(12),r(45),r(5),r(11),r(6),r(30),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(38),r(62),r(1079),r(1973),r(7),r(32),r(1244),r(1921),r(1922),r(1923),r(1924),r(1925);var h,v=n(r(0)),g=n(r(26)),_=n(r(4859)),y=r(186),E=n(r(240)),b=n(r(1024)),S=o(r(793)),O=n(r(796)),R=n(r(4860)),A=n(r(1974)),k=r(1245),T=r(816),D=n(r(4861));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}function I(e){return e&&"string"==typeof e?e[0].toUpperCase()+e.substr(1):e}var w=(0,S.default)({store:new R.default,module:"applications",name:"USER",injectStores:["rootStore","detailStore"]})(h=function(e){(0,f.default)(r,e);var a=N(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a={title:t("USERNAME"),dataIndex:"name",render:function(e,t){return v.default.createElement(b.default,{avatar:(0,g.default)(t,"icon","/assets/default-user.svg"),iconLetter:e,iconSize:40,title:e,desc:t.desc})}},r=[a,{title:t("PASSWORD"),dataIndex:"password",render:function(){return v.default.createElement(A.default,null)}}];switch(e.props.detailStore.detail.app_id){case T.RadonDBAppId.RedisCluster:case T.RadonDBAppId.RedisSentinel:return[].concat(r,[{title:t("PERMISSIONS"),dataIndex:"permission",render:function(e){return v.default.createElement("div",null,t(e))}}]);case T.RadonDBAppId.MySQL:case T.RadonDBAppId.PostgreSQL:return[].concat(r,[{title:t("PERMISSIONS"),dataIndex:"permission",render:function(e){return v.default.createElement("div",null,t("".concat(e.toUpperCase(),"_PERMISSIONS")))}}]);case T.RadonDBAppId.Kafka:return[P(P({},a),{},{width:"20%"}),{title:t("AUTHENTICATION_MODE"),dataIndex:"authentication",render:function(a){return v.default.createElement("div",null,v.default.createElement("img",{src:"/assets/paper-work.svg",className:"icon",style:{width:"16px"}}),v.default.createElement("span",null,a.toUpperCase()),e.props.detailStore.detail.authentication!==a&&v.default.createElement(y.Tooltip,{content:v.default.createElement("b",null,t("AUTHENTICATION_MODE_INCORRECT_DESC"))},v.default.createElement(y.Icon,{style:{marginLeft:"4px"},name:"exclamation",size:16,color:{primary:"#ffffff",secondary:"#eaa944"}})))}},{title:t("SECRET_KEY"),dataIndex:"password",render:function(e,a){var r;return a.cert&&(r=(0,k.binaryStringToBlob)(a.cert.value)),a.cert?v.default.createElement(y.Tooltip,{closeAfterClick:!1,content:v.default.createElement("div",null,v.default.createElement("div",{className:D.default.bold},t("USER_CERTIFICATE")),v.default.createElement("div",null,v.default.createElement("span",{className:D.default.bold},t("CERTIFICATE"),t(": ")),v.default.createElement("span",null,a.name,".p12"),v.default.createElement("a",{className:D.default.bold,style:{marginLeft:"4px",color:"#329DCE"},href:URL.createObjectURL(r),download:"".concat(a.name,".p12")},t("DOWNLOAD"))),v.default.createElement("div",null,v.default.createElement("span",{className:D.default.bold},t("PASSWORD"),t(": ")),v.default.createElement(A.default,{password:e,color:{primary:"#ffffff"}})),v.default.createElement("div",null,v.default.createElement("span",{className:D.default.bold},t("VALIDITY_PERIOD"),t(": "),a.cert.validDate)))},v.default.createElement("span",null,v.default.createElement("img",{className:"icon",src:"/assets/certificates.svg",style:{width:"16px"}}),v.default.createElement("span",null,t("CA_CERTIFICATE")))):v.default.createElement(y.Tooltip,{closeAfterClick:!1,content:v.default.createElement("div",null,v.default.createElement("span",{className:D.default.bold},t("PASSWORD"),t(": ")),v.default.createElement(A.default,{password:e,color:{primary:"#ffffff"}}))},v.default.createElement("span",null,v.default.createElement(y.Icon,{name:"lock",size:16}),v.default.createElement(A.default,null)))}},{title:t("AUTHORIZATION_RULE"),dataIndex:"permissionRules",render:function(e){return v.default.createElement(y.Tooltip,{content:v.default.createElement("div",null,e.map((function(e,t){return v.default.createElement("div",null,v.default.createElement("b",null,"ACL ",t+1),v.default.createElement("div",null,I(e.type)," ",e.operation," ",I(e.resource.type),"",I(e.resource.patternType)," ",e.resource.name))}))),style:{top:"-8px"}},v.default.createElement("span",null,e.length," ACL",e.length>1?"s":""))}}];default:return r}},e.createAccount=function(){var a=P(P(P({},e.props.match.params),e.props.query),{},{app_id:e.props.detailStore.detail.app_id});return e.props.trigger("openpitrix.db.createAccount",P({icon:"human",title:t("CREATE_USER"),action:e.props.store.add,content:"".concat(t("CREATE_SUCCESSFUL")),nameReplicationValidator:e.props.store.checkUserName,authentication:e.props.detailStore.detail.authentication},a))},e.getData=function(t){var a=e.props.match.params.id;e.props.getData(P(P({},t),{},{cluster_id:a}))},e}return(0,d.default)(r,[{key:"getTableProps",value:function(){var e=this,a=this.props,r=a.tableProps,n=a.detailStore.detail,o=n.isRunning,c=n.authentication,s=n.app_id,l=[{key:"deploy",type:"control",text:t("CREATE"),action:"create",forbidden:!o,onClick:this.createAccount}];o||(l[0].tooltip={message:t("USERCREATION_NOT_ALLOWED"),placement:"bottom"});var i={key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){var a=r.data.filter((function(e){return e.root}));(0,_.default)(a,r.selectedRowKeys.map((function(e){return{name:e}})),"name").length>0?E.default.warning({content:t("CANNOT_DELETE_ROOT_USER")}):e.props.trigger("resource.batch.delete",P(P(P({once:!0,type:"USER",rowKey:r.rowKey},e.props.match.params),e.props.query),{},{success:function(){return e.getData(P(P({},e.props.match.params),e.props.query))}}))}};return{tableActions:P(P({},r.tableActions),{},{selectActions:o?[i]:[],actions:s!==T.RadonDBAppId.Kafka||c?l:[],onCreate:null}),emptyProps:{icon:"human",desc:s===T.RadonDBAppId.Kafka?c?t("KAFKA_NO_USER_DESC"):t("NO_AUTHENTICATION_DESC"):t("DATABASE_USERS_EMPTY_DESC")},searchType:"keyword"}}},{key:"componentWillUnmount",value:function(){this.props.store.clear()}},{key:"render",value:function(){var e=this.props.tableProps;return v.default.createElement("div",{className:D.default.account},v.default.createElement(S.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),v.default.createElement(O.default,(0,l.default)({},e,this.getTableProps(),{itemActions:this.itemActions,columns:this.getColumns(),alwaysUpdate:!0}))))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.detailStore,o=a.store,l=n.detail,i=l.app_id,u=l.authentication;if(!n.detail.isRunning||i===T.RadonDBAppId.Kafka&&!u)return[];var d=P(P(P({},this.props.match.params),this.props.query),{},{app_id:i});return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){var a;r("openpitrix.db.createAccount",P({detail:e,title:t("EDIT_USER"),action:(a=(0,s.default)(c.default.mark((function a(r){return c.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.root){a.next=3;break}return E.default.warning({content:t("CANNOT_EDIT_ROOT_USER")}),a.abrupt("return");case 3:return a.next=5,o.edit(r);case 5:case"end":return a.stop()}}),a)}))),function(e){return a.apply(this,arguments)}),content:e.root?"":"".concat(t("MODIFY_SUCCESSFUL")),nameReplicationValidator:o.checkUserName,authentication:u},d))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(a){a.root?E.default.warning({content:t("CANNOT_DELETE_ROOT_USER")}):r("resource.delete",{type:"USER",title:t("DELETE_USER"),detail:P(P({},a),d),store:e.props.store})}}]}}]),r}(v.default.Component))||h;a.default=w},4860:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(29),a(197),a(6),a(84),a(30),a(73),a(18),a(48),a(192),a(16),a(137),a(9),a(13),a(10),a(4),a(22),a(23),a(24),a(17),a(110),a(85),a(38),a(64),a(136),a(812),a(7),a(32),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(29),a(197),a(6),a(84),a(30),a(73),a(18),a(28),a(48),a(192),a(859),a(191),a(42),a(16),a(159),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(110),a(85),a(38),a(64),a(812),a(1429),a(7),a(32),a(1430),a(1431),a(1432),a(109);var n=r(a(58)),o=r(a(43));a(41);var c,s,l,i,u,d,f,p=r(a(44)),m=r(a(61)),h=r(a(31)),v=r(a(65)),g=r(a(36)),_=r(a(37)),y=r(a(88)),E=r(a(55)),b=r(a(56)),S=r(a(51)),O=r(a(49)),R=(r(a(66)),a(14)),A=r(a(26)),k=r(a(63)),T=r(a(457)),D=r(a(74)),C=r(a(242)),P=r(a(68)),N=a(440),I=a(52),w=a(816),x=a(1015),M=a(1093);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,h.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var B='{"apiVersion":"mysql.radondb.com/v1alpha1","kind":"MysqlUser","metadata":{"name":"user-sample","labels":{}},"spec":{"user":"sample_user","hosts":["%"],"permissions":[{"database":"*","tables":["*"],"privileges":["SELECT"]}],"clusterBinder":{"clusterName":"sample","nameSpace":"default"},"secretBinder":{"secretName":"sample-user-password","secretKey":"pwdForSample"}}}',Y=["ALTER","ALTER ROUTINE","CREATE","CREATE ROUTINE","CREATE TEMPORARY TABLES","CREATE VIEW","DELETE","DROP","EXECUTE","EVENT","INDEX","INSERT","LOCK TABLES","SELECT","SHOW VIEW","UPDATE","TRIGGER","REFERENCES"],F=["ALTER","ALTER ROUTINE","CREATE","CREATE ROUTINE","CREATE TEMPORARY TABLES","CREATE VIEW","DELETE","DROP","EXECUTE","EVENT","INDEX","INSERT","LOCK TABLES","PROCESS","RELOAD","SELECT","SHOW DATABASES","SHOW VIEW","UPDATE","TRIGGER","REFERENCES"],V=(c=function(e){(0,E.default)(P,e);var t,a,r,c,h,b,S,O,R=U(P);function P(){var e;(0,g.default)(this,P);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=R.call.apply(R,[this].concat(a))).resourceName="db_user",e.app_id="",e.allUsers=[],e.getUrl=function(e){return(0,x.getManifestApi)(e)},(0,v.default)(e,"fetchList",s,(0,y.default)(e)),(0,v.default)(e,"checkUserName",l,(0,y.default)(e)),(0,v.default)(e,"add",i,(0,y.default)(e)),(0,v.default)(e,"edit",u,(0,y.default)(e)),(0,v.default)(e,"delete",d,(0,y.default)(e)),(0,v.default)(e,"batchDelete",f,(0,y.default)(e)),e.getPGUsersFromYaml=function(e){var t=(0,A.default)(e,"spec.postgresql.users.admin",[]).map((function(e){return j(j({},e),{},{permission:"Advanced"})})),a=(0,A.default)(e,"spec.postgresql.users.normal",[]).map((function(e){return j(j({},e),{},{permission:"General"})}));return[].concat((0,m.default)(t),(0,m.default)(a))},e.getMySQLSecretCrd=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,c=a.cluster_id,t.next=3,request.get(e.getMySQLSecretUrl(r,n,c));case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addMySQLSecret=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,c=a.yamlJSON,s=a.user,l=a.cluster_id,(0,D.default)(c,"data.".concat(s.name),(0,N.safeBtoa)(s.password)),t.next=4,request.put(e.getMySQLSecretUrl(r,n,l),c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteMySQLSecret=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,c=a.secretKeys,s=a.cluster_id,t.next=3,e.getMySQLSecretCrd({cluster:r,namespace:n,cluster_id:s});case 3:return l=t.sent,c.forEach((function(e){delete l.data[e]})),t.next=7,request.put(e.getMySQLSecretUrl(r,n,s),l);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getMySQLUserList=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,c=a.cluster_id,t.next=3,request.get("".concat(e.getMysqlUsersUrl(r,n),"?labelSelector=cluster_id=").concat(c));case 3:return s=t.sent,t.next=6,e.getMySQLSecretCrd({cluster:r,namespace:n,cluster_id:c});case 6:return l=t.sent,t.abrupt("return",s.items.filter((function(e){return"False"!==(0,A.default)(e,"status.conditions[0].status")})).map((function(e){return{name:(0,A.default)(e,"spec.user"),host:(0,A.default)(e,"spec.hosts").join(","),database:(0,A.default)(e,"spec.permissions[0].database"),permission:(0,A.default)(e,"spec.permissions[0].privileges",[]).length===F.length?"Advanced":"General",password:(0,N.safeAtob)(l.data[(0,A.default)(e,"spec.user")])}})));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addMySQLUser=function(){var t=(0,p.default)(o.default.mark((function t(a,r){var n,c,s,l,i,u,d,f,m,h,v,g;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.cluster,c=a.cluster_id,s=a.namespace,l=a.user,i=l.name,u=l.permission,d=l.host,f=l.database,m="".concat(c,"---").concat(e.userNameToMetadataName(i)),h="".concat(e.getMysqlUsersUrl(n,s),"/").concat(m),v=JSON.parse(B),(0,D.default)(v,"metadata.name",m),(0,D.default)(v,"metadata.labels",{cluster_id:c}),(0,D.default)(v,"spec.user",i),(0,D.default)(v,"spec.hosts",d.split(",")),(0,D.default)(v,"spec.permissions[0].database",f),(0,D.default)(v,"spec.permissions[0].privileges","Advanced"===u?F:Y),(0,D.default)(v,"spec.withGrantOption","Advanced"===u),(0,D.default)(v,"spec.userOwner",{clusterName:c,nameSpace:s}),(0,D.default)(v,"spec.secretSelector",{secretName:e.getMySQLSecretName(c),secretKey:i}),r){t.next=18;break}return t.next=17,e.getMySQLSecretCrd({cluster:n,namespace:s,cluster_id:c});case 17:r=t.sent;case 18:return t.next=20,request.post(h,v);case 20:return t.next=22,e.addMySQLSecret({cluster:n,cluster_id:c,namespace:s,user:l,yamlJSON:r});case 22:return g=0,t.next=25,new Promise((function(t,a){var r=setInterval((0,p.default)(o.default.mark((function i(){var u,d;return o.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,request.get(h);case 2:if(u=o.sent,d=(0,A.default)(u,"status.conditions[0].status"),g++,!("False"===d||g>50)){o.next=12;break}return clearInterval(r),o.next=9,e.deleteMySQLUser({cluster:n,namespace:s,cluster_id:c,users:[l]});case 9:a({message:"Create Failed"}),o.next=13;break;case 12:"True"===d&&(clearInterval(r),t());case 13:case"end":return o.stop()}}),i)}))),200)}));case 25:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.deleteMySQLUser=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.namespace,c=a.cluster_id,s=a.users,l=[],i=[],s.forEach((function(t){l.push(request.delete("".concat(e.getMysqlUsersUrl(r,n),"/").concat(c,"---").concat(e.userNameToMetadataName(t.name)))),i.push(t.name)})),t.next=6,Promise.all(l);case 6:return t.next=8,e.deleteMySQLSecret({cluster:r,namespace:n,cluster_id:c,secretKeys:i});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editMySQLUser=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.cluster_id,c=a.namespace,s=a.user,l=a.oldUser,t.next=3,e.deleteMySQLUser({cluster:r,cluster_id:n,namespace:c,users:[l]});case 3:return t.next=5,e.addMySQLUser({cluster:r,cluster_id:n,namespace:c,user:s});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getRedisUserList=function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.get(e.getRedisUsersUrl(a));case 2:return r=t.sent,n=(0,A.default)(r,'data["aclfile.conf"]',""),t.abrupt("return",e.getUsersFromRedisText(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,_.default)(P,[{key:"updateList",value:(O=(0,p.default)(o.default.mark((function e(t){var a,r,n,c,s,l,i,u,d,f,p=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p.length>1&&void 0!==p[1]?p[1]:{},r=JSON.parse(t.customResource),n=a.page,c=void 0===n?1:n,s=a.limit,l=void 0===s?10:s,i=a.keyword,u=a.namespace,this.app_id=(0,w.getAppIdByKind)(r.kind),d=[],e.t0=this.app_id,e.next=e.t0===w.RadonDBAppId.ClickHouse?8:e.t0===w.RadonDBAppId.PostgreSQL?11:e.t0===w.RadonDBAppId.MySQL?13:e.t0===w.RadonDBAppId.RedisCluster||e.t0===w.RadonDBAppId.RedisSentinel?17:e.t0===w.RadonDBAppId.Kafka?21:25;break;case 8:return f=(0,A.default)(r,"spec.configuration.users",{}),d=Object.keys(f).filter((function(e){return e.endsWith("/password")})).map((function(e){var t=e.replace("/password","");return{name:t,password:f[e],ip:(0,A.default)(f,"".concat(t,"/networks/ip.[0]")),network:(0,A.default)(f,"".concat(t,"/networks/ip.[1]")),namespace:u}})),e.abrupt("break",26);case 11:return d=this.getPGUsersFromYaml(r),e.abrupt("break",26);case 13:return e.next=15,this.getMySQLUserList(a);case 15:return d=e.sent,e.abrupt("break",26);case 17:return e.next=19,this.getRedisUserList(a);case 19:return d=e.sent,e.abrupt("break",26);case 21:return e.next=23,this.getKafkaUserList(a);case 23:return d=e.sent,e.abrupt("break",26);case 25:return e.abrupt("break",26);case 26:this.allUsers=d.slice(),i&&(d=d.filter((function(e){return e.name.includes(i)}))),Object.assign(this.list,{data:d.slice((c-1)*l,c*l),total:d.length,isLoading:!1,limit:l,page:c,filters:i?{keyword:i}:{},selectedRowKeys:[]});case 29:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"addUserToYamlJSON",value:function(e,t,a){var r=e.name,n=e.password,o=e.network,c=void 0===o?"::/0":o,s=e.ip,l=void 0===s?"127.0.0.1":s,i=e.permission;switch(a){case w.RadonDBAppId.ClickHouse:var u=(0,A.default)(t,"spec.configuration.users",{});return u["".concat(r,"/networks/ip")]=[l,c],u["".concat(r,"/password")]=n,u["".concat(r,"/profile")]="default",u["".concat(r,"/quotas")]="default",t;case w.RadonDBAppId.PostgreSQL:var d={name:r,password:n},f=(0,A.default)(t,"spec.postgresql.users",{admin:[],normal:[]});return"Advanced"===i?f.admin.push(d):f.normal.push(d),(0,D.default)(t,"spec.postgresql.users",f),t;default:return t}}},{key:"deleteUserFromYamlJSON",value:function(e,t,a){var r=e.name;switch(a){case w.RadonDBAppId.ClickHouse:var n=(0,A.default)(t,"spec.configuration.users",{}),o=["/networks/ip","/password","/profile","/quotas"],c=(0,T.default)(n,(function(e,t){return o.map((function(e){return r+e})).includes(t)}));return(0,D.default)(t,"spec.configuration.users",c),t;case w.RadonDBAppId.PostgreSQL:var s=[],l=(s="Advanced"===e.permission?(0,A.default)(t,"spec.postgresql.users.admin",[]):(0,A.default)(t,"spec.postgresql.users.normal",[])).findIndex((function(t){return t.name===e.name}));return l>-1&&s.splice(l,1),t;default:return t}}},{key:"getSecretUrl",value:function(e,t,a){return"/api".concat(globals.app.isMultiCluster&&e?"/clusters/".concat(e):"","/v1/namespaces/").concat(t,"/secrets/").concat(a)}},{key:"getMySQLSecretName",value:function(e){return"".concat(e,"-userpassword-secret")}},{key:"getMysqlUsersUrl",value:function(e,t){return"/apis".concat(globals.app.isMultiCluster&&e?"/clusters/".concat(e):"","/mysql.radondb.com/v1alpha1/namespaces/").concat(t,"/mysqlusers")}},{key:"getMySQLSecretUrl",value:function(e,t,a){return this.getSecretUrl(e,t,this.getMySQLSecretName(a))}},{key:"userNameToMetadataName",value:function(e){return e.toLowerCase().replace(/_/g,"-0-z")}},{key:"getRedisUsersUrl",value:function(e){var t=e.cluster,a=e.namespace,r=e.cluster_id;return"/api".concat(globals.app.isMultiCluster&&t?"/clusters/".concat(t):"","/v1/namespaces/").concat(a,"/configmaps/").concat(r,"-acl-config")}},{key:"getUsersFromRedisText",value:function(e){return e?e.split("\n").map((function(e){var t=e.trim().split(" ");return{name:(0,A.default)(t,"[1]"),password:(0,A.default)(t,"[3]","").substring(1),permission:t.slice(4).join(" ")}})):[]}},{key:"createRedisUserText",value:function(e){var t=e.name,a=e.password,r=e.permission,n=void 0===r?"~* &* +@all":r;return"user ".concat(t," on >").concat(a," ").concat(n)}},{key:"addRedisUser",value:(S=(0,p.default)(o.default.mark((function e(t){var a,r,c,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,r=(0,n.default)(t,["user"]),e.next=3,request.get(this.getRedisUsersUrl(r));case 3:return c=e.sent,s=(0,A.default)(c,'data["aclfile.conf"]',""),this.getUsersFromRedisText(s).find((function(e){return e.name===a.name}))||(l=this.createRedisUserText(a),(0,D.default)(c,'data["aclfile.conf"]',s?"".concat(l,"\n").concat(s):l)),e.next=10,request.put(this.getRedisUsersUrl(r),c);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"deleteRedisUsers",value:(b=(0,p.default)(o.default.mark((function e(t){var a,r,c,s,l=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.users,r=(0,n.default)(t,["users"]),e.next=3,request.get(this.getRedisUsersUrl(r));case 3:return c=e.sent,s=(0,A.default)(c,'data["aclfile.conf"]',""),a.forEach((function(e){var t=l.getUsersFromRedisText(s),a=s.split("\n"),r=t.findIndex((function(t){return t.name===e.name}));s&&r>-1&&(a.splice(r,1),s=a.join("\n"))})),(0,D.default)(c,'data["aclfile.conf"]',s),e.next=9,request.put(this.getRedisUsersUrl(r),c);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"editRedisUser",value:(h=(0,p.default)(o.default.mark((function e(t){var a,r,c,s,l,i,u,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.oldUser,a=t.user,r=(0,n.default)(t,["oldUser","user"]),e.next=3,request.get(this.getRedisUsersUrl(r));case 3:if(c=e.sent,s=(0,A.default)(c,'data["aclfile.conf"]',""),l=this.getUsersFromRedisText(s),i=l.findIndex((function(e){return e.name===a.name})),!(s&&i>-1)){e.next=15;break}return(u=s.split("\n")).splice(i,1),d=this.createRedisUserText(a),u.unshift(d),(0,D.default)(c,'data["aclfile.conf"]',u.join("\n")),e.next=15,request.put(this.getRedisUsersUrl(r),c);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"getKafkaUserUrl",value:function(e){var t=e.cluster,a=e.namespace,r=e.name,n=e.cluster_id;return"/apis".concat(globals.app.isMultiCluster&&t?"/clusters/".concat(t):"","/kafka.strimzi.io/v1beta2/namespaces/").concat(a,"/kafkausers").concat(r?"/".concat(r):n?"?labelSelector=strimzi.io/cluster=".concat(n):"")}},{key:"getKafkaUserList",value:(c=(0,p.default)(o.default.mark((function e(t){var a,r,n=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get(this.getKafkaUserUrl(t));case 2:return a=e.sent,e.next=5,Promise.all(a.items.map((function(e){return request.get(n.getSecretUrl(t.cluster,t.namespace,e.metadata.name))})));case 5:return r=e.sent,e.abrupt("return",a.items.map((function(e,t){var a=window.atob||N.safeAtob,n=a((0,A.default)(r,"[".concat(t,']data["user.p12"]'),"")),o=n?(0,A.default)(r,"[".concat(t,']data["user.password"]'),""):(0,A.default)(r,"[".concat(t,"]data.password"),"");return{name:e.metadata.name,password:a(o),authentication:e.spec.authentication.type,authorization:e.spec.authorization.type,permissionRules:e.spec.authorization.acls,kafkaUserConfig:(0,A.default)(e,"spec.quotas",{}),cert:n?{value:n,validDate:(0,I.getLocalTime)(e.metadata.creationTimestamp).add(3650,"d").format("YYYY.MM.DD")}:null}})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"addKafkaUser",value:(r=(0,p.default)(o.default.mark((function e(t){var a,r,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,r=(0,n.default)(t,["user"]),c=JSON.parse(JSON.stringify(M.kafkaYaml.user)),(0,D.default)(c,"metadata.name",a.name),(0,D.default)(c,'metadata.labels["strimzi.io/cluster"]',r.cluster_id),(0,D.default)(c,"spec.authentication",{type:a.authentication}),(0,D.default)(c,"spec.authorization",{type:a.authorization,acls:a.permissionRules.map((function(e){return j(j({},e),{},{host:"*"})}))}),(0,k.default)(a.kafkaUserConfig)?(0,C.default)(c,"spec.quotas"):(0,D.default)(c,"spec.quotas",a.kafkaUserConfig),delete r.cluster_id,e.next=10,request.post(this.getKafkaUserUrl(r),c);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"editKafkaUser",value:(a=(0,p.default)(o.default.mark((function e(t){var a,r,c,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.user,r=t.oldUser,c=(0,n.default)(t,["user","oldUser"]),a.name===r.name){e.next=7;break}return e.next=4,this.deleteKafkaUsers(j({users:[r]},c));case 4:return e.next=6,this.addKafkaUser(j({user:a},c));case 6:return e.abrupt("return");case 7:return e.next=9,request.get(this.getKafkaUserUrl(j({name:a.name},c)));case 9:return s=e.sent,(0,D.default)(s,"spec.authentication",{type:a.authentication}),(0,D.default)(s,"spec.authorization",{type:a.authorization,acls:a.permissionRules.map((function(e){return j(j({},e),{},{host:"*"})}))}),(0,k.default)(a.kafkaUserConfig)?(0,C.default)(s,"spec.quotas"):(0,D.default)(s,"spec.quotas",a.kafkaUserConfig),e.next=15,request.put(this.getKafkaUserUrl(j({name:a.name},c)),s);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deleteKafkaUsers",value:(t=(0,p.default)(o.default.mark((function e(t){var a,r,c=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.users,r=(0,n.default)(t,["users"]),e.next=3,Promise.all(a.map((function(e){return request.delete(c.getKafkaUserUrl(j(j({},r),{},{name:e.name})))})));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),P}(P.default),s=(0,O.default)(c.prototype,"fetchList",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,p.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.list.isLoading=!0,t.next=3,request.get(e.getUrl(a));case 3:return r=t.sent,t.next=6,e.updateList(r,a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l=(0,O.default)(c.prototype,"checkUserName",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){return t===a||!e.allUsers.find((function(e){return e.name===t}))}}}),i=(0,O.default)(c.prototype,"add",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c,s,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.get(e.getUrl(a));case 2:r=t.sent,n=JSON.parse(r.customResource),t.t0=a.app_id,t.next=t.t0===w.RadonDBAppId.MySQL?7:t.t0===w.RadonDBAppId.RedisCluster||t.t0===w.RadonDBAppId.RedisSentinel?17:t.t0===w.RadonDBAppId.Kafka?22:36;break;case 7:return c=a.user.name,t.next=10,e.getMySQLSecretCrd(a);case 10:if((s=t.sent).data&&s.data[c]){t.next=16;break}return t.next=14,e.addMySQLUser(a,s);case 14:return t.next=16,e.updateList(r,a);case 16:return t.abrupt("break",44);case 17:return t.next=19,e.addRedisUser(a);case 19:return t.next=21,e.updateList(r,a);case 21:return t.abrupt("break",44);case 22:return t.next=24,e.addKafkaUser(a);case 24:return t.prev=24,(0,D.default)(window,"globals.config.enableErrorNotify",!1),t.next=28,e.updateList(r,a);case 28:t.next=34;break;case 30:return t.prev=30,t.t1=t.catch(24),t.next=34,new Promise((function(t,n){setTimeout((function(){(0,D.default)(window,"globals.config.enableErrorNotify",!0),e.updateList(r,a).then((function(){t()}),(function(e){return n(e)}))}),2e3)}));case 34:return(0,D.default)(window,"globals.config.enableErrorNotify",!0),t.abrupt("break",44);case 36:return l=e.addUserToYamlJSON(a.user,n,e.app_id),r.customResource=JSON.stringify(l),r.version+=1,t.next=41,request.put(e.getUrl(a),r);case 41:return t.next=43,e.updateList(r,a);case 43:return t.abrupt("break",44);case 44:case"end":return t.stop()}}),t,null,[[24,30]])})));return function(e){return t.apply(this,arguments)}}()}}),u=(0,O.default)(c.prototype,"edit",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.get(e.getUrl(a));case 2:r=t.sent,t.t0=e.app_id,t.next=t.t0===w.RadonDBAppId.MySQL?6:t.t0===w.RadonDBAppId.RedisCluster||t.t0===w.RadonDBAppId.RedisSentinel?11:t.t0===w.RadonDBAppId.Kafka?16:21;break;case 6:return t.next=8,e.editMySQLUser(a);case 8:return t.next=10,e.updateList(r,a);case 10:return t.abrupt("break",31);case 11:return t.next=13,e.editRedisUser(a);case 13:return t.next=15,e.updateList(r,a);case 15:return t.abrupt("break",31);case 16:return t.next=18,e.editKafkaUser(a);case 18:return t.next=20,e.updateList(r,a);case 20:return t.abrupt("break",31);case 21:return n=JSON.parse(r.customResource),n,c=e.addUserToYamlJSON(a.user,e.deleteUserFromYamlJSON(a.oldUser,n,e.app_id),e.app_id),r.customResource=JSON.stringify(c),r.version+=1,t.next=28,request.put(e.getUrl(a),r);case 28:return t.next=30,e.updateList(r,a);case 30:return t.abrupt("break",31);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,O.default)(c.prototype,"delete",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,p.default)(o.default.mark((function t(a){var r,n,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request.get(e.getUrl(a));case 2:r=t.sent,t.t0=e.app_id,t.next=t.t0===w.RadonDBAppId.MySQL?6:t.t0===w.RadonDBAppId.RedisCluster||t.t0===w.RadonDBAppId.RedisSentinel?11:t.t0===w.RadonDBAppId.Kafka?16:22;break;case 6:return t.next=8,e.deleteMySQLUser(j(j({},a),{},{users:[a]}));case 8:return t.next=10,e.updateList(r,a);case 10:return t.abrupt("break",31);case 11:return t.next=13,e.deleteRedisUsers(j(j({},a),{},{users:[{name:a.name,password:a.password}]}));case 13:return t.next=15,e.updateList(r,a);case 15:return t.abrupt("break",31);case 16:return t.next=18,e.deleteKafkaUsers(j(j({},a),{},{users:[{name:a.name}]}));case 18:return delete a.name,t.next=21,e.updateList(r,a);case 21:return t.abrupt("break",31);case 22:return n=JSON.parse(r.customResource),c=e.deleteUserFromYamlJSON(a,n,e.app_id),r.customResource=JSON.stringify(c),r.version+=1,t.next=28,request.put(e.getUrl(a),r);case 28:return t.next=30,e.updateList(r,a);case 30:return t.abrupt("break",31);case 31:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),f=(0,O.default)(c.prototype,"batchDelete",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,p.default)(o.default.mark((function t(a){var r,c,s,l,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.selectedItems,c=void 0===r?[]:r,s=(0,n.default)(a,["selectedItems"]),t.next=3,request.get(e.getUrl(s));case 3:l=t.sent,t.t0=e.app_id,t.next=t.t0===w.RadonDBAppId.MySQL?7:t.t0===w.RadonDBAppId.RedisCluster||t.t0===w.RadonDBAppId.RedisSentinel?12:t.t0===w.RadonDBAppId.Kafka?15:18;break;case 7:return t.next=9,e.deleteMySQLUser(j(j({},s),{},{users:c}));case 9:return t.next=11,e.updateList(l,s);case 11:return t.abrupt("break",27);case 12:return t.next=14,e.deleteRedisUsers(j(j({},s),{},{users:c}));case 14:return t.abrupt("break",27);case 15:return t.next=17,e.deleteKafkaUsers(j(j({},s),{},{users:c}));case 17:return t.abrupt("break",27);case 18:return i=JSON.parse(l.customResource),c.forEach((function(t){e.deleteUserFromYamlJSON(t,i,e.app_id)})),l.customResource=JSON.stringify(i),l.version+=1,t.next=24,request.put(e.getUrl(s),l);case 24:return t.next=26,e.updateList(l,s);case 26:return t.abrupt("break",27);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),c);t.default=V},4861:function(e,t,a){e.exports={account:"_1HFVM35BYOkVoGpYanyH4V",bold:"_18QxU4dmDWA3adSzdgfON6"}},4862:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(5),r(11),r(29),r(6),r(84),r(48),r(16),r(190),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(28),r(48),r(42),r(16),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var c=n(r(315)),s=n(r(43)),l=n(r(31)),i=n(r(58));r(41);var u,d=n(r(44)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),g=n(r(0)),_=n(r(26)),y=n(r(854)),E=n(r(240)),b=r(14),S=r(244),O=n(r(795)),R=o(r(793)),A=n(r(796)),k=r(52),T=n(r(1926)),D=r(816),C=n(r(325)),P=n(r(4863));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var x={Creating:"CREATING",Success:"SUCCESSFUL",Failed:"FAILED"},M=(0,R.default)({store:new T.default,module:"applications",name:"BACKUP",injectStores:["rootStore","detailStore"]})(u=function(e){(0,m.default)(r,e);var a=w(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={appList:[]},e.websocket=new C.default,e.lastIsRunning=!0,e.getData=(0,y.default)((0,d.default)(s.default.mark((function t(){var a,r,n,o,c=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:{},r=a.silent,n=(0,i.default)(a,["silent"]),o=e.props.store,r&&(o.list.silent=!0),t.next=5,o.fetchList(I(I(I({},e.props.match.params),n),{},{app_id:e.props.detailStore.detail.app_id}));case 5:o.list.silent=!1;case 6:case"end":return t.stop()}}),t)}))),1e3),e.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",minWidth:"20%"},{title:t("STATUS"),dataIndex:"status",render:function(a){var r=e.props.detailStore;return(0,_.default)(r,"detail.app_id")===D.RadonDBAppId.PostgreSQL?g.default.createElement(O.default,{flicker:!0,type:"available",name:t("AVAILABLE")}):g.default.createElement(O.default,{flicker:!0,type:a,name:t(x[a])})}},{title:t("SIZE_GIB"),dataIndex:"size",render:function(e){var t="-";return e&&(t="string"==typeof e?e:(e/1024/1024/1024).toFixed(2)),t},with:"120px"},{title:t("BACKUP_START_TIME"),dataIndex:"createAt",render:function(e){return e?(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}},{title:t("BACKUP_END_TIME"),dataIndex:"completeAt",render:function(e){return e?(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},e.showCreate=function(){var a=e.props,r=a.match,n=a.module,o=a.detailStore;return e.props.trigger("openpitrix.db.backup.create",{module:n,cluster:r.params.cluster,namespace:r.params.namespace,workspace:r.params.workspace,title:t("CREATE_BACKUP"),app_id:(0,_.default)(o,"detail.app_id"),cluster_id:r.params.id,image:(0,_.default)(o,"detail.sidecarImage"),success:function(){return e.getData((0,S.parse)(location.search.slice(1)))}})},e}return(0,p.default)(r,[{key:"componentDidMount",value:function(){var e=this;request.get("/kapis/application.kubesphere.io/v2/apps?orderBy=create_time&conditions=status%3Dactive%2Crepo_id%3Drepo-helm%2Ccategory_id%3Dradondb&reverse=true").then((function(t){e.setState({appList:t.items})})),this.isRunning=this.props.detailStore.detail.isRunning,this.initWebsocket()}},{key:"componentDidUpdate",value:function(){var e=this.props.detailStore.detail.isRunning;this.lastIsRunning!==e&&e&&this.getData((0,S.parse)(location.search.slice(1))),this.lastIsRunning=e}},{key:"initWebsocket",value:function(){var e=this,t=this.props.match.params,a=t.cluster,r=t.namespace,n=t.id,o=this.props.store.getWatchListUrl({namespace:r,cluster_id:n,app_id:this.props.detailStore.detail.app_id,cluster:a});o&&r&&(this.websocket.watch(o),this.disposer=(0,b.reaction)((function(){return e.websocket.message}),(function(t){"Backup"===t.object.kind&&["ADDED","MODIFIED","DELETED"].includes(t.type)&&e.getData((0,S.parse)(location.search.slice(1)))})))}},{key:"getTableProps",value:function(){var e=this,a=this.props,r=a.tableProps,n=a.detailStore,o=a.store,c=a.name,s=this.canCreate?[{key:"deploy",type:"control",text:t("CREATE"),action:"create",forbidden:!n.detail.isRunning,onClick:this.showCreate}]:[];n.detail.isRunning||(s[0].tooltip={message:t("BACKUP_NOT_ALLOWED_DESC"),placement:(0,_.default)(o,"list.data.length")?"bottomRight":"bottom"});var l=(0,_.default)(n,"detail.app_id"),i={key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){e.props.trigger("resource.batch.delete",I(I({once:l===D.RadonDBAppId.PostgreSQL,type:c,rowKey:r.rowKey},e.props.match.params),{},{app_id:l}))}};return{tableActions:I(I({},r.tableActions),{},{selectActions:n.detail.isRunning?l===D.RadonDBAppId.PostgreSQL?[]:[i]:[],actions:s}),emptyProps:{desc:""},searchType:"keyword"}}},{key:"render",value:function(){var e=this.props.tableProps,t=this.itemActions;return g.default.createElement("div",{className:P.default.backup},g.default.createElement(R.ListPage,(0,c.default)({},this.props,{getData:this.getData,noWatch:!0}),g.default.createElement(A.default,(0,c.default)({},e,this.getTableProps(),{rowKey:"name",itemActions:t,columns:this.getColumns(),alwaysUpdate:!0}))))}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasPermission({cluster:t,project:a,module:"applications",action:"create"})}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.routing,o=a.match,c=a.module,s=a.name,l=a.detailStore,i=l.detail.app_id;return[{key:"edit",icon:"copy",text:t("RESTORE_FROM_BACKUP"),action:"edit",show:function(e){return"Success"===e.status},onClick:function(a){if("Success"===a.status){var n=(0,_.default)(l.detail,"spec.S3"),s=(0,_.default)(l.detail,"name");r("openpitrix.db.app.create",{module:c,app_id:i,detail:e.state.appList.find((function(e){return e.app_id===i})),namespace:o.params.namespace,cluster:o.params.cluster,workspace:o.params.workspace,routing:e.props.rootStore.routing,restoreParams:I(I({},a.restoreParams),{},{backupId:a.name,backupToS3Name:s,S3:n,databaseVersion:l.detail.databaseVersion,nodes:(0,_.default)(a,"nodes"),volume:(0,_.default)(a,"volume"),specifications:(0,_.default)(a,"specifications")}),trigger:r})}else E.default.warning({content:t("BACKUP_IN_PROGRESS_DESC")})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(){return i!==D.RadonDBAppId.PostgreSQL},onClick:function(t){return r("resource.delete",{type:s,detail:I(I(I({},t),o.params),{},{app_id:l.detail.app_id}),success:n.query,store:e.props.store})}}]}}]),r}(g.default.Component))||u;a.default=M},4863:function(e,t,a){e.exports={backup:"F5aUFXk3RQ-bylkMTo9ru"}},4864:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(5),r(11),r(29),r(6),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var c=n(r(315)),s=n(r(43));r(41);var l,i=n(r(44)),u=n(r(31)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(0)),g=r(186),_=n(r(240)),y=o(r(793)),E=n(r(796)),b=n(r(1927)),S=n(r(4865)),O=n(r(3)),R=n(r(1974)),A=r(816),k=n(r(74)),T=n(r(26)),D=n(r(158)),C=n(r(63)),P=r(244),N=r(4867),I=n(r(4868));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=(0,y.default)({store:new b.default,module:"applications",name:"PARAMETER",injectStores:["rootStore","detailStore"]})(l=function(e){(0,p.default)(r,e);var a=M(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={editMode:!1,data:{},nodeRole:"kafka"},e.getColumns=function(){var a={title:t("PARAMETER"),dataIndex:"name",width:"200px"},r={title:t("VALUE"),dataIndex:"value",width:"120px",render:function(a,r){var n=e.state,o=n.editMode,c=n.data;if(o)return"select"===r.type?r.disable?v.default.createElement(g.Input,{disabled:!0,value:a,style:{width:160}}):v.default.createElement(g.Select,{options:(r.options||[]).map((function(e){return x(x({},e),{},{label:"number"==typeof e.label?e.label:t(e.label)})})),value:(0,D.default)(c[r.key])?a:c[r.key],style:{width:160},onChange:e.handleChange(r.key)}):"number"==typeof a?v.default.createElement(S.default,{value:(0,D.default)(c[r.key])?a:c[r.key],onChange:e.handleChange(r.key),disabled:r.disable,integer:(0,T.default)(r,"integer",!0),style:{width:160},min:(0,T.default)(r,"range.min"),max:(0,T.default)(r,"range.max")}):v.default.createElement(g.Input,{value:(0,D.default)(c[r.key])?a:c[r.key],style:{width:160},disabled:r.disable,onChange:e.handleChange(r.key)});if(t(r.name)===t("PASSWORD"))return v.default.createElement(R.default,null);var s=String(a);return"select"===r.type&&(s=(0,T.default)((r.options||[]).find((function(e){return e.value===a})),"label",s)),v.default.createElement("div",null,s)}},n={title:t("DESCRIPTION"),dataIndex:"description",isHideable:!0,render:function(e){return v.default.createElement("pre",null,e)}},o={title:t("AUTO_RESTART"),dataIndex:"restart",width:"100px"},c={title:t("RANGE"),dataIndex:"range",width:"100px",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.min,a=e.max;return(0,D.default)(t)&&(0,D.default)(a)?null:v.default.createElement("div",null,"".concat((0,D.default)(t)?" ":t,"").concat((0,D.default)(a)?" ":a))}};switch(e.appId){case A.RadonDBAppId.ClickHouse:return[a,r,n,c];default:return[a,r,n,o,c]}},e.handleChange=function(t){return function(a){(0,k.default)(e.state.data,'["'.concat(t,'"]'),(0,T.default)(a,"target.value",a)),e.forceUpdate()}},e.editParameters=function(){e.setState({editMode:!0})},e.handleConfirm=(0,i.default)(s.default.mark((function a(){var r,n,o,c,l;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.props.match.params,n=r.workspace,o=r.namespace,c=r.id,l=r.cluster,!(0,C.default)(e.state.data)){a.next=4;break}return e.handleCancel(),a.abrupt("return");case 4:return a.prev=4,a.next=7,e.props.store.updateParams({workspace:n,namespace:o,cluster_id:c,cluster:l,nodeRole:e.state.nodeRole,params:e.state.data});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(4),_.default.error({content:t(a.t0.message)}),a.abrupt("return");case 13:return e.handleCancel(),a.next=16,e.getData((0,P.parse)(location.search.slice(1)));case 16:_.default.success({content:t("MODIFY_SUCCESSFUL")});case 17:case"end":return a.stop()}}),a,null,[[4,9]])}))),e.handleCancel=function(){e.setState({editMode:!1,data:{}})},e.getData=function(t){var a=e.props.match.params,r=a.workspace,n=a.namespace,o=a.id,c=a.cluster;return e.props.store.fetchList(x(x({},t),{},{workspace:r,namespace:n,cluster:c,cluster_id:o,nodeRole:e.state.nodeRole}))},e.getEditTitle=function(){return v.default.createElement(g.Level,null,v.default.createElement(g.LevelLeft,null,v.default.createElement(g.Button,{type:"primary",onClick:e.handleConfirm},t("OK")),v.default.createElement(g.Button,{onClick:e.handleCancel},t("CANCEL"))))},e.rowClassName=function(e){return e.disable?"disable":""},e.handleNodeRoleChange=function(t){e.setState({data:{},nodeRole:t},(function(){e.getData()}))},e}return(0,f.default)(r,[{key:"getTableProps",value:function(){var e=this.props,a=e.tableProps,r=e.detailStore,n=this.canCreate?[{key:"edit",type:"default",text:t("EDIT"),forbidden:!r.detail.isRunning,onClick:this.editParameters}]:[];r.detail.isRunning||(n[0].tooltip={message:t("EDIT_NOT_ALLOWED"),placement:"bottomRight"});var o={tableActions:x(x({},a.tableActions),{},{actions:n,selectActions:null}),emptyProps:{desc:""},searchType:"keyword",alwaysUpdate:!0};return this.state.editMode&&(o.extraProps={title:this.getEditTitle(),rowClassName:this.rowClassName},o.hideHeader=!0),o}},{key:"getCustomFilter",value:function(){switch(this.appId){case A.RadonDBAppId.Kafka:return v.default.createElement(g.Select,{options:N.KafkaOptions,value:this.state.nodeRole,style:{width:200,marginRight:"12px"},onChange:this.handleNodeRoleChange});default:return null}}},{key:"render",value:function(){var e=this.props.tableProps;return v.default.createElement(y.ListPage,(0,c.default)({},this.props,{getData:this.getData,noWatch:!0}),v.default.createElement(E.default,(0,c.default)({},e,this.getTableProps(),{className:(0,O.default)({"params-table-edit":this.state.editMode},I.default.params),itemActions:[],columns:this.getColumns(),hideFooter:!0,customFilter:this.getCustomFilter()})))}},{key:"appId",get:function(){return this.props.store.app_id}},{key:"canCreate",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return globals.app.hasPermission({cluster:t,project:a,module:"applications",action:"create"})}}]),r}(v.default.Component))||l;a.default=L},4865:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(86),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(75),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(86),a(28),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(75),a(7);var n=r(a(315)),o=r(a(31)),c=r(a(58)),s=r(a(36)),l=r(a(37)),i=r(a(55)),u=r(a(56)),d=r(a(51)),f=r(a(158)),p=r(a(63)),m=r(a(470)),h=r(a(800)),v=r(a(0)),g=r(a(1)),_=r(a(3)),y=a(186),E=r(a(4866));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var R=function(e){(0,i.default)(a,e);var t=O(a);function a(){var e;(0,s.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.onChange,n=a.unit,o=a.max,c=a.integer,s=t.target.value;if(e.debounceHandleChange(s),(0,p.default)(s)||!c&&s.indexOf(".")>0&&-1==="".concat(e.props.value).indexOf(".")||"-"===s&&(0,p.default)(e.props.value))r(s);else{var l=Number(s);isNaN(l)||(!(0,f.default)(o)&&l>o&&(l=o),c||s.startsWith("0")&&!s.startsWith("0.")||l!==Number(s)||"".concat(l)===s||(l=s),!(0,f.default)(l)&&n&&(l="".concat(l).concat(n)),r&&r(l))}},e.debounceHandleChange=(0,h.default)((function(t){var a=e.props,r=a.onChange,n=a.unit,o=a.min,c=a.max,s=a.integer;if((0,p.default)(t)||!s&&t.indexOf(".")>0&&-1==="".concat(e.props.value).indexOf(".")||"-"===t&&(0,p.default)(e.props.value))r(t);else{var l=Number(t);isNaN(l)||(!(0,f.default)(o)&&l<o&&(l=o),!(0,f.default)(c)&&l>c&&(l=c),s||t.startsWith("0")&&!t.startsWith("0.")||l!==Number(t)||"".concat(l)===t||(l=t),!(0,f.default)(l)&&n&&(l="".concat(l).concat(n)),r&&r(l))}}),500),e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.unit,r=e.showUnit,o=e.value,s=e.defaultValue,l=(e.onChange,e.integer,(0,c.default)(e,["className","unit","showUnit","value","defaultValue","onChange","integer"])),i=(0,f.default)(o)?s:o;a&&(i=(0,m.default)(i,a));var u=S(S({type:"text"},l),{},{value:(0,f.default)(i)?"":i,onChange:this.handleChange});return a&&r?v.default.createElement("div",{className:(0,_.default)(t,E.default.withUnit)},v.default.createElement(y.Input,u),v.default.createElement("span",null,a)):v.default.createElement(y.Input,(0,n.default)({className:t},u))}}]),a}(v.default.Component);R.propTypes={unit:g.default.string,showUnit:g.default.bool,value:g.default.oneOfType([g.default.string,g.default.number]),defaultValue:g.default.oneOfType([g.default.string,g.default.number]),min:g.default.number,max:g.default.number,integer:g.default.bool,onChange:g.default.func},R.defaultProps={unit:"",showUnit:!1,integer:!1,onChange:function(){}};var A=R;t.default=A},4866:function(e,t,a){e.exports={withUnit:"_1xayErxJuaugCVf4OR8UQy"}},4867:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.KafkaOptions=void 0;var o=n(r(836)),c=n(r(0)),s=[{label:c.default.createElement(c.default.Fragment,null,c.default.createElement(o.default,{src:"/assets/radondb_kafka.svg",style:{width:"16px",marginRight:"4px"}}),c.default.createElement("span",null,t("KAFKA_PARAMETERS"))),value:"kafka"},{label:c.default.createElement(c.default.Fragment,null,c.default.createElement(o.default,{src:"/assets/radondb_zookeeper.svg",style:{width:"16px",marginRight:"4px"}}),c.default.createElement("span",null,t("ZOOKEEPER_PARAMETERS"))),value:"zookeeper"}];a.KafkaOptions=s},4868:function(e,t,a){e.exports={params:"_3yNPbIt265kOjZ-_lOxYbf"}},4869:function(e,a,r){"use strict";(function(e){var n=r(20),o=r(157);r(12),r(134),r(5),r(187),r(11),r(6),r(84),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(187),r(11),r(6),r(84),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var c=n(r(61)),s=n(r(315)),l=n(r(43)),i=n(r(31)),u=n(r(58));r(41);var d,f=n(r(44)),p=n(r(36)),m=n(r(37)),h=n(r(55)),v=n(r(56)),g=n(r(51)),_=n(r(0)),y=n(r(26)),E=r(14),b=n(r(788)),S=n(r(795)),O=o(r(793)),R=n(r(796)),A=r(52),k=r(878),T=r(832),D=n(r(1727)),C=n(r(1799)),P=n(r(4870));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var x=(0,O.default)({store:new D.default,module:"rules",authKey:"rulegroups",name:"ALERTING_POLICY",injectStores:["rootStore","detailStore"]})(d=function(a){(0,h.default)(n,a);var r=w(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getData=(0,f.default)(l.default.mark((function t(){var a,r,n,o,c=arguments;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:{},r=a.silent,n=(0,u.default)(a,["silent"]),o=e.props.store,r&&(o.list.silent=!0),t.next=5,o.fetchList(I(I({},e.props.match.params),n));case 5:o.list.silent=!1;case 6:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props,r=a.getFilteredValue,n=a.match,o=n.url.substring(n.url.indexOf("/applications"),-1);return[{title:t("NAME"),dataIndex:"name",search:!0,render:function(e,t){return _.default.createElement(b.default,{avatar:"/assets/bell_gear_duotone.svg",title:(0,A.getDisplayName)(t),desc:t.description,className:P.default["table-icon"],to:"".concat(o,"/alert-rules/").concat(e)})}},{title:t("POLICY_STATUS"),dataIndex:"enable",filters:e.getEnableFilter(),filteredValue:r("enable"),isHideable:!0,search:!0,width:"16%",render:function(e,a){return _.default.createElement(S.default,{className:P.default.status_icon,type:a.enabled&&JSON.parse(a.enabled)?"active":"disabled",name:a.enabled&&JSON.parse(a.enabled)?t("ENABLED"):t("DISABLED")})}},{title:t("RULE_STATUS"),dataIndex:"state",search:!0,filters:e.getStatus(),isHideable:!0,width:"16%",render:function(e,t){return _.default.createElement(C.default,{rulesStats:t.rulesStats})}},{title:t("TIME_SPENT"),dataIndex:"evaluationTime",isHideable:!0,width:"12%",render:function(e){return _.default.createElement("span",null,"-"!==e?t("TIME_S",{num:e}):e)}},{title:t("RECENT_DETECT_TIME"),dataIndex:"lastEvaluation",isHideable:!0,width:"15.8%",render:function(e,t){var a=(0,y.default)(t._originDataWithStatus,"status.lastEvaluation");return _.default.createElement("span",null,a?(0,A.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-")}}]},e.showCreate=function(){var a=e.props,r=a.match,n=a.getData,o=a.module,c=a.detailStore;return e.props.trigger("alerting.policy.create",{module:o,cluster:r.params.cluster,namespace:r.params.namespace,title:t("CREATE_ALERTING_POLICY"),app_id:c.detail.app_id,cluster_id:r.params.id,success:n})},e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t}),localStorage.setItem("alert-policy-detail-referrer",this.props.match.url)}},{key:"getStatus",value:function(){return k.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getEnableFilter",value:function(){return[{text:t("ENABLED"),value:"true"},{text:t("DISABLED"),value:"false"}]}},{key:"getAlertingTypes",value:function(){return T.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props.tableProps;return _.default.createElement(O.ListPage,(0,s.default)({},this.props,{getData:this.getData,noWatch:!0}),_.default.createElement(R.default,(0,s.default)({},e,{rowKey:"name",itemActions:this.itemActions,columns:this.getColumns(),tableActions:this.tableActions})))}},{key:"itemActions",get:function(){var a=this,r=this.props,n=r.trigger,o=r.routing,c=r.match,s=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(r){n("alerting.baseinfo.edit",{detail:r,module:e,cluster:c.params.cluster,namespace:c.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:a.getData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("alerting.yaml.edit",{detail:e,cluster:c.params.cluster,namespace:c.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:a.getData})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),action:"edit",onClick:function(e){n("alerting.rule.edit",{detail:e,cluster:c.params.cluster,namespace:c.params.namespace,success:o.query})}},{key:"disablePolicy",icon:function(e){return JSON.parse(e.enabled)?"stop":"start"},text:function(e){return JSON.parse(e.enabled)?t("DISABLE"):t("ENABLE")},action:"edit",onClick:function(e){var a=JSON.parse(e.enabled);n("alerting.rule.update",{detail:e,cluster:c.params.cluster,namespace:c.params.namespace,resourceName:s,success:o.query,title:a?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY"),enabled:a})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("alerting.rule.delete",{name:s,cluster:c.params.cluster,namespace:c.params.namespace,detail:e,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,r=e.getData,n=e.trigger,o=e.name,s=e.store,l=e.match,i=e.detailStore,u=(0,E.toJS)(s.list.data),d=(0,E.toJS)(s.list.selectedRowKeys),f=u.filter((function(e){return d.includes(e.name)})).every((function(e){return!JSON.parse(e.enabled)})),p=u.filter((function(e){return d.includes(e.name)})).every((function(e){return JSON.parse(e.enabled)})),m=[{key:"deploy",type:"control",text:t("CREATE"),action:"create",forbidden:!i.detail.isRunning,onClick:this.showCreate}];return i.detail.isRunning||(m[0].tooltip={message:t("ALERTING_POLICY_CREATION_NOT_ALLOWED"),placement:(0,y.default)(s,"list.data.length")?"bottomRight":"bottom"}),I(I({},a.tableActions),{},{actions:m,selectActions:[].concat((0,c.default)(a.tableActions.selectActions),[{key:"enable",text:t("ENABLE"),action:"edit",disabled:p,onClick:function(){n("alerting.rule.update",{resourceName:o,cluster:l.params.cluster,namespace:l.params.namespace,title:t("ENABLE_ALERTING_POLICY"),enabled:!1,success:r,batchMode:!0})}},{key:"disable",text:t("DISABLE"),action:"edit",disabled:f,onClick:function(){n("alerting.rule.update",{resourceName:o,cluster:l.params.cluster,namespace:l.params.namespace,title:t("DISABLE_ALERTING_POLICY"),enabled:!0,success:r,batchMode:!0})}}])})}}]),n}(_.default.Component))||d;a.default=x}).call(this,r(138)(e))},4870:function(e,t,a){e.exports={"table-icon":"_1ZDsG2UdrEfYAB3t_km53m",status_icon:"usLADWmbiVkW64AlURQPz"}},4871:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(29),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(29),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var o,c,s=n(r(61)),l=n(r(31)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=r(47),g=r(239),_=r(186),y=n(r(874)),E=n(r(1433)),b=n(r(1961)),S=r(816),O=n(r(4872));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(o=(0,g.inject)("detailStore"),(0,v.withRouter)(c=o(c=(0,g.observer)(c=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new E.default,e.state={currentMonitorDbNode:null,nodeRole:"kafka"},e.MainLable={label:t("ALL_NODES"),value:"whole"},e.fetchData=function(){var t=e.props,a=t.match,r=t.detailStore.detail.app_id;e.store.fetchList({namespace:a.params.namespace,cluster:a.params.cluster,chi:a.params.id,app_id:r}).then((function(){e.setState({currentMonitorDbNode:e.store.data.find((function(t){return t.name===(0,h.default)(e.nodesOptions,"[0].value")}))})}))},e.switchItemShowMonitor=function(t){var a=e.store.data.find((function(e){return e.name===t}));a?e.setState({currentMonitorDbNode:a,nodeRole:(0,h.default)(a,"nodeRole","")}):e.setState({currentMonitorDbNode:a,nodeRole:t})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"switchShowMonitor",value:function(e){this.setState(A(A({},this.state),{},{isShowMonitor:e}))}},{key:"render",value:function(){var e=this.state.currentMonitorDbNode,a=this.store.data.filter((function(e){return!e.noMonitoring})).length,r=(0,h.default)(this.nodesOptions,"[0].value"),n=(0,h.default)(e,"name")||("whole"===r?r:this.state.nodeRole);return m.default.createElement("div",null,this.store.isLoading?m.default.createElement(_.Loading,{className:O.default.loading}):e||!e&&a!==this.nodesOptions.length?m.default.createElement(b.default,{monitorDbNode:e,nodeRole:this.state.nodeRole,customSelect:m.default.createElement(_.Select,{className:O.default.pods,prefixIcon:m.default.createElement(_.Icon,{name:"pod"}),options:this.nodesOptions,value:n,onChange:this.switchItemShowMonitor})}):m.default.createElement(y.default,{title:t("NO_MONITORING_DATA"),module:"monitor",desc:""}))}},{key:"needMainAppId",get:function(){return[S.RadonDBAppId.Elasticsearch,S.RadonDBAppId.OpenSearch]}},{key:"nodesOptions",get:function(){var e=this.props.detailStore.detail.app_id,a=this.store.data.filter((function(e){return!e.noMonitoring})).map((function(e){return{label:e.name,value:e.name}}));if(a.length>0){if(this.needMainAppId.includes(e))return[this.MainLable].concat((0,s.default)(a.map((function(e){return A(A({},e),{},{label:e.label})}))));if(e===S.RadonDBAppId.Kafka)return[{label:t("ALL_KAFKA_NODES"),value:"kafka"},{label:t("ALL_ZOOKEEPER_NODES"),value:"zookeeper"}].concat((0,s.default)(a.map((function(e){return A(A({},e),{},{label:e.label})}))))}return a}}]),r}(m.default.Component))||c)||c)||c);a.default=T},4872:function(e,t,a){e.exports={loading:"_2rHsiQmBSPxEv5ZYKWM2Na",pods:"_2x_UjL9AEVUgL7SJ1CJbqZ"}},4873:function(e,a,r){"use strict";var n=r(20),o=r(157);r(12),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var c=n(r(315)),s=n(r(43)),l=n(r(31)),i=n(r(58));r(41);var u,d=n(r(44)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),g=n(r(0)),_=n(r(26)),y=n(r(854)),E=r(14),b=n(r(795)),S=o(r(793)),O=n(r(796)),R=r(52),A=r(878),k=r(832),T=n(r(4874)),D=n(r(325)),C=n(r(4875));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var w=(0,S.default)({store:new T.default,module:"applications",injectStores:["rootStore","detailStore"]})(u=function(e){(0,m.default)(r,e);var a=I(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).getData=(0,d.default)(s.default.mark((function e(){var t,a,r,o,c=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.silent,r=(0,i.default)(t,["silent"]),o=n.props.store,a&&(o.list.silent=!0),e.next=5,o.fetchList(N(N({},n.props.match.params),r));case 5:o.list.silent=!1;case 6:case"end":return e.stop()}}),e)}))),n.throttleGetData=(0,y.default)(n.getData,1e3),n.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",width:200},{title:t("STATUS"),dataIndex:"status",render:function(e){return g.default.createElement(b.default,{type:e,name:t(e),flicker:!0})}},{title:t("PARTITION_COUNT"),dataIndex:"partitions"},{title:t("REPLICA_COUNT"),dataIndex:"replicas"},{title:t("MESSAGE_RETENTION_TIME"),dataIndex:'config["retention.ms"]',render:function(e){return e?g.default.createElement("span",null,e,"ms"):"-"}},{title:t("CREATION_TIME"),dataIndex:"creationTimestamp",render:function(e){return e?(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},n.showCreate=function(){var e=n.props,a=e.match,r=e.getData,o=e.store,c=e.detailStore;return n.props.trigger("openpitrix.db.topic.create",{store:o,cluster:a.params.cluster,namespace:a.params.namespace,title:t("CREATE_TOPIC"),app_id:(0,_.default)(c,"detail.app_id"),kafkaReplicas:(0,_.default)(c,"detail.nodes.kafka"),cluster_id:a.params.id,success:r})},n.websocket=new D.default,n.initWebsocket(),n}return(0,p.default)(r,[{key:"initWebsocket",value:function(){var e=this,t=this.props.match.params,a=t.cluster,r=t.namespace,n=t.id,o=this.props.store.getWatchListUrl({namespace:r,cluster:a,cluster_id:n});o&&r&&(this.websocket.watch(o),this.disposer=(0,E.reaction)((function(){return e.websocket.message}),(function(t){"KafkaTopic"===t.object.kind&&["MODIFIED","DELETED","ADDED"].includes(t.type)&&e.throttleGetData()})))}},{key:"getStatus",value:function(){return A.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getAlertingTypes",value:function(){return k.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getTableProps",value:function(){var e=this,a=this.props,r=a.tableProps,n=a.detailStore,o=a.store,c=[{key:"deploy",type:"control",text:t("CREATE"),action:"create",forbidden:!n.detail.isRunning,onClick:this.showCreate}];n.detail.isRunning||(c[0].tooltip={message:t("TOPIC_CREATION_NOT_ALLOWED"),placement:(0,_.default)(o,"list.data.length")?"bottomRight":"bottom"});var s=[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return e.props.trigger("resource.batch.delete",N(N({type:"APP",rowKey:r.rowKey,success:e.getData},e.props.match.params),e.props.query))}}];return{tableActions:N(N({},r.tableActions),{},{selectActions:[],actions:c}),selectActions:s,emptyProps:{title:t("NO_TOPIC_FOUND"),icon:"record",desc:t("TOPIC_EMPTY_DESC")},searchType:"keyword"}}},{key:"render",value:function(){var e=this.props.tableProps,t=this.itemActions;return g.default.createElement("div",{className:C.default.policy},g.default.createElement(S.ListPage,(0,c.default)({},this.props,{getData:this.getData,noWatch:!0}),g.default.createElement(O.default,(0,c.default)({},e,this.getTableProps(),{rowKey:"name",itemActions:t,columns:this.getColumns()}))))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.routing,n=e.match,o=e.getData,c=e.name,s=e.store,l=e.detailStore;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){var r=e.name,c=e.partitions,i=e.replicas,u=e.config;return a("openpitrix.db.topic.create",{cluster:n.params.cluster,namespace:n.params.namespace,title:t("EDIT_TOPIC"),detail:N({name:r,partitions:c,replicas:i},u),kafkaReplicas:(0,_.default)(l,"detail.nodes.kafka"),isEdit:!0,store:s,success:o})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:c,detail:e,success:r.query})}}]}}]),r}(g.default.Component))||u;a.default=w},4874:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(84),a(18),a(48),a(16),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(85),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(84),a(18),a(28),a(48),a(191),a(42),a(16),a(159),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(319),a(22),a(23),a(57),a(17),a(85),a(7);var n=r(a(43)),o=r(a(31)),c=r(a(58));a(41);var s,l,i=r(a(44)),u=r(a(65)),d=r(a(36)),f=r(a(37)),p=r(a(88)),m=r(a(55)),h=r(a(56)),v=r(a(51)),g=r(a(49)),_=(r(a(66)),r(a(26))),y=r(a(74)),E=a(14),b=r(a(68)),S=a(1015),O=a(1093);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var T=(s=function(e){(0,m.default)(o,e);var t,a,r=k(o);function o(){var e;(0,d.default)(this,o);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a)),(0,u.default)(e,"targetsMetadata",l,(0,p.default)(e)),e.statusMap={"True-Ready":"Success","True-NotReady":"Failed"},e.getWatchListUrl=function(e){var t=e.cluster_id,a=e.cluster,r=e.namespace;return"/apis".concat(globals.app.isMultiCluster&&a?"/clusters/".concat(a):"","/kafka.strimzi.io/v1beta2/watch/namespaces/").concat(r,"/kafkatopics?labelSelector=strimzi.io/cluster=").concat(t)},e.getListUrl=function(e){var t=e.cluster,a=e.namespace,r=e.id;return"/apis".concat(globals.app.isMultiCluster&&t?"/clusters/".concat(t):"","/kafka.strimzi.io/v1beta2/namespaces/").concat(a,"/kafkatopics").concat(r?"?labelSelector=strimzi.io/cluster=".concat(r):"")},e.getResourceUrl=e.getListUrl,e}return(0,f.default)(o,[{key:"fetchList",value:(a=(0,i.default)(n.default.mark((function e(){var t,a,r,o,s,l,i,u,d,f,p,m,h,v=this,g=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},a=t.cluster,t.workspace,r=t.namespace,t.more,o=t.id,s=(0,c.default)(t,["cluster","workspace","namespace","more","id"]),l=s.page,i=void 0===l?1:l,u=s.limit,d=void 0===u?10:u,f=s.keyword,this.list.isLoading=!0,s.limit=s.limit||10,e.next=6,request.get(this.getResourceUrl({cluster:a,namespace:r,id:o}));case 6:return p=e.sent,m=((0,_.default)(p,"items")||[]).filter((function(e){return!f||e.metadata.name.includes(f)})).map((function(e){var t=(0,S.getStatusFromYaml)(e);return{cluster:a,namespace:r,name:(0,_.default)(e,"metadata.name"),partitions:(0,_.default)(e,"spec.partitions"),replicas:(0,_.default)(e,"spec.replicas"),config:(0,_.default)(e,"spec.config",{}),creationTimestamp:(0,_.default)(e,"metadata.creationTimestamp"),status:v.statusMap[t]||"Creating"}})),h=Number(p.total||m.length),this.list.update(A({data:m.slice((i-1)*d,i*d),total:h,limit:Number(d)||10,page:Number(i)||1,isLoading:!1,filters:f?{keyword:f}:{}},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",m);case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getYamlFromData",value:function(e,t){var a=t.cluster_id,r=JSON.parse(JSON.stringify(O.kafkaYaml.topic)),n=e.name,o=e.partitions,s=e.replicas,l=(0,c.default)(e,["name","partitions","replicas"]);return(0,y.default)(r,"metadata.name",n),(0,y.default)(r,'metadata.labels["strimzi.io/cluster"]',a),(0,y.default)(r,"spec",{partitions:parseInt(o,10),replicas:s,config:l}),r}},{key:"create",value:function(e){var t=e.topic,a=(0,c.default)(e,["topic"]),r=this.getYamlFromData(t,a);return request.post(this.getListUrl(a),r)}},{key:"edit",value:(t=(0,i.default)(n.default.mark((function e(t){var a,r,o,s,l,i,u,d,f;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.topic,r=t.oldTopicName,o=(0,c.default)(t,["topic","oldTopicName"]),s=a.name,l=a.partitions,a.replicas,i=(0,c.default)(a,["name","partitions","replicas"]),s!==r){e.next=13;break}return e.next=5,request.get(this.getDetailUrl(A(A({},o),{},{name:s})));case 5:return u=e.sent,d=(0,_.default)(u,"spec.config",{}),(0,y.default)(u,"spec.config",A(A({},d),i)),(0,y.default)(u,"spec.partitions",parseInt(l,10)),e.next=11,request.patch(this.getDetailUrl(A(A({},o),{},{name:s})),u);case 11:e.next=18;break;case 13:return f=this.getYamlFromData(a,o),e.next=16,this.delete(A(A({},o),{},{name:r}));case 16:return e.next=18,request.post(this.getListUrl(o),f);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(b.default),l=(0,g.default)(s.prototype,"targetsMetadata",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,g.default)(s.prototype,"fetchList",[E.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchList"),s.prototype),(0,g.default)(s.prototype,"create",[E.action],Object.getOwnPropertyDescriptor(s.prototype,"create"),s.prototype),(0,g.default)(s.prototype,"edit",[E.action],Object.getOwnPropertyDescriptor(s.prototype,"edit"),s.prototype),s);t.default=T},4875:function(e,t,a){e.exports={policy:"_1CLMyM9L5Lqm9wNw2AdC16"}},4876:function(e,t,a){e.exports={icon:"_2TdY7G6Sm3yz4Ym6JmHf18",flexRow:"_2cqSWZz9wp2Tx2LFZcTIha"}},4877:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),g=r(186),_=r(52),y=r(791),E=n(r(1888)),b=n(r(836)),S=n(r(795)),O=n(r(805)),R=n(r(4878)),A=n(r(4882));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var T=(0,m.inject)("rootStore","projectStore")(o=(0,m.observer)(o=(0,y.trigger)(o=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new E.default,e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,v.default)(a))return[{name:t("CLUSTER"),value:(0,_.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,_.showNameAndAlias)(o,"project")},{name:t("STATUS"),value:e.renderStatus()},{name:t("APP"),value:(0,h.default)(a,"app.name","-")},{name:t("VERSION"),value:(0,h.default)(a,"version.name","-")},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)((0,h.default)(a,"create_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,_.getLocalTime)((0,h.default)(a,"status_time")).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.owner}]},e.renderStatus=function(){var a=(0,p.toJS)(e.store.detail),r=a.status;return a.additional_info?f.default.createElement(g.Tooltip,{content:a.additional_info},f.default.createElement(S.default,{name:t(r),type:r})):f.default.createElement(S.default,{name:t(r),type:r})},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.detail),a={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(g.Loading,{className:"ks-page-loading"});var r={icon:f.default.createElement("label",{className:A.default.icon},f.default.createElement(b.default,{iconLetter:(0,h.default)(e,"app.name"),src:(0,h.default)(e,"app.icon"),alt:""})),module:this.module,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return f.default.createElement(O.default,(0,c.default)({stores:a},r,{routes:R.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.cluster,a=e.workspace,r=e.namespace;return"/".concat(a,"/clusters/").concat(t,"/projects/").concat(r,"/").concat(this.module,"/others")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(f.default.Component))||o)||o)||o;a.default=T},4878:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(4879)),c=r(a(4880)),s="/:workspace/clusters/:cluster/projects/:namespace/applications/others/:name",l=[{path:"".concat(s,"/resource-status"),name:"resource-status",title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(s,"/config"),title:"APP_SETTINGS",component:c.default,exact:!0},(0,n.getIndexRoute)({path:s,to:"".concat(s,"/resource-status"),exact:!0})];t.default=l},4879:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(239),f=r(a(1447)),p=r(a(1227)),m=r(a(1448)),h=r(a(1449));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var g=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,s.default)(a,e);var t=v(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).store=e.detailStore,r.module=e.module,r}return(0,c.default)(a,[{key:"render",value:function(){var e=this.store.detail,t=e.cluster,a=e.namespace,r=e.selector;return u.default.createElement(u.default.Fragment,null,u.default.createElement(m.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(f.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(p.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}),u.default.createElement(h.default,{selector:r,cluster:t,namespace:a,prefix:this.prefix}))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),a}(u.default.Component))||n)||n;t.default=g},4880:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=n(r(789)),m=n(r(841)),h=n(r(4881));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,f.inject)("rootStore","detailStore")(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=v(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.store,a=e.isLoading,r=e.detail;return d.default.createElement(p.default,{title:t("APP_SETTINGS"),loading:a},d.default.createElement(m.default,{className:h.default.yaml,value:r.env||""}))}},{key:"store",get:function(){return this.props.detailStore}}]),r}(d.default.Component))||o)||o;a.default=g},4881:function(e,t,a){e.exports={yaml:"_1hH60eHxLLLnVycbTucOOv"}},4882:function(e,t,a){e.exports={icon:"_2KoJkVrpTJFXtxV0RBukan"}},4883:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(84),r(16),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(84),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var o,c=n(r(315)),s=n(r(36)),l=n(r(37)),i=n(r(55)),u=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(63)),v=r(186),g=r(52),_=r(791),y=n(r(441)),E=n(r(805)),b=n(r(4884));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var O=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new y.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var a=e.store.detail;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),basicRoleTemplates:(0,p.toJS)(e.store.basicRoleTemplates.data),roleModules:(0,p.toJS)(e.store.roleCategory),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{detail:a,type:e.name,cluster:e.props.match.params.cluster,namespace:e.props.match.params.namespace,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:n},{name:t("PROJECT"),value:o},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,g.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates("namespace","iam.kubesphere.io/scope=namespace,kubesphere.io/managed=true,iam.kubesphere.io/hidden-role-template!=true"),this.store.fetchBasicRoleTemplates("namespace","iam.kubesphere.io/scope=namespace,iam.kubesphere.io/basic-role-template=true,kubesphere.io/managed=true"),this.store.fetchTemplatesCategory("namespace")}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_ROLE_PL"),url:this.listUrl}]};return f.default.createElement(E.default,(0,c.default)({stores:e},a,{routes:(0,b.default)(this.props.match.path)}))}},{key:"module",get:function(){return"roles"}},{key:"name",get:function(){return"PROJECT_ROLE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module)}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetRoles.includes(e)}}]),r}(f.default.Component))||o)||o)||o;a.default=O},4884:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(1022)),c=r(a(1074));t.default=function(e){return[{path:"".concat(e,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(e,"/users"),title:"AUTHORIZED_USER_PL",component:c.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/authorizations"),exact:!0})]}},4885:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(43)),s=n(r(31));r(41);var l,i=n(r(44)),u=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(14),g=r(239),_=n(r(26)),y=n(r(60)),E=r(186),b=n(r(240)),S=r(52),O=r(791),R=n(r(456)),A=n(r(472)),k=n(r(1224)),T=n(r(805)),D=r(1376),C=n(r(4886));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var w=(0,g.inject)("rootStore")(l=(0,g.observer)(l=(0,O.trigger)(l=function(e){(0,f.default)(r,e);var a=I(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).store=new R.default(e.module),e.resourceStore=new k.default(e.module),e.s2iRunStore=new A.default,e.fetchData=function(){var t=(0,i.default)(c.default.mark((function t(a){var r,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.params,a);case 2:return r=t.sent,t.next=5,e.s2iRunStore.fetchRunDetail(N(N({},e.params),{},{runName:(0,_.default)(r,"status.lastRunName","")}));case 5:return n=t.sent,t.next=8,e.s2iRunStore.fetchJobDetail(N(N({},e.params),{},{name:(0,_.default)(n,"_originData.status.kubernetesJobName","")}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleCopy=function(){b.default.success({content:t("COPIED_SUCCESSFUL")})},e.getOperations=function(){return[{key:"Run",text:t("RUN"),action:"edit",type:"control",onClick:function(){return e.trigger("imagebuilder.rerun",{detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,y.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},e.getAttrs=function(){var a=(0,v.toJS)(e.store.detail),r=e.props.match.params.cluster,n=a.spec,o=void 0===n?{}:n,c=(0,_.default)(o,"config.isBinaryURL",""),s=e.s2iRunStore.runDetail.binaryName,l=(0,_.default)(o,"config.sourceUrl",""),i=(0,_.default)((0,S.parseUrl)(l),"pathname","/".concat(l)),u=e.pathAddCluster(i,r),d="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(u),f=(0,_.default)(a,"spec.config.secretCode",""),p="http://s2ioperator-trigger-service.kubesphere-devops-system.svc/s2itrigger/v1alpha1/general/namespaces/".concat(a.namespace,"/s2ibuilders/").concat(a.name,"/").concat(f?"?secretCode=".concat(f):"");return[{name:t("NAME"),value:a.name},{name:t("PROJECT"),value:(0,S.showNameAndAlias)(a.namespace,"project")},{name:t("TYPE"),value:t(a.type)},{name:t("BUILDER_IMAGE"),value:(0,_.default)(o,"config.builderImage","-")},{name:t("IMAGE_NAME"),value:(0,_.default)(o,"config.imageName","-")},{name:t("PULL_POLICY"),value:(0,_.default)(o,"config.builderPullPolicy","-")},{name:t("CODE_REPOSITORY_URL"),value:c?h.default.createElement("a",{href:d,download:!0},s):l},{name:t("REMOTE_TRIGGER"),value:h.default.createElement(h.default.Fragment,null,h.default.createElement("span",null,p),h.default.createElement(D.CopyToClipboard,{text:p,onCopy:e.handleCopy},h.default.createElement(E.Icon,{name:"copy",changeable:!0})))},{name:t("CREATION_TIME_TCAP"),value:(0,S.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,s2iRunStore:this.s2iRunStore,resourceStore:this.resourceStore};if(this.store.isLoading||this.s2iRunStore.isLoading)return h.default.createElement(E.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,S.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("IMAGE_BUILDER_PL"),url:this.listUrl}]};return h.default.createElement(T.default,(0,o.default)({stores:e},a,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"s2ibuilders"}},{key:"name",get:function(){return"IMAGE_BUILDER"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return this.props.match.params}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"".concat(t?"/".concat(t):"","/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module)}}]),r}(h.default.Component))||l)||l)||l;a.default=w},4886:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(4887)),c=r(a(4894)),s=r(a(4895)),l=r(a(4896)),i=r(a(4897));t.default=function(e){return[{path:"".concat(e,"/records"),title:"RUN_RECORDS",component:o.default,excat:!0},{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:c.default,excat:!0},{path:"".concat(e,"/image-artifacts"),title:"IMAGE_ARTIFACTS",component:i.default,excat:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:s.default,excat:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:l.default,excat:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/records"),exact:!0})]}},4887:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=n(r(26)),p=r(239),m=n(r(4888)),h=n(r(1975)),v=n(r(4893));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(0,p.inject)("detailStore","s2iRunStore")(o=(0,p.observer)(o=function(e){(0,l.default)(r,e);var a=g(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.match.params,a=this.props.s2iRunStore.runDetail;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:v.default.title},t("LAST_BUILD_ENVIRONMENT")),d.default.createElement("div",{className:v.default.card},d.default.createElement(m.default,{isB2i:this.isB2i,runDetail:a,params:e})),d.default.createElement("div",{className:v.default.title},t("RUN_RECORDS")),d.default.createElement("div",{className:v.default.card},d.default.createElement(h.default,{isB2i:this.isB2i,params:e})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"isB2i",get:function(){return(0,f.default)(this.store.detail,"spec.config.isBinaryURL")}}]),r}(d.default.Component))||o)||o;a.default=_},4888:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(3)),f=r(186),p=n(r(26)),m=n(r(60)),h=r(52),v=n(r(4889));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,m.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},e}return(0,c.default)(r,[{key:"renderB2i",value:function(){var e=this.props,a=e.className,r=e.params,n=e.runDetail,o=n.builderImage,c=n.sourceUrl,s=n.binaryName,l=n.binarySize,i=n.status,m=r.cluster,g=(0,p.default)((0,h.parseUrl)(c),"pathname","/".concat(c)),_=this.pathAddCluster(g,m),y="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(_);return u.default.createElement("ul",{className:(0,d.default)(v.default.builderContent,a)},u.default.createElement("li",null,u.default.createElement("span",{className:v.default.icon},u.default.createElement(f.Icon,{name:(0,h.getLanguageName)(o),size:40})),u.default.createElement("div",{className:v.default.info},u.default.createElement("p",{className:v.default.value,title:o},o),u.default.createElement("p",{className:v.default.name},t("BUILDER_IMAGE_SCAP")))),u.default.createElement("li",{className:v.default.downloadContent},u.default.createElement("a",{href:"Success"!==i?null:y,download:!0},u.default.createElement("span",{className:v.default.icon},u.default.createElement(f.Icon,{name:"resource",size:40})),u.default.createElement("div",{className:v.default.info},u.default.createElement("p",{className:v.default.value,title:s},s),u.default.createElement("p",{className:v.default.name},t("FILE_SIZE_VALUE",{value:(0,h.formatSize)(l)}))))))}},{key:"render",value:function(){var e=this.props,a=e.className;if(e.isB2i)return this.renderB2i();var r=this.props.runDetail,n=r.sourceUrl,o=r.builderImage,c=r.revisionId;return u.default.createElement("ul",{className:(0,d.default)(v.default.builderContent,a)},u.default.createElement("li",null,u.default.createElement("span",{className:v.default.icon,style:{backgroundImage:"url('/assets/".concat((0,h.getLanguageName)(o),".png')")}}),u.default.createElement("div",{className:v.default.info},u.default.createElement("p",{className:v.default.value,title:o},o),u.default.createElement("p",{className:v.default.name},t("BUILDER_IMAGE_SCAP")))),u.default.createElement("li",null,u.default.createElement("span",{className:v.default.icon},u.default.createElement(f.Icon,{name:"resource",size:40})),u.default.createElement("div",{className:v.default.info},u.default.createElement("p",{className:v.default.value,title:n},n),u.default.createElement("p",{className:v.default.name},t("CODE_REPOSITORY_URL")))),u.default.createElement("li",null,u.default.createElement(f.Icon,{name:"branch",className:v.default.icon}),u.default.createElement("div",{className:v.default.info},u.default.createElement("p",{className:v.default.value},c||"master"),u.default.createElement("p",{className:v.default.name},t("BRANCH_SI")))))}}]),r}(u.default.Component);a.default=_},4889:function(e,t,a){e.exports={builderContent:"BkSp13POZ-js2HUtWNRz0",icon:"Hd8bCjdE9-3_BACC2Bo_J",info:"_2WqRttYeptGxvqC17MIBCN",value:"J0OCuGgJwMRDp3cpr2zcL",name:"_2czgyMcWaHAVtdYdIG8PsL",downloadContent:"_1WjbXqIcDDGS8lq6Z4mPe7"}},4890:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(24),r(17),r(62),r(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(109);var o=n(r(31)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(3)),v=r(239),g=n(r(26)),_=n(r(60)),y=r(186),E=n(r(795)),b=r(52),S=n(r(4891));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,v.observer)(s=function(e){(0,d.default)(r,e);var a=O(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).toggleShowLog=function(){var e=n.state.showLog;e?clearTimeout(n.refreshTimer):globals.app.hasKSModule("whizard-logging")?(n.getLog(),n.setState({noModuleMsg:null})):(n.store.logData.isLoading=!1,n.setState({noModuleMsg:t("LOG_MODULE_NOT_INSTALLED")})),n.setState({showLog:!e})},n.getLog=(0,l.default)(c.default.mark((function e(){var t,a,r,o,s,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.runDetail,a=t.logURL,r=t.status,o=t.cluster,s=n.store.logData,l="Building"===r||"Unknown"===r,clearTimeout(n.refreshTimer),a){e.next=7;break}return n.refreshTimer=setTimeout(n.getLog,4e3),e.abrupt("return");case 7:return e.next=9,n.store.getLog(a,o);case 9:if(n.handleScrollToBottom(),!s.hasMore){e.next=13;break}return n.getLog(),e.abrupt("return");case 13:l&&(n.refreshTimer=setTimeout(n.getLog,4e3));case 14:case"end":return e.stop()}}),e)}))),n.handleScrollToBottom=function(){var e=n.LogContent.current;e&&(e.scrollTop=e.scrollHeight)},n.showLog=function(){n.setState({showLog:!0})},n.stopPropagation=function(e){e&&e.stopPropagation()},n.pathAddCluster=function(e,t){var a=e.match(/(\/kapis|api|apis)(.*)/);return t&&"default"!==t&&(0,_.default)(a)?"".concat(a[1],"/clusters/").concat(t).concat(a[2]):e},n.handleDownload=function(){var e=n.props.runDetail,t=e.sourceUrl,a=e.cluster,r=(0,g.default)((0,b.parseUrl)(t),"pathname","/".concat(t)),o=n.pathAddCluster(r,a),c="".concat(window.location.protocol,"//").concat(window.location.host,"/b2i_download").concat(o);window.open(c)},n.renderLog=function(){var e=n.store.logData,a=e.log,r=e.isLoading,o=n.state.noModuleMsg;return n.state.showLog?r?m.default.createElement("div",{className:S.default.logContent,onClick:n.stopPropagation},m.default.createElement(y.Loading,null)):m.default.createElement("div",{className:S.default.logContent,onClick:n.stopPropagation},m.default.createElement("pre",{ref:n.LogContent},o||a||t("LOADING_DOTS"))):null},n.renderDetailInfo=function(){var e=n.props.runDetail,a=e.imageName,r=e.branch,o=e.binaryName,c=e.binarySize,s=e.status;if(!n.props.isB2i)return m.default.createElement("span",{className:S.default.branchName},m.default.createElement(y.Icon,{name:"branch"}),m.default.createElement("span",null,r||"master"));var l=m.default.createElement("div",{className:S.default.artifactContent},m.default.createElement("p",{className:S.default.title},t("ARTIFACT_FILE")),m.default.createElement("div",{className:S.default.info},m.default.createElement(y.Icon,{name:"file"}),m.default.createElement("p",null,o," ",m.default.createElement("span",null,(0,b.formatSize)(c)))),m.default.createElement("div",{className:S.default.info},m.default.createElement(y.Icon,{name:"templet"}),m.default.createElement("p",null,a)),m.default.createElement(y.Button,{onClick:n.handleDownload,type:"primary",disabled:"Successful"!==s},t("DOWNLOAD_ARTIFACT")));return m.default.createElement(y.Tooltip,{className:S.default.tooltip,content:l,trigger:"hover"},m.default.createElement(y.Icon,{name:"file"}))},n.state={showLog:!1,noModuleMsg:null},n.LogContent=m.default.createRef(),n.store=e.store,n}return(0,u.default)(r,[{key:"componentWillUnmount",value:function(){clearTimeout(this.refreshTimer),this.setState({noModuleMsg:null})}},{key:"render",value:function(){var e=this.props.runDetail,a=e.count,r=e.status,n=e.imageName,c=e.startTime,s=e.name;return this.props.loading?null:m.default.createElement("ul",{className:(0,h.default)(S.default.item,(0,o.default)({},S.default.active,this.state.showLog)),onClick:this.toggleShowLog},m.default.createElement("li",null,m.default.createElement("div",{className:S.default.value},"#",a," ",this.renderDetailInfo()),m.default.createElement("div",{className:S.default.label},t("SERIAL_NUMBER"))),m.default.createElement("li",null,m.default.createElement("div",{className:S.default.value},m.default.createElement(E.default,{className:S.default.status,type:r,name:t(t(r)),flicker:!0})),m.default.createElement("div",{className:S.default.label},t("STATUS"))),m.default.createElement("li",null,m.default.createElement("div",{className:S.default.value},n),m.default.createElement("div",{className:S.default.label},t("IMAGE_NAME_SCAP"))),m.default.createElement("li",null,m.default.createElement("div",{className:S.default.value},(0,b.getLocalTime)(c).format("YYYY-MM-DD HH:mm:ss")),m.default.createElement("div",{className:S.default.label},t("START_TIME_SCAP"))),m.default.createElement("li",null,m.default.createElement("div",{className:S.default.value},r&&s&&t("IMAGE_NAME_".concat(r.toUpperCase()),{name:s})),m.default.createElement("div",{className:S.default.label},t("LAST_MESSAGE_SCAP"))),m.default.createElement(y.Icon,{className:S.default.icon,name:"chevron-down"}),this.renderLog())}}]),r}(m.default.Component))||s;a.default=R},4891:function(e,t,a){e.exports={item:"_3elQcs0a3jxkIwI3ZFGz_Q",value:"_3T4SMPwXMkA9bkeSRaiPDy",status:"_3SKf3UE7oGRjx5y36ufLXK",label:"oc_0Y06yilwcM1rPeAuLM",icon:"_1KE-WZA890ochiXMG_1CsK",branchName:"_3mBN7MemPAoSkAQ7aRCpd3",active:"AkkmSAa32PoBGb8x5Xva1",logContent:"x1_tdtG8vUDtmFG2c4NB9",tooltip:"_3YH0xMx3dBN7B0SttPsUkk",artifactContent:"_3IzWACmQ7p6fvAT9-WdUuE",title:"_30zaQHexLzCS9qKs8vmomE",info:"_2KW1j46oxR29q8pnufGWGt"}},4892:function(e,t,a){e.exports={content:"_1slgUd1teNIfY0n58nGO",header:"_33WAUE8MIh2OonzlUeXWfw",search:"_1R7RIjj9k5xB0OOtOnTZob",actions:"_1IG1p_n9Tvf8h2SYQTY35x"}},4893:function(e,t,a){e.exports={main:"_3cgE6f9b9x33gijePTtBOg",table:"_3j0UWPstvzLi3v0mSQm6PS",clickable:"_3h3VphlUJpSBWERve0cBEG",content:"_1qU2sf5wNS4NAGpul7wEmg",title:"uMJf_Dj6zXK_em4b4IvwU",card:"_iGPpNLR9zhNV2XUNi0K-"}},4894:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var n,o=r(a(31)),c=r(a(36)),s=r(a(37)),l=r(a(55)),i=r(a(56)),u=r(a(51)),d=r(a(0)),f=a(239),p=a(1135),m=r(a(849)),h=a(186);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,f.inject)("detailStore","s2iRunStore")(n=(0,f.observer)(n=function(e){(0,l.default)(a,e);var t=_(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"renderPods",value:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster;return d.default.createElement(m.default,{prefix:"/".concat(t?"/".concat(t):"","/clusters/").concat(a),detail:g({cluster:a},this.store.jobDetail)})}},{key:"renderContent",value:function(){return this.store.isLoading?d.default.createElement(h.Loading,null):d.default.createElement("div",null,this.renderContainerPorts(),this.renderPods())}},{key:"store",get:function(){return this.props.s2iRunStore}}]),a}(p.Component))||n)||n;t.default=y},4895:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(14),f=a(239),p=r(a(63)),m=r(a(26)),h=r(a(1406)),v=r(a(1407));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=(0,f.inject)("s2iRunStore")(n=(0,f.observer)(n=function(e){(0,s.default)(a,e);var t=g(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).fetchData=function(){r.envStore.fetchList({cluster:r.cluster,namespace:r.namespace,containers:r.containers})},r.envStore=new h.default,r}return(0,c.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=(0,d.toJS)(this.envStore.list),t=e.data,a=e.isLoading;return u.default.createElement("div",null,t.map((function(e,t){return u.default.createElement(v.default,{key:t,detail:e,expand:0===t,loading:a})})))}},{key:"module",get:function(){return this.props.module}},{key:"store",get:function(){return this.props.s2iRunStore}},{key:"namespace",get:function(){return this.store.jobDetail.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"containers",get:function(){var e=(0,d.toJS)(this.store.jobDetail),t=e.spec,a=e.containers,r=void 0===a?[]:a;return"containers"===this.module?[e]:(0,p.default)(r)?(0,p.default)(t)?[]:(0,m.default)(t,"template.spec.containers",[]):r}},{key:"test",get:function(){return"2"}}]),a}(u.default.Component))||n)||n;t.default=_},4896:function(e,t,a){"use strict";a(15);var r=a(20);a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0,a(45),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var n=r(a(36)),o=r(a(37)),c=r(a(55)),s=r(a(56)),l=r(a(51)),i=r(a(0)),u=a(14),d=a(239),f=a(52),p=r(a(1110)),m=r(a(1405));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=h(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=r.store.jobDetail,t=e.uid,a=e.name,n=e.namespace,o=r.props.match.params.cluster,c={"involvedObject.name":a,"involvedObject.namespace":n,"involvedObject.kind":"Job","involvedObject.uid":t};r.eventStore.fetchList({cluster:o,namespace:r.namespace,fieldSelector:(0,f.joinSelector)(c)})},r.eventStore=new p.default,r.fetchData(),r}return(0,o.default)(a,[{key:"render",value:function(){var e=(0,u.toJS)(this.eventStore.list),t=e.data,a=e.isLoading;return i.default.createElement(m.default,{data:t,loading:a})}},{key:"store",get:function(){return this.props.s2iRunStore}},{key:"namespace",get:function(){return this.store.jobDetail.namespace}}]),a}(i.default.Component),g=(0,d.inject)("s2iRunStore")((0,d.observer)(v));t.default=g;var _=v;t.Component=_},4897:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=n(r(801)),m=n(r(4898)),h=n(r(4901));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=v(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.match.params;return d.default.createElement(p.default,{className:h.default.main,title:t("IMAGE_ARTIFACTS")},d.default.createElement(m.default,{params:e}))}}]),r}(d.default.Component))||o;a.default=g},4898:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(16),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var n=r(a(43)),o=r(a(31));a(41);var c,s=r(a(44)),l=r(a(36)),i=r(a(37)),u=r(a(55)),d=r(a(56)),f=r(a(51)),p=r(a(0)),m=a(239),h=r(a(1975)),v=r(a(4899));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var E=(0,m.observer)(c=function(e){(0,u.default)(a,e);var t=y(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).fetchData=(0,s.default)(n.default.mark((function t(){var a,r,o,c,s=arguments;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:{},r=e.props,o=r.limit,(c=r.params).status="Successful",t.next=5,e.store.fetchS2IRunRecords(_(_({limit:o},c),a));case 5:e.setAutoRefresh();case 6:case"end":return t.stop()}}),t)}))),e}return(0,i.default)(a,[{key:"renderItem",value:function(e){var t=this.store.list.isLoading;return p.default.createElement(v.default,{key:e.name,runDetail:e,loading:t,store:this.store})}}]),a}(h.default))||c;t.default=E},4899:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(239),p=r(52),m=r(186),h=n(r(240)),v=r(1376),g=n(r(4900));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,f.observer)(o=function(e){(0,l.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=a.call.apply(a,[this].concat(o))).handleCopy=function(){h.default.success({content:t("COPY_SUCCESSFUL")})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.runDetail,a=e.imageName,r=e.imageCreated,n=e.imageSize,o=e.commandPull;return this.props.loading?null:d.default.createElement("ul",{className:g.default.item},d.default.createElement(m.Icon,{name:"cdn",size:40}),d.default.createElement("li",null,d.default.createElement("div",{className:g.default.value},a),d.default.createElement("div",{className:g.default.label},t("IMAGE_NAME_SCAP"))),d.default.createElement("li",null,d.default.createElement("div",{className:g.default.value},(0,p.formatSize)(n)),d.default.createElement("div",{className:g.default.label},t("IMAGE_SIZE_SCAP"))),d.default.createElement("li",null,d.default.createElement("div",{className:g.default.value},o,d.default.createElement(v.CopyToClipboard,{text:o,onCopy:this.handleCopy},d.default.createElement(m.Icon,{className:g.default.copyIcon,name:"copy",changeable:!0}))),d.default.createElement("div",{className:g.default.label},t("PULL_COMMAND_SCAP"))),d.default.createElement("li",null,d.default.createElement("div",{className:g.default.value},(0,p.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss")),d.default.createElement("div",{className:g.default.label},t("RELEASE_TIME_SCAP"))))}}]),r}(d.default.Component))||o;a.default=y},4900:function(e,t,a){e.exports={item:"_1c8i_eoUlHMB2lYN5xgXvt",value:"_25Hi7XHKhZ1owsalTEwjnb",status:"_3SFV9llOs6oQvRXeuhE9Tc",label:"_2pypsciA7t2SNBk15A_i0Q",icon:"_2e4TfXHI2JnlLkg62MITNS",copyIcon:"_1HwMmSXmFXLnNvOlIBrqUP"}},4901:function(e,t,a){e.exports={table:"JkzBFOqQxJDXdFS8jg9xD"}},4902:function(e,a,r){"use strict";var n=r(20);r(12),r(134),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(63)),g=r(186),_=r(52),y=r(791),E=n(r(1048)),b=n(r(805)),S=n(r(4903));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,y.trigger)(o=function(e){(0,u.default)(r,e);var a=A(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:e.store.detail,success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editScale",icon:"pen",text:t("EDIT_SCALING_SETTINGS"),action:"edit",onClick:function(){return e.trigger("customScaling.edit.setting",R({detail:e.store.detail,success:e.fetchData},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail)||{},r=e.props.match.params,n=r.cluster,o=r.namespace;if(!(0,v.default)(a))return[{name:t("CLUSTER"),value:(0,_.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,_.showNameAndAlias)(o,"project")},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e,a,r,n,o,s={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var l={module:this.module,name:(0,_.getDisplayName)(null!==(e=null===(a=this.store)||void 0===a?void 0:a.detail)&&void 0!==e?e:{}),desc:null!==(r=null===(n=this.store)||void 0===n||null===(o=n.detail)||void 0===o?void 0:o.description)&&void 0!==r?r:"",operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CUSTOM_SCALING_PL"),url:this.listUrl}]};return p.default.createElement(b.default,(0,c.default)({stores:s},l,{routes:(0,S.default)(this.props.match.path)}))}},{key:"module",get:function(){return"customScalings"}},{key:"name",get:function(){return"CUSTOM_SCALING"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/custom-scaling")}}]),r}(p.default.Component))||o)||o)||o;a.default=k},4903:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(814)),c=r(a(4904));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4904:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,o=r(a(36)),c=r(a(37)),s=r(a(55)),l=r(a(56)),i=r(a(51)),u=r(a(0)),d=a(14),f=a(239),p=r(a(4905)),m=r(a(4907)),h=r(a(4912));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var g=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,s.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props.detailStore.detail;return u.default.createElement("div",null,u.default.createElement(h.default,{detail:(0,d.toJS)(e)}),u.default.createElement(p.default,{detail:(0,d.toJS)(e),params:this.props.match.params}),u.default.createElement(m.default,{detail:(0,d.toJS)(e)}))}}]),a}(u.default.Component))||n)||n;t.default=g},4905:function(e,a,r){"use strict";var n=r(157),o=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var c=o(r(315)),s=o(r(43)),l=o(r(31));r(41);var i=o(r(44)),u=o(r(96)),d=o(r(788)),f=o(r(789)),p=o(r(26)),m=o(r(1825)),h=n(r(0)),v=o(r(318)),g=r(72),_=r(52),y=r(467),E=o(r(4906));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(e){var a,r,n,o,l,b,O=e.detail,R=e.params,A=(0,h.useState)({}),k=(0,u.default)(A,2),T=k[0],D=k[1],C=(0,h.useMemo)((function(){var e,t;return"".concat(null==O||null===(e=O.scaleTargetRef)||void 0===e||null===(t=e.kind)||void 0===t?void 0:t.toLocaleLowerCase(),"s")}),[O.scaleTargetRef.kind]),P=[{icon:"down-duotone",title:null!==(a=null==O?void 0:O.minReplicaCount)&&void 0!==a?a:"-",desc:t("MINIMUM_REPLICAS")},{icon:"up-duotone",title:null!==(r=null==O?void 0:O.maxReplicaCount)&&void 0!==r?r:"-",desc:t("MAXIMUM_REPLICAS")},{icon:"history-duotone",title:(0,_.getUnitValueString)(null!==(n=null==O?void 0:O.pollingInterval)&&void 0!==n?n:"-",y.timeUnit),desc:t("POLLING_INTERVAL")},{icon:"clock-duotone",title:(0,_.getUnitValueString)(null!==(o=null==O?void 0:O.cooldownPeriod)&&void 0!==o?o:"-",y.timeUnit),desc:t("WAITING_TIME")}],N=(0,h.useCallback)(function(){var e=(0,i.default)(s.default.mark((function e(t){var a,r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchDetail(S(S({},R),{},{name:null==O||null===(a=O.scaleTargetRef)||void 0===a?void 0:a.name}));case 2:r=t.detail,n=I(r),D(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),I=(0,h.useCallback)((function(e){var t={};switch(C){case"deployments":t={current:e.availablePodNums||0,desire:e.podNums||0};break;case"statefulsets":t={current:(0,p.default)(e,"status.currentReplicas",e.readyPodNums),desire:e.podNums||0}}return t}),[C]);return(0,h.useEffect)((function(){var e=new v.default(C);N(e)}),[C]),h.default.createElement(f.default,{title:t("SCALING_OBJECT")},h.default.createElement("div",{className:E.default.scalingObject},h.default.createElement("div",{className:E.default.scalingObjectHeader},h.default.createElement(d.default,{icon:g.ICON_TYPES[C],iconSize:40,title:null==O||null===(l=O.scaleTargetRef)||void 0===l?void 0:l.name,desc:t(null==O||null===(b=O.scaleTargetRef)||void 0===b?void 0:b.kind),noLink:!0})),h.default.createElement("div",{className:E.default.scalingObjectBody},h.default.createElement(m.default,(0,c.default)({},T,{hideOperation:!0})),h.default.createElement("div",{className:E.default.itemBoxBody},P.map((function(e,t){return h.default.createElement("div",{className:E.default.itemBoxBodyItem,key:t},h.default.createElement(d.default,{iconSize:40,icon:e.icon,title:e.title,desc:e.desc,noLink:!0}))}))))))},R=(0,h.memo)(O);a.default=R},4906:function(e,t,a){e.exports={scalingObject:"_2HUP0LySuuHrrXuV-TrTsu",scalingObjectHeader:"_3mMfQf77HpdXXMDgz8YiOB",scalingObjectBody:"_3LITN8X08Bdt0XHP-aM_U6",itemBoxBody:"_3aBU-ClqYPDNxCgic1Ec3Y",itemBoxBodyItem:"_2SxPhPdUD8AM7pB3-7vVcE"}},4907:function(e,a,r){"use strict";r(15);var n=r(20),o=r(157);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var c=o(r(0)),s=n(r(789)),l=n(r(4908)),i=n(r(4909)),u=n(r(4911)),d=n(r(1249)),f=function(e){var a,r=e.detail;return r.triggers.length<1?null:c.default.createElement(s.default,{title:t("TRIGGER")},c.default.createElement("div",{className:d.default.triggerBox},null===(a=r.triggers)||void 0===a?void 0:a.map((function(e,t){var a="cron"===e.type?c.default.createElement(l.default,e):"prometheus"===e.type?c.default.createElement(i.default,e):c.default.createElement(u.default,e);return c.default.createElement("div",{key:t},a)}))))},p=(0,c.memo)(f);a.default=p},4908:function(e,a,r){"use strict";r(15);var n=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var o=n(r(0)),c=n(r(788)),s=n(r(1249)),l=function(e){var a=e.metadata,r=void 0===a?{}:a,n=[{title:null==r?void 0:r.timezone,desc:t("TIME_ZONE"),icon:"map-time"},{title:null==r?void 0:r.desiredReplicas,desc:t("REPLICAS_DESIRED"),icon:"pod"},{title:null==r?void 0:r.start,desc:t("START_TIME"),icon:"clock-duotone"},{title:null==r?void 0:r.end,desc:t("END_TIME"),icon:"clock-duotone"}];return o.default.createElement("div",{className:s.default.itemBox},o.default.createElement("div",{className:s.default.itemBoxTitle},o.default.createElement(c.default,{icon:"cronjob-duotone",iconSize:40,title:"Cron",desc:t("CORN_DESC"),noLink:!0})),o.default.createElement("div",{className:s.default.itemBoxBody},n.map((function(e,t){return o.default.createElement("div",{className:s.default.itemBoxBodyItem,key:t},o.default.createElement(c.default,{icon:e.icon,iconSize:40,title:e.title,desc:e.desc,noLink:!0}))}))))};a.default=l},4909:function(e,a,r){"use strict";r(15);var n=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var o=n(r(0)),c=n(r(788)),s=n(r(63)),l=n(r(1976)),i=n(r(1249)),u=function(e){var a=e.metadata,r=void 0===a?{}:a,n=e.authenticationRef,u=void 0===n?{}:n,d=[{title:r.serverAddress,desc:t("ADDRESS"),icon:"network-duotone"},{title:r.metricName,desc:t("INDICATOR_NAME"),icon:"textarea-duotone"},{title:r.threshold,desc:t("THRESHOLD"),icon:"proportion-chart"},{title:r.query,desc:t("EXPRESSION"),icon:"apps-duotone"}];return o.default.createElement("div",{className:i.default.itemBox},o.default.createElement("div",{className:i.default.itemBoxTitle},o.default.createElement(c.default,{icon:"prometheus",iconSize:40,title:"Prometheus",desc:t("SCALING_Prometheus_DESC"),noLink:!0})),o.default.createElement("div",{className:i.default.itemBoxBody2Column},d.map((function(e,t){return o.default.createElement("div",{className:i.default.itemBoxBodyItem,key:t},o.default.createElement(c.default,{icon:e.icon,iconSize:40,title:e.title,desc:e.desc,noLink:!0}))}))),!(0,s.default)(u)&&o.default.createElement("div",{className:i.default.authentication},o.default.createElement("section",null,t("TOGGLER_AUTHOR")),o.default.createElement(l.default,{data:u})))};a.default=u},4910:function(e,t,a){e.exports={annotations:"DmBSAoLXwzMmq9Y7Ew49L"}},4911:function(e,a,r){"use strict";r(15);var n=r(20),o=r(157);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var c=o(r(0)),s=n(r(788)),l=n(r(1976)),i=n(r(1249)),u=function(e){var a=(0,c.useMemo)((function(){return[{title:e.type,desc:t("TYPE"),icon:"appcenter"}]}),[e]);return c.default.createElement("div",{className:i.default.itemBox},c.default.createElement("div",{className:i.default.itemBoxTitle},c.default.createElement(s.default,{icon:"computing-setting",iconSize:40,title:e.type,desc:t("SCALING_CUSTOM_DESC"),noLink:!0})),c.default.createElement("div",{className:i.default.itemBoxBody},a.map((function(e,t){return c.default.createElement("div",{className:i.default.itemBoxBodyItem,key:t},c.default.createElement(s.default,{icon:e.icon,iconSize:40,title:e.title,desc:e.desc,noLink:!0}))}))),c.default.createElement("div",{className:i.default.authentication},c.default.createElement("section",null,t("TOGGLER_PARAMS")),c.default.createElement(l.default,{data:e.metadata})),c.default.createElement("div",{className:i.default.authentication},c.default.createElement("section",null,t("TOGGLER_AUTHOR")),c.default.createElement(l.default,{data:e.authenticationRef})))},d=(0,c.memo)(u);a.default=d},4912:function(e,a,r){"use strict";r(15);var n=r(20),o=r(157);r(29),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(29),r(18),r(16),r(4);var c=o(r(0)),s=n(r(789)),l=n(r(788)),i=r(186),u=r(1977),d=n(r(4914)),f=function(e){var a,r,n=e.detail,o=null!==(a=null==n||null===(r=n.status)||void 0===r?void 0:r.conditions)&&void 0!==a?a:[],f=[{icon:"front-sight",title:t("STRETCH_OBJECT_READY"),type:"Ready"},{icon:"stretch",title:t("TRIGGER_ACTIVE"),type:"Active"},{icon:"time-backup",title:t("RETRACTOR_FALLBACK"),type:"Fallback"}];return c.default.createElement(s.default,{title:t("STATUS_INFORMATION")},c.default.createElement("div",{className:d.default.scalingObject},c.default.createElement("div",{className:d.default.scalingObjectBody},c.default.createElement("div",{className:d.default.itemBoxBody},f.map((function(e,a){return c.default.createElement("div",{className:d.default.itemBoxBodyItem,key:a},c.default.createElement(l.default,{iconSize:40,icon:e.icon,title:e.title,noLink:!0}),c.default.createElement("span",{className:d.default.itemMoreMessage},function(e){var a,r,n,s=o.find((function(t){return t.type===e.type})),l=null!==(a=null===(r=u.ICON_TYPES[s.status])||void 0===r?void 0:r.name)&&void 0!==a?a:"success";return c.default.createElement(i.Tooltip,{content:(n=s,c.default.createElement("div",null,c.default.createElement("p",null,u.STATUS_TITLE[n.type]),c.default.createElement("ul",null,c.default.createElement("li",null,t("STATUS_VALUE",{value:n.status})),c.default.createElement("li",null,n.reason&&t("REASON_VALUE",{value:n.reason})),c.default.createElement("li",null,n.message&&t("MESSAGE_VALUE",{value:n.message})))))},c.default.createElement(i.Icon,{size:15,name:l,className:"close"===l?d.default.closeIcon:"",color:{primary:"#fff",secondary:u.ICON_TYPES[s.status].color}}))}(e)))}))))))},p=(0,c.memo)(f);a.default=p},4913:function(e,t,a){e.exports={container:"_2KVItd1HYYaJgdIyvHcwUc",item:"_3VFw_wXbCXL1Ywf-VNO5aK",closeIcon:"_1tqgjq-R_7uGbX_0TkMkd3",textItem:"sXH771p37zacfjCTwHkhs",textItemTitle:"_2nfBuQzfWBKyTHRIKCWMgP"}},4914:function(e,t,a){e.exports={scalingObject:"_3dOb7zP9K-HeLTa-2w8ahj",scalingObjectBody:"QLeGWNMC0fYGehEs0oeqd",itemBoxBody:"_1Ju85rdIxkWSfN9odO4ApV",itemBoxBodyItem:"_1TlGtUKn-agIFcyK_6fmhl",itemMoreMessage:"SgThEYjDBa8DkABHylJ96",closeIcon:"TgeOayymCsr54gm9GNvt7"}},4915:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(134),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(28),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var o=n(r(315)),c=n(r(43));r(41);var s,l=n(r(44)),i=n(r(36)),u=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=n(r(26)),g=n(r(63)),_=r(239),y=r(186),E=n(r(240)),b=r(791),S=r(52),O=n(r(483)),R=n(r(899)),A=n(r(4916));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,_.inject)("rootStore")(s=(0,_.observer)(s=(0,b.trigger)(s=function(e){(0,d.default)(r,e);var a=k(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).fetchData=function(){n.store.fetchDetail(n.props.match.params)},n.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return n.trigger("resource.baseinfo.edit",{detail:n.store.detail,hideAlias:!0,success:n.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return n.trigger("resource.delete",{type:"EDGE_APPLICATION",detail:n.store.detail,success:function(){return n.routing.push(n.listUrl)},onOk:n.handleDelete,renderExtra:function(){return m.default.createElement(y.Checkbox,{className:"margin-t12",onChange:function(e){return n.setState({delete_workloads:e})}},t("DEL_ALL_WORKLOAD_IN_EDGE_APP"))}})}}]},n.getAttrs=function(){var e=(0,h.toJS)(n.store.detail);if(!(0,g.default)(e)){var a=e.namespace,r=e.createTime,o=e.updateTime,c=e.creator;return[{name:t("EDGE_CLUSTER"),value:"-"},{name:t("PROJECT"),value:a||"-"},{name:t("CREATION_TIME"),value:r?(0,S.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-"},{name:t("UPDATE_TIME_SCAP"),value:o?(0,S.getLocalTime)(o).format("YYYY-MM-DD HH:mm:ss"):"-"},{name:t("CREATOR"),value:c||"-"}]}},n.handleDelete=(0,l.default)(c.default.mark((function e(){var a,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.store.detail,r=(0,v.default)(n.state,"delete_workloads",!1),e.next=4,n.store.delete(a,r);case 4:E.default.success({content:t("DELETED_SUCCESSFULLY")});case 5:case"end":return e.stop()}}),e)}))),n.store=new O.default,n.state={delete_workloads:!1},n}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,icon:"application",name:(0,S.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("BATCH_APP_DEPLOY_PL"),url:this.listUrl}]};return m.default.createElement(R.default,(0,o.default)({stores:e,routes:(0,A.default)(this.props.match.path)},a))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"roles"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(m.default.Component))||s)||s)||s;a.default=T},4916:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),o=r(a(4917));t.default=function(e){return[{path:"".concat(e,"/resources"),title:"RESOURCE_STATUS",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resources"),exact:!0})]}},4917:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=n(r(36)),s=n(r(37)),l=n(r(55)),i=n(r(56)),u=n(r(51)),d=n(r(0)),f=r(14),p=n(r(63)),m=r(239),h=n(r(789)),v=n(r(4918)),g=n(r(4920));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,l.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.module=e.module,t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=(0,f.toJS)(this.store.detail).workloads;return d.default.createElement(h.default,{title:t("WORKLOAD_PL")},(0,p.default)(a)?d.default.createElement("div",{className:g.default.empty},t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("WORKLOAD")})):a.map((function(t){return d.default.createElement(v.default,{key:t.name,detail:t,prefix:e.prefix})})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r)}}]),r}(d.default.Component))||o)||o;a.default=y},4918:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),s=n(r(55)),l=n(r(56)),i=n(r(51)),u=n(r(0)),d=n(r(26)),f=r(433),p=r(52),m=n(r(865)),h=n(r(790)),v=n(r(4919));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.prefix,n=a.updateTime,o=a.kind,c=a.spec,s=a.name;(0,d.default)(c,"nodeName","-");return u.default.createElement("div",{className:v.default.item},u.default.createElement(h.default,{icon:"backup",title:u.default.createElement(f.Link,{to:"".concat(r,"/").concat(o,"/").concat(s)},(0,p.getDisplayName)(a)),description:t("UPDATED_TIME",{value:n?(0,p.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss"):"-"})}),u.default.createElement(h.default,{title:t((null==o?void 0:o.toUpperCase())||"-"),description:t("TYPE")}),u.default.createElement(h.default,{title:u.default.createElement(m.default,{data:a,module:o}),description:t("STATUS")}),u.default.createElement(h.default,{title:(0,d.default)(a,["labels","apps.edgewize.io/nodegroup"],"-"),description:t("NODE_GROUP")}),u.default.createElement(h.default,{title:(0,d.default)(a,["labels","apps.edgewize.io/node"],"-"),description:t("EDGE_NODE")}))}}]),r}(u.default.Component);a.default=_},4919:function(e,t,a){e.exports={item:"_3-a7XaH_mcJb9-W_VW1uOD"}},4920:function(e,t,a){e.exports={empty:"_3ftbHfT-_E6z4VSTgwQ5HE"}},4921:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var o=n(r(315)),c=n(r(43));r(41);var s,l,i,u,d=n(r(44)),f=n(r(31)),p=n(r(65)),m=n(r(36)),h=n(r(37)),v=n(r(88)),g=n(r(55)),_=n(r(56)),y=n(r(51)),E=n(r(49)),b=(n(r(66)),n(r(0))),S=r(239),O=r(791),R=n(r(792)),A=n(r(1134)),k=r(186),T=n(r(834)),D=r(14),C=n(r(63)),P=n(r(26)),N=n(r(4922));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var M=(0,S.inject)("rootStore")(s=(0,S.observer)(s=(0,O.trigger)((l=function(e){(0,g.default)(r,e);var a=x(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).store=new T.default,(0,p.default)(e,"gatewayList",i,(0,v.default)(e)),(0,p.default)(e,"isLoading",u,(0,v.default)(e)),e.getProjectGateway=function(){var t=w({},e.props.match.params);return e.store.getGatewayByProject(w(w({},t),{},{cluster:e.cluster,workspace:e.workspace,includeUpper:!0}))},e.getInitGateway=(0,d.default)(c.default.mark((function t(){var a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getProjectGateway();case 3:a=t.sent,e.gatewayList=a,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.renderClusterGatewayTitle=function(){return b.default.createElement("div",{className:N.default.title},b.default.createElement("span",null," ",t("CLUSTER_GATEWAY")),b.default.createElement(k.Tooltip,{content:t("ENT_CLUSTER_GATEWAY_GUIDE_DESC"),placement:"top"},b.default.createElement(k.Icon,{name:"question",size:20})))},e.renderProjectTitle=function(){return b.default.createElement("div",{className:N.default.title},t("PROJECT_GATEWAY"))},e.renderWorkspaceTitle=function(){return(0,C.default)(e.gatewayList[0])?b.default.createElement("div",{className:N.default.title},b.default.createElement("span",null," ",t("WORKSPACE_GATEWAY")),b.default.createElement(k.Tooltip,{content:t("WORKSPACE_GATEWAY_GUIDE_DESC"),placement:"top"},b.default.createElement(k.Icon,{name:"question",size:20}))):b.default.createElement("div",{className:N.default.title},t("WORKSPACE_GATEWAY"))},e.renderGatewayCardTitle=function(t){return"workspace"===t?e.renderWorkspaceTitle():"project"===t?e.renderProjectTitle():e.renderClusterGatewayTitle()},e.renderOperations=function(a){var r=a.url,n=a.disabled;return b.default.createElement(k.Button,{disabled:n,onClick:function(){e.props.rootStore.routing.push(r)}},t("VIEW_DETAILS"))},e.renderGatewayCard=function(){var t=(0,D.toJS)(e.gatewayList);return(0,C.default)(t)?b.default.createElement(A.default,(0,o.default)({key:"empty",type:"project",detail:null,actions:e.enabledActions,manageDisable:!1},e.props,{store:e.store,getData:e.getInitGateway,title:e.renderGatewayCardTitle("project"),prefix:e.prefix,gatewayList:[]})):t.map((function(t,a,r){var n=t.gatewayType;return b.default.createElement(A.default,(0,o.default)({key:a,type:n,detail:t,actions:e.enabledActions,manageDisable:"project"!==n},e.props,{store:e.store,getData:e.getInitGateway,title:e.renderGatewayCardTitle(n),prefix:"cluster"===n?null:e.prefix,gatewayList:(0,D.toJS)(r)}))}))},e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.isClusterInstallGatway&&this.getInitGateway()}},{key:"render",value:function(){return b.default.createElement(b.default.Fragment,null,b.default.createElement(R.default,{icon:"loadbalancer",title:t("GATEWAY_SETTINGS"),description:t("PROJECT_GATEWAY_DESC"),tabs:this.tabs}),b.default.createElement(k.Loading,{spinning:this.isLoading},b.default.createElement(b.default.Fragment,null,this.renderGatewayCard())))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"prefix",get:function(){return this.props.match.url}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"workspace",get:function(){return this.props.match.params.workspace}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"ks-project-gateway",project:this.namespace,cluster:this.cluster,workspace:this.workspace})}},{key:"isClusterInstallGatway",get:function(){var e=this.props.match.params.cluster;return(0,P.default)(globals,"ksConfig.enabledExtensionModulesStatus.gateway.clusterSchedulingStatuses.".concat(e),!1)}}]),r}(b.default.Component),i=(0,E.default)(l.prototype,"gatewayList",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=(0,E.default)(l.prototype,"isLoading",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=l))||s)||s)||s;a.default=M},4922:function(e,t,a){e.exports={title:"x03JOCFwsZBPAfz9u46HI"}},4923:function(e,a,r){"use strict";(function(e){var n=r(20);r(12),r(134),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(134),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var o,c=n(r(315)),s=n(r(31)),l=n(r(36)),i=n(r(37)),u=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(788)),m=n(r(790)),h=n(r(792)),v=r(793),g=n(r(796)),_=n(r(451)),y=n(r(0)),E=n(r(1048)),b=r(52),S=r(72),O=n(r(1977));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,v.withProjectList)({store:new E.default,module:"customScalings",name:"CUSTOM_SCALING"})(o=function(a){(0,u.default)(n,a);var r=k(n);function n(){var a;(0,l.default)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=r.call.apply(r,[this].concat(c))).getColumns=function(){var r=a.props,n=r.getSortOrder,o=r.module;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(e,t){return y.default.createElement(p.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(t),desc:t.description||"-",to:"".concat(a.props.match.url,"/").concat(e),isMultiCluster:t.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",width:100,render:function(t,r){return y.default.createElement(O.default,{status:t,toEvent:function(){e.navigateTo("".concat(a.props.match.url,"/").concat(r.name,"/events"))}})}},{title:t("SCALER"),dataIndex:"triggers",isHideable:!0,width:"15%",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return(0,_.default)(e.type)})).join(",");return t}},{title:t("SCALING_OBJECT"),dataIndex:"scaleTargetRef",isHideable:!0,width:"15%",render:function(e){var a,r;return y.default.createElement(m.default,{title:null!==(a=null==e?void 0:e.name)&&void 0!==a?a:"-",description:t(null!==(r=null==e?void 0:e.kind)&&void 0!==r?r:"-")})}},{title:t("MINIMUM_REPLICAS"),dataIndex:"minReplicaCount",isHideable:!0,width:"10%"},{title:t("MAXIMUM_REPLICAS"),dataIndex:"maxReplicaCount",isHideable:!0,width:"10%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},a.showCreate=function(){var e=a.props,r=e.match,n=e.module,o=e.getData;return a.props.trigger("customScaling.create",A(A({module:n},r.params),{},{success:o,title:t("CREATE_CUSTOM_SCALING")}))},a}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return y.default.createElement(v.ListPage,(0,c.default)({},this.props,{noWatch:!0}),y.default.createElement(h.default,t),y.default.createElement(g.default,(0,c.default)({},a,{className:"table-2-3",itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,r=e.trigger,n=e.name,o=e.match;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e,success:a})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e,success:a})}},{key:"editScale",icon:"pen",text:t("EDIT_SCALING_SETTINGS"),action:"edit",onClick:function(e){return r("customScaling.edit.setting",A({detail:e,success:a},o.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e,success:a})}}]}}]),n}(y.default.Component))||o;a.default=T}).call(this,r(69))},781:function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(11),a(6),a(30),a(16),a(9),a(13),a(10),a(4),a(22),a(23),a(24),a(17),a(38),a(62),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(30),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(38),a(62),a(7),a(32);var o=r(a(43)),c=r(a(31));a(41);var s,l=r(a(44)),i=r(a(36)),u=r(a(37)),d=r(a(55)),f=r(a(56)),p=r(a(51)),m=n(a(0)),h=a(239),v=a(186),g=r(a(74)),_=r(a(241)),y=a(317),E=r(a(439)),b=r(a(438)),S=r(a(445)),O=r(a(4507));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.inject)("rootStore")(s=(0,h.observer)(s=function(e){(0,d.default)(r,e);var t,a=k(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).store=new E.default,t.clusterStore=new b.default,t.workspaceStore=new S.default,t.init(e.match.params),t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){var t=e.match.params,a=t.namespace,r=t.cluster;this.project===a&&this.cluster===r||this.init(this.props.match.params)}},{key:"init",value:(t=(0,l.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.workspaceStore.fetchDetail({workspace:t.workspace}),this.clusterStore.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({workspace:t.workspace})]);case 3:if(this.store.detail.name){e.next=5;break}return e.abrupt("return",this.props.rootStore.routing.push("/404"));case 5:return e.next=7,this.props.rootStore.getRules(t);case 7:return e.next=9,this.clusterStore.checkSpringCloudIfActive({cluster:t.cluster});case 9:a=e.sent,(0,g.default)(globals,"clusterConfig.".concat(t.cluster),A(A({},this.clusterStore.detail.configz),{},{k8sVersion:this.clusterStore.detail.kubernetesVersion,springcloud:a})),globals.app.cacheHistory(this.props.match.url,A(A({type:"Project"},(0,_.default)(this.store.detail,["name","aliasName"])),{},{cluster:(0,_.default)(this.clusterStore.detail,["name","aliasName","group","provider"])})),this.store.initializing=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(v.Loading,{className:"ks-page-loading"}):m.default.createElement(h.Provider,{projectStore:this.store,workspaceStore:this.workspaceStore},(0,y.renderRoutes)(O.default))}},{key:"project",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(m.Component))||s)||s;t.default=T}}]);