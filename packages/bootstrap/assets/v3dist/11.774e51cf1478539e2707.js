(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1137:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(31),a(6),a(29),a(97),a(98),a(9),a(13),a(10),a(4),a(23),a(17),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(31),a(6),a(29),a(28),a(97),a(42),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7),a(32);var n=r(a(30)),u=r(a(96)),l=r(a(43));a(41);var o,c,i,s=r(a(44)),d=r(a(61)),f=r(a(65)),p=r(a(36)),m=r(a(37)),h=r(a(88)),v=r(a(55)),y=r(a(56)),g=r(a(51)),_=r(a(49)),E=(r(a(66)),a(14)),b=r(a(63)),S=r(a(26)),O=r(a(74)),R=r(a(855)),T=a(52),C=a(434);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var N=(o=function(e){(0,v.default)(n,e);var t,a,r=k(n);function n(){var e;(0,p.default)(this,n);for(var t=arguments.length,a=new Array(t),u=0;u<t;u++)a[u]=arguments[u];return e=r.call.apply(r,[this].concat(a)),(0,f.default)(e,"health",c,(0,h.default)(e)),(0,f.default)(e,"etcd",i,(0,h.default)(e)),e.getApi=function(){return"".concat(e.apiVersion,"/component_metrics")},e.getNewRefreshedResult=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,d.default)(a);return t.forEach((function(t,a){var n=(0,S.default)(t,"metric.__name__"),u=null;if(n){var l=(0,S.default)(t,"metric.quantile"),o=(0,S.default)(t,"metric.verb"),c=(0,S.default)(t,"metric.result"),i=r.find((function(e){return l?(0,S.default)(e,"metric.quantile")===l:o?(0,S.default)(e,"metric.verb")===o:c?(0,S.default)(e,"metric.result")===c:(0,S.default)(e,"metric.__name__")===n}));(0,b.default)(i)?r.push(t):u=i}else u=r[a];if(!(0,b.default)(u)){var s=e.getNewValues(u.values,t.value);(0,O.default)(u,"values",s)}})),r},e}return(0,m.default)(n,[{key:"fetchHealthMetrics",value:(a=(0,s.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.health.isLoading=!0,e.next=3,this.requestHealthMetrics();case 3:this.health.isLoading=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"requestHealthMetrics",value:(t=(0,s.default)(l.default.mark((function e(){var t,a,r,n,o,c,i,s,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cluster&&globals.app.isMultiCluster?"kapis/clusters/".concat(this.cluster,"/resources.kubesphere.io/v1alpha2/componenthealth"):"kapis/resources.kubesphere.io/v1alpha2/componenthealth",e.next=3,(0,T.to)(request.get(t));case 3:a=e.sent,r=a.kubesphereStatus||[],n=(0,R.default)(r,"namespace"),o=r.some((function(e){return"kube-scheduler"===(0,S.default)(e,"label.component")&&(0,S.default)(e,"healthyBackends",0)})),c=r.some((function(e){return"kube-controller-manager"===(0,S.default)(e,"label.component")&&(0,S.default)(e,"healthyBackends",0)})),i={kubernetes:(0,S.default)(a,"kubernetesStatus",[]),node:(0,S.default)(a,"nodeStatus",{}),kubesphere:(0,S.default)(n,"kubesphere-system",[]),openpitrix:(0,S.default)(n,"openpitrix-system",[]),istio:(0,S.default)(n,"istio-system",[]),monitoring:(0,S.default)(n,"kubesphere-monitoring-system",[]),logging:(0,S.default)(n,"kubesphere-logging-system",[]),devops:(0,S.default)(n,"kubesphere-devops-system",[]),kubeSystem:(0,S.default)(n,"kube-system",[])},s={},d={},Object.entries(i).forEach((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1],n={total:0,health:0},l={total:0,health:0};"node"===a?(n.total=(0,S.default)(r,"totalNodes",0),n.health=(0,S.default)(r,"healthyNodes",0)):"kubernetes"===a?(n.total=r.length,n.health=r.filter((function(e){return"Healthy"===(0,C.getComponentStatus)(e)})).length):r.forEach((function(e){n.total+=e.totalBackends,n.health+=e.healthyBackends;var t=(0,C.getComponentStatus)(e);l.health+="Healthy"===t?1:0,l.total+="Stopped"===t?0:1})),s[a]=n,d[a]=l})),this.health=P(P({},this.health||{}),{data:i,counts:s,componentCounts:d,supportKsScheduler:o,supportControllerManager:c});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(r(a(883)).default),c=(0,_.default)(o.prototype,"health",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},counts:{},supportKsScheduler:!1,supportControllerManager:!1,isLoading:!1}}}),i=(0,_.default)(o.prototype,"etcd",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,_.default)(o.prototype,"fetchHealthMetrics",[E.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchHealthMetrics"),o.prototype),(0,_.default)(o.prototype,"requestHealthMetrics",[E.action],Object.getOwnPropertyDescriptor(o.prototype,"requestHealthMetrics"),o.prototype),o);t.default=N},1138:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),u=r(a(55)),l=r(a(56)),o=r(a(51));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,o.default)(e);if(t){var n=(0,o.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var i=function(e){(0,u.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).resourceName="node",e.getApi=function(){return"".concat(e.apiVersion,"/node_metrics")},e}return a}(r(a(883)).default);t.default=i},1236:function(e,t,a){e.exports={item:"_2wtLGDgm820tf3F8avQ6F-",monitoring:"_19usdlzCZwx23Wpfj4_e8n",bar:"BusKqG5OChMgy7j1_oFw8",notify:"_3Iy2Up59FAbeVQ1V7XXkCt",title:"_3uKGTwK3VSZJP2tONLQX87",content:"_3ugSRCC2Cq90nTj_jlPcu-",query:"_2XrEj4sPliD1SU7e8G2Gk2"}},1237:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(29),a(73),a(18),a(27),a(9),a(13),a(10),a(4),a(22),a(23),a(17),a(38),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(29),a(73),a(18),a(28),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(38),a(7),a(32);var n=r(a(43)),u=r(a(61)),l=r(a(58));a(41);var o,c,i,s=r(a(44)),d=r(a(30)),f=r(a(65)),p=r(a(36)),m=r(a(37)),h=r(a(88)),v=r(a(55)),y=r(a(56)),g=r(a(51)),_=r(a(49)),E=(r(a(66)),r(a(26))),b=a(14),S=r(a(105)),O=a(72);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var A=(o=function(e){(0,v.default)(o,e);var t,a,r=C(o);function o(){var e;(0,p.default)(this,o);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a)),(0,f.default)(e,"ruleCount",c,(0,h.default)(e)),(0,f.default)(e,"builtinRuleCount",i,(0,h.default)(e)),e.module="alerts",e.getAlertPath=function(){return"globalalerts"},e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/").concat(e.getAlertPath(t)).concat(t.dryRun?"?dryRun=All":"")},e.getResourceUrl=e.getListUrl,e.getFilterParams=function(e){var t=T({},e),a=[];return t["labels.severity"]&&(a.push("severity=".concat(t["labels.severity"])),delete t["labels.severity"]),t["labels.alertname"]&&(a.push("alertname~".concat(t["labels.alertname"])),delete t["labels.alertname"]),t.cluster&&(t.label_matcher='{cluster=~"'.concat(t.cluster,'"}'),delete t.cluster),a.length>0&&(t.label_filters=a.join(",")),t},e}return(0,m.default)(o,[{key:"getPath",value:function(){return""}},{key:"fetchList",value:(a=(0,s.default)(n.default.mark((function e(){var t,a,r,o,c,i,s,d,f,p,m,h,v,y=this,g=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},a=t.cluster,r=t.workspace,o=t.namespace,c=t.more,i=t.ruleName,s=t.type,d=t.allBuiltin,f=void 0!==d&&d,p=(0,l.default)(t,["cluster","workspace","namespace","more","ruleName","type","allBuiltin"]),this.list.isLoading=!0,p.sortBy||void 0!==p.ascending||(p.sortBy=O.LIST_DEFAULT_ORDER[this.module]||"createTime"),p.limit!==1/0&&-1!==p.limit||(p.limit=-1,p.page=1),p.cluster=a,p.limit=p.limit||10,e.next=8,request.get(this.getResourceUrl({cluster:a,workspace:r,namespace:o,ruleName:i,type:s}),this.getFilterParams(T(T({},p),{},{builtin:f?void 0:"builtin"===s})));case 8:return m=e.sent,h=((0,E.default)(m,"items")||[]).map((function(e,t){return T({cluster:a,namespace:o,id:t},y.mapper(e))})),v=m.totalItems,this.list.update(T(T({data:c?[].concat((0,u.default)(this.list.data),(0,u.default)(h)):h,total:v},p),{},{limit:Number(p.limit)||10,page:Number(p.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchCount",value:(t=(0,s.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([request.get(this.getResourceUrl({}),{page:1,limit:1,builtin:!1}),request.get(this.getResourceUrl({type:"builtin"}),{page:1,limit:1,builtin:!0})]);case 2:t=e.sent,this.ruleCount=(0,E.default)(t,"0.totalItems",0),this.builtinRuleCount=(0,E.default)(t,"1.totalItems",0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"proxy-api/proxy/alerting.kubesphere.io/v2beta1/"}},{key:"mapper",get:function(){return S.default.alarmMessage||function(e){return e}}}]),o}(r(a(68)).default),c=(0,_.default)(o.prototype,"ruleCount",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=(0,_.default)(o.prototype,"builtinRuleCount",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),(0,_.default)(o.prototype,"fetchList",[b.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchList"),o.prototype),(0,_.default)(o.prototype,"fetchCount",[b.action],Object.getOwnPropertyDescriptor(o.prototype,"fetchCount"),o.prototype),o);t.default=A},1424:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u=n(r(36)),l=n(r(37)),o=n(r(55)),c=n(r(56)),i=n(r(51)),s=n(r(0)),d=r(14),f=r(239),p=n(r(63)),m=n(r(450)),h=n(r(861)),v=n(r(857)),y=n(r(468)),g=n(r(849)),_=n(r(1071)),E=n(r(1824)),b=n(r(1221)),S=n(r(1827)),O=n(r(944)),R=n(r(4244));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var C=function(e){(0,o.default)(r,e);var a=T(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=t.store.detail,a=e.cluster,r=e.namespace,n=e.name;if("deployments"===t.module){var u=t.store.detail.annotations,l={cluster:a,namespace:r,name:(void 0===u?{}:u)["kubesphere.io/relatedHPA"]||n};t.hpaStore.checkName(l).then((function(e){e.exist&&t.hpaStore.fetchDetail(l)}))}},t.handleScale=function(e){var a=t.store.detail,r=a.cluster,n=a.namespace,u=a.name;t.store.scale({cluster:r,namespace:n,name:u},e)},t.handleDeleteHpa=function(){t.store.patch(t.store.detail,{metadata:{annotations:{"kubesphere.io/relatedHPA":null}}}).then((function(){t.hpaStore.reset()}))},t.hpaStore=e.hpaStore||new y.default,t.state={},t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?s.default.createElement(O.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"renderS2IBuilder",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace,r=this.store.detail;return(0,p.default)((0,d.toJS)(r.builderNames))?null:s.default.createElement(S.default,{builderNames:(0,d.toJS)(r.builderNames),cluster:t,namespace:a,className:R.default.deployment_codeResource})}},{key:"renderReplicaInfo",value:function(){var e=(0,d.toJS)(this.store.detail);return s.default.createElement(b.default,{module:this.module,detail:e,onScale:this.handleScale,enableScale:this.enableScaleReplica})}},{key:"renderHpaConfig",value:function(){var e=(0,d.toJS)(this.hpaStore.detail);return e.name?s.default.createElement(E.default,{store:this.hpaStore,detail:e,loading:this.hpaStore.isLoading,onDeleted:this.handleDeleteHpa,enableCancaleHPA:this.enableCancaleHPA}):null}},{key:"renderContainerPorts",value:function(){if(this.props.noPorts)return null;var e=this.store.isLoading,t=(0,d.toJS)(this.store.detail).containers;t=(0,v.default)(t)?[]:t;var a=(0,h.default)((0,m.default)(t.map((function(e){return(0,p.default)(e.ports)?[]:e.ports}))),"name");return(0,p.default)(a)?null:s.default.createElement(_.default,{ports:a,loading:e})}},{key:"renderPods",value:function(){return s.default.createElement(g.default,{prefix:this.prefix,detail:this.store.detail})}},{key:"renderContent",value:function(){return s.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderHpaConfig(),this.renderContainerPorts(),this.renderS2IBuilder(),this.renderPods())}},{key:"render",value:function(){return s.default.createElement("div",{className:R.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"prefix",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e)}},{key:"volumesTitle",get:function(){return t("STORAGE_DEVICES")}},{key:"enableScaleReplica",get:function(){return!1}},{key:"enableCancaleHPA",get:function(){return!1}}]),r}(s.default.Component),A=(0,f.inject)("detailStore","hpaStore")((0,f.observer)(C));a.default=A;var P=C;a.Component=P},1425:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(29),a(9),a(4),a(22),a(23),a(17),a(38),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(29),a(42),a(9),a(4),a(22),a(23),a(57),a(17),a(38),a(32);var n=r(a(43));a(41);var u,l=r(a(44)),o=r(a(36)),c=r(a(37)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(49)),p=a(14),m=r(a(26));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=(u=function(e){(0,i.default)(u,e);var t,a,r=h(u);function u(){var e;(0,o.default)(this,u);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).getRulePath=function(){return"globalrulegroups"},e.getListUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(e.apiVersion).concat(e.getPath(t),"/").concat(e.getRulePath(t))},e.fetchMetric=function(){var e=(0,l.default)(n.default.mark((function e(t){var a,r,u,l,o,c,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.expr,r=t.step,u=t.start,l=t.end,o=t.cluster,c=t.namespace,a){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,request.get("kapis/monitoring.kubesphere.io/v1beta1/targets/query",{cluster:o,namespace:c,expr:a,step:r,start:u,end:l},null,(function(){}));case 5:return i=e.sent,e.abrupt("return",(0,m.default)(i,"data.result",[]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return(0,c.default)(u,[{key:"fetchCount",value:(a=(0,l.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([request.get(this.getResourceUrl(),{page:1,limit:1,builtin:!1}),request.get(this.getResourceUrl({type:"builtin"}),{page:1,limit:1,builtin:!0})]);case 2:t=e.sent,this.ruleCount=(0,m.default)(t,"0.totalItems",0),this.builtinRuleCount=(0,m.default)(t,"1.totalItems",0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchMetadata",value:(t=(0,l.default)(n.default.mark((function e(t){var a,r,u,l;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.namespace,e.next=3,request.get("kapis/monitoring.kubesphere.io/v1beta1/targets/metadata",{cluster:a,namespace:r});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={data:[]};case 6:u=e.t0,l=u.data,this.targetsMetadata=l||[];case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),u}(r(a(1014)).default),(0,f.default)(u.prototype,"fetchCount",[p.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchCount"),u.prototype),(0,f.default)(u.prototype,"fetchMetadata",[p.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchMetadata"),u.prototype),u);t.default=v},1860:function(e,t,a){"use strict";a(15),Object.defineProperty(t,"__esModule",{value:!0}),t.CLUSTER_CREATING_STEPS=void 0;t.CLUSTER_CREATING_STEPS=["Init Nodes","Pull Images","Init etcd Cluster","Init Control Plane","Join Nodes","Install Addons"]},1861:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(16),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(58)),u=r(a(30)),l=r(a(36)),o=r(a(37)),c=r(a(332)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(135)),p=r(a(74)),m=r(a(26)),h=r(a(68));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _={es:{logstashFormat:!0,timeKey:"@timestamp",logstashPrefix:"ks-logstash-log"}},E={apiVersion:"logging.kubesphere.io/v1alpha2",kind:"Output",metadata:{name:"os",namespace:"kubesphere-logging-system"},spec:{matchRegex:"(?:kube|service).(.*)",opensearch:{httpPassword:{valueFrom:{secretKeyRef:{key:"password"}}},httpUser:{valueFrom:{secretKeyRef:{key:"user"}}},logstashFormat:!0,logstashPrefix:"ks-logstash-log",suppressTypeName:!0,timeKey:"@timestamp",tls:{verify:!1}}}},b="kubesphere-logging-system",S={logging:"kube.*",events:"kube_events",auditing:"kube_auditing"},O=function(e){(0,i.default)(a,e);var t=g(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).module="outputs",e.getDetailUrl=function(t){var a=t.name,r=t.cluster;return"".concat(e.getListUrl({namespace:b,cluster:r}),"/").concat(a)},e}return(0,o.default)(a,[{key:"fetch",value:function(e){this.fetchListByK8s(y({namespace:b},e))}},{key:"create",value:function(e){var t=e.Name,r=e.enabled,l=void 0===r||r,o=e.cluster,i=e.component,s=(0,n.default)(e,["Name","enabled","cluster","component"]),h={};if("os"===t){var v=s.httpPassword,g=s.httpUser,O=(0,n.default)(s,["httpPassword","httpUser"]),R=(0,f.default)(E),T=(0,m.default)(R,"spec.opensearch");(0,p.default)(R,"metadata.name","".concat(t,"-").concat(i)),(0,p.default)(R,"spec.opensearch",y(y({},T),O)),(0,p.default)(R,"spec.opensearch.httpPassword.valueFrom.secretKeyRef.name",v),(0,p.default)(R,"spec.opensearch.httpUser.valueFrom.secretKeyRef.name",g),(0,p.default)(R,"metadata.labels",{"logging.kubesphere.io/enabled":"".concat(l),"logging.kubesphere.io/component":i}),h=y({},R)}else h={apiVersion:"logging.kubesphere.io/v1alpha2",kind:"Output",metadata:{name:"".concat(t,"-").concat(i),namespace:b,labels:{"logging.kubesphere.io/enabled":"".concat(l),"logging.kubesphere.io/component":i}},spec:(0,u.default)({match:S[i]},t,y(y({},_[t]),s))};return(0,c.default)((0,d.default)(a.prototype),"create",this).call(this,h,{cluster:o,namespace:b})}},{key:"apiVersion",get:function(){return"apis/logging.kubesphere.io/v1alpha2"}}]),a}(h.default);t.default=O},1862:function(e,a,r){"use strict";r(15);var n=r(20);r(5),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(5);var u=n(r(26)),l=r(1815),o=r(1816),c=r(4211),i=n(r(1370)),s=n(r(1371)),d=n(r(4212)),f=function(e){return"".concat((0,u.default)(e,"Host"),":").concat((0,u.default)(e,"Port"))},p={es:{ICON:l.ReactComponent,title:"Elasticsearch",pathGetter:f,Form:i.default,get description(){return t("ES_DESC")}},kafka:{ICON:o.ReactComponent,title:"Kafka",pathGetter:function(e){return(0,u.default)(e,"Brokers")},Form:s.default,get description(){return t("KAFKA_DESC")}},forward:{ICON:c.ReactComponent,title:"Fluentd",pathGetter:f,Form:d.default,get description(){return t("FLUENTD_DESC")}}};a.default=p},1863:function(e,t,a){e.exports={header:"_3fN1DIKsY61yKUDamGO-PZ",search:"_2G_N6miJXVAItbeVrBbv7d",actions:"_1O7iMkJ995m0kA4DY8XkeL",item:"_16vhCHU8SiT_KTKIJhABZ6",content:"hKAZxUjivcQQ-3FsAugUp",head:"_1x6_1s5F4KJ51OnnKSHBXt",headIcon:"_16LYj-u7fNuoyGgI9OjUDn",lightIcon:"_2y6J_KXoMKhDVUYuRXWMSE",headLine:"A0ozACJubuR2dEs_5EoZO",severity:"_337e_t5MdYOZP1fnzkHZ9x",statusLine:"_2U0_RpHhT1nmQ22iQjJBND",target:"TPjFcwbF6YRHapLkdLl1j",timeLabel:"_3VLYD7n87cRkH_L9svzkV0",time:"_2AgmNK5lBzX2TjTJVmyZV8",time_white:"_3Mk1_PK9Xcf3lRxlguJQDA",title:"_23RaL0GKi7fvFfWyWWwtt_",desc:"_20Rv6RcXiGVJIOdYebHc1H",expanded:"_2KevSgC8LoZ0k5eZBiaA1K",itemExtra:"KFwaKZvuJwCglg_MpBEdR",ms_content:"_3Axl8_XLhtt8tmCT842qWN",ruleExpr:"_2O-qksVfNCVBlAxgRVyeE2",label:"_30RnAP4E1F64plJ20-nS9Y",value:"_2Kf7ukbonkpMtKQGe8iwy2",itemExtraShow:"lO1x2nEYsOZDpzvfBTwIy",status_disabled:"r598CCXKfmjg-qIPdATjm",status_pending:"_2UrMr6grcHMm15C1qNWzgG",status_firing:"_1r3TOrVRFkTySGzRiwPDm_",status_inactive:"Xt0k6VAV-Bo33UKrlDf66",info_disabled:"_3W0mfEKRFKICi7QzNvf5oD",info_pending:"_2A3fshd_7y_lEMM3JqPNwB",info_firing:"_1763Qf8M2gW51V6gdAUye_",info_inactive:"GEXfXEWBc3PVqG6EOlQk",critical:"ZOZff2qAt-iyOLEq4VGVv",error:"_3trWbeCgkrw_uoKy5W6_Ia",footer:"_1Bh7is-9PCZO4WOJVl1CML",pageSizeBox:"_1vVgYqdBGWdVWLv84H2AFA",pagesize:"_1wM8pTX_8hKAFHWNiaDZ28",text:"_1ozeqyMEMVlkqEbqAGoxjs",gap:"_2uKPoNKtaeb_GyuW9MNuTR",pageSizeMenu:"_1yLXJvKXZXrU34yZjMo6HF",pageSizeMenuitem:"_26H4S0GdVoVY6J41RHYypk"}},1864:function(e,t,a){e.exports={container:"_2-O41THR_UmekO3zT6ab6Q"}},1865:function(e,a,r){"use strict";r(15),r(5),r(18),r(48),Object.defineProperty(a,"__esModule",{value:!0}),a.getDateStr=a.getTimeOptions=a.getTimeLabel=a.getLastTimeStr=a.getTimeStr=a.getTimes=a.getStep=a.getMinutes=void 0,r(5),r(18),r(48),r(436),r(319);var n=r(52),u=function(e){var t=e.slice(-1),a=parseFloat(e);switch(t){default:case"s":return a/60;case"m":return a;case"h":return 60*a;case"d":return 24*a*60}};a.getMinutes=u;a.getStep=function(e,t){return"".concat(parseInt(u(e)/t,10),"m")};a.getTimes=function(e,t){return Math.floor(u(e)/u(t))};var l=function(e){var t=Math.round(parseFloat(e)/60);return t<60?"".concat(t,"m"):(t=Math.round(t/60))<24?"".concat(t,"h"):"".concat(Math.round(t/24),"d")};a.getTimeStr=l;a.getLastTimeStr=function(e,t){var a=e.slice(-1),r="".concat(parseFloat(e)*t).concat(a),n=60*u(r);return l(n)};var o=function(e){var a=e.slice(-1).toUpperCase();return t("TIME_".concat(a),{num:parseInt(e,10)})};a.getTimeLabel=o;a.getTimeOptions=function(e){return e.map((function(e){return{label:o(e),value:e}}))};a.getDateStr=function(e){var a=(0,n.getLocalTime)(1e3*e);return"".concat(a.format(t("MMMM Do YYYY"))," ").concat(a.format("HH:mm:ss"))}},1866:function(e,t,a){e.exports={main:"_3H-RlkgvJI4dKJiHBRIk8i",header:"_1m0MQ-nrfakmRRBb_oV_kZ",search:"_3_39HriwKNoiBODqOB4yz6",actions:"_2IqSkmpBePuYSDPH_vvdw-",body:"_3Epkr1hyGbLynHLsz-YSEu",footer:"_1qFuSdISw-VRKpT5WghZi6",item:"_2NhDaotioiaIlzFnCHAzSu",expanded:"_3icTviSZ1SyKp0qVvI9CaV",arrow:"_3uu_pk1SGRVjpdey5QrQEX",itemMain:"a9BSo8cLXxvPLHguGrCRI",content:"mJcm7zELY6yg0u6yXriSl",text:"_1n6DcCeN_BPIxFhBKR1ddu",monitors:"_31VEoD-3pAigTnxZmHrcag",itemExtra:"x7f8Z1jGcy1UsIdxCBhi-",icon:"_1yrmMua2TXZVX28ZaQVVkE",indicator:"_3GJoKCAjHHIDaACb9iPYY0",statusTip:"_2DA6RPTgf8hsNdW5Kpdjy4",charts:"_1tD2SKFUE5Ng4wPFZzuOJT",podip:"_2PxRzwJkxb8FkAaaBO3RXN",ipTip:"_3El55XKsNHJFtvP2VXTqVr",containers:"_1L-dk676QLbuqz0nCXc8EF",loading:"_2XZMfeoXr8P6uc598NL1Uh",empty:"_3UCvb0-0HrzGJyku0a_FpU",cluster:"_1eR9OuwMZVpn9tFFbx6jbd"}},1869:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(96)),o=n(r(0)),c=u(r(787)),i=r(186),s=u(r(1789)),d=r(14),f=u(r(4341));var p=function(e){var a=e.visible,r=e.onCancel,n=e.onOk,u=e.clusters,p=void 0===u?[]:u,m=(0,o.useState)((0,d.toJS)(p)),h=(0,l.default)(m,2),v=h[0],y=h[1],g=(0,o.useState)(!1),_=(0,l.default)(g,2),E=_[0],b=_[1];(0,o.useEffect)((function(){a&&y((0,d.toJS)(p))}),[a,p]);var S=(0,o.useCallback)((function(e){y(e),e.length>=1?b(!1):b(!0)}),[]),O=(0,o.useCallback)((function(){r&&r(),b(!1)}),[]),R=(0,o.useCallback)((function(){v.length>0?(b(!1),n&&n(v)):b(!0),r&&r()}),[v]);return o.default.createElement(c.default,{bodyClassName:f.default.body,width:960,title:t("SELECT_CLUSTER"),visible:a,onCancel:O,onOk:R,icon:"layout"},o.default.createElement("div",{className:f.default.content},o.default.createElement(i.Alert,{className:"margin-b12",type:"info",message:t("CUSTOM_PANEL_DESC")}),o.default.createElement("div",{className:"margin-b12 font-bold"},t("AVAILABLE_CLUSTERS")),o.default.createElement(s.default,{onChange:S,value:v,noTip:!0}),E&&o.default.createElement("div",{className:"form-item-error"},t("CLUSTER_SETTINGS_LIMIT_DESC"))))};a.default=p},1870:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(98),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(30)),l=n(r(96));r(18),r(98);var o=n(r(0)),c=r(186),i=n(r(3)),s=n(r(4367)),d=function(e){var a=e.rulesStats,r={pending:t("ALERT_RULE_PENDING"),inactive:t("ALERT_RULE_INACTIVE"),firing:t("ALERT_RULE_FIRING"),disabled:t("DISABLED")},n=Object.entries(a).map((function(e){var t=(0,l.default)(e,2),a=t[0],n=t[1];return{label:r[a],type:a,value:n}}));return o.default.createElement(c.Tooltip,{content:o.default.createElement(o.default.Fragment,null,n.map((function(e,t){return o.default.createElement("div",{key:t,className:(0,i.default)(s.default.tipContent,[s.default[e.type]],(0,u.default)({},s.default.disabled,0===e.value))},o.default.createElement("span",null,e.label),o.default.createElement("span",null,e.value))}))),placement:"right"},o.default.createElement("ul",{className:s.default.statusBox},n.map((function(e,t){return o.default.createElement("li",{key:t,className:(0,i.default)([s.default["li-".concat(e.type)]],(0,u.default)({},s.default.iconDisabled,0===e.value))},e.value)}))))};a.default=d},1871:function(e,t,a){e.exports={wrapper:"iR7z8tJFaP322Wc5KeDXb",header:"_29LpL3cAnNHFPC0QkN3aCv",banner:"fPeXkXTxxB1IC1fgzgd9p",toolbar:"_3cR_xKcJcZV23U5wcIVG2I",keyword:"_16-UWZO6ab_kyXGqHwXl_V",loading:"oHMbjUURgfU1mYC0irDSP",bottomLine:"_7Lz-bsDzy_cKaSVAY_Jns","table-icon":"_34pw7-udbWc2haW_N6e1dl",status_icon:"_2voC3AqrlwQba0xWa0dnS_",clusterLine:"_1SKGh_tOiQrVmEoee8R741",tags:"_2RpQEmzg6JNUc46zD-KZv5",restText:"_2nd0DFNMLP-ybsS2ZIj_NO",tipClusterList:"_3r_Fs6g9pp-H0F6pNxyJ-_"}},1872:function(e,t,a){e.exports={ruleNameLink:"_3GZ-gTFaIZsY-qzdTxG_UI",status:"_2z9oV0u7EuV6V4dhmfXBsO",tags:"-VgRWR6LLQQYj6FzYof7C","alarm-message-cluster":"_39rAQBZYK1N-duk1XF-_NL"}},1873:function(e,t,a){e.exports={header:"fhUtQTxnilo9gBr2IcT-2",search:"_728dXf7uTB9FdJW_V_WaP",actions:"an1t00SmyKe-vS4BpS6_0",item:"_1Hz3OI34P5qnQiBbapfMpB",content:"_381W6QXu9h1_6QYamtsbBS",head:"f9M-CfL0U6eK5E5pdoGgA",headIcon:"_2Faxb0Vk3vkXhYKs5AXVs1",headLine:"_1yb4J5NJQTIkCS8UsIaMVS",severity:"_3QJ9FneD91WpgZPf3kcYiO",statusLine:"nh8EOyr8oF651_lyfNL2G",target:"_3shn5IkhFBJCDJWySo0xJ3",nodeList:"CGFPuHjoQutwQMvEsqfzc",restItem:"L3XDlvBeiLPVDEO-Gu2m0",template_deploy:"_3DXlcDZyGEgi5sjWFrlXZj",title:"a03ABUahEVAwl5inEIb3t",deploy_des:"XR0PjKVFhR90dTzN-5mQ2",timeLabel:"_1u55t5wedzNS6JbN19enOY",time:"XwbH4jF2oAvUm_xLqkfBw",time_white:"_3mODPcV0z922LUsk9XUAc4",desc:"_1PmGV4G_fUY9ccnKzYFxfx",expanded:"_1dGxBbBrzG7rj3-tYqDXao",itemExtra:"_3SrCA_14EJSEBLrZLUxPD7",ms_content:"NxZ49dslvIBCz2MLE_2ZX",ruleExpr:"_23lcdXrJ22e7J2uPBzvhMz",label:"f74U3QB_c8-mN9-CMIwXX",value:"NOAjeS2RtYYJgLcBkAXQH",itemExtraShow:"wqrEaSI5BUGIhDdkyQ-lK",status_disabled:"_3RbroljQEJSO4KmszOV6gP",status_pending:"_1kR21vIlSnYYlBkn5OhyCp",status_firing:"_1gQvXy-t0jYe9FROVUowIl",status_inactive:"_1waYdxnNMpONaOkYAdjpsk",info_disabled:"_1_vLrlPqVftE6GLp-T3xbz",info_pending:"_2YYvtqr3oqX9Go0YEIgkau",info_firing:"_4VHYcQ6wxQXUfDiQyjbi4",info_inactive:"_2qAsiynshjSs4ONsekI_MV",critical:"_3C-14a9q1Z3eE5AXgICqOG",error:"_37MoA3DU6LypWFTKbY9ks3",footer:"_1uEAX5_Ttli1isHHVEWVvZ",pageSizeBox:"_1Fs1dPNmzKb7oGoZSgMf-j",pagesize:"_3pOc4cTQfHpakvmgl7jfTR",text:"_3p0pnoBlQxwjKgMZ0ooSWJ",gap:"_1e-TO3WC2h1_Im16Kd4adi",pageSizeMenu:"_2P0jP-5fAUAtiIScoxfdQQ",pageSizeMenuitem:"_1ptY6Zr2qxFDhx3P6WOEvC"}},4087:function(e,t,a){"use strict";a(15);var r=a(20);a(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.METRICS_PATH=t.PATH=void 0,a(5);var n=r(a(61)),u=a(317),l=r(a(4088)),o=r(a(4090)),c=r(a(4094)),i=r(a(4095)),s=r(a(4122)),d=r(a(4154)),f=r(a(4155)),p=r(a(4160)),m=r(a(4161)),h=r(a(4167)),v=r(a(4169)),y=r(a(4171)),g=r(a(4172)),_=r(a(4173)),E=r(a(4174)),b=r(a(4175)),S=r(a(4176)),O=r(a(4177)),R=r(a(4178)),T=r(a(4180)),C=r(a(4181)),A=r(a(4196)),P=r(a(4210)),k=r(a(4215)),N=r(a(4216)),D=r(a(4217)),w=r(a(4325)),L=r(a(4331)),I=r(a(4333)),M=r(a(4342)),j=r(a(4366)),x=r(a(4368)),U=r(a(4369)),V=r(a(4370)),G=r(a(4371)),F=r(a(4376)),Y="/whizard-telemetry/:cluster";t.PATH=Y;var H="/whizard-telemetry/metrics";t.METRICS_PATH=H;var B=[(0,u.getIndexRoute)({path:"/whizard-telemetry",to:"/whizard-telemetry/metrics/overview",exact:!0}),{path:["".concat(H,"/alerting/builtin-rules/:name"),"".concat(H,"/alerting/custom-rules/:name")],component:F.default},{path:H,component:L.default,routes:[{path:"".concat(H,"/overview"),component:M.default},{path:"".concat(H,"/ranking"),component:I.default},{path:"".concat(H,"/alerting/builtin-alerts"),component:V.default},{path:"".concat(H,"/alerting/custom-alerts"),component:U.default},{path:"".concat(H,"/alerting/builtin-rules"),component:x.default},{path:"".concat(H,"/alerting/custom-rules"),component:j.default},{path:"".concat(H,"/pods"),component:G.default},(0,u.getIndexRoute)({path:H,to:"".concat(H,"/overview"),exact:!0}),(0,u.getIndexRoute)({path:"".concat(H,"/alerting"),to:"".concat(H,"/alerting/builtin-alerts"),exact:!0}),(0,u.getIndexRoute)({path:"*",to:"/404",exact:!0})]},{path:Y,component:c.default,routes:[].concat((0,n.default)(D.default),[{path:"",component:i.default,routes:[{path:"".concat(Y,"/overview"),component:s.default,exact:!0},{path:"".concat(Y,"/nodes"),component:h.default},{path:"".concat(Y,"/edgenodes"),component:v.default,exact:!0},{path:"".concat(Y,"/projects"),component:y.default,exact:!0},{path:"".concat(Y,"/customresources"),component:g.default,exact:!0},{path:"".concat(Y,"/deployments"),component:_.default,exact:!0},{path:"".concat(Y,"/statefulsets"),component:E.default,exact:!0},{path:"".concat(Y,"/daemonsets"),component:b.default,exact:!0},{path:"".concat(Y,"/jobs"),component:S.default,exact:!0},{path:"".concat(Y,"/cronjobs"),component:O.default,exact:!0},{path:"".concat(Y,"/pods"),component:R.default,exact:!0},{path:"".concat(Y,"/services"),component:T.default,exact:!0},{path:"".concat(Y,"/ingresses"),component:N.default,exact:!0},{path:"".concat(Y,"/storageclasses"),component:d.default,exact:!0},{path:"".concat(Y,"/volumes"),component:m.default},{path:"".concat(Y,"/volume-snapshots"),component:f.default},{path:"".concat(Y,"/volume-snapshot-classes"),component:p.default},{path:"".concat(Y,"/monitor-cluster"),component:C.default},{path:"".concat(Y,"/monitor-resource"),component:A.default},{path:"".concat(Y,"/alerts"),component:l.default},{path:"".concat(Y,"/alert-rules"),component:o.default},{path:"".concat(Y,"/storageclasses"),component:d.default,exact:!0},{path:"".concat(Y,"/snapshots/:namespace?"),component:f.default},{path:"".concat(Y,"/log-collections/:component"),component:P.default},{path:"".concat(Y,"/custom-monitoring"),component:k.default,exact:!0},{path:"".concat(Y,"/gateways/:component"),component:w.default,exact:!0},(0,u.getIndexRoute)({path:Y,to:"".concat(Y,"/overview"),exact:!0}),(0,u.getIndexRoute)({path:"".concat(Y,"/workloads"),to:"".concat(Y,"/deployments"),exact:!0}),(0,u.getIndexRoute)({path:"".concat(Y,"/log-collections"),to:"".concat(Y,"/log-collections/logging"),exact:!0}),(0,u.getIndexRoute)({path:"".concat(Y,"/gateways"),to:"".concat(Y,"/gateways/cluster"),exact:!0}),(0,u.getIndexRoute)({path:"*",to:"/404",exact:!0})]}])}];t.default=B},4088:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var l,o=n(r(315)),c=n(r(30)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(451)),v=n(r(26)),y=r(433),g=n(r(790)),_=n(r(795)),E=n(r(880)),b=n(r(792)),S=u(r(793)),O=n(r(796)),R=r(52),T=r(72),C=r(878),A=r(1269),P=n(r(1128)),k=n(r(4089));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var L=(0,S.default)({store:new P.default,module:"alerts",name:"ALERTING_MESSAGE"})(l=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=function(t){e.props.store.fetchList(D(D(D({},e.props.match.params),t),{},{sortBy:"activeAt",ascending:!1,type:e.state.type}))},e.getResourceType=function(e){var a=(0,h.default)(e);return t("ALERT_TYPE",{type:t(a)})},e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("MESSAGE"),dataIndex:"name",render:function(e,t){return m.default.createElement(g.default,{icon:"loudspeaker",title:(0,v.default)(t,"annotations.summary"),description:(0,v.default)(t,"annotations.message")||(0,v.default)(t,"annotations.description","-")})}},{title:t("STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:a("state"),isHideable:!0,search:!0,width:"12%",render:function(e){return m.default.createElement(_.default,{type:e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:a("labels.severity"),isHideable:!0,search:!0,width:"12%",render:function(e){return m.default.createElement(E.default,{data:e})}},{title:t("ALERTING_RULE_NAME"),dataIndex:"labels.alertname",filteredValue:a("labels.alertname"),isHideable:!0,width:"16%",search:!0,render:function(e,t){return t.alertname}},{title:t("ALERTING_POLICY"),dataIndex:"ruleName",isHideable:!0,width:"12%",render:function(t,a){var r=(0,v.default)(a,"labels.rule_group");return m.default.createElement(y.Link,{to:"builtin"===e.state.type?"".concat(e.getPrefix(),"/alert-rules/builtin/").concat(r):"".concat(e.getPrefix(),"/alert-rules/").concat(r)},r)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"12%",render:function(a){if("template"!==a.rule_type)return"-";var r=(0,C.getAlertingResource)(a),n=r.module,u=r.name,l=r.namespace;return n?"hpas"===n?m.default.createElement("span",null,t(T.MODULE_KIND_MAP[n]),": ",u):m.default.createElement(y.Link,{to:"".concat(e.getPrefix({namespace:l}),"/").concat(n,"/").concat(u)},t(T.MODULE_KIND_MAP[n]),": ",u):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t})}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,u=r.namespace,l=r.workspace;return t=t||n,a=a||u,"".concat(l?"/".concat(l):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"getTableProps",value:function(){return{tableActions:D(D({},this.props.tableProps.tableActions),{},{selectActions:[]}),emptyProps:{desc:t("ALERTING_MESSAGE_EMPTY_DESC")}}}},{key:"getAlertingTypes",value:function(){return A.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getStatus",value:function(){return["pending","firing"].map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"render",value:function(){var e=this.props,a=e.match,r=e.bannerProps,n=e.tableProps,u=a.params.namespace;return m.default.createElement(S.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(b.default,(0,o.default)({},r,{tips:this.tips,tabs:u?{}:this.tabs,icon:"loudspeaker",title:t("ALERTING_MESSAGE_PL"),description:t("ALERT_MESSAGE_DESC")})),m.default.createElement("div",{className:k.default.wrapper},m.default.createElement(O.default,(0,o.default)({},n,this.getTableProps(),{rowKey:"id",itemActions:[],columns:this.getColumns(),onCreate:this.showCreate,showKeywords:!0}))))}},{key:"tabs",get:function(){return{value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("ALERTS_FROM_CUSTOM_POLICIES"),count:this.props.store.ruleCount},{value:"builtin",label:t("ALERTS_FROM_BUILT_IN_POLICIES"),count:this.props.store.builtinRuleCount}]}}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_TRIGGER_AN_ALARM_Q"),description:t("REQUESTS_FOR_TRIGGER_AN_ALARM_A")}]}}]),r}(m.default.Component))||l;a.default=L},4089:function(e,t,a){e.exports={wrapper:"_3AxpII2xzsS_1Bqn3Ao6-v"}},4090:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(109),r(5),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(188),r(7);var l=n(r(315)),o=n(r(43)),c=n(r(30)),i=n(r(58));r(41);var s,d=n(r(44)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(0)),g=n(r(788)),_=n(r(795)),E=n(r(792)),b=u(r(793)),S=n(r(796)),O=n(r(26)),R=r(52),T=r(878),C=r(832),A=n(r(1014)),P=n(r(4091)),k=n(r(4093));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var L=(0,b.default)({store:new A.default,module:"rules",authKey:"rulegroups",name:"ALERTING_POLICY"})(s=function(e){(0,m.default)(r,e);var a=w(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=(0,d.default)(o.default.mark((function t(){var a,r,n,u,l=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=a.silent,n=(0,i.default)(a,["silent"]),u=e.props.store,r&&(u.list.silent=!0),t.next=5,u.fetchList(D(D(D({},e.props.match.params),n),{},{type:e.state.type}));case 5:u.list.silent=!1;case 6:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",search:!0,render:function(t,a){return y.default.createElement(g.default,{avatar:"/assets/bell_gear_duotone.svg",title:(0,R.getDisplayName)(a),desc:a.description,className:k.default["table-icon"],to:"builtin"===e.state.type?"".concat(e.props.match.url,"/builtin/").concat(a.name):"".concat(e.props.match.url,"/").concat(t)})}},{title:t("POLICY_STATUS"),dataIndex:"enable",filters:e.getEnableFilter(),filteredValue:a("enable"),isHideable:!0,search:!0,width:"16%",render:function(e,a){return y.default.createElement(_.default,{className:k.default.status_icon,type:a.enabled&&JSON.parse(a.enabled)?"active":"disabled",name:a.enabled&&JSON.parse(a.enabled)?t("ENABLED"):t("DISABLED")})}},{title:t("RULE_STATUS"),dataIndex:"state",search:!0,filters:e.getStatus(),isHideable:!0,width:"16%",render:function(e,t){return y.default.createElement(P.default,{rulesStats:t.rulesStats})}},{title:t("TIME_SPENT"),dataIndex:"evaluationTime",isHideable:!0,width:"12%",render:function(e){return y.default.createElement("span",null,"-"!==e?t("TIME_S",{num:e}):e)}},{title:t("RECENT_DETECT_TIME"),dataIndex:"lastEvaluation",isHideable:!0,width:"15.8%",render:function(e,t){var a=(0,O.default)(t._originDataWithStatus,"status.lastEvaluation");return y.default.createElement("span",null,a?(0,R.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-")}}]},e}return(0,p.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t}),localStorage.removeItem("alert-policy-detail-referrer")}},{key:"getStatus",value:function(){return T.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getEnableFilter",value:function(){return[{text:t("ENABLED"),value:"true"},{text:t("DISABLED"),value:"false"}]}},{key:"getAlertingTypes",value:function(){return C.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match.params.namespace;return y.default.createElement(b.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),y.default.createElement(E.default,(0,l.default)({},t,{icon:function(){return y.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"})},tips:this.tips,tabs:r?{}:this.tabs})),y.default.createElement(S.default,(0,l.default)({},a,{rowKey:"name",itemActions:this.itemActions,columns:this.getColumns(),tableActions:this.tableActions})))}},{key:"tabs",get:function(){return{value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("CUSTOM_POLICIES"),count:this.props.store.ruleCount},{value:"builtin",label:t("BUILT_IN_POLICIES"),count:this.props.store.builtinRuleCount}]}}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_PUSH_AN_ALARM_Q"),description:t("REQUESTS_FOR_PUSH_AN_ALARM_A")}]}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return D(D({},this.props.tableProps.tableActions),{},{selectActions:[]})}}]),r}(y.default.Component))||s;a.default=L},4091:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(98),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(30)),l=n(r(96));r(18),r(98);var o=n(r(0)),c=r(186),i=n(r(3)),s=n(r(4092)),d=function(e){var a=e.rulesStats,r={pending:t("ALERT_RULE_PENDING"),inactive:t("ALERT_RULE_INACTIVE"),firing:t("ALERT_RULE_FIRING"),disabled:t("DISABLED")},n=Object.entries(a).map((function(e){var t=(0,l.default)(e,2),a=t[0],n=t[1];return{label:r[a],type:a,value:n}}));return o.default.createElement(c.Tooltip,{content:o.default.createElement(o.default.Fragment,null,n.map((function(e,t){return o.default.createElement("div",{key:t,className:(0,i.default)(s.default.tipContent,[s.default[e.type]],(0,u.default)({},s.default.disabled,0===e.value))},o.default.createElement("span",null,e.label),o.default.createElement("span",null,e.value))}))),placement:"right"},o.default.createElement("ul",{className:s.default.statusBox},n.map((function(e,t){return o.default.createElement("li",{key:t,className:(0,i.default)([s.default["li-".concat(e.type)]],(0,u.default)({},s.default.iconDisabled,0===e.value))},e.value)}))))};a.default=d},4092:function(e,t,a){e.exports={statusBox:"JrilrMru3h-gLlQ2qXo5L",tipContent:"LGXjRE8coBN2qed9xrcZ3","li-inactive":"_1UB2-8pw3HpFXMxba6KtfJ","li-pending":"_3WRSRTKaf0pf4oVlfpPkN5","li-firing":"_3wquv-ECT8_2Yck-QHJql-","li-disabled":"_3Nx8Qb4gSzQIYfMM44aU7F",pending:"_2EfV2t8OOxNKUWMCPmyRZC",inactive:"_3jHO8HKJ72vcTJ0_DrMETF",firing:"ruM4GxqptagPyxWo4kQkz",disabled:"_1xa-4gyugq2QDwzgvTUMId",iconDisabled:"FEhNQpv-dUmXxMNhPkBXz"}},4093:function(e,t,a){e.exports={wrapper:"PHSNKYkuk4t_2mmc1BgYe",header:"_2sqZHlnHl0KFzj4x0-bNen",banner:"_3o6hGaIJItvgOdfVFlhz0d",toolbar:"vQDH3_iKTKQeHBrPBNZzC",keyword:"_1L8gK6woO4n47u6o2j94Kx",loading:"gVS_5i257kfi3aJzdQDhu",bottomLine:"_1rBLnzvn6l16W8vkCVejyu","table-icon":"_3SZ0VFWhjKP8u_SXGGFUlk",status_icon:"_2-w9clorO7bwNui1qNcuhn"}},4094:function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(11),a(6),a(29),a(9),a(13),a(10),a(4),a(22),a(23),a(24),a(17),a(38),a(62),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(29),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(38),a(62),a(7),a(32);var u=r(a(43)),l=r(a(30));a(41);var o,c=r(a(44)),i=r(a(36)),s=r(a(37)),d=r(a(55)),f=r(a(56)),p=r(a(51)),m=a(186),h=r(a(26)),v=r(a(241)),y=r(a(74)),g=a(239),_=n(a(0)),E=r(a(438)),b=a(317);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,g.inject)("rootStore")(o=(0,g.observer)(o=function(e){(0,d.default)(r,e);var t,a=R(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).state={fetchFin:!0},t.store=new E.default,t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.init(this.props.match.params)}},{key:"componentDidUpdate",value:function(e){e.match.params.cluster!==this.cluster&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,c.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store.initializing=!0,!t.cluster){e.next=10;break}return e.next=4,Promise.all([this.store.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({cluster:t.cluster})]);case 4:if(!this.store.detail.isReady){e.next=7;break}return e.next=7,this.store.fetchProjects({cluster:t.cluster});case 7:(0,y.default)(globals,"clusterConfig.".concat(t.cluster),this.store.detail.configz),""===(0,h.default)(this.store.detail.configz,"ksVersion")&&(0,y.default)(globals,"need_rebuild_observability_".concat(t.cluster,"_nav"),!0),globals.app.cacheHistory(this.props.match.url,O({type:"Cluster"},(0,v.default)(this.store.detail,["name","aliasName","group","isHost"])));case 10:this.store.initializing=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?_.default.createElement(m.Loading,{className:"ks-page-loading"}):_.default.createElement(g.Provider,{clusterStore:this.store},(0,b.renderRoutes)(this.props.route.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(_.Component))||o)||o;t.default=T},4095:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(28),a(42),a(4),a(22),a(23),a(57),a(24),a(17),a(62);var u=r(a(43));a(41);var l,o=r(a(44)),c=r(a(36)),i=r(a(37)),s=r(a(55)),d=r(a(56)),f=r(a(51)),p=r(a(1856)),m=r(a(3)),h=a(1076),v=r(a(800)),y=r(a(26)),g=r(a(242)),_=a(239),E=n(a(0)),b=a(52),S=a(317),O=r(a(4121));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,_.inject)("rootStore","clusterStore")(l=(0,_.observer)(l=function(e){(0,s.default)(a,e);var t=R(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).enterCluster=function(){var t=(0,o.default)(u.default.mark((function t(a){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.routing.push("/whizard-telemetry/".concat(a,"/overview")));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchConfigZ=(0,v.default)((0,o.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.clusterStore.fetchClusterConfigz({cluster:e.cluster});case 2:t.sent&&(globals.app.getObservabilityNavs(e.cluster),(0,g.default)(globals,"need_rebuild_observability_".concat(e.cluster,"_nav")),e.forceUpdate());case 4:case"end":return t.stop()}}),t)}))),3e3),e}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(){(0,y.default)(globals,"need_rebuild_observability_".concat(this.cluster,"_nav"),!1)&&this.fetchConfigZ()}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.route,r=e.location,n=this.props.clusterStore.detail;return E.default.createElement("div",{className:"ks-page"},E.default.createElement("div",{className:(0,m.default)("ks-page-side",O.default.pageSideWrapper)},E.default.createElement(p.default,{icon:n.icon,value:(0,b.showNameAndAlias)(this.cluster),onChange:this.enterCluster,showBack:!0,path:"/whizard-telemetry/metrics/overview"}),E.default.createElement(h.Nav,{className:"ks-page-nav",navs:globals.app.getObservabilityNavs(this.cluster),location:r,match:t,disabled:!n.isReady})),E.default.createElement("div",{className:"ks-page-main"},(0,S.renderRoutes)(a.routes)))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(E.Component))||l)||l;t.default=T},4121:function(e,t,a){e.exports={pageSideWrapper:"_31v5JwazwRuab2Vj8mCc6n"}},4122:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(239),f=r(a(4123)),p=r(a(4147));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=(0,d.inject)("clusterStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=m(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){return this.cluster.detail.isReady?s.default.createElement(f.default,{match:this.props.match}):s.default.createElement(p.default,{store:this.cluster,match:this.props.match})}},{key:"cluster",get:function(){return this.props.clusterStore}}]),a}(s.default.Component))||n)||n;t.default=h},4123:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l,o,c,i=n(r(30)),s=n(r(65)),d=n(r(36)),f=n(r(37)),p=n(r(88)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(49)),g=(n(r(66)),n(r(0))),_=r(239),E=r(186),b=n(r(801)),S=n(r(3)),O=n(r(814)),R=r(14),T=n(r(4124)),C=n(r(4126)),A=n(r(4128)),P=n(r(4130)),k=n(r(4132)),N=n(r(4138)),D=n(r(4140)),w=n(r(4142)),L=n(r(4144)),I=n(r(4145));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var j=(0,_.inject)("clusterStore")(u=(0,_.observer)((l=function(e){(0,m.default)(r,e);var a=M(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showMore:!1},(0,s.default)(e,"isExclude",o,(0,p.default)(e)),(0,s.default)(e,"rankModalVisible",c,(0,p.default)(e)),e.showRankModal=function(){e.rankModalVisible=!0},e.hideRankModal=function(){e.rankModalVisible=!1},e.showRankModal=function(){e.rankModalVisible=!0},e.hideRankModal=function(){e.rankModalVisible=!1},e.handleShowMore=function(){var t=e.state.showMore;e.setState({showMore:!t})},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.clusterStore.fetchVersion(this.props.match.params)}},{key:"render",value:function(){var e=this.props.match,a=this.clusterStore.detail,r=this.state.showMore;return this.hasMonitoring?g.default.createElement("div",null,g.default.createElement("div",{className:L.default.header},g.default.createElement("div",{className:L.default.title},t("OVERVIEW"))),g.default.createElement("div",{className:L.default.content},g.default.createElement(E.Columns,{className:L.default["margin-t0"]},g.default.createElement(E.Column,{className:"is-8"},g.default.createElement(k.default,{cluster:e.params.cluster,isExclude:this.isExclude}),g.default.createElement(D.default,{clusterDetail:a}),g.default.createElement(w.default,{cluster:e.params.cluster})),g.default.createElement(E.Column,{className:"is-4"},g.default.createElement(b.default,{className:L.default.padding12},g.default.createElement(O.default,{cluster:a,size:"large",noStatus:!0,theme:"light",className:L.default.clusterTitle}),globals.app.isMultiCluster?g.default.createElement(g.default.Fragment,null,g.default.createElement(C.default,{cluster:a,version:this.clusterStore.version}),r&&g.default.createElement(P.default,{cluster:e.params.cluster}),g.default.createElement("div",{className:(0,S.default)(L.default.showMore,(0,i.default)({},L.default.rotate,r)),onClick:this.handleShowMore},g.default.createElement(E.Icon,{name:"chevron-down",size:16}),g.default.createElement("span",null,r?t("FOLD"):t("UNFOLD")))):g.default.createElement(P.default,{cluster:e.params.cluster}),globals.app.isPlatformAdmin&&g.default.createElement(T.default,{cluster:e.params.cluster})),g.default.createElement(b.default,{className:L.default.padding12},g.default.createElement(A.default,{cluster:e.params.cluster,showRankModal:this.showRankModal}))))),g.default.createElement(I.default,{visible:this.rankModalVisible,cluster:e.params.cluster,onCancel:this.hideRankModal})):g.default.createElement("div",null,g.default.createElement("div",{className:L.default.header},g.default.createElement("div",{className:L.default.title},t("OVERVIEW"))),g.default.createElement("div",{className:L.default.content},g.default.createElement(E.Columns,{className:L.default["margin-t0"]},g.default.createElement(E.Column,{className:"is-8"},g.default.createElement(N.default,{cluster:e.params.cluster,isExclude:this.isExclude}),globals.app.isPlatformAdmin&&g.default.createElement("div",{className:L.default.toolWrapper},g.default.createElement(T.default,{cluster:e.params.cluster}))),g.default.createElement(E.Column,{className:"is-4"},g.default.createElement(b.default,{className:L.default.padding12},g.default.createElement(O.default,{cluster:a,size:"large",noStatus:!0,theme:"light",className:L.default.clusterTitle}),g.default.createElement(C.default,{cluster:a,version:this.clusterStore.version}))))))}},{key:"clusterStore",get:function(){return this.props.clusterStore}},{key:"hasMonitoring",get:function(){var e=this.props.match.params.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}}]),r}(g.default.Component),o=(0,y.default)(l.prototype,"isExclude",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,y.default)(l.prototype,"rankModalVisible",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=l))||u)||u;a.default=j},4124:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=u(r(36)),o=u(r(37)),c=u(r(55)),i=u(r(56)),s=u(r(51)),d=n(r(0)),f=u(r(789)),p=u(r(790)),m=r(453),h=u(r(4125));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleTool=function(t){window.open(t.currentTarget.dataset.url,t.currentTarget.dataset.title,e.getWindowOpts())},e}return(0,o.default)(r,[{key:"getWindowOpts",value:function(){return(0,m.createCenterWindowOpt)({width:1200,height:800,scrollbars:1,resizable:1})}},{key:"render",value:function(){var e=this.props.cluster;return d.default.createElement(f.default,{title:t("TOOLS"),className:h.default.toolContainer},d.default.createElement("div",{className:h.default.level},d.default.createElement("div",{"data-title":"KubeCtl","data-url":"/terminal/kubectl/".concat(e),onClick:this.handleTool},d.default.createElement(p.default,{icon:"terminal",title:"kubectl",description:t("KUBECTL_DESC")})),d.default.createElement("div",{"data-title":"KubeConfig","data-url":"/clusters/".concat(e,"/kubeConfig"),onClick:this.handleTool},d.default.createElement(p.default,{icon:"data",title:"kubeconfig",description:t("KUBECONFIG_DESC")}))))}}]),r}(d.Component);a.default=y},4125:function(e,t,a){e.exports={toolContainer:"_23lpLmKub4SgQU0VpltJ_3",level:"sZ0NabDp93AYRsdLn9U4q"}},4126:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(28),r(42),r(16),r(4),r(23),r(57),r(17);var l,o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(790)),p=n(r(26)),m=r(239),h=u(r(0)),v=r(52),y=n(r(4127));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,m.inject)("rootStore")(l=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.cluster;t.rootStore.routing.push("/clusters/".concat(a.name,"/visibility"))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.version;return h.default.createElement("div",{className:y.default.container},h.default.createElement("div",{className:y.default.title},h.default.createElement("p",null,t("BASIC_INFORMATION"))),h.default.createElement("div",{className:y.default.level},h.default.createElement(f.default,{title:(0,v.getDomTitle)(a.provider),description:t("PROVIDER")}),h.default.createElement(f.default,{title:(0,v.getDomTitle)("public"===a.visibility?t("VISIBILITY_PUBLIC"):t("VISIBILITY_PARTIAL")),description:t("CLUSTER_VISIBILITY_SCAP"),onClick:this.handleClick}),h.default.createElement(f.default,{title:(0,v.getDomTitle)(a.kubernetesVersion||r),description:t("KUBERNETES_VERSION")}),h.default.createElement(f.default,{title:(0,v.getDomTitle)((0,p.default)(a,"configz.ksVersion","-")),description:t("KUBESPHERE_VERSION")})))}}]),r}(h.Component))||l;a.default=_},4127:function(e,t,a){e.exports={container:"_212TIVnxMapwLzZYYcGgn0",title:"_18YRN0nf5s1YD1KM3vCfcJ",level:"_1qApZzbaoaL-anfJe29k_C"}},4128:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,c,i=n(r(65)),s=n(r(30)),d=n(r(36)),f=n(r(37)),p=n(r(88)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(49)),g=(n(r(66)),r(186)),_=n(r(3)),E=n(r(1103)),b=n(r(790)),S=n(r(26)),O=n(r(63)),R=n(r(1161)),T=r(14),C=r(239),A=u(r(0)),P=r(433),k=n(r(1209)),N=n(r(1401)),D=n(r(1211)),w=r(52),L=r(72),I=r(794),M=n(r(4129));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var V={limit:10,page:1,sort_type:"desc"},G=(0,C.observer)((o=function(e){(0,m.default)(r,e);var a=U(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).sourceMap={node:{store:new k.default(x(x({},V),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/whizard-telemetry/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new N.default(x(x({},V),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,a){return"/whizard-telemetry/".concat(e.cluster,"/projects/").concat(a,"/pods/").concat(t)}},project:{store:new D.default(x(x({},V),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/whizard-telemetry/".concat(e.cluster,"/projects/").concat(t)}}},e.transData=function(a){var r="",n="",u=(0,S.default)(a,e.store.sort_metric,0),l=L.MONITOR_RANK_UNIT_MAP[e.store.sort_metric];return"%"===l?r="".concat((0,I.getValueByUnit)(u,l),"%"):""===l?r=Math.round(100*u)/100:(n=(0,I.getSuitableUnit)(u,l),r=(0,I.getValueByUnit)(u,n)),"".concat(r," ").concat("core"===n?t("CORE_PL"):n)},(0,i.default)(e,"store",c,(0,p.default)(e)),e.state={sourceType:"node",data:[],sortType:"desc",isFold:!0},e.handleChangeSource=function(t){e.setState({sourceType:t}),e.store=e.sourceMap[t].store,e.handleTypeChange("desc")},e.handleTypeChange=function(t){e.setState({sortType:t}),e.fetchRankData({sort_type:t})},e.handleChangeMetricType=function(t){e.store.changeSortMetric(t,{cluster_resources_filter:e.cluster,sort_type:"desc"}),e.setState({sortType:"desc"})},e.fetchRankData=function(t){var a={cluster_resources_filter:e.cluster};e.store.fetchAll(x(x({},t),a))},e.renderPanelHeader=function(){var a=e.state.sortType;return A.default.createElement("div",{className:M.default.title},A.default.createElement("div",null,t("RESOURCE_USAGE_RANKING")),A.default.createElement(g.RadioGroup,{mode:"button",value:a,onChange:e.handleTypeChange},A.default.createElement(g.RadioButton,{value:"desc"},A.default.createElement(g.Icon,{name:"sort-descending",size:16})),A.default.createElement(g.RadioButton,{value:"asc"},A.default.createElement(g.Icon,{name:"sort-ascending",size:16}))))},e.renderQos=function(e){return A.default.createElement(g.Tooltip,{content:L.COLOR_QOS[e.qos_class].label},A.default.createElement("span",{style:{marginRight:"4px",minWidth:"16px",height:"16px",lineHeight:"16px",textAlign:"center",borderRadius:"2px",color:L.COLOR_QOS[e.qos_class].color,background:L.COLOR_QOS[e.qos_class].background}},e.qos_class.slice(0,1).toUpperCase()))},e.renderListItems=function(a,r){if((0,O.default)(a))return A.default.createElement(E.default,null);var n=function(a){var n=e.sourceMap[r].descLabel;if(n){if("PROJECTS"===n)return(0,w.getDomTitle)("".concat(t(n),": ").concat((0,w.showNameAndAlias)((0,S.default)(a,e.sourceMap[r].desc),"project",{},!0,(function(){return e.forceUpdate()}))||"-"));if("WORKSPACES"===n)return(0,w.getDomTitle)("".concat(t(n),": ").concat((0,w.showNameAndAlias)((0,S.default)(a,e.sourceMap[r].desc),"workspace",{},!0,(function(){return e.forceUpdate()}))||"-"))}return(0,w.getDomTitle)((0,S.default)(a,e.sourceMap[r].desc,"-"))},u=["project"];return A.default.createElement(A.default.Fragment,null,a.map((function(a,l){return A.default.createElement("div",{key:"".concat(a[r],"-").concat(l),className:M.default.listItem},A.default.createElement(g.Icon,{style:{width:52},name:e.sourceMap[r].icon,size:40,className:"margin-r12"}),A.default.createElement(b.default,{className:M.default.textBox,title:A.default.createElement("div",{className:(0,_.default)(M.default.text,(0,s.default)({},M.default.noLabel,"master"!==a.role))},a.qos_class&&e.renderQos(a),A.default.createElement(P.Link,{to:e.sourceMap[r].url((0,S.default)(a,e.sourceMap[r].name),(0,S.default)(a,"namespace"))},(0,w.getDomTitle)((0,R.default)(u,(function(e){return e===r}))?(0,w.showNameAndAlias)((0,S.default)(a,e.sourceMap[r].name),r,{},!0,(function(){e.forceUpdate()})):(0,S.default)(a,e.sourceMap[r].name,"-"))),"master"===a.role&&A.default.createElement("span",{className:M.default.label},t("CONTROL_PLANE"))),description:n(a)}),A.default.createElement("p",{className:M.default.cpu},e.transData(a)))})))},e.toggleFold=function(){e.setState({isFold:!e.state.isFold})},e.showMoreModal=function(){var t,a;null===(t=(a=e.props).showRankModal)||void 0===t||t.call(a)},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchRankData()}},{key:"render",value:function(){var e=this.store,a=e.data,r=e.isLoading,n=this.state,u=n.sourceType,l=n.isFold,o=a.length>5,c=l?a.slice(0,5):a;return A.default.createElement("div",{className:M.default.container},this.renderPanelHeader(),A.default.createElement(g.Loading,{spinning:r},A.default.createElement(A.default.Fragment,null,A.default.createElement("div",{className:M.default.header},A.default.createElement(g.Select,{className:M.default.select,value:u,onChange:this.handleChangeSource,options:this.sourceOptions}),A.default.createElement(g.Select,{className:M.default.select,value:this.store.sort_metric,onChange:this.handleChangeMetricType,options:this.options})),A.default.createElement("div",{className:M.default.list,style:{height:o&&!l?"auto":"392px"}},this.renderListItems(c,u),o&&A.default.createElement(g.Button,{className:M.default.fold,icon:l?"chevron-down":"chevron-up",onClick:this.toggleFold},l?t("UNFOLD"):t("FOLD"))),A.default.createElement("div",{className:M.default.more},A.default.createElement(g.Button,{onClick:this.showMoreModal},t("VIEW_MORE"))))))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"sourceOptions",get:function(){return[{label:t("NODES"),value:"node"},{label:t("PODS"),value:"pod"},{label:t("PROJECT_PL"),value:"project"}]}}]),r}(A.Component),c=(0,y.default)(o.prototype,"store",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sourceMap[this.state.sourceType].store}}),l=o))||l;a.default=G},4129:function(e,t,a){e.exports={container:"_5xwXULcQIMf6lu9b93XF",title:"_3_kT4Kr-pEQyZlHRWq1Z1z",header:"_10AZ18k6beBTVANjhC-J4R",select:"XrJLUddvKyIO1IPjCqzJb",list:"_3konAxFwtVIKU4-4T9GJsw",listItem:"_106U6lcUQZ0xFRgD6HZgp_",textBox:"_3NlAAuDN3WchymAu8ywFsM",text:"LqDgWxmf6mP1J3m8fJYTl",label:"_28BvoCJ7fYaXIboo1_7udO",noLabel:"_2pv9h2GieT6YpibSC9eFD4",cpu:"_24gW2mCCTU90Ly3T1xsr7O",fold:"_3j7jzafRax5d4eIBqDZP5A",more:"KjQ8RlPJuYtWqL64gr-M5"}},4130:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(11),r(6),r(87),r(27),r(190),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(87),r(42),r(27),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=r(186),v=n(r(790)),y=n(r(26)),g=r(239),_=u(r(0)),E=n(r(1137)),b=r(52),S=r(794),O=n(r(4131));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A={request_latencies_total:"apiserver_request_latencies",request_rate:"apiserver_request_rate",schedule_attempts_count:"scheduler_schedule_attempts"},P=(0,g.observer)(c=function(e){(0,f.default)(r,e);var a=C(r);function r(e){var t;(0,s.default)(this,r),(t=a.call(this,e)).fetchData=(0,i.default)(l.default.mark((function e(){var a,r,n=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},r=T({last:!0},a),e.next=4,t.apiStore.fetchMetrics(T({metrics:[A.request_latencies_total,A.request_rate]},r));case 4:return e.next=6,t.schedulerStore.fetchMetrics(T({metrics:[A.schedule_attempts_count]},r));case 6:case"end":return e.stop()}}),e)}))),t.getSpecificData=function(e){return((0,y.default)(t.metrics,"".concat(A[e],".data.result"))||[]).reduce((function(e,t){return T(T({},e),{},(0,o.default)({},(0,y.default)(t,"metric.result"),(0,y.default)(t,"value[1]",0)))}),{})};var n=e.cluster;return t.apiStore=new E.default({module:"apiserver",cluster:n}),t.schedulerStore=new E.default({module:"scheduler",cluster:n}),t}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.metrics,a=Number((0,y.default)(e,"".concat(A.request_rate,".data.result[0].value[1]"),0)).toFixed(3),r=(0,S.getValueByUnit)((0,y.default)(e,"".concat(A.request_latencies_total,".data.result[0].value[1]"),0),"ms"),n=this.getSpecificData("schedule_attempts_count");return _.default.createElement("div",{className:O.default.k8sStatus},_.default.createElement("div",{className:O.default.title},_.default.createElement("p",null,t("KUBERNETES_STATUS"))),_.default.createElement(h.Loading,{spinning:this.schedulerStore.isLoading},_.default.createElement("div",{className:O.default.container},_.default.createElement("div",{className:O.default.level},_.default.createElement(v.default,{title:(0,b.getDomTitle)(t("VALUE_REQUESTS_SECOND",{value:a})),description:t("API_REQUESTS_PER_SECOND")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)("".concat(r," ms")),description:t("API_REQUEST_LATENCY")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)(n.scheduled),description:1===n.scheduled?t("SCHEDULING_OPERATION"):t("SCHEDULING_OPERATIONS")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)(n.unschedulable),description:1===n.unschedulable?t("SCHEDULING_FAILURE"):t("SCHEDULING_FAILURES")})))))}},{key:"metrics",get:function(){var e=this.apiStore.data,t=this.schedulerStore.data;return T(T({},e),t)}}]),r}(_.Component))||c;a.default=P},4131:function(e,t,a){e.exports={k8sStatus:"_25a3cYXFDcFCpPE9mdV6M0",title:"_2zy4ypkNir5ltmO50PwKzl",container:"_2FVJDVObN1OYWJjRShvHTY",level:"_21GadJn6_6kUuM89Cu4O2v"}},4132:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(4),r(316),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(316),r(23),r(57),r(17);var l,o,c,i,s=n(r(65)),d=n(r(36)),f=n(r(37)),p=n(r(88)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(49)),g=(n(r(66)),u(r(0))),_=r(239),E=n(r(26)),b=r(186),S=n(r(883)),O=r(14),R=r(794),T=n(r(4133)),C=n(r(4137));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var P={cpu_usage:"cluster_pod_cpu_usage",cpu_requests:"cluster_pod_cpu_requests_total",cpu_limits:"cluster_pod_cpu_limits_total",cpu_total:"cluster_cpu_total",cpu_requests_non_master:"cluster_pod_cpu_requests_non_master_total",cpu_limits_non_master:"cluster_pod_cpu_limits_non_master_total",cpu_total_non_master:"cluster_cpu_non_master_total",memory_requests:"cluster_pod_memory_requests_total",memorylimits:"cluster_pod_memory_limits_total",memory_total:"cluster_memory_total",memory_usage_non_master:"cluster_pod_memory_non_master_usage_wo_cache",memory_requests_non_master:"cluster_pod_memory_requests_non_master_total",memory_limits_non_master:"cluster_pod_memory_limits_non_master_total",memory_total_non_master:"cluster_memory_non_master_total",namespace_cpu_usage:"cluster_namespace_quota_cpu_usage",namespace_cpu_requests:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits:"cluster_namespace_quota_cpu_limits_hard_total",namespace_cpu_requests_non_master:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits_non_master:"cluster_namespace_quota_cpu_limits_hard_total",namespace_memory_usage:"cluster_namespace_quota_memory_usage",namespace_memory_requests:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits:"cluster_namespace_quota_memory_limits_hard_total",namespace_memory_usage_non_master:"cluster_namespace_quota_memory_usage",namespace_memory_requests_non_master:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits_non_master:"cluster_namespace_quota_memory_limits_hard_total"},k=(0,_.observer)((o=function(e){(0,m.default)(r,e);var a=A(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).monitorStore=new S.default({cluster:e.props.cluster}),(0,s.default)(e,"resourceType",c,(0,p.default)(e)),(0,s.default)(e,"metriceData",i,(0,p.default)(e)),e.getValue=function(e){return(0,E.default)(e,"value[1]",0)},e.fetchData=function(){e.monitorStore.fetchMetrics({metrics:Object.values(P),last:!0})},e.handleTypeChange=function(t){e.resourceType=t},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return g.default.createElement("div",{className:C.default.container},g.default.createElement("div",{className:C.default.header},g.default.createElement("div",{className:C.default.title},t("APPLICATION_CLUSTER_QUOTA_STATISTICS")),g.default.createElement(b.RadioGroup,{mode:"button",buttonWidth:110,value:this.resourceType,onChange:this.handleTypeChange,wrapClassName:C.default.radio},g.default.createElement(b.RadioButton,{value:"pod",key:"pod"},t("CONTAINER")),g.default.createElement(b.RadioButton,{value:"project",key:"project"},t("PROJECT")))),g.default.createElement(b.Loading,{spinning:this.monitorStore.isLoading},g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:C.default.usageContainer},g.default.createElement(T.default,{merticType:"cpu",title:t("CPU_QUOTA"),resourceType:this.resourceType,data:this.metricData.cpu}),g.default.createElement(T.default,{merticType:"memory",title:t("MEMORY_QUOTA"),resourceType:this.resourceType,data:this.metricData.memory})))))}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,E.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"metricData",get:function(){var e,t=(0,R.getLastMonitoringData)(this.metrics);return"pod"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[P.cpu_requests_non_master]),limits:this.getValue(t[P.cpu_limits_non_master]),total:this.getValue(t[P.cpu_total_non_master])},memory:{requests:this.getValue(t[P.memory_requests_non_master]),limits:this.getValue(t[P.memory_limits_non_master]),total:this.getValue(t[P.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[P.cpu_requests]),limits:this.getValue(t[P.cpu_limits]),total:this.getValue(t[P.cpu_total])},memory:{requests:this.getValue(t[P.memory_requests]),limits:this.getValue(t[P.memorylimits]),total:this.getValue(t[P.memory_total])}}),"project"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[P.namespace_cpu_requests_non_master]),limits:this.getValue(t[P.namespace_cpu_limits_non_master]),total:this.getValue(t[P.cpu_total_non_master])},memory:{requests:this.getValue(t[P.namespace_memory_requests_non_master]),limits:this.getValue(t[P.namespace_memorylimits_non_master]),total:this.getValue(t[P.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[P.namespace_cpu_requests]),limits:this.getValue(t[P.namespace_cpu_limits]),total:this.getValue(t[P.cpu_total])},memory:{requests:this.getValue(t[P.namespace_memory_requests]),limits:this.getValue(t[P.namespace_memorylimits]),total:this.getValue(t[P.memory_total])}}),e}}]),r}(g.Component),c=(0,y.default)(o.prototype,"resourceType",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pod"}}),i=(0,y.default)(o.prototype,"metriceData",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=o))||l;a.default=k},4133:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(187),r(6),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.merticType,r=void 0===a?"cpu":a,n=e.title,u=e.data,p=e.resourceType,m=(0,o.useState)({requests:0,limits:0,total:0}),h=(0,l.default)(m,2),v=h[0],y=h[1],g=(0,o.useRef)(null),_=(0,s.getSuitableUnit)(u.total||u.limits||u.requests||0,r);(0,o.useEffect)((function(){var e={};Object.keys(u).forEach((function(t){e[t]=(0,s.getValueByUnit)(u[t],_)})),y(e)}),[u]);var E=function(e,t){return e<t?0:(100*e-100*t)/100},b=(0,o.useMemo)((function(){return"cpu"===r?[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:v.requests,unit:"core"},{name:t("QUOTA_TOTAL"),value:E(v.total,v.requests),unit:"core"}]},{dataKey:"value",innerRadius:34,outerRadius:46,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:v.limits,unit:"core"},{name:t("QUOTA_TOTAL"),value:E(v.total,v.limits),unit:"core"}]}]:[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:v.requests,unit:_},{name:t("QUOTA_TOTAL"),value:E(v.total,v.requests),unit:_}]},{dataKey:"value",innerRadius:36,outerRadius:48,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:v.limits,unit:_},{name:t("QUOTA_TOTAL"),value:E(v.total,v.limits),unit:_}]}]}),[v,r]),S=b.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return o.default.createElement("div",{className:f.default.container,ref:g},o.default.createElement("div",{className:f.default.flexContainer},o.default.createElement("div",{className:f.default.chartContainer},o.default.createElement("div",{className:f.default.title},n),o.default.createElement("div",{className:f.default.chart},S?o.default.createElement("div",{className:f.default.noData},o.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),o.default.createElement("p",null,t("NO_DATA"))):o.default.createElement(o.default.Fragment,null,o.default.createElement(c.MultiPie,{dataList:b,total:v.total,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 178px)"},noTooltip:!0}),o.default.createElement(i.Icon,{className:f.default.icon,name:r,size:32})))),o.default.createElement(d.default,{resourceType:p,mertic:v,unit:_})))},r(187),r(6),r(10),r(4),r(7);var l=u(r(96)),o=n(r(0)),c=r(798),i=r(186),s=r(794),d=u(r(4134)),f=u(r(4136))},4134:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.mertic,r=void 0===a?{}:a,n=e.unit,u=e.resourceType,f=(0,o.useState)("requests"),p=(0,l.default)(f,2),m=p[0],h=p[1],v=(0,o.useState)(0),y=(0,l.default)(v,2),g=y[0],_=y[1];(0,o.useEffect)((function(){var e=0;0===r.total||(0,s.default)(r)||(e=("requests"===m?r.requests:r.limits)/r.total*100);_(e)}),[m,r]),(0,o.useEffect)((function(){h("requests")}),[u]);var E=(0,o.useCallback)((function(e){h(e)}),[]);return o.default.createElement("div",{className:d.default.resourceRatio},o.default.createElement("div",{className:d.default.subTitle},o.default.createElement(c.RadioGroup,{mode:"button",value:m,onChange:E},o.default.createElement(c.RadioButton,{value:"requests"},t("QUOTA_REQUEST")),o.default.createElement(c.RadioButton,{value:"limit"},t("QUOTA_LIMIT")))),o.default.createElement("div",{className:d.default.radio},o.default.createElement("div",{className:d.default.radioWrapper},o.default.createElement("p",null,t("QUOTA_ALLOCATED")),o.default.createElement("p",null,"core"===n?t("VALUE_CORES",{value:"requests"===m?r.requests:r.limits}):t("VALUE_UNIT",{value:"requests"===m?r.requests:r.limits,unit:n}))),o.default.createElement("div",{className:d.default.middleStyle},"VS"),o.default.createElement("div",{className:d.default.radioWrapper},o.default.createElement("p",null,t("QUOTA_TOTAL")),o.default.createElement("p",null,"core"===n?t("VALUE_CORES",{value:r.total}):t("VALUE_UNIT",{value:r.total,unit:n})))),o.default.createElement(i.default,{bgColor:"#eff4f9",maskBgColor:"#E3E9EF",percent:g}))};var l=u(r(96)),o=n(r(0)),c=r(186),i=u(r(1315)),s=u(r(63)),d=u(r(4135))},4135:function(e,t,a){e.exports={resourceRatio:"_2IrWtdamZLz6BA7S4JPgA5",subTitle:"_2MNHgC1nZlC0mwMfmcSEWu",title:"_3Nx7l36M9vmLBPu6TzY1eu",radio:"_2EYEpM_R0VoOAE6h2uu2a_",radioWrapper:"_1rjDH8yI-miwiIovizWgGg",middleStyle:"_182j8v6D_m4k1lEFQSUNs2"}},4136:function(e,t,a){e.exports={container:"_2BBrb4VZ2yJfbJmJnijH8q",flexContainer:"_1nBOs9yRJ1rP6vBh6y_ccc",title:"_9w6KSzQ_BFf1qTN3XX2nF",noData:"_2yOXwDN6sUHM4ZZCmCl48V",chartContainer:"GA-LDoXmM6r5mc3Cl32jA",chart:"_18kwnxArgt5t0hqoMdHEev",icon:"_3su8u2Lg5ev8CLkNqhWwcs"}},4137:function(e,t,a){e.exports={container:"_2coggVb8rCFwiiU2164CCW",header:"_3L-zQ-NWth_-mT3lnTUcCq",title:"_1mFDIrXiUAVYoIWmHTTDn7",radioLabel:"IvGtOvXx4rk4IzhNbDmsW",radio:"_2yDWfP30dM2jIfglelilOd",usageContainer:"_1Y-jk8hXJPkFyOLvT6slmr"}},4138:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(11),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(30)),o=u(r(43));r(41);var c=u(r(44)),i=u(r(96));r(11),r(18),r(16),r(4),r(22);var s=n(r(0)),d=u(r(788)),f=u(r(801)),p=u(r(26)),m=r(186),h=u(r(3)),v=u(r(890)),y=u(r(4139)),g={namespace_count:"cluster_namespace_count",deployment_count:"cluster_deployment_count",statefulset_count:"cluster_statefulset_count",daemonset_count:"cluster_daemonset_count",job_count:"cluster_job_count",cronjob_count:"cluster_cronjob_count",cluster_persistentvolumeclaim_count:"cluster_persistentvolumeclaim_count",service_count:"cluster_service_count",route_count:"cluster_ingress_count",clusters_pod_count:"cluster_pod_count",role_count:"cluster_clusterrole_count",member_count:"cluster_clusterrolebinding_count"},_=(0,s.memo)((function(e){var a=e.cluster,r=[{title:"PROJECT",metricType:g.namespace_count,icon:"project"},{metricType:g.clusters_pod_count,icon:"pod",title:"POD"},{metricType:g.deployment_count,icon:"backup",title:"DEPLOYMENT"},{metricType:g.statefulset_count,icon:"stateful-set",title:"STATEFULSET"},{metricType:g.daemonset_count,icon:"deamon-set",title:"DAEMONSET"},{metricType:g.job_count,icon:"backup",title:"JOB"},{metricType:g.cronjob_count,icon:"backup",title:"CRONJOB"},{metricType:g.cluster_persistentvolumeclaim_count,icon:"storage",title:"PERSISTENT_VOLUME_CLAIM"},{metricType:g.service_count,icon:"appcenter",title:"SERVICE"},{metricType:g.route_count,icon:"loadbalancer",title:"ROUTE"},{title:"CLUSTER_MEMBER",metricType:g.member_count,icon:"human"},{title:"CLUSTER_ROLE",metricType:g.role_count,icon:"role"}].filter((function(e){return!e.isHidden})),n=(0,s.useState)({}),u=(0,i.default)(n,2),_=u[0],E=u[1],b=(0,s.useState)(!1),S=(0,i.default)(b,2),O=S[0],R=S[1],T=(0,s.useCallback)(function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,t.fetchStatisticsQuery({cluster:a});case 3:r=e.sent,E(r),R(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,s.useEffect)((function(){var e=new v.default({cluster:a});T(e)}),[]),s.default.createElement(f.default,{className:y.default.resourceSummary},s.default.createElement(m.Loading,{spinning:O},s.default.createElement("div",{className:y.default.wrapper},r.map((function(e){var a=(0,p.default)(_,"".concat(e.metricType,".data.result[0].value[1]"),"0");return s.default.createElement("div",{className:(0,h.default)(y.default.wrapperItem,(0,l.default)({},y.default.wrapperItemHover,e.more)),key:e.name},s.default.createElement(d.default,{noLink:!0,className:y.default.avatar,icon:e.icon,title:a,desc:t("1"===a?e.title:"".concat(e.title,"_PL")),iconSize:40}))})))))}));a.default=_},4139:function(e,t,a){e.exports={resourceSummary:"_2mtswXM5uSw2WCDAK21Z9h",wrapper:"_3ssm8GYCJSqJH_QxI4LFU_",wrapperItem:"_3hnGb6wyH2TsdSJk2NHlD",wrapperItemHover:"e6c9AdpsZk0cOqyTw5eeq",avatar:"F95626XY0y7lW8YEy1XPl"}},4140:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(190),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(186),y=n(r(1402)),g=n(r(883)),_=r(798),E=r(239),b=n(r(3)),S=n(r(26)),O=r(52),R=r(794),T=n(r(4141));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k={cpu_usage:"cluster_cpu_usage",cpu_total:"cluster_cpu_total",cpu_utilisation:"cluster_cpu_utilisation",gpu_usage:"cluster_gpu_usage",gpu_total:"cluster_gpu_total",gpu_utilization:"cluster_gpu_utilization",gpu_memory_utilization:"cluster_gpu_memory_utilization",gpu_memory_usage:"cluster_gpu_memory_usage",gpu_memory_total:"cluster_gpu_memory_total",memory_usage:"cluster_memory_usage_wo_cache",memory_total:"cluster_memory_total",memory_utilisation:"cluster_memory_utilisation",disk_size_usage:"cluster_disk_size_usage",disk_size_capacity:"cluster_disk_size_capacity",disk_utilisation:"cluster_disk_size_utilisation",pod_count:"cluster_pod_running_count",pod_capacity:"cluster_pod_quota"},N=(0,E.observer)(c=function(e){(0,f.default)(r,e);var a=P(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).state={active:"cpu",params:{times:10,step:"48m"}},e.monitorStore=new g.default({cluster:e.cluster}),e.fetchData=function(){var t=(0,i.default)(l.default.mark((function t(a){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(A(A({metrics:Object.values((0,O.hideGPUByLicense)(k,e.cluster))},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return(0,S.default)(e,"value[1]",0)},e.handleSelect=function(t){e.setState({active:t})},e.renderTabItem=function(a){var r=a.type,n=a.icon,u=a.name,l=a.unit,c=a.used,i=a.total,s=a.unitType,d=(0,R.getSuitableUnit)(i||c,s)||l,f=(0,R.getValueByUnit)(c,d),p=(0,R.getValueByUnit)(i,d),m="core"===d?"CORE_PL":d,g=e.state.active===r,_=f&&p?f/p*100:0;return h.default.createElement("div",{className:(0,b.default)(T.default.tabItem,(0,o.default)({},T.default.checked,g)),key:r,onClick:function(){return e.handleSelect(r)}},h.default.createElement("div",{className:T.default.label},h.default.createElement(v.Icon,{name:n,size:20,type:g?"light":"dark"}),h.default.createElement("span",null,t(u)),h.default.createElement("span",null,t(m))),h.default.createElement("div",{className:T.default.value},h.default.createElement("span",null,f),h.default.createElement("span",null,"/",p)),h.default.createElement("div",{className:(0,b.default)(T.default.progress,(0,o.default)({},T.default.progressActive,g))},h.default.createElement(y.default,{className:(0,b.default)((0,o.default)({},T.default.progressActive,g)),content:h.default.createElement("div",{className:T.default.tabItem_tooltip},h.default.createElement("div",null,t(u)),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("USED_VALUE_CORES_PERCENTAGE",{value:f,percentage:0!==_?"".concat(_.toFixed(2),"%"):"0%"}):t("USED_VALUE_UNIT_PERCENTAGE",{value:f,unit:d,percentage:0!==_?"".concat(_.toFixed(2),"%"):"0%"})),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("TOTAL_VALUE_CORES",{value:p}):t("TOTAL_VALUE_UNIT",{value:p,unit:d}))),percent:parseFloat(_.toFixed(2))})))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(){var e=this,t=this.renderChartOption.filter((function(t){return t.category===e.state.active}))[0],a={key:t.title,width:"100%",height:"100%"},r=(0,R.getAreaChartOps)(t);return h.default.createElement(_.SimpleArea,(0,u.default)({},a,r))}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading;return h.default.createElement("div",{className:T.default.container},h.default.createElement("div",{className:T.default.header},h.default.createElement("div",{className:T.default.title},t("NODE_RESOURCE_USAGE"))),h.default.createElement(v.Loading,{spinning:a},h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:T.default.tabs},h.default.createElement("div",{className:T.default.tabsHeader},this.tabOptions.map((function(t){return e.renderTabItem(t)}))),h.default.createElement("div",{className:T.default.tabsBody})),h.default.createElement("div",{className:T.default.chartContainer},this.renderChart()))))}},{key:"cluster",get:function(){return this.props.clusterDetail.name}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,S.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"tabOptions",get:function(){var e=(0,R.getLastMonitoringData)(this.metrics),t=[{icon:"cpu",type:"cpu",name:"CPU",unitType:"cpu",used:this.getValue(e[k.cpu_usage]),total:this.getValue(e[k.cpu_total])},{icon:"memory",type:"memory",name:"MEMORY",unitType:"memory",used:this.getValue(e[k.memory_usage]),total:this.getValue(e[k.memory_total])},{icon:"gpu",type:"gpu",name:"GPU",used:this.getValue(e[k.gpu_usage]),total:this.getValue(e[k.gpu_total])},{icon:"computing",type:"gpu_merrory",name:"GPU_MEMORY",unit:"Gi",unitType:"memory",used:this.getValue(e[k.gpu_memory_usage]),total:this.getValue(e[k.gpu_memory_total])},{icon:"storage",type:"storage",name:"DISK",unitType:"disk",used:this.getValue(e[k.disk_size_usage]),total:this.getValue(e[k.disk_size_capacity])},{icon:"pod",type:"pod",name:"POD_PL",unit:"",used:this.getValue(e[k.pod_count]),total:this.getValue(e[k.pod_capacity])}];return(0,O.hideGPUByLicense)(t,this.cluster)}},{key:"renderChartOption",get:function(){var e=[{key:"CPU_USAGE",type:"utilisation",renderTitle:function(){return t("CPU_UTILISATION_TCAP")},category:"cpu",unit:"%",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.cpu_utilisation,".data.result"))},{key:"MEMORY_USAGE",type:"utilisation",renderTitle:function(){return t("MEMORY_UTILISATION_TCAP")},category:"memory",unit:"%",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.memory_utilisation,".data.result"))},{key:"GPU_USAGE",type:"utilisation",renderTitle:function(){return t("GPU_UTILIZATION")},category:"gpu",unit:"%",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.gpu_utilization,".data.result"))},{key:"GPU_MEMORY_USAGE",renderTitle:function(){return t("GPU_MEMORY_UTILIZATION")},type:"utilisation",category:"gpu_merrory",unit:"%",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.gpu_memory_utilization,".data.result"))},{key:"DISK_USAGE",type:"utilisation",renderTitle:function(){return t("DISK_SIZE_UTILISATION_TCAP")},category:"storage",unit:"%",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.disk_utilisation,".data.result"))},{key:"POD_COUNT",title:"POD_COUNT",category:"pod",unit:"",legend:["VALUE"],data:(0,S.default)(this.metrics,"".concat(k.pod_count,".data.result"))}];return(0,O.hideGPUByLicense)(e,this.cluster)}}]),r}(h.default.Component))||c;a.default=N},4141:function(e,t,a){e.exports={container:"mNy3DR1MMWf5ubnD050El",header:"_39A88wcDs3lpIHqQMQbjWq",title:"qwc8jFvefiqiiXLv2ZDbm",timeSelector:"fBye7CjaMoMIOIWliF8h_",tabs:"bSHCtsA-XHET52dB7nMbF",tabsHeader:"_1oHgufbbomgmOQQtkwmc-f",tabItem:"_3lxoouWyB7f3E2NIeJDXTp",label:"Srm-kAbNWS_PstPDdhOoK",value:"CJ1SzKy7-nTdhxPPNPIC7",progress:"_7wF-akiPlk2AzKw1T7Jrs",progressActive:"_2zLpzC_BOKdnCIXboZgVam",checked:"sFBcq9kSIvEAz8Svvdk1R",chartContainer:"_2AyeetIvtiuOzXrpsUvIMc",tabItem_tooltip:"zo79h4AbAqCzka6jpYm-F"}},4142:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(187),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),y=n(r(883)),g=r(186),_=r(798),E=n(r(3)),b=n(r(26)),S=n(r(63)),O=r(794),R=r(14),T=n(r(4143));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k={oomkilled:"cluster_pod_oomkilled_count",pending:"cluster_pod_pending_count",evict:"cluster_pod_evicted_count",pod_total:"cluster_pod_count",pod_running:"cluster_pod_running_count",pod_pending:"cluster_pod_pending_count",pod_succeeded:"cluster_pod_succeeded_count",pod_failed:"cluster_pod_failed_count",pod_unknown:"cluster_pod_unknown_count",guaranteed:"cluster_pod_qos_guaranteed_count",burstable:"cluster_pod_qos_burstable_count",bestEffort:"cluster_pod_qos_besteffort_count"},N=(0,v.observer)(c=function(e){(0,f.default)(r,e);var a=P(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).monitorStore=new y.default({cluster:e.props.cluster}),e.state={params:{times:10,step:"48m"}},e.fetchData=function(){var t=(0,i.default)(l.default.mark((function t(a){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(A(A(A({metrics:Object.values(k)},e.state.params),a),{},{fillZero:!0}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return parseFloat((0,b.default)(e,"value[1]",0))},e.renderChartTitle=function(e){var a=e.icon,r=e.imgIcon,n=e.used,u=e.title;return h.default.createElement("div",{className:T.default.chartTitle},r?h.default.createElement("img",{src:r}):h.default.createElement(g.Icon,{name:a,size:40}),h.default.createElement("div",{className:T.default.chartInfo},h.default.createElement("p",null,n),h.default.createElement("p",null,t(u))))},e.renderTooltipQos=function(){var e=h.default.createElement("div",{className:T.default.qosContent},h.default.createElement("p",null,t.html("QOS_GUARANTEED")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BURSTABLE")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BESTEFFORT")));return h.default.createElement(g.Tooltip,{content:e},h.default.createElement(g.Icon,{name:"question",size:16}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(e){var a=(0,O.getAreaChartOps)(e);return(0,S.default)(a.data)?h.default.createElement("p",{className:T.default.noData},t("NO_DATA")):h.default.createElement(_.MediumArea,(0,u.default)({},a,{noTitle:!0,top:4,width:"100%",height:48,key:e.title}))}},{key:"renderPie",value:function(e){var t=e.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement(h.default.Fragment,null,t&&h.default.createElement("div",{className:T.default.emptyPie},h.default.createElement("div",null)),h.default.createElement(_.MultiPie,{legendClassName:T.default.legendClassName,dataList:e.dataList,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 166px)"}}))}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading;return h.default.createElement("div",{className:T.default.container},h.default.createElement("div",{className:T.default.header},h.default.createElement("div",{className:T.default.title},t("POD_PL"))),h.default.createElement(g.Loading,{spinning:a},h.default.createElement("div",{className:T.default.flexcontainer},h.default.createElement("div",{className:(0,E.default)(T.default.chartbox,T.default.status)},this.renderPieOption.map((function(a,r){var n=a.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement("div",{className:(0,E.default)(T.default.item_pie,T.default.item),key:r},h.default.createElement("div",{className:T.default.pie_title},t(a.title),h.default.createElement("span",{className:T.default.pie_title_tooltip},"QoS"===a.title&&e.renderTooltipQos())),h.default.createElement("div",{className:T.default.pie_box},n?h.default.createElement("div",{className:T.default.pieNoData},h.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),h.default.createElement("p",null,t("NO_DATA"))):h.default.createElement(h.default.Fragment,null,e.renderPie(a),h.default.createElement("div",{className:T.default.summary},h.default.createElement("p",null,a.total),h.default.createElement("p",null,t("ALL"))))))}))),h.default.createElement("div",{className:T.default.chartbox},this.renderChartOption.map((function(t,a){return h.default.createElement("div",{className:(0,E.default)(T.default.item,T.default.areaChartItem),key:a},e.renderChartTitle(t),h.default.createElement("div",{className:T.default.chartBox},e.renderChart(t)))}))))))}},{key:"metrics",get:function(){return(0,R.toJS)(this.monitorStore.data)}},{key:"renderChartOption",get:function(){var e=(0,O.getLastMonitoringData)(this.metrics);return[{category:"oomkilled",title:"OOM_KILL_PODS",icon:"error",unit:"",legend:["OOM_KILL_PODS"],data:(0,b.default)(this.metrics,"".concat(k.oomkilled,".data.result")),used:this.getValue(e[k.oomkilled])},{category:"pending",title:"PENDING_PODS",icon:"history-duotone",unit:"",legend:["PENDING_PODS"],data:(0,b.default)(this.metrics,"".concat(k.pending,".data.result")),used:this.getValue(e[k.pending])},{category:"evict",title:"EVICTED_PODS",unit:"",legend:["EVICTED_PODS"],icon:"logout-right-duotone",data:(0,b.default)(this.metrics,"".concat(k.evict,".data.result")),used:this.getValue(e[k.evict])}]}},{key:"renderPieOption",get:function(){var e=(0,O.getLastMonitoringData)(this.metrics);return[{title:"POD_STATUS",total:this.getValue(e[k.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#F5A623","#79879C","#CA2621","#E3E9EF","#EFF4F9"],data:[{name:t("RUNNING"),value:this.getValue(e[k.pod_running])},{name:t("PENDING"),value:this.getValue(e[k.pod_pending])},{name:t("COMPLETED"),value:this.getValue(e[k.pod_succeeded])},{name:t("FAILED"),value:this.getValue(e[k.pod_failed])},{name:t("UNKNOWN"),value:this.getValue(e[k.pod_unknown])}]}]},{title:"QoS",total:this.getValue(e[k.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#329DCE","#F5A623","#EFF4F9"],data:[{name:"Guaranteed",value:this.getValue(e[k.guaranteed])},{name:"Burstable",value:this.getValue(e[k.burstable])},{name:"BestEffort",value:this.getValue(e[k.bestEffort])}]}]}]}}]),r}(h.default.Component))||c;a.default=N},4143:function(e,t,a){e.exports={container:"_2xVD1qrfXHvl9r5r8SShDD",flexcontainer:"_30iN0cFnWcRXMzEXFS2Oe4",header:"_2l8vdz50GO5tGdG58YUB8B",title:"_1zNKD_QfBwtl65ZJfLeJ6C",chartbox:"_12mCJBQSrNQdEcwibHfXTz",status:"_1ZFHVcOJY0hr1STvoIJ64U",item:"_1fDc1DB6-GjcZqaSSdmYH0",chartTitle:"_1xPFXv811SfHhogdGr4Bvg",chartInfo:"LlY0TzxvAPYIdFd2wBGQ9",areaChartItem:"gAUfsH_s9cAIzh47VwjVq",chartBox:"_7hrG5D-Km9_asMHxHjl6l",noData:"_2KY7aNfQNrWvOebtuOmbLM",item_pie:"_1NX5LEdBT_ERzbdmsFBpDB",pie_title:"_14_OkIumrtmLslVKSeI3EU",pie_title_tooltip:"_3ZYDhG602Fr54WBYwB7cI2",pie_box:"zRspEgTthH3qCOCOKoeHb",legendClassName:"_1RcE8jqehJOm1B60dmbuXD",pieNoData:"_2xnHt1UP12RsY-SacVvTgr",summary:"_3HmgUQy9SM3m9eV_yTPQjI",emptyPie:"_2cpVKY9EDtHTKjFB9RMQfe"}},4144:function(e,t,a){e.exports={header:"_2-cE517GhK_nSnp9Cj5JY7",title:"UpMV_0OK1Xt-OVwNYjtnR",operator:"_5Sx85MLt5JfpqnJgm8A9G",indicator:"UPoAdAvSq8PHqiX9QNjHe",disabled:"KohG2C__OcXUBbmQemzmg","margin-t0":"_1rEN6QVRlYhyctsGMUXpKU",padding12:"KUc9Dlb4jRV3LaesFLCiD",showMore:"_1YY9fiLuyC20oF0C1vcb4C",rotate:"_1fPw_H9PZ-1AAcroQYY5Ie",clusterTitle:"Tpcfb08k4FxMJOKMETud2",content:"pTEUIk3XVsH3WfzujWOw4",toolWrapper:"_1-WqStU5QUPDNPcl9mLERJ"}},4145:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=u(r(96)),o=n(r(0)),c=u(r(787)),i=u(r(1803)),s=u(r(4146));function d(e){var a=e.visible,r=void 0===a||a,n=e.onCancel,u=e.type,d=e.cluster,f=(0,o.useState)(!1),p=(0,l.default)(f,2),m=p[0],h=p[1];(0,o.useEffect)((function(){h(r)}),[r]);var v=(0,o.useCallback)((function(){h(!1),null==n||n()}),[]);return o.default.createElement(c.default,{bodyClassName:s.default.body,title:t("RESOURCE_USAGE_RANKING"),visible:m,onCancel:v,fullScreen:!0,hideFooter:!0},o.default.createElement(i.default,{type:u,cluster:d}))}var f=(0,o.memo)(d);a.default=f},4146:function(e,t,a){e.exports={body:"_1wu8ezMB1BAZu3Iz9ffZJA"}},4147:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var l,o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(26)),p=u(r(0)),m=r(14),h=r(239),v=r(186),y=n(r(240)),g=n(r(789)),_=n(r(790)),E=n(r(841)),b=r(453),S=r(791),O=n(r(1052)),R=n(r(4148)),T=n(r(4153));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var A=(0,h.inject)("rootStore")(l=(0,h.observer)(l=(0,S.trigger)(l=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).kubekeyClusterStore=new O.default,e.websocket=e.props.rootStore.websocket,e.initWebsocket=function(){var t=e.props,a=t.store,r=t.match,n=a.getWatchUrl({name:r.params.cluster});n&&(e.websocket.watch(n),e.disposer=(0,m.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.fetchDetail(a.detail)})))},e.handleCopy=function(){(0,b.copyToClipboard)((0,m.toJS)(e.props.store.agent)),y.default.success({content:t("COPY_SUCCESSFUL")})},e.showEditYAML=function(){var t=e.kubekeyClusterStore;e.trigger("resource.yaml.edit",{store:t,detail:(0,m.toJS)(t.detail)})},e.rerun=function(){e.kubekeyClusterStore.patch(e.kubekeyClusterStore.detail,{spec:{rerunTrigger:(new Date).getTime()}})},e.handleMenuClick=function(t,a){switch(a){case"edit-yaml":e.showEditYAML();break;case"rerun":e.rerun()}},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.store.detail,t=e.name,a=e.conditions;"True"===(0,f.default)(a,"Initialized.status")&&this.props.store.fetchAgent({cluster:t}),this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"renderMenu",value:function(){return p.default.createElement(v.Menu,{onClick:this.handleMenuClick},p.default.createElement(v.Menu.MenuItem,{key:"edit-yaml"},p.default.createElement(v.Icon,{name:"pen"})," ",t("EDIT_YAML")),p.default.createElement(v.Menu.MenuItem,{key:"rerun"},p.default.createElement(v.Icon,{name:"refresh"})," ",t("RERUN")))}},{key:"render",value:function(){var e=this.props.store,a=e.detail,r=e.isAgentLoading,n=e.agent,u=a.kkName,l=a.conditions,o=a.connectionType;return"False"===(0,f.default)(l,"Initialized.status")?p.default.createElement(g.default,null,p.default.createElement("div",{className:T.default.title},p.default.createElement(v.Loading,{size:28}),p.default.createElement(_.default,{title:t("CLUSTER_INIT_FAILED"),description:(0,f.default)(l,"Initialized.reason")}))):u?p.default.createElement(g.default,{className:T.default.wrapper},p.default.createElement("div",{className:T.default.title},p.default.createElement(_.default,{icon:"cluster",title:t("CREATING_CLUSTER"),description:t.html("CREATING_CLUSTER_DESC")}),p.default.createElement("div",{className:T.default.action},p.default.createElement(v.Dropdown,{theme:"dark",content:this.renderMenu(),placement:"bottomRight"},p.default.createElement(v.Button,{type:"flat",icon:"more"})))),p.default.createElement(R.default,{name:u,store:this.kubekeyClusterStore})):p.default.createElement(g.default,{className:T.default.wrapper},p.default.createElement("div",{className:T.default.title},p.default.createElement(v.Loading,{size:28}),p.default.createElement(_.default,{title:t("WAIT_FOR_CLUSTER"),description:t("WAIT_FOR_CLUSTER_DESC")})),"proxy"===o&&p.default.createElement("div",{className:T.default.content},p.default.createElement("div",{className:T.default.card},p.default.createElement(_.default,{title:t.html("CLUSTER_AGENT_TIP_1")})),p.default.createElement("div",{className:T.default.card},p.default.createElement(_.default,{className:"margin-b12",title:t.html("CLUSTER_AGENT_TIP_2")}),p.default.createElement(v.Button,{className:T.default.copy,onClick:this.handleCopy},t("COPY")),p.default.createElement(v.Loading,{spinning:r},n?p.default.createElement(E.default,{mode:"yaml",className:T.default.editor,options:this.editOptions,value:n}):null)),p.default.createElement("div",{className:T.default.card},p.default.createElement(_.default,{title:t.html("CLUSTER_AGENT_TIP_3"),description:t.html("CLUSTER_AGENT_TIP_3_DESC")}))),u&&p.default.createElement(R.default,{name:u}))}},{key:"editOptions",get:function(){return{width:"100%",height:"100%",readOnly:!0}}}]),r}(p.Component))||l)||l)||l;a.default=A},4148:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var u,l=r(a(36)),o=r(a(37)),c=r(a(55)),i=r(a(56)),s=r(a(51)),d=n(a(0)),f=a(14),p=a(239),m=r(a(325)),h=r(a(4149)),v=r(a(4151));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,p.observer)(u=function(e){(0,c.default)(a,e);var t=y(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).store=e.props.store,e.websocket=new m.default,e.initWebsocket=function(){var t=e.props.name;if(t){var a=e.store.getWatchUrl({name:t});a&&(e.websocket.watch(a),e.disposer=(0,f.reaction)((function(){return e.websocket.message}),(function(t){"MODIFIED"!==t.type&&"ADDED"!==t.type||(e.store.detail=e.store.mapper((0,f.toJS)(t.object)))})))}},e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.store.detail;return d.default.createElement("div",{className:"padding-12"},d.default.createElement(h.default,{detail:e}),d.default.createElement(v.default,{detail:e}))}}]),a}(d.Component))||u;t.default=g},4149:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(5),r(18),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(24),r(17),r(64);var l=u(r(30)),o=u(r(36)),c=u(r(37)),i=u(r(55)),s=u(r(56)),d=u(r(51)),f=n(r(0)),p=u(r(26)),m=u(r(3)),h=r(186),v=r(1860),y=u(r(4150));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"getBarLength",value:function(e){if(0===e.length)return"20px";var t=e.length-1,a=e[t].status;return"calc(".concat(20*t,"% - ").concat(24*t-(a?80:60),"px)")}},{key:"render",value:function(){var e=(0,p.default)(this.props.detail,"status.Conditions",[]);return f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("div",{className:y.default.card},f.default.createElement("div",{className:y.default.title},t("CLUSTER_CREATION_PROGRESS")," ",f.default.createElement(h.Tooltip,{content:t("CLUSTER_CREATION_PROGRESS_TIP")},f.default.createElement(h.Icon,{name:"question"}))),f.default.createElement("div",{className:y.default.progress},f.default.createElement("div",{className:y.default.bar},f.default.createElement("div",{className:y.default.colorBar,style:{width:this.getBarLength(e)}})),f.default.createElement("div",{className:y.default.dots},v.CLUSTER_CREATING_STEPS.map((function(a,r){return f.default.createElement("div",{key:a,style:{left:"".concat(20*r,"%")}},f.default.createElement("div",{className:(0,m.default)(y.default.circle,(0,l.default)({},y.default.checked,r<=e.length-1))},r<=e.length-1&&((0,p.default)(e,"[".concat(r,"].status"))?f.default.createElement(h.Icon,{name:"check",size:14,type:"light"}):f.default.createElement(h.Icon,{name:"dot",size:14,type:"light"}))),f.default.createElement("div",null,t(a.toUpperCase().replace(/\s+/g,"_"))))}))))))}}]),r}(f.Component);a.default=_},4150:function(e,t,a){e.exports={wrapper:"_3mjVZMS-IipcuLfOfw2TT2",card:"_2XfUrdhMOjywqsU42DwkV6",title:"_36yat1-8M_d_sg6Wd1tFbp",progress:"_10sg57w7b2ZSEmNf6fPfj",bar:"Lupxh5_RjIqKO0OODGYIQ",colorBar:"_1X76G0CMDHCscdvxTdsJoW",dots:"_1pN2kOWSA11mL6aBZkFW2g",circle:"_1kpMMRPadFK8uyLHiyRwtj",checked:"_3cS1Vahcxyxr75JNXJVRcZ"}},4151:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(18),r(4),r(23),r(24),r(17),r(62),r(64),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(24),r(17),r(62),r(64);var l,o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=u(r(0)),m=n(r(3)),h=r(14),v=r(239),y=n(r(26)),g=n(r(63)),_=n(r(790)),E=n(r(1069)),b=n(r(318)),S=n(r(325)),O=n(r(1041)),R=r(72),T=r(1860),C=n(r(4152));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,v.observer)(l=function(e){(0,s.default)(r,e);var a=A(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).watchLogs=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo");t.containerStore.watchLogs({namespace:e.namespace,podName:(0,y.default)(e,"pods[0].name"),container:(0,y.default)(e,"pods[0].containers[0].name"),timestamps:!0,follow:!0},t.scrollToBottom)},t.watchJob=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo"),a=t.workloadStore.getWatchUrl(e);a&&(t.websocket.watch(a),t.jobDisposer=(0,h.reaction)((function(){return t.websocket.message}),(function(e){"MODIFIED"!==e.type&&"ADDED"!==e.type||(t.workloadStore.detail=t.workloadStore.mapper((0,h.toJS)(e.object)))})))},t.handleToggle=function(){t.setState((function(e){return{showContent:!e.showContent}}))},t.scrollToBottom=function(){var e=t.logRef.current;e&&(e.scrollTop=e.scrollHeight)},t.state={showContent:!1},t.logRef=p.default.createRef(),t.workloadStore=new b.default("jobs"),t.containerStore=new O.default,t.websocket=new S.default,t.jobNameDisposer=(0,h.when)((function(){return!(0,g.default)((0,y.default)(t.props.detail,"status.jobInfo.name"))}),(function(){return t.watchJob()})),t.podNameDisposer=(0,h.when)((function(){return!(0,g.default)((0,y.default)(t.props.detail,"status.jobInfo.pods[0].name"))}),(function(){return t.watchLogs()})),t}return(0,i.default)(r,[{key:"componentWillUnmount",value:function(){this.websocket.close(),this.jobDisposer&&this.jobDisposer(),this.jobNameDisposer&&this.jobNameDisposer(),this.podNameDisposer&&this.podNameDisposer(),this.containerStore.stopWatchLogs()}},{key:"renderTitle",value:function(){var e=this.state.showContent,a=(0,y.default)(this.props.detail,"status.Conditions",[]),r=T.CLUSTER_CREATING_STEPS[Math.max(a.length-1,0)],n=(0,h.toJS)(this.workloadStore.detail),u=n.startTime?p.default.createElement(E.default,{data:n,module:"jobs"}):"-";return p.default.createElement("div",{className:(0,m.default)(C.default.title,(0,o.default)({},C.default.isOpen,e)),onClick:this.handleToggle},p.default.createElement(_.default,{icon:"log",title:t("LOGS"),description:t("CURRENT_STEP",{step:t(r.toUpperCase().replace(/\s+/g,"_"))})}),p.default.createElement(_.default,{title:u,description:t("STATUS")}))}},{key:"renderContent",value:function(){var e=this.containerStore.logs.data,a=this.state.showContent,r=(0,g.default)(e)?t("FETCHING_LOGS"):e,n=String(r).replace(/\\r\\n/g,"\n").split("\n");return p.default.createElement("div",{className:(0,m.default)(C.default.content,(0,o.default)({},C.default.visible,a))},p.default.createElement("div",{className:C.default.logs,ref:this.logRef},n.map((function(e,t){var a=e.match(R.PATTERN_UTC_TIME),r=a?a[0]:t,n=a?e.replace(a[0],""):e;return p.default.createElement("p",{key:r,dangerouslySetInnerHTML:{__html:n}})}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:C.default.wrapper},this.renderTitle(),this.renderContent())}}]),r}(p.Component))||l;a.default=P},4152:function(e,t,a){e.exports={wrapper:"_25KOUd45-4Q28aCgRD49GG",title:"_1W1X2zkrW3S0PpZ6FdJHsi",isOpen:"_3BuS-DTafzwgTuSCgeW1Bb",content:"_1j35KIkL2Sl_lqg0C-dpiW",visible:"_2DebL1ByAJguaU4bglQkE9",logs:"_2wGsKfHwkQd7Lj4NCVD8O0"}},4153:function(e,t,a){e.exports={wrapper:"_1VaG1DcxZ_MwPPPku0wcTX",title:"_2kHOLbFHqRzNAwPi1SslL9",content:"_1SRuNE8l2FOBwKBPcDUnHp",card:"_2TQEH5SH_AY6j1HGaEW22F",copy:"_114BbMNwxx_H0ds-6NmHCx",action:"_3TZYY0pxvhPzBF1DLLAH_P"}},4154:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(109),r(5),r(11),r(6),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(30)),c=n(r(315)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(26)),v=n(r(250)),y=n(r(240)),g=n(r(788)),_=n(r(792)),E=n(r(796)),b=u(r(793)),S=r(52),O=r(72),R=n(r(866)),T=n(r(1212));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,b.default)({store:new R.default,name:"STORAGE_CLASS",module:"storageclasses"})(l=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).accessorStore=new T.default,e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.prefix;return[{title:t("NAME"),key:"name",dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return m.default.createElement(g.default,{icon:O.ICON_TYPES[e.module],to:"".concat(n,"/").concat(t),title:(0,S.getDisplayName)(a),desc:a.description})}},{title:t("PVC_COUNT"),dataIndex:"volumeCount",isHideable:!0,render:function(e,t){return(0,h.default)(t,'annotations["kubesphere.io/pvc-count"]')||0}},{title:t("DEFAULT_STORAGE_CLASS"),dataIndex:"default",isHideable:!0,render:function(e){return e?t("YES"):"-"}},{title:t("ALLOW_VOLUME_CLONE"),dataIndex:"annotations",isHideable:!0,render:function(e){return"true"===e["storageclass.kubesphere.io/allow-clone"]?t("TRUE"):t("FALSE")}},{title:t("ALLOW_VOLUME_SNAPSHOT"),dataIndex:"_originData",isHideable:!0,render:function(e){return"true"===e.metadata.annotations["storageclass.kubesphere.io/allow-snapshot"]?t("TRUE"):t("FALSE")}},{title:t("ALLOW_VOLUME_EXPANSION"),dataIndex:"allowVolumeExpansion",isHideable:!0,render:function(e){return e?t("TRUE"):t("FALSE")}},{title:t("PROVISIONER"),dataIndex:"provisioner",isHideable:!0}]},e}return(0,s.default)(r,[{key:"validateSelect",value:function(e){var t=this,a=e.callback;return function(){var e=t.list,r=e.selectedRowKeys,n=e.data,u=n.some((function(e){return(0,v.default)(r,e.name)&&e.associationPVCCount}));return u?t.notifyDeleteTips():a.apply(void 0,arguments)}}},{key:"notifyDeleteTips",value:function(){y.default.error({content:"".concat(t("DEPENDENT_STORAGE_CLASS_DELETE_TIPS"))})}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return m.default.createElement(b.ListPage,this.props,m.default.createElement(_.default,t),m.default.createElement(E.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns()})))}},{key:"tableActions",get:function(){return A(A({},this.props.tableProps.tableActions),{},{selectActions:[]})}},{key:"itemActions",get:function(){return[]}}]),r}(m.default.Component))||l;a.default=k},4155:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(30)),o=n(r(315)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(792)),v=r(317),y=n(r(831)),g=n(r(4156));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.store.getKsVersion(this.props.match.params)}},{key:"renderBanner",value:function(){return this.store.ksVersion>=3.3?p.default.createElement(h.default,(0,o.default)({},this.bannerProps,{tips:this.tips,routes:this.routes})):p.default.createElement(h.default,this.bannerProps)}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderBanner(),(0,v.renderRoutes)(g.default))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_VOLUME_SNAPSHOT_CLASS_Q"),description:t("WHAT_IS_VOLUME_SNAPSHOT_CLASS_A")},{title:t("WHAT_IS_VOLUME_SNAPSHOT_CONTENT_Q"),description:t("WHAT_IS_VOLUME_SNAPSHOT_CONTENT_A")}]}},{key:"bannerProps",get:function(){return{className:"margin-b12",description:t("VOLUME_SNAPSHOT_DESC"),module:"VOLUME_SNAPSHOT",title:t("VOLUME_SNAPSHOT_PL"),icon:"snapshot"}}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return E(E({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(p.default.Component))||u)||u;a.default=S},4156:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4157)),l=r(a(4159)),o="/whizard-telemetry/:cluster/volume-snapshots",c=[{path:"".concat(o,"/snapshots"),title:"VOLUME_SNAPSHOT",component:u.default,exact:!0},{path:"".concat(o,"/snapshot-content"),title:"VOLUME_SNAPSHOT_CONTENT",component:l.default,exact:!0},(0,n.getIndexRoute)({path:o,to:"".concat(o,"/snapshots"),exact:!0})];t.default=c},4157:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c=n(r(44)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=r(186),h=n(r(810)),v=n(r(788)),y=n(r(795)),g=r(793),_=n(r(63)),E=n(r(0)),b=n(r(831)),S=n(r(914)),O=n(r(910)),R=r(52),T=r(72),C=n(r(4158));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,g.withClusterList)({store:new S.default,module:"volume-snapshots",name:"VOLUME_SNAPSHOT",authKey:"volumesnapshots"})(o=function(e){(0,d.default)(r,e);var a=A(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).volumeStore=new b.default,e.snapshotClass=new O.default,e.checkSnapshotClassExist=function(){var t=(0,c.default)(l.default.mark((function t(a){var r,n,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,n=r.cluster,u=r.namespace,t.next=3,e.snapshotClass.fetchDetail({name:a,cluster:n,namespace:u});case 3:return t.abrupt("return",!(0,_.default)(e.snapshotClass.detail));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(r,[{key:"getStatus",value:function(){return T.VOLUME_SNAPSHOT_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this.props,a=e.getSortOrder,r=e.getFilteredValue,n=e.module,u=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),search:!0,sorter:!0,render:function(e,t){return E.default.createElement(v.default,{icon:"snapshot",iconSize:40,to:"/whizard-telemetry/".concat(u,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e),title:e,desc:t.snapshotClassName})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,filters:this.getStatus(),filteredValue:r("status"),search:!0,render:function(e,a){var r=a.errorMessage,n=a.backupStatus;return E.default.createElement("div",{className:C.default.status},E.default.createElement(y.default,{type:n,name:t("CREATE_STATUS_".concat(n.toUpperCase()))})," ",!(0,_.default)(r)&&E.default.createElement(m.Tooltip,{content:r},E.default.createElement(m.Icon,{name:"question"})))}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,render:function(e){return E.default.createElement("div",null,(0,R.showNameAndAlias)(e,"project"))}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"20%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:a("createTime"),width:"20%",render:function(e){return e?(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return E.default.createElement(g.ListPage,(0,u.default)({},this.props,{noWatch:!0}),E.default.createElement(h.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster})))}},{key:"itemActions",get:function(){return[]}}]),r}(E.default.Component))||o;a.default=P},4158:function(e,t,a){e.exports={taints:"_2QkRzBHJahlinMkxhdBaCU",overview:"LC-Kk_948-UjCvQLjcMnJ",namespaceFilter:"zYlp6ELVxW-g5gSVRcV6Z"}},4159:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(43));r(41);var l,o=n(r(44)),c=n(r(315)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(793),v=r(72),y=n(r(796)),g=n(r(788)),_=n(r(795)),E=n(r(1213)),b=n(r(63)),S=r(52);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,h.withClusterList)({store:new E.default,module:"volume-snapshot-content",name:"VOLUME_SNAPSHOT_CONTENT",authKey:"volumesnapshots"})(l=function(e){(0,d.default)(r,e);var a=O(r);function r(){return(0,i.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"getStatus",value:function(){return v.VOLUME_SNAPSHOT_CLASS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this.props,a=e.getSortOrder,r=e.getFilteredValue,n=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),search:!0,sorter:!0,render:function(e,t){return m.default.createElement(g.default,{icon:"snapshot",iconSize:40,to:"/clusters/".concat(n,"/volume-snapshot-content/").concat(e),title:e,desc:t.snapshotClassName})}},{title:t("STATUS"),dataIndex:"readyToUse",isHideable:!0,filters:this.getStatus(),filteredValue:r("readyToUse"),search:!0,render:function(e,a){var r=a.errorMessage,n=a.status;return m.default.createElement("div",null,m.default.createElement(_.default,{type:n,name:t(n.toUpperCase())})," ",!(0,b.default)(r)&&m.default.createElement(Tooltip,{content:r},m.default.createElement(Icon,{name:"question"})))}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"7%",render:function(e){return"".concat((0,S.memoryFormat)(e,"Gi"),"Gi")}},{title:t("VOLUME_SNAPSHOT_CLASS"),dataIndex:"snapshotClassName",isHideable:!0,width:"14%",render:function(e){return e||"-"}},{title:t("DELETION_POLICY"),dataIndex:"deletionPolicy",isHideable:!0,width:"9.86%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:a("createTime"),width:"12.33%",render:function(e){return e?(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return m.default.createElement(h.ListPage,(0,c.default)({},this.props,{noWatch:!0}),m.default.createElement(y.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e,a=this.props,r=a.trigger,n=a.routing,l=a.name,c=a.store,i=a.match.params.cluster;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),onClick:function(e){r("volume.snapshotContent.baseInfo.edit",{store:c,cluster:i,detail:e,success:n.query})}},{key:"view",icon:"eye",text:t("VIEW_YAML"),onClick:(e=(0,o.default)(u.default.mark((function e(t){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetchDetail({name:t.name,cluster:i});case 2:a=e.sent,r("resource.yaml.edit",{readOnly:!0,detail:t,yaml:a._originData});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:l,detail:e,success:n.query})}}]}}]),r}(m.default.Component))||l;a.default=R},4160:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(12),r(109),r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(315)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=u(r(793)),h=n(r(788)),v=n(r(792)),y=n(r(796)),g=r(52),_=n(r(910));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var b=(0,m.default)({store:new _.default,module:"volumesnapshotclasses",authKey:"volumes",name:"VOLUME_SNAPSHOT_CLASS",rowKey:"uid"})(l=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.prefix;return[{title:t("NAME"),dataIndex:"name",search:!0,sorter:!0,sortOrder:r("name"),render:function(e,t){return p.default.createElement(h.default,{to:"".concat(n,"/").concat(e),title:(0,g.getDisplayName)(t),desc:t.description})}},{title:t("VOLUME_SNAPSHOT_PL"),dataIndex:"count",isHideable:!0,width:"17.6%"},{title:t("PROVISIONER"),dataIndex:"driver",isHideable:!0,width:"17.6%"},{title:t("DELETION_POLICY"),dataIndex:"deletionPolicy",isHideable:!0,width:"17.6%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,isHideable:!0,width:"12.3%",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.tableProps,a=e.bannerProps;return p.default.createElement(m.ListPage,(0,o.default)({},this.props,{noWatch:!0}),p.default.createElement(v.default,a),p.default.createElement(y.default,(0,o.default)({},t,{columns:this.getColumns(),itemActions:this.itemActions})))}},{key:"itemActions",get:function(){return[]}}]),r}(p.default.Component))||l;a.default=b},4161:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(30)),o=n(r(315)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(792)),v=r(317),y=n(r(907)),g=n(r(4162));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).pv=new y.default,t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.pv.getKsVersion(this.props.match.params)}},{key:"renderBanner",value:function(){return this.pv.ksVersion>=3.2?p.default.createElement(h.default,(0,o.default)({},this.bannerProps,{tips:this.tips,routes:this.routes})):p.default.createElement(h.default,(0,o.default)({},this.bannerProps,{tips:this.tips}))}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderBanner(),(0,v.renderRoutes)(g.default))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"bannerProps",get:function(){return{className:"margin-b12",description:t("PERSISTENT_VOLUME_CLAIM_DESC"),module:"persistentvolumeclaims",title:t("PERSISTENT_VOLUME_CLAIM_PL")}}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return E(E({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(p.default.Component))||u)||u;a.default=S},4162:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4163)),l=r(a(4165)),o="/whizard-telemetry/:cluster/volumes",c=[{path:"".concat(o,"/Volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:u.default,exact:!0},{path:"".concat(o,"/PV"),title:"PERSISTENT_VOLUME_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:o,to:"".concat(o,"/Volumes"),exact:!0})];t.default=c},4163:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(73),r(18),r(192),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(18),r(28),r(192),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c=n(r(44)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=r(186),h=n(r(810)),v=n(r(788)),y=n(r(795)),g=r(793),_=n(r(1131)),E=n(r(63)),b=n(r(804)),S=n(r(0)),O=r(433),R=n(r(907)),T=n(r(831)),C=r(52),A=r(72),P=r(434),k=n(r(4164));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,g.withClusterList)({store:new T.default,module:"persistentvolumeclaims",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(o=function(e){(0,d.default)(r,e);var a=N(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).pvStore=new R.default,e.handleTabChange=function(){var t=e.props.match.params.cluster;e.props.rootStore.routing.push("/whizard-telemetry/".concat(t,"/PV"))},e.getItemDesc=function(e){var t=(0,P.getVolumeStatus)(e);return(0,E.default)(t)?e.storageClassName||"-":S.default.createElement(b.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.mapperAccessMode=function(e){var t=(0,C.map_accessModes)(e);return S.default.createElement("span",null,t.join(","))},e.renderAccessTitle=function(){var e=S.default.createElement("div",null,S.default.createElement("div",null,t("ACCESS_MODE_TCAP"),":"),S.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),S.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),S.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX")));return S.default.createElement("div",{className:k.default.mode_title},t("ACCESS_MODE_TCAP"),S.default.createElement(m.Tooltip,{content:e},S.default.createElement(m.Icon,{name:"question",size:16,className:k.default.question})))},e.pvYamlView=function(){var t=(0,c.default)(l.default.mark((function t(a){var r,n;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.spec.volumeName,n=e.props.match.params.cluster,t.next=4,e.pvStore.fetchDetail({cluster:n,name:r});case 4:return t.abrupt("return",e.props.trigger("resource.yaml.edit",{detail:e.pvStore.detail,yaml:e.pvStore.detail._originData,readOnly:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.store.getKsVersion(this.props.match.params)}},{key:"getStatus",value:function(){return A.VOLUME_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,u=this.props.match.params.cluster,l={title:t("PERSISTENT_VOLUME"),dataIndex:"_originData",isHideable:!0,search:!1,width:"28.5%",render:function(a){return S.default.createElement("div",{id:"pvColumn",className:k.default.pv_content},S.default.createElement(O.Link,{to:"/clusters/".concat(u,"/pv/").concat(a.spec.volumeName)},a.spec.volumeName),a.spec.volumeName&&S.default.createElement(m.Tooltip,{content:t("VIEW_YAML")},S.default.createElement(m.Icon,{className:k.default.yaml,name:"log",size:20,onClick:function(){return e.pvYamlView(a)}})))}},o=[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(t,a){return S.default.createElement(v.default,{icon:"storage",iconSize:40,to:"Terminating"===a.phase?"":"/whizard-telemetry/".concat(u,"/projects/").concat(a.namespace,"/volumes/").concat(t),isMultiCluster:a.isFedManaged,desc:e.getItemDesc(a),title:(0,C.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"8.8%",render:function(e,a){var r=a.phase;return S.default.createElement(y.default,{type:r,name:t("VOLUME_STATUS_".concat(r.toUpperCase())),flicker:!0})}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.32%",render:function(t){return e.mapperAccessMode(t)}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"7.74%",render:function(e,t){return S.default.createElement(_.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:140,render:function(e){return(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}];return this.props.store.ksVersion>=3.2&&o.splice(2,0,l),o}},{key:"render",value:function(){var e=this.props,t=e.tableProps,a=e.match;return S.default.createElement(g.ListPage,this.props,S.default.createElement(h.default,(0,u.default)({},t,{className:"table-1-5",itemActions:this.itemActions,columns:this.getColumns(),selectActions:[],cluster:a.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"tabs",get:function(){return{value:"Volume",onChange:this.handleTabChange,options:[{value:"Volume",label:t("PERSISTENT_VOLUME_CLAIM")},{value:"PV",label:t("PV")}]}}},{key:"itemActions",get:function(){return[]}}]),r}(S.default.Component))||o;a.default=D},4164:function(e,t,a){e.exports={mode_title:"_3T4isUw5EVDlxkpcqj2Y5f",question:"WsiYbzPrFZvux43GLjoNV",pv_content:"_1MCPVNhmvxQrzozVlw1jtP",yaml:"_2ezSzekAV0rloYVqXAFxSP"}},4165:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(86),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var l,o=n(r(30)),c=n(r(315)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(63)),v=u(r(793)),y=n(r(796)),g=n(r(907)),_=r(52),E=r(186),b=r(434),S=r(72),O=n(r(804)),R=n(r(788)),T=n(r(795)),C=n(r(4166));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,v.default)({store:new g.default,module:"persistentvolumes",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME",rowKey:"uid"})(l=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).cantDelete=function(e){var t=e.status;return["Bound"].indexOf(t.phase)>-1},e.getItemDesc=function(e){var t=(0,b.getVolumeStatus)(e);return(0,h.default)(t)?e.storageClassName||"-":m.default.createElement(O.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged||["Bound"].indexOf(e.status.phase)>-1,name:e.name}},e.renderAccessTitle=function(){var e=m.default.createElement("div",null,m.default.createElement("div",null,t("ACCESS_MODE_TCAP")),m.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),m.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),m.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX")));return m.default.createElement("div",{className:C.default.mode_title},t("ACCESS_MODE_TCAP"),m.default.createElement(E.Tooltip,{content:e},m.default.createElement(E.Icon,{name:"question",size:16,className:C.default.question})))},e.mapperAccessMode=function(e){var t=(0,_.map_accessModes)(e);return m.default.createElement("span",null,t.join(","))},e}return(0,s.default)(r,[{key:"getStatus",value:function(){return S.PV_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,u=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(t,a){return m.default.createElement(R.default,{icon:"storage",iconSize:40,to:"Terminating"===a.phase?"":"/whizard-telemetry/".concat(u,"/pv/").concat(t),isMultiCluster:a.isFedManaged,desc:e.getItemDesc(a),title:(0,_.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"10.56%",render:function(e){var a=e.phase;return m.default.createElement(T.default,{type:a,name:t("PV_STATUS_".concat(a.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",isHideable:!0,width:"7%",render:function(e){return m.default.createElement("div",null,m.default.createElement("p",null,e))}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.32%",render:function(t){return e.mapperAccessMode(t)}},{title:t("RECLAIM_POLICY"),dataIndex:"_originData",isHideable:!0,width:"7.74%",render:function(e){return e.spec.persistentVolumeReclaimPolicy}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:140,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return m.default.createElement(v.ListPage,this.props,m.default.createElement(y.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,renderProjectSelect:!1})))}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return P(P({},this.props.tableProps.tableActions),{},{selectActions:[]})}}]),r}(m.default.Component))||l;a.default=N},4166:function(e,t,a){e.exports={mode_title:"_3iZqg1DUhzX135cuASjcNn",question:"_28wmcih5RA4-UrbF3hVwEF",pv_content:"zkamDsFKmP5C0PZrg84HH",yaml:"_1djaTjweZ2Cf77ddhsutHV"}},4167:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(86),r(29),r(18),r(97),r(16),r(27),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(324),r(38),r(62),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(86),r(29),r(18),r(28),r(97),r(42),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(24),r(17),r(324),r(38),r(62),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(7),r(32);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(63)),y=n(r(26)),g=n(r(158)),_=r(186),E=r(52),b=r(72),S=r(444),O=r(794),R=n(r(856)),T=n(r(1138)),C=r(793),A=n(r(788)),P=n(r(795)),k=n(r(789)),N=n(r(790)),D=n(r(792)),w=n(r(796)),L=n(r(4168));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var x={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",gpu_utilization:"node_gpu_utilization",gpu_used:"node_gpu_usage",gpu_total:"node_gpu_total",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_used:"node_gpu_memory_usage",gpu_memory_total:"node_gpu_memory_total",pod_used:"node_pod_running_count",pod_total:"node_pod_quota",allocatable_cpu_total:"node_pod_requests_cpu_total",allocatable_cpu_utilisation:"node_pod_requests_cpu_allocatable_utilisation",limit_cpu_total:"node_pod_limits_cpu_total",limit_cpu_utilisation:"node_pod_limits_cpu_allocatable_utilisation",allocatable_memory_total:"node_pod_requests_memory_total",allocatable_memory_utilisation:"node_pod_requests_memory_allocatable_utilisation",limits_memory_total:"node_pod_limits_memory_total",limits_memory_utilisation:"node_pod_limits_memory_allocatable_utilisation"},U=(0,C.withClusterList)({store:new R.default,name:"CLUSTER_NODE",module:"nodes"})(c=function(e){(0,f.default)(r,e);var a=j(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).store=e.props.store,e.monitoringStore=new T.default({cluster:e.cluster}),e.getData=function(){var t=(0,i.default)(l.default.mark((function t(a){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(M(M({},a),e.props.match.params));case 2:return t.next=4,e.monitoringStore.fetchMetrics(M(M({},e.props.match.params),{},{resources:e.store.list.data.map((function(e){return e.name})),metrics:Object.values((0,E.hideGPUByLicense)(x,e.cluster)),last:!0}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnschedulable=function(e){return e.taints.some((function(e){return"node.kubernetes.io/unschedulable"===e.key}))},e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.getLastValue=function(t,a,r){var n=e.monitoringStore.data,u=((0,y.default)(n[a],"data.result")||[]).find((function(e){return(0,y.default)(e,"metric.node")===t.name})),l=(0,y.default)(u,"value[1]",0);return(0,O.getValueByUnit)(l,r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){var n=e.getLastValue(t,(0,E.hideGPUByLicense)(x,e.cluster)[a.type],a.unit);r[a.type]=parseFloat(n)})),r},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var a=e.props,r=a.module,n=a.prefix,u=a.getSortOrder,l=a.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:u("name"),search:!0,key:"name",render:function(e,t){return h.default.createElement(A.default,{icon:b.ICON_TYPES[r],iconSize:40,to:"success"!==t.importStatus?null:"".concat(n,"/").concat(e),title:e,desc:t.ip})}},{title:t("STATUS"),dataIndex:"status",key:"status",filters:e.getStatus(),filteredValue:l("status"),isHideable:!0,search:!0,render:function(a,r){var n=(0,S.getNodeStatus)(r),u=r.taints;return h.default.createElement("div",{className:L.default.status},h.default.createElement(P.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),!(0,v.default)(u)&&"success"===r.importStatus&&h.default.createElement(_.Tooltip,{content:e.renderTaintsTip(u)},h.default.createElement("span",{className:L.default.taints},u.length)))}},{title:t("ROLE"),dataIndex:"role",key:"role",isHideable:!0,search:!0,render:function(e){return-1===e.indexOf("master")?t("WORKER"):t("CONTROL_PLANE")}},{title:t("CPU_USAGE"),key:"cpu",isHideable:!0,render:function(a){var r=e.getRecordMetrics(a,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return h.default.createElement(N.default,{title:h.default.createElement("div",{className:L.default.resource},h.default.createElement("span",null,e.toPercentage(r.cpu_utilisation)),r.cpu_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(r.cpu_used,"/").concat(r.cpu_total," ").concat(t("CORE_PL"))})}},{title:t("MEMORY_USAGE"),key:"memory",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return h.default.createElement(N.default,{title:h.default.createElement("div",{className:L.default.resource},h.default.createElement("span",null,e.toPercentage(a.memory_utilisation)),a.memory_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.memory_used,"/").concat(a.memory_total," GiB")})}},{title:t("GPU_USAGE"),key:"gpu",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"gpu_used",unit:"Core"},{type:"gpu_total",unit:"Core"},{type:"gpu_utilization"}]);return h.default.createElement(N.default,{title:h.default.createElement("div",{className:L.default.resource},h.default.createElement("span",null,e.toPercentage(a.gpu_utilization)),a.gpu_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.gpu_used,"/").concat(a.gpu_total," GPU")})}},{title:t("GPU_MEMORY_USAGE"),key:"gpu_memory",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"gpu_memory_used",unit:"Gi"},{type:"gpu_memory_total",unit:"Gi"},{type:"gpu_memory_utilization"}]);return h.default.createElement(N.default,{title:h.default.createElement("div",{className:L.default.resource},h.default.createElement("span",null,e.toPercentage(a.gpu_memory_utilization)),a.gpu_memory_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.gpu_memory_used,"/").concat(a.gpu_memory_total," GiB")})}},{title:t("POD_PL"),key:"pods",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"pod_used"},{type:"pod_total"}]),r=a.pod_total?parseFloat(a.pod_used/a.pod_total):0;return h.default.createElement(N.default,{title:"".concat(e.toPercentage(r)),description:"".concat(a.pod_used,"/").concat(a.pod_total)})}},{title:t("ALLOCATED_CPU"),key:"allocated_resources_cpu",isHideable:!0,render:e.renderCPUTooltip},{title:t("ALLOCATED_MEMORY"),key:"allocated_resources_memory",isHideable:!0,render:e.renderMemoryTooltip}].filter((function(t){return!e.omitKeys.has(t.key)}))},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){r[a.type]=e.getLastValue(t,(0,E.hideGPUByLicense)(x,e.cluster)[a.type],a.unit)})),r},e.renderCPUTooltip=function(a){var r=e.getRecordMetrics(a,[{type:"allocatable_cpu_total"},{type:"allocatable_cpu_utilisation"},{type:"limit_cpu_total"},{type:"limit_cpu_utilisation"}]),n=h.default.createElement("p",null,1===(0,E.cpuFormat)(r.limit_cpu_total)?t("CPU_LIMIT_SI",{core:(0,E.cpuFormat)(r.limit_cpu_total),percent:e.toPercentage(r.limit_cpu_utilisation)}):t("CPU_LIMIT_PL",{core:(0,E.cpuFormat)(r.limit_cpu_total),percent:e.toPercentage(r.limit_cpu_utilisation)}));return h.default.createElement(_.Tooltip,{content:n,placement:"top"},h.default.createElement(N.default,{title:1===(0,E.cpuFormat)(r.allocatable_cpu_total)?t("CPU_REQUEST_SI",{core:(0,E.cpuFormat)(r.allocatable_cpu_total),percent:e.toPercentage(r.allocatable_cpu_utilisation)}):t("CPU_REQUEST_PL",{core:(0,E.cpuFormat)(r.allocatable_cpu_total),percent:e.toPercentage(r.allocatable_cpu_utilisation)}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(a){var r=e.getRecordMetrics(a,[{type:"allocatable_memory_total"},{type:"allocatable_memory_utilisation"},{type:"limits_memory_total"},{type:"limits_memory_utilisation"}]),n=h.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,E.memoryFormat)(r.limits_memory_total,"Gi"),percent:e.toPercentage(r.limits_memory_utilisation)}));return h.default.createElement(_.Tooltip,{content:n,placement:"top"},h.default.createElement(N.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,E.memoryFormat)(r.allocatable_memory_total,"Gi"),percent:e.toPercentage(r.allocatable_memory_utilisation)}),description:t("RESOURCE_REQUEST")}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchCount(this.props.match.params)}},{key:"toPercentage",value:function(e){var t=(0,g.default)(e)||isNaN(e)?0:Number(e);return"".concat(Math.ceil(100*t),"%")}},{key:"getStatus",value:function(){return b.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"renderOverview",value:function(){var e=this.store,a=e.masterNum,r=e.list.total;return h.default.createElement(k.default,{className:"margin-b12"},h.default.createElement("div",{className:L.default.overview},h.default.createElement(N.default,{icon:"nodes",title:r,description:1===r?t("NODE_SI"):t("NODE_PL")}),h.default.createElement(N.default,{title:a,description:1===a?t("MASTER_NODE_SI"):t("MASTER_NODE_PL")})))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=this.monitoringStore.isLoading;return h.default.createElement(C.ListPage,(0,u.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(D.default,(0,u.default)({},a,{title:t("CLUSTER_NODE_PL"),tips:this.tips})),this.renderOverview(),h.default.createElement(w.default,(0,u.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:(0,E.hideGPUByLicense)(this.getColumns(),this.cluster),isLoading:r.isLoading||n})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"tips",get:function(){return[{title:t("NODE_TYPES_Q"),description:t("NODE_TYPES_A")},{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return M(M({},this.props.tableProps.tableActions),{},{actions:[],selectActions:[]})}},{key:"hasMonitoring",get:function(){return globals.app.hasClusterModule(this.cluster,"whizard-monitoring")}},{key:"omitKeys",get:function(){return new Set(this.hasMonitoring?[]:["cpu","memory","gpu","gpu_memory","pods","allocated_resources_cpu","allocated_resources_memory"])}}]),r}(h.default.Component))||c;a.default=U},4168:function(e,t,a){e.exports={taints:"_2XjrLZ7F6TpZ4ZlgAC-JJC",overview:"_1tXqgg1UCNvEXza3urHkMY",resource:"_27mkxuiI4_X-Z02imreev4",unAuthord:"Y9aPXe2oo2r0c9jL28vI3"}},4169:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(73),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(73),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(24),r(17),r(62),r(64),r(7);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(63)),y=n(r(26)),g=r(186),_=r(52),E=r(72),b=r(444),S=r(794),O=n(r(1175)),R=n(r(1138)),T=n(r(1068)),C=r(793),A=n(r(788)),P=n(r(795)),k=n(r(790)),N=n(r(787)),D=n(r(792)),w=n(r(796)),L=n(r(4170));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var x={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},U=(0,C.withClusterList)({store:new O.default,name:"EDGE_NODE",module:"edgenodes"})(c=function(e){(0,f.default)(r,e);var a=j(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).store=e.props.store,e.monitoringStore=new R.default({cluster:e.cluster}),e.getData=function(){var t=(0,i.default)(l.default.mark((function t(a){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(M(M(M({},a),e.props.match.params),{},{type:"edgenode"}));case 2:return t.next=4,e.monitoringStore.fetchMetrics(M(M({},e.props.match.params),{},{resources:e.store.list.data.map((function(e){return e.name})),metrics:Object.values(x),last:!0}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnschedulable=function(e){return e.taints.some((function(e){return"node.kubernetes.io/unschedulable"===e.key}))},e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.handleOpenTerminal=function(t){var a=N.default.open({onOk:function(){N.default.close(a)},modal:T.default,cluster:e.cluster,title:t.name,nodename:t.name})},e.getLastValue=function(t,a,r){var n=e.monitoringStore.data,u=((0,y.default)(n[a],"data.result")||[]).find((function(e){return(0,y.default)(e,"metric.node")===t.name}));return(0,S.getValueByUnit)((0,y.default)(u,"value[1]",0),r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){r[a.type]=parseFloat(e.getLastValue(t,x[a.type],a.unit))})),r},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var a=e.props,r=a.module,n=a.prefix,u=a.getSortOrder,l=a.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:u("name"),search:!0,render:function(e,t){return h.default.createElement(A.default,{icon:E.ICON_TYPES[r],iconSize:40,to:"success"!==t.importStatus?null:"".concat(n,"/").concat(e),title:e,desc:t.ip})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:l("status"),isHideable:!0,search:!0,render:function(a,r){var n=(0,b.getNodeStatus)(r),u=r.taints;return h.default.createElement("div",{className:L.default.status},h.default.createElement(P.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),!(0,v.default)(u)&&"success"===r.importStatus&&h.default.createElement(g.Tooltip,{content:e.renderTaintsTip(u)},h.default.createElement("span",{className:L.default.taints},u.length)))}},{title:t("ROLE"),dataIndex:"role",isHideable:!0,search:!0,render:function(e){return e.map((function(e){return t(e.replace("-","_").toUpperCase())})).join("/")}}]},e.renderCPUTooltip=function(e){var a=h.default.createElement("p",null,1===(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_LIMIT_SI",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_LIMIT_PL",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}));return h.default.createElement(g.Tooltip,{content:a,placement:"top"},h.default.createElement(k.default,{title:1===(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_REQUEST_SI",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_REQUEST_PL",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(e){var a=h.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,_.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}));return h.default.createElement(g.Tooltip,{content:a,placement:"top"},h.default.createElement(k.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,_.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e}return(0,d.default)(r,[{key:"getStatus",value:function(){return E.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=this.monitoringStore.isLoading;return h.default.createElement(C.ListPage,(0,u.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(D.default,(0,u.default)({},a,{title:t("EDGE_NODE_PL"),tips:this.tips})),h.default.createElement(w.default,(0,u.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),isLoading:r.isLoading||n})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"isExpired",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.isExpired)||!1}},{key:"isUnAuthorized",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.isUnAuthorized)||!1}},{key:"isOverLimit",get:function(){return globals.licenseInfo.isOverLimit||!1}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return M(M({},this.props.tableProps.tableActions),{},{actions:[],selectActions:[]})}},{key:"tips",get:function(){return[{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}}]),r}(h.default.Component))||c;a.default=U},4170:function(e,t,a){e.exports={taints:"c0LZAdCBOZbOHYzSLrYJO",overview:"pqgOL_E-lo8Rc_RLKyU_3",resource:"_OsjIr9_jEKtsmlq0aCgE"}},4171:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(109),r(5),r(11),r(31),r(6),r(29),r(18),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(324),r(38),r(62),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(31),r(6),r(29),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(324),r(38),r(62),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(7),r(32);var l=n(r(315)),o=n(r(43)),c=n(r(58));r(41);var i,s=n(r(44)),d=n(r(30)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(788)),g=n(r(795)),_=n(r(792)),E=u(r(793)),b=n(r(796)),S=n(r(26)),O=n(r(0)),R=n(r(1849)),T=n(r(439)),C=r(52),A=r(794);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var D={cpu:"namespace_cpu_usage",memory:"namespace_memory_usage_wo_cache",gpu:"namespace_gpu_usage",gpu_memory:"namespace_gpu_memory_usage",pod:"namespace_pod_count"},w=(0,E.default)({store:new T.default,name:"PROJECT",module:"projects"})(i=function(e){(0,m.default)(r,e);var a=N(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).monitoringStore=new R.default,e.handleFetch=function(t,a){e.props.routing.query(k(k({},t),{},{type:e.type}),a)},e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/projects?type=").concat(t))},e.getData=(0,s.default)(o.default.mark((function t(){var a,r,n,u,l,i,s,d=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},r=a.silent,n=(0,c.default)(a,["silent"]),e.query=n,n.type=n.type||"user",e.type=n.type,u=e.props,l=u.store,i=u.match,s=i.params.cluster,r&&(l.list.silent=!0),t.next=9,l.fetchList(k(k({},e.props.match.params),n));case 9:return t.next=11,e.monitoringStore.fetchMetrics(k(k({},e.props.match.params),{},{resources:l.list.data.map((function(e){return e.name})),metrics:Object.values((0,C.hideGPUByLicense)(D,s)),last:!0}));case 11:l.list.silent=!1;case 12:case"end":return t.stop()}}),t)}))),e.getLastValue=function(t,a){var r=e.monitoringStore.data,n=((0,S.default)(r,"".concat(a,".data.result"))||[]).find((function(e){return(0,S.default)(e,"metric.namespace")===t.name}));return(0,S.default)(n,"value[1]",0)},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.prefix;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(e,t){return O.default.createElement(y.default,{to:"Terminating"===t.status?null:"".concat(n,"/").concat(e),icon:"project",iconSize:40,isMultiCluster:t.isFedHostNamespace,desc:t.description||"-",title:(0,C.getDisplayNameNew)(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return O.default.createElement(g.default,{type:e,name:t(e.toUpperCase()),flicker:!0})}},{title:t("WORKSPACE"),dataIndex:"workspace",isHideable:!0},{title:t("CPU_USAGE"),key:"namespace_cpu_usage",isHideable:!0,render:function(t){return(0,A.getSuitableValue)(e.getLastValue(t,D.cpu),"cpu","-")}},{title:t("MEMORY_USAGE"),key:"namespace_memory_usage_wo_cache",isHideable:!0,render:function(t){return(0,A.getSuitableValue)(e.getLastValue(t,D.memory),"memory","-")}},{title:t("GPU_USAGE"),key:"namespace_gpu_usage",isHideable:!0,render:function(t){return(0,A.getSuitableValue)(e.getLastValue(t,D.gpu),"gpu","-")}},{title:t("GPU_MEMORY_USAGE"),key:"namespace_gpu_memory_usage",isHideable:!0,render:function(t){return(0,A.getSuitableValue)(e.getLastValue(t,D.gpu_memory),"memory","-")}},{title:t("POD_PL"),key:"namespace_pod_count",isHideable:!0,render:function(t){return e.getLastValue(t,D.pod)}}].filter((function(t){return!e.omitKeys.has(t.key)}))},e.showCreate=function(){return e.props.trigger("project.create",k(k({},e.props.match.params),{},{success:function(){return e.getData()}}))},e}return(0,p.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=e.match.params.cluster,n=this.monitoringStore.isLoading,u=(0,C.hideGPUByLicense)(this.getColumns(),r);return O.default.createElement(E.ListPage,(0,l.default)({},this.props,{getData:this.getData,module:"namespaces"}),O.default.createElement(_.default,(0,l.default)({},t,{tabs:this.tabs})),O.default.createElement(b.default,(0,l.default)({className:"table-1-7"},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:u,onCreate:"system"===this.type?null:this.showCreate,isLoading:a.isLoading||n,searchType:"name"})))}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return k(k({},this.props.tableProps.tableActions),{},{actions:[],onFetch:this.handleFetch,selectActions:[]})}},{key:"tabs",get:function(){return{value:this.type||"user",onChange:this.handleTabChange,options:[{value:"user",label:t("USER_PROJECTS")},{value:"system",label:t("SYSTEM_PROJECTS")}]}}},{key:"hasMonitoring",get:function(){var e=this.props.match.params.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}},{key:"omitKeys",get:function(){return new Set(this.hasMonitoring?[]:["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count"])}}]),r}(O.default.Component))||i;a.default=w},4172:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var l,o=n(r(30)),c=n(r(315)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(788)),v=n(r(792)),y=n(r(796)),g=u(r(793)),_=r(52),E=n(r(1070));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,g.default)({store:new E.default,module:"customresourcedefinitions",name:"CRD"})(l=function(e){(0,d.default)(r,e);var a=O(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getColumns=function(){var a=e.props.match.params.cluster,r=e.props.getSortOrder;return[{title:t("KIND_TCAP"),dataIndex:"kind",render:function(e,t){return m.default.createElement(h.default,{to:"/clusters/".concat(a,"/customresources/").concat(t.name),title:e,desc:"".concat(t.group,"/").concat(t.latestVersion)})}},{title:t("NAME"),key:"name",dataIndex:"name"},{title:t("SCOPE_TCAP"),key:"scope",dataIndex:"scope"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return m.default.createElement(g.ListPage,(0,c.default)({},this.props,{noWatch:!0}),m.default.createElement(v.default,(0,c.default)({},t,{tabs:this.tabs})),m.default.createElement(y.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:null,searchType:"name"})))}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return S(S({},this.props.tableProps.tableActions),{},{actions:[],selectActions:[]})}}]),r}(m.default.Component))||l;a.default=R},4173:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(804)),y=n(r(865)),g=n(r(0)),_=r(433),E=n(r(318)),b=r(52),S=r(72),O=r(434);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,h.withClusterList)({store:new E.default("deployments"),module:"deployments",name:"WORKLOAD",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,u=r.reason;return u?g.default.createElement(v.default,{status:n,reason:t(u),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,u=a.module,l=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:S.ICON_TYPES[u],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/whizard-telemetry/".concat(l,"/projects/").concat(a.namespace,"/").concat(u,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return g.default.createElement(y.default,{data:t,module:u})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(l,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(m.default,(0,l.default)({},a,{tabs:this.tabs})),g.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){return[]}},{key:"itemActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=T},4174:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(804)),y=n(r(865)),g=n(r(0)),_=r(433),E=n(r(318)),b=r(52),S=r(72),O=r(434);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,h.withClusterList)({store:new E.default("statefulsets"),module:"statefulsets",name:"WORKLOAD",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,u=r.reason;return u?g.default.createElement(v.default,{status:n,reason:t(u),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,u=a.module,l=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:S.ICON_TYPES[u],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/whizard-telemetry/".concat(l,"/projects/").concat(a.namespace,"/").concat(u,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return g.default.createElement(y.default,{data:t,module:u})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(l,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(m.default,(0,l.default)({},a,{tabs:this.tabs})),g.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster,selectActions:this.selectActions,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"itemActions",get:function(){return[]}},{key:"selectActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=T},4175:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(804)),y=n(r(865)),g=n(r(0)),_=r(433),E=n(r(318)),b=r(52),S=r(72),O=r(434);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,h.withClusterList)({store:new E.default("daemonsets"),module:"daemonsets",name:"WORKLOAD"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,u=r.reason;return u?g.default.createElement(v.default,{status:n,reason:t(u),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,u=a.module,l=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:S.ICON_TYPES[u],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"/whizard-telemetry/".concat(l,"/projects/").concat(a.namespace,"/").concat(u,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return g.default.createElement(y.default,{data:t,module:u})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(l,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(m.default,(0,l.default)({},a,{tabs:this.tabs})),g.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),selectActions:this.selectActions,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){return[]}},{key:"itemActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=T},4176:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(1069)),y=n(r(804)),g=n(r(0)),_=r(433),E=n(r(318)),b=r(52),S=r(72),O=r(434);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,h.withClusterList)({store:new E.default("jobs"),module:"jobs",name:"JOB",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,u=r.reason;return u?g.default.createElement(y.default,{status:n,reason:t(u),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,u=a.module,l=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:S.ICON_TYPES[u],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/whizard-telemetry/".concat(l,"/projects/").concat(a.namespace,"/").concat(u,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return g.default.createElement(v.default,{data:t,module:u})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(l,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("LAST_RUN_TIME"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return S.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(m.default,(0,l.default)({},a,{tabs:this.tabs})),g.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),selectActions:this.selectActions,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){return[]}},{key:"selectActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=T},4177:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(795)),h=n(r(792)),v=r(793),y=n(r(804)),g=n(r(0)),_=r(433),E=n(r(318)),b=r(52),S=r(72),O=r(434);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,v.withClusterList)({store:new E.default("cronjobs"),module:"cronjobs",name:"CRONJOB",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/whizard-telemetry/".concat(a,"/").concat(t))},e.handleSwitch=function(t){return function(a){e.props.store.switch(a,t).then((function(){e.props.routing.query()}))}},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,u=r.reason;return u?g.default.createElement(y.default,{status:n,reason:t(u),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,u=a.module,l=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:S.ICON_TYPES[u],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),to:"/whizard-telemetry/".concat(l,"/projects/").concat(a.namespace,"/").concat(u,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"15%",render:function(e,a){var r=(0,O.getWorkloadStatus)(a,u).status;return g.default.createElement(m.default,{type:r,name:t("CRONJOB_".concat(r.toUpperCase()))})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(l,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return S.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(v.ListPage,this.props,g.default.createElement(h.default,(0,l.default)({},a,{tabs:this.tabs})),g.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){return[]}},{key:"selectActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=T},4178:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(433),m=r(186),h=n(r(839)),v=n(r(792)),y=r(793),g=n(r(804)),_=n(r(810)),E=r(52),b=r(72),S=n(r(452)),O=n(r(4179));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,y.withClusterList)({store:new S.default,module:"pods",name:"POD",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getItemDesc=function(e){var a=e.podStatus,r=a.status,n=a.type;return"running"!==n&&"completed"!==n?f.default.createElement(g.default,{status:n,reason:t(r),data:e,type:"pod"}):t(n.toUpperCase())},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:e.renderAvatar},{title:t("STATUS"),dataIndex:"status",filters:e.getPodsStatus(),isHideable:!0,search:!0,with:"5%",render:function(e,a){var r=a.podStatus;return f.default.createElement("span",null,t(r.type.toUpperCase()))}},{title:t("NODE_SI"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIP",search:!0,isHideable:!0,width:"15%",render:function(e,t){var a=t.podIp;return f.default.createElement("span",null,a)}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:a("startTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderAvatar=function(t,a){var r=e.props.module,n=e.props.match.params.cluster,u=a.podStatus;return f.default.createElement("div",{className:O.default.avatar},f.default.createElement("div",{className:O.default.icon},f.default.createElement(m.Icon,{name:b.ICON_TYPES[r],size:40}),f.default.createElement(h.default,{className:O.default.indicator,type:u.type,flicker:!0})),f.default.createElement("div",null,f.default.createElement(p.Link,{className:O.default.title,to:"/whizard-telemetry/".concat(n,"/projects/").concat(a.namespace,"/").concat(r,"/").concat(t)},t),f.default.createElement("div",{className:O.default.desc},e.getItemDesc(a))))},e.renderNode=function(a,r){var n=e.props.match.params.cluster,u=r.node,l=r.nodeIp;if(!u)return"-";var o=t("NODE_IP",{node:u,ip:l});return f.default.createElement(p.Link,{to:"/whizard-telemetry/".concat(n,"/nodes/").concat(u)},o)},e.renderStatus=function(e){return f.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getPodsStatus",value:function(){return b.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return f.default.createElement(y.ListPage,this.props,f.default.createElement(v.default,a),f.default.createElement(_.default,(0,l.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),hideColumn:["status"],cluster:t.params.cluster})))}},{key:"itemActions",get:function(){return[]}},{key:"selectActions",get:function(){return[]}}]),r}(f.default.Component))||u;a.default=T},4179:function(e,t,a){e.exports={avatar:"_3ShFJdyswJLNV1me-eoHhs",icon:"_1u5mqf7DoSajGkZxHRT5OQ",indicator:"_3U7708ySkuHY9X_Ht2ysDP",title:"_3AcnHIaT_3HF3GYjgXbpQl",desc:"vkrFErdKa5LmaFSNOKvVA"}},4180:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(11),r(73),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=r(186),p=n(r(810)),m=n(r(788)),h=n(r(790)),v=n(r(792)),y=r(793),g=n(r(0)),_=r(433),E=n(r(443)),b=r(52),S=r(72);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,y.withClusterList)({store:new E.default,module:"services",name:"SERVICE",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.renderExternalService=function(e){var a={des:"-",title:"-"};return"NodePort"===e.specType&&(a.des=t("PORT_PL"),a.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(a.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),a.title=e.loadBalancerIngress.join("; ")),e.externalName?g.default.createElement(h.default,{description:a.des,title:function(){return g.default.createElement(f.Tooltip,{content:e.externalName},g.default.createElement("span",null,a.title))}}):g.default.createElement(h.default,{description:t("".concat(a.des)),title:a.title})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,width:"24%",render:function(e,t){return g.default.createElement(m.default,{icon:S.ICON_TYPES[n],iconSize:40,title:(0,b.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/whizard-telemetry/".concat(u,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return g.default.createElement(_.Link,{to:"/whizard-telemetry/".concat(u,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("INTERNAL_ACCESS"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"16%",render:function(e,a){return g.default.createElement(h.default,{title:a.clusterIP||"",description:t("".concat(a.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,a){return e.renderExternalService(a)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return g.default.createElement(y.ListPage,this.props,g.default.createElement(v.default,a),g.default.createElement(p.default,(0,l.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){return[]}},{key:"selectActions",get:function(){return[]}}]),r}(g.default.Component))||u;a.default=R},4181:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=r(186),h=n(r(792)),v=r(317),y=n(r(883)),g=n(r(4182));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,p.inject)("rootStore")(u=(0,p.observer)(u=function(e){(0,i.default)(r,e);var a=b(r);function r(e){var t;(0,o.default)(this,r),t=a.call(this,e);var n=new y.default({cluster:t.cluster});return t.props.rootStore.register("monitoring",n),t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.props.rootStore.monitoring.checkEtcd()}},{key:"render",value:function(){return f.default.createElement(m.Loading,{spinning:this.props.rootStore.monitoring.etcdChecking},f.default.createElement(f.default.Fragment,null,f.default.createElement(h.default,{icon:"linechart",title:t("CLUSTER_STATUS"),description:t("MONITORING_CLUSTER_DESC"),routes:this.routes}),(0,v.renderRoutes)(g.default)))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routes",get:function(){var e=this;return g.default.filter((function(t){return!!t.title&&(!t.requireETCD||e.props.rootStore.monitoring.supportETCD)})).map((function(e){return E(E({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(f.default.Component))||u)||u;a.default=S},4182:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4183)),l=r(a(4185)),o=r(a(4188)),c=r(a(4190)),i=r(a(4192)),s=r(a(4194)),d="/whizard-telemetry/:cluster/monitor-cluster",f=[{path:"".concat(d,"/overview"),title:"Overview",component:u.default,exact:!0},{path:"".concat(d,"/resource"),title:"PHYSICAL_RESOURCES_MONITORING",component:l.default,exact:!0},{path:"".concat(d,"/etcd"),title:"ETCD_MONITORING",component:o.default,requireETCD:!0,exact:!0},{path:"".concat(d,"/api-server"),title:"API_SERVER_MONITORING",component:c.default,exact:!0},{path:"".concat(d,"/scheduler"),title:"SCHEDULER_MONITORING",component:i.default,exact:!0},{path:"".concat(d,"/ranking"),title:"RESOURCE_USAGE_RANKING",component:s.default,exact:!0},(0,n.getIndexRoute)({path:d,to:"".concat(d,"/overview"),exact:!0})];t.default=f},4183:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(18),r(97),r(16),r(9),r(4),r(23),r(24),r(17),r(62),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(18),r(28),r(97),r(42),r(16),r(9),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7),r(110);var u=n(r(30)),l=n(r(43));r(41);var o,c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(49)),v=n(r(0)),y=r(14),g=r(239),_=n(r(3)),E=n(r(26)),b=n(r(1137)),S=r(186),O=n(r(801)),R=r(822),T=r(1132),C=n(r(4184));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,g.inject)("rootStore")(o=(0,g.observer)((c=function(e){(0,f.default)(r,e);var a=A(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).updateData=function(){t.timer=setTimeout((0,i.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.componentMonitoringStore.requestHealthMetrics();case 2:t.updateData();case 3:case"end":return e.stop()}}),e)}))),2e3)},t.getComponentStatus=function(e){return(e.conditions||[]).some((function(e){return"Ture"!==e.status&&"Healthy"!==e.type}))?"unhealthy":"healthy"},t.getCoreComponentStatus=function(){var e=t.componentHealth.data,a=void 0===e?{}:e,r=a.kubernetes,n=void 0===r?[]:r,u=a.node,l=void 0===u?{}:u,o={};return n.forEach((function(e){o[(0,E.default)(e,"metadata.name")]=t.getComponentStatus(e)})),o.node=l.healthyNodes===l.totalNodes?"healthy":"unhealthy",o["controller-manager"]=t.componentHealth.supportControllerManager?"healthy":"unhealthy",o.scheduler=t.componentHealth.supportKsScheduler?"healthy":"unhealthy",o["etcd-0"]=t.supportETCD?"healthy":"unhealthy",o},t.fetchData=function(){t.componentMonitoringStore.fetchHealthMetrics()},t.handleNodeClick=function(){globals.app.hasPermission({module:"nodes",action:"view",cluster:t.cluster})&&t.routing.push("/clusters/".concat(t.cluster,"/nodes"))},t.handleComponentsClick=function(e,a){"kubeSystem"===a&&(a="kubernetes"),globals.app.hasPermission({module:"monitoring",action:"view",cluster:t.cluster})&&!e&&t.routing.push("/clusters/".concat(t.cluster,"/components?type=").concat(a))},t.componentMonitoringStore=new b.default({cluster:t.cluster}),t.fetchData(),t}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"renderNodeStatus",value:function(){var e=this.componentHealth,a=e.counts,r=e.isLoading,n=void 0!==r&&r,u=a.node||{},l=u.health,o=void 0===l?0:l,c=u.total,i=void 0===c?0:c;return v.default.createElement(O.default,{className:C.default.node,title:t("CLUSTER_NODE_STATUS")},v.default.createElement(S.Loading,{spinning:n},v.default.createElement(R.StatusCircle,{theme:"light",className:C.default.nodeStatus,name:t("NODE_ONLINE_STATUS"),legend:["ONLINE_NODES","ALL_NODES"],used:o,total:i,onClick:this.handleNodeClick})))}},{key:"renderServiceComponents",value:function(){var e=this,a=this.componentHealth.componentCounts,r=[{type:"kubesphere",icon:"/assets/kubesphere.svg"},{type:"kubeSystem",icon:"/assets/kubernetes.svg"},{type:"istio",icon:"/assets/istio.svg",disabled:!globals.app.hasClusterModule(this.cluster,"servicemesh")},{type:"monitoring",icon:"/assets/monitoring.svg",disabled:!globals.app.hasClusterModule(this.cluster,"monitoring")},{type:"logging",icon:"/assets/logging.svg",disabled:!globals.app.hasClusterModule(this.cluster,"logging")},{type:"devops",icon:"/assets/dev-ops.svg",disabled:!globals.app.hasClusterModule(this.cluster,"devops")}];return v.default.createElement("div",{className:(0,_.default)(C.default.list,C.default.service)},r.map((function(r){return v.default.createElement("div",{key:r.type,className:(0,_.default)(C.default.item,(0,u.default)({},C.default.disabled,r.disabled)),onClick:function(){return e.handleComponentsClick(r.disabled,r.type)}},v.default.createElement("img",{src:r.icon}),r.disabled?v.default.createElement("span",null,t("DISABLED")):v.default.createElement("p",null,(0,E.default)(a,"[".concat(r.type,"].health"),0),v.default.createElement("span",null,"/",(0,E.default)(a,"[".concat(r.type,"].total"),0))))})))}},{key:"renderCoreComponents",value:function(){var e=this.getCoreComponentStatus(),a=[{type:"etcd-0",name:"etcd"},{type:"controller-manager",name:t("CONTROLLER_MANAGER")},{type:"scheduler",name:t("KUBERNETES_SCHEDULER")}];return v.default.createElement("div",{className:(0,_.default)(C.default.list,C.default.core)},a.map((function(t){var a=e[t.type];return v.default.createElement("div",{key:t.type,className:C.default.item},v.default.createElement("div",{className:(0,_.default)(C.default.itemIcon,C.default[a])},v.default.createElement(S.Icon,{name:"healthy"===a||"ready"===a?"check":"substract",type:"light",size:16})),v.default.createElement("p",{title:t.name},t.name))})))}},{key:"renderComponentStatus",value:function(){var e=this.componentMonitoringStore.health.isLoading,a=void 0!==e&&e;return v.default.createElement(O.default,{className:C.default.components,title:t("COMPONENT_STATUS")},v.default.createElement(S.Loading,{spinning:a},v.default.createElement("div",{className:C.default.wrapper},this.renderServiceComponents(),this.renderCoreComponents())))}},{key:"render",value:function(){return v.default.createElement("div",null,v.default.createElement(S.Columns,{className:"is-1_1"},v.default.createElement(S.Column,{className:"is-12"},this.renderNodeStatus()),null),v.default.createElement(S.Columns,null,v.default.createElement(S.Column,{className:"is-12"},v.default.createElement(T.ClusterResourceStatus,{cluster:this.cluster}),this.supportETCD&&v.default.createElement(T.ETCDStatus,{cluster:this.cluster}),v.default.createElement(T.ServiceComponentStatus,{cluster:this.cluster}))))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"componentHealth",get:function(){return(0,y.toJS)(this.componentMonitoringStore.health)}},{key:"supportETCD",get:function(){return this.props.rootStore.monitoring.supportETCD}}]),r}(v.default.Component),(0,h.default)(c.prototype,"componentHealth",[y.computed],Object.getOwnPropertyDescriptor(c.prototype,"componentHealth"),c.prototype),(0,h.default)(c.prototype,"supportETCD",[y.computed],Object.getOwnPropertyDescriptor(c.prototype,"supportETCD"),c.prototype),o=c))||o)||o;a.default=P},4184:function(e,t,a){e.exports={node:"_2L9ivbirgyJCChfqkQIPDw",nodeStatus:"_1rEGXx13u5vJTzSdmmDpv9",components:"_103yPFie2SDvdGoLnr_8LI",wrapper:"_220vMmAT2GLKGOtY5W7y4n",list:"u8fqOp1LyAu-TfCmA14j6",item:"_3iJeU9jfD6b5h9HUEEThRU",disabled:"_3ZfOn6H4yNHtkeEwK80vBa",service:"_3SpE6YpvfLW-c3Xo5vM6Cj",core:"_2jiJftfw3HdMCqG7w41imT",itemIcon:"_3pfOmkAxYZYeL2obxnltI_",healthy:"_2FQr2JQwoWilIlr3swU3Q6",ready:"DvOdF4_pIclq6GrSRwK4M",unhealthy:"_73N4M4q9UvPkHfuIqJkHv",warn:"_2HIAh0duBc59mImdVSfZKf",danger:"_2b2X25R_LwXgS0zqsSReV",unknown:"_1OY2HtW1lQHUGxZv2gkxtD"}},4185:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(63)),y=r(794),g=n(r(4186)),_=r(822),E=r(798),b=n(r(862)),S=r(52),O=n(r(4187));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C={cpu_utilisation:"cluster_cpu_utilisation",memory_utilisation:"cluster_memory_utilisation",cpu_load1:"cluster_load1",cpu_load5:"cluster_load5",cpu_load15:"cluster_load15",gpu_usage:"cluster_gpu_usage",gpu_total:"cluster_gpu_total",gpu_utilization:"cluster_gpu_utilization",gpu_memory_utilization:"cluster_gpu_memory_utilization",gpu_memory_usage:"cluster_gpu_memory_usage",gpu_memory_total:"cluster_gpu_memory_total",disk_size_usage:"cluster_disk_size_usage",disk_inode_utilisation:"cluster_disk_inode_utilisation",disk_inode_usage:"cluster_disk_inode_usage",disk_inode_total:"cluster_disk_inode_total",disk_read_iops:"cluster_disk_read_iops",disk_write_iops:"cluster_disk_write_iops",disk_read_throughput:"cluster_disk_read_throughput",disk_write_throughput:"cluster_disk_write_throughput",net_transmitted:"cluster_net_bytes_transmitted",net_received:"cluster_net_bytes_received",pod_running:"cluster_pod_running_count",pod_pending:"cluster_pod_pending_count",pod_succeeded:"cluster_pod_succeeded_count",pod_failed:"cluster_pod_failed_count",pod_unknown:"cluster_pod_unknown_count"},A=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=T(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=function(e){n.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({metrics:Object.values((0,S.hideGPUByLicense)(C,n.props.match.params.cluster))},e))},n.getMonitoringCfgs=function(){var e=[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,h.default)(n.metrics,"".concat(C.cpu_load1,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.cpu_load5,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.cpu_load15,".data.result[0]"),{})]},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.gpu_utilization,".data.result"))},{type:"usage",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.gpu_memory_usage,".data.result"))},{type:"usage",title:"DISK_USAGE",unitType:"disk",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.disk_size_usage,".data.result"))},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(n.metrics,"".concat(C.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,h.default)(n.metrics,"".concat(C.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,h.default)(n.metrics,"".concat(C.disk_inode_total,".data.result[0].values"),[])]});return p.default.createElement(b.default,{usageData:e,totalData:t})}},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,h.default)(n.metrics,"".concat(C.disk_read_throughput,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.disk_write_throughput,".data.result[0]"),{})]},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,h.default)(n.metrics,"".concat(C.disk_read_iops,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.disk_write_iops,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_BANDWIDTH",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,h.default)(n.metrics,"".concat(C.net_transmitted,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.net_received,".data.result[0]"),{})]},{type:"count",title:"POD_STATUS",unit:"",legend:["RUNNING","PENDING","COMPLETED","FAILED","UNKNOWN"],data:[(0,h.default)(n.metrics,"".concat(C.pod_running,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.pod_pending,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.pod_succeeded,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.pod_failed,".data.result[0]"),{}),(0,h.default)(n.metrics,"".concat(C.pod_unknown,".data.result[0]"),{})]}],a=n.props.match.params.cluster;return(0,S.hideGPUByLicense)(e,a)},n.monitorStore=new g.default({cluster:e.match.params.cluster}),n}return(0,i.default)(r,[{key:"render",value:function(){var e=this.monitorStore,a=e.isLoading,r=e.isRefreshing,n=this.getMonitoringCfgs();return p.default.createElement(_.Controller,{title:t("PHYSICAL_RESOURCES_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:a,refreshing:r,isEmpty:(0,v.default)(this.metrics)},p.default.createElement("div",{className:O.default.content},n.map((function(e){e.data=(0,v.default)(e.data)?[{values:(0,y.getZeroValues)()}]:e.data;var t=(0,y.getAreaChartOps)(e);return p.default.createElement("div",{key:e.title,className:O.default.box},p.default.createElement(E.SimpleArea,(0,l.default)({width:"100%",height:190},t)))}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(p.default.Component))||u)||u;a.default=A},4186:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(9),a(4),a(316),a(23),a(24),a(17),a(64),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(9),a(4),a(316),a(22),a(23),a(57),a(24),a(17),a(64);var n=r(a(58)),u=r(a(43));a(41);var l,o,c,i=r(a(44)),s=r(a(65)),d=r(a(36)),f=r(a(37)),p=r(a(88)),m=r(a(55)),h=r(a(56)),v=r(a(51)),y=r(a(49)),g=(r(a(66)),a(14)),_=r(a(26)),E=a(52);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var S=(l=function(e){(0,m.default)(l,e);var t,a,r=b(l);function l(){var e;(0,d.default)(this,l);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a)),(0,s.default)(e,"statistics",o,(0,p.default)(e)),(0,s.default)(e,"resourceMetrics",c,(0,p.default)(e)),e.fetchClusterDevopsCount=(0,i.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/tenant.kubesphere.io/v1beta1/devopscount/");case 2:return t=e.sent,e.abrupt("return",(0,_.default)(t,"count",0));case 4:case"end":return e.stop()}}),e)}))),e}return(0,f.default)(l,[{key:"fetchStatistics",value:(a=(0,i.default)(u.default.mark((function e(){var t,a,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.statistics.isLoading=!0,t={type:"statistics"},e.next=4,(0,E.to)(request.get(this.getApi(),t));case 4:return a=e.sent,r=this.getResult(a),this.statistics={data:r,isLoading:!1},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchApplicationResourceMetrics",value:(t=(0,i.default)(u.default.mark((function e(t){var a,r,l,o,c,i,s,d,f,p,m;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.workspace,r=t.namespace,l=t.autoRefresh,o=void 0!==l&&l,c=(0,n.default)(t,["workspace","namespace","autoRefresh"]),o?(c.last=!0,this.resourceMetrics.isRefreshing=!0):this.resourceMetrics.isLoading=!0,c.cluster&&(this.cluster=c.cluster),i=this.getParams(c),s=/^[a-zA-Z]+_/g,d=(0,_.default)(c.metrics,"[0]","").replace(s,"cluster_"),f="cluster",a&&(f="workspaces/".concat(a),i.metrics_filter="".concat(d.replace(s,"workspace_"))),r&&"all"!==r&&(f="namespaces/".concat(r),i.metrics_filter="".concat(d.replace(s,"namespace_"))),e.next=11,(0,E.to)(request.get("".concat(this.apiVersion,"/").concat(f),i));case 11:return p=e.sent,m=this.getResult(p),o&&(m=this.getRefreshResult(m,this.resourceMetrics.originData)),this.resourceMetrics={originData:m,data:(0,_.default)(Object.values(m),"[0].data.result")||[],isLoading:!1,isRefreshing:!1},e.abrupt("return",m);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),l}(r(a(883)).default),o=(0,y.default)(l.prototype,"statistics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),c=(0,y.default)(l.prototype,"resourceMetrics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{originData:{},data:[],isLoading:!1}}}),(0,y.default)(l.prototype,"fetchStatistics",[g.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchStatistics"),l.prototype),(0,y.default)(l.prototype,"fetchApplicationResourceMetrics",[g.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchApplicationResourceMetrics"),l.prototype),l);t.default=S},4187:function(e,t,a){e.exports={content:"_5fS5kFllv5zy-9q1hY9Ml",box:"_19yYJ8NXKSQRTHTVr-KFN7"}},4188:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(63)),y=r(794),g=n(r(1137)),_=r(798),E=r(822),b=r(1132),S=n(r(4189));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T={proposals_committed_rate:"etcd_server_proposals_committed_rate",proposals_applied_rate:"etcd_server_proposals_applied_rate",proposals_failed_rate:"etcd_server_proposals_failed_rate",proposals_pending_count:"etcd_server_proposals_pending_count",db_size:"etcd_mvcc_db_size",client_received_bytes:"etcd_network_client_grpc_received_bytes",client_sent_bytes:"etcd_network_client_grpc_sent_bytes",grpc_received_rate:"etcd_grpc_server_msg_received_rate",grpc_sent_rate:"etcd_grpc_server_msg_sent_rate",wal_fsync_duration_average:"etcd_disk_wal_fsync_duration",wal_fsync_duration_quantile:"etcd_disk_wal_fsync_duration_quantile",backend_commit_duration_average:"etcd_disk_backend_commit_duration",backend_commit_duration_quantile:"etcd_disk_backend_commit_duration_quantile"},C=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=R(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({metrics:Object.values(T)},e))},t.getQuantileData=function(e,a){return((0,h.default)(t.metrics,"".concat(T[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.quantile")===a}))||{}},t.getMonitoringCfgs=function(){return[{type:"size",title:"DB_SIZE",unitType:"memory",legend:["DB_SIZE"],data:(0,h.default)(t.metrics,"".concat(T.db_size,".data.result"))},{type:"area",title:"CLIENT_TRAFFIC",unitType:"traffic",legend:["RECEIVED","SENT"],data:[(0,h.default)(t.metrics,"".concat(T.client_received_bytes,".data.result[0]")),(0,h.default)(t.metrics,"".concat(T.client_sent_bytes,".data.result[0]"))]},{type:"area",title:"GRPC_STREAM_MESSAGES",unit:"times/s",legend:["RECEIVED","SENT"],data:[(0,h.default)(t.metrics,"".concat(T.grpc_received_rate,".data.result[0]")),(0,h.default)(t.metrics,"".concat(T.grpc_sent_rate,".data.result[0]"))]},{type:"grade",title:"WAL_FSYNC",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[t.getQuantileData("wal_fsync_duration_quantile","0.99"),t.getQuantileData("wal_fsync_duration_quantile","0.9"),t.getQuantileData("wal_fsync_duration_quantile","0.5"),(0,h.default)(t.metrics,"".concat(T.wal_fsync_duration_average,".data.result[0]"))]},{type:"grade",title:"DB_FSYNC",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[t.getQuantileData("backend_commit_duration_quantile","0.99"),t.getQuantileData("backend_commit_duration_quantile","0.9"),t.getQuantileData("backend_commit_duration_quantile","0.5"),(0,h.default)(t.metrics,"".concat(T.backend_commit_duration_average,".data.result[0]"))]},{type:"area",title:"RAFT_PROPOSAL",unit:"times/s",legend:["PROPOSAL_COMMITTED","PROPOSAL_APPLIED","PROPOSAL_FAILED","PROPOSAL_PENDING"],data:[(0,h.default)(t.metrics,"".concat(T.proposals_committed_rate,".data.result[0]")),(0,h.default)(t.metrics,"".concat(T.proposals_applied_rate,".data.result[0]")),(0,h.default)(t.metrics,"".concat(T.proposals_failed_rate,".data.result[0]")),(0,h.default)(t.metrics,"".concat(T.proposals_pending_count,".data.result[0]"))],areaColors:["blue","green","red","yellow"]}]},t.monitorStore=new g.default({module:"etcd",cluster:e.match.params.cluster}),t}return(0,i.default)(r,[{key:"renderChart",value:function(e){var t={width:"100%",height:190},a=(0,y.getAreaChartOps)(e);if((0,v.default)(a.data))return null;var r=null;switch(e.type){case"grade":r=p.default.createElement(_.PercentArea,(0,l.default)({},t,a));break;default:r=p.default.createElement(_.SimpleArea,(0,l.default)({},t,a))}return p.default.createElement("div",{key:e.title,className:S.default.box},r)}},{key:"render",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,u=this.getMonitoringCfgs(),l=this.props.match.params.cluster;return p.default.createElement(E.Controller,{title:t("ETCD_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:(0,v.default)(this.metrics)},p.default.createElement("div",{className:S.default.content},p.default.createElement("div",{className:S.default.box},p.default.createElement("div",{className:S.default.status},p.default.createElement(b.ETCDNodes,{cluster:l}))),u.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(p.default.Component))||u)||u;a.default=C},4189:function(e,t,a){e.exports={content:"_3Oidk7btik602HrG7Kf2NJ",box:"_11jlF0I3wKcU5JXO5FXgoz",status:"_2WBl5j8sPsLEQH3uOjkkoi"}},4190:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(63)),y=r(794),g=n(r(1137)),_=r(798),E=r(822),b=n(r(4191));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R={request_latencies_total:"apiserver_request_latencies",request_latencies_apis:"apiserver_request_by_verb_latencies",request_rate:"apiserver_request_rate"},T=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({metrics:Object.values(R)},e))},t.getSpecificData=function(e,a,r){return((0,h.default)(t.metrics,"".concat(R[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.".concat(a))===r}))||{}},t.getVerbData=function(e){return t.getSpecificData("request_latencies_apis","verb",e)},t.getMonitoringCfgs=function(){return[{type:"io",title:"REQUEST_LATENCY",unit:"ms",legend:["REST_CREATE","REST_DELETE","REST_DELETECOLLECTION","REST_GET","REST_POST","REST_PATCH","REST_PUT","REST_UPDATE","REST_LIST","TOTAL_AVERAGE"],data:[t.getVerbData("CREATE"),t.getVerbData("DELETE"),t.getVerbData("DELETECOLLECTION"),t.getVerbData("GET"),t.getVerbData("POST"),t.getVerbData("PATCH"),t.getVerbData("PUT"),t.getVerbData("UPDATE"),t.getVerbData("LIST"),(0,h.default)(t.metrics,"".concat(R.request_latencies_total,".data.result[0]"))]},{type:"request",title:"REQUEST_PER_SECOND",unit:"times/s",legend:["REQUEST"],data:(0,h.default)(t.metrics,"".concat(R.request_rate,".data.result"))}]},t.monitorStore=new g.default({module:"apiserver",cluster:e.match.params.cluster}),t}return(0,i.default)(r,[{key:"renderChart",value:function(e){var t={width:"100%",height:190};e.data=(0,v.default)(e.data)?[{values:(0,y.getZeroValues)()}]:e.data;var a=(0,y.getAreaChartOps)(e),r=null;switch(e.type){case"grade":r=p.default.createElement(_.PercentArea,(0,l.default)({},t,a));break;default:r=p.default.createElement(_.SimpleArea,(0,l.default)({},t,a))}return p.default.createElement("div",{key:e.title,className:b.default.box},r)}},{key:"render",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,u=this.getMonitoringCfgs();return p.default.createElement(E.Controller,{title:t("API_SERVER_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:(0,v.default)(this.metrics)},p.default.createElement("div",{className:b.default.content},u.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(p.default.Component))||u)||u;a.default=T},4191:function(e,t,a){e.exports={content:"_3Ck9ZPxOhuUqnACODMjREh",box:"_3m1fZNA2hELYHdgd--exqW"}},4192:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(63)),y=r(794),g=n(r(1137)),_=r(798),E=r(822),b=n(r(4193));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R={schedule_attempts_count:"scheduler_schedule_attempts",schedule_attempt_rate:"scheduler_schedule_attempt_rate",scheduling_latency_average:"scheduler_e2e_scheduling_latency",scheduling_latency_quantile:"scheduler_e2e_scheduling_latency_quantile"},T=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({metrics:Object.values(R)},e))},t.getSpecificData=function(e,a,r){return((0,h.default)(t.metrics,"".concat(R[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.".concat(a))===r}))||{}},t.getMonitoringCfgs=function(){return[{type:"area",title:"SCHEDULE_ATTEMPTS",unit:"",legend:["SUCCESS","ERROR","FAILURE"],data:[t.getSpecificData("schedule_attempts_count","result","scheduled"),t.getSpecificData("schedule_attempts_count","result","error"),t.getSpecificData("schedule_attempts_count","result","unschedulable")],areaColors:["blue","red","yellow"]},{type:"area",title:"SCHEDULING_RATE",unit:"times/s",legend:["SUCCESS","ERROR","FAILURE"],data:[t.getSpecificData("schedule_attempt_rate","result","scheduled"),t.getSpecificData("schedule_attempt_rate","result","error"),t.getSpecificData("schedule_attempt_rate","result","unschedulable")],areaColors:["blue","red","yellow"]},{type:"grade",title:"SCHEDULING_LATENCY",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[t.getSpecificData("scheduling_latency_quantile","quantile","0.99"),t.getSpecificData("scheduling_latency_quantile","quantile","0.9"),t.getSpecificData("scheduling_latency_quantile","quantile","0.5"),(0,h.default)(t.metrics,"".concat(R.scheduling_latency_average,".data.result[0]"))]}]},t.monitorStore=new g.default({module:"scheduler",cluster:e.match.params.cluster}),t}return(0,i.default)(r,[{key:"renderChart",value:function(e){var t={width:"100%",height:190},a=(0,y.getAreaChartOps)(e);if((0,v.default)(a.data))return null;var r=null;switch(e.type){case"grade":r=p.default.createElement(_.PercentArea,(0,l.default)({},t,a));break;default:r=p.default.createElement(_.SimpleArea,(0,l.default)({},t,a))}return p.default.createElement("div",{key:e.title,className:b.default.box},r)}},{key:"render",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,u=this.getMonitoringCfgs();return p.default.createElement(E.Controller,{title:t("SCHEDULER_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:(0,v.default)(this.metrics)},p.default.createElement("div",{className:b.default.content},u.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(p.default.Component))||u)||u;a.default=T},4193:function(e,t,a){e.exports={content:"_1Tkcj0ePcc3JANcU66Wo3D",box:"_2GYSiRhUZrvMA8EiS5L88t"}},4194:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(239),p=n(r(3)),m=n(r(1209)),h=n(r(886)),v=r(186),y=n(r(1809)),g=r(52),_=n(r(4195));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=["node_cpu_utilisation","node_load1","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_disk_inode_utilisation","node_pod_utilisation"],S=(0,f.inject)("rootStore")(u=(0,f.observer)(u=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).download=function(){t.store.download("node.usage.rank.json")},t.store=new m.default({cluster:t.cluster,sort_metric_options:(0,g.hideGPUByLicense)(b,t.cluster),sort_metric:b[0]}),t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},d.default.createElement("h3",{className:(0,p.default)(_.default.pane,_.default.title)},t("RESOURCE_USAGE_RANKING")),this.renderToolbar(),this.renderList())}},{key:"renderToolbar",value:function(){var e=this;return d.default.createElement("div",{className:(0,p.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(v.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),d.default.createElement("span",{className:_.default.sort_button},d.default.createElement(v.Icon,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:function(){return e.store.changeSortType()}}))),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(v.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderList",value:function(){return d.default.createElement(v.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(y.default,{store:this.store,cluster:this.cluster,prefix:"/whizard-telemetry"}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,r=e.limit;return d.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(h.default,{page:t,total:a,limit:r,onChange:this.store.changePagination}))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),r}(d.default.Component))||u)||u;a.default=S},4195:function(e,t,a){e.exports={wrapper:"_2eXyP-Wvf8kuDWfTku583G",pane:"_3DS4wZKArI_pYBi60U_35A",pane__toolbar:"_3CeKKIfZlPbqKUGzNnDRtW",pane__pagination:"_2FDC8A6gGxCJy963uUUq-C",title:"_2iHvwNPejqsAHPW5sed049",toolbar:"_1D4TVFwWB0B3v5_oAXRSSk",toolbar_buttons:"_1XXyVN375GAv_vVuPJ2pie",toolbar_filter:"_1x6e4u4177S8E5E7Gvn_hx",sort_button:"_77LJZOHCJUHQjisOavIPq",table:"_1n83dO59PlAhcSyTCLSYoQ",table_rank:"_2pdLjfn04U45gN0NsJLips",table_no_border:"HKxga3LouSH6EJmGvmlKy",rankList_row:"_3NaBpRyT8V7b-_d112cJsz",rankCol:"_1dlr6KzV0VvQNL7JzvMPXw"}},4196:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=r(317),h=n(r(792)),v=n(r(4197));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("rootStore")(u=(0,p.observer)(u=function(e){(0,i.default)(r,e);var a=_(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(h.default,{icon:"linechart",title:t("APPLICATION_RESOURCE_PL"),description:t("MONITORING_APPLICATION_DESC"),routes:this.routes}),(0,m.renderRoutes)(v.default))}},{key:"routes",get:function(){return v.default.filter((function(e){return!!e.title})).map((function(e){return g(g({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(f.default.Component))||u)||u;a.default=E},4197:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4198)),l=r(a(4205)),o="/whizard-telemetry/:cluster/monitor-resource",c=[{path:"".concat(o,"/usage"),title:"RESOURCE_USAGE",component:u.default,exact:!0},{path:"".concat(o,"/ranking"),title:"USAGE_RANKING",component:l.default,exact:!0},(0,n.getIndexRoute)({path:o,to:"".concat(o,"/usage"),exact:!0})];t.default=c},4198:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(239),f=r(a(4199)),p=r(a(4201)),m=r(a(4203));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=(0,d.inject)("rootStore")(n=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"renderPhysicalResource",value:function(){return s.default.createElement(f.default,this.props)}},{key:"renderVirtualResource",value:function(){return s.default.createElement(p.default,this.props)}},{key:"renderProjectTrend",value:function(){return s.default.createElement(m.default,this.props)}},{key:"render",value:function(){return s.default.createElement("div",null,this.renderPhysicalResource(),this.renderVirtualResource(),this.renderProjectTrend())}}]),a}(s.default.Component))||n;t.default=v},4199:function(e,a,r){"use strict";var n=r(20);r(12),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(45),r(187),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(17),r(7);var u=n(r(315)),l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(88)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(3)),v=n(r(63)),y=n(r(158)),g=n(r(26)),_=n(r(189)),E=r(52),b=r(794),S=n(r(883)),O=r(822),R=r(798),T=n(r(1215)),C=n(r(4200));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N={cpu_usage:"cluster_cpu_usage",memory_usage:"cluster_memory_usage_wo_cache",gpu_usage:"cluster_gpu_usage",gpu_memory_usage:"cluster_gpu_memory_usage",disk_usage:"cluster_disk_size_usage"},D=function(e){(0,s.default)(r,e);var a=k(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(P({metrics:Object.values((0,E.hideGPUByLicense)(N,t.cluster))},e))},t.isEmptyData=function(e){return!!(0,v.default)(e)||Object.values(e).every((function(e){return(0,v.default)((0,g.default)(e,"data.result"))}))},t.showModal=function(e){return(0,E.cacheFunc)("_showModal_".concat(e.type),(function(){t.props.workspace&&(e.workspace=t.props.workspace),t.setState({showModal:!0,selectItem:P({},e)})}),(0,i.default)(t))},t.hideModal=function(){t.setState({showModal:!1,selectItem:{}})},t.getControllerProps=function(){return{}},t.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU",unitType:"cpu",legend:["USAGE"],metricType:N.cpu_usage},{type:"memory",title:"MEMORY",unitType:"memory",legend:["USAGE"],metricType:N.memory_usage},{type:"gpu",title:"GPU",unitType:"gpu",legend:["USAGE"],metricType:N.gpu_usage},{type:"gpu_memory",title:"GPU_MEMORY",unitType:"memory",legend:["USAGE"],metricType:N.gpu_memory_usage}]},t.state={showModal:!1,selectItem:{}},t.init(),t}return(0,c.default)(r,[{key:"init",value:function(){this.monitorStore=new S.default({cluster:this.cluster})}},{key:"renderCard",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,o=(0,E.hideGPUByLicense)(this.getMonitoringCfgs(),this.cluster);return p.default.createElement(O.Controller,(0,u.default)({title:t("CLUSTER_RESOURCE_USAGE"),step:"1h",times:24,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:this.isEmptyData(this.metrics)},this.getControllerProps()),p.default.createElement("div",{className:C.default.content},o.map((function(t){var a=(0,_.default)(t,["onClick"]),r=(0,y.default)(t.onClick)?e.showModal(a):t.onClick&&t.onClick(a),n=(0,g.default)(e.metrics,"".concat(t.metricType,".data.result"))||[],o=(0,b.getAreaChartOps)(P(P({},a),{},{data:(0,v.default)(n)?[{values:(0,b.getZeroValues)()}]:n}));return p.default.createElement("div",{key:t.type,className:(0,h.default)(C.default.item,(0,l.default)({},C.default.cursor,!!r)),onClick:r},p.default.createElement(R.MediumArea,(0,u.default)({width:"100%",height:100},o)))}))))}},{key:"renderModal",value:function(){var e=this.state,t=e.showModal,a=e.selectItem;return p.default.createElement("div",null,p.default.createElement(T.default,{visible:t,detail:a,cluster:this.cluster,workspace:this.workspace,workspaceStore:this.props.workspaceStore,onCancel:this.hideModal}))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"cluster",get:function(){return(0,g.default)(this.props,"match.params.cluster")}}]),r}(p.default.Component),w=(0,m.inject)("rootStore")((0,m.observer)(D));a.default=w;var L=D;a.Component=L},4200:function(e,t,a){e.exports={content:"_2jTXaPLsPk34lB4ARG-PdC",item:"_1-6c7yy68k5af5083dceb0",cursor:"_2dXxxPCSMDzAkIBgPYQ-Go"}},4201:function(e,a,r){"use strict";var n=r(20);r(12),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(45),r(187),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(17),r(7);var u=n(r(315)),l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(88)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(3)),v=n(r(63)),y=n(r(158)),g=n(r(26)),_=n(r(189)),E=r(52),b=r(794),S=n(r(883)),O=r(822),R=r(798),T=n(r(1215)),C=n(r(4202));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N={deployment_count:"cluster_deployment_count",statefulset_count:"cluster_statefulset_count",daemonset_count:"cluster_daemonset_count",job_count:"cluster_job_count",cronjob_count:"cluster_cronjob_count",pvc_count:"cluster_pvc_count",service_count:"cluster_service_count",route_count:"cluster_ingresses_extensions_count",pod_running_count:"cluster_pod_running_count"},D=function(e){(0,s.default)(r,e);var a=k(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.monitorStore.fetchMetrics(P({metrics:Object.values(N)},e))},t.isEmptyData=function(e){return!!(0,v.default)(e)||Object.values(e).every((function(e){return(0,v.default)((0,g.default)(e,"data.result"))}))},t.showModal=function(e){return(0,E.cacheFunc)("_showModal_".concat(e.type),(function(){t.props.workspace&&(e.workspace=t.props.workspace),t.setState({showModal:!0,selectItem:(0,_.default)(e,["data"])})}),(0,i.default)(t))},t.hideModal=function(){t.setState({showModal:!1,selectItem:{}})},t.getControllerProps=function(){return{}},t.getMonitoringCfgs=function(){return[{type:"deployment",title:"DEPLOYMENT",legend:["DEPLOYMENT_PL"],metricType:N.deployment_count},{type:"statefulset",title:"STATEFULSET",legend:["STATEFULSET_PL"],metricType:N.statefulset_count},{type:"daemonset",title:"DAEMONSET",legend:["DAEMONSET_PL"],metricType:N.daemonset_count},{type:"job",title:"JOB",legend:["JOB_PL"],metricType:N.job_count},{type:"cronjob",title:"CRONJOB",legend:["CRONJOB_PL"],metricType:N.cronjob_count},{type:"pvc",title:"PERSISTENT_VOLUME_CLAIM",legend:["PERSISTENT_VOLUME_CLAIM_PL"],metricType:N.pvc_count},{type:"service",title:"SERVICE",legend:["SERVICE_PL"],metricType:N.service_count},{type:"routes",title:"ROUTE",legend:["ROUTE_PL"],metricType:N.route_count},{type:"pod",title:"POD",legend:["RUNNING_PODS"],metricType:N.pod_running_count}]},t.state={showModal:!1,selectItem:{}},t.init(),t}return(0,c.default)(r,[{key:"init",value:function(){this.monitorStore=new S.default({cluster:this.cluster})}},{key:"renderCard",value:function(){var e=this,a=this.monitorStore,r=a.isLoading,n=a.isRefreshing,o=this.getMonitoringCfgs();return p.default.createElement(O.Controller,(0,u.default)({title:t("APPLICATION_RESOURCE_USAGE"),step:"1h",times:24,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:this.isEmptyData(this.metrics)},this.getControllerProps()),p.default.createElement("div",{className:C.default.content},o.map((function(t){var a=P(P({},t),{},{unit:""}),r=(0,y.default)(t.onClick)?e.showModal(a):t.onClick&&t.onClick(a),n=(0,g.default)(e.metrics,"".concat(t.metricType,".data.result"))||[],o=(0,b.getAreaChartOps)(P(P({},a),{},{data:(0,v.default)(n)?[{values:(0,b.getZeroValues)()}]:n}));return p.default.createElement("div",{key:t.type,className:C.default.wrapper},p.default.createElement("div",{className:(0,h.default)(C.default.item,(0,l.default)({},C.default.cursor,!!r)),onClick:r},p.default.createElement(R.MediumArea,(0,u.default)({width:"100%",height:100},o))))}))))}},{key:"renderModal",value:function(){var e=this.state,t=e.showModal,a=e.selectItem;return p.default.createElement("div",null,p.default.createElement(T.default,{visible:t,detail:a,cluster:this.cluster,workspace:this.workspace,workspaceStore:this.props.workspaceStore,onCancel:this.hideModal}))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"cluster",get:function(){return(0,g.default)(this.props,"match.params.cluster")}}]),r}(p.default.Component),w=(0,m.inject)("rootStore")((0,m.observer)(D));a.default=w;var L=D;a.Component=L},4202:function(e,t,a){e.exports={content:"_3bGzT52uaQ01GNp--h2fe3",wrapper:"_3oa59sj1qFkFkIPce93Xfn",item:"_1OQfNIVFvF4arCuBAEgoFy",cursor:"_180tKdyPlpTKPIEB-ZwGpX"}},4203:function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(4),a(316),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(316),a(23),a(57),a(17),a(7);var n,u=r(a(315)),l=r(a(30)),o=r(a(36)),c=r(a(37)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(0)),p=a(239),m=r(a(63)),h=r(a(26)),v=a(822),y=a(794),g=r(a(883)),_=a(186),E=a(798),b=r(a(4204));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T={namespace_count:"cluster_namespace_count"},C=(0,p.inject)("rootStore")(n=(0,p.observer)(n=function(e){(0,i.default)(a,e);var t=R(a);function a(e){var r;return(0,o.default)(this,a),(r=t.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.monitorStore.fetchMetrics(O({metrics:Object.values(T),step:"60m",times:100},e))},r.monitorStore=new g.default,r.fetchData(),r}return(0,c.default)(a,[{key:"renderChart",value:function(){var e,t=(0,y.getAreaChartOps)({title:"PROJECT_COUNT",unit:"",legend:["PROJECT_COUNT"],data:null!==(e=(0,h.default)(this.metrics,"".concat(T.namespace_count,".data.result")))&&void 0!==e?e:[{values:(0,y.getZeroValues)()}]});return f.default.createElement(E.SimpleArea,(0,u.default)({width:"100%",bgColor:"transparent"},t))}},{key:"render",value:function(){var e=this.monitorStore,t=e.isLoading,a=e.isRefreshing,r=(0,m.default)(this.metrics);return f.default.createElement(_.Loading,{spinning:t},f.default.createElement("div",{className:b.default.card},f.default.createElement(v.Controller,{step:"1h",times:24,onFetch:this.fetchData,loading:t,refreshing:a,isEmpty:r},this.renderChart())))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),a}(f.default.Component))||n)||n;t.default=C},4204:function(e,t,a){},4205:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n=r(a(36)),u=r(a(37)),l=r(a(55)),o=r(a(56)),c=r(a(51)),i=r(a(0)),s=r(a(4206)),d=r(a(4209));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var p=function(e){(0,l.default)(a,e);var t=f(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return i.default.createElement("div",{className:d.default.wrapper},i.default.createElement(s.default,{cluster:this.props.match.params.cluster}))}}]),a}(i.default.Component);t.default=p},4206:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(239),p=n(r(3)),m=n(r(886)),h=r(186),v=n(r(1211)),y=r(52),g=n(r(4207)),_=n(r(4208));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count","namespace_net_bytes_received","namespace_net_bytes_transmitted"],S=(0,f.observer)(u=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).download=function(){t.store.download("project.usage.rank.json")},t.store=new v.default({limit:10,sort_type:"desc",cluster:e.cluster,sort_metric_options:(0,y.hideGPUByLicense)(b,e.cluster)}),t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"renderToolbar",value:function(){var e=this;return d.default.createElement("div",{className:(0,p.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(h.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),d.default.createElement("span",{className:_.default.sort_button},d.default.createElement(h.Icon,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:function(){return e.store.changeSortType()}}))),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(h.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderList",value:function(){return d.default.createElement(h.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(g.default,{cluster:this.props.cluster,store:this.store,prefix:"/whizard-telemetry"}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,r=e.limit;return d.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(m.default,{page:t,total:a,limit:r,onChange:this.store.changePagination}))}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),r}(d.default.Component))||u;a.default=S},4207:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(27),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(27),r(4),r(23),r(57),r(17);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(788)),f=n(r(846)),p=n(r(987)),m=r(239),h=n(r(0)),v=r(52),y=r(794);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).IconWidth=40,e.rankTdWidth=124,e.columns=[{dataIndex:"namespace",title:t("PROJECT"),key:"avatar",render:function(t){return h.default.createElement(d.default,{icon:"project",iconSize:40,title:(0,v.showNameAndAlias)(t,"project"),to:"".concat(e.prefix,"/").concat(t)})}},{sort_metric:"namespace_cpu_usage",key:"cpu",width:e.rankTdWidth,title:h.default.createElement("div",null,t("CPU_USAGE")),render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_cpu_usage,"cpu","-")),h.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,y.getSuitableValue)(e.namespace_cpu_limit_hard,"cpu","-")})))}},{sort_metric:"namespace_memory_usage_wo_cache",width:e.rankTdWidth,title:h.default.createElement("div",null,t("MEMORY_USAGE")),key:"memory",render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_memory_usage_wo_cache,"memory","-")),h.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,y.getSuitableValue)(e.namespace_memory_limit_hard,"memory","-")})))}},{sort_metric:"namespace_gpu_usage",key:"gpu",width:e.rankTdWidth,title:h.default.createElement("div",null,t("GPU_USAGE")),render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_gpu_usage,"gpu","-")),h.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,y.getSuitableValue)(e.namespace_gpu_limit_hard,"gpu","-")})))}},{sort_metric:"namespace_gpu_memory_usage",width:e.rankTdWidth,title:h.default.createElement("div",null,t("GPU_MEMORY_USAGE")),key:"gpu_memory",render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_gpu_memory_usage,"memory","-")))}},{sort_metric:"namespace_pod_count",title:t("POD_COUNT"),key:"pod",width:e.rankTdWidth,render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,e.namespace_pod_count||"-"),h.default.createElement("div",null,t("QUOTA_VALUE",{value:e.namespace_pods_hard||"-"})))}},{sort_metric:"namespace_net_bytes_transmitted",title:t("OUTBOUND_TRAFFIC"),key:"namespace_net_bytes_transmitted",width:e.rankTdWidth,render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_net_bytes_transmitted,"bandwidth","-")))}},{sort_metric:"namespace_net_bytes_received",title:t("INBOUND_TRAFFIC"),key:"namespace_net_bytes_received",width:e.rankTdWidth,render:function(e){return h.default.createElement("div",null,h.default.createElement("h3",null,(0,y.getSuitableValue)(e.namespace_net_bytes_received,"bandwidth","-")))}}],e}return(0,o.default)(r,[{key:"toPercentage",value:function(e){var t=Number(e)||0;return"".concat(Math.ceil(100*t),"%")}},{key:"toUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNaN(e)?"-":"".concat(e," ").concat(t)}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.store,r=e.cluster,n=this.props.store.data,u=(0,v.hideGPUByLicense)(this.columns,r);return h.default.createElement(p.default,{theme:t,columns:u,store:a,dataSource:n.toJS(),emptyText:h.default.createElement(f.default,null)})}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,a=e.cluster,r=e.prefix,n=void 0===r?"/clusters":r;return"".concat(t?"/".concat(t):"").concat(n,"/").concat(a,"/projects")}}]),r}(h.default.Component))||u)||u;a.default=_},4208:function(e,t,a){e.exports={wrapper:"_2QEE0kA5oK3yiR5F6NJ_EH",pane:"_31ZPRBnP6uo15ShSfybmEC",pane__toolbar:"_3SbSBYQmiUm1PQleDJ5vH",pane__pagination:"ydHR7y7UOyE_D7JIJFiul",title:"_1wjlM5f84incd6IxPjFeQJ",toolbar:"_3MkuGiM5u4B6e9PyVpYdy6",toolbar_buttons:"WVJZaW6cbDxrcaHir3WpA",toolbar_filter:"_2PEY7Til2l8LMGkvefBQ0F",sort_button:"_2mogoX-bAf8_dO7maUFDs0",table:"_2MhZIj6mrL3Z3M_-BpqjyP",table_rank:"_36LLCV84MnD4R4sCESppwj",table_no_border:"_2zUvkXapImNxQRxJokvitf",rankList_row:"_1dTdOaYl30Ixx7flGC4HzK",rankLink__sort_col:"ngGYUZ7bVL-4ZRRi6u6hT"}},4209:function(e,t,a){e.exports={wrapper:"_2_GA-aA3dcjHwTTo42BDsA",pane:"_2Fg_H23gi6f42CuvKoE3h_",tabs:"_1BARvYoq_2_Sd9Q31qYDKq",selected:"d8kln6abpJZWeNhFKJBaa"}},4210:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(84),r(18),r(16),r(9),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(84),r(18),r(28),r(42),r(16),r(9),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var u,l,o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(49)),p=n(r(0)),m=r(239),h=r(14),v=n(r(3)),y=n(r(26)),g=r(433),_=r(186),E=n(r(790)),b=n(r(789)),S=n(r(792)),O=n(r(1861)),R=r(52),T=n(r(1862)),C=n(r(4214));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var P=(0,m.inject)("rootStore")(u=(0,m.observer)((l=function(e){(0,i.default)(r,e);var a=A(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).store=new O.default,e.state={showCreate:!1},e.refresh=function(){e.store.fetch({labelSelector:"logging.kubesphere.io/component=".concat(e.component),cluster:e.props.match.params.cluster})},e.handleTabChange=function(t){e.props.rootStore.routing.push("/whizard-telemetry/".concat(e.cluster,"/log-collections/").concat(t))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.refresh();var e=this.tabs.options.filter((function(e){return!e.hidden})).map((function(e){return e.value}));e.includes(this.component)||this.handleTabChange(e[0]||"logging")}},{key:"componentDidUpdate",value:function(e){this.component!==e.match.params.component&&this.refresh()}},{key:"renderCollection",value:function(){return p.default.createElement(_.Loading,{spinning:this.store.list.isLoading},p.default.createElement("div",null,this.collections.length?this.collections.map(this.renderCollectionItem,this):this.renderEmptyCollection()))}},{key:"renderCollectionItem",value:function(e){var a=e.type,r=(0,y.default)(T.default,a,{}),n=(0,y.default)(r,"ICON",(function(){})),u=(0,y.default)(r,"title",""),l=e.address;return p.default.createElement(g.Link,{key:e.uid,to:"".concat(this.props.match.url,"/").concat(e.name)},p.default.createElement(b.default,{className:C.default.item},p.default.createElement(n,{width:40,height:40}),p.default.createElement(E.default,{title:p.default.createElement("span",{className:C.default.title},u),description:"".concat(t("LOG_ADDRESS")).concat(l)}),p.default.createElement(E.default,{title:e.enabled?t("ENABLED"):t("DISABLED"),description:t("STATUS")}),p.default.createElement(E.default,{title:t(e.component.toUpperCase()),description:t("TYPE")}),p.default.createElement(E.default,{title:(0,R.getLocalTime)(e.creationTimestamp).format("YYYY-MM-DD HH:mm:ss"),description:t("CREATION_TIME")})))}},{key:"renderEmptyCollection",value:function(){return p.default.createElement("div",{className:(0,v.default)(C.default.pane,C.default.empty)},p.default.createElement(_.Icon,{size:40,name:"file"}),p.default.createElement("p",null,t("EMPTY_LOG_COLLECTIONS")))}},{key:"render",value:function(){return p.default.createElement("div",{className:C.default.wrapper},p.default.createElement(S.default,{className:C.default.header,icon:"file",title:t("LOG_RECEIVER_PL"),description:t("LOG_COLLECTION_DESC"),tabs:this.tabs,extra:p.default.createElement("div",{className:C.default.extra})}),this.renderCollection())}},{key:"collections",get:function(){return this.store.list.data}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"tabs",get:function(){return{value:this.component,onChange:this.handleTabChange,options:[{value:"logging",label:t("CONTAINER_LOGS"),hidden:!globals.app.hasClusterModule(this.cluster,"logging")},{value:"events",label:t("RESOURCE_EVENTS"),hidden:!globals.app.hasClusterModule(this.cluster,"events")},{value:"auditing",label:t("AUDIT_LOGS"),hidden:!globals.app.hasClusterModule(this.cluster,"auditing")}]}}}]),r}(p.default.Component),(0,f.default)(l.prototype,"collections",[h.computed],Object.getOwnPropertyDescriptor(l.prototype,"collections"),l.prototype),u=l))||u)||u;a.default=P},4211:function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return c}));var r=a(315),n=a.n(r),u=a(0),l=a.n(u),o=l.a.createElement("image",{width:40,height:36,href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA B3RJTUUH4wIOCBciGOtzFQAAB29JREFUWMPNmGuMVVcVx/9r73PuY+4wFMkEAYsCUoNjbCgt6PhF qjGG1vqhRY3GxqDgB00/mTb2NZmSgBiiNdBIWqk1pA9tqEJoqNRIDY8ZqA+YAkEBmQ5MZ+6duTP3 zn2dc/bea/nhDIQy7wFpd7LvTe7euft3/mut/1nnkIgAAFpPI1HrvPRAoVQ8NfdM0zstLWB8CAaJ CFpPI+Hy2X2k/LujIMrVysH2XDa/9aX1y/s/HICHctuMtT9iyxDSACmEtehYuVh+rOAvPfCHNXAf GOBTh/JNzLbDOKvYMhwL2DHIS8AaW6yWo609nb0/3/3wF0ofBKAC3A9ERF27YKMIIm5muj7x+NxF H9354M6TS6m1VU3nkOsCFOGvjLUojmFNhGQ6+fVMJrN77eI1965qfcu7yQrSgok2mTCAUrTETyZf /sTCOU9+rnVfw00ElPrJbGQTAZA6P518YuGt81+84/HXPn5zAGnym4UdxEWob5hx78IFi96864k3 7vt/A9JTh7LinMCyw9VV7Bhg5+BE4JxAHINZ4DjeQ9rDYKESdvdmd/T1lTZceGZN76QPJaKmNb+Y VT8Yfdr5cpsitQAiPghd5Lm29t2PdlzZu+Fwjq11ZJmnBMjMABRKgUHXxd6zUWi3QOHVjk33DI4F 9dmf/LnR6/zvCq9WXk1svyjsFivlJUQExjgQETxf5QC16ei+h38lAqGNbxeLYa3WYN3UFGRmsBMI gFI1Qnc2DzbmlDD2K3C7WOlV1jFBp0WrpQjtSm8wd5cUC0sUAGGGwEFY0FCfwne/8Xl0XRrEnv0n oJQuakWrj+x95IhXK1fb/FRylXO1xHRyRESQSfmYM6se2f6hJmjdRM4CygKeFihNKoqgcj2Q8hAE PHxbIgAKDMaMmRl8ddVncPJMD3bvPwEolbGCh+6879nj9P0//nvFnFkzX/Igi421cG5qCrIImAUQ ID9QRN9AEUoAJRQzFIeAnm7AGECN4fMEzGuciWoQYaBQhVYE0joQ0a/rf76ytXvH0a6wvq7uyxri MQtEBCKxOgJAhj+u/Hb19/C6iCCZTMBEBlFkoBRBBgvAe+8B7GI4olGngFAo1RAYgfYTcAQDoUGl aLYCgJe3v7rjdHf+xap4RtMUfGcUJWbPnolkwo/henuHIxk3IGNNpTzoZIpJ638YkUcVsIpc3TJX Mcs9AJADLXbOxj2PlazctqRxRvMtmjSRTCMhAd/3kdYaYTYLIhrOtTGGIkC0OLY5dm5jueZ+d/7N R4rvu+bLDSsA3P5M+x2pVPpPczOpj81PeZTwFNgxDAvEjp+DwnHIK5Uqst19cD09QKUSh/FamQkQ BjiyEgTV82yCdWcPbnpr1KBcDQgAy7e3r9OJzNMp6+o+klSYnU4i5SmAEcM5hh2tSADUqiF6LvbC WAeEEaS3N07QYUgRgbCDrdYQBoFwaM4IYe2F9s3tI8CIqKmpyR/RmdC/Ol5Qy+/8kvH8+y9VQi9b CpHxFBp8jYznQWsCEcWpdVkdBZjIoq+3H8bYOLSpJCSVhiuXYlcIA9gohAlDwDlR0JeU568717Zx VDgAdKqxkUcoCADNW9uWcSq9F8zz2Lq4gWWGZkAD0AT4IGhFAMcWVMnmUS1XQcNKKRCigUFU3j0X m7JInI1EIKWHtO+tP3do0+8nSutRjantoebjsHYveb4BCIriKQBCFlRCh0ItQr4UIF8KkOvKodRf BEcWEllI5CCRg04m40oViVUnApEfkqe3TQZuTEAREQRuF6wJYqz3pTiI4vCSUnBDZUi5AlLXFoNA +QnodBqCWD1R2pFHf9EuvXkycGMCAgBq5RNO0A2lhu14JKUbHIIrDI1SqZdzSUElkoAAQiQE6iQf Pz3b3jJ03YBlM1BRgn6QGsUQCXZwCHagiImG0jq+ItJV+N6G83/72TuThRsXUJcDgTihaxybALjC EGy+gAmbXQIgACkNEF7oPJzcORW4cQEz8z6ZFKJZEKHLpwkEJl+IlZvMHVFigwfhSP0tmSdFWqb8 tmLMJzTn5FNEar44q0AK4iKYXAG2VJn0n7MT2LDWKQrrTr7RMjBVuHEVpLrk/eT7GZACBzVE2QG4 am3SjzDKS8BVy92G7YPvtm85PR24MQGbf9m2AinvWxJFCVMcgukbhIui8Wr+GrgkhF2XOPPNrkMb D04XDhglxCu3dSykhszTrmbmmnw/XCUAMWIrkQk6HCIonQA7e8y44Icnd/34+PXAjVCw+bm3m9l3 r4Sl8sogl1UuDMf0uBFs2geRts6a5yQyXzv52+9dN9wVBVf8+u+L2Nr1DF7rgnKjq9YAkuF+bnzV SHsgIUDcMXJuw/Hnv7P3RoBdAVy27fC3WXgzWM3nKCBEdoJwEkh5ICKwNQzGUWHzbIRg15nn197w N2CeJBMnYHge2JDyfEA0hBzgGEQMkACKQeQBxkIoMiLoFGcOQvBaPlc40L1nffVGg12RQ0Rw+5a/ 3s3iViPkW0HIAJqIGTAOiFjIhmVn6QKcvaAD7hgQ9Z+Lv1kzLV+b6vgfNH/FZ+VqV34AAAAldEVY dGRhdGU6Y3JlYXRlADIwMTktMDItMTRUMDA6MjM6MzQrMDg6MDD/HpXnAAAAJXRFWHRkYXRlOm1v ZGlmeQAyMDE5LTAyLTE0VDAwOjIzOjM0KzA4OjAwjkMtWwAAAABJRU5ErkJggg=="}),c=function(e){return l.a.createElement("svg",n()({viewBox:"0 0 40 36",width:"1em",height:"1em"},e),o)};t.default="data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjM2cHgiIHZpZXdCb3g9IjAgMCA0MCAzNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNDAgMzYiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgPGltYWdlIGlkPSJpbWFnZTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSIzNiIgeD0iMCIgeT0iMCIKICAgIGhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ2dBQUFBa0NBWUFBQUQ3UEhnV0FBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFDQmpTRkpOCkFBQjZKZ0FBZ0lRQUFQb0FBQUNBNkFBQWRUQUFBT3BnQUFBNm1BQUFGM0NjdWxFOEFBQUFCbUpMUjBRQS93RC9BUCtndmFlVEFBQUEKQjNSSlRVVUg0d0lPQ0JjaUdPdHpGUUFBQjI5SlJFRlVXTVBObUd1TVZWY1Z4LzlyNzNQdVkrNHdGTWtFQVlzQ1VvTmpiQ2d0NlBoRgpxakdHMXZxaFJZM0d4cURnQjAwL21UYjJOWm1TZ0JpaU5kQklXcWsxcEE5dHFFSm9xTlJJRFk4WnFBK1lBa0VCbVE1TVorNmR1VFAzCnpuMmRjL2JlYS9uaERJUXk3d0ZwZDdMdlRlN2V1ZnQzL211dC8xbm5rSWdBQUZwUEkxSHJ2UFJBb1ZROE5mZE0wenN0TFdCOENBYUoKQ0ZwUEkrSHkyWDJrL0x1aklNclZ5c0gyWERhLzlhWDF5L3MvSElDSGN0dU10VDlpeXhEU0FDbUV0ZWhZdVZoK3JPQXZQZkNITlhBZgpHT0JUaC9KTnpMYkRPS3ZZTWh3TDJESElTOEFhVzZ5V282MDluYjAvMy8zd0Ywb2ZCS0FDM0E5RVJGMjdZS01JSW01bXVqN3grTnhGCkg5MzU0TTZUUzZtMVZVM25rT3NDRk9HdmpMVW9qbUZOaEdRNitmVk1Kck43N2VJMTk2NXFmY3U3eVFyU2dvazJtVENBVXJURVR5WmYKL3NUQ09VOStyblZmdzAwRWxQckpiR1FUQVpBNlA1MThZdUd0ODErODQvSFhQbjV6QUdueW00VWR4RVdvYjVoeDc4SUZpOTY4NjRrMwo3dnQvQTlKVGg3TGluTUN5dzlWVjdCaGc1K0JFNEp4QUhJTlo0RGplUTlyRFlLRVNkdmRtZC9UMWxUWmNlR1pONzZRUEphS21OYitZClZUOFlmZHI1Y3BzaXRRQWlQZ2hkNUxtMjl0MlBkbHpadStGd2pxMTFaSm1uQk1qTUFCUktnVUhYeGQ2elVXaTNRT0hWamszM0RJNEYKOWRtZi9MblI2L3p2Q3E5V1hrMXN2eWpzRml2bEpVUUV4amdRRVR4ZjVRQzE2ZWkraDM4bEFxR05ieGVMWWEzV1lOM1VGR1Jtc0JNSQpnRkkxUW5jMkR6Ym1sREQySzNDN1dPbFYxakZCcDBXcnBRanRTbTh3ZDVjVUMwc1VBR0dHd0VGWTBGQ2Z3bmUvOFhsMFhSckVudjBuCm9KUXVha1dyait4OTVJaFhLMWZiL0ZSeWxYTzF4SFJ5UkVTUVNmbVlNNnNlMmY2aEptamRSTTRDeWdLZUZpaE5Lb3FnY2oyUThoQUUKUEh4YklnQUtETWFNbVJsOGRkVm5jUEpNRDNidlB3RW9sYkdDaCs2ODc5bmo5UDAvL252Rm5Ga3pYL0lnaTQyMWNHNXFDcklJbUFVUQpJRDlRUk45QUVVb0FKUlF6RkllQW5tN0FHRUNONGZNRXpHdWNpV29RWWFCUWhWWUUwam9RMGEvcmY3Nnl0WHZIMGE2d3ZxN3V5eHJpCk1RdEVCQ0t4T2dKQWhqK3UvSGIxOS9DNmlDQ1pUTUJFQmxGa29CUkJCZ3ZBZSs4QjdHSTRvbEduZ0ZBbzFSQVlnZllUY0FRRG9VR2wKYUxZQ2dKZTN2N3JqZEhmK3hhcDRSdE1VZkdjVUpXYlBub2xrd28vaGVudUhJeGszSUdOTnBUem9aSXBKNjM4WWtVY1ZzSXBjM1RKWApNY3M5QUpBRExYYk94ajJQbGF6Y3RxUnhSdk10bWpTUlRDTWhBZC8za2RZYVlUWUxJaHJPdFRHR0lrQzBPTFk1ZG01anVlWitkLzdOClI0cnZ1K2JMRFNzQTNQNU0reDJwVlBwUGN6T3BqODFQZVpUd0ZOZ3hEQXZFanArRHduSElLNVVxc3QxOWNEMDlRS1VTaC9GYW1Ra1EKQmppeUVnVFY4MnlDZFdjUGJucHIxS0JjRFFnQXk3ZTNyOU9Kek5NcDYrbytrbFNZblU0aTVTbUFFY001aGgydFNBRFVxaUY2THZiQwpXQWVFRWFTM04wN1FZVWdSZ2JDRHJkWVFCb0Z3YU00SVllMkY5czN0SThDSXFLbXB5Ui9SbWRDL09sNVF5Ky84a3ZIOCt5OVZRaTliCkNwSHhGQnA4all6blFXc0NFY1dwZFZrZEJaaklvcSszSDhiWU9MU3BKQ1NWaGl1WFlsY0lBOWdvaEFsRHdEbFIwSmVVNTY4NzE3WngKVkRnQWRLcXhrVWNvQ0FETlc5dVdjU3E5Rjh6ejJMcTRnV1dHWmtBRDBBVDRJR2hGQU1jV1ZNbm1VUzFYUWNOS0tSQ2lnVUZVM2owWAptN0pJbkkxRUlLV0h0Tyt0UDNkbzArOG5TdXRSamFudG9lYmpzSFl2ZWI0QkNJcmlLUUJDRmxSQ2gwSXRRcjRVSUY4S2tPdktvZFJmCkJFY1dFbGxJNUNDUmcwNG00MG9WaVZVbkFwRWZrcWUzVFFadVRFQVJFUVJ1RjZ3SllxejNwVGlJNHZDU1VuQkRaVWk1QWxMWEZvTkEKK1Fub2RCcUNXRDFSMnBGSGY5RXV2WGt5Y0dNQ0FnQnE1Uk5PMEEybGh1MTRKS1ViSElJckRJMVNxWmR6U1VFbGtvQUFRaVFFNmlRZgpQejNiM2pKMDNZQmxNMUJSZ242UUdzVVFDWFp3Q0hhZ2lJbUcwanErSXRKVitONkc4My83MlR1VGhSc1hVSmNEZ1RpaGF4eWJBTGpDCkVHeStnQW1iWFFJZ0FDa05FRjdvUEp6Y09SVzRjUUV6OHo2WkZLSlpFS0hMcHdrRUpsK0lsWnZNSFZGaWd3ZmhTUDB0bVNkRldxYjgKdG1MTUp6VG41Rk5FYXI0NHEwQUs0aUtZWEFHMlZKbjBuN01UMkxEV0tRcnJUcjdSTWpCVnVIRVZwTHJrL2VUN0daQUNCelZFMlFHNAphbTNTanpES1M4QlZ5OTJHN1lQdnRtODVQUjI0TVFHYmY5bTJBaW52V3hKRkNWTWNndWtiaEl1aThXcitHcmdraEYyWE9QUE5ya01iCkQwNFhEaGdseEN1M2RTeWtoc3pUcm1ibW1udy9YQ1VBTVdJcmtRazZIQ0lvblFBN2U4eTQ0SWNuZC8zNCtQWEFqVkN3K2JtM205bDMKcjRTbDhzb2dsMVV1RE1mMHVCRnMyZ2VSdHM2YTV5UXlYenY1Mis5ZE45d1ZCVmY4K3UrTDJOcjFERjdyZ25LanE5WUFrdUYrYm56VgpTSHNnSVVEY01YSnV3L0hudjdQM1JvQmRBVnkyN2ZDM1dYZ3pXTTNuS0NCRWRvSndFa2g1SUNLd05RekdVV0h6YklSZzE1bm4xOTd3Ck4yQ2VKQk1uWUhnZTJKRHlmRUEwaEJ6Z0dFUU1rQUNLUWVRQnhrSW9NaUxvRkdjT1F2QmFQbGM0MEwxbmZmVkdnMTJSUTBSdys1YS8KM3MzaVZpUGtXMEhJQUpxSUdUQU9pRmpJaG1WbjZRS2N2YUFEN2hnUTlaK0x2MWt6TFYrYjZ2Z2ZOSC9GWitWcVYzNEFBQUFsZEVWWQpkR1JoZEdVNlkzSmxZWFJsQURJd01Ua3RNREl0TVRSVU1EQTZNak02TXpRck1EZzZNREQvSHBYbkFBQUFKWFJGV0hSa1lYUmxPbTF2ClpHbG1lUUF5TURFNUxUQXlMVEUwVkRBd09qSXpPak0wS3pBNE9qQXdqa010V3dBQUFBQkpSVTVFcmtKZ2dnPT0iIC8+Cjwvc3ZnPgo="},4212:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var u=n(r(36)),l=n(r(37)),o=n(r(55)),c=n(r(56)),i=n(r(51)),s=n(r(0)),d=r(186),f=n(r(1059)),p=n(r(4213));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,o.default)(r,e);var a=m(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){return s.default.createElement("div",{className:p.default.fromGroup},s.default.createElement(d.Form.Item,{label:t("SERVICE_ADDRESS"),desc:t("LOG_COLLECTION_FLUENTD_URL_TIPS")},s.default.createElement(f.default,{hostName:"host",portName:"port",defaultPort:24224})))}}]),r}(s.default.Component);a.default=h},4213:function(e,t,a){e.exports={path:"_2gZzkWcXonCoGhhZVWMBYW",columns:"-_X2Czvxv5vF0xOgGHXRF",desc:"_1KvBTxOju81Z_0QjuYGwgh"}},4214:function(e,t,a){e.exports={empty:"_1ngG28-8bhC2smsKLZMt2L",header:"BifBcFVWpXziuzB6g_mSk",extra:"_2reaNA1l5M3WCwngDr5xvo",pane:"_2xtKCNe9B3FJ6vibqXqkXB",item:"yZ0ijFTe455vtUmHugOCr",title:"_2a3ADH7EMeeY_2e7jwv2b9"}},4215:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var u,l=r(a(315)),o=r(a(36)),c=r(a(37)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(0)),p=r(a(792)),m=n(a(793)),h=r(a(796)),v=r(a(1817));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=(0,m.default)({store:new v.default,module:"clusterdashboards",authKey:"monitoring",name:"CUSTOM_MONITORING_DASHBOARD"})(u=function(e){(0,i.default)(a,e);var t=y(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"getColumns",value:function(){return[]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return f.default.createElement("div",null,f.default.createElement(m.ListPage,this.props,f.default.createElement(p.default,(0,l.default)({},t,{tabs:this.tabs})),f.default.createElement(h.default,(0,l.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"}))))}},{key:"itemActions",get:function(){return[]}}]),a}(f.default.Component))||u;t.default=g},4216:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(73),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(73),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(810)),p=n(r(788)),m=n(r(792)),h=r(793),v=n(r(0)),y=r(433),g=n(r(917)),_=r(52),E=r(72);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,h.withClusterList)({store:new g.default,module:"ingresses",name:"ROUTE",rowKey:"uid"})(u=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return v.default.createElement(p.default,{icon:E.ICON_TYPES[n],iconSize:40,title:(0,_.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/whizard-telemetry/".concat(u,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("GATEWAY_ADDRESS_TCAP"),dataIndex:"loadBalancerIngress",isHideable:!0,width:"22%",render:function(e){return e.join("; ")}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return v.default.createElement(y.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,_.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,r=e.tableProps;return v.default.createElement(h.ListPage,this.props,v.default.createElement(m.default,a),v.default.createElement(f.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){return[]}}]),r}(v.default.Component))||u;a.default=S},4217:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(4218)),u=r(a(4230)),l=r(a(4234)),o=r(a(4235)),c=r(a(4236)),i=r(a(4237)),s=r(a(4238)),d=r(a(4239)),f=r(a(4240)),p=r(a(4241)),m=r(a(4245)),h=r(a(4250)),v=r(a(4252)),y=r(a(4256)),g=r(a(4260)),_=r(a(4261)),E=r(a(4262)),b=r(a(4273)),S=r(a(4283)),O=r(a(4291)),R=r(a(4295)),T=r(a(4299)),C=r(a(4304)),A="/whizard-telemetry/:cluster",P=[{path:"".concat(A,"/nodes/:node"),component:E.default},{path:"".concat(A,"/edgenodes/:node"),component:b.default},{path:"".concat(A,"/customresources/:name"),component:R.default},{path:["".concat(A,"/alert-rules/builtin/:name"),"".concat(A,"/alert-rules/:name")],component:n.default},{path:"".concat(A,"/log-collections/:component/:name"),component:T.default},{path:"".concat(A,"/gateways/:component/:gatewayName"),component:C.default},{path:"".concat(A,"/storageclasses/:name"),component:O.default},{path:"".concat(A,"/pv/:name"),component:g.default},{path:"".concat(A,"/volume-snapshot-content/:name"),component:v.default},{path:"".concat(A,"/volume-snapshot-classes/:name"),component:y.default},{path:"".concat(A,"/projects/:namespace"),component:_.default,routes:[{path:"".concat(A,"/projects/:namespace/deployments/:name"),component:h.default},{path:"".concat(A,"/projects/:namespace/statefulsets/:name"),component:m.default},{path:"".concat(A,"/projects/:namespace/daemonsets/:name"),component:p.default},{path:"".concat(A,"/projects/:namespace/jobs/:name"),component:f.default},{path:"".concat(A,"/projects/:namespace/cronjobs/:name"),component:d.default},{path:"".concat(A,"/projects/:namespace/services/:name"),component:s.default},{path:"".concat(A,"/projects/:namespace/ingresses/:name"),component:c.default},{path:"".concat(A,"/projects/:namespace/pods/:podName/containers/:containerName"),component:o.default},{path:"".concat(A,"/projects/:namespace/pods/:podName"),component:i.default},{path:"".concat(A,"/projects/:namespace/volume-snapshots/:name"),component:u.default},{path:"".concat(A,"/projects/:namespace/volumes/:name"),component:l.default},{path:"".concat(A,"/projects/:namespace"),component:S.default}]}];t.default=P},4218:function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(86),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(86),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(26)),y=n(r(63)),g=r(186),_=n(r(795)),E=r(52),b=r(791),S=n(r(1014)),O=n(r(823)),R=n(r(4219)),T=n(r(4229));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,h.inject)("rootStore")(u=(0,h.observer)(u=(0,b.trigger)(u=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new S.default,e.fetchData=function(t){var a=e.props.match.params,r=a.cluster,n=a.namespace,u=a.name;e.store.fetchDetail&&e.store.fetchDetail(A({cluster:r,namespace:n,name:u,type:e.type},t))},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail);if(!(0,y.default)(a)){var r=(0,v.default)(a,"enabled"),n=(0,v.default)(a,"createTime"),u=(0,v.default)(a,"interval",""),l=(0,v.default)(a,"creator"),o=(0,v.default)(a,"evaluationTime"),c=[{name:t("POLICY_STATUS"),value:p.default.createElement(_.default,{className:T.default.icon,type:JSON.parse(r)?"active":"disabled",name:JSON.parse(r)?t("ENABLED"):t("DISABLED")})},{name:t("CHECK_INTERVAL"),value:""!==u?t({s:"TIME_S",m:"TIME_M",h:"TIME_H"}[u.slice(-1)],{num:u.slice(0,-1)}):"-"},{name:t("TIME_SPENT"),value:"-"!==o?t("TIME_S",{num:o}):"-"},{name:t("CREATION_TIME"),value:(0,E.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:""!==l?l:"-"}];if("builtin"===e.type){var i=(0,v.default)(a,"_originDataWithStatus.spec.rules"),s=(0,v.default)(i[0],"annotations.runbook_url","-");c.push({name:t("REFERENCE"),value:s})}return c}},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),icon:p.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"}),breadcrumbs:[{label:t("ALERTING_POLICY_PL"),url:this.listUrl}]};return p.default.createElement(O.default,(0,l.default)({stores:e,routes:(0,R.default)(this.props.match.path)},a))}},{key:"module",get:function(){return"alert-rules"}},{key:"name",get:function(){return"ALERTING_POLICY"}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster,t=this.type;return"/whizard-telemetry/".concat(e,"/alert-rules").concat(t?"?type=".concat(t):"")}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.default.Component))||u)||u)||u;a.default=k},4219:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4220)),l=r(a(4227));t.default=function(e){return[{path:"".concat(e,"/rules"),title:"ALERTING_RULE",component:u.default,exact:!0},{path:"".concat(e,"/messages"),title:"ALERTING_MESSAGE_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/rules"),exact:!0})]}},4220:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(86),r(29),r(18),r(48),r(192),r(16),r(326),r(27),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(38),r(62),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(29),r(18),r(28),r(48),r(192),r(42),r(16),r(326),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(38),r(62),r(7),r(32);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),y=n(r(789)),g=n(r(4221)),_=n(r(4222)),E=n(r(4223)),b=n(r(4224)),S=n(r(4225));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C={s:1,m:2,h:3},A={critical:100,error:10,warning:1},P=(0,m.inject)("detailStore")(u=(0,m.observer)(u=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).fetchData=function(t){var a=e.props.match.params,r=a.cluster,n=a.namespace,u=a.name;e.store.fetchDetail&&e.store.fetchDetail(R({cluster:r,namespace:n,name:u,type:e.type},t))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderOld",value:function(){var e=this.store.detail,a=(0,h.default)(e,"annotations.summary"),r=(0,h.default)(e,"annotations.message"),n=(0,h.default)(e,"annotations.kind"),u=(0,p.toJS)(e.resources);return f.default.createElement(f.default.Fragment,null,!(0,v.default)(e.rules)&&f.default.createElement(y.default,{title:t("ALERTING_RULE")},e.rules.map((function(e,t){return f.default.createElement(E.default,{key:t,data:e,resources:u,kind:n||"Node"})}))),e.query&&f.default.createElement(y.default,{title:t("RULE_EXPRESSION")},f.default.createElement(b.default,{query:e.query})),f.default.createElement(y.default,{title:t("METRIC_MONITORING")},f.default.createElement(_.default,{detail:e,store:this.store})),f.default.createElement(y.default,{title:t("ALERTING_MESSAGE")},f.default.createElement(g.default,{summary:a,message:r})))}},{key:"render",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return f.default.createElement(S.default,{store:this.store,cluster:t,namespace:a,rules:this.rules,handleRefresh:this.fetchData})}},{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return this.store.module}},{key:"params",get:function(){return this.props.match.params}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"rules",get:function(){var e=[],t=(0,p.toJS)((0,h.default)(this.store,"detail._originDataWithStatus.spec.rules",[]));if("builtin"===this.type){var a=new Map;return t.forEach((function(r,n){if(a.has(r.alert)){var u=a.get(r.alert),l={for:(0,h.default)(e[u],"for",""),value:t[u]},o={for:(0,h.default)(r,"for",""),value:r};if(""!==l.for||""!==o.for){var c=C[l.for.slice(-1)],i=C[o.for.slice(-1)];if(c===i)Number(l.for.slice(0,-1))<Number(l.for.slice(0,-1))&&e.splice(u,1,r);else c<i&&e.splice(u,1,r)}var s=(0,h.default)(e[u],"severity"),d=(0,h.default)(r,"severity");s&&d&&A[s]<A[d]&&(e[u].severity=d)}else a.set(r.alert,n),e.push(r)})),e}return t}}]),r}(f.default.Component))||u)||u;a.default=P},4221:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=u(r(36)),o=u(r(37)),c=u(r(55)),i=u(r(56)),s=u(r(51)),d=n(r(0)),f=u(r(1236));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var m=function(e){(0,c.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.summary,r=e.message;return d.default.createElement("div",{className:f.default.notify},d.default.createElement("div",{className:f.default.title},t("NOTIFICATION_SUMMARY_COLON"),a),d.default.createElement("div",{className:f.default.content},t("DETAILS_COLON"),r))}}]),r}(d.Component);a.default=m},4222:function(e,a,r){"use strict";var n=r(157),u=r(20);r(12),r(5),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(191),r(42),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=u(r(43)),o=u(r(30));r(41);var c=u(r(44)),i=u(r(36)),s=u(r(37)),d=u(r(55)),f=u(r(56)),p=u(r(51)),m=n(r(0)),h=u(r(189)),v=r(186),y=r(798),g=r(794),_=u(r(949)),E=r(845),b=u(r(1236));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={metrics:[],step:"30s",times:60,isLoading:!0},e.fetchMetrics=function(){var t=(0,c.default)(l.default.mark((function t(a){var r,n,u,o,c,i,s,d,f,p,m;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.step,u=r.times,e.setState({isLoading:!0}),o=e.props.detail||{},c=o.query,i=o.cluster,s=o.namespace,d=(0,E.getTimeRange)({step:n,times:u}),f=d.start,p=d.end,t.next=6,e.props.store.fetchMetric(O({expr:c,end:p,start:f,step:n,cluster:i,namespace:s},a));case 6:m=t.sent,e.setState({metrics:m,times:u,step:n,isLoading:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.step,r=t.times;e.setState({step:(0,E.getMinuteValue)(a),times:r},(function(){e.fetchMetrics()}))},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchMetrics()}},{key:"render",value:function(){var e=this.state.metrics,a=this.state,r=a.times,n=a.step,u=a.isLoading,l=(0,g.getAreaChartOps)({height:500,title:t("ALERT_MONITORING"),data:e,legend:e.map((function(e){return e.metric?JSON.stringify((0,h.default)(e.metric,"__name__")):""}))});return m.default.createElement("div",{className:b.default.monitoring},m.default.createElement("div",{className:b.default.bar},m.default.createElement(_.default,{step:n,times:r,onChange:this.handleChange}),m.default.createElement(v.Button,{type:"control",icon:"refresh",iconType:"light",onClick:this.fetchMetrics})),m.default.createElement(v.Loading,{spinning:u},m.default.createElement(y.MultiArea,l)))}}]),r}(m.Component);a.default=T},4223:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(73),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(42),r(4),r(23),r(57),r(17);var u=n(r(36)),l=n(r(37)),o=n(r(55)),c=n(r(56)),i=n(r(51)),s=n(r(0)),d=n(r(1)),f=n(r(26)),p=r(1797),m=r(186),h=n(r(790)),v=n(r(1236));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,o.default)(r,e);var a=y(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,a=e.kind,r=e.data,n=void 0===r?{}:r,u=e.resources,l=void 0===u?[]:u,o=n.condition_type,c=n.thresholds,i=n.unit,d=n._metricType,y="".concat(t(a),": ").concat(l.join(", ")),g=(0,f.default)(p.ALL_METRICS_CONFIG,d)||{},_=" ".concat(o," ").concat(c).concat(i);return s.default.createElement("div",{className:v.default.item},s.default.createElement(h.default,{title:y,description:t("MONITORING_TARGETS_SCAP")}),s.default.createElement(h.default,{title:s.default.createElement("span",null,s.default.createElement(m.Icon,{name:g.prefixIcon||"appcenter",size:20}),t(g.label||"Unknown"),_),description:t("ACTIVATION_CONDITION_SCAP")}))}}]),r}(s.default.Component);a.default=g,g.propTypes={data:d.default.object,resources:d.default.array},g.defaultProps={data:{},resources:[]}},4224:function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var u=n(a(36)),l=n(a(37)),o=n(a(55)),c=n(a(56)),i=n(a(51)),s=r(a(0)),d=a(1491),f=n(a(1236));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={html:(0,d.highlightPromql)(e.props.query)},e}return(0,l.default)(a,[{key:"componentDidUpdate",value:function(e){e.query!==this.props.query&&this.setState({html:(0,d.highlightPromql)(this.props.query)})}},{key:"render",value:function(){return s.default.createElement("div",{className:f.default.query,dangerouslySetInnerHTML:{__html:this.state.html}})}}]),a}(s.Component);t.default=m},4225:function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(18),r(48),r(4),r(23),r(24),r(17),r(188),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(18),r(48),r(42),r(4),r(23),r(57),r(24),r(17),r(188);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(789)),m=r(239),h=r(186),v=r(14),y=n(r(135)),g=n(r(26)),_=n(r(250)),E=r(72),b=n(r(3)),S=n(r(4226)),O=n(r(1863));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,m.observer)(u=function(e){(0,i.default)(r,e);var a=R(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).getRules=function(){var e=n.state,t=e.searchValue,a=e.page,r=e.limit,u=n._rules;return""!==t&&(u=n._rules.filter((function(e){return(0,_.default)(e.alert,t)}))),u=(0,y.default)(u).slice((a-1)*r,a*r)},n.handleExpandClick=function(e){n.setState((function(t){return{expandIndex:t.expandIndex===e?"":e}}))},n.handleSearch=function(e){n.setState({searchValue:e,page:1})},n.handleRefresh=function(){n.setState({searchValue:""},(function(){n.props.handleRefresh()}))},n.handlePage=function(e){n.setState({page:e})},n.handlePageSizeClick=function(e,t){n.setState({limit:t})},n.renderHeader=function(){var e=n.state.searchValue;return f.default.createElement("div",{className:O.default.header},f.default.createElement(h.InputSearch,{className:O.default.search,name:"search",value:e,placeholder:t("SEARCH_BY_NAME"),onSearch:n.handleSearch,autoComplete:"off"}),f.default.createElement("div",{className:O.default.actions},f.default.createElement(h.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.pagination,a=e.total,r=e.limit;return f.default.createElement(h.Level,{className:O.default.footer},f.default.createElement(h.LevelLeft,null,f.default.createElement("div",{className:O.default.pageSizeBox},f.default.createElement(h.Dropdown,{placement:"top",trigger:"hover",content:f.default.createElement(h.Menu,{className:O.default.pageSizeMenu,onClick:n.handlePageSizeClick},E.PAGESIZE_OPTION.map((function(e){return f.default.createElement(h.Menu.MenuItem,{className:(0,b.default)(O.default.pageSizeMenuitem),key:e},f.default.createElement("span",null,t("SHOW_NUM",{num:e})))})))},f.default.createElement("div",{className:O.default.pagesize},f.default.createElement("span",{className:O.default.text},t("SHOW_NUM",{num:r})),f.default.createElement(h.Icon,{name:"caret-down",size:16}))),f.default.createElement("div",{className:O.default.gap}),f.default.createElement("span",null,t("TOTAL_ITEMS",{num:a})))),f.default.createElement(h.LevelRight,null,f.default.createElement(h.Pagination,(0,l.default)({},e,{onChange:n.handlePage}))))},n.state={page:1,limit:10,expandIndex:"",searchValue:""},n}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.state.expandIndex,r=this.props,n=r.store,u=r.cluster,l=r.namespace,o=this.getRules();return f.default.createElement(p.default,{title:t("ALERTING_RULE")},this.renderHeader(),o.map((function(t,r){return f.default.createElement(S.default,{key:r,rule:t,index:r,store:n,isExpand:a===r,status:e.status[r],onExpandClick:e.handleExpandClick,cluster:u,namespace:l})})),this.renderFooter())}},{key:"store",get:function(){return this.props.store}},{key:"_rules",get:function(){return this.props.rules}},{key:"status",get:function(){var e=(0,g.default)(this.store,"detail._originDataWithStatus.status.rulesStatus",[]);return(0,v.toJS)(e)}},{key:"pagination",get:function(){var e=this.state;return{page:e.page,limit:e.limit,total:""!==e.searchValue?this.getRules().length:this._rules.length}}}]),r}(f.default.Component))||u;a.default=T},4226:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(73),r(18),r(48),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(73),r(18),r(48),r(42),r(10),r(4),r(23),r(57),r(17);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(186),m=n(r(3)),h=r(832),v=n(r(63)),y=n(r(26)),g=r(923),_=r(239),E=r(791),b=r(52),S=r(1232),O=n(r(1863));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T={cpu:"cpu",pod:"pod",memory:"memory",disk:"storage",network:"network"},C={s:t("SECONDS"),m:t("MINUTES"),h:t("HOURS")},A={disabled:t("DISABLED"),firing:t("ALERT_RULE_FIRING"),inactive:t("ALERT_RULE_INACTIVE"),pending:t("ALERT_RULE_PENDING")},P=(0,_.inject)("rootStore")(u=(0,_.observer)(u=(0,E.trigger)(u=function(e){(0,i.default)(r,e);var a=R(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).handleExpandClick=function(){var t=e.props,a=t.index;(0,t.onExpandClick)(a)},e.renderIcon=function(){var t,a=e.props,r=a.status,n=a.isExpand,u=r.state,l=e.disabled?O.default.status_disabled:O.default["status_".concat(u)];if("Custom"===e.ruleType)return f.default.createElement("div",{className:(0,m.default)(O.default.headIcon,l)},n?f.default.createElement(S.ReactComponent,{width:40,height:40}):f.default.createElement(p.Icon,{name:"computing-setting",size:40}));var o=Object.keys(e.metricThreshold)[0],c=null!==(t=T[o])&&void 0!==t?t:"pod";return f.default.createElement("div",{className:(0,m.default)(O.default.headIcon,[O.default["status_".concat(u)]])},f.default.createElement(p.Icon,{type:n?"light":"dark",name:c,size:40}))},e.handleMonitor=function(t){var a=e.props,r=a.rule,n=a.store,u=a.cluster,l=a.namespace;e.trigger("alerting.rule.monitor",{rule:r,store:n,cluster:u,namespace:l,expr:r.expr}),t.stopPropagation()},e.renderHead=function(){var a,r,n=e.props,u=n.status,l=n.rule,o=u.state,c=null!==(a=null===(r=e.severityConfig.filter((function(e){return e.value===l.severity}))[0])||void 0===r?void 0:r.label)&&void 0!==a?a:"WARNING_ALERT",i=e.disabled?O.default.info_disabled:O.default["info_".concat(o)];return f.default.createElement("div",{className:O.default.head},e.renderIcon(),f.default.createElement("div",null,f.default.createElement("div",{className:O.default.headLine},f.default.createElement("div",{className:O.default.title},l.alert),e.hasMonitoring&&f.default.createElement(p.Tooltip,{content:t("VIEW_METRIC_DATA")},f.default.createElement("img",{src:"/assets/monitor.svg",onClick:e.handleMonitor})),f.default.createElement("div",{className:(0,m.default)(O.default.severity,O.default[l.severity])},t(c))),f.default.createElement("div",{className:(0,m.default)(O.default.statusLine,i)},("inactive"!==o||e.disabled)&&f.default.createElement(p.Icon,{name:"information",size:16}),f.default.createElement("div",{className:O.default.desc},e.disabled?t("DISABLED"):A[o]))))},e.renderMonitorTarget=function(){var a=e.props.rule;if("Custom"===e.ruleType)return f.default.createElement("div",{className:O.default.target});var r=(0,y.default)(a,"exprBuilder.".concat(e.monitorType,".names"),[]);return f.default.createElement("div",{className:O.default.target},f.default.createElement("div",{className:O.default.title},t("".concat(e.monitorType.toUpperCase())),": ",r.join(",")),f.default.createElement("div",{className:O.default.desc},t("MONITORING_TARGETS")))},e.renderAlertRule=function(){var a="Custom"===e.ruleType;return f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},a?t("DURATION"):t("ALERTING_RULE"),"："),f.default.createElement("span",null,e.ruleExpr))},e.renderTime=function(){var a=e.props.status,r=(0,y.default)(a,"lastEvaluation",!1);return f.default.createElement("div",{className:O.default.timeLabel},f.default.createElement("span",{className:(0,m.default)(O.default.time,(0,l.default)({},O.default.time_white,e.props.isExpand))},r?(0,b.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-"),f.default.createElement("div",{className:O.default.desc},t("RECENT_DETECT_TIME")))},e.renderExtraContent=function(){var a=e.props,r=a.rule,n=a.isExpand;return f.default.createElement("div",{className:(0,m.default)(O.default.itemExtra,(0,l.default)({},O.default.itemExtraShow,n))},f.default.createElement("div",{className:O.default.ms_content},e.renderAlertRule(),f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("RULE_EXPRESSION"),":"),f.default.createElement("span",{className:O.default.ruleExpr},r.expr))),f.default.createElement("div",{className:O.default.ms_content},f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("MESSAGE_SUMMARY"),":"),f.default.createElement("span",null,(0,y.default)(r,"annotations.summary",""))),f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("MESSAGE_DETAILS"),":"),f.default.createElement("span",null,(0,y.default)(r,"annotations.message","-")))))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.isExpand;return f.default.createElement("div",{className:O.default.item},f.default.createElement("div",{className:(0,m.default)(O.default.content,(0,l.default)({},O.default.expanded,e)),onClick:this.handleExpandClick},this.renderHead(),this.renderMonitorTarget(),this.renderTime(),f.default.createElement(p.Icon,{name:"chevron-down",type:e?"light":"",size:20})),this.renderExtraContent())}},{key:"ruleType",get:function(){var e=this.props.rule,t=(0,y.default)(e,"exprBuilder",{});return(0,v.default)(t)?"Custom":"Template"}},{key:"monitorType",get:function(){var e=this.props.rule;return Object.keys((0,y.default)(e,"exprBuilder",{}))[0]}},{key:"severityConfig",get:function(){return h.SEVERITY_LEVEL.map((function(e){return{value:e.value,label:e.label}}))}},{key:"resourceType",get:function(){var e=this.props.rule;return Object.keys(e.exprBuilder)[0]}},{key:"metricThreshold",get:function(){var e=this.props.rule;return(0,y.default)(e.exprBuilder[this.resourceType],"metricThreshold",{})}},{key:"disabled",get:function(){var e=this.props.rule;return JSON.parse((0,y.default)(e,"disable","false"))}},{key:"ruleExpr",get:function(){var e=this.props.rule,a="Custom"===this.ruleType;if(!e.for)return"-";var r=(0,y.default)(e,"for",""),n=r.slice(0,-1),u=r.slice(-1);if(a)return"".concat(n).concat(C[u]);var l=Object.keys(this.metricThreshold)[0],o=Object.keys(this.metricThreshold[l])[0],c=g.ALL_METRICS_CONFIG["".concat(l,":").concat(o)].label,i=(0,y.default)(e,"exprBuilder.".concat(this.monitorType,".comparator"));return"".concat(t(c)," ").concat(i," ").concat(n).concat(C[u])}},{key:"hasMonitoring",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}}]),r}(f.default.Component))||u)||u)||u;a.default=P},4227:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(86),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=n(r(26)),h=n(r(451)),v=n(r(63)),y=r(433),g=r(52),_=r(72),E=r(878),b=n(r(1128)),S=n(r(789)),O=n(r(790)),R=n(r(880)),T=n(r(873)),C=n(r(4228));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var N=(0,p.observer)(u=function(e){(0,i.default)(r,e);var a=k(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.props.match.params,a=t.cluster,r=t.namespace,u=t.name,l=P(P({},e),{},{sortBy:"activeAt",ascending:!1,cluster:a,namespace:r,ruleName:u,type:n.type,label_filters:"rule_group=".concat(u)});n.store.fetchList(l)},n.getResourceType=function(e){var a=(0,h.default)(e);return t("ALERT_TYPE",{type:t(a)})},n.getColumns=function(){return[{title:t("MESSAGE"),dataIndex:"value",render:function(e,t){return f.default.createElement(O.default,{icon:"loudspeaker",title:(0,m.default)(t,"annotations.summary"),description:(0,m.default)(t,"annotations.message")||(0,m.default)(t,"annotations.description","-")})}},{title:t("SEVERITY"),dataIndex:"labels.severity",width:"15%",render:function(e){return f.default.createElement(R.default,{data:e})}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"20%",render:function(e){if("template"!==e.rule_type)return"-";var a=(0,E.getAlertingResource)(e),r=a.module,u=a.name,l=a.namespace;return r?"hpas"===r?f.default.createElement("span",null,t(_.MODULE_KIND_MAP[r]),": ",u):f.default.createElement(y.Link,{to:"".concat(n.getPrefix({namespace:l}),"/").concat(r,"/").concat(u)},t(_.MODULE_KIND_MAP[r]),": ",u):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.store=new b.default,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,u=r.namespace,l=r.workspace;return t=t||n,a=a||u,"".concat(l?"/".concat(l):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.isLoading,n=e.filters;return f.default.createElement(S.default,{title:t("ALERTING_MESSAGE_PL"),loading:r},(0,v.default)(a)?f.default.createElement("div",null,t("NO_DATA_DESC")):f.default.createElement(T.default,{className:C.default.table,filters:n,data:a,name:"Alerting Message",rowKey:"value",columns:this.getColumns(),selectedRowKeys:[],selectActions:[],hideHeader:!0,hideFooter:!0}))}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}}]),r}(f.default.Component))||u;a.default=N},4228:function(e,t,a){e.exports={table:"Yu_csta5p94Of2yHhu3v8"}},4229:function(e,t,a){e.exports={icon:"ZXyTQ36NBIPIDv0Nd0QEN"}},4230:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var u=n(r(315)),l=n(r(30)),o=n(r(43));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=n(r(63)),y=r(239),g=r(186),_=n(r(831)),E=n(r(795)),b=r(52),S=r(791),O=r(14),R=n(r(914)),T=n(r(910)),C=n(r(805)),A=n(r(4231));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,y.inject)("rootStore")(c=(0,y.observer)(c=(0,S.trigger)(c=function(e){(0,f.default)(n,e);var a,r=N(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return(e=r.call.apply(r,[this].concat(u))).store=new R.default,e.snapshotClass=new T.default,e.volumeStore=new _.default,e.fetchData=(0,i.default)(o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.store.fetchDetail(e.props.match.params);case 3:return t.next=5,e.snapshotClass.fetchDetail({cluster:a.cluster,name:e.store.detail.snapshotClassName});case 5:case"end":return t.stop()}}),t)}))),e.getVolumeInfo=function(){var t=e.props.match.params,a=e.store.detail.snapshotSourceName;e.volumeStore.fetchDetail(k(k({},t),{},{name:a}))},e.showApply=function(){var t=e.props.match.params,a=t.cluster,r=t.namespace,n=(0,O.toJS)(e.snapshotClass).detail;return!(0,v.default)(n)&&globals.app.hasPermission({module:"volumes",action:"create",project:r,cluster:a})},e.getOperations=function(){return[]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,u=r.restoreSize,l=r.backupStatus,o=void 0===l?"":l,c=r.creator,i=r.errorMessage,s=r.namespace,d=r.snapshotClassName;return(0,v.default)(r)?null:[{name:t("PROJECT"),value:(0,b.showNameAndAlias)(s,"project")},{name:t("STATUS"),value:h.default.createElement("div",null,h.default.createElement(E.default,{type:o,name:t("CREATE_STATUS_".concat(o.toUpperCase()))})," ",!(0,v.default)(i)&&h.default.createElement(g.Tooltip,{content:i},h.default.createElement(g.Icon,{name:"question"})))},{name:t("CAPACITY"),value:"".concat((0,b.memoryFormat)(u,"Gi"),"Gi")},{name:t("VOLUME_SNAPSHOT_CLASS"),value:d},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:c}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,d.default)(n,[{key:"componentDidMount",value:(a=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:this.getVolumeInfo();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return h.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,b.getDisplayName)(this.store.detail),operations:this.getOperations(),attrs:this.getAttrs(),icon:"snapshot",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_PL"),url:this.listUrl}]};return h.default.createElement(C.default,(0,u.default)({stores:e},a,{routes:(0,A.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT"}},{key:"module",get:function(){return"volume-snapshots"}},{key:"authKey",get:function(){return"volumesnapshots"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),n}(h.default.Component))||c)||c)||c;a.default=D},4231:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(813)),l=r(a(4232));t.default=function(e){return[{name:"source",path:"".concat(e,"/source"),title:"DATA_SOURCE",component:l.default},{name:"event",path:"".concat(e,"/event"),title:"EVENT_PL",component:u.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/source"),exact:!0}),(0,n.getIndexRoute)({path:"*",to:"/404",exact:!0})]}},4232:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(73),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(42),r(16),r(4),r(23),r(57),r(17);var l,o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=u(r(0)),p=r(239),m=r(186),h=n(r(789)),v=n(r(831)),y=r(52),g=r(14),_=n(r(63)),E=n(r(194)),b=n(r(4233));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=f.default.createElement("div",null,f.default.createElement("div",null,t("ACCESS_MODE_TCAP"),":"),f.default.createElement("div",null,"RWO (ReadWriteOnce): ",t("ACCESS_MODE_RWO")),f.default.createElement("div",null,"ROX (ReadOnlyMany): ",t("ACCESS_MODE_ROX")),f.default.createElement("div",null,"RWX (ReadWriteMany): ",t("ACCESS_MODE_RWX"))),R=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new v.default,e.renderItem=function(){var a=e.store.detail;return f.default.createElement("div",null,f.default.createElement("div",{className:b.default.ItemBox},f.default.createElement("div",{className:b.default.leftBox},f.default.createElement(m.Icon,{name:"storage",size:"40"}),f.default.createElement("div",{className:b.default.rightBox},f.default.createElement("span",{className:b.default.title},a.name),f.default.createElement("span",{className:b.default.des},t("STORAGE_CLASS_VALUE",{value:a.storageClassName})))),f.default.createElement("div",{className:b.default.titleBox},f.default.createElement("span",{className:b.default.title},(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),f.default.createElement("span",{className:b.default.des},t("CREATION_TIME_TCAP")))),f.default.createElement("div",{className:b.default.IconLine},f.default.createElement(T,{icon:"bm",size:"30",title:"PROVISIONER",value:a.storageProvisioner}),f.default.createElement(T,{icon:function(){return f.default.createElement("img",{src:"/assets/Accessmodes.svg",size:48})},size:"48",title:function(){return e.renderAccessTitle()},value:function(){return e.mapperAccessMode((0,g.toJS)(a.accessModes))}}),f.default.createElement(T,{icon:"database",size:"30",title:"capacity",value:a.capacity})))},e.renderAccessTitle=function(){return f.default.createElement("div",{className:b.default.mode_title},t("ACCESS_MODE_TCAP"),f.default.createElement(m.Tooltip,{content:O},f.default.createElement(m.Icon,{name:"question",size:16,className:b.default.toolTip})))},e.mapperAccessMode=function(e){var t=(0,y.map_accessModes)(e);return f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,t.join(",")))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.detailStore.detail,t=e.snapshotSourceName,a=e.namespace,r=e.backupStatus,n=e.cluster;"success"!==r?this.store.isLoading=!1:this.store.fetchDetail({cluster:n,name:t,namespace:a})}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return f.default.createElement(h.default,{title:t("PERSISTENT_VOLUME_CLAIM_PL")},!(0,_.default)(a)&&f.default.createElement(m.Loading,{spinning:r},this.renderItem()))}}]),r}(f.Component))||l)||l;function T(e){var a=e.icon,r=e.size,n=e.title,u=e.value;return f.default.createElement("div",{className:b.default.cardBox},(0,E.default)(a)?a():f.default.createElement(m.Icon,{name:a,size:r}),f.default.createElement("div",{className:b.default.text},f.default.createElement("span",{className:b.default.title},(0,E.default)(u)?u():u),f.default.createElement("span",{className:b.default.des},(0,E.default)(n)?n():t("".concat(n)))))}a.default=R},4233:function(e,t,a){e.exports={ItemBox:"_2uSZBY_NCBSaH1mR8ZAJks",leftBox:"_2lfBDbz1hyrwvl3_9Oa-_p",rightBox:"ekLoLak5iHUIpvda7Op5y",title:"_2Q7njnfLjSnnu9yCuTlv7-",toolTip:"_2iv495WKsKZb2fAgGMqsja",des:"E9Ek_EwGIYcRxWUS49EE",mode_title:"_1IfTTg_9l5Vki1jbivlryv",titleBox:"_1wqK_wYl5ekumAfZpWWCgO",IconLine:"cfhEvS3nviEXbm-xP_aDL",cardBox:"_21P9qlmn3G5V6vvY6qWG8b",text:"_2nHPGsxuXedotD2eoH4T0B"}},4234:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(14),d=a(239),f=a(1231);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("rootStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=(0,s.toJS)(this.store.detail).isFedManaged,t=this.props.match.params,a=t.workspace,r=t.cluster,n=t.namespace;return a?e?"/".concat(a,"/federatedprojects/").concat(n,"/").concat(this.module):"/".concat(a,"/whizard-telemetry/").concat(r,"/projects/").concat(n,"/").concat(this.module):"/whizard-telemetry/".concat(r,"/").concat(this.module)}}]),a}(f.Component))||n)||n;t.default=m},4235:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1230);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace,n=e.podName;return"".concat(t?"/".concat(t):"","/whizard-telemetry/").concat(a,"/projects/").concat(r,"/pods/").concat(n)}}]),a}(d.Component))||n)||n;t.default=p},4236:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1228);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),a}(d.Component))||n)||n;t.default=p},4237:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1229);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),a}(d.Component))||n)||n;t.default=p},4238:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1226);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),a}(d.Component))||n)||n;t.default=p},4239:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1225);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),a}(d.Component))||n)||n;t.default=p},4240:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1223);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}}]),a}(d.Component))||n)||n;t.default=p},4241:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1222),f=r(a(4242));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}},{key:"routes",get:function(){return(0,f.default)(this.props.match.path)}}]),a}(d.Component))||n)||n;t.default=m},4242:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(813)),l=r(a(962)),o=r(a(821)),c=r(a(1073)),i=r(a(1072)),s=r(a(4243));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:s.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:i.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:c.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:l.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4243:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1424);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("detailStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"enableScaleReplica",get:function(){return null}}]),a}(d.Component))||n)||n;t.default=p},4244:function(e,t,a){e.exports={deployment_codeResource:"_3JlM6mDDfEQURwZ09IpQJK"}},4245:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c=n(r(44)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=r(239),y=n(r(63)),g=r(186),_=r(52),E=r(791),b=n(r(318)),S=n(r(805)),O=n(r(4246));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.inject)("rootStore")(o=(0,v.observer)(o=(0,E.trigger)(o=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).store=new b.default(e.module),e.fetchData=(0,c.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.store.fetchDetail(a);case 3:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,h.toJS)(e.store.detail),r=e.props.match.params,n=r.cluster,u=r.namespace;if(!(0,y.default)(a))return[{name:t("CLUSTER"),value:(0,_.showNameAndAlias)(n,"cluster")},{name:t("PROJECT"),value:(0,_.showNameAndAlias)(u,"project")},{name:t("APP"),value:a.app},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(g.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STATEFULSET_PL"),url:this.listUrl}]};return m.default.createElement(S.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path),watch:!0}))}},{key:"module",get:function(){return"statefulsets"}},{key:"name",get:function(){return"STATEFULSET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(m.default.Component))||o)||o)||o;a.default=T},4246:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(813)),l=r(a(962)),o=r(a(821)),c=r(a(1072)),i=r(a(1073)),s=r(a(4247));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:s.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:c.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:i.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:l.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4247:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(4),a(22),a(23),a(57),a(17);var n=r(a(43));a(41);var u,l=r(a(44)),o=r(a(36)),c=r(a(37)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(0)),p=a(239),m=r(a(26)),h=a(1424),v=r(a(1224)),y=r(a(4248));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,i.default)(a,e);var t=g(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,u=new Array(r),c=0;c<r;c++)u[c]=arguments[c];return(e=t.call.apply(t,[this].concat(u))).resourceStore=new v.default,e.fetchData=(0,l.default)(n.default.mark((function t(){var a,r,u,l;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store.detail,r=a.cluster,u=a.namespace,l={name:e.serviceName,cluster:r,namespace:u},t.next=4,e.resourceStore.checkService(l);case 4:if(!e.resourceStore.isExistService){t.next=7;break}return t.next=7,e.resourceStore.fetchService(l);case 7:case"end":return t.stop()}}),t)}))),e}return(0,c.default)(a,[{key:"renderServices",value:function(){var e=this.resourceStore,t=e.service,a=e.isLoading;return t.name?f.default.createElement(y.default,{prefix:this.prefix,service:t,loading:a}):null}},{key:"renderContent",value:function(){return f.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderServices(),this.renderContainerPorts(),this.renderPods())}},{key:"serviceName",get:function(){return(0,m.default)(this.store.detail,"spec.serviceName","")}}]),a}(h.Component))||u)||u;t.default=_},4248:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var u=n(r(36)),l=n(r(37)),o=n(r(55)),c=n(r(56)),i=n(r(51)),s=n(r(0)),d=r(433),f=n(r(1)),p=n(r(3)),m=n(r(63)),h=n(r(26)),v=r(72),y=r(186),g=n(r(789)),_=n(r(4249));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,o.default)(r,e);var a=E(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,l.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.service,r=e.prefix;if((0,m.default)(a))return null;var n=a.name,u=a.type;return s.default.createElement("div",{className:_.default.item},s.default.createElement(y.Icon,{className:_.default.icon,name:v.ICON_TYPES.services,size:40}),s.default.createElement("div",{className:_.default.info},s.default.createElement("div",{className:_.default.base},s.default.createElement("strong",null,s.default.createElement(d.Link,{to:"".concat(r,"/services/").concat(n)},n)),s.default.createElement("p",null,t(u))),s.default.createElement("div",{className:_.default.ports},s.default.createElement("div",{className:_.default.record},s.default.createElement("label",null,t("PORT_PL"),":"),s.default.createElement("div",{className:_.default.text},this.ports.map((function(e,t){return s.default.createElement("p",{key:t},e)})))))))}},{key:"render",value:function(){var e=this.props.className,a=this.props.title||t("SERVICE_PL");return s.default.createElement(g.default,{className:(0,p.default)(_.default.main,e),title:a},this.renderContent())}},{key:"ports",get:function(){return(0,h.default)(this.props.service,"ports",[]).map((function(e){var t=e.targetPort?":".concat(e.targetPort):"";return"".concat(e.port).concat(t,"/").concat(e.protocol)}))}}]),r}(s.default.Component);a.default=b,b.propTypes={className:f.default.string,title:f.default.string,service:f.default.object,loading:f.default.bool},b.defaultProps={service:{},loading:!0}},4249:function(e,t,a){e.exports={item:"_2zEKUXFKgMYQqb2NC3VDE_",info:"uhouiwa9jpg-KQMJlCcYX",record:"_286JDHxpX1Tlnv58DG4D4s",text:"_1Q5qWijMS-ykclaUwdPSO5",base:"_1KJm1eslJBgnxnoYi2wojS"}},4250:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1217),f=r(a(4251));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,a=e.cluster,r=e.namespace;return t?"/".concat(t,"/whizard-telemetry/").concat(a,"/projects/").concat(r,"/").concat(this.module):"/whizard-telemetry/".concat(a,"/").concat(this.module)}},{key:"routes",get:function(){return(0,f.default)(this.props.match.path)}}]),a}(d.Component))||n)||n;t.default=m},4251:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(813)),l=r(a(962)),o=r(a(821)),c=r(a(1072)),i=r(a(1073)),s=r(a(1424));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:s.default,exact:!0},{path:"".concat(e,"/revision-control"),title:"REVISION_RECORDS",component:c.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:i.default,exact:!0},{path:"".concat(e,"/env"),title:"ENVIRONMENT_VARIABLE_PL",component:l.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4252:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(28),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c=n(r(44)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(63)),v=r(239),y=r(186),g=n(r(795)),_=r(52),E=r(791),b=n(r(1213)),S=n(r(805)),O=n(r(4253));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.inject)("rootStore")(o=(0,v.observer)(o=(0,E.trigger)(o=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).store=new b.default,e.fetchData=(0,c.default)(l.default.mark((function t(){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.props.match.params);case 2:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,u=r.creator,l=r.status,o=r.restoreSize,c=r.snapshotClassName,i=r.snapshotHandle,s=r.driver,d=r.deletionPolicy;return(0,h.default)(r)?null:[{name:t("STATUS"),value:m.default.createElement("div",null,m.default.createElement(g.default,{type:l,name:t(l.toUpperCase())}))},{name:t("CAPACITY"),value:"".concat((0,_.memoryFormat)(o,"Gi"),"Gi")},{name:t("VOLUME_SNAPSHOT_CLASS"),value:c},{name:t("SNAPSHOT_HANDLE"),value:i},{name:t("PROVISIONER"),value:s},{name:t("DELETION_POLICY"),value:d},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:""===u?"-":u}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_CONTENT_PL"),url:this.listUrl}]};return m.default.createElement(S.default,(0,u.default)({stores:e},a,{routes:(0,O.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT_CONTENT"}},{key:"module",get:function(){return"snapshot-content"}},{key:"authKey",get:function(){return"volumesnapshots"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/volume-snapshots/").concat(this.module)}}]),r}(m.default.Component))||o)||o)||o;a.default=T},4253:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(813)),l=r(a(821)),o=r(a(4254));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:o.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:l.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:u.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4254:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l,o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=u(r(0)),p=r(239),m=r(186),h=n(r(789)),v=n(r(914)),y=n(r(63)),g=n(r(4255));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("detailStore")(l=(0,p.observer)(l=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new v.default,e.renderItem=function(){var a=e.store.detail;return f.default.createElement("div",null,f.default.createElement("div",{className:g.default.ItemBox},f.default.createElement("div",{className:g.default.leftBox},f.default.createElement(m.Icon,{name:"snapshot",size:"40"}),f.default.createElement("div",{className:g.default.rightBox},f.default.createElement("span",{className:g.default.title},a.name),f.default.createElement("span",{className:g.default.des},t("NAME")))),f.default.createElement("div",{className:g.default.titleBox},f.default.createElement("span",{className:g.default.title},a.snapshotClassName),f.default.createElement("span",{className:g.default.des},t("VOLUME_SNAPSHOT_CLASS")))))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.detailStore.detail,t=e.volumeSnapshot,a=e.namespace,r=e.status,n=e.cluster;"ready"!==r?this.store.isLoading=!1:this.store.fetchDetail({cluster:n,name:t,namespace:a})}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return f.default.createElement(h.default,{title:t("VOLUME_SNAPSHOT_PL")},!(0,y.default)(a)&&f.default.createElement(m.Loading,{spinning:r},this.renderItem()))}}]),r}(f.Component))||l)||l;a.default=E},4255:function(e,t,a){e.exports={ItemBox:"qz7izzoeeZ3XrzHjGRlwh",leftBox:"_1P8wTWVpd_ZX393umQiltp",rightBox:"_3gyt8-Xi6lXNkeziT6wi5E",title:"_3U9jebGp-jtu8shwoAB1XJ",toolTip:"_9gk8DRzWAigiDbMVHNU1U",des:"_1U24e116jE5L-7Ub7JFB2T",mode_title:"_3ohdJ_D64yV86juMQDfcFp",titleBox:"_1hQfDd06B5MkTMVT1DOBh",IconLine:"_3ED0a219T5uPYsZHGbJ6Jj",cardBox:"_1ZZT_Vo-oDjM2o33a_ZMYL",text:"_2xeiJoDniaR1kAGVR-MgWl"}},4256:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(28),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c=n(r(44)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=n(r(63)),v=r(239),y=r(186),g=r(52),_=r(791),E=n(r(910)),b=n(r(805)),S=n(r(4257));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,v.inject)("rootStore")(o=(0,v.observer)(o=(0,_.trigger)(o=function(e){(0,d.default)(r,e);var a=O(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).store=new E.default,e.state={detail:{}},e.fetchData=(0,c.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.props.match.params);case 2:a=t.sent,e.setState({detail:a});case 4:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,u=r.driver,l=r.deletionPolicy;return(0,h.default)(r)?null:[{name:t("PROVISIONER"),value:u},{name:t("DELETION_POLICY"),value:l},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_CLASS_PL"),url:this.listUrl}]};return m.default.createElement(b.default,(0,u.default)({stores:e},a,{routes:(0,S.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT_CLASS"}},{key:"module",get:function(){return"volume-snapshot-classes"}},{key:"authKey",get:function(){return"volumesnapshotclasses"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/").concat(this.module)}}]),r}(m.default.Component))||o)||o)||o;a.default=R},4257:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4258));t.default=function(e){return[{path:"".concat(e,"/volume-snapshot"),title:"VOLUME_SNAPSHOT_PL",exact:!0,component:u.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/volume-snapshot"),exact:!0})]}},4258:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(239),m=r(52),h=n(r(914)),v=n(r(788)),y=n(r(789)),g=n(r(795)),_=n(r(873)),E=n(r(4259));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).handleFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.detail,a=t.cluster,r=t.name;e.keyword&&(e.name=e.keyword,delete e.keyword),n.volumeSnapshotStore.fetchList(S({volumeSnapshotClassName:r,cluster:a},e))},n.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return f.default.createElement(v.default,{icon:"snapshot",iconSize:40,title:(0,m.getDisplayName)(t),to:"/whizard-telemetry/".concat(t.cluster,"/projects/").concat(t.namespace,"/volume-snapshots/").concat(e),desc:t.snapshotClassName,noLink:!0})}},{title:t("STATUS"),dataIndex:"backupStatus",width:"20.5%",render:function(e,a){return f.default.createElement(g.default,{type:a.readyToUse?"ready":"failed",name:a.readyToUse?t("READY"):t("UNREADY")})}},{title:t("CAPACITY"),dataIndex:"restoreSize",width:"20.5%",render:function(e){return e}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"20.5%",render:function(e){return(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.volumeSnapshotStore=e.volumeSnapshotStore||new h.default,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this.volumeSnapshotStore.list,a=e.data,r=e.filters,n=e.isLoading,u={total:e.total,page:e.page,limit:e.limit};return f.default.createElement(y.default,{title:t("VOLUME_SNAPSHOT_PL"),loading:n,empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("VOLUME_SNAPSHOT")}),className:E.default.noPadding},f.default.createElement(_.default,{className:E.default.table,data:a,columns:this.getColumns(),searchType:"name",keyword:r.name,filters:r,placeholder:t("SEARCH_BY_NAME"),pagination:u,isLoading:n,onFetch:this.handleFetch}))}},{key:"store",get:function(){return this.props.detailStore}},{key:"storageClassName",get:function(){return this.store.detail.name}}]),r}(f.default.Component))||u)||u;a.default=R},4259:function(e,t,a){e.exports={noPadding:"_32GvzFp8CBTc2jzUDXyVx5"}},4260:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(1848);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getOperations=function(){return[]},e}return(0,l.default)(a,[{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/volumes/PV")}}]),a}(d.Component))||n)||n;t.default=p},4261:function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(29),a(4),a(22),a(23),a(24),a(17),a(38),a(62),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(29),a(42),a(4),a(22),a(23),a(57),a(24),a(17),a(38),a(62),a(32);var u=r(a(43));a(41);var l,o=r(a(44)),c=r(a(36)),i=r(a(37)),s=r(a(55)),d=r(a(56)),f=r(a(51)),p=n(a(0)),m=a(239),h=a(186),v=a(317),y=r(a(439));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,m.inject)("rootStore")(l=(0,m.observer)(l=function(e){(0,s.default)(r,e);var t,a=g(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).store=new y.default,t.init(e.match.params),t}return(0,i.default)(r,[{key:"init",value:(t=(0,o.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.props.rootStore.getRules(t)]);case 3:this.store.initializing=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(h.Loading,{className:"ks-page-loading"}):p.default.createElement(m.Provider,{projectStore:this.store},(0,v.renderRoutes)(this.props.route.routes))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),r}(p.Component))||l)||l;t.default=_},4262:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(86),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(86),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),y=r(186),g=r(52),_=r(444),E=r(791),b=n(r(856)),S=n(r(823)),O=n(r(795)),R=n(r(4263));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,m.inject)("rootStore")(u=(0,m.observer)(u=(0,E.trigger)(u=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new b.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.node;e.store.fetchDetail({name:r,cluster:a})},e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,v.default)(a)){var r=(0,_.getNodeStatus)(a),n=f.default.createElement(O.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),u=(0,h.default)(a,"status.addresses[0].address","-"),l=a.nodeInfo||{};return[{name:t("STATUS"),value:n},{name:t("IP_ADDRESS"),value:u},{name:t("ROLE"),value:-1===(0,_.getNodeRoles)(a.labels).indexOf("master")?t("WORKER"):t("CONTROL_PLANE")},{name:t("OS_VERSION"),value:l.osImage},{name:t("OS_TYPE"),value:t(l.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:l.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:l.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:l.kubeletVersion},{name:t("KUBE_PROXY_VERSION"),value:l.kubeProxyVersion},{name:t("ARCHITECTURE"),value:l.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,p.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_NODE_PL"),url:this.listUrl}]};return f.default.createElement(S.default,(0,l.default)({stores:e,routes:R.default},a))}},{key:"module",get:function(){return"nodes"}},{key:"name",get:function(){return"CLUSTER_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/nodes")}}]),r}(f.default.Component))||u)||u)||u;a.default=C},4263:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(821)),l=r(a(4264)),o=r(a(4270)),c=r(a(4271)),i=r(a(4272)),s="/whizard-telemetry/:cluster/nodes/:node",d=[{path:"".concat(s,"/status"),title:"RUNNING_STATUS",component:l.default,exact:!0},{path:"".concat(s,"/pods"),title:"Pods",component:o.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(s,"/monitors"),title:"MONITORING",component:c.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(s,"/events"),title:"EVENT_PL",component:i.default,exact:!0},(0,n.getIndexRoute)({path:s,to:"".concat(s,"/status"),exact:!0})];t.default=d},4264:function(e,a,r){"use strict";r(15);var n=r(20);r(84),r(18),r(16),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(14),p=r(239),m=n(r(26)),h=n(r(63)),v=n(r(1138)),y=r(52),g=n(r(789)),_=n(r(790)),E=n(r(1136)),b=n(r(4265)),S=n(r(4267)),O=n(r(4269));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=["node_cpu_utilisation","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_pod_utilisation"],C=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=R(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.monitoringStore=new v.default({cluster:t.cluster}),t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,a=e.role,r=void 0===a?[]:a;this.monitoringStore.fetchMetrics({resources:[t],metrics:(0,y.hideGPUByLicense)(T,this.cluster),step:"180s",fillZero:!r.includes("edge")})}},{key:"renderResourceStatus",value:function(){var e=(0,f.toJS)(this.monitoringStore.data),a=[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,m.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,m.default)(e,"node_memory_utilisation.data.result")},{key:"gpu",icon:"gpu",unit:"%",legend:["GPU_USAGE"],title:"GPU_USAGE",data:(0,m.default)(e,"node_gpu_utilization.data.result")},{key:"gpu_memory",icon:"computing",unit:"%",legend:["GPU_MEMORY_USAGE"],title:"GPU_MEMORY_USAGE",data:(0,m.default)(e,"node_gpu_memory_utilization.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,m.default)(e,"node_pod_utilisation.data.result")},{key:"storage",icon:"database",unit:"%",legend:["DISK_USAGE"],title:"DISK_USAGE",data:(0,m.default)(e,"node_disk_size_utilisation.data.result")}];return d.default.createElement(g.default,{className:O.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},d.default.createElement(E.default,{tabs:(0,y.hideGPUByLicense)(a,this.cluster)}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return d.default.createElement(g.default,{className:O.default.allocated,title:t("ALLOCATED_RESOURCES")},d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return d.default.createElement(g.default,{title:t("HEALTH_STATUS")},d.default.createElement("div",{className:O.default.conditions},e.map((function(e,t){return d.default.createElement(b.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,h.default)(e)?null:d.default.createElement(g.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&d.default.createElement("div",null,e.map((function(e,t){return d.default.createElement(S.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:O.default.main},this.renderResourceStatus(),this.renderAllocatedResources(),this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(d.default.Component))||u)||u;a.default=C},4265:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(0)),l=r(186),o=r(52),c=r(444),i=n(r(790)),s=n(r(4266)),d=function(e){var a=e.data;if(!c.NODE_CONDITION_ICONS[a.type])return null;var r=(0,c.getConditionsStatus)(a),n=u.default.createElement("div",null,u.default.createElement("div",{className:"tooltip-title"},a.reason),u.default.createElement("p",{className:"tooltip-desc"},a.message),u.default.createElement("p",{className:"tooltip-desc"},t("LAST_HEARTBEAT_VALUE",{value:(0,o.getLocalTime)(a.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return u.default.createElement("div",{className:s.default.card},u.default.createElement("div",{className:s.default.icon},u.default.createElement(l.Icon,{name:c.NODE_CONDITION_ICONS[a.type],size:40}),u.default.createElement(l.Tooltip,{content:n},"Running"===r?u.default.createElement(l.Icon,{className:s.default.check,name:"check",type:"light",size:12}):u.default.createElement(l.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),u.default.createElement(i.default,{title:t("NODE_".concat(a.type.toUpperCase())),description:t("NODE_".concat(a.type.toUpperCase(),"_DESC"))}))};a.default=d},4266:function(e,t,a){e.exports={card:"_2vZoyQ0udzDoRglZiKtT3W",icon:"_1kSFHn3riMUACqGoXY6bYS",check:"_2FD818TvEwjHrU8TDn2boR",substract:"_1n4s18LpVyHF_019XuvX8a"}},4267:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(0)),l=r(186),o=n(r(4268)),c=function(e){var a=e.data;return u.default.createElement("div",{className:o.default.card},u.default.createElement(l.Columns,null,u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("KEY"),":")," ",a.key)),u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("VALUE"),":")," ",a.value)),u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("POLICY"),":")," ",a.effect))))};a.default=c},4268:function(e,t,a){e.exports={card:"V9BhwI8rvh-_YFcNY-qiy"}},4269:function(e,t,a){e.exports={charts:"-HjhboGAKTwI7PWkSPjI",resources:"_1PKmWjzB07PDqpbTVkLspW",allocated:"bYYaAHe0uKX8yhmDpr1bS",conditions:"_1Jtx7mlz7DkmD70a8QBDRN"}},4270:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(239),f=r(a(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/whizard-telemetry/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},4271:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var u,l=n(r(315)),o=n(r(61)),c=n(r(30)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(239),v=n(r(26)),y=n(r(63)),g=r(794),_=n(r(1138)),E=r(822),b=r(798),S=n(r(862)),O=r(52);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C={cpu_utilisation:"node_cpu_utilisation",cpu_load1:"node_load1",cpu_load5:"node_load5",cpu_load15:"node_load15",gpu_utilization:"node_gpu_utilization",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_available:"node_gpu_memory_available",gpu_memory_usage:"node_gpu_memory_usage",gpu_temp:"node_gpu_temp",gpu_power_usage:"node_gpu_power_usage",memory_utilisation:"node_memory_utilisation",disk_utilisation:"node_disk_size_utilisation",disk_inode_utilisation:"node_disk_inode_utilisation",device_size_utilisation:"node_device_size_utilisation",disk_inode_usage:"node_disk_inode_usage",disk_inode_total:"node_disk_inode_total",disk_read_iops:"node_disk_read_iops",disk_write_iops:"node_disk_write_iops",disk_read_throughput:"node_disk_read_throughput",disk_write_throughput:"node_disk_write_throughput",net_transmitted:"node_net_bytes_transmitted",net_received:"node_net_bytes_received"},A=(0,h.inject)("detailStore")(u=(0,h.observer)(u=function(e){(0,d.default)(r,e);var a=T(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.store.detail,a=t.name,r=t.role,u=void 0===r?[]:r;n.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({resources:[a],metrics:Object.values((0,O.hideGPUByLicense)(C,n.cluster)),fillZero:!u.includes("edge")},e))},n.getMonitoringCfgs=function(){var e=(0,v.default)(n.metrics,"".concat(C.device_size_utilisation,".data.result"),[]),a=e&&e.map((function(e){return e.metric.device}));return[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["CPU_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,v.default)(n.metrics,"".concat(C.cpu_load1,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.cpu_load5,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.cpu_load15,".data.result[0]"),{})]},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["GPU_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.gpu_utilization,".data.result"))},{type:"utilisation",title:"GPU_MEMORY_USAGE",unit:"%",legend:["GPU_MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.gpu_memory_utilization,".data.result"))},{type:"usage",title:"GPU_TEMP",unit:"℃",legend:["GPU_TEMP"],data:(0,v.default)(n.metrics,"".concat(C.gpu_temp,".data.result"))},{type:"usage",title:"GPU_ENERGY_NO_PERCENT_TCAP",unit:"W",legend:["GPU_ENERGY_NO_PERCENT_TCAP"],data:(0,v.default)(n.metrics,"".concat(C.gpu_power_usage,".data.result"))},{type:"usage",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["NODE_GPU_MEMORY_USAGED","NODE_GPU_MEMORY_UNUSAGED"],data:[(0,v.default)(n.metrics,"".concat(C.gpu_memory_usage,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.gpu_memory_available,".data.result[0]"),{})]},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["INODE_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,g.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(C.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,g.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(C.disk_inode_total,".data.result[0].values"),[])]});return m.default.createElement(S.default,{usageData:e,totalData:t})}},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.memory_utilisation,".data.result"))},{type:"utilisation",title:"DISK_USAGE",unit:"%",legend:["DISK_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.disk_utilisation,".data.result"))},{type:"utilisation",title:"DISK_USAGE_DETAILS",unit:"%",legend:["AVERAGE_USAGE"].concat((0,o.default)(a)),data:[(0,v.default)(n.metrics,"".concat(C.disk_utilisation,".data.result[0]"))].concat((0,o.default)(e))},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["INODE_USAGE"],data:(0,v.default)(n.metrics,"".concat(C.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,g.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(C.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,g.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(C.disk_inode_total,".data.result[0].values"),[])]});return m.default.createElement(S.default,{usageData:e,totalData:t})}},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,v.default)(n.metrics,"".concat(C.disk_read_iops,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.disk_write_iops,".data.result[0]"),{})]},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,v.default)(n.metrics,"".concat(C.disk_read_throughput,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.disk_write_throughput,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_TRAFFIC",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,v.default)(n.metrics,"".concat(C.net_transmitted,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(C.net_received,".data.result[0]"),{})]}]},n.monitorStore=new _.default({cluster:n.cluster}),n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.store.detail.createTime,t=this.monitorStore,a=t.isLoading,r=t.isRefreshing,n=(0,O.hideGPUByLicense)(this.getMonitoringCfgs(),this.cluster);return m.default.createElement(E.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:r,isEmpty:(0,y.default)(this.metrics)},n.map((function(e){e.data=(0,y.default)(e.data)?[{values:(0,g.getZeroValues)()}]:e.data;var t=(0,g.getAreaChartOps)(e);return m.default.createElement(b.SimpleArea,(0,l.default)({key:t.title,width:"100%"},t))})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(m.default.Component))||u)||u;a.default=A},4272:function(e,t,a){"use strict";a(15);var r=a(20);a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(16),a(4),a(23),a(57),a(17);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(52),f=a(813);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,s.inject)("detailStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),a}(f.Component))||n)||n;t.default=m},4273:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(73),r(18),r(16),r(4),r(23),r(24),r(17),r(62),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62),r(64);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),y=r(186),g=r(52),_=r(444),E=r(791),b=n(r(856)),S=n(r(823)),O=n(r(795)),R=n(r(4274));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,m.inject)("rootStore")(u=(0,m.observer)(u=(0,E.trigger)(u=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new b.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.node;e.store.fetchDetail({name:r,cluster:a})},e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,v.default)(a)){var r=(0,_.getNodeStatus)(a),n=f.default.createElement(O.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),u=(0,h.default)(a,"status.addresses[0].address","-"),l=a.nodeInfo||{};return[{name:t("STATUS"),value:n},{name:t("IP_ADDRESS"),value:u},{name:t("ROLE"),value:(0,_.getNodeRoles)(a.labels).map((function(e){return t(e.replace(/[- ]/g,"_").toUpperCase())})).join("/")||"-"},{name:t("OS_VERSION"),value:l.osImage},{name:t("OS_TYPE"),value:t(l.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:l.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:l.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:l.kubeletVersion},{name:t("KUBE_PROXY_VERSION"),value:l.kubeProxyVersion},{name:t("ARCHITECTURE"),value:l.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,p.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("EDGE_NODE_PL"),url:this.listUrl}]};return f.default.createElement(S.default,(0,l.default)({stores:e,routes:R.default},a))}},{key:"module",get:function(){return"edgenodes"}},{key:"name",get:function(){return"EDGE_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/edgenodes")}}]),r}(f.default.Component))||u)||u)||u;a.default=C},4274:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(821)),l=r(a(4275)),o=r(a(4281)),c=r(a(4282)),i="/whizard-telemetry/:cluster/edgenodes/:node",s=[{path:"".concat(i,"/status"),title:"RUNNING_STATUS",component:l.default,exact:!0},{path:"".concat(i,"/pods"),title:"POD_PL",component:o.default,exact:!0},{path:"".concat(i,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(i,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,n.getIndexRoute)({path:i,to:"".concat(i,"/status"),exact:!0})];t.default=s},4275:function(e,a,r){"use strict";r(15);var n=r(20);r(84),r(18),r(16),r(4),r(23),r(24),r(17),r(85),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(85),r(62);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(14),p=r(239),m=n(r(26)),h=n(r(63)),v=n(r(1138)),y=r(52),g=n(r(789)),_=n(r(790)),E=n(r(1136)),b=n(r(4276)),S=n(r(4278)),O=n(r(4280));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=["node_cpu_utilisation","node_memory_utilisation","node_disk_size_utilisation","node_pod_utilisation"],C=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=R(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.monitoringStore=new v.default({cluster:t.cluster}),t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,a=e.role,r=void 0===a?[]:a;this.monitoringStore.fetchMetrics({resources:[t],metrics:T,step:"180s",fillZero:!r.includes("edge")})}},{key:"renderResourceStatus",value:function(){var e=(0,f.toJS)(this.monitoringStore.data);return d.default.createElement(g.default,{className:O.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},d.default.createElement(E.default,{tabs:[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,m.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,m.default)(e,"node_memory_utilisation.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,m.default)(e,"node_pod_utilisation.data.result")},{key:"storage",icon:"database",unit:"%",legend:["DISK_USAGE"],title:"DISK_USAGE",data:(0,m.default)(e,"node_disk_size_utilisation.data.result")}]}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return d.default.createElement(g.default,{className:O.default.allocated,title:t("ALLOCATED_RESOURCES")},d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return d.default.createElement(g.default,{title:t("HEALTH_STATUS")},d.default.createElement("div",{className:O.default.conditions},e.map((function(e,t){return d.default.createElement(b.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,h.default)(e)?null:d.default.createElement(g.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&d.default.createElement("div",null,e.map((function(e,t){return d.default.createElement(S.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:O.default.main},this.renderResourceStatus(),this.renderAllocatedResources(),this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(d.default.Component))||u)||u;a.default=C},4276:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(0)),l=r(186),o=r(52),c=r(444),i=n(r(790)),s=n(r(4277)),d=function(e){var a=e.data;if(!c.NODE_CONDITION_ICONS[a.type])return null;var r=(0,c.getConditionsStatus)(a),n=u.default.createElement("div",null,u.default.createElement("div",{className:"tooltip-title"},a.reason),u.default.createElement("p",{className:"tooltip-desc"},a.message),u.default.createElement("p",{className:"tooltip-desc"},t("LATEST_UPDATE_VALUE",{value:(0,o.getLocalTime)(a.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return u.default.createElement("div",{className:s.default.card},u.default.createElement("div",{className:s.default.icon},u.default.createElement(l.Icon,{name:c.NODE_CONDITION_ICONS[a.type],size:40}),u.default.createElement(l.Tooltip,{content:n},"Running"===r?u.default.createElement(l.Icon,{className:s.default.check,name:"check",type:"light",size:12}):u.default.createElement(l.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),u.default.createElement(i.default,{title:t("NODE_".concat(a.type.toUpperCase())),description:t("NODE_".concat(a.type.toUpperCase(),"_DESC"))}))};a.default=d},4277:function(e,t,a){e.exports={card:"_12AFLCIDuJhDXAzkHeMgWw",icon:"_4Q1SpXl5PkL3pXULG_2Nx",check:"_2bqTcpVDaxL1Yyj92dcmNs",substract:"_1m9UVE6rdd1XuCsxLuzWQO"}},4278:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(0)),l=r(186),o=n(r(4279)),c=function(e){var a=e.data;return u.default.createElement("div",{className:o.default.card},u.default.createElement(l.Columns,null,u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("KEY"),":"),a.key)),u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("VALUE"),":"),a.value)),u.default.createElement(l.Column,null,u.default.createElement("p",null,u.default.createElement("span",null,t("POLICY"),":")," ",t(a.effect.toUpperCase())))))};a.default=c},4279:function(e,t,a){e.exports={card:"_1uuBJdTmng55fjXbkg4kip"}},4280:function(e,t,a){e.exports={charts:"_24gQryXcevOz-1Iq87w4BF",resources:"_2U27-6QKwX2QkuZhMh3LuR",allocated:"_1MOe4TloANwORBbkxHjVmx",conditions:"_3qSes66wD49zXoV0jwYwfN"}},4281:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(239),f=r(a(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},4282:function(e,t,a){"use strict";a(15);var r=a(20);a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(16),a(4),a(23),a(57),a(17);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=a(239),d=a(52),f=a(813);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,s.inject)("detailStore")(n=(0,s.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),a}(f.Component))||n)||n;t.default=m},4283:function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(26)),v=n(r(63)),y=r(186),g=r(52),_=r(791),E=n(r(439)),b=n(r(885)),S=n(r(1096)),O=n(r(823)),R=n(r(795)),T=n(r(4284));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var A=(0,m.inject)("rootStore")(u=(0,m.observer)(u=(0,_.trigger)(u=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new E.default,e.quotaStore=new b.default,e.limitRangeStore=new S.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,v.default)(a))return[{name:t("STATUS"),value:f.default.createElement(R.default,{type:a.status,name:t(a.status)})},{name:t("CLUSTER"),value:(0,g.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("WORKSPACE"),value:(0,g.showNameAndAlias)(a.workspace,"workspace")},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator||"-"}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params)}},{key:"render",value:function(){var e={detailStore:this.store,quotaStore:this.quotaStore,limitRangeStore:this.limitRangeStore};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:[],attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_PL"),url:this.listUrl}]};return f.default.createElement(O.default,(0,l.default)({stores:e,routes:T.default},a))}},{key:"module",get:function(){return"projects"}},{key:"name",get:function(){return"PROJECT"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/projects")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}}]),r}(f.default.Component))||u)||u)||u;a.default=A},4284:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(821)),l=r(a(4285)),o=r(a(4287)),c=r(a(4288)),i=r(a(4290)),s="/whizard-telemetry/:cluster/projects/:namespace",d=[{path:"".concat(s,"/overview"),title:"OVERVIEW",component:l.default,exact:!0},{path:"".concat(s,"/pods"),title:"POD_PL",component:o.default,exact:!0},{path:"".concat(s,"/gateway"),title:"GATEWAY",component:c.default,exact:!0,clusterModule:"gateway"},{path:"".concat(s,"/quota"),title:"QUOTA_PL",component:i.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:u.default,exact:!0},(0,n.getIndexRoute)({path:s,to:"".concat(s,"/overview"),exact:!0})];t.default=d},4285:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(433),p=r(239),m=n(r(321)),h=r(186),v=n(r(789)),y=n(r(814)),g=n(r(1419)),_=n(r(438)),E=n(r(437)),b=n(r(4286));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).fedStore=new E.default({module:"namespaces"}),e.clusterStore=new _.default,e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){if(this.isFedManaged){var e=this.props.detailStore.detail.name;this.fedStore.fetchDetail({name:e,namespace:e}),this.clusterStore.fetchList({limit:-1})}}},{key:"renderPlacement",value:function(){var e=this.fedStore.detail,a=e.clusters,r=void 0===a?[]:a,n=e.name,u=(0,m.default)(this.clusterStore.list.data,"name");return d.default.createElement(v.default,{title:t("CLUSTER_PL")},d.default.createElement(h.Alert,{type:"warning",message:t("MULTI_CLUSTER_PROJECT_TIP"),hideIcon:!0}),d.default.createElement("div",{className:b.default.clusters},r.map((function(e){return u[e.name]?d.default.createElement(f.Link,{key:e.name,className:b.default.cluster,to:"/whizard-telemetry/".concat(e.name,"/projects/").concat(n)},d.default.createElement(y.default,{cluster:u[e.name],theme:"light",tagClass:"float-right"})):null}))))}},{key:"render",value:function(){var e=this.props.detailStore.detail;return d.default.createElement(d.default.Fragment,null,this.isFedManaged&&this.renderPlacement(),d.default.createElement(g.default,{match:this.props.match,workspace:e.workspace,isObservability:!0}))}},{key:"isFedManaged",get:function(){return this.props.detailStore.detail.isFedManaged}}]),r}(d.default.Component))||u)||u;a.default=O},4286:function(e,t,a){e.exports={clusters:"_1rPoxB2LQMDognaFaI36G0",cluster:"Xg-yoSe3Ca8a3lV07IsYT"}},4287:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(239),f=r(a(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},4288:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(187),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var u=n(r(315)),l=n(r(43));r(41);var o,c,i,s,d=n(r(44)),f=n(r(30)),p=n(r(65)),m=n(r(36)),h=n(r(37)),v=n(r(88)),y=n(r(55)),g=n(r(56)),_=n(r(51)),E=n(r(49)),b=(n(r(66)),n(r(0))),S=n(r(1134)),O=r(186),R=n(r(834)),T=r(14),C=r(239),A=n(r(63)),P=n(r(789)),k=n(r(4289));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var L=(0,C.inject)("detailStore","rootStore")(o=(0,C.observer)((c=function(e){(0,y.default)(r,e);var a=w(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new R.default,(0,p.default)(e,"gatewayList",i,(0,v.default)(e)),(0,p.default)(e,"isLoading",s,(0,v.default)(e)),e.getProjectGateway=function(){var t=D({},e.props.match.params);return e.store.getGatewayByProject(D(D({},t),{},{cluster:e.cluster}))},e.getInitGateway=(0,d.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getProjectGateway();case 3:a=t.sent,e.gatewayList=a,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.renderClusterGatewayTitle=function(){return b.default.createElement("div",{className:"title"},t("CLUSTER_GATEWAY"))},e.renderProjectTitle=function(){return b.default.createElement("div",{className:"title"},t("PROJECT_GATEWAY"))},e.renderWorkspaceTitle=function(){return b.default.createElement("div",{className:k.default.title},t("WORKSPACE_GATEWAY"))},e.renderGatewayCardTitle=function(t){return"workspace"===t?e.renderWorkspaceTitle():"project"===t?e.renderProjectTitle():e.renderClusterGatewayTitle()},e.renderOperations=function(a){var r=a.url,n=a.disabled;return b.default.createElement(O.Button,{disabled:n,onClick:function(){e.props.rootStore.routing.push(r)}},t("VIEW_DETAILS"))},e.renderGatewayCard=function(){return e.gatewayList.every((function(e){return(0,A.default)((0,T.toJS)(e))}))?e.renderEmpty():e.gatewayList.map((function(t,a,r){var n=0===a?"cluster":1===a?"workspace":"project";return b.default.createElement(S.default,(0,u.default)({key:a,type:n,detail:t,actions:e.enableActions,manageDisable:"project"!==n},e.props,{store:e.store,getData:e.getInitGateway,title:e.renderGatewayCardTitle(n),prefix:"cluster"===n?null:e.prefix,gatewayList:(0,T.toJS)(r)}))}))},e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderEmpty",value:function(){return b.default.createElement(P.default,{className:"margin-t12 margin-b12"},b.default.createElement("div",{className:k.default.empty},b.default.createElement("div",{className:k.default.icon},b.default.createElement(O.Icon,{name:"loadbalancer",size:40})),b.default.createElement("div",{className:k.default.text},b.default.createElement("div",null,t("GATEWAY_NOT_ENABLED")),b.default.createElement("p",null,t("ENT_ENABLE_GATEWAY_TIP")))))}},{key:"render",value:function(){return b.default.createElement("div",null,b.default.createElement(O.Loading,{spinning:this.isLoading},b.default.createElement("div",null,this.renderGatewayCard())))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"prefix",get:function(){var e=this.props.detailStore.detail.workspace;return"/".concat(e,"/clusters/").concat(this.cluster,"/projects/").concat(this.namespace,"/gateways")}},{key:"enableActions",get:function(){return globals.app.getActions(D(D({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}}]),r}(b.default.Component),i=(0,E.default)(c.prototype,"gatewayList",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,E.default)(c.prototype,"isLoading",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=c))||o)||o;a.default=L},4289:function(e,t,a){e.exports={empty:"XqfDjxM2xODEjMQnxnW3q",icon:"_2Rg6voUpta_vK4z8nDcUZU",text:"_3NnDN36kD3ScuNqfriSHKy"}},4290:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n,u=r(a(36)),l=r(a(37)),o=r(a(55)),c=r(a(56)),i=r(a(51)),s=r(a(0)),d=a(14),f=a(239),p=r(a(1233)),m=r(a(1234));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=(0,f.inject)("quotaStore","limitRangeStore")(n=(0,f.observer)(n=function(e){(0,o.default)(a,e);var t=h(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=(0,d.toJS)(this.props.limitRangeStore.list.data)[0],t=(0,d.toJS)(this.props.quotaStore.data);return s.default.createElement(s.default.Fragment,null,s.default.createElement(p.default,{detail:e}),s.default.createElement(m.default,{detail:t}))}}]),a}(s.default.Component))||n)||n;t.default=v},4291:function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(31),r(6),r(29),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(38),r(62),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(31),r(6),r(29),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(38),r(62),r(7),r(32);var u=n(r(315)),l=n(r(43)),o=n(r(96)),c=n(r(30));r(41);var i,s,d,f=n(r(44)),p=n(r(65)),m=n(r(36)),h=n(r(37)),v=n(r(88)),y=n(r(55)),g=n(r(56)),_=n(r(51)),E=n(r(49)),b=(n(r(66)),n(r(0))),S=n(r(26)),O=n(r(63)),R=r(239),T=r(186),C=r(52),A=r(14),P=n(r(866)),k=n(r(1212)),N=n(r(1851)),D=n(r(1070)),w=n(r(435)),L=n(r(823)),I=n(r(4292));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var U=(0,R.inject)("rootStore")(i=(0,R.observer)((s=function(e){(0,y.default)(r,e);var a=x(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).store=new P.default,e.accessorStore=new k.default,e.validateWebhookCFStore=new N.default,e.CrdStore=new D.default,e.state={shouldAddCrd:!1},(0,p.default)(e,"ksVersion",d,(0,v.default)(e)),e.fetchData=(0,f.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.accessorStore.getKsVersion(a);case 3:return e.ksVersion=t.sent,t.next=6,e.store.fetchDetail(a);case 6:(0,C.compareVersion)("".concat(e.ksVersion),"v3.3")<0?Promise.all([e.validateWebhookCFStore.fetchDetailWithoutWarning(j(j({},a),{},{name:"storageclass-accessor.storage.kubesphere.io"})),e.CrdStore.fetchDetailWithoutWarning(j(j({},a),{},{name:"accessors.storage.kubesphere.io"}))]).then((function(t){var a=(0,o.default)(t,2),r=a[0],n=a[1],u=r.urlNotSupport,l=n.urlNotSupport;u||l?e.setState({shouldAddCrd:!0}):(0,O.default)(r)||(0,O.default)(n)||e.checkHasAccessor()})):e.checkHasAccessor();case 7:case"end":return t.stop()}}),t)}))),e.checkHasAccessor=(0,f.default)(l.default.mark((function t(){var a,r,n,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,r=(0,S.default)(e.store.detail,"name"),t.next=4,e.accessorStore.fetchDetailWithoutWarning(j(j({},a),{},{name:"".concat(r,"-accessor")}));case 4:if(!(n=t.sent).urlNotSupport){t.next=9;break}e.setState({shouldAddCrd:!0}),t.next=15;break;case 9:if(!(0,O.default)(n)){t.next=15;break}return u=w.default.accessors(r),t.next=13,e.accessorStore.create(u,j({},a));case 13:return t.next=15,e.accessorStore.fetchDetail({cluster:a.cluster,name:"".concat(a.name,"-accessor")});case 15:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a;return(0,O.default)(r)?null:[{name:t("PROVISIONER"),value:r.provisioner},{name:t("DEFAULT_STORAGE_CLASS"),value:r.default?t("YES"):"-"},{name:t("ALLOW_VOLUME_EXPANSION"),value:r.allowVolumeExpansion?t("TRUE"):t("FALSE")},{name:t("RECLAIM_POLICY"),value:r.reclaimPolicy},{name:t("ALLOW_VOLUME_SNAPSHOT"),value:r.supportSnapshot?t("TRUE"):t("FALSE")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchList({limit:-1}),this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return b.default.createElement(T.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,C.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STORAGE_CLASS_PL"),url:this.listUrl}]};return b.default.createElement(L.default,(0,u.default)({stores:e,routes:I.default},a))}},{key:"defaultStorageClass",get:function(){return(0,A.toJS)(this.store.list).data.find((function(e){return e.default}))||{}}},{key:"name",get:function(){return"STORAGE_CLASS"}},{key:"module",get:function(){return"storageclasses"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/storageclasses")}}]),r}(b.default.Component),d=(0,E.default)(s.prototype,"ksVersion",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=s))||i)||i;a.default=U},4292:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4293)),l="/whizard-telemetry/:cluster/storageclasses/:name",o=[{name:"volumes",path:"".concat(l,"/volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:u.default},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/volumes"),exact:!0}),(0,n.getIndexRoute)({path:"*",to:"/404",exact:!0})];t.default=o},4293:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var u,l=n(r(30)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=r(186),p=n(r(3)),m=n(r(788)),h=n(r(801)),v=n(r(789)),y=n(r(795)),g=n(r(873)),_=n(r(1131)),E=n(r(26)),b=r(239),S=n(r(0)),O=n(r(831)),R=r(52),T=n(r(4294));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,b.inject)("detailStore")(u=(0,b.observer)(u=function(e){(0,i.default)(r,e);var a=P(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).handleFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.detail,a=t.cluster,r=t.name;e.keyword&&(e.name=e.keyword,delete e.keyword),n.volumeStore.fetchList(A({storageClassName:r,cluster:a},e))},n.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return S.default.createElement(m.default,{icon:"storage",title:(0,R.getDisplayName)(t),noLink:!0})}},{title:t("STATUS"),dataIndex:"phase",width:"13%",render:function(e){return S.default.createElement(y.default,{type:e,name:t("VOLUME_STATUS_".concat(e.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",width:"13%",render:function(e){return e||"-"}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",width:"13%",render:function(e,t){return S.default.createElement(_.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("PROJECT"),dataIndex:"namespace",key:"namespace",width:"13%",customizable:!0,render:function(e){return(0,R.showNameAndAlias)(e,"project")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"21%",render:function(e){return(0,R.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.renderResizeItem=function(e){var t=e.src,a=e.title,r=e.des,n=e.iconName,u=e.key;return S.default.createElement("div",{key:u,className:(0,p.default)(T.default.item,T.default.item_bg)},n?S.default.createElement(f.Icon,{name:n,size:40}):S.default.createElement("img",{src:t,className:T.default.icon}),S.default.createElement("div",null,S.default.createElement("span",{className:T.default.title},a),S.default.createElement("span",{className:T.default.des},r)))},n.renderResize=function(){var e=n.props.detailStore.detail.annotations,a=JSON.parse((0,E.default)(e,"resize.kubesphere.io/enabled","false")),r=JSON.parse((0,E.default)(e,"restart.kubesphere.io/enabled","false")),u=(0,E.default)(e,"resize.kubesphere.io/storage-limit","10000Gi"),l=(0,E.default)(e,"resize.kubesphere.io/threshold","10%"),o=(0,E.default)(e,"resize.kubesphere.io/increase","10%"),c=(0,E.default)(e,"restart.kubesphere.io/max-time","300"),i={title:t("VALUE_TIMEOUT",{value:c}),iconName:"history-duotone",des:t("RESTART_WORKLOAD_AUTOMATICALLY")},s=[{iconName:"storage",title:u,des:t("MAXIMUM_SIZE_SCAP")},{src:"/assets/chart.svg",title:l,des:t("THRESHOLD")},{iconName:"stretch",title:o,des:t("INCREMENT")}];return r&&s.push(i),a&&S.default.createElement(v.default,null,S.default.createElement("div",{className:(0,p.default)(T.default.item,T.default.top)},S.default.createElement("img",{src:"/assets/storageclass_autoresizer.svg",className:T.default.icon}),S.default.createElement("div",null,S.default.createElement("span",{className:T.default.title},t("AUTO_EXPANSION")),S.default.createElement("span",{className:T.default.des},t("AUTO_EXPANSION_DESC")))),S.default.createElement("div",{className:T.default.bottom},s.map((function(e,t){return n.renderResizeItem(A(A({},e),{},{key:t}))}))))},n.volumeStore=e.volumeStore||new O.default,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this.volumeStore.list,a=e.data,r=e.filters,n=e.isLoading,u={total:e.total,page:e.page,limit:e.limit};return S.default.createElement(S.default.Fragment,null,this.renderResize(),S.default.createElement(h.default,{title:t("PERSISTENT_VOLUME_CLAIM_PL"),loading:n,empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("PERSISTENT_VOLUME_CLAIM")})},S.default.createElement(g.default,{className:T.default.table,data:a,columns:this.getColumns(),searchType:"name",keyword:r.name,filters:r,placeholder:t("SEARCH_BY_NAME"),pagination:u,isLoading:n,onFetch:this.handleFetch})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"storageClassName",get:function(){return this.store.detail.name}}]),r}(S.default.Component))||u)||u;a.default=k},4294:function(e,t,a){e.exports={table:"Dsz63huoEIbL53qWEDuoE",top:"_1StebFGFAh6ECnu9rUCL7G",item:"_-0ltGlivgzITT_bl32rnD",icon:"_3xJHPO0yJS0LKwouDHdAQv",title:"_25xNsUEaqv9Jr4gY8zUyHK",des:"_3pHBqft7L-rt-nUoShz6Ww",bottom:"StnMpbCakrgf3NNWIEvV8",item_bg:"_1tepIxXqtmhkhELh9wHDX9"}},4295:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(63)),v=r(186),y=r(52),g=r(791),_=n(r(1070)),E=n(r(823)),b=n(r(4296));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.inject)("rootStore")(u=(0,m.observer)(u=(0,g.trigger)(u=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new _.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:e.props.match.params.cluster},{name:t("SCOPE_TCAP"),value:a.scope},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator||"-"}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:this.store.detail.kind,desc:this.store.detail.name,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return f.default.createElement(E.default,(0,l.default)({stores:e,routes:b.default},a))}},{key:"module",get:function(){return"customresourcedefinitions"}},{key:"name",get:function(){return"CRD"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/customresources")}}]),r}(f.default.Component))||u)||u)||u;a.default=O},4296:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4297)),l="/clusters/:cluster/customresources/:name",o=[{path:"".concat(l,"/resources"),title:"RESOURCE_STATUS",component:u.default,exact:!0},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/resources"),exact:!0})];t.default=o},4297:function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(84),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(84),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var u,l=n(r(61)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(788)),y=n(r(796)),g=r(52),_=r(791),E=n(r(1173)),b=n(r(4298));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=(0,h.inject)("rootStore","detailStore")(u=(0,h.observer)(u=(0,_.trigger)(u=function(e){(0,s.default)(r,e);var a=R(r);function r(e){var t;(0,c.default)(this,r),(t=a.call(this,e)).getData=function(e){t.store.fetchList(O(O({},e),{},{cluster:t.props.match.params.cluster}))};var n=t.props.detailStore.detail,u=n.group,l=n.latestVersion,o=n.kind,i=n.module;return t.store=new E.default({kind:o,module:i,apiVersion:"apis/".concat(u,"/").concat(l)}),t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.name,n=e.page,u=e.total,l=e.limit,o=e.isLoading,c={page:n,total:u,limit:l},i={name:r};return p.default.createElement("div",null,p.default.createElement("div",{className:b.default.title},t("CUSTOM_RESOURCE_PL")),p.default.createElement(y.default,{data:(0,m.toJS)(a),columns:this.columns,isLoading:o,onFetch:this.getData,itemActions:this.itemActions,enabledActions:this.enabledActions,pagination:c,filters:i,showEmpty:!1,searchType:"name",hideCustom:!0}))}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"customresourcedefinitions",cluster:this.props.match.params.cluster})}},{key:"itemActions",get:function(){var e=this;return[this.enabledActions.includes("edit")?{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,success:e.getData})}}:{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("resource.delete",{type:"CUSTOM_RESOURCE",detail:t,success:e.getData})}}]}},{key:"columns",get:function(){var e=this.props.detailStore.detail.scope;return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return p.default.createElement(v.default,{title:(0,g.getDisplayName)(t),desc:t.description,noLink:!0})}}].concat((0,l.default)("Namespaced"===e?[{title:t("PROJECT_DEVOPS_PROJECT"),dataIndex:"namespace"}]:[]),[{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}])}}]),r}(p.default.Component))||u)||u)||u;a.default=T},4298:function(e,t,a){e.exports={title:"_1sfnDll_Ra9Cf9sGMp0ld"}},4299:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(27),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(28),r(42),r(16),r(27),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(791),m=n(r(26)),h=r(239),v=n(r(1861)),y=n(r(823)),g=r(186),_=n(r(1862)),E=n(r(4300)),b=n(r(4303));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,h.inject)("rootStore")(u=(0,h.observer)(u=(0,p.trigger)(u=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new v.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",type:"control",text:t("EDIT"),action:"edit",onClick:function(){return e.trigger("log.collection.edit",{success:e.fetchData})}},{key:"changeStatus",text:t("CHANGE_STATUS"),icon:"pin",action:"edit",onClick:function(){return e.trigger("log.collection.active.switch",{data:{enabled:Number(e.store.detail.enabled)},success:e.fetchData})}},{key:"delete",text:t("DELETE"),icon:"trash",action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}},{key:"editYaml",text:t("EDIT_YAML"),icon:"pen",action:"edit",onClick:function(){e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getAttrs",value:function(){return[{name:t("STATUS"),value:(0,m.default)(this.store,"detail.enabled")?t("ENABLED"):t("DISABLED")}]}},{key:"render",value:function(){var e={detailStore:this.store},a=this.store.detail,r=(0,m.default)(a,"type",""),n=(0,m.default)(_.default,"".concat(r,".ICON")),u=(0,m.default)(_.default,"".concat(r,".title"),t("LOADING")),o=n?f.default.createElement(n,{className:b.default.icon,width:32,height:32}):"Loading";if(this.store.isLoading)return f.default.createElement(g.Loading,{className:"ks-page-loading"});var c={module:this.module,name:u,icon:o,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("LOG_RECEIVER_PL"),url:this.listUrl}]};return f.default.createElement(y.default,(0,l.default)({stores:e,routes:E.default},c))}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/whizard-telemetry/".concat(e,"/log-collections/").concat(this.component)}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(f.default.Component))||u)||u)||u;a.default=O},4300:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4301)),l="/whizard-telemetry/:cluster/log-collections/:component/:name",o=[{path:"".concat(l,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/resource-status"),exact:!0})];t.default=o},4301:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var u,l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(239),p=n(r(26)),m=n(r(789)),h=n(r(1218)),v=n(r(4302));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,f.inject)("detailStore")(u=(0,f.observer)(u=function(e){(0,c.default)(r,e);var a=y(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,p.default)(this.props.detailStore,"detail",{}),a=e.address,r=e.config,n=void 0===r?{}:r,u=e.type;return d.default.createElement(m.default,null,d.default.createElement(h.default,{className:v.default.attributes},"kafka"===u&&d.default.createElement(h.default.Item,{className:v.default.item,name:t("TOPIC"),value:n.topics}),d.default.createElement(h.default.Item,{className:v.default.item,name:t("ADDRESS"),value:a}),"es"===u&&d.default.createElement(h.default.Item,{className:v.default.item,name:t("INDEX_PREFIX"),value:n.logstashPrefix})))}}]),r}(d.default.Component))||u)||u;a.default=g},4302:function(e,t,a){e.exports={attributes:"_29CfKLnq8cYwLy3zHSzbkF",item:"_1fVxSzlTy66OLq7sNdNnR"}},4303:function(e,t,a){e.exports={icon:"_2mg4hJnxmXNt7UY-JgDfpN"}},4304:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(86),r(16),r(4),r(23),r(24),r(17),r(62),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(86),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var u,l=n(r(315)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=r(14),m=r(239),h=n(r(63)),v=n(r(26)),y=r(186),g=r(52),_=r(791),E=n(r(834)),b=n(r(823)),S=n(r(4305));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,m.inject)("rootStore")(u=(0,m.observer)(u=(0,_.trigger)(u=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new E.default,e.state={isCluster:!1},e.fetchData=function(){var t=e.props.match.params.component;e.store.getGateway({cluster:e.cluster,namespace:e.namespace,type:t})},e.judgeIsCluster=function(){var t=(0,v.default)(e.props.location,"state.isCluster",!1);e.setState({isCluster:t})},e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,p.toJS)(e.detail)||{};if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:e.cluster},{name:t("CREATION_TIME"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,g.getLocalTime)(a.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.judgeIsCluster()}},{key:"componentWillUnmount",value:function(){localStorage.removeItem("federated-cluster")}},{key:"render",value:function(){var e={detailStore:this.store},a=this.props.match.params.workspace;if(this.store.gateway.isLoading&&!this.store.gateway.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,name:this.detail.name,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:a?t("PROJECT_GATEWAY"):t("CLUSTER_GATEWAY"),url:this.listUrl}]};return f.default.createElement(b.default,(0,l.default)({stores:e,routes:(0,S.default)(this.props.match.path)},r))}},{key:"module",get:function(){return"gateways"}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"listUrl",get:function(){var e=this.props.match.params.workspace;return"".concat(this.props.match.url.split("gateways")[0],e?"gateways":"gateways/cluster")}}]),r}(f.default.Component))||u)||u)||u;a.default=R},4305:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4306)),l=r(a(4307)),o=r(a(4314)),c=r(a(4322)),i=r(a(4323));t.default=function(e){return[{path:"".concat(e,"/monitors"),title:"MONITORING",component:l.default,exact:!0},{path:"".concat(e,"/gateway-configs"),title:"CONFIGURATION_OPTIONS",component:c.default,exact:!0},{path:"".concat(e,"/logs"),title:"GATEWAY_LOGS",component:i.default,exact:!0},{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/monitors"),exact:!0})]}},4306:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(18),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(98),r(4),r(23),r(57),r(17);var l,o=n(r(96)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=u(r(0)),m=n(r(789)),h=n(r(63)),v=r(239),y=n(r(1864));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,v.inject)("detailStore")(l=(0,v.observer)(l=function(e){(0,s.default)(r,e);var a=g(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){var e=this.detail.annotations;return p.default.createElement(m.default,{title:t("ANNOTATION_PL")},p.default.createElement("div",{className:y.default.container},p.default.createElement("ul",null,(0,h.default)(e)?p.default.createElement("li",null,t("NO_DATA")):Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return p.default.createElement("li",{key:a},p.default.createElement("span",{className:y.default.key},a),p.default.createElement("span",null,r))})))))}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}}]),r}(p.Component))||l)||l;a.default=_},4307:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),y=n(r(26)),g=n(r(63)),_=r(794),E=n(r(1075)),b=r(186),S=r(822),O=r(798),R=n(r(4308));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={ingress_request_count:"ingress_request_count",ingress_request_5xx_count:"ingress_request_5xx_count",ingress_request_4xx_count:"ingress_request_4xx_count",ingress_active_connections:"ingress_active_connections",ingress_success_rate:"ingress_success_rate",ingress_request_duration_average:"ingress_request_duration_average",ingress_request_duration_50percentage:"ingress_request_duration_50percentage",ingress_request_duration_95percentage:"ingress_request_duration_95percentage",ingress_request_duration_99percentage:"ingress_request_duration_99percentage",ingress_request_volume:"ingress_request_volume",ingress_request_volume_by_ingress:"ingress_request_volume_by_ingress",ingress_request_network_sent:"ingress_request_network_sent",ingress_request_network_received:"ingress_request_network_received"},k=(0,v.inject)("detailStore")(c=(0,v.observer)(c=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).monitorStore=new E.default({cluster:e.cluster}),e.state={options:[],podsName:""},e.fetchData=function(){var t=(0,i.default)(l.default.mark((function t(a){var r,n;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.detail.name,t.next=3,e.getGatewayPods();case 3:n=t.sent,e.monitorStore.fetchMetrics(C({resources:[],metrics:Object.values(P),job:"".concat(r,"-metrics"),namespace:e.namespace,pod:n,fillZero:!0,component:"ingress"},a)),e.setState({timeParams:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePodName=function(t){var a=e.detail.name,r=e.state.timeParams;e.monitorStore.fetchMetrics(C({resources:[],metrics:Object.values(P),job:"".concat(a,"-metrics"),namespace:e.namespace,pod:t,component:"ingress"},r)),e.setState({podsName:t})},e.getGatewayPods=(0,i.default)(l.default.mark((function t(){var a,r,n;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.getGatewayPods(C(C({},e.props.match.params),{},{cluster:e.cluster}));case 2:return a=t.sent,"",n=(0,g.default)(a)?[]:a.map((function(e){return{label:e.name,value:e.name}})),r=(0,g.default)(n)?"":n[0].value,e.setState({options:n,podsName:r}),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)}))),e.getMonitoringCfgs=function(){var a=(0,y.default)(e.metrics,"".concat(P.ingress_request_volume_by_ingress,".data.result"),[]);return[{title:"REQUEST_COUNT",unit:"",legend:a.map((function(e){return(0,y.default)(e,"metric.ingress","")})),data:a},{title:"CONNECTION_COUNT",unit:"",legend:["CONNECTION_COUNT"],data:(0,y.default)(e.metrics,"".concat(P.ingress_active_connections,".data.result"),{})},{title:"REQUEST_LATENCY_MS",legend:[t("P_FIFTY_LATENCY"),t("P_NINETY_FIVE_LATENCY"),t("P_NINETY_NINE_LATENCY"),t("AVERAGE_LATENCY")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_50percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_95percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_99percentage,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_duration_average,".data.result[0]"),{})],dot:4},{title:"FAILED_REQUEST_COUNT",unit:"",legend:[t("FOUR_XX_REQUEST_COUNT"),t("FIVE_XX_REQUEST_COUNT")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_4xx_count,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_5xx_count,".data.result[0]"),{})]},{title:"NETWORK_TRAFFIC",unit:"",unitType:"traffic",legend:[t("INBOUND_TRAFFIC"),t("INBOUND_TRAFFIC")],data:[(0,y.default)(e.metrics,"".concat(P.ingress_request_network_received,".data.result[0]"),{}),(0,y.default)(e.metrics,"".concat(P.ingress_request_network_sent,".data.result[0]"),{})]}]},e}return(0,d.default)(r,[{key:"render",value:function(){var e=(0,y.default)(this.store.detail,"createTime"),t=this.monitorStore,a=t.isLoading,r=t.isRefreshing,n=this.state,l=n.podsName,o=n.options,c=this.getMonitoringCfgs();return h.default.createElement("div",null,h.default.createElement(R.default,this.props),h.default.createElement(S.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:r,title:h.default.createElement(b.Select,{value:l,options:o,onChange:this.handlePodName}),isEmpty:(0,g.default)(this.metrics)},c.map((function(e){e.data=(0,g.default)(e.data)?[{values:(0,_.getZeroValues)()}]:e.data;var t=(0,_.getAreaChartOps)(e);return h.default.createElement(O.SimpleArea,(0,u.default)({key:t.title,width:"100%"},t))}))))}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(h.default.Component))||c)||c;a.default=k},4308:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(86),r(18),r(16),r(27),r(190),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(86),r(18),r(28),r(42),r(16),r(27),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var u=n(r(43)),l=n(r(30));r(41);var o=n(r(44)),c=n(r(36)),i=n(r(37)),s=n(r(88)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(186),v=r(798),y=n(r(3)),g=r(1853),_=n(r(1075)),E=n(r(63)),b=n(r(26)),S=r(794),O=n(r(4309)),R=n(r(4313));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P={ingress_request_count:"ingress_request_count",ingress_request_5xx_count:"ingress_request_5xx_count",ingress_request_4xx_count:"ingress_request_4xx_count",ingress_active_connections:"ingress_active_connections",ingress_success_rate:"ingress_success_rate",ingress_request_duration_average:"ingress_request_duration_average",ingress_request_duration_50percentage:"ingress_request_duration_50percentage",ingress_request_duration_95percentage:"ingress_request_duration_95percentage",ingress_request_duration_99percentage:"ingress_request_duration_99percentage"},k=function(e){(0,d.default)(r,e);var a=A(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,i=new Array(n),d=0;d<n;d++)i[d]=arguments[d];return(e=a.call.apply(a,[this].concat(i))).state={enableAutoRefresh:!0,autoRefresh:!1,duration:"10m",metrics:{},errorType:"ingress_request_4xx_count"},e.monitorStore=new _.default({cluster:e.cluster}),e.handleChange=function(t){e.setState({duration:t},(function(){e.fetchData()}))},e.handleRequestError=function(t){e.setState({errorType:t})},e.fetchData=function(){var t=(0,o.default)(u.default.mark((function t(a){var r,n,l,o,c,i;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.duration,e.setState({isLoading:!0}),n=e.detail||{},l=n.cluster,o=n.name,t.next=5,e.monitorStore.fetchGatewayMetrics(C({duration:r,cluster:l,workspace:e.props.match.params.workspace,metrics:Object.values(P),job:"".concat(o,"-metrics"),component:"ingress"},a));case 5:c=t.sent,i=e.handleMetricsData(c),e.setState({metrics:C({},i),duration:r,isLoading:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMetricsData=function(e){if(!(0,E.default)(e)){var t={};return Object.values(P).map((function(t){return e[t]})).forEach((function(e){var a=(0,b.default)(e,"data.result[0].value[1]",0),r="string"==typeof a&&a.indexOf(".")>-1?Number(a).toFixed(4):isNaN(Number(a))?0:a;t[e.metric_name]=r})),t}},e.handleAutoRefresh=function(){e.setState({autoRefresh:!e.state.autoRefresh},(function(){e.state.autoRefresh?(0,S.startAutoRefresh)((0,s.default)(e)):(0,S.stopAutoRefresh)((0,s.default)(e))}))},e.handleRefresh=function(){e.fetchData()},e.renderAutoRefresh=function(){var t=e.state,a=t.enableAutoRefresh,r=t.autoRefresh;return a?m.default.createElement(h.Button,{className:R.default.button,type:"control",icon:r?"pause":"start",iconType:"light",onClick:e.handleAutoRefresh}):null},e.getMetricsData=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,b.default)(e.state.metrics,"".concat(t),a)},e.renderCustomLegend=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(e.className,e.payload),r=e.activeSeries,n=void 0===r?[]:r,u=e.showAll,o=void 0!==u&&u,c=a||[];if(c.length<2&&!o)return m.default.createElement("div",{className:R.default.legend});var i=function(t){var a=e.onClick;a&&a(t,(0,b.default)(t.target,"dataset.key"))};return m.default.createElement("div",{className:R.default.legend,onClick:i},c.map((function(e){var a=!n.includes(e.value),r=(0,b.default)(e,"payload.stroke");return m.default.createElement("div",{key:e.dataKey,"data-key":e.dataKey,className:(0,y.default)(R.default.item,(0,l.default)({},R.default.inactive,a))},m.default.createElement("i",{style:{backgroundColor:r}}),t(e.value))})))},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params)}},{key:"render",value:function(){var e=this.state,a=e.duration,r=e.errorType;return m.default.createElement("div",{className:R.default.overview},m.default.createElement("div",{className:R.default.header},m.default.createElement("p",{className:R.default.title},t("OVERVIEW")),m.default.createElement("div",{className:R.default.operations},m.default.createElement(O.default,{duration:a,onChange:this.handleChange}),this.renderAutoRefresh(),m.default.createElement(h.Button,{className:R.default.button,type:"control",icon:"refresh",iconType:"light",onClick:this.handleRefresh}))),m.default.createElement("div",{className:R.default.body},m.default.createElement("div",{className:R.default.left},m.default.createElement("div",{className:R.default.item},m.default.createElement(h.Icon,{name:"gateway",size:56}),m.default.createElement("div",null,m.default.createElement("p",null,t("TOTAL_REQUESTS")),m.default.createElement("span",null,this.getMetricsData("ingress_request_count")))),m.default.createElement("div",{className:R.default.item},m.default.createElement(h.Icon,{name:"error",size:56}),m.default.createElement("div",null,m.default.createElement(h.Select,{width:30,value:r,options:[{label:t("FOUR_XX_REQUEST_COUNT"),value:"ingress_request_4xx_count"},{label:t("FIVE_XX_REQUEST_COUNT"),value:"ingress_request_5xx_count"}],onChange:this.handleRequestError}),m.default.createElement("span",null,this.getMetricsData(r))))),m.default.createElement("div",{className:R.default.middle},m.default.createElement(v.SimpleCircle,{theme:"light",width:200,height:200,title:"",value:"".concat((100*this.getMetricsData("ingress_success_rate")).toFixed(2)),total:100,unit:"%",innerRadius:"80%",legend:["SUCCESSFUL_REQUESTS","TOTAL"],showCenter:!0,showRate:!1,areaColors:["#55BC8A","#E3E9EF"],renderCustomCenter:function(e){var a=e.value;return m.default.createElement("div",{className:R.default.simpleContent},m.default.createElement("p",null,t("SUCCESSFUL_REQUESTS")),m.default.createElement("span",null,a,"%"))}})),m.default.createElement("div",{className:R.default.right},m.default.createElement("div",{className:R.default.item},m.default.createElement("span",{className:R.default.customIcon},m.default.createElement(g.ReactComponent,null)),m.default.createElement("div",null,m.default.createElement("p",null,t("AVERAGE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_average")," ms")))),m.default.createElement("div",{className:R.default.itemSmall},m.default.createElement("span",null,t("P_FIFTY_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_50percentage")," ms"))),m.default.createElement("div",{className:R.default.itemSmall},m.default.createElement("span",null,t("P_NINETY_FIVE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_95percentage")," ms"))),m.default.createElement("div",{className:R.default.itemSmall},m.default.createElement("span",null,t("P_NINETY_NINE_LATENCY")),m.default.createElement("span",null,"".concat(this.getMetricsData("ingress_request_duration_99percentage")," ms"))))))}},{key:"detail",get:function(){return this.props.detailStore.gateway.data}}]),r}(m.default.Component);a.default=k},4309:function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var u=n(r(30)),l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=n(r(1)),p=n(r(3)),m=r(186),h=n(r(4310)),v=r(1865),y=n(r(4312));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=g(r);function r(e){var t;(0,l.default)(this,r),(t=a.call(this,e)).handleToggle=function(){t.setState({visible:!t.state.visible},(function(){t.props.onToggle(t.state.visible)}))},t.hideSelector=function(){t.setState({visible:!1},(function(){t.props.onToggle(!1)}))},t.handleTimeChange=function(e){var a=e.duration;t.setState({visible:!1,duration:a},(function(){t.props.onChange(a)}))};var n=e.duration;return t.state={visible:!1,preDuration:"",duration:n||"10m"},t}return(0,o.default)(r,[{key:"renderButtonText",value:function(){var e=this.state.duration,a=(0,v.getTimeLabel)(e);return t("LAST_TIME",{value:a})}},{key:"renderContent",value:function(){var e=this.state.duration;return d.default.createElement("div",{className:y.default.content},d.default.createElement(h.default,{duration:e,onChange:this.handleTimeChange}))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.dark,r=e.arrowIcon;return d.default.createElement("div",{className:(0,p.default)(y.default.selector,t,(0,u.default)({},y.default.active,this.state.visible))},d.default.createElement("div",{className:(0,p.default)(y.default.mask,(0,u.default)({},y.default.active,this.state.visible)),onClick:this.hideSelector}),d.default.createElement(m.Button,{className:y.default.button,onClick:this.handleToggle},d.default.createElement(m.Icon,{type:a?"dark":"light",name:"timed-task",size:20}),d.default.createElement("p",null,this.renderButtonText()),d.default.createElement(m.Icon,{className:y.default.arrow,type:a?"dark":"light",name:r||"caret-down"})),d.default.createElement("div",{className:y.default.dropdown},this.renderContent()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.duration!==t.preDuration){var a=e.duration;return{prevPropStep:a,duration:a}}return null}}]),r}(d.default.PureComponent);a.default=_,_.propTypes={duration:f.default.string,onChange:f.default.func,onToggle:f.default.func},_.defaultProps={duration:"10m",onChange:function(){},onToggle:function(){}}},4310:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var u=n(r(30)),l=n(r(36)),o=n(r(37)),c=n(r(55)),i=n(r(56)),s=n(r(51)),d=n(r(0)),f=n(r(1)),p=n(r(3)),m=r(1865),h=n(r(4311));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=["1m","5m","10m","30m","1h","3h","6h","12h"],g=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(t){var a=t.target.dataset.value;a&&e.props.onChange({duration:a})},e}return(0,o.default)(r,[{key:"render",value:function(){var e=(0,m.getTimeOptions)(y),a=this.props.duration;return d.default.createElement("div",{className:h.default.default},d.default.createElement("div",{className:h.default.title},t("SELECT_TIME_RANGE")),d.default.createElement("ul",{onClick:this.handleClick},e.map((function(e){var r=e.label,n=e.value;return d.default.createElement("li",{key:r,"data-value":n,className:(0,p.default)((0,u.default)({},h.default.cur,n===a))},t("LAST_TIME",{value:r}))}))))}}]),r}(d.default.Component);a.default=g,g.propTypes={duration:f.default.string,onChange:f.default.func},g.defaultProps={duration:"10m",onChange:function(){}}},4311:function(e,t,a){e.exports={title:"_3XsHnAiUjhzBmBzjA7eqWa",default:"_2J-Doj7uhiSg0DuoDk11Tb",cur:"_2fC1qSXQrSjPKxpR9V7SMv",custom:"A8D5kt7iZljDVHSdMRHld",selectBox:"_1Q2Ji1yalU-WhT4TH2E2kp",actions:"_1zkPTvEGXCzl03wyKlJBeq"}},4312:function(e,t,a){e.exports={selector:"_1VO-QNzvp0J8KQz5ONeXJJ",active:"_2a1_KKFuXJC5lTbsmdGNZG",arrow:"_1YXh3BG3F7oNuUBuFTnbQw",dropdown:"_1tTqbZfvDZqnFiDeDCbYjQ",button:"_24CEa3RhFJB3x8Z4LhILRw",mask:"_2UpyXjddeEUq8USycRTTdT",content:"nyMPN9jZr3G-E1PTwGATg"}},4313:function(e,t,a){e.exports={overview:"_1NE_uVZfcNvpWJhc94uAh",header:"_1KwAN4tTrQbcPL31-d50QX",operations:"_1cZXd5GT9vKqJHp4fcZyYH",button:"_1_LdM71qndRYleeQLoNFgv",body:"_5zF4Wo9RMRVfTzeizfe7P",left:"_39Y9dQlCz_EqhAAQtmUf2B",item:"_3gs_VEYWsOxXxwnbKOsy8U",middle:"_1r5hbDyZd-UuFdM5SxyQrW",right:"_3VRxe4f83x_fP1IrgcBrRB",customIcon:"TjP8ynWr5IhhjHJVSZgp1",itemSmall:"_1tMoTfakiwg2yPJ_CgJkYv",simpleContent:"_2l8GUjQITdQd6AJ71FRo7"}},4314:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(45),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var u=n(r(30)),l=n(r(43));r(41);var o=n(r(44)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(14),h=r(239),v=n(r(63)),y=n(r(240)),g=n(r(1071)),_=n(r(944)),E=n(r(1)),b=n(r(834)),S=n(r(4315)),O=n(r(4319)),R=n(r(4321));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=A(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).gateway=new b.default,n.fetchData=(0,o.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.getGatewayPods(n.props.match.params);case 2:t=e.sent,n.setState({pods:t.length});case 4:case"end":return e.stop()}}),e)}))),n.checkGatewayLatest=(0,o.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.namespace,e.next=3,n.gateway.getGateway({cluster:n.cluster,namespace:t});case 3:case"end":return e.stop()}}),e)}))),n.handleScale=function(){var e=(0,o.default)(l.default.mark((function e(a){var r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.match.params.namespace,e.next=3,n.checkGatewayLatest();case 3:if(n.gateway.detail.resourceVersion!==n.store.detail.resourceVersion){e.next=8;break}return e.next=6,n.store.scale({cluster:n.cluster,namespace:r},a);case 6:e.next=9;break;case 8:y.default.info({content:t("GATEWAY_UPDATING_TIP")});case 9:n.getGatewayDetail(),n.fetchData();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={pods:0},n}return(0,i.default)(r,[{key:"getChildContext",value:function(){var e=this.props.match.params,t=e.namespace,a=e.workspace;return{gatewayName:this.detail.name,gatewayNs:a&&!t?"workspace-".concat(a):t,cluster:this.cluster}}},{key:"getGatewayDetail",value:function(){var e=this.props.match.params.namespace;this.props.detailStore.getGateway({cluster:this.cluster,namespace:e})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderPlacement",value:function(){var e=this.props.match.params,t=e.name,a=e.namespace;return this.store.detail.isFedManaged?p.default.createElement(_.default,{module:this.store.module,name:t,namespace:a}):null}},{key:"renderReplicaInfo",value:function(){var e=(0,m.toJS)(this.detail);return p.default.createElement(S.default,{module:this.module,detail:e,onScale:this.handleScale})}},{key:"renderContainerPorts",value:function(){var e=this.detail.ports,t=this.store.gateway.isLoading;if((0,v.default)(e))return null;var a=e.map((function(e){return e.containerPort=e.nodePort,e}));return p.default.createElement(g.default,{ports:a,loading:t})}},{key:"renderPods",value:function(){var e=C(C({},this.props.match.params),{},{cluster:this.cluster});return p.default.createElement(O.default,{prefix:this.prefix,detail:this.detail,store:this.store,params:e})}},{key:"renderContent",value:function(){return p.default.createElement("div",null,this.renderPlacement(),this.renderReplicaInfo(),this.renderContainerPorts(),this.renderPods())}},{key:"render",value:function(){return p.default.createElement("div",{className:R.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return this.store.gateway.data||{}}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.location.pathname.indexOf("federatedprojects")>-1?localStorage.getItem("federated-cluster"):e}},{key:"prefix",get:function(){return"/whizard-telemetry/".concat(this.cluster)}},{key:"enabledActions",get:function(){return globals.app.getActions(C(C({module:this.module},this.props.match.params),{},{project:this.props.match.params.namespace}))}},{key:"volumesTitle",get:function(){return t("STORAGE_DEVICES")}}]),r}(p.default.Component);P.childContextTypes={gatewayName:E.default.string,gatewayNs:E.default.string,cluster:E.default.string};var k=(0,h.inject)("detailStore")((0,h.observer)(P));a.default=k;var N=P;a.Component=N},4315:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(160),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),u=r(a(37)),l=r(a(55)),o=r(a(56)),c=r(a(51)),i=r(a(0)),s=r(a(1)),d=r(a(3)),f=r(a(26)),p=r(a(789)),m=r(a(4316)),h=r(a(4318));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var y=function(e){(0,l.default)(a,e);var t=v(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,u=new Array(r),l=0;l<r;l++)u[l]=arguments[l];return(e=t.call.apply(t,[this].concat(u))).handleReplicaChange=function(t){t>=0&&e.props.onScale(t)},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.className;return i.default.createElement(p.default,{className:(0,d.default)(h.default.replica,e)},i.default.createElement("div",{className:h.default.replicaCount},i.default.createElement(m.default,this.replicaStatus)))}},{key:"replicaStatus",get:function(){var e=this.props,t=e.module,a=e.detail,r=e.enableScale,n={};switch(t){default:case"deployments":n={current:a.availablePodNums||0,desire:a.podNums||0};break;case"statefulsets":n={current:(0,f.default)(a,"status.currentReplicas",a.readyPodNums),desire:a.podNums||0};break;case"daemonsets":n={current:(0,f.default)(a,"status.numberReady",0),desire:(0,f.default)(a,"status.desiredNumberScheduled",0)};break;case"gateways":n={current:Array.isArray(a.pods)?a.pods.length:1,desire:(0,f.default)(a,"replicas",0)}}return n.onScale=r?this.handleReplicaChange:null,n}}]),a}(i.default.Component);t.default=y,y.propTypes={module:s.default.string,detail:s.default.object,enableScale:s.default.bool,onScale:s.default.func},y.defaultProps={module:"deployments",enableScale:!0,onScale:function(){}}},4316:function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(27),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(36)),l=n(r(37)),o=n(r(55)),c=n(r(56)),i=n(r(51));r(45),r(42),r(16),r(27),r(4),r(23),r(57),r(17);var s=n(r(0)),d=n(r(1)),f=n(r(3)),p=r(798),m=n(r(4317));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){return Number(e||0)},y=function(e){(0,o.default)(r,e);var a=h(r);function r(e){var t;(0,u.default)(this,r),t=a.call(this,e);var n=v(e.desire);return t.state={prevPropDesire:n,desire:n,seconds:5},t}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,a=e.theme,r=e.className,n=e.name,u=e.current,l=this.state.desire,o=t(n),c=t("REPLICAS_CURRENT"),i=t("REPLICAS_DESIRED");return s.default.createElement("div",{className:(0,f.default)(m.default.card,r,m.default[a])},s.default.createElement("img",{className:m.default.cardImg,src:"/assets/banner-icon-1.svg"}),s.default.createElement("div",{className:m.default.chart},s.default.createElement(p.SimpleCircle,{theme:a,title:o,legend:[c,i],value:u,total:l})),s.default.createElement("div",{className:m.default.status},s.default.createElement("div",{className:m.default.title},o),s.default.createElement("div",{className:m.default.detail},s.default.createElement("p",null,s.default.createElement("label",null,i,":")," ",l),s.default.createElement("p",null,s.default.createElement("label",null,c,":")," ",u))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.desire!==t.prevPropDesire){var a=v(e.desire);return{prevPropDesire:a,desire:a}}return null}}]),r}(s.default.Component);a.default=y,y.propTypes={theme:d.default.string,className:d.default.string,name:d.default.string,current:d.default.number,desire:d.default.number,onScale:d.default.func},y.defaultProps={theme:"dark",name:"REPLICA_PL",current:0,desire:0,onScale:null}},4317:function(e,t,a){e.exports={card:"_2tqToS7KOKa64SH3Nolb-A",cardImg:"_39cBVvUnYggEAKy4WFYtxD",dark:"_3JXwjgxuPd7iiRWjTqC6Sc",status:"_12ELZ5kvVLBsUm_A5APgjb",title:"gB0VgBzXnjEYnUUmJs0p5",detail:"_1mP4izOhBrYEo6q20Fl_Ol",scale:"_3qAEaNujKHXdxSwhzUzNfQ",control:"_3Z1mXUXuBydINztjdMXJot",add:"_1-rjjfWKXygy2ozDguvRyb",substract:"_3X2mYKvDRFhceXrdccArGe"}},4318:function(e,t,a){e.exports={replica:"_1FG_TRIMjcDVMaQznsqGbP",replicaCount:"Gmok3l7GaS8cTwON3fczC"}},4319:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(188),r(7);var u=n(r(315)),l=n(r(96)),o=n(r(43)),c=n(r(30)),i=n(r(58));r(41);var s,d,f,p=n(r(44)),m=n(r(36)),h=n(r(37)),v=n(r(55)),y=n(r(56)),g=n(r(51)),_=n(r(0)),E=r(239),b=n(r(1)),S=n(r(3)),O=n(r(63)),R=n(r(26)),T=r(186),C=r(794),A=n(r(1075)),P=n(r(789)),k=n(r(4320)),N=n(r(1866));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var I={cpu:"ingress_request_cpu_usage",memory:"ingress_request_memory_bytes"},M=(0,E.observer)((f=d=function(e){(0,v.default)(r,e);var a=L(r);function r(e){var n;(0,m.default)(this,r),(n=a.call(this,e)).fetchData=(0,p.default)(o.default.mark((function e(){var t,a,r,u,l,c=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},a=t.noMetrics,r=t.silent,u=(0,i.default)(t,["noMetrics","silent"]),!(0,O.default)(n.state.params)){e.next=4;break}return n.store.podList.isLoading=!1,e.abrupt("return");case 4:return l=n.props.limit,r&&(n.store.podList.silent=!0),e.next=8,n.store.getGatewayPodsList(w(w({limit:l},n.state.params),u));case 8:n.store.podList.silent=!1,a||n.fetchMetrics();case 10:case"end":return e.stop()}}),e)}))),n.fetchMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.podList,a=t.data,r=t.isLoading;if((0,O.default)(a)||r||(0,O.default)(n.state.params))return!1;n.monitorStore.fetchMetrics(w(w({step:"1m",times:30,resources:a.map((function(e){return e.name})),metrics:Object.values(I)},n.state.params),e))},n.getPagination=function(){var e=n.store.podList;return{page:e.page,limit:e.limit,total:e.total}},n.getPodMetrics=function(){var e=n.monitorStore.data,t={};return Object.entries(I).forEach((function(a){var r=(0,l.default)(a,2),n=r[0],u=r[1],o=(0,R.default)(e,"".concat(u,".data.result"))||[];t[n]=o[0]})),t},n.handleSearch=function(e){n.searchValue=e,n.fetchData({search:e})},n.handleRefresh=function(){var e=n.searchValue?{search:n.searchValue}:{};n.fetchData(e)},n.handlePage=function(e){n.fetchData({page:e}).then((function(){n.props.onPage(e)}))},n.handleExpand=function(e){n.setState((function(t){return{expandItem:t.expandItem===e?"":e}}))},n.getClustersOptions=function(){return n.props.clusters.map((function(e){return{label:e,value:e}}))},n.handleClusterChange=function(e){n.setState({selectCluster:e,params:n.getParams(e)},(function(){n.fetchData()}))},n.renderHeader=function(){return _.default.createElement("div",{className:N.default.header},_.default.createElement(T.InputSearch,{className:N.default.search,name:"search",placeholder:t("SEARCH"),onSearch:n.handleSearch}),_.default.createElement("div",{className:N.default.actions},_.default.createElement(T.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.getPagination(),a=e.total;return _.default.createElement(T.Level,{className:N.default.footer},_.default.createElement(T.LevelLeft,null,t("TOTAL_ITEMS",{num:a})),_.default.createElement(T.LevelRight,null,_.default.createElement(T.Pagination,(0,u.default)({},e,{onChange:n.handlePage}))))},n.store=e.store,n.monitorStore=new A.default;var c=e.detail.cluster||e.params;return n.state={expandItem:"",params:c},n}return(0,h.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,r=a.detail,n=a.params;if(r!==e.detail){var u=r.cluster||n;this.setState({expandItem:"",selectCluster:u||"",params:this.getParams(u)},(function(){t.fetchData()}))}}},{key:"componentDidMount",value:function(){this.fetchData(),(0,C.startAutoRefresh)(this,{method:"fetchMetrics",leading:!1})}},{key:"componentWillUnmount",value:function(){(0,C.stopAutoRefresh)(this),this.disposer&&this.disposer()}},{key:"renderContent",value:function(){var e=this,a=this.props.prefix,r=this.store.podList,n=r.data,u=r.isLoading,l=r.silent,o=_.default.createElement("div",{className:N.default.body},(0,O.default)(n)?_.default.createElement("div",{className:N.default.empty},t("NO_RESOURCE_FOUND")):n.map((function(t){return _.default.createElement(k.default,{key:t.uid,prefix:a,detail:t,metrics:e.getPodMetrics(t),loading:e.monitorStore.isLoading,refreshing:e.monitorStore.isRefreshing,isExpand:e.state.expandItem===t.uid,onExpand:e.handleExpand})})));return l?o:_.default.createElement(T.Loading,{spinning:u},o)}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.title,n=e.hideHeader,u=e.hideFooter,l=e.noWrapper,o=this.store.podList.data;return l?this.renderContent():_.default.createElement(P.default,{className:(0,S.default)(N.default.main,a),title:t(r),empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("POD")}),isEmpty:(0,O.default)(o)},!n&&this.renderHeader(),this.renderContent(),!u&&this.renderFooter())}}]),r}(_.default.Component),d.propTypes={prefix:b.default.string,title:b.default.string,detail:b.default.object,details:b.default.object,hideHeader:b.default.bool,hideFooter:b.default.bool,onPage:b.default.func,limit:b.default.number},d.defaultProps={title:"Pods",detail:{},details:{},hideHeader:!1,hideFooter:!1,onPage:function(){}},s=f))||s;a.default=M},4320:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(86),r(18),r(87),r(16),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(86),r(18),r(87),r(42),r(16),r(4),r(23),r(57),r(17),r(7);var u=n(r(61)),l=n(r(30)),o=n(r(315)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(433),h=n(r(1)),v=n(r(3)),y=n(r(63)),g=n(r(26)),_=r(52),E=r(794),b=r(186),S=n(r(839)),O=r(798),R=n(r(1220)),T=n(r(804)),C=n(r(1866));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=function(e){(0,s.default)(r,e);var a=A(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getContainerStatus=function(){var t=(0,g.default)(e.props.detail,"status.containerStatuses")||[],a=0;return t.forEach((function(e){e.ready&&(a+=1)})),{readyCount:a,total:t.length}},e.getUpdateStatus=function(){if(!e.isRunning){var a=e.status,r=a.name,n=a.type;return p.default.createElement(T.default,{status:n,reason:r,data:e.props.detail,type:"pod"})}return p.default.createElement("p",null,t("CREATED_AGO",{diff:(0,_.getLocalTime)(e.props.detail.createTime).fromNow()}))},e.getLink=function(){var t=e.props.detail;return"".concat(e.props.prefix,"/projects/").concat(t.namespace,"/pods/").concat(t.name)},e.getMonitoringCfgs=function(e){return[{type:"cpu",title:"CPU",unitType:"cpu",legend:["USED"],data:[e.cpu],bgColor:"transparent"},{type:"memory",title:"MEMORY",unitType:"memory",legend:["USED"],data:[e.memory],bgColor:"transparent"}]},e.getNodeContent=function(){var a=e.props.detail,r=a.cluster,n=a.node,u=a.nodeIp,l=globals.app.hasPermission({cluster:r,module:"nodes",action:"view"});if(!n)return"-";var o=t("NODE_IP",{node:n,ip:u});return l?p.default.createElement(m.Link,{to:"/clusters/".concat(r,"/nodes/").concat(n)},o):o},e.handleExpandExtra=function(){var t=e.props,a=t.detail;(0,t.onExpand)(a.uid)},e.handleLinkClick=function(){localStorage.setItem("pod-detail-referrer",location.pathname)},e.renderPodIPContent=function(e){return p.default.createElement("div",{className:C.default.ipTip},p.default.createElement("div",null,t("POD_IP_ADDRESS")),p.default.createElement("ul",null,e.map((function(e){return p.default.createElement("li",{key:e},p.default.createElement(b.Icon,{name:"ip",size:20,type:"light"}),p.default.createElement("span",null,e))}))))},e}return(0,i.default)(r,[{key:"renderStatusTip",value:function(){var e=this.props.detail.name,a=this.status,r=a.type,n=a.name,u=this.getContainerStatus(),l=u.readyCount,o=u.total;return p.default.createElement(b.Tooltip,{content:p.default.createElement("div",{className:C.default.statusTip},p.default.createElement("strong",null,e),p.default.createElement("p",null,t("READY"),": ",l,"/",o),p.default.createElement("p",null,t("STATUS"),": ",t(n)))},p.default.createElement(S.default,{className:C.default.indicator,type:r,flicker:!0}))}},{key:"renderMonitorings",value:function(){var e=this.props,a=e.metrics,r=void 0===a?{}:a,n=e.isExpand;if(e.loading)return p.default.createElement("div",{className:C.default.monitors},t("LOADING"));if((0,y.default)(r.cpu)&&(0,y.default)(r.memory))return p.default.createElement("div",{className:C.default.monitors},t("NO_MONITORING_DATA"));var u=this.getMonitoringCfgs(r);return p.default.createElement("div",{className:C.default.monitors},p.default.createElement("div",{className:C.default.charts},u.map((function(e){var t=(0,E.getAreaChartOps)(e);return p.default.createElement(O.TinyArea,(0,o.default)({key:e.type,width:"50%",height:40},t,{darkMode:n}))}))))}},{key:"renderContent",value:function(){var e=this.props,a=e.detail,r=a.name,n=a.podIp,u=e.isExpand;return p.default.createElement("div",{className:C.default.content},p.default.createElement("div",{className:C.default.text},p.default.createElement("div",null,p.default.createElement("span",{onClick:this.handleLinkClick},r)),this.getUpdateStatus()),!(-1!==location.pathname.indexOf("/nodes"))&&p.default.createElement("div",{className:C.default.text},p.default.createElement("div",null,this.getNodeContent()),p.default.createElement("p",null,t("NODE"))),p.default.createElement("div",{className:C.default.text},p.default.createElement("div",null,p.default.createElement("span",null,n||"-"),!(0,y.default)(this.networkIPs)&&this.networkIPs.length>1&&p.default.createElement(b.Tooltip,{content:this.renderPodIPContent(this.networkIPs)},p.default.createElement("div",{className:C.default.podip},this.networkIPs.length))),p.default.createElement("p",null,t("POD_IP_ADDRESS_SCAP"))),this.renderMonitorings(),p.default.createElement("div",{className:C.default.arrow},p.default.createElement(b.Icon,{name:"chevron-down",type:u?"light":"",size:20})))}},{key:"renderExtraContent",value:function(){var e=this,a=this.props.prefix,r=this.props.detail,n=r.cluster,u=r.containers,l=void 0===u?[]:u,o=r.initContainers,c=void 0===o?[]:o,i=r.name;if((0,y.default)(l))return null;var s=globals.app.hasPermission({module:"clusters",action:"view"})&&a?this.getLink():"";return p.default.createElement("div",{className:C.default.itemExtra},p.default.createElement("div",{className:"margin-b8"},p.default.createElement("strong",null,t("CONTAINER_PL"))),p.default.createElement("div",{className:C.default.containers},l.map((function(t){return p.default.createElement(R.default,{key:t.name,prefix:s,podName:i,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating,hideterminal:!0})})),c.map((function(t){return p.default.createElement(R.default,{key:t.name,prefix:s,podName:i,detail:t,cluster:n,onContainerClick:e.handleLinkClick,isCreating:e.isCreating,isInit:!0,hideterminal:!0})}))))}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.isExpand;return p.default.createElement("div",{className:(0,v.default)(C.default.item,t,(0,l.default)({},C.default.expanded,a))},p.default.createElement("div",{className:C.default.itemMain,onClick:this.handleExpandExtra},p.default.createElement("div",{className:C.default.icon},p.default.createElement(b.Icon,{name:"pod",size:40,type:a?"light":"dark"}),this.renderStatusTip()),this.renderContent()),this.renderExtraContent())}},{key:"status",get:function(){var e=this.props.detail.podStatus,t=e.status;return{type:e.type.toLowerCase(),name:t}}},{key:"isCreating",get:function(){return"warning"===this.status.type&&"ContainerCreating"===this.status.name}},{key:"isRunning",get:function(){return"running"===this.status.type||"completed"===this.status.type}},{key:"networkIPs",get:function(){return this.props.detail.networksStatus.reduce((function(e,t){return[].concat((0,u.default)(e),(0,u.default)(t.ips))}),[])}}]),r}(p.default.PureComponent);a.default=P,P.propTypes={className:h.default.string,prefix:h.default.string,detail:h.default.object,metrics:h.default.object,loading:h.default.bool,isExpand:h.default.bool,onExpand:h.default.func},P.defaultProps={prefix:"",detail:{},isExpand:!1,onExpand:function(){}}},4321:function(e,t,a){e.exports={deployment_codeResource:"DWNzvnnPXAJT9fQSbDyjf"}},4322:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(98),r(4),r(23),r(57),r(17);var u,l=n(r(96)),o=n(r(36)),c=n(r(37)),i=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(0)),p=n(r(789)),m=r(239),h=n(r(63)),v=n(r(26)),y=n(r(1864));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,m.inject)("detailStore")(u=(0,m.observer)(u=function(e){(0,i.default)(r,e);var a=g(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.detail.config;return f.default.createElement(p.default,{title:t("CONFIGURATION_OPTIONS")},f.default.createElement("div",{className:y.default.container},f.default.createElement("ul",null,(0,h.default)(e)?f.default.createElement("li",null,t("NO_DATA")):Object.entries(this.detail.config).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return f.default.createElement("li",{key:a},f.default.createElement("span",{className:y.default.key},a),f.default.createElement("span",null,r))})))))}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"detail",get:function(){return(0,v.default)(this.store.gateway,"data",{})}}]),r}(f.default.Component))||u)||u;a.default=_},4323:function(e,a,r){"use strict";r(84),r(85);var n=r(20);r(12),r(5),r(11),r(6),r(73),r(18),r(87),r(97),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(62),r(188),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(87),r(245),r(97),r(442),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(62),r(188),r(7),r(110);var u=n(r(61)),l=n(r(43)),o=n(r(30));r(41);var c,i,s,d,f,p,m,h,v,y=n(r(44)),g=n(r(96)),_=n(r(65)),E=n(r(36)),b=n(r(37)),S=n(r(88)),O=n(r(55)),R=n(r(56)),T=n(r(51)),C=n(r(49)),A=(n(r(66)),n(r(0))),P=r(239),k=n(r(833)),N=n(r(985)),D=r(14),w=r(186),L=n(r(3)),I=r(2014),M=n(r(243)),j=n(r(1127)),x=n(r(1392)),U=r(1397),V=n(r(1124)),G=n(r(4324));function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,T.default)(e);if(t){var n=(0,T.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,R.default)(this,a)}}var B=new V.default,z=600,W=(0,P.inject)("detailStore")(c=(0,P.observer)((i=function(e){(0,O.default)(i,e);var a,r,n,c=H(i);function i(){var e;(0,E.default)(this,i);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),(0,_.default)(e,"searchInputState",s,(0,S.default)(e)),e.tableRef=A.default.createRef(),e.state={polling:!1},(0,_.default)(e,"pollingFrequency",d,(0,S.default)(e)),(0,_.default)(e,"logs",f,(0,S.default)(e)),(0,_.default)(e,"tableCols",p,(0,S.default)(e)),e.markMemoizee=(0,x.default)(U.markAll,{normalizer:function(e){var t=(0,g.default)(e,3),a=t[0],r=t[1],n=void 0===r?[]:r,u=t[2],l=void 0===u?function(){}:u;return"".concat(a,"+").concat(n.toString(),")+").concat(l.name)},maxAge:3e3}),e.renderHightLightMatchTd=function(t){var a=t.resKey,r=t.searchKey,n=t.handler,u=void 0===n?U.mark:n;return function(t){var n=t[a]||"",l=e.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,I.includes)(r,t)})).map((function(e){return e.value})),o=e.markMemoizee(n,l,u);return A.default.createElement("span",null,o.map((function(e,t){return(0,I.isString)(e)?e:A.default.createElement("span",{key:t,className:G.default.hightLightMatch},e.hightLighted)})))}},e.renderHightLightMatchLogTd=function(t){var a=t.resKey,r=t.searchKey,n=t.handler,u=void 0===n?U.mark:n;return function(t){var n=B.ansi_to_html(t[a]||""),l=e.searchInputState.query.filter((function(e){var t=e.key;return e.value&&(0,I.includes)(r,t)})).map((function(e){return e.value})),o=e.markMemoizee(n,l,u).map((function(e){return(0,I.isString)(e)?e:'<span class="'.concat(G.default.hightLightMatch,'">').concat(e.hightLighted,"</span>")}));return A.default.createElement("span",{dangerouslySetInnerHTML:{__html:o.join("")}})}},e.scrollTo=function(t){try{e.tableRef.current.scrollToRow(t)}catch(e){}},(0,_.default)(e,"onTableScrollTop",m,(0,S.default)(e)),e.initQuery=function(){e.searchInputState={query:[],start:"",end:"",durationAlias:"",nextParamsKey:""}},e.togglePolling=function(){e.state.polling?e.stopPolling():e.startPolling()},(0,_.default)(e,"changeFrequency",h,(0,S.default)(e)),(0,_.default)(e,"pollingFunc",v,(0,S.default)(e)),e.onSearchParamsChange=function(){e.stopPolling(),e.refreshQuery()},e.handleRefresh=function(){e.refreshQuery()},e.clearFilter=function(){e.initQuery(),e.refreshQuery()},e.renderEmpty=function(){return A.default.createElement("div",{className:G.default.emptyText},A.default.createElement("span",{className:G.default.emptyTipIcon},A.default.createElement(w.Icon,{name:"exclamation",size:48})),A.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),A.default.createElement("p",null,t("YOU_CAN_TRY_TO"),A.default.createElement("span",{className:G.default.action,onClick:e.handleRefresh,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),A.default.createElement("span",{className:G.default.action,onClick:e.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS"))))},e}return(0,b.default)(i,[{key:"componentDidMount",value:function(){this.refreshQuery()}},{key:"componentWillUnmount",value:function(){clearInterval(this.pollingInterval)}},{key:"getQueryParams",value:function(){return this.searchInputState.query.filter((function(e){return e.key})).reduce((function(e,t){var a=t.key,r=t.value,n=a,u=e[n];return e[n]=u?"".concat(u,",").concat(r):r,e}),{})}},{key:"refreshQuery",value:(n=(0,y.default)(l.default.mark((function e(){var t,a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getQueryParams(),e.next=3,this.fetchLog(Y(Y({},t),{},{from:0,size:50},this.duration));case 3:a=e.sent,this.logs=a.reverse(),this.scrollTo(this.logs.length);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchLog",value:(r=(0,y.default)(l.default.mark((function e(t){var a,r,n,u,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params,r=a.cluster,n=a.namespace,u=a.gatewayName,o=a.workspace,e.next=3,this.store.getGatewayLogs(Y({cluster:r,namespace:n,gatewayName:u,workspace:o},t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"loadMoreLogs",value:(a=(0,y.default)(l.default.mark((function e(){var t,a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.logs.from+this.store.logs.size,a=this.getQueryParams(),e.next=4,this.fetchLog(Y(Y(Y({},a),this.duration),{},{from:t,size:50}));case 4:r=e.sent,this.logs=[].concat((0,u.default)(r.reverse()),(0,u.default)(this.logs)),this.scrollTo(r.length);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"stopPolling",value:function(){clearTimeout(this.pollingInterval),this.setState({polling:!1})}},{key:"startPolling",value:function(){this.setState({polling:!0}),this.pollingFunc(),this.pollingInterval&&clearTimeout(this.pollingInterval),this.pollingInterval=setInterval(this.pollingFunc,this.pollingFrequency)}},{key:"renderOperation",value:function(){var e=[5,10,20].map((function(e){return{label:t("REFRESH_INTERVAL_VALUE",{value:e}),value:1e3*e}})),a=Y(Y({},this.duration),this.getQueryParams());return A.default.createElement("div",{className:G.default.filter},A.default.createElement("div",{className:(0,L.default)(G.default.filterButton,G.default.pollingBtn),onClick:this.togglePolling},A.default.createElement(w.Icon,{name:this.state.polling?"stop":"start",type:"light"})),A.default.createElement(w.Select,{prefixIcon:A.default.createElement(w.Icon,{type:"light",name:"timed-task",size:20}),className:(0,L.default)(G.default.filterButton,G.default.frequencyOpts),defaultValue:5e3,options:e,onChange:this.changeFrequency}),A.default.createElement("a",{href:this.store.exportLinkFactory(a),download:!0},A.default.createElement("span",{className:(0,L.default)(G.default.filterButton,G.default.exportBtn)},A.default.createElement(w.Tooltip,{content:t("EXPORT_LOGS")},A.default.createElement(w.Icon,{name:"export",type:"light"})))))}},{key:"render",value:function(){return globals.app.hasKSModule("whizard-logging")?A.default.createElement("div",null,A.default.createElement("div",{className:G.default.title},A.default.createElement("div",{className:(0,L.default)(G.default.search,(0,o.default)({},G.default.focus,this.hasValue))},A.default.createElement(w.Icon,{className:G.default.isLeft,name:"magnifier",size:20}),A.default.createElement(N.default,{className:G.default.searchInput,onChange:this.onSearchParamsChange,params:this.searchInputState,dropdownClass:G.default.dropdownClass,iconThem:"light",enableClear:!0,dropDownItems:this.dropDownContent,showStep:!1}),A.default.createElement(w.Icon,{className:(0,L.default)(G.default.clearIcon,(0,o.default)({},G.default.hideIcon,!this.hasValue)),name:"close",onClick:this.initQuery})),this.renderOperation()),A.default.createElement("div",{className:G.default.body},(0,I.isEmpty)((0,D.toJS)(this.logs))?this.renderEmpty():A.default.createElement(j.default,{onScroll:this.onTableScrollTop,cols:this.tableCols,data:(0,D.toJS)(this.logs),tableRef:this.tableRef,trCLassName:G.default.trCLassName,body:G.default.bodyClassName,header:G.default.headerClassName}))):A.default.createElement(k.default,{className:"no-shadow",icon:"cluster",title:t("LOGGING_DISABLED")})}},{key:"hasValue",get:function(){return Object.values((0,D.toJS)(this.searchInputState)).some((function(e){return(0,I.isArray)(e)?e.some((function(e){return!(0,I.isEmpty)((0,D.toJS)(e))})):!(0,I.isEmpty)(e)}))}},{key:"defaultDuration",get:function(){return{start_time:0,end_time:Date.now()}}},{key:"duration",get:function(){var e=Date.now(),t=this.searchInputState,a=t.start,r=t.end;return a?{start_time:(0,I.min)([1e3*a,e]),end_time:(0,I.min)([1e3*r,e])}:this.defaultDuration}},{key:"dropDownContent",get:function(){return{log_query:{icon:"magnifier",text:t("KEYWORD")},pod_query:{icon:"pod",text:t("POD")}}}},{key:"store",get:function(){return this.props.detailStore}}]),i}(A.default.Component),s=(0,C.default)(i.prototype,"searchInputState",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{query:[],start:"",end:"",durationAlias:"",nextParamsKey:""}}}),d=(0,C.default)(i.prototype,"pollingFrequency",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5e3}}),f=(0,C.default)(i.prototype,"logs",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,C.default)(i.prototype,"hasValue",[D.computed],Object.getOwnPropertyDescriptor(i.prototype,"hasValue"),i.prototype),p=(0,C.default)(i.prototype,"tableCols",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{thead:t("TIME"),key:"time",dataIndex:"time",mustShow:!0,content:function(e){return"[".concat((0,M.default)(e.time).format("YYYY-MM-DD HH:mm:ss"),"]")}},{thead:t("POD"),key:"pod",dataIndex:"pod",mustShow:!0,content:this.renderHightLightMatchTd({resKey:"pod",searchKey:["pod_query"]})},{thead:t("MESSAGE"),key:"log",dataIndex:"log",className:G.default.logItem,content:this.renderHightLightMatchLogTd({resKey:"log",searchKey:["log_query"],handler:U.esMark}),mustShow:!0}]}}),(0,C.default)(i.prototype,"refreshQuery",[D.action],Object.getOwnPropertyDescriptor(i.prototype,"refreshQuery"),i.prototype),(0,C.default)(i.prototype,"fetchLog",[D.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchLog"),i.prototype),(0,C.default)(i.prototype,"loadMoreLogs",[D.action],Object.getOwnPropertyDescriptor(i.prototype,"loadMoreLogs"),i.prototype),m=(0,C.default)(i.prototype,"onTableScrollTop",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.scrollTop,r=e.store.logs,n=r.from,u=r.size,l=r.total;0===a&&l>n+u&&e.loadMoreLogs()}}}),h=(0,C.default)(i.prototype,"changeFrequency",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.pollingFrequency=t,e.state.polling&&(clearTimeout(e.pollingInterval),e.startPolling())}}}),v=(0,C.default)(i.prototype,"pollingFunc",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=z;e.searchInputState.end=Math.ceil(Date.now()/1e3),e.searchInputState.start=e.searchInputState.end-t,e.searchInputState.durationAlias="".concat(t/60,"m"),e.refreshQuery()}}}),c=i))||c)||c;a.default=W},4324:function(e,t,a){e.exports={title:"_27kFVAF6T6LskkB-SldkYB",focus:"EKk9Ji6QfnTzPjTdVGqgD",search:"_3kCCC6wI8blm8hKjJSIEcI",clearIcon:"_22CuQAmQJmPP1qPZkbLiLj",hideIcon:"_1F2hnpFCTxuxKIto8LQ51h",searchInput:"_3aNlwp3HfWhMeK1qFTLyoE",filter:"_3n89x2yGrGQ-oOOnS_YPwV",filterButton:"-kwpd9PsbShdFHDxkTgaT",exportBtn:"_2Q3HTrKzy33-1EizMmTKjx",pollingBtn:"_3WOXlBnk1BHyIiczHfgPK5",frequencyOpts:"_2H6qWGcv5qpefqUf6xkheC",searchBar:"_2K1N2nbDXMgMKbu0epuoqL",icon:"_1bkWSywOXEftAG9wNrQZEy",input:"JtBo7JY3_gEsP3OPMCVU7",dropdownClass:"_1fclYzxlwgfjHJSErppFui",body:"_3WDI3EZtPkYYy_z1f5hYnq",logItem:"_1NFwmrHeL25OAMuMTu7cdq",bodyClassName:"_3exrzDsfOPvrtsv3g5hA7h",headerClassName:"_25wENVXdRENHnBrg8HBWuE",trCLassName:"_1HlklfBbXcC8Te5q4BCwBN",emptyText:"aQvVb-bQn9kjmweXEIrRd",emptyTipIcon:"_1Uv0pJ5e_GGE_aafwHCiN_",action:"_2JIoQ0cYcxoX7cpnbMCkUn",hightLightMatch:"_3ZdEPi-ux2l08NjRFT0SbH"}},4325:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(28),r(42),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var u=n(r(315)),l=n(r(43));r(41);var o,c,i,s,d=n(r(44)),f=n(r(65)),p=n(r(36)),m=n(r(37)),h=n(r(88)),v=n(r(55)),y=n(r(56)),g=n(r(51)),_=n(r(49)),E=(n(r(66)),n(r(0))),b=r(239),S=r(791),O=n(r(792)),R=n(r(834)),T=r(14),C=r(186),A=n(r(4326)),P=n(r(4330));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var N=(0,b.inject)("rootStore","clusterStore")(o=(0,b.observer)(o=(0,S.trigger)((c=function(e){(0,v.default)(r,e);var a=k(r);function r(){var e;(0,p.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).store=new R.default,(0,f.default)(e,"hostGateway",i,(0,h.default)(e)),(0,f.default)(e,"isLoading",s,(0,h.default)(e)),e.getData=(0,d.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,a=e.props.match.params.cluster,t.next=4,e.store.getGateway({cluster:a,type:"cluster"});case 4:e.hostGateway=t.sent,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.handleTabChange=function(t){e.props.rootStore.routing.push("/whizard-telemetry/".concat(e.cluster,"/gateways/").concat(t))},e.renderGatewayCard=function(){return e.tabComponent[e.component]},e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){e.match.params.component!==this.component&&"cluster"===this.component&&this.getData()}},{key:"render",value:function(){return E.default.createElement(E.default.Fragment,null,E.default.createElement(O.default,{icon:"loadbalancer",title:t("GATEWAY_SETTINGS"),description:t("ENT_CLUSTER_GATEWAY_DESC"),tabs:this.tabs}),this.renderGatewayCard())}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"prefix",get:function(){return this.props.match.url}},{key:"tabs",get:function(){return{value:this.component,onChange:this.handleTabChange,options:[{value:"cluster",label:t("CLUSTER_GATEWAY")},{value:"workspace",label:t("WORKSPACE_GATEWAY_PL")},{value:"project",label:t("PROJECT_GATEWAY_PL")}]}}},{key:"tabComponent",get:function(){return{cluster:E.default.createElement(C.Loading,{spinning:this.isLoading},E.default.createElement(A.default,(0,u.default)({type:"cluster"},this.props,{prefix:this.prefix,detail:this.hostGateway,store:this.store,getData:this.getData}))),workspace:E.default.createElement(P.default,(0,u.default)({},this.props,{type:"workspace",inCluster:!0})),project:E.default.createElement(P.default,(0,u.default)({},this.props,{type:"project",inCluster:!0}))}}},{key:"enabledActions",get:function(){return!1}}]),r}(E.default.Component),i=(0,_.default)(c.prototype,"hostGateway",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,_.default)(c.prototype,"isLoading",[T.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=c))||o)||o)||o;a.default=N},4326:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(73),r(18),r(16),r(98),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(73),r(18),r(28),r(42),r(16),r(98),r(4),r(23),r(57),r(24),r(17),r(62);var u,l,o,c=n(r(61)),i=n(r(96)),s=n(r(30)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(0)),y=r(14),g=r(239),_=r(1818),E=r(186),b=n(r(789)),S=r(52),O=n(r(3)),R=n(r(63)),T=n(r(60)),C=r(791),A=r(72),P=n(r(240)),k=n(r(4327)),N=n(r(4329));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,g.inject)("rootStore")(u=(0,g.observer)(u=(0,C.trigger)((o=l=function(e){(0,p.default)(r,e);var a=D(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).handleMoreMenuClick=function(t,a){var r=e.props.type;switch(a){case"view":e.props.rootStore.routing.push({pathname:e.linkUrl,state:{isCluster:"cluster"===r}})}},e.title=function(){return v.default.createElement(v.default.Fragment,null,v.default.createElement("span",null,"project"===e.props.type?t("PROJECT_GATEWAY"):"workspace"===e.props.type?t("WORKSPACE_GATEWAY"):t("CLUSTER_GATEWAY")))},e.handleCreateGateway=function(){var a=e.props.match.params,r=a.namespace,n=a.workspace,u=e.props,l=u.type,o=u.getData;globals.app.hasKSModule("gateway")?e.trigger("gateways.create",{name:"cluster"===l?"kubesphere-router-cluster":"workspace"===l?"kubesphere-router-workspace-".concat(n):"",namespace:"cluster"===l?"kubesphere-controls-system":r,workspace:n,cluster:e.cluster,store:e.store,success:o}):P.default.warning({content:t("PLEASE_INSTALL_GATEWAY")})},e.renderInternetAccess=function(){var a=e.props,r=a.isFederated,n=a.title;return v.default.createElement(v.default.Fragment,null,n,v.default.createElement(b.default,{className:(0,O.default)("margin-t12",(0,s.default)({},N.default.federatedContainer,r))},e.gatewayConfig.map((function(e,a){return v.default.createElement("div",{className:N.default.container,key:a},e.map((function(e){return e.icon?v.default.createElement("div",{className:N.default.header,key:e.key},"string"==typeof e.icon?v.default.createElement(E.Icon,{name:e.icon,size:40}):v.default.createElement("span",{className:N.default.customIcon},e.icon),v.default.createElement("div",{className:N.default.item},v.default.createElement("div",null,e.title),v.default.createElement("p",null,e.desc))):e.component?v.default.createElement("div",{className:(0,O.default)(N.default.item,"text-right"),key:e.key},e.component):v.default.createElement("div",{className:N.default.item,key:e.key},v.default.createElement("div",null,e.title),v.default.createElement("p",null,t(e.desc)))})))})),"NodePort"!==e.gateway.type&&v.default.createElement("div",{className:(0,O.default)(N.default.annotations,(0,s.default)({},N.default.bgWhite,r))},v.default.createElement("p",null,t("ANNOTATION_PL")),v.default.createElement("ul",null,(0,R.default)(e.gateway.annotations)?v.default.createElement("li",null,t("NO_DATA")):Object.entries(e.gateway.annotations).map((function(e){var t=(0,i.default)(e,2),a=t[0],r=t[1];return v.default.createElement("li",{key:a},v.default.createElement("span",{className:N.default.key},a),v.default.createElement("span",null,r))}))))))},e}return(0,f.default)(r,[{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name,":").concat(e.nodePort)})).join("; "):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,R.default)(e.loadBalancerIngress)?(0,R.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t}},{key:"renderMoreMenu",value:function(){return v.default.createElement(E.Menu,{onClick:this.handleMoreMenuClick},this.itemActions.map((function(e){return v.default.createElement(E.Menu.MenuItem,{key:e.key,disabled:e.disabled},v.default.createElement(E.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props.match.params,t=e.component,a=e.namespace,r=e.workspace,n=this.props,u=n.type,l=n.title,o=n.gatewayList,c=(0,T.default)(o)&&o[0],i=(0,T.default)(o)&&o[1];return v.default.createElement("div",null,this.isEmptyData?a&&"cluster"===u||a&&"workspace"===u||r&&"cluster"===u||c&&r&&"workspace"===u||i&&a&&"project"===u||c&&a&&"project"===u?null:v.default.createElement(v.default.Fragment,null,l,v.default.createElement(k.default,{component:t,type:u,cluster:this.cluster})):this.renderInternetAccess())}},{key:"gateway",get:function(){return this.props.detail}},{key:"store",get:function(){return this.props.store}},{key:"isEmptyData",get:function(){return(0,R.default)((0,y.toJS)(this.gateway))}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.isFederated?this.props.cluster.name:e}},{key:"itemActions",get:function(){return[{key:"view",icon:"eye",text:t("VIEW_DETAILS"),disabled:null==this.gateway.createTime}]}},{key:"linkUrl",get:function(){var e=this.props.prefix;return e?"".concat(e,"/").concat(this.gateway.name):"/whizard-telemetry/".concat(this.cluster,"/gateways/cluster/").concat(this.gateway.name)}},{key:"gatewayConfig",get:function(){var e=this.gateway,a=e.creator,r=e.createTime,n=e.replicas,u=e.type,l=e.ports,o=e.loadBalancerIngress,i=e.serviceMeshEnable,s=e.lb,d=(0,R.default)(l)?"-":l.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat("NodePort"===u?e.nodePort:e.port)})).join("/"),f=(0,R.default)(o)?"-":o.join(";"),p=[].concat((0,c.default)(A.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes"}]),m=s&&p.find((function(e){return e.value===s})).icon;return[[{key:"clusterType",icon:"loadbalancer",title:this.title(),desc:t("TYPE")},{key:"author",title:a||"-",desc:t("CREATOR")},{key:"createTime",title:r?(0,S.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-",desc:t("CREATION_TIME")},{key:"edit",component:v.default.createElement(E.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},v.default.createElement(E.Button,null,t("MANAGE")))}],[{key:"method",icon:"eip-group",title:u,desc:t("ACCESS_MODE_SCAP")},s?{key:"lb",icon:m,title:s,desc:t("LOAD_BALANCER_PROVIDER_SCAP")}:{key:"ip",icon:"ip",title:f,desc:t("GATEWAY_ADDRESS_SCAP")},{key:"earth",icon:"earth",title:d,desc:t("NODE_PORTS_SCAP")},{key:"pod",icon:"pod",title:n,desc:1===n?t("REPLICA"):t("REPLICA_PL")},{key:"appGover",icon:v.default.createElement(_.ReactComponent,null),title:i?t("ON"):t("OFF"),desc:t("TRACING")}]]}}]),r}(v.default.Component),l.defaultProps={type:"cluster"},u=o))||u)||u)||u;a.default=w},4327:function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(0)),l=r(186),o=n(r(451)),c=n(r(789)),i=n(r(4328)),s=function(e){var a=e.component,r=e.type,n=a||r;return u.default.createElement(c.default,{className:"margin-t12 margin-b12"},u.default.createElement("div",{className:i.default.empty},u.default.createElement("div",{className:i.default.icon},u.default.createElement(l.Icon,{name:"loadbalancer",size:48})),u.default.createElement("div",{className:i.default.text},u.default.createElement("div",null,t("".concat((0,o.default)(n).toUpperCase(),"_GATEWAY_NOT_ENABLED"))),u.default.createElement("p",null,t("ENT_".concat(n.toUpperCase(),"_ENABLE_GATEWAY_DESC"))))))};a.default=s},4328:function(e,t,a){e.exports={empty:"_12V0EMkMwg-ATL6WAJUlvk",icon:"lpJZc2UESjJzdjZk52Vq",text:"A2yOtF79Z2k2TeTTHobaw"}},4329:function(e,t,a){e.exports={container:"_2Q72oTwL7fJmYWYXk1B0BH",item:"_1Mc0XqRQZVV6cnDK6uzklK",header:"_1LLbP5vYaQetWLA5azmrv-",customIcon:"_3kHfmmRDZbD71WFqLEJL1o",annotations:"_1aw7xRP0t5rvOynJj6EvsH",bgWhite:"_3x5fJs1DEn2SBmNruKqnrm",federatedContainer:"_38mx2ev6e7N3WCt17qZf-L"}},4330:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var l=n(r(315)),o=n(r(43)),c=n(r(30)),i=n(r(58));r(41);var s,d=n(r(44)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(0)),g=n(r(834)),_=u(r(793)),E=n(r(796)),b=r(186),S=n(r(63));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var C=(0,_.default)({store:new g.default,module:"gateways"})(s=function(e){(0,m.default)(r,e);var a=T(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).getData=(0,d.default)(o.default.mark((function t(){var a,r,n,u,l,c,s,d=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},r=a.silent,n=(0,i.default)(a,["silent"]),u=e.props,l=u.store,c=u.inCluster,r&&(l.list.silent=!0),s=c?"kubesphere.io/gateway-type=".concat(e.props.type):"kubesphere.io/workspace=".concat(e.props.match.params.workspace),t.next=6,l.fetchList(R(R(R({},e.props.match.params),n),{},{labelSelector:s}));case 6:l.list.silent=!1;case 7:case"end":return t.stop()}}),t)}))),e.getGatewayResource=function(t){var a=t.cluster;return e.isProjectGateway?{cluster:a,namespace:t.name.split("kubesphere-router-")[1]}:e.isProjectGateway?void 0:{cluster:a,workspace:t.name.split("kubesphere-router-workspace-")[1]}},e.handleFetch=function(t,a){e.routing.query(R(R({},t),{},{type:e.type}),a)},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),render:function(t,a){return y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{fontWeight:700,cursor:"auto",marginRight:"4px"}},t),e.renderDisabledTip(a))}},{title:t("ACCESS_MODE"),dataIndex:"type"},{title:t("IP_ADDRESS"),dataIndex:"defaultIngress"},{title:t("NODE_PORTS"),dataIndex:"ports",render:function(e){return(0,S.default)(e)?"-":e.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat(e.nodePort)})).join("/")}},{title:t("REPLICA_COUNT"),dataIndex:"replicas"},{title:t("TRACING"),dataIndex:"serviceMeshEnable",render:function(e){return e?t("ON"):t("OFF")}}]},e}return(0,p.default)(r,[{key:"renderDisabledTip",value:function(e){return e.createTime?null:y.default.createElement(b.Tooltip,{content:t("UPDATE_GATEWAY_DESC"),placement:"top"},y.default.createElement(b.Icon,{size:20,name:"update",color:{primary:"#f5a623 ",secondary:"#ffe1be"}}))}},{key:"render",value:function(){var e=this.props,a=e.tableProps,r=e.type,n=e.inCluster;return y.default.createElement(_.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),y.default.createElement(E.default,(0,l.default)({},a,{name:"".concat(r.toUpperCase(),"_GATEWAY"),emptyProps:{desc:n?t("ENT_".concat(r.toUpperCase(),"_ENABLE_GATEWAY_DESC")):t("PROJECT_ENABLE_GATEWAY_DESC_WS")},itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:null,searchType:"name"})))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isProjectGateway",get:function(){var e=this.props.type;return!e||"project"===e}},{key:"itemActions",get:function(){return[]}},{key:"tableActions",get:function(){return R(R({},this.props.tableProps.tableActions),{},{selectActions:[],onFetch:this.handleFetch})}}]),r}(y.default.Component))||s;a.default=C},4331:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var l,o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=r(186),m=r(239),h=n(r(3)),v=u(r(0)),y=r(317),g=r(1076),_=n(r(4332));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var b=(0,m.inject)("rootStore")(l=(0,m.observer)(l=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={isHideNav:!1},e.handleNav=function(){e.setState({isHideNav:!e.state.isHideNav})},e}return(0,i.default)(r,[{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){var e=this.props,a=e.match,r=e.route,n=e.location,u=this.state.isHideNav;return v.default.createElement("div",{className:(0,h.default)("ks-page",_.default.pageWrapper,u?_.default.hideNav:_.default.showNav)},v.default.createElement("div",{className:(0,h.default)("ks-page-side",_.default.pageSideWrapper,(0,o.default)({},_.default.show,!u))},v.default.createElement("div",{className:_.default.navWrapper},v.default.createElement("div",{className:_.default.titleWrapper},v.default.createElement("div",{className:_.default.icon},v.default.createElement(p.Icon,{name:"observability",size:40,type:"light"})),v.default.createElement("div",{className:_.default.text},v.default.createElement("div",{className:"h6"},t("OBSERVABILITY_CENTER")))),v.default.createElement(g.Nav,{className:(0,h.default)("ks-page-nav",_.default.pageNav),navs:this.navs,location:n,match:a,fold:u}),v.default.createElement("div",{className:(0,h.default)(_.default.foldWrapper,u?_.default.folded:""),onClick:this.handleNav},v.default.createElement("img",{src:"/assets/packup.svg"}),v.default.createElement("span",null,t(u?"WHIZARD_MONITORING.UNFOLD":"WHIZARD_MONITORING.PACK_UP"))))),v.default.createElement("div",{className:(0,h.default)("ks-page-main",_.default.pageMainWrapper)},(0,y.renderRoutes)(r.routes)))}},{key:"navs",get:function(){return globals.app.getWhizardTelemetryNavs(!0)}}]),r}(v.Component))||l)||l;a.default=b},4332:function(e,t,a){e.exports={titleWrapper:"_1WEOPCWxh1Svg3Rvn97sjU",icon:"_3AAYm2OdZm5E-nCpKQziTZ",text:"cuvWPb9Q3iLWmY48nUiKu",pageWrapper:"_3F8VFcyJ8Dktzxy3bb-YBY",hideNav:"_3g8lhyKBjB8giBgw0NANJL",pageSideWrapper:"_3PFoTFe_EF0ZFEiERvEEXK",navWrapper:"_2G8ZltU2jMc2pXtYuV3nFD",pageNav:"_2b2U6BRKGBQEaWSm_Md4KN",foldWrapper:"_3of9ncmSOhwDzlZgGh3IAj",pageMainWrapper:"_1wxDaCX9g5LefNRzrPhSAd",show:"_304PhIVyHWcZn4_vv_nZsV"}},4333:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(11),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(18),r(191),r(42),r(16),r(159),r(4),r(22),r(23),r(57),r(17);var l=n(r(315)),o=n(r(61)),c=n(r(43));r(41);var i,s=n(r(44)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=r(186),y=n(r(63)),g=r(239),_=u(r(0)),E=n(r(792)),b=n(r(438)),S=n(r(883)),O=r(52),R=r(791),T=n(r(4334)),C=n(r(1869));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var P=(0,g.inject)("rootStore")(i=(0,g.observer)(i=(0,R.trigger)(i=function(e){(0,p.default)(r,e);var a=A(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={gridType:"row",customPanelModalVisible:!1,resourceType:void 0,selectedClusterList:[],originClusterList:[]},e.store=new S.default,e.clusterStore=new b.default,e.showCustomPanelModal=function(){e.setState({customPanelModalVisible:!0})},e.hideCustomPanelModal=function(){e.setState({customPanelModalVisible:!1})},e.setClusters=function(){var t=(0,s.default)(c.default.mark((function t(a){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("".concat(globals.user.username,"-observability"),JSON.stringify(a)),e.store.setClusters(a),r=e.getClustersOriginList(),e.setState({selectedClusterList:r},(function(){e.hideCustomPanelModal()}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initClustersList=(0,s.default)(c.default.mark((function t(){var a,r,n,u;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!globals.app.hasPermission({module:"clusters",action:"manage"})){t.next=5;break}return t.next=3,e.clusterStore.fetchList({limit:-1});case 3:t.next=7;break;case 5:return t.next=7,e.clusterStore.fetchList({limit:-1,from:"resource","cluster.kubesphere.io/visibility":"public",labelSelector:"!cluster-role.kubesphere.io/edge"});case 7:(a=(0,O.safeParseJSON)(localStorage.getItem("".concat(globals.user.username,"-observability")),[])).length>0?e.store.setClusters(a):(r=e.clusterStore.list.data,n=(void 0===r?[]:r).map((function(e){return{name:e.name}})),localStorage.setItem("".concat(globals.user.username,"-observability"),JSON.stringify(n)),e.store.setClusters(n)),u=e.getClustersOriginList(),e.setState({selectedClusterList:u});case 11:case"end":return t.stop()}}),t)}))),e.initData=(0,s.default)(c.default.mark((function t(){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initClustersList();case 2:case"end":return t.stop()}}),t)}))),e}return(0,f.default)(r,[{key:"getClustersOriginList",value:function(){var e=this.clusterStore.list.data,t=void 0===e?[]:e,a=this.store.clusters,r=void 0===a?[]:a,n=t.filter((function(e){var t=r.filter((function(t){return t.name===e.name}));return!(0,y.default)(t)&&globals.app.hasClusterModule(e.name,"whizard-monitoring")}));if(!(0,y.default)(n)){var u=n.filter((function(e){return e&&e.isHost})),l=n.filter((function(e){return e&&!e.isHost}));return[].concat((0,o.default)(u),(0,o.default)(l))}return[]}},{key:"componentDidMount",value:function(){this.initData()}},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){var e=this.clusterStore.list.isLoading,a=this.props.bannerProps;return e?_.default.createElement(v.Loading,{className:"ks-page-loading",size:28,spinning:e}):_.default.createElement(g.Provider,{observabilityStore:this.store},_.default.createElement(E.default,(0,l.default)({},a,{icon:"loudspeaker",title:t("WHIZARD_MONITORING.RESOURCE_RANKING_PL"),description:t("WHIZARD_MONITORING.RESOURCE_RANKING_DESC")})),_.default.createElement(T.default,{clusterList:this.state.selectedClusterList,type:this.state.resourceType,showCustomPanelModal:this.showCustomPanelModal}),_.default.createElement(C.default,{visible:this.state.customPanelModalVisible,onOk:this.setClusters,onCancel:this.hideCustomPanelModal,clusters:this.store.clusters}))}}]),r}(_.Component))||i)||i)||i;a.default=P},4334:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(86),r(73),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(86),r(73),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(7);var u,l,o,c,i,s,d,f=n(r(61)),p=n(r(30)),m=n(r(65)),h=n(r(36)),v=n(r(37)),y=n(r(88)),g=n(r(55)),_=n(r(56)),E=n(r(51)),b=n(r(49)),S=(n(r(66)),r(186)),O=n(r(3)),R=n(r(788)),T=n(r(846)),C=n(r(1047)),A=n(r(886)),P=n(r(987)),k=n(r(158)),N=r(14),D=r(239),w=n(r(0)),L=n(r(4335)),I=n(r(1209)),M=n(r(1401)),j=n(r(1211)),x=r(52),U=r(72),V=r(794),G=r(4336),F=n(r(4339)),Y=n(r(4340));function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,_.default)(this,a)}}var W={limit:10,page:1,sort_type:"desc"},q=(0,D.inject)("rootStore")(u=(0,D.observer)((l=function(e){(0,g.default)(r,e);var a=z(r);function r(){var e;(0,h.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).state={customPanelModalVisible:!1},(0,m.default)(e,"type",o,(0,y.default)(e)),e.rowKey=function(){return{project:"namespace",cluster:"cluster",pod:"pod",node:"node"}[e.type]},(0,m.default)(e,"hideColumns",c,(0,y.default)(e)),e.sourceMap={cluster:{store:new L.default(B({},W)),icon:"cluster",name:"cluster",url:function(e){return"/whizard-telemetry/".concat(e,"/overview")}},node:{store:new I.default(B({},W)),icon:"nodes",name:"node",url:function(e,t){return"/whizard-telemetry/".concat(t,"/nodes/").concat(e,"/status")}},pod:{store:new M.default(B({},W)),icon:"pod",name:"pod",url:function(e,t,a){return"/whizard-telemetry/".concat(t,"/projects/").concat(a,"/pods/").concat(e,"/resource-status")}},project:{store:new j.default(B({},W)),icon:"project",name:"namespace",url:function(e,t){return"/whizard-telemetry/".concat(t,"/projects/").concat(e,"/overview")}}},e.transData=function(e,a){var r="",n="",u=null==e?void 0:e[a];if((a.indexOf("used_limits")>0||a.indexOf("used_requests")>0)&&(r=(0,k.default)(u)||""===u?"N/A":""),!r){var l=U.MONITOR_RANK_UNIT_MAP[a],o=null!=u?u:0;"%"===l?r="".concat((0,V.getValueByUnit)(o,l),"%"):""===l?r=Math.round(100*o)/100:(n=(0,V.getSuitableUnit)(o,l),r=(0,V.getValueByUnit)(o,n))}return"".concat("gpu"===n?"".concat(r," GPU"):"core"===n?t("VALUE_CORES",{value:r}):t("VALUE_UNIT",{value:r,unit:n}))},e.renderQos=function(e){return w.default.createElement(w.default.Fragment,null,e.qos_class&&w.default.createElement(S.Tooltip,{content:U.COLOR_QOS[e.qos_class].label},w.default.createElement("span",{style:{display:"inline-block",marginRight:"4px",width:"16px",height:"16px",lineHeight:"16px",textAlign:"center",borderRadius:"2px",color:U.COLOR_QOS[e.qos_class].color,background:U.COLOR_QOS[e.qos_class].background}},e.qos_class.slice(0,1).toUpperCase())))},e.fetchRankData=function(t){e.store.fetchAll(B(B({},t),e.resourcesParams))},(0,m.default)(e,"onChange",i,(0,y.default)(e)),(0,m.default)(e,"handleColumnsHide",s,(0,y.default)(e)),(0,m.default)(e,"handleRefresh",d,(0,y.default)(e)),e}return(0,v.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.clusterList;e&&e.length>0&&this.fetchRankData()}},{key:"componentDidUpdate",value:function(e){e.clusterList!==this.props.clusterList&&this.fetchRankData()}},{key:"renderTop",value:function(){var e=this.props.showCustomPanelModal;return w.default.createElement("div",{className:Y.default.topWrapper},w.default.createElement("div",{className:Y.default.titleWrapper},t("WHIZARD_MONITORING.RESOURCE_RANKING_PL")),w.default.createElement(S.Button,{type:"control",icon:"layout",iconType:"light",className:Y.default.mainFilterClusterButton,onClick:e},t("SELECT_CLUSTER")))}},{key:"renderToolbar",value:function(){return w.default.createElement("div",{className:(0,O.default)(Y.default.toolbar,Y.default.pane__toolbar,Y.default.pane)},w.default.createElement(S.RadioGroup,{wrapClassName:"radio-group-button",value:this.type,onChange:this.onChange,disabled:this.store.isLoading},w.default.createElement(S.RadioButton,{value:"cluster"},t("CLUSTER_PL")),w.default.createElement(S.RadioButton,{value:"node"},t("NODE_PL")),w.default.createElement(S.RadioButton,{value:"project"},t("PROJECT_PL")),w.default.createElement(S.RadioButton,{value:"pod"},t("POD_PL"))),w.default.createElement("div",{className:Y.default.toolbar_filter},w.default.createElement(S.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh,"data-test":"table-refresh"}),w.default.createElement(C.default,{className:Y.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:this.columns,value:(0,N.toJS)(this.hideColumns),onChange:this.handleColumnsHide}),w.default.createElement(S.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options,disabled:this.store.isLoading}),w.default.createElement(S.Select,{className:Y.default.sortTypeSelect,value:this.store.sort_type,onChange:this.store.changeSortType,disabled:this.store.isLoading,options:[{value:"desc",label:t("SORT_BY_DESC")},{value:"asc",label:t("SORT_BY_ASC")}]})))}},{key:"renderList",value:function(){var e=this.store.data.toJS().map((function(e){return B(B({},e),{},{id:(0,G.v4)()})}));return w.default.createElement("div",{className:Y.default.listContainer},w.default.createElement(P.default,{columns:this.filteredColumns,dataSource:e,emptyText:w.default.createElement(T.default,null),loading:this.store.isLoading,store:this.store,rowKey:"id"}),this.renderPagination())}},{key:"renderPagination",value:function(){var e=this,t=this.store,a=t.page,r=t.total,n=t.limit;return w.default.createElement("div",{className:(0,O.default)(Y.default.pane,Y.default.pane__pagination)},w.default.createElement(A.default,{page:a,total:r,limit:n,onChange:function(t){e.store.changePagination(t,e.resourcesParams)}}))}},{key:"render",value:function(){return w.default.createElement("div",{className:Y.default.wrapper},this.renderTop(),this.renderToolbar(),this.renderList())}},{key:"store",get:function(){return this.sourceMap[this.type].store}},{key:"clusters",get:function(){var e;return null===(e=this.props.clusterList.map((function(e){return e&&e.name})))||void 0===e?void 0:e.join("|")}},{key:"options",get:function(){var e=this,a=this.sourceMap[this.type].name;return this.store.sort_metric_options.filter((function(t){return!(0,N.toJS)(e.hideColumns).includes("".concat(t,"-").concat(a))})).map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"columns",get:function(){var e,a=this,r=this.sourceMap[this.type],n=r.store,u=r.name,l=r.icon,o=r.url,c=null===(e=n.sort_metric_options)||void 0===e?void 0:e.map((function(e){return{key:"".concat(e,"-").concat(u),sort_metric:e,title:t("".concat(U.MONITOR_RANK_METERIC_LOCALS[e],"_TCAP")),isHideable:!0,render:function(t){return w.default.createElement("div",null,w.default.createElement("h3",null,a.transData(t,e)))}}})),i=[{title:t("namespace"===u?"PROJECT":u.toUpperCase()),width:"15%",key:u,render:function(e){var r,n;if("cluster"===u){var c,i,s,d=null!==(c=null===(i=a.props.clusterList)||void 0===i||null===(s=i.filter((function(t){return t.name===e.cluster})))||void 0===s?void 0:s[0])&&void 0!==c?c:{};n=U.CLUSTER_PROVIDER_ICON[d.provider]||"kubernetes",r=d.isHost?t("HOST_CLUSTER_SCAP"):t("MEMBER_CLUSTER_SCAP")}else{var f;r="".concat(t("CLUSTER_PL"),": ").concat(null!==(f=(0,x.showNameAndAlias)(null==e?void 0:e.cluster,"cluster",{},!0,(function(){return a.forceUpdate()})))&&void 0!==f?f:"-"),n=l}var p=a.renderQos(e),m="namespace"===u?w.default.createElement(F.default,{data:e}):"cluster"===u?(0,x.showNameAndAlias)(null==e?void 0:e[u],"cluster",{},!0,(function(){return a.forceUpdate()})):null==e?void 0:e[u];return w.default.createElement(R.default,{className:Y.default.avatar,icon:n,title:w.default.createElement(w.default.Fragment,null,p,(0,x.getDomTitle)(m)),desc:(0,x.getDomTitle)(r),iconSize:40,to:o(null==e?void 0:e[u],null==e?void 0:e.cluster,null==e?void 0:e.namespace)})}}];return(0,x.hideGPUByLicense)([].concat(i,(0,f.default)(c)))}},{key:"filteredColumns",get:function(){var e=this;return this.columns.filter((function(t){return!e.hideColumns.includes(t.key||t.dataIndex)}))}},{key:"resourcesParams",get:function(){return"cluster"===this.type?{resources_filter:this.clusters}:{cluster_resources_filter:this.clusters}}}]),r}(w.default.Component),o=(0,b.default)(l.prototype,"type",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.type?"namespace"===this.props.type?"project":this.props.type:"cluster"}}),c=(0,b.default)(l.prototype,"hideColumns",[N.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,b.default)(l.prototype,"onChange",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.store.sort_metric=e.store.sort_metric_options[0],e.hideColumns=[],new Promise((function(a){e.type=t,a()})).then((function(){e.fetchRankData()}))}}}),s=(0,b.default)(l.prototype,"handleColumnsHide",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hideColumns=t;var a=e.sourceMap[e.type].name;if(t.includes("".concat(e.store.sort_metric,"-").concat(a))){var r,n=e.store.sort_metric_options.filter((function(e){return!t.includes("".concat(e,"-").concat(a))}));e.store.changeSortMetric(null!==(r=n[0])&&void 0!==r?r:"")}}}}),d=(0,b.default)(l.prototype,"handleRefresh",[N.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.store.changePagination({page:1,limit:10},e.resourcesParams)}}}),u=l))||u)||u;a.default=q},4335:function(e,t,a){"use strict";a(15);var r=a(20);a(73),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(73),a(42),a(4),a(23),a(57),a(17);var n,u,l=r(a(65)),o=r(a(36)),c=r(a(88)),i=r(a(55)),s=r(a(56)),d=r(a(51)),f=r(a(49)),p=(r(a(66)),a(14)),m=a(52),h=r(a(1210));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=["cluster_cpu_usage","cluster_cpu_utilisation","cluster_memory_usage_wo_cache","cluster_memory_utilisation","cluster_gpu_usage","cluster_gpu_memory_usage","cluster_disk_size_usage","cluster_disk_size_utilisation","cluster_pod_count","cluster_pod_utilisation"],g=["cluster_cpu_usage","cluster_cpu_utilisation","cluster_memory_usage_wo_cache","cluster_memory_utilisation","cluster_gpu_usage","cluster_gpu_memory_usage","cluster_disk_size_usage","cluster_disk_size_utilisation","cluster_pod_count","cluster_pod_utilisation"],_=(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,o.default)(this,a),r=t.call(this,e),(0,l.default)(r,"sort_metric",u,(0,c.default)(r)),r.resource="clusters",r.sort_metric_options=(0,m.hideGPUByLicense)(y,r.cluster),r.metrics_filter=(0,m.hideGPUByLicense)(g,r.cluster).join("|"),r}return a}(h.default),u=(0,f.default)(n.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),n);t.default=_},4339:function(e,t,a){"use strict";a(15);var r=a(20);a(31),a(16),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(16),a(4);var n=r(a(26)),u=r(a(0)),l=a(52),o=a(147),c=a(143),i=function(e){var t,a=e.data,r=void 0===a?{}:a;(0,c.useEventValue)(c.eventKeys.PROJECT_ITEM_CHANGE(r.namespace,r.cluster));var i=(0,n.default)(globals,"clusterProjectArray.".concat(r.cluster),[]).find((function(e){return r.namespace&&e.name===r.namespace}));return u.default.useEffect((function(){void 0===i&&o.eventBus.emit(c.eventKeys.requestAlias,{type:"project",params:{project:r.namespace,cluster:r.cluster}})}),[i]),(0,l.getDomTitle)(i?(0,l.getDisplayNameNew)(i):null!==(t=r.namespace)&&void 0!==t?t:"")};t.default=i},4340:function(e,t,a){e.exports={wrapper:"_3ApczdMf7j2uneTe2JGYhg",pane:"_3mbsKDk2kd11c9cfQjugZ6",pane__toolbar:"ltP4CEt8mymYRRT376qA-",title:"_3YhlPpJlvBKRdktHH-U1Bm",toolbar:"BtUrBQAOcPmFDbxZtn-WP",toolbar_buttons:"rBe1G0hiL9dSJRzNopOLY",toolbar_filter:"_2wEohvRkRnx1albThDzsmI",sortTypeSelect:"_2JiV45cgCQsYGRSS-XdjqR",sort_button:"upaGBQC-LyOMeHZRgUZoL",table:"_3_F7HRb-lHLYKEGnX7yjac",table_rank:"_22z8nWky5VNyXSk3K0UY-V",table_no_border:"_3BG_gTrG3w0kDAB_M06nhn",rankList_row:"_3OEoJlVN4Dyi5CEzkUjRbn",rankCol:"_2gr99clhZUVecFKrvnd-Hs",listContainer:"LG5IDGpgF8H2hMp0RbAU7",pane__pagination:"_3ekfhOsTLWYfIT0Aig-3kU",avatar:"_1BvPHiYQDEe03j5JCADESu",topWrapper:"D5uibtZo2AmnO5agkiJMS",titleWrapper:"Tuiyfc6XumfrbMbO6ufv1"}},4341:function(e,t,a){e.exports={clusterCard:"_2d7-7Gav8A5pdolAfGc3RO"}},4342:function(e,a,r){"use strict";r(15);var n=r(20),u=r(157);r(5),r(11),r(29),r(73),r(18),r(16),r(4),r(22),r(23),r(17),r(38),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(29),r(73),r(18),r(191),r(42),r(16),r(159),r(4),r(22),r(23),r(57),r(17),r(38),r(32);var l=n(r(30)),o=n(r(61)),c=n(r(43));r(41);var i,s=n(r(44)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=r(186),y=n(r(63)),g=r(239),_=u(r(0)),E=n(r(1237)),b=n(r(438)),S=n(r(945)),O=n(r(883)),R=n(r(4343)),T=n(r(439)),C=n(r(445)),A=r(52),P=r(791),k=n(r(3)),N=n(r(4344)),D=n(r(4350)),w=n(r(1869)),L=n(r(4357)),I=n(r(4359)),M=n(r(4361)),j=n(r(4365));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var U=(0,g.inject)("rootStore")(i=(0,g.observer)(i=(0,P.trigger)(i=function(e){(0,p.default)(r,e);var a=x(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={gridType:"row",whizardConfigVisible:!1,customPanelModalVisible:!1,rankModalVisible:!1,resourceType:void 0,selectedClusterList:[],originClusterList:[],alerts:[],fetchFin:!1,isHideClusterList:!1},e.store=new O.default,e.tagsStore=new S.default,e.clusterStore=new b.default,e.alertStore=new E.default,e.workspaceStore=new C.default,e.projectStore=new T.default,e.whizardStore=new R.default,e.handleGridType=function(t){e.setState({gridType:t})},e.showCustomPanelModal=function(){e.setState({customPanelModalVisible:!0})},e.hideCustomPanelModal=function(){e.setState({customPanelModalVisible:!1})},e.showWhizardConfigModal=function(){e.trigger("whizard.create",{store:e.whizardStore,rootStore:e.props.rootStore})},e.showRankModal=function(t){t?e.setState({resourceType:t}):e.setState({resourceType:void 0}),e.setState({rankModalVisible:!0})},e.hideRankModal=function(){e.setState({rankModalVisible:!1})},e.setClusters=function(){var t=(0,s.default)(c.default.mark((function t(a){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("".concat(globals.user.username,"-observability"),JSON.stringify(a)),e.store.setClusters(a),r=e.getClustersOriginList(),e.setState({selectedClusterList:r},(0,s.default)(c.default.mark((function t(){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.store.getBaseResourcesSummary(),e.store.fetchAllMetricsData(),e.store.fetchRoleAndMember(),e.store.fetchAlertData(),e.getAlert()]);case 2:e.hideCustomPanelModal();case 3:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initClustersList=(0,s.default)(c.default.mark((function t(){var a,r,n,u;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!globals.app.hasPermission({module:"clusters",action:"manage"})){t.next=5;break}return t.next=3,e.clusterStore.fetchList({limit:-1});case 3:t.next=7;break;case 5:return t.next=7,e.clusterStore.fetchList({limit:-1,from:"resource","cluster.kubesphere.io/visibility":"public",labelSelector:"!cluster-role.kubesphere.io/edge"});case 7:(a=(0,A.safeParseJSON)(localStorage.getItem("".concat(globals.user.username,"-observability")),[])).length>0?e.store.setClusters(a):(r=e.clusterStore.list.data,n=(void 0===r?[]:r).map((function(e){return{name:e.name}})),localStorage.setItem("".concat(globals.user.username,"-observability"),JSON.stringify(n)),e.store.setClusters(n)),u=e.getClustersOriginList(),e.setState({selectedClusterList:u});case 11:case"end":return t.stop()}}),t)}))),e.getAlert=(0,s.default)(c.default.mark((function t(){var a,r,n,u;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.hasAlerting){t.next=2;break}return t.abrupt("return");case 2:return a=e.state.selectedClusterList.map((function(e){return e.name})).join("|"),r=e.clusterStore.list.data,n=void 0===r?[]:r,t.next=6,e.alertStore.fetchList({limit:5,label_matcher:'{cluster=~"'.concat(a,'",severity=~"warning|error|critical"}'),allBuiltin:!0,sortBy:"activeAt"});case 6:u=t.sent,e.setState({alerts:u,originClusterList:n});case 8:case"end":return t.stop()}}),t)}))),e.initData=(0,s.default)(c.default.mark((function t(){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initClustersList();case 2:return t.next=4,Promise.all([e.store.getBaseResourcesSummary(),e.store.fetchAllMetricsData(),e.store.fetchRoleAndMember(),e.tagsStore.fetchGroupList(),e.store.fetchAlertData(),e.getAlert()]);case 4:case"end":return t.stop()}}),t)}))),e.handleClusterList=function(){e.setState({isHideClusterList:!e.state.isHideClusterList})},e}return(0,f.default)(r,[{key:"getClustersOriginList",value:function(){var e=this.clusterStore.list.data,t=void 0===e?[]:e,a=this.store.clusters,r=void 0===a?[]:a,n=t.filter((function(e){var t=r.filter((function(t){return t.name===e.name}));return!(0,y.default)(t)}));if(!(0,y.default)(n)){var u=n.filter((function(e){return e&&e.isHost})),l=n.filter((function(e){return e&&!e.isHost}));return[].concat((0,o.default)(u),(0,o.default)(l))}return[]}},{key:"componentDidMount",value:function(){this.initData()}},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){var e=this,a=this.clusterStore.list.isLoading,r=this.state.isHideClusterList;return a?_.default.createElement(v.Loading,{className:"ks-page-loading",size:28,spinning:a}):_.default.createElement(g.Provider,{observabilityStore:this.store},_.default.createElement("div",{className:(0,k.default)(j.default.contentWrapper,(0,l.default)({},j.default.collapse,r))},_.default.createElement("div",{className:j.default.rightWrapper},_.default.createElement("div",{className:j.default.mainTitleWrapper},_.default.createElement("h3",{className:j.default.mainTitle},t("OVERVIEW")),_.default.createElement("div",{className:j.default.mainButtonWrapper},_.default.createElement(v.Button,{className:j.default.clusterListButton,onClick:this.handleClusterList},_.default.createElement("img",{src:"/assets/whizard-telemetry-left.svg",alt:""}),t(r?"WHIZARD_MONITORING.UNFOLD_CLUSTER_LIST":"WHIZARD_MONITORING.COLLAPSE_CLUSTER_LIST")),_.default.createElement(v.Button,{type:"control",icon:"layout",iconType:"light",className:j.default.mainFilterClusterButton,onClick:this.showCustomPanelModal},t("SELECT_CLUSTER")),_.default.createElement(v.Tooltip,{content:t("COMPONENT_PARAMETER_CONFIG"),placement:"topLeft"},_.default.createElement(v.Button,{type:"control",iconType:"light",className:j.default.mainWhizardSettingButton,icon:"cogwheel",onClick:this.showWhizardConfigModal})))),_.default.createElement(I.default,{resources:this.store.baseResourcesSummary,showResourceRankModal:this.showRankModal}),_.default.createElement("div",{className:j.default.customWrapper},_.default.createElement(D.default,{monitorData:this.store.monitorData}),this.hasAlerting&&_.default.createElement(N.default,{resources:this.store.alertData,alerts:this.state.alerts,originClusterList:this.state.originClusterList}),_.default.createElement(L.default,null))),_.default.createElement("div",{className:j.default.clustersListWrapper},_.default.createElement("div",{className:j.default.clustersListHeader},_.default.createElement("p",null,t("CLUSTER_PL")),_.default.createElement("div",{className:j.default.clusterShowTypeTabs},_.default.createElement(v.RadioGroup,{mode:"button",buttonWidth:32,value:this.state.gridType,onChange:this.handleGridType},_.default.createElement(v.RadioButton,{value:"row",key:"row"},_.default.createElement(v.Icon,{name:"grid-row",size:16})),_.default.createElement(v.RadioButton,{value:"list",key:"list"},_.default.createElement(v.Icon,{name:"grid-list",size:16}))))),_.default.createElement("div",{className:j.default.clustersList},this.state.selectedClusterList.map((function(t){return _.default.createElement(M.default,{key:t.uid,gridType:e.state.gridType,tagGroupList:e.tagsStore.tags,clusterDetail:t})}))))),_.default.createElement(w.default,{visible:this.state.customPanelModalVisible,onOk:this.setClusters,onCancel:this.hideCustomPanelModal,clusters:this.store.clusters}))}},{key:"hasAlerting",get:function(){return globals.app.hasKSModule("whizard")&&globals.app.hasKSModule("whizard-alerting")}}]),r}(_.Component))||i)||i)||i;a.default=U},4343:function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(16),a(9),a(4),a(22),a(196),a(23),a(17),a(110),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(9),a(4),a(22),a(196),a(23),a(57),a(17),a(110);var n=r(a(43));a(41);var u,l,o,c,i,s,d=r(a(44)),f=r(a(65)),p=r(a(36)),m=r(a(37)),h=r(a(88)),v=r(a(55)),y=r(a(56)),g=r(a(51)),_=r(a(49)),E=(r(a(66)),a(14)),b=a(52);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var O=(u=function(e){(0,v.default)(u,e);var t,a,r=S(u);function u(){var e;(0,p.default)(this,u);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a)),(0,f.default)(e,"isSubmitting",l,(0,h.default)(e)),(0,f.default)(e,"configs",o,(0,h.default)(e)),(0,f.default)(e,"storage",c,(0,h.default)(e)),(0,f.default)(e,"name",i,(0,h.default)(e)),e.getConfigsApi=function(){return"".concat(e.apiVersion,"/configs/global")},e.getStorageApi=function(t){return"".concat(e.apiVersion,"/configs/storage").concat(t?"/".concat(t):"")},(0,f.default)(e,"submitting",s,(0,h.default)(e)),e}return(0,m.default)(u,[{key:"fetchConfigs",value:(a=(0,d.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.configs.isLoading=!0,e.next=3,(0,b.to)(request.get(this.getConfigsApi()),{},{},(function(e,t){return e?{}:t}));case 3:return t=e.sent,this.configs={data:t,isLoading:!1},e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchStorage",value:(t=(0,d.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storage.isLoading=!0,e.next=3,(0,b.to)(request.get(this.getStorageApi(this.name),{},{},(function(e,t){return e?{}:t})));case 3:return t=e.sent,this.storage={data:t,isLoading:!1},e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"createConfigs",value:function(e){return this.submitting(request.post(this.getConfigsApi(),e))}},{key:"updateConfigs",value:function(e){return this.submitting(request.put(this.getConfigsApi(),e))}},{key:"createStorage",value:function(e){return this.submitting(request.post(this.getStorageApi(),e))}},{key:"updateStorage",value:function(e){return this.submitting(request.put(this.getStorageApi(this.name),e))}},{key:"deleteStorage",value:function(){return this.submitting(request.delete(this.getStorageApi(this.name)))}},{key:"verifyStorage",value:function(e){return this.submitting(request.post("".concat(this.getStorageApi(this.name),"/verify"),e))}},{key:"apiVersion",get:function(){return"kapis/monitoring.observability.kubesphere.io/v1alpha1"}}]),u}(r(a(883)).default),l=(0,_.default)(u.prototype,"isSubmitting",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=(0,_.default)(u.prototype,"configs",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),c=(0,_.default)(u.prototype,"storage",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!1}}}),i=(0,_.default)(u.prototype,"name",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"remote"}}),(0,_.default)(u.prototype,"fetchConfigs",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchConfigs"),u.prototype),s=(0,_.default)(u.prototype,"submitting",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.isSubmitting=!0,setTimeout((function(){t.catch((function(){})).finally((function(){e.isSubmitting=!1}))}),500),t}}}),(0,_.default)(u.prototype,"fetchStorage",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchStorage"),u.prototype),(0,_.default)(u.prototype,"createConfigs",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"createConfigs"),u.prototype),(0,_.default)(u.prototype,"updateConfigs",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"updateConfigs"),u.prototype),(0,_.default)(u.prototype,"createStorage",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"createStorage"),u.prototype),(0,_.default)(u.prototype,"updateStorage",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"updateStorage"),u.prototype),(0,_.default)(u.prototype,"deleteStorage",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"deleteStorage"),u.prototype),(0,_.default)(u.prototype,"verifyStorage",[E.action],Object.getOwnPropertyDescriptor(u.prototype,"verifyStorage"),u.prototype),u);t.default=O},4344:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.resources,r=e.alerts,n=e.originClusterList,u=(0,o.useCallback)((function(){var e=(0,f.toJS)(a.data),r=(0,d.getLastMonitoringData)(e);return{title:"GLOBAL_ALERTS",total:h(r.clusters_alerts_total),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#CA2621","#F5A623","#EFF4F9"],cx:55,data:[{name:t("ALERT_RULE_FIRING"),value:h(r.clusters_alerts_firing_total)},{name:t("ALERT_RULE_PENDING"),value:h(r.clusters_alerts_pending_total)}]}]}}),[a]),h=(0,o.useCallback)((function(e){return parseFloat((0,s.default)(e,"value[1]",0))}),[]),v=(0,o.useCallback)((function(){var e=(0,f.toJS)(a.data),r=(0,d.getLastMonitoringData)(e);return[{category:"criticalAlert",data:(0,s.default)(e,"clusters_alerts_critical_total.data.result"),title:t("CRITICAL_ALERT"),unit:"",legend:[t("CRITICAL_ALERT")],used:h(r.clusters_alerts_critical_total),areaColors:["red"]},{category:"errorAlert",data:(0,s.default)(e,"clusters_alerts_error_total.data.result"),title:t("ERROR_ALERT"),unit:"",legend:[t("ERROR_ALERT")],used:h(r.clusters_alerts_error_total),areaColors:["yellow"]},{category:"warningAlert",data:(0,s.default)(e,"clusters_alerts_warning_total.data.result"),title:t("WARNING_ALERT"),legend:[t("WARNING_ALERT")],unit:"",used:h(r.clusters_alerts_warning_total),areaColors:["orange"]},{category:"infoAlert",data:(0,s.default)(e,"clusters_alerts_info_total.data.result"),title:t("INFO_ALERT"),legend:[t("INFO_ALERT")],unit:"",used:h(r.clusters_alerts_info_total),areaColors:["darkGray"]}]}),[a]);return o.default.createElement(i.Loading,{spinning:a.isLoading},o.default.createElement("div",{className:m.default.alertStatus},o.default.createElement("div",{className:m.default.alertWrapper},o.default.createElement("div",{className:m.default.title},o.default.createElement("span",{className:m.default.titleText},t("GLOBAL_ALERTS")),o.default.createElement(i.Tooltip,{content:o.default.createElement("div",{className:m.default.alertTooltipWrapper},t("GLOBAL_ALERTS_TOOLTIP")),placement:"top"},o.default.createElement(i.Icon,{name:"question"}))),o.default.createElement("div",{className:m.default.charts},o.default.createElement("div",{className:m.default.pieCharts},o.default.createElement(c.MultiPie,{legendClassName:m.default.legendClassName,dataList:u().dataList}),o.default.createElement("div",{className:m.default.summary},o.default.createElement("p",null,u().total),o.default.createElement("p",null,1===u().total?t("ALERTING_MESSAGE"):t("ALERTING_MESSAGE_PL")))),o.default.createElement("div",{className:m.default.lineCharts},v().map((function(e){return o.default.createElement("div",{className:m.default.areaCharts,key:e.category},o.default.createElement(c.MediumArea,(0,l.default)({},(0,d.getAreaChartOps)(e),{key:e.title,width:"100%",height:60,renderTitle:function(){return o.default.createElement("div",{className:m.default.areaTitle},o.default.createElement("p",null,e.title),o.default.createElement("b",null,e.used))},top:4})))}))))),o.default.createElement(p.default,{alerts:r,originClusterList:n})))};var l=u(r(315));r(18),r(436);var o=n(r(0)),c=r(798),i=r(186),s=u(r(26)),d=r(794),f=r(14),p=u(r(4345)),m=u(r(4349))},4345:function(e,a,r){"use strict";r(15);var n=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18),r(28);var u=n(r(30)),l=n(r(0)),o=n(r(63)),c=r(239),i=n(r(3)),s=r(186),d=n(r(1103)),f=n(r(4346)),p=n(r(4348));var m=(0,c.inject)("rootStore")((function(e){var a=e.rootStore,r=e.alerts,n=e.originClusterList;return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:p.default.alertListWrapper},l.default.createElement("div",{className:(0,i.default)(p.default.alertLists,(0,u.default)({},"".concat(p.default.alertEmpty),(0,o.default)(r)))},(0,o.default)(r)?l.default.createElement(d.default,{text:l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:p.default.title},t("NONE_ALERT")),l.default.createElement("div",{className:p.default.desc},t("ALERT_EMPTY_DESC"))),icon:l.default.createElement("div",{className:p.default.icon},l.default.createElement(s.Icon,{name:"loudspeaker",size:48}))}):l.default.createElement(l.default.Fragment,null,r.map((function(e,t){return l.default.createElement(f.default,{alert:e,allClusters:n,key:t})}))))),l.default.createElement("div",{className:p.default.more},l.default.createElement("div",{className:p.default.moreButton,onClick:function(){return a.routing.push("/whizard-telemetry/metrics/alerting/builtin-rules")}},t("VIEW_MORE"))))}));a.default=m},4346:function(e,a,r){"use strict";r(15);var n=r(20);r(31),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a,r,n,h=e.alert,v=e.allClusters.find((function(e){return e.name===h.cluster}));return d.default.createElement("div",{className:m.default.alertList},d.default.createElement("div",{className:m.default.time},(0,f.getLocalTime)((0,i.default)(h,"_originData.activeAt")).format("YYYY-MM-DD HH:mm:ss")),d.default.createElement(c.default,{data:(0,i.default)(h,"severity")}),d.default.createElement("div",{className:m.default.message,title:(0,i.default)(h,"_originData.annotations.summary","-")},(0,i.default)(h,"_originData.annotations.summary","-")),d.default.createElement("div",{className:m.default.message},d.default.createElement(o.default,{className:m.default.status,type:"pending"===h.state?"warning":"firing"===h.state?"critical":h.state,name:t("ALERT_RULE_".concat(h.state.toUpperCase()),{defaultValue:h.state})})),(0,f.showNameAndAlias)(v)&&d.default.createElement("div",{className:m.default.tagWrapper},d.default.createElement(l.Tag,{type:p.CLUSTER_GROUP_TAG_TYPE[null!==(a=null==v?void 0:v.group)&&void 0!==a?a:"production"]},d.default.createElement("span",{title:null!==(r=(0,f.showNameAndAlias)(v))&&void 0!==r?r:""},d.default.createElement(l.Icon,(0,u.default)({name:v&&!(0,s.default)(v.provider)?p.CLUSTER_PROVIDER_ICON[v.provider]:"kubernetes",size:16},"default"===p.CLUSTER_GROUP_TAG_TYPE[null!==(n=null==v?void 0:v.group)&&void 0!==n?n:"production"]?{type:"light"}:{})),(0,f.showNameAndAlias)(v)))))};var u=n(r(315));r(31),r(16),r(4);var l=r(186),o=n(r(795)),c=n(r(880)),i=n(r(26)),s=n(r(158)),d=n(r(0)),f=r(52),p=r(72),m=n(r(4347))},4347:function(e,t,a){e.exports={alertList:"_2J2uCN3Z1lqdxjkOYIw-0M",time:"_3tAWYf6VDdFdXUGhE-O-2I",message:"_3RDyBa7xSJ3EnCRyR4WVp6",tagWrapper:"N5AFctmFrZJhUqSzF4HOX"}},4348:function(e,t,a){e.exports={alertListWrapper:"_1VsvPfqgdx_zguP_eMz2Wz",alertLists:"_310xdOaW1eofPHMrTbd3BJ",alertEmpty:"_2uYPthCjSs_WU6vQLAJPu-",title:"BX2VtveqppmdUd3XQr4Ud",desc:"_2y_J3GDgNn5DSaXiKv4tPI",icon:"_33n11s6HH9qAEiM_4ANmnt",more:"_37Gaea1WTBxoYJf1o-gSRt",moreButton:"_2xrVFMYj5_ElDP0ZJmab5g"}},4349:function(e,t,a){e.exports={alertStatus:"_1fdoLfNT6Wj60vQzPviPGc",alertWrapper:"_3DT4YOpDdk_j2smtY2K3g9",title:"_3PNebSnxXcYYeeIp2X16rG",titleText:"_18nIFE3thA2S_UyGtC9Vca",charts:"_2OyWlvfLMTdboWbc-_MatN",pieCharts:"_3pHEkRZ12PY601AXix2Ipz",legendClassName:"_3ME04Z6WJ81iW7h1JVlU5i",summary:"_3UzLBuQI1X38Rns8aGygf9",lineCharts:"_36MLLNAnC5p4CHjHlrvTH6",areaCharts:"-Idx2xnemtkpNNU9_eYYE",areaTitle:"LY2kUIT9_ryWUTmSUyYrC",alertTooltipWrapper:"_1RPyKeb_O_qK7A89O7tXJU"}},4350:function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(84),r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(11),r(84),r(18),r(4);var u=n(r(315)),l=n(r(30)),o=n(r(0)),c=n(r(801)),i=r(52),s=n(r(3)),d=r(239),f=r(186),p=n(r(4351)),m=n(r(4356)),h=[{key:"cpu",icon:"cpu",title:t("CPU_USAGE"),unitType:"cpu"},{key:"memory",icon:"memory",title:t("MEMORY_USAGE"),unitType:"memory"},{key:"gpu",icon:"gpu",title:t("GPU_USAGE"),unitType:"gpu"},{key:"gpu_memory",icon:"computing",title:t("GRAPHICS_MEMORY_USAGE"),unitType:"memory"},{key:"pod",icon:"pod",title:t("POD_COUNT_TCAP")},{key:"disk",icon:"storage",title:t("DISK_USAGE"),unitType:"disk"}],v=(0,d.observer)((function(e){var t=e.className,a=e.monitorData,r=(0,i.hideGPUByLicense)(h);return o.default.createElement(f.Loading,{spinning:a.isLoading},o.default.createElement("div",{className:(0,s.default)(m.default.charts,t,(0,l.default)({},m.default.width,4===r.length))},r.map((function(e){return o.default.createElement(c.default,{key:e.key,className:m.default.chartItem},o.default.createElement(p.default,(0,u.default)({},e,{data:a.data.filter((function(t){return t&&t.resource===e.key}))[0],isShowDetail:["cpu","memory"].includes(e.key)})))}))))}));a.default=v},4351:function(e,a,r){"use strict";r(15);var n=r(20);r(6),r(320),r(190),r(98),r(316),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(96));r(6),r(320),r(190),r(98),r(4),r(316),r(7);var l=n(r(0)),o=r(186),c=r(794),i=r(72),s=n(r(4352)),d=n(r(4353)),f=n(r(4354)),p=function(e){var a,r,n=e.data,p=void 0===n?{data:[],resource:"cpu"}:n,m=e.title,h=e.isShowDetail,v=void 0===h||h,y=e.icon,g=null==p?void 0:p.resource,_=Object.values(null==p?void 0:p.data).sort((function(e,t){return t-e}))[0],E=(0,c.getSuitableUnit)(_,g),b={};Object.entries(null==p?void 0:p.data).forEach((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1],n=i.OBSERVABILITY_CLUSTERS_MERTIC_TYPE[g][a];n&&(b[n]=(0,c.getValueByUnit)(r,E)||0)}));var S=[{name:"used",value:null!==(a=b.used)&&void 0!==a?a:0,itemStyle:{fill:"#55BC8A"}},{name:"total",value:null!==(r=b.total-b.used)&&void 0!==r?r:100,itemStyle:{fill:"#EFF4F9"}}],O=b.total?(b.used/b.total*100).toFixed(2):0;return S.length<1?null:l.default.createElement("div",{className:d.default.chartCard},l.default.createElement("div",{className:d.default.chart},l.default.createElement(s.default,{data:S,innerRadius:"85%",outerRadius:"110%",width:140,height:120,startAngle:240,endAngle:-60})),l.default.createElement("div",{className:d.default.centerInfo},l.default.createElement(o.Icon,{name:y,size:32}),l.default.createElement("div",{className:d.default.percentValue},O," %")),l.default.createElement("div",{className:d.default.bottomInfo},l.default.createElement("div",{className:d.default.label},t(m)),l.default.createElement("div",{className:d.default.number},l.default.createElement("span",null,"core"===E?t("VALUE_CORES",{value:b.used}):t("VALUE_UNIT",{value:b.used,unit:E})),v&&l.default.createElement(o.Popper,{className:d.default.detailPopper,closeAfterClick:!1,content:l.default.createElement(f.default,{metric:b,merticType:g,unit:E})},l.default.createElement(o.Icon,{name:"eye",size:16})))))};a.default=p},4352:function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(315)),u=r(a(58)),l=r(a(36)),o=r(a(37)),c=r(a(55)),i=r(a(56)),s=r(a(51)),d=r(a(0)),f=r(a(1)),p=r(a(998)),m=r(a(1036)),h=r(a(1089));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.data,l=e.dataKey,o=e.innerRadius,c=void 0===o?"60%":o,i=e.outerRadius,s=void 0===i?"100%":i,f=(0,u.default)(e,["width","height","data","dataKey","innerRadius","outerRadius"]);return d.default.createElement(h.default,{width:t,height:a},d.default.createElement(m.default,(0,n.default)({data:r,dataKey:l,innerRadius:c,outerRadius:s,animationDuration:1e3},f),r.map((function(e){return d.default.createElement(p.default,(0,n.default)({key:"cell-".concat(e.name)},e.itemStyle,{strokeWidth:0}))}))))}}]),a}(d.default.Component);t.default=y,y.propTypes={width:f.default.oneOfType([f.default.string,f.default.number]),height:f.default.oneOfType([f.default.string,f.default.number])},y.defaultProps={width:100,height:100,dataKey:"value"}},4353:function(e,t,a){e.exports={chartCard:"_2GkSN9JabsV_920ynZUhze",chart:"_2VcIXuFDrztpYZOPuQNtHr",centerInfo:"_2Lq1MI5B1eEzId-9ICuza",percentValue:"NIO0ZfL70LTfL9Vzr6Xs6",bottomInfo:"_3pHrPK1hnVD58Boq2EOh6_",label:"_2dsUYjDvL2L-veagyqDs-L",number:"o5wA347xkcyjr6QeKX25o",detailPopper:"_21CwXRqS3qaHqr2OCrToca"}},4354:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.metric,r=e.merticType,n=e.unit,u=(0,o.useState)("pod"),d=(0,l.default)(u,2),f=d[0],p=d[1],m=(0,o.useState)({}),h=(0,l.default)(m,2),v=h[0],y=h[1];(0,o.useEffect)((function(){y({limits:a["".concat(f,"_limit")],requests:a["".concat(f,"_request")],total:a.total,used:a.used})}),[a]);var g=(0,o.useCallback)((function(e){p(e),y({limits:a["".concat(e,"_limit")],requests:a["".concat(e,"_request")],total:a.total,used:a.used})}),[a]);return o.default.createElement("div",{className:s.default.container},o.default.createElement("div",{className:s.default.header},o.default.createElement("div",{className:s.default.title},"cpu"===r?t("CPU_QUOTA_USAGE"):t("MEMORY_QUOTA_USAGE")),o.default.createElement(i.RadioGroup,{mode:"button",buttonWidth:96,value:f,onChange:g},o.default.createElement(i.RadioButton,{value:"pod",key:"pod"},t("CONTAINER")),o.default.createElement(i.RadioButton,{value:"namespace",key:"namespace"},t("PROJECT")))),o.default.createElement(c.default,{mertic:v,resourceType:f,unit:n}))};var l=u(r(96)),o=n(r(0)),c=u(r(1804)),i=r(186),s=u(r(4355))},4355:function(e,t,a){e.exports={container:"_2Bi4pV8TOCLzT9_Eo0ooQD",header:"_2Zn7T624HsgaWSIw9bP1ba",title:"_3KcIZSxEoCDBsObhnzU1w9"}},4356:function(e,t,a){e.exports={charts:"_1S5tRm6pSFuVCgTUpo8Oho",chartItem:"_2gyHY_fpim8SPgvu3rX8Rj"}},4357:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(187),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(187),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7);var u=n(r(315)),l=n(r(43)),o=n(r(30));r(41);var c,i=n(r(44)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(0)),v=r(239),y=r(186),g=r(798),_=n(r(3)),E=n(r(26)),b=n(r(63)),S=r(794),O=r(14),R=n(r(4358));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={oomkilled:"clusters_pod_oomkilled_count",pending:"clusters_pod_pending_count",evict:"clusters_pod_evicted_count",pod_total:"clusters_pod_count",pod_running:"clusters_pod_running_count",pod_succeeded:"clusters_pod_succeeded_count",pod_failed:"clusters_pod_failed_count",pod_unknown:"clusters_pod_unknown_count",guaranteed:"clusters_pod_qos_guaranteed_count",burstable:"clusters_pod_qos_burstable_count",bestEffort:"clusters_pod_qos_besteffort_count"},k=(0,v.inject)("observabilityStore")(c=(0,v.observer)(c=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).monitorStore=e.props.observabilityStore,e.state={params:{times:10,step:"48m"}},e.fetchData=function(){var t=(0,i.default)(l.default.mark((function t(a){return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((0,O.toJS)(e.monitorStore.clusters).length>0)){t.next=3;break}return t.next=3,e.monitorStore.fetchPodData(C(C(C({metrics:Object.values(P)},a),e.state.params),{},{resources:e.resourcesParam,fillZero:!0}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return parseFloat((0,E.default)(e,"value[1]",0))},e.renderChartTitle=function(e){var a=e.icon,r=e.used,n=e.title;return h.default.createElement("div",{className:R.default.chartTitle},h.default.createElement(y.Icon,{name:a,size:42}),h.default.createElement("div",{className:R.default.chartInfo},h.default.createElement("p",null,r),h.default.createElement("p",null,t(n))))},e.renderTooltipQos=function(){var e=h.default.createElement("div",{className:R.default.qosContent},h.default.createElement("p",null,t.html("QOS_GUARANTEED")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BURSTABLE")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BESTEFFORT")));return h.default.createElement(y.Tooltip,{content:e},h.default.createElement(y.Icon,{name:"question",size:16}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.dispose=(0,O.reaction)((function(){return e.monitorStore.clusters}),(function(){e.fetchData()}))}},{key:"componentWillUnmount",value:function(){this.dispose&&this.dispose()}},{key:"renderChart",value:function(e){var a=(0,S.getAreaChartOps)(e);return(0,b.default)(a.data)?h.default.createElement("p",{className:R.default.noData},t("NO_DATA")):h.default.createElement(g.MediumArea,(0,u.default)({},a,{noTitle:!0,top:4,height:48,width:"100%",key:e.title}))}},{key:"renderPie",value:function(e){return h.default.createElement(g.MultiPie,{legendClassName:R.default.legendClassName,dataList:e.dataList,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 166px)"}})}},{key:"render",value:function(){var e=this,a=this.monitorStore.PodData.isLoading;return h.default.createElement("div",{className:R.default.container},h.default.createElement("div",{className:R.default.header},h.default.createElement("div",{className:R.default.title},t("POD_PL"))),h.default.createElement(y.Loading,{spinning:a},h.default.createElement("div",{className:R.default.flexcontainer},h.default.createElement("div",{className:(0,_.default)(R.default.chartbox,R.default.status)},h.default.createElement("div",{className:R.default.chartbox},this.renderPieOption.map((function(a,r){var n=a.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement("div",{className:(0,_.default)(R.default.item_pie,R.default.item),key:r},h.default.createElement("div",{className:R.default.pie_title},t(a.title),h.default.createElement("span",{className:R.default.pie_title_tooltip},"QoS"===a.title&&e.renderTooltipQos())),h.default.createElement("div",{className:R.default.pie_box},n?h.default.createElement("div",{className:R.default.pieNoData},h.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),h.default.createElement("p",null,t("NO_DATA"))):h.default.createElement(h.default.Fragment,null,e.renderPie(a),h.default.createElement("div",{className:R.default.summary},h.default.createElement("p",null,a.total),h.default.createElement("p",null,t("ALL"))))))})))),h.default.createElement("div",{className:(0,_.default)(R.default.chartbox,R.default.right)},this.renderChartOption.map((function(t,a){return h.default.createElement("div",{className:(0,_.default)(R.default.item,R.default.areaChartItem),key:a},e.renderChartTitle(t),h.default.createElement("div",{className:R.default.chartBox},e.renderChart(t)))}))))))}},{key:"resourcesParam",get:function(){return this.monitorStore.clusters.map((function(e){return e.name}))}},{key:"metrics",get:function(){return(0,O.toJS)(this.monitorStore.PodData.data)}},{key:"renderChartOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{category:"oomkilled",title:"OOM_KILL_PODS",icon:"error",unit:"",legend:["OOM_KILL_PODS"],data:(0,E.default)(this.metrics,"".concat(P.oomkilled,".data.result")),used:this.getValue(e[P.oomkilled])},{category:"pending",title:"PENDING_PODS",icon:"history-duotone",unit:"",legend:["PENDING_PODS"],data:(0,E.default)(this.metrics,"".concat(P.pending,".data.result")),used:this.getValue(e[P.pending])},{category:"evict",title:"EVICTED_PODS",unit:"",legend:["EVICTED_PODS"],icon:"logout-right-duotone",data:(0,E.default)(this.metrics,"".concat(P.evict,".data.result")),used:this.getValue(e[P.evict])}]}},{key:"renderPieOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{title:"POD_STATUS",total:this.getValue(e[P.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#F5A623","#79879C","#CA2621","#E3E9EF","#EFF4F9"],data:[{name:t("RUNNING"),value:this.getValue(e[P.pod_running])},{name:t("PENDING"),value:this.getValue(e[P.pending])},{name:t("WHIZARD_MONITORING.SUCCEEDED"),value:this.getValue(e[P.pod_succeeded])},{name:t("FAILED"),value:this.getValue(e[P.pod_failed])},{name:t("UNKNOWN"),value:this.getValue(e[P.pod_unknown])}]}]},{title:"QoS",total:this.getValue(e[P.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#329DCE","#F5A623","#EFF4F9"],data:[{name:"Guaranteed",value:this.getValue(e[P.guaranteed])},{name:"Burstable",value:this.getValue(e[P.burstable])},{name:"BestEffort",value:this.getValue(e[P.bestEffort])}]}]}]}}]),r}(h.default.Component))||c)||c;a.default=k},4358:function(e,t,a){e.exports={container:"_2D4npaU7YPDW85p6WP30yH",flexcontainer:"_2uVJNz5stoDHLzHP0buq5_",header:"ltsZCVXPB5UZzjCAPRcQw",title:"_2td8Tc121fajHdAmGHvBMP",chartbox:"ctqOGhoxXWtaCk5EXAOdY",right:"EnM7mjoOWLpXOom0viNTM",status:"_1qTTW8qWoAF0moFN--m0mV",item:"_3WgGEFnsypxwk5HMTLqpDD",chartTitle:"_275-ogpvwB1RsqHVehF6Ag",chartInfo:"_12J2jtb5glzpOFGgfe_iVc",areaChartItem:"_24zAW2fxpY4ZJZzs3txe21",chartBox:"IPLdLnqvv2_Hw9MoWC8dP",noData:"_2fXAWh_sWNspO_WoCRh1nI",item_pie:"_1T2cZyPSuaiId2IsSmh4WY",pie_title:"_32y2_r_5bRr4BzlogH2Wbz",pie_title_tooltip:"_36QWBpykpHp1_oKh0Qm71A",pie_box:"_36YiDQkZcohJwXFM5aNw-S",legendClassName:"_3LsPNKFHkizNWAJdknASqW",pieNoData:"_1DaTmtphwgi5onvXO3fHWF",summary:"_2H7Uj1yZYoyUAQSOhozHEA"}},4359:function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(30));r(18),r(16);var l=n(r(0)),o=n(r(788)),c=n(r(801)),i=n(r(26)),s=r(14),d=r(186),f=r(239),p=n(r(3)),m=n(r(4360)),h=[{name:"cluster",icon:"cluster",title:"CLUSTER",more:!0},{name:"node",icon:"nodes",title:"NODE",more:!0},{name:"namespace",icon:"project",title:"PROJECT",more:!0},{name:"pod",icon:"pod",title:"POD",more:!0},{name:"deployment",icon:"backup",title:"DEPLOYMENT"},{name:"statefulset",icon:"stateful-set",title:"STATEFULSET"},{name:"daemonset",icon:"deamon-set",title:"DAEMONSET"},{name:"job",icon:"backup",title:"JOB"},{name:"cronjob",icon:"backup",title:"CRONJOB"},{name:"pvc",icon:"storage",title:"PERSISTENT_VOLUME_CLAIM_LOW"},{name:"service",icon:"appcenter",title:"SERVICE"},{name:"ingresses",icon:"loadbalancer",title:"ROUTE"}],v=(0,f.observer)((function(e){var a=e.resources,r=e.showResourceRankModal;return l.default.createElement(c.default,{className:m.default.resourceSummary},l.default.createElement(d.Loading,{spinning:a.isLoading},l.default.createElement("div",{className:m.default.wrapper},h.map((function(e){var n="cluster"===e.name?"clusters_count":"clusters_".concat(e.name,"_count"),c=(0,i.default)((0,s.toJS)(a),"data.".concat(n,".value.[1]"),0);return l.default.createElement("div",{className:(0,p.default)(m.default.wrapperItem,(0,u.default)({},m.default.wrapperItemHover,e.more)),key:e.name,onClick:function(){return e.more?r(e.name):void 0}},l.default.createElement(o.default,{noLink:!0,className:m.default.avatar,icon:e.icon,title:c,desc:t("1"===c?e.title:"".concat(e.title,"_PL")),iconSize:40}))})))))}));a.default=v},4360:function(e,t,a){e.exports={resourceSummary:"_1vcCZdKexNnfXYCBTFN8bI",wrapper:"_3989d40TDMXigrpfsexhb8",wrapperItem:"UvaGsWJ6TKbRJNBNf8sMV",wrapperItemHover:"_34HA-HXRa_aXepjsOCvrEm",avatar:"_1AaN-WlG-N_PXJbZxhDVae"}},4361:function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(31),r(18),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(30));r(11),r(31),r(18),r(16),r(4);var l=n(r(0)),o=r(72),c=n(r(788)),i=n(r(839)),s=n(r(3)),d=r(186),f=n(r(996)),p=r(924),m=r(52),h=n(r(4362)),v=n(r(4364)),y=function(e){var a,r=e.gridType,n=void 0===r?"row":r,y=e.clusterDetail,g=void 0===y?{}:y,_=e.tagGroupList,E=void 0===_?[]:_,b=o.CLUSTER_PROVIDER_ICON[g.provider]||"kubernetes",S=g.group,O="row"!==n;return l.default.createElement("div",{className:(0,s.default)(v.default.card,(0,u.default)({},"".concat(v.default.grid),O))},l.default.createElement("div",{className:v.default.header},l.default.createElement(l.default.Fragment,null,l.default.createElement(c.default,{className:v.default.headTitle,title:l.default.createElement("div",{className:v.default.avatarTitle},l.default.createElement("span",{className:v.default.avatarText,title:(0,m.showNameAndAlias)(g)},(0,m.showNameAndAlias)(g)),O&&S&&l.default.createElement(d.Tag,{type:o.CLUSTER_GROUP_TAG_TYPE[S]},t("ENV_".concat(S.toUpperCase()),{defaultValue:S}))),desc:l.default.createElement("div",{className:v.default.desc},l.default.createElement("span",{style:{marginRight:"8px"}},g.isHost?t("HOST_CLUSTER"):t("MEMBER_CLUSTER_SCAP")),!g.isReady&&l.default.createElement(f.default,{data:g,placement:"right",tooltipModifiers:{preventOverflow:{enabled:!1}}})),icon:b,iconSize:40,to:g.isReady?"/whizard-telemetry/".concat(g.name,"/overview"):""}),g.isReady&&l.default.createElement(i.default,{className:v.default.indicator,status:"ready"}))),O&&l.default.createElement("div",{className:v.default.content},l.default.createElement("div",{className:v.default.contentItem},l.default.createElement(h.default,{title:t("NODE_COUNT"),desc:g.nodeCount})),l.default.createElement("div",{className:v.default.contentItem},l.default.createElement(h.default,{title:t("KUBERNETES_VERSION"),desc:g.kubernetesVersion})),l.default.createElement("div",{className:v.default.contentItem},l.default.createElement(h.default,{className:v.default.groupTags,title:t("CLUSTER_TAGS"),desc:l.default.createElement(p.ClusterTagGroup,{className:v.default.clusterTagGroup,data:(null!==(a=g.tags)&&void 0!==a?a:[]).map((function(e){return(E||[]).find((function(t){return e.name===t.name}))})).filter(Boolean),empty:"-"})}))))};a.default=y},4362:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),u=r(a(3)),l=r(a(4363)),o=function(e){var t=e.title,a=e.desc,r=e.className;return n.default.createElement("div",{className:(0,u.default)(l.default.list,r)},n.default.createElement("div",{className:l.default.title},t),n.default.createElement("div",{className:l.default.desc},a))};t.default=o},4363:function(e,t,a){e.exports={list:"_1uK0REQlYus5fuAKXpZ86o",title:"OZTz0EpZEQuLmF4gvCpay",desc:"_18AbHIvIjaRK9hcaLlM7Ba"}},4364:function(e,t,a){e.exports={card:"_9jy1bJaTQRbsMMrSLjrXO",indicator:"Z_YYhFox6K3PUpA4cJ4oW",desc:"-Mb-U-yGhddZtV4wfS2N6",grid:"_2ClZmeh8HDEDyr796x3LrW",header:"_2JKKgEZVRihBixVXw-HaaG",content:"_3NmZE_Mv_VjwWxuWtoXPpi",contentItem:"_3iFXO8Slenc9ZBXihdia8X",groupTags:"_1VpQB7rxMX-2l2K89r5Ukd",clusterTagGroup:"_1pBblYRwLdwOfj3hOwNgw",avatarTitle:"iwIUC3r14tyi8ueg7dcP3",avatarText:"tWv9SN6Tj0Uh4Xd1qP-J-"}},4365:function(e,t,a){e.exports={contentWrapper:"-OhR4-URU3bA00K1pPm4K",rightWrapper:"_2pwhksJAvsPiuJCUFioxym",clustersListWrapper:"_1QQyhHRsrAxagH8wdVBV1s",collapse:"Hcdo4p6r_SIWCLHGAqVsL",mainTitleWrapper:"_3F0mxApuQXULwkK5ExRaLy",mainButtonWrapper:"_2Does8Ve-5ejbMvw4-6iFV",mainWhizardSettingButton:"_3KgNPr-GnecnByh6vaBk4o",mainFilterClusterButton:"_1MVgm5SuOhvTbgwLvjxh6h",clusterListButton:"_2oH1mGPWgzX-Jukxv-LIwb",clustersListHeader:"A6IJHNjuzW75uJA0C7QSq",clusterShowTypeTabs:"_19FA_uRjrDqa-nAyNmWcrV",customWrapper:"_1TZKMW3yWyo_ZWbsahTrMl",clustersList:"_277Ur4V8ZQzP1eWRAc69Mo"}},4366:function(e,a,r){"use strict";(function(e){var n=r(20),u=r(157);r(12),r(109),r(5),r(187),r(11),r(6),r(84),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(187),r(11),r(6),r(84),r(18),r(28),r(48),r(191),r(42),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var l=n(r(61)),o=n(r(315)),c=n(r(43)),i=n(r(30)),s=n(r(58));r(41);var d,f=n(r(44)),p=n(r(36)),m=n(r(37)),h=n(r(55)),v=n(r(56)),y=n(r(51)),g=u(r(0)),_=r(186),E=n(r(788)),b=n(r(795)),S=n(r(792)),O=u(r(793)),R=n(r(796)),T=n(r(26)),C=n(r(247)),A=r(14),P=r(52),k=r(878),N=r(832),D=n(r(1425)),w=n(r(438)),L=n(r(994)),I=n(r(1870)),M=n(r(1871));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var V=(0,O.default)({store:new D.default,module:"rules",authKey:"alert-rules",name:"ALERTING_POLICY"})(d=function(a){(0,h.default)(n,a);var r=U(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return(e=r.call.apply(r,[this].concat(u))).clusterStore=new w.default,e.state={type:"custom",allClusters:[]},e.getData=(0,f.default)(c.default.mark((function t(){var a,r,n,u,l=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=a.silent,n=(0,s.default)(a,["silent"]),u=e.props.store,r&&(u.list.silent=!0),t.next=5,u.fetchList(x(x(x({},e.props.match.params),n),{},{builtin:!1}));case 5:return t.next=7,e.props.store.fetchCount();case 7:u.list.silent=!1;case 8:case"end":return t.stop()}}),t)}))),e.getAllCluster=(0,f.default)(c.default.mark((function t(){var a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterStore.fetchList({limit:-1});case 2:a=t.sent,e.setState({allClusters:a});case 4:case"end":return t.stop()}}),t)}))),e.renderRestCluster=function(t){var a=g.default.createElement("div",{className:M.default.tipClusterList},t.map((function(t,a){return g.default.createElement(L.default,{key:"".concat(t,"-").concat(a),cluster:t,allClusters:e.state.allClusters})})));return g.default.createElement(_.Tooltip,{content:a,placement:"top"},g.default.createElement("span",{className:M.default.restText},t.length))},e.getColumns=function(a){var r=e.props.getFilteredValue;return e.state.allClusters.length>0?[{title:t("NAME"),dataIndex:"name",search:!0,render:function(t,r){return g.default.createElement(E.default,{avatar:"/assets/bell_gear_duotone.svg",title:(0,P.getDisplayName)(r),desc:r.description,className:M.default["table-icon"],to:"builtin"===a?"".concat(e.props.match.url,"/builtin/").concat(t):"".concat(e.props.match.url,"/").concat(t)})}},{title:t("POLICY_STATUS"),dataIndex:"enable",filters:e.getEnableFilter(),filteredValue:r("enable"),isHideable:!0,search:!0,width:"16%",render:function(e,a){return g.default.createElement(b.default,{className:M.default.status_icon,type:JSON.parse(a.enabled)?"active":"disabled",name:JSON.parse(a.enabled)?t("ENABLED"):t("DISABLED")})}},{title:t("RULE_STATUS"),dataIndex:"state",search:!0,filters:e.getStatus(),isHideable:!0,width:"16%",render:function(e,t){return g.default.createElement(I.default,{rulesStats:t.rulesStats})}},{title:t("CLUSTER"),dataIndex:"clusterSelector",isHideable:!0,with:"24.6%",render:function(a,r){var n=(0,T.default)(r,"_originData.spec.rules",[]),u=[];n.forEach((function(e){(0,T.default)(e,"clusterSelector.inValues",[]).length>0&&(u=u.concat(e.clusterSelector.inValues)),"{}"===JSON.stringify(e.clusterSelector)&&(u=u.concat("ALL_CLUSTERS"))}));var l=(0,C.default)(u).slice(0,3),o=(0,C.default)(u).slice(3);return u.length>0?g.default.createElement("div",{className:M.default.clusterLine},l.map((function(a,r){return"ALL_CLUSTERS"===a?g.default.createElement(_.Tag,{type:"secondary"},t("ALL_CLUSTERS")):g.default.createElement(L.default,{key:"".concat(a,"-").concat(r),cluster:a,allClusters:e.state.allClusters})})),o.length>0&&e.renderRestCluster(o)):"-"}},{title:t("RECENT_DETECT_TIME"),dataIndex:"lastEvaluation",isHideable:!0,width:"15.8%",render:function(e,t){var a=(0,T.default)(t._originDataWithStatus,"status.lastEvaluation");return g.default.createElement("span",null,a?(0,P.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-")}}]:[]},e.showCreate=function(){var a=e.props,r=a.module,n=a.routing;return e.props.trigger("alerting.multi.policy.create",{module:r,title:t("CREATE_ALERTING_POLICY"),success:n.query})},e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.getAllCluster()}},{key:"getStatus",value:function(){return k.ALERTING_STATUS.map((function(e){return{text:"disabled"===e?t("DISABLED"):t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getEnableFilter",value:function(){return[{text:t("ENABLED"),value:"true"},{text:t("DISABLED"),value:"false"}]}},{key:"getAlertingTypes",value:function(){return N.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=this.state.type;return g.default.createElement(O.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),g.default.createElement(S.default,(0,o.default)({},a,{icon:function(){return g.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"})},tips:this.tips,title:t("CUSTOM_POLICIES"),description:t("ALERTING_POLICY_DESC")})),g.default.createElement(R.default,(0,o.default)({},r,{enabledActions:this.enabledAction,rowKey:"name",itemActions:this.itemActions,columns:this.getColumns(n),tableActions:this.tableActions,onCreate:this.showCreate})))}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_PUSH_AN_ALARM_Q"),description:t("REQUESTS_FOR_PUSH_AN_ALARM_A")}]}},{key:"enabledAction",get:function(){var e=this.props.tableProps.enabledActions;return[].concat((0,l.default)(e),["view","manage","create","edit","delete"])}},{key:"itemActions",get:function(){var a=this.props,r=a.trigger,n=a.routing,u=a.match,l=a.name,o=this.state.type;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(a){r("multi.alerting.baseInfo.edit",{type:o,detail:a,module:e,cluster:u.params.cluster,namespace:u.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:n.query})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("multi.alerting.yaml.edit",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:n.query})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),action:"edit",onClick:function(e){r("multi.alerting.rule.edit",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,success:n.query})}},{key:"disablePolicy",icon:function(e){return JSON.parse(e.enabled)?"stop":"start"},text:function(e){return JSON.parse(e.enabled)?t("DISABLE"):t("ENABLE")},action:"edit",onClick:function(e){var a=JSON.parse(e.enabled);r(a?"multi.alarm.rule.update":"multi.enable.alarm.rule",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,resourceName:l,success:n.query,title:a?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY"),enabled:a})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("multi.alerting.rule.delete",{type:o,name:l,cluster:u.params.cluster,namespace:u.params.namespace,detail:e,success:n.query})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,r=e.trigger,n=e.name,u=e.store,o=e.match,c=e.routing,i=this.state.type,s=(0,A.toJS)(u.list.data),d=(0,A.toJS)(u.list.selectedRowKeys),f=s.filter((function(e){return d.includes(e.name)})).every((function(e){return!JSON.parse(e.enabled)})),p=s.filter((function(e){return d.includes(e.name)})).every((function(e){return JSON.parse(e.enabled)}));return x(x({},a.tableActions),{},{selectActions:[].concat((0,l.default)(a.tableActions.selectActions),[{key:"enable",text:t("ENABLE"),action:"edit",disabled:p,onClick:function(){r("enable.alerting.rule",{type:i,resourceName:n,cluster:o.params.cluster,namespace:o.params.namespace,title:t("ENABLE_ALERTING_POLICY"),enabled:!1,success:c.query,batchMode:!0})}},{key:"disable",text:t("DISABLE"),action:"edit",disabled:f,onClick:function(){r("alerting.rule.update",{type:i,resourceName:n,cluster:o.params.cluster,namespace:o.params.namespace,enabled:!0,success:c.query,batchMode:!0})}}])})}},{key:"resetPolicy",get:function(){var e=this.props,a=e.match,r=e.trigger,n=e.routing,u=this.state.type;return{key:"reset",icon:"restart",text:t("RESET"),action:"edit",onClick:function(e){return r("multi.alarm.rule.reset",{type:u,cluster:a.params.cluster,detail:e,success:n.query})}}}}]),n}(g.Component))||d;a.default=V}).call(this,r(138)(e))},4367:function(e,t,a){e.exports={statusBox:"_8xcxT2VIzDPoaNgPkY2_X",tipContent:"_1HlZWaJgV7c_9kKYhh9QyM","li-inactive":"_1m0qWSy0IG9uFNhjT4Acwy","li-pending":"_1NTW6o14KHRl84_frSJ2B2","li-firing":"_3IlHX0t9wMXXZgwBg3d47C","li-disabled":"ZxH2aeUm1la4RPFjAjaMB",pending:"_2NPwcS1Shy5tcQGEgP7sGp",inactive:"cZ4_W2l7CMHagL_GMhiW2",firing:"_1Vo6K4cvYSnqxb_EhlYd-w",disabled:"_1J8ZVk_-XVVJgCn85NBkIJ",iconDisabled:"-UzRfoH0BNxoDI3uOv0r7"}},4368:function(e,a,r){"use strict";(function(e){var n=r(20),u=r(157);r(12),r(109),r(5),r(187),r(11),r(6),r(84),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(187),r(11),r(6),r(84),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var l=n(r(61)),o=n(r(315)),c=n(r(43)),i=n(r(30)),s=n(r(58));r(41);var d,f=n(r(44)),p=n(r(36)),m=n(r(37)),h=n(r(55)),v=n(r(56)),y=n(r(51)),g=u(r(0)),_=n(r(788)),E=n(r(795)),b=n(r(792)),S=u(r(793)),O=r(186),R=n(r(796)),T=n(r(26)),C=n(r(247)),A=r(14),P=r(52),k=r(878),N=r(832),D=n(r(1425)),w=n(r(438)),L=n(r(994)),I=n(r(1870)),M=n(r(1871));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var V=(0,S.default)({store:new D.default,module:"rules",authKey:"alert-rules",name:"ALERTING_POLICY"})(d=function(a){(0,h.default)(n,a);var r=U(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return(e=r.call.apply(r,[this].concat(u))).clusterStore=new w.default,e.state={type:"builtin",allClusters:[]},e.getData=(0,f.default)(c.default.mark((function t(){var a,r,n,u,l=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=a.silent,n=(0,s.default)(a,["silent"]),u=e.props.store,r&&(u.list.silent=!0),t.next=5,u.fetchList(x(x(x({},e.props.match.params),n),{},{builtin:!0}));case 5:return t.next=7,e.props.store.fetchCount();case 7:u.list.silent=!1;case 8:case"end":return t.stop()}}),t)}))),e.getAllCluster=(0,f.default)(c.default.mark((function t(){var a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterStore.fetchList({limit:-1});case 2:a=t.sent,e.setState({allClusters:a});case 4:case"end":return t.stop()}}),t)}))),e.renderRestCluster=function(t){var a=g.default.createElement("div",{className:M.default.tipClusterList},t.map((function(t,a){return g.default.createElement(L.default,{key:"".concat(t,"-").concat(a),cluster:t,allClusters:e.state.allClusters})})));return g.default.createElement(O.Tooltip,{content:a,placement:"top"},g.default.createElement("span",{className:M.default.restText},t.length))},e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",search:!0,render:function(t,a){return g.default.createElement(_.default,{avatar:"/assets/bell_gear_duotone.svg",title:(0,P.getDisplayName)(a),desc:a.description,className:M.default["table-icon"],to:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("POLICY_STATUS"),dataIndex:"enable",filters:e.getEnableFilter(),filteredValue:a("enable"),isHideable:!0,search:!0,width:"16%",render:function(e,a){return g.default.createElement(E.default,{className:M.default.status_icon,type:a.enabled&&JSON.parse(a.enabled)?"active":"disabled",name:a.enabled&&JSON.parse(a.enabled)?t("ENABLED"):t("DISABLED")})}},{title:t("RULE_STATUS"),dataIndex:"state",search:!0,filters:e.getStatus(),isHideable:!0,width:"16%",render:function(e,t){return g.default.createElement(I.default,{rulesStats:t.rulesStats})}},{title:t("CLUSTER"),dataIndex:"clusterSelector",isHideable:!0,with:"24.6%",render:function(a,r){var n=(0,T.default)(r,"_originData.spec.rules",[]),u=[];n.forEach((function(e){(0,T.default)(e,"clusterSelector.inValues",[]).length>0&&(u=u.concat(e.clusterSelector.inValues))}));var l=(0,C.default)(u).slice(0,3),o=(0,C.default)(u).slice(3);return u.length>0?g.default.createElement("div",{className:M.default.clusterLine},l.map((function(t,a){return g.default.createElement(L.default,{key:"".concat(t,"-").concat(a),cluster:t,allClusters:e.state.allClusters})})),o.length>0&&e.renderRestCluster(o)):g.default.createElement(O.Tag,{type:"secondary"},t("ALL_CLUSTERS"))}},{title:t("RECENT_DETECT_TIME"),dataIndex:"lastEvaluation",isHideable:!0,width:"15.8%",render:function(e,t){var a=(0,T.default)(t._originDataWithStatus,"status.lastEvaluation");return g.default.createElement("span",null,a?(0,P.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-")}}]},e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.getAllCluster()}},{key:"getStatus",value:function(){return k.ALERTING_STATUS.map((function(e){return{text:"disabled"===e?t("DISABLED"):t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getEnableFilter",value:function(){return[{text:t("ENABLED"),value:"true"},{text:t("DISABLED"),value:"false"}]}},{key:"getAlertingTypes",value:function(){return N.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return g.default.createElement(S.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),g.default.createElement(b.default,(0,o.default)({},a,{icon:function(){return g.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"})},tips:this.tips,title:t("BUILT_IN_POLICIES"),description:t("ALERTING_POLICY_DESC")})),g.default.createElement(R.default,(0,o.default)({},r,{enabledActions:this.enabledAction,rowKey:"name",itemActions:this.itemActions,columns:this.getColumns(),tableActions:this.tableActions,onCreate:null})))}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_PUSH_AN_ALARM_Q"),description:t("REQUESTS_FOR_PUSH_AN_ALARM_A")}]}},{key:"enabledAction",get:function(){var e=[].concat((0,l.default)(this.props.tableProps.enabledActions),["view"]);return e="custom"===this.state.type?[].concat((0,l.default)(e),["manage","create","edit"]):[].concat((0,l.default)(e),["edit"])}},{key:"itemActions",get:function(){var a=this.props,r=a.trigger,n=a.routing,u=a.match,l=a.name,o=this.state.type;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(a){r("multi.alerting.baseInfo.edit",{type:o,detail:a,module:e,cluster:u.params.cluster,namespace:u.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:n.query})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("multi.alerting.yaml.edit",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:n.query})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),action:"edit",onClick:function(e){r("multi.alerting.rule.edit",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,success:n.query})}},{key:"disablePolicy",icon:function(e){return JSON.parse(e.enabled)?"stop":"start"},text:function(e){return JSON.parse(e.enabled)?t("DISABLE"):t("ENABLE")},action:"edit",onClick:function(e){var a=JSON.parse(e.enabled);r(a?"multi.alarm.rule.update":"multi.enable.alarm.rule",{type:o,detail:e,cluster:u.params.cluster,namespace:u.params.namespace,resourceName:l,success:n.query,title:a?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY"),enabled:a})}},{key:"reset",icon:"restart",text:t("RESET"),action:"edit",onClick:function(e){return r("multi.alarm.rule.reset",{type:o,cluster:u.params.cluster,detail:e,success:n.query})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,r=e.trigger,n=e.name,u=e.store,o=e.match,c=e.routing,i=this.state.type,s=(0,A.toJS)(u.list.data),d=(0,A.toJS)(u.list.selectedRowKeys),f=s.filter((function(e){return d.includes(e.name)})).every((function(e){return!JSON.parse(e.enabled)})),p=s.filter((function(e){return d.includes(e.name)})).every((function(e){return JSON.parse(e.enabled)}));return x(x({},a.tableActions),{},{selectActions:[].concat((0,l.default)(a.tableActions.selectActions),[{key:"enable",text:t("ENABLE"),action:"edit",disabled:p,onClick:function(){r("enable.alerting.rule",{type:i,resourceName:n,cluster:o.params.cluster,namespace:o.params.namespace,title:t("ENABLE_ALERTING_POLICY"),enabled:!1,success:c.query,batchMode:!0})}},{key:"disable",text:t("DISABLE"),action:"edit",disabled:f,onClick:function(){r("alerting.rule.update",{type:i,resourceName:n,cluster:o.params.cluster,namespace:o.params.namespace,enabled:!0,success:c.query,batchMode:!0})}}])})}}]),n}(g.Component))||d;a.default=V}).call(this,r(138)(e))},4369:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var l=n(r(315)),o=n(r(43));r(41);var c,i=n(r(44)),s=n(r(30)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(795)),y=n(r(790)),g=n(r(880)),_=n(r(792)),E=u(r(793)),b=n(r(796)),S=r(832),O=n(r(451)),R=n(r(26)),T=n(r(994)),C=n(r(0)),A=r(433),P=n(r(1237)),k=n(r(438)),N=r(52),D=r(878),w=r(72),L=n(r(1872));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var x=(0,E.default)({store:new P.default,module:"alerts",name:"ALERTING_MESSAGE"})(c=function(e){(0,p.default)(r,e);var a=j(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).clusterStore=new k.default,e.state={allClusters:[],type:"custom"},e.getData=function(t){e.props.store.fetchList(M(M(M({},e.props.match.params),t),{},{sortBy:"activeAt",type:e.state.type}))},e.getAllCluster=(0,i.default)(o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterStore.fetchList({limit:-1});case 2:a=t.sent,e.setState({allClusters:a});case 4:case"end":return t.stop()}}),t)}))),e.getResourceType=function(e){var a=(0,O.default)(e);return t("ALERT_TYPE",{type:t(a)})},e.getColumns=function(){var a=e.props,r=a.getFilteredValue,n=a.getSortOrder,u=e.state.allClusters,l=u.map((function(e){return{text:e.name,value:e.name}}));return u.length<1?[]:[{title:t("MESSAGE"),dataIndex:"annotations.message",width:"20%",render:function(e,t){return C.default.createElement(y.default,{icon:"loudspeaker",title:(0,R.default)(t,"_originData.annotations.summary"),description:(0,R.default)(t,"_originData.annotations.message")||(0,R.default)(t,"_originData.annotations.description","-")})}},{title:t("STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:r("state"),isHideable:!0,search:!0,width:"9.5%",render:function(e){return C.default.createElement(v.default,{className:L.default.status,type:"pending"===e?"warning":"firing"===e?"critical":e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:r("labels.severity"),isHideable:!0,search:!0,width:"9.5%",render:function(e,t){var a=t.severity;return C.default.createElement(g.default,{data:a})}},{title:t("ALERTING_RULE_NAME"),dataIndex:"labels.alertname",filteredValue:r("labels.alertname"),isHideable:!0,width:"9.5%",search:!0,render:function(e,t){return t.alertname}},{title:t("ALERTING_POLICY"),dataIndex:"rule_group",isHideable:!0,width:"9.5%",render:function(e){return C.default.createElement(A.Link,{to:"/whizard-telemetry/metrics/alerting/custom-rules/".concat(e,"/rules")},e)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"16%",render:function(a,r){if("template"!==r.rule_type)return"-";var n=(0,D.getAlertingResource)(r),u=n.module,l=n.name,o=n.namespace;return u?"hpas"===u?C.default.createElement("span",null,t(w.MODULE_KIND_MAP[u]),": ",l):C.default.createElement(A.Link,{to:"".concat(e.getPrefix({cluster:r.cluster,namespace:o}),"/").concat(u,"/").concat(l),className:L.default.ruleNameLink,title:"".concat(t(w.MODULE_KIND_MAP[u].toUpperCase()),": ").concat(l)},t(w.MODULE_KIND_MAP[u].toUpperCase()),": ",l):"-"}},{title:t("CLUSTER"),dataIndex:"cluster",search:!0,filters:l,filteredValue:r("cluster"),isHideable:!0,width:"12%",render:function(e){return e&&""!==e?C.default.createElement(T.default,{cluster:e,allClusters:u}):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:"14%",sorter:!0,sortOrder:n("activeAt"),render:function(e){return(0,N.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t}),this.getAllCluster()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,u=r.namespace,l=r.workspace;return t=t||n,a=a||u,"".concat(l?"/".concat(l):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"getTableProps",value:function(){return{tableActions:M(M({},this.props.tableProps.tableActions),{},{selectActions:[]}),emptyProps:{desc:t("ALERTING_MESSAGE_EMPTY_DESC")}}}},{key:"getAlertingTypes",value:function(){return S.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getStatus",value:function(){return["pending","firing"].map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return C.default.createElement(E.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),C.default.createElement(_.default,(0,l.default)({},a,{tips:this.tips,icon:"loudspeaker",title:t("WHIZARD_MONITORING.CUSTOM_ALERTING_PL"),description:t("ALERT_MESSAGE_DESC")})),C.default.createElement(b.default,(0,l.default)({},r,this.getTableProps(),{rowKey:"id",itemActions:[],columns:this.getColumns(),onCreate:this.showCreate,showKeywords:!0})))}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_TRIGGER_AN_ALARM_Q"),description:t("REQUESTS_FOR_TRIGGER_AN_ALARM_A")}]}}]),r}(C.default.Component))||c;a.default=x},4370:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(7);var l=n(r(315)),o=n(r(43));r(41);var c,i=n(r(44)),s=n(r(30)),d=n(r(36)),f=n(r(37)),p=n(r(55)),m=n(r(56)),h=n(r(51)),v=n(r(795)),y=n(r(790)),g=n(r(880)),_=n(r(792)),E=u(r(793)),b=n(r(796)),S=r(832),O=n(r(451)),R=n(r(26)),T=n(r(994)),C=n(r(0)),A=r(433),P=n(r(1237)),k=n(r(438)),N=r(52),D=r(878),w=r(72),L=n(r(1872));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var x=(0,E.default)({store:new P.default,module:"alerts",name:"ALERTING_MESSAGE"})(c=function(e){(0,p.default)(r,e);var a=j(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).clusterStore=new k.default,e.state={allClusters:[],type:"builtin"},e.getData=function(t){e.props.store.fetchList(M(M(M({},e.props.match.params),t),{},{sortBy:"activeAt",type:e.state.type}))},e.getAllCluster=(0,i.default)(o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterStore.fetchList({limit:-1});case 2:a=t.sent,e.setState({allClusters:a});case 4:case"end":return t.stop()}}),t)}))),e.getResourceType=function(e){var a=(0,O.default)(e);return t("ALERT_TYPE",{type:t(a)})},e.getColumns=function(){var a=e.props,r=a.getFilteredValue,n=a.getSortOrder,u=e.state.allClusters,l=u.map((function(e){return{text:e.name,value:e.name}}));return u.length<1?[]:[{title:t("MESSAGE"),dataIndex:"annotations.message",width:"20%",render:function(e,t){return C.default.createElement(y.default,{icon:"loudspeaker",title:(0,R.default)(t,"_originData.annotations.summary"),description:(0,R.default)(t,"_originData.annotations.message")||(0,R.default)(t,"_originData.annotations.description","-")})}},{title:t("STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:r("state"),isHideable:!0,search:!0,width:"9.5%",render:function(e){return C.default.createElement(v.default,{className:L.default.status,type:"pending"===e?"warning":"firing"===e?"critical":e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:r("labels.severity"),isHideable:!0,search:!0,width:"9.5%",render:function(e,t){var a=t.severity;return C.default.createElement(g.default,{data:a})}},{title:t("ALERTING_RULE_NAME"),dataIndex:"labels.alertname",filteredValue:r("labels.alertname"),isHideable:!0,width:"9.5%",search:!0,render:function(e,t){return t.alertname}},{title:t("ALERTING_POLICY"),dataIndex:"rule_group",isHideable:!0,width:"9.5%",render:function(e){return C.default.createElement(A.Link,{to:"/whizard-telemetry/metrics/alerting/builtin-rules/".concat(e,"/rules")},e)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"16%",render:function(a,r){if("template"!==r.rule_type)return"-";var n=(0,D.getAlertingResource)(r),u=n.module,l=n.name,o=n.namespace;return u?"hpas"===u?C.default.createElement("span",null,t(w.MODULE_KIND_MAP[u]),": ",l):C.default.createElement(A.Link,{to:"".concat(e.getPrefix({cluster:r.cluster,namespace:o}),"/").concat(u,"/").concat(l),className:L.default.ruleNameLink,title:"".concat(t(w.MODULE_KIND_MAP[u].toUpperCase()),": ").concat(l)},t(w.MODULE_KIND_MAP[u].toUpperCase()),": ",l):"-"}},{title:t("CLUSTER"),dataIndex:"cluster",search:!0,filters:l,filteredValue:r("cluster"),isHideable:!0,width:"12%",render:function(e){return e&&""!==e?C.default.createElement(T.default,{cluster:e,allClusters:u}):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:"14%",sorter:!0,sortOrder:n("activeAt"),render:function(e){return(0,N.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t}),this.getAllCluster()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,u=r.namespace,l=r.workspace;return t=t||n,a=a||u,"".concat(l?"/".concat(l):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"getTableProps",value:function(){return{tableActions:M(M({},this.props.tableProps.tableActions),{},{selectActions:[]}),emptyProps:{desc:t("ALERTING_MESSAGE_EMPTY_DESC")}}}},{key:"getAlertingTypes",value:function(){return S.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getStatus",value:function(){return["pending","firing"].map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"render",value:function(){var e=this.props,a=e.match,r=e.bannerProps,n=e.tableProps,u=a.params.namespace;return C.default.createElement(E.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),C.default.createElement(_.default,(0,l.default)({},r,{tips:this.tips,tabs:u?{}:this.tabs,icon:"loudspeaker",title:t("WHIZARD_MONITORING.BUILT_IN_ALERTING_PL"),description:t("ALERT_MESSAGE_DESC")})),C.default.createElement(b.default,(0,l.default)({},n,this.getTableProps(),{rowKey:"id",itemActions:[],columns:this.getColumns(),onCreate:this.showCreate,showKeywords:!0})))}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_TRIGGER_AN_ALARM_Q"),description:t("REQUESTS_FOR_TRIGGER_AN_ALARM_A")}]}}]),r}(C.default.Component))||c;a.default=x},4371:function(e,a,r){"use strict";var n=r(20),u=r(157);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(43));r(41);var c,i,s=n(r(44)),d=n(r(30)),f=n(r(36)),p=n(r(37)),m=n(r(55)),h=n(r(56)),v=n(r(51)),y=n(r(49)),g=n(r(839)),_=n(r(792)),E=r(14),b=u(r(793)),S=n(r(796)),O=r(72),R=r(186),T=n(r(4372)),C=n(r(0)),A=r(433),P=n(r(4374)),k=n(r(438)),N=r(52),D=n(r(936)),w=n(r(4375));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var j=(0,b.default)({store:new P.default,module:"pods",name:"POD"})(c=(0,D.default)(["event"])((i=function(e){(0,m.default)(n,e);var a,r=M(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return(e=r.call.apply(r,[this].concat(u))).clusterStore=new k.default,e.state={cluster:""},e.getData=function(t){e.props.store.fetchList(I({metrics_filter:"pod_status_info"},t))},e.getColumns=function(){return[{title:t("NAME"),dataIndex:"pod",search:!0,width:"20%",render:e.renderAvatar},{title:t("STATUS"),dataIndex:"phase",filters:e.getPodsStatus(),isHideable:!0,search:!0,width:"8%",minWidth:80,render:function(e){return C.default.createElement("span",null,t("Succeeded"===e?"WHIZARD_MONITORING.SUCCEEDED":e.toUpperCase()))}},{title:t("NODE_SI"),dataIndex:"node",isHideable:!0,search:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"pod_ip",search:!0,isHideable:!0,width:120},{title:t("PROJECT"),dataIndex:"namespace",search:!0,isHideable:!0,width:"15%"},{title:t("CLUSTER"),dataIndex:"cluster",isHideable:!0,width:"10%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"pod_status_info",sorter:!0,isHideable:!0,width:150,render:function(e){return(0,N.getLocalTime)(new Date(1e3*e)).format("YYYY-MM-DD HH:mm:ss")}}]},e.renderAvatar=function(a,r){var n=e.props.module,u=r.phase,l=r.cluster,o=r.namespace;return C.default.createElement("div",{className:w.default.avatar},C.default.createElement("div",{className:w.default.icon},C.default.createElement(R.Icon,{name:O.ICON_TYPES[n],size:40}),C.default.createElement(g.default,{className:w.default.indicator,type:u,flicker:!0})),C.default.createElement("div",null,C.default.createElement(A.Link,{className:w.default.title,to:"/whizard-telemetry/".concat(l,"/projects/").concat(o,"/").concat(n,"/").concat(a,"/resource-status")},a),C.default.createElement("div",{className:w.default.desc},t("Succeeded"===u?"WHIZARD_MONITORING.SUCCEEDED":u.toUpperCase()))))},e.renderNode=function(e,a){var r=a.node,n=a.host_ip,u=a.cluster;if(!r)return"-";var l=t("NODE_IP",{node:r,ip:n});return C.default.createElement(A.Link,{to:"/whizard-telemetry/".concat(u,"/nodes/").concat(r,"/status")},l)},e.handleClusterChange=function(t){var a;e.setState({cluster:t});var r=e.props.tableProps;null==r||null===(a=r.tableActions)||void 0===a||a.onFetch({cluster:t,page:1,limit:10})},e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(a=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.clusterStore.fetchList();case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getPodsStatus",value:function(){return O.PODS_STATUS_NEW.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"renderCustomFilter",value:function(){var e=this.state.cluster;return C.default.createElement(T.default,{clusters:this.clusters,cluster:e,onChange:this.handleClusterChange})}},{key:"render",value:function(){var e=this,t=this.props,a=t.bannerProps,r=t.tableProps;return C.default.createElement(b.ListPage,(0,l.default)({},this.props,{getData:this.getData,noWatch:!0}),C.default.createElement(_.default,a),C.default.createElement(S.default,(0,l.default)({},r,{itemActions:[],columns:this.getColumns(),customFilter:this.renderCustomFilter(),onRefresh:function(){e.handleClusterChange("")}})))}},{key:"clusters",get:function(){return this.clusterStore.list.data.map((function(e){return{label:e.name,value:e.name,disabled:!e.isReady,cluster:e}}))}}]),n}(C.default.Component),(0,y.default)(i.prototype,"clusters",[E.computed],Object.getOwnPropertyDescriptor(i.prototype,"clusters"),i.prototype),c=i))||c)||c;a.default=j},4372:function(e,a,r){"use strict";r(15);var n=r(157),u=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l=u(r(36)),o=u(r(37)),c=u(r(55)),i=u(r(56)),s=u(r(51)),d=n(r(0)),f=r(186),p=u(r(996)),m=u(r(4373));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(e=a.call.apply(a,[this].concat(u))).valueRenderer=function(e){var a,r=null==e||null===(a=e.cluster)||void 0===a?void 0:a.name;return d.default.createElement("div",{title:r},t("CLUSTER_VALUE",{value:r}))},e.optionRenderer=function(e){var t=e.cluster.name;return d.default.createElement("div",{title:t},d.default.createElement("div",null,t),!e.cluster.isReady&&d.default.createElement("div",null,d.default.createElement(p.default,{data:e.cluster,noTip:!0})))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.clusters,n=e.onChange;return d.default.createElement(f.Select,{className:m.default.select,value:a,onChange:n,options:r,placeholder:t("WHIZARD_MONITORING.OBSERVABILITY_ALL_CLUSTERS"),valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,showTip:!0,clearable:!0})}}]),r}(d.Component);a.default=v},4373:function(e,t,a){e.exports={select:"Rf6lb3TjHi7wmweO8Mhjt",option:"_34Vlx13XSHu3AGmmQOWusd"}},4374:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(84),a(73),a(18),a(87),a(27),a(137),a(98),a(9),a(13),a(10),a(4),a(23),a(17),a(85),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(84),a(73),a(18),a(28),a(87),a(42),a(27),a(137),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(85),a(7);var n=r(a(43)),u=r(a(30)),l=r(a(96)),o=r(a(58));a(41);var c,i,s,d,f,p,m,h=r(a(44)),v=r(a(65)),y=r(a(36)),g=r(a(37)),_=r(a(88)),E=r(a(55)),b=r(a(56)),S=r(a(51)),O=r(a(49)),R=(r(a(66)),r(a(26))),T=r(a(902)),C=r(a(63)),A=a(52),P=a(14);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var w=(c=function(e){(0,E.default)(r,e);var t,a=D(r);function r(){var e;(0,y.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return e=a.call.apply(a,[this].concat(n)),(0,v.default)(e,"page",i,(0,_.default)(e)),(0,v.default)(e,"limit",s,(0,_.default)(e)),(0,v.default)(e,"sort_type",d,(0,_.default)(e)),(0,v.default)(e,"cluster",f,(0,_.default)(e)),(0,v.default)(e,"sort_metric",p,(0,_.default)(e)),e.getListUrl=function(){return"".concat(e.apiVersion,"/pod_metrics")},(0,v.default)(e,"changePagination",m,(0,_.default)(e)),e.handleResult=function(e){var t=(0,R.default)(e,"results",[]);return(0,C.default)(t)?[]:t.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.metric_name,r=(0,R.default)(t,"data.result")||[];return r.forEach((function(t,r){var n=e[r]||{},u=(0,R.default)(t,"value",[]),l=(0,R.default)(t,"metric",{});n[a]=u[1],Object.assign(n,l),e[r]=n})),e}),[])},e}return(0,g.default)(r,[{key:"fetchList",value:(t=(0,h.default)(n.default.mark((function e(){var t,a,r,u,c,i,s,d,f,p,m,h,v,y,g,_,E=this,b=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},a=t.cluster,r=t.pod,u=t.phase,c=t.pod_ip,i=t.node,s=t.namespace,d=t.limit,f=void 0===d?10:d,p=t.page,m=void 0===p?1:p,h=(0,o.default)(t,["cluster","pod","phase","pod_ip","node","namespace","limit","page"]),this.list.isLoading=!0,v={},a&&(v.cluster=a),s&&(v.namespace=s),r&&(v.pod=r),u&&(v.phase=u),c&&(v.pod_ip=c),i&&(v.node=i),(0,C.default)(v)||(h.custom_filter=Object.entries(v).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1];return E.precise.includes(a)?"".concat(a,'="').concat(r,'"'):"".concat(a,'=~".*').concat(r,'.*"')})).join(",")),h.sortBy&&(this.sort_metric=h.sortBy,delete h.sortBy,this.sort_type=void 0===h.ascending?"desc":"asc",delete h.ascending),f!==this.limit&&(this.limit=Number(f)),m!==this.page&&(this.page=Number(m)),y={type:this.rankRequestTag,page:this.page,limit:this.limit,sort_type:this.sort_type,sort_metric:this.sort_metric},e.next=16,(0,A.to)(request.get(this.fetchUrl,(0,T.default)(y,h)));case 16:return g=e.sent,_=this.handleResult(g),this.total=g.total_item,this.list.data=_,this.list.update(N(N({data:_,total:this.total},h),{},{limit:this.limit,page:this.page,isLoading:!1,filters:v})),e.abrupt("return",_);case 22:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/monitoring.kubesphere.io/v1beta1"}},{key:"precise",get:function(){return["phase"]}},{key:"fetchUrl",get:function(){return"".concat(this.apiVersion,"/pod_metrics")}},{key:"rankRequestTag",get:function(){return"rank"}},{key:"defaultParams",get:function(){return{type:this.rankRequestTag}}}]),r}(r(a(68)).default),i=(0,O.default)(c.prototype,"page",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=(0,O.default)(c.prototype,"limit",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=(0,O.default)(c.prototype,"sort_type",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"desc"}}),f=(0,O.default)(c.prototype,"cluster",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,O.default)(c.prototype,"sort_metric",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pod_status_info"}}),(0,O.default)(c.prototype,"fetchList",[P.action],Object.getOwnPropertyDescriptor(c.prototype,"fetchList"),c.prototype),m=(0,O.default)(c.prototype,"changePagination",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=t.page,n=t.limit;e.page=r,e.limit=n,e.fetchAll(a)}}}),c);t.default=w},4375:function(e,t,a){e.exports={avatar:"_21er6BS9HgiSzfcwvHodAW",icon:"_174me-_OsbOykXwfIqaCc4",indicator:"_3ZFAO1yLYiAVj9XiPPfXX-",title:"nibjOvK-zQ0cBDxKW3lWB",desc:"_2HPKwaweSs8lxYNis-wbOH"}},4376:function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(86),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(86),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(61)),c=n(r(30)),i=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=n(r(0)),h=r(14),v=r(239),y=n(r(26)),g=n(r(63)),_=r(186),E=n(r(795)),b=r(52),S=r(791),O=n(r(1425)),R=n(r(823)),T=n(r(4377)),C=n(r(4383));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,v.inject)("rootStore")(u=(0,v.observer)(u=(0,S.trigger)(u=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,u=new Array(n),l=0;l<n;l++)u[l]=arguments[l];return(e=a.call.apply(a,[this].concat(u))).store=new O.default,e.state={allClusters:[]},e.fetchData=function(t){var a=e.props.match.params,r=a.cluster,n=a.namespace,u=a.name;e.store.fetchDetail(P({cluster:r,namespace:n,name:u,type:e.type},t))},e.enabledAction=function(){var t=[].concat((0,o.default)(e.props.tableProps.enabledActions),["view"]);return t="custom"===e.state.type?[].concat((0,o.default)(t),["manage","create","edit"]):[].concat((0,o.default)(t),["edit"])},e.getOperations=function(){var a=e.props.match.params,r=a.cluster,n=a.namespace,u=(0,h.toJS)(e.store.detail),l=JSON.parse(u.enabled),o=[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),onClick:function(){return e.trigger("multi.alerting.baseInfo.edit",{type:e.type,cluster:r,namespace:n,detail:(0,h.toJS)(e.store.detail),module:e.store.module,title:t("EDIT_ALERTING_POLICY"),success:e.fetchData})}},{key:"disablePolicy",icon:l?"stop":"start",text:l?t("DISABLE"):t("ENABLE"),onClick:function(){e.trigger(l?"multi.alarm.rule.update":"multi.enable.alarm.rule",{type:e.type,resourceName:e.name,cluster:r,namespace:n,detail:u,success:e.fetchData,enabled:l,title:l?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY")})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),onClick:function(){e.trigger("multi.alerting.rule.edit",{type:e.type,cluster:r,namespace:n,detail:u,success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),onClick:function(){return e.trigger("multi.alerting.yaml.edit",{type:e.type,detail:u,cluster:r,namespace:n,success:e.fetchData})}}];return"builtin"===e.type?o.push(e.resetPolicy):o.push({key:"delete",icon:"trash",text:t("DELETE"),type:"danger",onClick:function(){return e.trigger("multi.alerting.rule.delete",{type:e.name,name:e.name,cluster:r,namespace:n,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}),o},e.getAttrs=function(){var a=(0,h.toJS)(e.store.detail);if(!(0,g.default)(a)){var r=(0,y.default)(a,"enabled"),n=(0,y.default)(a,"createTime"),u=(0,y.default)(a,"interval",""),l=(0,y.default)(a,"creator"),o=(0,y.default)(a,"evaluationTime");return[{name:t("POLICY_STATUS"),value:m.default.createElement(E.default,{className:C.default.icon,type:JSON.parse(r)?"active":"disabled",name:JSON.parse(r)?t("ENABLED"):t("DISABLED")})},{name:t("CHECK_INTERVAL"),value:""!==u?t({s:"TIME_S",m:"TIME_M",h:"TIME_H"}[u.slice(-1)],{num:u.slice(0,-1)}):"-"},{name:t("TIME_SPENT"),value:"-"!==o?t("TIME_S",{num:o}):"-"},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:""!==l?l:"-"}]}},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(_.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),icon:m.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"}),breadcrumbs:[{label:t("ALERTING_POLICY_PL"),url:this.listUrl}]};return m.default.createElement(R.default,(0,l.default)({stores:e,routes:(0,T.default)(this.props.match.path),allClusters:this.state.allClusters},a))}},{key:"module",get:function(){return"alert-rules"}},{key:"name",get:function(){return"ALERTING_POLICY"}},{key:"type",get:function(){return this.props.match.url.indexOf("builtin-rules")>0?"builtin":"custom"}},{key:"listUrl",get:function(){var e=this.type;return"/whizard-telemetry/metrics/alerting/".concat(e,"-rules")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"resetPolicy",get:function(){var e=this,a=this.props.match,r=(0,h.toJS)(this.store.detail);return{key:"reset",icon:"restart",text:t("RESTORE_DEFAULT_POLICY"),action:"edit",onClick:function(){return e.trigger("alerting.rule.reset",{type:e.type,cluster:a.params.cluster,detail:r,success:e.fetchData})}}}}]),r}(m.default.Component))||u)||u)||u;a.default=N},4377:function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(317),u=r(a(4378)),l=r(a(4381));t.default=function(e){return[{path:"".concat(e,"/rules"),title:"ALERTING_RULE",component:u.default,exact:!0},{path:"".concat(e,"/messages"),title:"ALERTING_MESSAGE_PL",component:l.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/rules"),exact:!0})]}},4378:function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(86),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(86),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var n=r(a(43));a(41);var u,l=r(a(44)),o=r(a(30)),c=r(a(36)),i=r(a(37)),s=r(a(55)),d=r(a(56)),f=r(a(51)),p=r(a(0)),m=a(14),h=a(239),v=r(a(26)),y=r(a(438)),g=r(a(4379));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,h.inject)("detailStore")(u=(0,h.observer)(u=function(e){(0,s.default)(a,e);var t=b(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,u=new Array(r),o=0;o<r;o++)u[o]=arguments[o];return(e=t.call.apply(t,[this].concat(u))).clusterStore=new y.default,e.state={allClusters:[]},e.fetchData=function(t){var a=e.props.match.params,r=a.cluster,n=a.namespace,u=a.name;e.store.fetchDetail&&e.store.fetchDetail(E({cluster:r,namespace:n,name:u,type:e.type},t))},e.getAllCluster=(0,l.default)(n.default.mark((function t(){var a;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clusterStore.fetchList({limit:-1});case 2:a=t.sent,e.setState({allClusters:a});case 4:case"end":return t.stop()}}),t)}))),e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData(),this.getAllCluster()}},{key:"render",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return p.default.createElement(g.default,{store:this.store,cluster:t,namespace:a,rules:this.rules,handleRefresh:this.fetchData,allClusters:this.state.allClusters})}},{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return this.store.module}},{key:"params",get:function(){return this.props.match.params}},{key:"type",get:function(){return this.props.match.url.indexOf("/builtin-rules")>0?"builtin":"custom"}},{key:"rules",get:function(){return(0,m.toJS)((0,v.default)(this.store,"detail._originDataWithStatus.spec.rules",[]))}}]),a}(p.default.Component))||u)||u;t.default=S},4379:function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(48),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(48),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(188),r(7);var u,l=n(r(30)),o=n(r(315)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=n(r(789)),h=r(239),v=r(186),y=r(14),g=n(r(135)),_=n(r(26)),E=n(r(250)),b=r(72),S=n(r(3)),O=n(r(4380)),R=n(r(1873));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.observer)(u=function(e){(0,s.default)(r,e);var a=A(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).getRules=function(){var e=n.state,t=e.searchValue,a=e.page,r=e.limit,u=n._rules;return""!==t&&(u=n._rules.filter((function(e){return(0,E.default)(e.alert,t)}))),u=(0,g.default)(u).slice((a-1)*r,a*r)},n.handleExpandClick=function(e){n.setState((function(t){return{expandIndex:t.expandIndex===e?"":e}}))},n.handleSearch=function(e,t){n.setState({searchValue:t,page:1})},n.handleRefresh=function(){n.setState({searchValue:""},(function(){n.props.handleRefresh()}))},n.handlePage=function(e){n.setState({page:e})},n.handlePageSizeClick=function(e,t){n.setState({limit:t})},n.renderHeader=function(){var e=n.state.searchValue;return p.default.createElement("div",{className:R.default.header},p.default.createElement(v.InputSearch,{className:R.default.search,name:"search",value:e,placeholder:t("SEARCH_BY_NAME"),onChange:n.handleSearch,autoComplete:"off"}),p.default.createElement("div",{className:R.default.actions},p.default.createElement(v.Button,{type:"flat",icon:"refresh",onClick:n.handleRefresh})))},n.renderFooter=function(){var e=n.pagination,a=e.total,r=e.limit;return p.default.createElement(v.Level,{className:R.default.footer},p.default.createElement(v.LevelLeft,null,p.default.createElement("div",{className:R.default.pageSizeBox},p.default.createElement(v.Dropdown,{placement:"top",trigger:"hover",content:p.default.createElement(v.Menu,{className:R.default.pageSizeMenu,onClick:n.handlePageSizeClick},b.PAGESIZE_OPTION.map((function(e){return p.default.createElement(v.Menu.MenuItem,{className:(0,S.default)(R.default.pageSizeMenuitem),key:e},p.default.createElement("span",null,e))})))},p.default.createElement("div",{className:R.default.pagesize},p.default.createElement("span",{className:R.default.text},t("SHOW_NUM",{num:r})),p.default.createElement(v.Icon,{name:"caret-down",size:16}))),p.default.createElement("div",{className:R.default.gap}),p.default.createElement("span",null,t("TOTAL_ITEMS",{num:a})))),p.default.createElement(v.LevelRight,null,p.default.createElement(v.Pagination,(0,o.default)({},e,{onChange:n.handlePage}))))},n.state={page:1,limit:10,expandIndex:"",searchValue:""},n}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=this.state.expandIndex,r=this.props,n=r.store,u=r.cluster,l=r.namespace,o=r.allClusters,c=this.getRules();return p.default.createElement(m.default,{title:t("ALERTING_RULE")},this.renderHeader(),c.map((function(t,r){return p.default.createElement(O.default,{key:r,rule:t,index:r,store:n,isExpand:a===r,status:t.state,onExpandClick:e.handleExpandClick,cluster:u,namespace:l,allClusters:o})})),this.renderFooter())}},{key:"store",get:function(){return this.props.store}},{key:"_rules",get:function(){var e=this;return this.props.rules.map((function(t,a){return C(C({},t),{},{state:e.status[a]})}))}},{key:"status",get:function(){var e=(0,_.default)(this.store,"detail._originDataWithStatus.status.rulesStatus",[]);return(0,y.toJS)(e)}},{key:"pagination",get:function(){var e=this.state;return{page:e.page,limit:e.limit,total:""!==e.searchValue?this.getRules().length:this._rules.length}}}]),r}(p.default.Component))||u;a.default=P},4380:function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(73),r(18),r(87),r(48),r(16),r(27),r(98),r(10),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(73),r(18),r(87),r(48),r(42),r(16),r(27),r(98),r(10),r(4),r(23),r(57),r(24),r(17),r(64);var u,l=n(r(30)),o=n(r(96)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=r(186),m=r(1232),h=n(r(3)),v=n(r(880)),y=r(832),g=r(923),_=n(r(26)),E=n(r(855)),b=n(r(63)),S=r(239),O=n(r(994)),R=n(r(0)),T=r(52),C=r(791),A=n(r(1873));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k={cpu:"cpu",pod:"pod",memory:"memory",disk:"storage",network:"network",replica:"backup"},N={s:"TIME_S",m:"TIME_M",h:"TIME_H"},D={disabled:t("DISABLED"),firing:t("ALERT_RULE_FIRING"),inactive:t("ALERT_RULE_INACTIVE"),pending:t("ALERT_RULE_PENDING")},w={Deployment:"DEPLOYMENTS_VALUES",StatefulSet:"STATEFULSETS_VALUES",DaemonSet:"DAEMONSETS_VALUES"},L=(0,S.inject)("rootStore")(u=(0,S.observer)(u=(0,C.trigger)(u=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return(e=a.call.apply(a,[this].concat(u))).handleExpandClick=function(){var t=e.props,a=t.index;(0,t.onExpandClick)(a)},e.renderIcon=function(){var t=e.props,a=t.status,r=t.isExpand,n=a.state,u=e.disabled?A.default.status_disabled:A.default["status_".concat(n)];if("Custom"===e.ruleType)return R.default.createElement("div",{className:(0,h.default)(A.default.headIcon,u)},r?R.default.createElement(m.ReactComponent,{width:40,height:40}):R.default.createElement(p.Icon,{name:"computing-setting",size:40}));var l,o=Object.keys(e.metricThreshold)[0];return l=k[o],R.default.createElement("div",{className:(0,h.default)(A.default.headIcon,[A.default["status_".concat(n)]])},R.default.createElement(p.Icon,{type:r?"light":"dark",name:l,size:40}))},e.handleMonitor=function(t){var a=e.props,r=a.rule,n=a.store,u=a.cluster,l=a.namespace,o=a.status;e.trigger("multi.alerting.rule.monitor",{rule:r,store:n,cluster:u,namespace:l,ruleStatus:o,expr:r.expr}),t.stopPropagation()},e.renderHead=function(){var a=e.props,r=a.status,n=a.rule,u=r.state,l=e.disabled?A.default.info_disabled:A.default["info_".concat(u)];return R.default.createElement("div",{className:A.default.head},e.renderIcon(),R.default.createElement("div",null,R.default.createElement("div",{className:A.default.headLine},R.default.createElement("div",{className:A.default.title},n.alert),e.hasMonitoring&&R.default.createElement(p.Tooltip,{content:t("VIEW_METRIC_DATA")},R.default.createElement("img",{src:"/assets/monitor.svg",onClick:e.handleMonitor})),R.default.createElement(v.default,{data:n.severity})),R.default.createElement("div",{className:(0,h.default)(A.default.statusLine,l)},("inactive"!==u||e.disabled)&&R.default.createElement(p.Icon,{name:"information",size:16}),R.default.createElement("div",{className:A.default.desc},e.disabled?t("DISABLED"):D[u]))))},e.renderClusterAliasName=function(t){return(0,T.showNameAndAlias)(t,"cluster",{},!0,(function(){e.forceUpdate()}))},e.renderTemplateRuleTarget=function(){var a=e.props,r=a.rule,n=a.allClusters,u=(0,_.default)(r,"exprBuilder.".concat(e.monitorType,".names"),[]),l=(0,_.default)(r,"exprBuilder.".concat(e.monitorType,".kind"),""),c=u.slice(0,3),i=u.slice(3);if("node"===e.monitorType){var s=null;return i.length>0&&(s=R.default.createElement(R.default.Fragment,null,i.map((function(a,r,u){var l="".concat(e.renderClusterAliasName(a.cluster)," | ").concat(a.names.length);return R.default.createElement("div",{className:A.default.template_deploy,key:"".concat(a.namespace,"_").concat(r),style:{maxWidth:"276px"}},R.default.createElement("div",null,R.default.createElement("span",{key:r,style:{marginBottom:"4px"}},R.default.createElement(O.default,{key:"".concat(a.cluster,"-").concat(r),cluster:a.cluster,allClusters:n,title:l}))),R.default.createElement("span",{className:A.default.deploy_des,style:{marginBottom:r!==u.length-1?"12px":"0px"}},t("NODES_VALUES",{values:a.names.join(",")})))})))),R.default.createElement("div",{className:A.default.nodeList},c.map((function(a,r){var u=R.default.createElement("div",{className:A.default.template_deploy,index:r},R.default.createElement("span",{className:A.default.deploy_des},t("NODES_VALUES",{values:a.names.join(",")}))),l="".concat(e.renderClusterAliasName(a.cluster)," | ").concat(a.names.length);return R.default.createElement(p.Tooltip,{content:u,placement:"right",key:r},R.default.createElement("div",{key:"".concat(a.cluster,"-").concat(r)},R.default.createElement(O.default,{cluster:a.cluster,allClusters:n,title:l})))})),i.length>0&&R.default.createElement(p.Tooltip,{content:s,placement:"right"},R.default.createElement("div",{className:A.default.restItem},i.length)))}var d=(0,E.default)(c,"cluster"),f=null;return(i=Object.entries(d).slice(3)).length>0&&(f=R.default.createElement(R.default.Fragment,null,i.map((function(a,r){var u=(0,o.default)(a,2),c=u[0],i=u[1],s="".concat(e.renderClusterAliasName(c)," | ").concat(i.reduce((function(e,t){return e+t.names.length}),0));return R.default.createElement("div",{className:A.default.template_deploy,key:r,style:{width:"276px"}},R.default.createElement("div",null,R.default.createElement("span",{style:{marginBottom:"4px"},key:"".concat(c,"-").concat(r)},R.default.createElement(O.default,{cluster:c,allClusters:n,title:s}))),i.map((function(e,a,r){return R.default.createElement("div",{className:A.default.template_deploy,key:"".concat(e.cluster,"_").concat(a),style:{marginBottom:a!==r.length-1?"8px":"0px"},index:a},R.default.createElement("div",{className:A.default.title},R.default.createElement("img",{src:"/assets/alarmProject.svg"}),R.default.createElement("span",null,e.namespace)),R.default.createElement("span",{className:A.default.deploy_des},t(w[l],{values:e.names.join(",")})))})))})))),R.default.createElement("div",{className:A.default.nodeList},Object.entries(d).map((function(a,r){var u=(0,o.default)(a,2),c=u[0],i=u[1];if(r>2)return null;var s=i.map((function(e,a){return R.default.createElement("div",{className:A.default.template_deploy,key:a},R.default.createElement("div",{className:A.default.title},R.default.createElement("img",{src:"/assets/alarmProject.svg"}),R.default.createElement("span",null,e.namespace)),R.default.createElement("span",{className:A.default.deploy_des},t(w[l],{values:e.names.join(",")})))})),d="".concat(e.renderClusterAliasName(c)," | ").concat(i.reduce((function(e,t){return e+t.names.length}),0));return R.default.createElement(p.Tooltip,{content:s,placement:"right"},R.default.createElement("span",{key:"".concat(c,"-").concat(r)},R.default.createElement(O.default,{cluster:c,allClusters:n,title:d})))})),i.length>0&&R.default.createElement(p.Tooltip,{content:f,placement:"right"},R.default.createElement("div",{className:A.default.restItem},i.length)))},e.targetContent=function(){return R.default.createElement(R.default.Fragment,null,e.renderTemplateRuleTarget(),R.default.createElement("div",{className:A.default.desc},t("MONITORING_TARGETS")))},e.renderMonitorTarget=function(){return R.default.createElement("div",{className:A.default.target},"Template"===e.ruleType&&e.targetContent())},e.renderTime=function(){var a=e.props.status,r=(0,_.default)(a,"lastEvaluation",!1);return R.default.createElement("div",{className:A.default.timeLabel},R.default.createElement("span",{className:(0,h.default)(A.default.time,(0,l.default)({},A.default.time_white,e.props.isExpand))},r?(0,T.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-"),R.default.createElement("div",{className:A.default.desc},t("RECENT_DETECT_TIME")))},e.renderAlertRule=function(){var a="Custom"===e.ruleType;return R.default.createElement("p",null,R.default.createElement("span",{className:A.default.label},a?t("DURATION"):t("TRIGGER_CONDITION"),":"),R.default.createElement("span",null,e.ruleExpr))},e.renderExtraContent=function(){var a=e.props,r=a.rule,n=a.isExpand,u=(0,_.default)(r,"annotations.message",""),o=(0,_.default)(r,"annotations.description","-"),c=""!==u?u:o;return R.default.createElement("div",{className:(0,h.default)(A.default.itemExtra,(0,l.default)({},A.default.itemExtraShow,n))},R.default.createElement("div",{className:A.default.ms_content},e.renderAlertRule(),R.default.createElement("p",null,R.default.createElement("span",{className:A.default.label},t("RULE_EXPRESSION"),":"),R.default.createElement("span",{className:A.default.ruleExpr},r.expr))),R.default.createElement("div",{className:A.default.ms_content},R.default.createElement("p",null,R.default.createElement("span",{className:A.default.label},t("MESSAGE_SUMMARY"),":"),R.default.createElement("span",null,(0,_.default)(r,"annotations.summary",""))),R.default.createElement("p",null,R.default.createElement("span",{className:A.default.label},t("MESSAGE_DETAILS"),":"),R.default.createElement("span",null,c))))},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props.isExpand;return R.default.createElement("div",{className:A.default.item},R.default.createElement("div",{className:(0,h.default)(A.default.content,(0,l.default)({},A.default.expanded,e)),onClick:this.handleExpandClick},this.renderHead(),this.renderMonitorTarget(),this.renderTime(),R.default.createElement(p.Icon,{name:"chevron-down",type:e?"light":"",size:20})),this.renderExtraContent())}},{key:"ruleType",get:function(){var e=this.props.rule,t=(0,_.default)(e,"exprBuilder",{});return(0,b.default)(t)?"Custom":"Template"}},{key:"monitorType",get:function(){var e=this.props.rule;return Object.keys((0,_.default)(e,"exprBuilder",{}))[0]}},{key:"severityConfig",get:function(){return y.SEVERITY_LEVEL.map((function(e){return{value:e.value,label:e.label}}))}},{key:"resourceType",get:function(){var e=this.props.rule;return Object.keys(e.exprBuilder)[0]}},{key:"metricThreshold",get:function(){var e=this.props.rule;return(0,_.default)(e.exprBuilder[this.resourceType],"metricThreshold",{})}},{key:"disabled",get:function(){var e=this.props.rule;return JSON.parse((0,_.default)(e,"disable","false"))}},{key:"ruleExpr",get:function(){var e=this.props.rule,a="Custom"===this.ruleType;if(!e.for)return"-";var r=(0,_.default)(e,"for",""),n=r.slice(0,-1);if(a)return t(N[r.slice(-1)],{num:n});var u=Object.keys(this.metricThreshold)[0],l=Object.keys(this.metricThreshold[u])[0],o="".concat(u,":").concat(l),c=g.RESOURCE_METRICS_CONFIG[this.monitorType][o],i=t("".concat(c.label)).replace(/[(（]%[)）]/g,"").replace(/\s$/,""),s=c.ruleConfig.filter((function(e){return"thresholds"===e.name}))[0].reverser,d=(0,_.default)(e,"exprBuilder.".concat(this.monitorType,".comparator")),f=(0,_.default)(e,"exprBuilder.".concat(this.monitorType,".metricThreshold.").concat(u,".").concat(l)),p=s(Number(f)),m="core"===c.ruleConfig[1].unit?1===p?t("CORE"):t("CORE_PL"):c.ruleConfig[1].unit,h=e.for.slice(0,-1),v=e.for.slice(-1);return"%"===m?t({s:"ALERT_RULE_TEXT_PERCENT_SECOND",m:"ALERT_RULE_TEXT_PERCENT_MINUTE",h:"ALERT_RULE_TEXT_PERCENT_HOUR"}[v],{alterTypeText:i,comparator:d,thresholds:p,durationValue:h}):t({s:"ALERT_RULE_TEXT_SECOND",m:"ALERT_RULE_TEXT_MINUTE",h:"ALERT_RULE_TEXT_HOUR"}[v],{alterTypeText:i,comparator:d,thresholds:p,unit:m,durationValue:h})}},{key:"hasMonitoring",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}}]),r}(R.default.Component))||u)||u)||u;a.default=L},4381:function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var u,l=n(r(315)),o=n(r(30)),c=n(r(36)),i=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=n(r(0)),m=r(239),h=n(r(26)),v=n(r(451)),y=n(r(63)),g=r(433),_=r(186),E=r(52),b=r(72),S=r(878),O=n(r(1237)),R=n(r(789)),T=n(r(790)),C=n(r(880)),A=n(r(873)),P=n(r(3)),k=n(r(4382));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var L=(0,m.observer)(u=function(e){(0,s.default)(r,e);var a=w(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.props.match.params,a=t.cluster,r=t.namespace,u=t.name,l=n.state,o=l.limit,c=l.page,i=l.sortBy,s=l.ascending,d=D(D({},e),{},{cluster:a,namespace:r,ruleName:u,type:n.type,limit:o,page:c,sortBy:i,ascending:s,label_filters:"rule_group=".concat(u)});n.store.fetchList(d)},n.getResourceType=function(e){var a=(0,v.default)(e);return t("ALERT_TYPE",{type:t(a)})},n.getColumns=function(){return[{title:t("MESSAGE"),dataIndex:"alertname",render:function(e,t){return p.default.createElement(T.default,{icon:"loudspeaker",title:(0,h.default)(t,"_originData.annotations.summary"),description:(0,h.default)(t,"_originData.annotations.message")||(0,h.default)(t,"_originData.annotations.description","-")})}},{title:t("SEVERITY"),dataIndex:"labels.severity",width:"15%",render:function(e,t){var a=t.severity;return p.default.createElement(C.default,{data:a})}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"20%",render:function(e,a){if("template"!==a.rule_type)return"-";var r=(0,S.getAlertingResource)(a),u=r.module,l=r.name,o=r.namespace;if(!u)return"-";if("hpas"===u)return p.default.createElement("span",null,t(b.MODULE_KIND_MAP[u]),": ",l);var c="".concat(n.getPrefix({namespace:o,cluster:a.cluster}),"/").concat(u,"/").concat(l);return p.default.createElement(g.Link,{to:c,alt:"".concat(t(b.MODULE_KIND_MAP[u].toUpperCase()),": ").concat(l)},t(b.MODULE_KIND_MAP[u].toUpperCase()),": ",l)}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.handlePage=function(e){n.setState({page:e},(function(){n.fetchData()}))},n.handlePageSizeClick=function(e,t){n.setState({limit:t},(function(){n.fetchData()}))},n.renderFooter=function(){var e=n.pagination,a=e.total,r=e.limit;return p.default.createElement(_.Level,{className:k.default.footer},p.default.createElement(_.LevelLeft,null,p.default.createElement("div",{className:k.default.pageSizeBox},p.default.createElement(_.Dropdown,{placement:"top",trigger:"hover",content:p.default.createElement(_.Menu,{className:k.default.pageSizeMenu,onClick:n.handlePageSizeClick},b.PAGESIZE_OPTION.map((function(e){return p.default.createElement(_.Menu.MenuItem,{className:(0,P.default)(k.default.pageSizeMenuitem),key:e},p.default.createElement("span",null,e))})))},p.default.createElement("div",{className:k.default.pagesize},p.default.createElement("span",{className:k.default.text},t("SHOW_NUM",{num:r})),p.default.createElement(_.Icon,{name:"caret-down",size:16}))),p.default.createElement("div",{className:k.default.gap}),p.default.createElement("span",null,t("TOTAL_ITEMS",{num:a})))),p.default.createElement(_.LevelRight,null,p.default.createElement(_.Pagination,(0,l.default)({},e,{onChange:n.handlePage}))))},n.store=new O.default,n.state={page:1,limit:10,sortBy:"activeAt",ascending:!1},n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r=this.props.match.params,n=r.cluster,u=r.namespace,l=r.workspace;return t=t||n,a=a||u,"".concat(l?"/".concat(l):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.isLoading,n=e.filters;return p.default.createElement(R.default,{title:t("ALERTING_MESSAGE_PL"),loading:r},(0,y.default)(a)?p.default.createElement("div",null,t("NO_DATA_DESC")):p.default.createElement(p.default.Fragment,null,p.default.createElement(A.default,{className:k.default.table,filters:n,data:a,name:"Alerting Message",rowKey:"alertname",columns:this.getColumns(),selectedRowKeys:[],selectActions:[],hideHeader:!0,hideFooter:!0}),this.renderFooter()))}},{key:"type",get:function(){return this.props.match.url.indexOf("/builtin-rules")>0?"builtin":"custom"}},{key:"pagination",get:function(){var e=this.state;return{page:e.page,limit:e.limit,total:this.store.list.total}}}]),r}(p.default.Component))||u;a.default=L},4382:function(e,t,a){e.exports={table:"_1vpAixev7ywyaYvkOb-WU7",footer:"_2RGm-1sjSUHG6ko6oB_I7z",pageSizeBox:"_2JbO7AjfnztngjQGQlAAXT",pagesize:"p7LH3fXvH5jpWdmeYfpN5",text:"_3H5Otonnxjzg7f7dus0okX",gap:"_1UBboqmAbRbBAG7ME3mNpV",pageSizeMenu:"_34wu7hl_Y7MHVrijhjMRy7",pageSizeMenuitem:"RJ9D5my0ez_JbvHq4QrDL"}},4383:function(e,t,a){e.exports={icon:"_3RlEv5_bvcbFGzuo-Dh4l5"}},778:function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(22),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(29),a(28),a(4),a(22),a(38),a(32);var n=r(a(43));a(41);var u=r(a(44)),l=r(a(96)),o=a(239),c=a(317),i=a(0),s=r(a(4087)),d=(0,o.inject)("rootStore")((function(e){var t=(0,i.useState)(!1),r=(0,l.default)(t,2),o=r[0],d=r[1],f=function(){var t=(0,u.default)(n.default.mark((function t(){var r,u,l,o;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(17).then(a.t.bind(null,5756,7));case 2:return r=t.sent,u=r.default,l=new u,t.next=7,l.fetchLicenseByLicenses({extensionName:"whizard-monitoring"});case 7:o=t.sent,(null==o?void 0:o.isAuthorized)&&globals.app.hasKSModule("whizard")?d(!0):(d(!1),e.rootStore.routing.push("/"));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){return f(),function(){d(!1)}}),[]),o?(0,c.renderRoutes)(s.default):null}));t.default=d}}]);