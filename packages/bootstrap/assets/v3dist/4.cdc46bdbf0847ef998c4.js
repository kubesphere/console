(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1207:function(e,t,a){"use strict";a(17);var r=a(19);a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(28)),u=r(a(38)),l=r(a(39)),c=r(a(35));function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var s=function(e){(0,u.default)(a,e);var t=i(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"apiVersion",get:function(){return"kapis/monitoring.kubesphere.io/v1beta1"}}]),a}(r(a(1018)).default);t.default=s},1210:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(38)),u=r(a(39)),l=r(a(35));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var i=function(e){(0,o.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).resourceName="node",e.getApi=function(){return"".concat(e.apiVersion,"/node_metrics")},e}return a}(r(a(848)).default);t.default=i},1211:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(38)),u=r(a(39)),l=r(a(35));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var i=function(e){(0,o.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).module="customresourcedefinitions",e}return a}(r(a(49)).default);t.default=i},1212:function(e,t,a){"use strict";a(17),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"StarDuotone",{enumerable:!0,get:function(){return r.StarDuotone}}),Object.defineProperty(t,"StarHalfDuotone",{enumerable:!0,get:function(){return n.StarHalfDuotone}}),Object.defineProperty(t,"NoteDuotone",{enumerable:!0,get:function(){return o.NoteDuotone}});var r=a(3385),n=a(3386),o=a(3387)},1213:function(e,t,a){"use strict";var r=a(19);a(12),a(3),a(839),a(11),a(6),a(8),a(13),a(9),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getClassNames=i,t.mapProps=void 0;var n=r(a(32)),o=r(a(50));a(12),a(3),a(839),a(11),a(6),a(27),a(33),a(17),a(8),a(13),a(9),a(4),a(7);var u=r(a(5));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e){var t,a,r,n,o,l=e.primary,c=e.secondary,i=e.theme,s=e.variant,d=e.className,f=e.color,p=e.fill,m=null!==(t=null!=i?i:s)&&void 0!==t?t:"dark",h={light:{fill:"#ffffff66",color:"rgba(255,255,255,0.9)"},dark:{fill:"#B6C2CD",color:"#242E42"}};return{className:(0,u.default)(d,"icon","kubed-icon","kubed-icon__".concat(m),{"kubed-icon-dark":"dark"===m,"kubed-icon-light":"light"===m}),colorProps:{fill:null!==(a=null!=c?c:p)&&void 0!==a?a:null===(r=h[m])||void 0===r?void 0:r.fill,color:null!==(n=null!=l?l:f)&&void 0!==n?n:null===(o=h[m])||void 0===o?void 0:o.color}}}t.mapProps=function(e){var t,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=i(e),u=n.className,l=n.colorProps,s=e.size,d=e.width,f=e.height,p=(e.primary,e.secondary,e.variant,(0,o.default)(e,["size","width","height","primary","secondary","variant"]));return c(c(c({width:null!==(t=null!=s?s:d)&&void 0!==t?t:r,height:null!==(a=null!=s?s:f)&&void 0!==a?a:r,viewBox:"0 0 ".concat(r," ").concat(r),xmlns:"http://www.w3.org/2000/svg"},p),l),{},{className:u})}},1531:function(e,t,a){"use strict";a(17),a(11),a(37),a(138),a(4),a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(11),a(37),a(138),a(4),a(44);for(var r=a(3316),n=r.keys().filter((function(e){return"./index.js"!==e})),o={},u=0;u<n.length;u+=1)Object.assign(o,r(n[u]).default);var l=o;t.default=l},1532:function(e,t,a){"use strict";a(17);var r=a(19);a(68),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(68),a(30),a(4),a(16),a(40),a(10);var n,o,u=r(a(62)),l=r(a(25)),c=r(a(75)),i=r(a(38)),s=r(a(39)),d=r(a(35)),f=r(a(45)),p=(r(a(63)),a(18)),m=a(56),h=r(a(1018));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=["node_cpu_usage","node_cpu_utilisation","node_load1","node_load5","node_load15","node_memory_utilisation","node_memory_usage_wo_cache","node_gpu_usage","node_gpu_memory_usage","node_disk_size_utilisation","node_disk_inode_utilisation","node_pod_utilisation"],g=["node_cpu_utilisation","node_cpu_usage","node_cpu_total","node_memory_utilisation","node_memory_usage_wo_cache","node_memory_total","node_gpu_utilization","node_gpu_usage","node_gpu_total","node_gpu_memory_utilization","node_gpu_memory_usage","node_gpu_memory_total","node_disk_size_utilisation","node_disk_size_usage","node_disk_size_capacity","node_pod_utilisation","node_pod_running_count","node_pod_quota","node_disk_inode_utilisation","node_disk_inode_total","node_disk_inode_usage","node_load1","node_load5","node_load15"],_=(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,u.default)(r,"sort_metric",o,(0,c.default)(r)),r.resource="nodes",r.sort_metric_options=(0,m.hideGPUByLicense)(e.sort_metric_options||y,r.cluster),r.metrics_filter=(0,m.hideGPUByLicense)(g,r.cluster).join("|"),r}return a}(h.default),o=(0,f.default)(n.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),n);t.default=_},1533:function(e,t,a){"use strict";a(17);var r=a(19);a(68),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(68),a(30),a(4),a(16),a(40),a(10);var n,o,u=r(a(62)),l=r(a(25)),c=r(a(75)),i=r(a(38)),s=r(a(39)),d=r(a(35)),f=r(a(45)),p=(r(a(63)),a(18)),m=a(56),h=r(a(1018));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_net_bytes_transmitted","pod_net_bytes_received","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation"],g=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_net_bytes_transmitted","pod_net_bytes_received","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation"],_=(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,u.default)(r,"sort_metric",o,(0,c.default)(r)),r.resource="pods",r.sort_metric_options=(0,m.hideGPUByLicense)(e.sort_metric_options||y,r.cluster),r.metrics_filter=(0,m.hideGPUByLicense)(g,r.cluster).join("|"),r}return a}(h.default),o=(0,f.default)(n.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),n);t.default=_},1535:function(e,t,a){"use strict";a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.CLUSTER_CREATING_STEPS=void 0;t.CLUSTER_CREATING_STEPS=["Init Nodes","Pull Images","Init etcd Cluster","Init Control Plane","Join Nodes","Install Addons"]},1536:function(e,t,a){"use strict";a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.storageClasses=void 0;t.storageClasses=[{value:"BlockStorage",label:"BLOCK_STORAGE"},{value:"ObjectStorage",label:"OBJECT_STORAGE"},{value:"FileStorage",label:"FILE_STORAGE"},{value:"Undefined",label:"UNCLASSIFIED"}]},1537:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(6),a(14),a(99),a(8),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(3),a(6),a(14),a(99),a(8),a(4),a(21),a(7);var n=r(a(42)),o=r(a(97));a(36);var u,l,c,i,s,d,f,p=r(a(43)),m=r(a(62)),h=r(a(25)),v=r(a(28)),y=r(a(45)),g=(r(a(63)),a(18)),_=r(a(26)),E=r(a(846)),b=a(440),O=(u=function(){function e(){var t=this;(0,h.default)(this,e),(0,m.default)(this,"list",l,this),(0,m.default)(this,"count",c,this),(0,m.default)(this,"exceptionCount",i,this),(0,m.default)(this,"healthyCount",s,this),(0,m.default)(this,"detail",d,this),(0,m.default)(this,"isLoading",f,this),this.getListUrl=function(e){var a=e.cluster;return"".concat(t.apiVersion,"/klusters/").concat(a,"/components")},this.getDetailUrl=function(e){var a=e.cluster,r=e.name;return"".concat(t.getListUrl({cluster:a}),"/").concat(r)}}var t,a;return(0,v.default)(e,[{key:"fetchList",value:(a=(0,p.default)(n.default.mark((function e(t){var a,r,u,l,c;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getListUrl(t));case 3:a=e.sent,r=(0,E.default)(a,"namespace"),u={kubernetes:(0,_.default)(r,"kube-system",[]),kubesphere:(0,_.default)(r,"kubesphere-system",[]),istio:(0,_.default)(r,"istio-system",[]),monitoring:(0,_.default)(r,"kubesphere-monitoring-system",[]),logging:(0,_.default)(r,"kubesphere-logging-system",[]),devops:(0,_.default)(r,"kubesphere-devops-system",[]),edgewize:(0,_.default)(r,"edgewize-system",[])},this.list={data:u,isLoading:!1},l={},c={},Object.entries(u).forEach((function(e){var t=(0,o.default)(e,2),a=t[0];t[1].forEach((function(e){var t=(0,b.getComponentStatus)(e);"Warning"===t&&(l[a]=l[a]||0,l[a]+=1),"Healthy"===t&&(c[a]=c[a]||0,c[a]+=1)}))})),this.exceptionCount=l,this.healthyCount=c;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"fetchDetail",value:(t=(0,p.default)(n.default.mark((function e(t){var a,r,o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.name,this.isLoading=!0,e.next=4,request.get(this.getDetailUrl({cluster:a,name:r}));case 4:o=e.sent,this.detail=o,this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/resources.kubesphere.io/v1alpha2"}},{key:"totalCount",get:function(){var e=this.count,t=e.kubesphere+e.kubernetes+e.openpitrix;return isNaN(t)?0:t}}]),e}(),l=(0,y.default)(u.prototype,"list",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!0}}}),c=(0,y.default)(u.prototype,"count",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=(0,y.default)(u.prototype,"exceptionCount",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,y.default)(u.prototype,"healthyCount",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,y.default)(u.prototype,"detail",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,y.default)(u.prototype,"isLoading",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,y.default)(u.prototype,"fetchList",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchList"),u.prototype),(0,y.default)(u.prototype,"fetchDetail",[g.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchDetail"),u.prototype),u);t.default=O},3316:function(e,t,a){var r={"./cluster.js":3317,"./index.js":1531};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=3316},3317:function(e,a,r){"use strict";var n=r(19);r(12),r(11),r(6),r(67),r(88),r(37),r(20),r(14),r(8),r(13),r(9),r(4),r(21),r(74),r(46),r(7),r(44),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(67),r(88),r(37),r(20),r(27),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(74),r(46),r(7),r(44);var o=n(r(42));r(36);var u=n(r(43)),l=n(r(32)),c=n(r(50)),i=n(r(164)),s=n(r(799)),d=n(r(26)),f=n(r(69)),p=n(r(3318)),m=n(r(443));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var v={"cluster.visibility.edit":{on:function(e){var a,r=e.store,n=e.success,v=e.cluster,y=(0,c.default)(e,["store","success","cluster"]),g=new m.default,_=s.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:(a=(0,u.default)(o.default.mark((function e(a){var u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",s.default.close(_));case 2:if(!globals.user.globalRules.clusters.includes("manage")){e.next=5;break}return e.next=5,r.patch({name:r.detail.name},{metadata:{labels:{"cluster.kubesphere.io/visibility":a.public?"public":"private"}}});case 5:return u=[],a.addWorkspaces&&a.addWorkspaces.forEach((function(e){var t,a=(0,d.default)(e,"_originData.spec.placement.clusters",{});t=(0,f.default)(a)?[{op:"add",path:"/spec/placement",value:{clusters:[{name:v.name}]}}]:[{op:"add",path:"/spec/placement/clusters/-",value:{name:v.name}}],u.push(g.editVisible(e,t))})),a.deleteWorkspaces&&a.deleteWorkspaces.forEach((function(e){var t=(e.clusters.map((function(e){return e.name}))||[]).indexOf(v.name),a=[{op:"remove",path:"/spec/placement/clusters/".concat(t),value:{name:v.name}}];u.push(g.editVisible(e,a))})),e.next=10,Promise.all(u);case 10:s.default.close(_),n&&n(),i.default.success({content:t("UPDATE_SUCCESSFUL")});case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:p.default,store:r,cluster:v},y))}}};a.default=v},3318:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(41),r(6),r(67),r(68),r(20),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(74),r(198),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(41),r(6),r(67),r(68),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(74),r(198),r(7);var o=n(r(58)),u=n(r(32)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=r(192),p=n(r(799)),m=n(r(823)),h=n(r(1049)),v=n(r(26)),y=n(r(69)),g=n(r(328)),_=r(18),E=n(r(0)),b=n(r(443)),O=n(r(3319)),S=n(r(3320));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={allWorkspaces:[],authoredWorkspaces:[],addWorkspaces:[],deleteWorkspaces:[],isPublic:"public"===(0,v.default)(e.props,"cluster.visibility"),showUnAuthTip:!1,showConfirm:!1,filters:{}},e.workspaceStore=new b.default,e.authoredWorkspaceStore=new b.default,e.handleOk=function(){var t=e.state,a=t.allWorkspaces,r=t.authoredWorkspaces,n=(0,_.toJS)(e.authoredWorkspaceStore.list.data),o=(0,g.default)(a,"name"),u=(0,g.default)(r,"name"),l=(0,g.default)(n,"name"),c=r.filter((function(e){return!l[e.name]})),i=n.filter((function(e){return!u[e.name]})).map((function(e){return o[e.name]}));e.setState({addWorkspaces:c,deleteWorkspaces:i},(function(){e.state.deleteWorkspaces.length>0?e.setState({showConfirm:!0}):e.handleConfirm()}))},e.handleConfirm=function(){var t=e.props.onOk,a=e.state,r=a.addWorkspaces,n=a.deleteWorkspaces;t({public:a.isPublic,addWorkspaces:r,deleteWorkspaces:n})},e.hideConfirm=function(){e.setState({showConfirm:!1})},e.handleSearch=function(t){e.fetchWorkspaces({nameAndAlias:t})},e.fetchWorkspaces=function(t){e.workspaceStore.fetchList(C(C({},t),{},{labelSelector:"!cluster-role.kubesphere.io/edge",limit:-1})).then((function(){e.setState({allWorkspaces:(0,_.toJS)(e.workspaceStore.list.data)})}))},e.fetchAuthoredWorkspaces=function(t){var a=e.props.cluster,r=void 0===a?{}:a;e.authoredWorkspaceStore.fetchList(C(C({},t),{},{limit:-1,cluster:r.name})).then((function(){e.setState({authoredWorkspaces:(0,o.default)((0,_.toJS)(e.authoredWorkspaceStore.list.data))})}))},e.handleWorkspaceAuth=function(t){e.setState((function(e){var a=e.authoredWorkspaces;return{authoredWorkspaces:[].concat((0,o.default)(a),[t])}}))},e.handleWorkspaceUnAuth=function(t){var a=e.state.allWorkspaces;e.setState((function(e){var r=e.authoredWorkspaces,n=a.filter((function(e){return e.name===t.name}));return(0,y.default)(n)&&a.push(t),{authoredWorkspaces:r.filter((function(e){return e.name!==t.name})),allWorkspaces:a,showUnAuthTip:!0}}))},e.handlePublicChange=function(t){e.setState({isPublic:t})},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchWorkspaces(),this.fetchAuthoredWorkspaces()}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,o=this.state,u=o.allWorkspaces,l=o.authoredWorkspaces,c=o.showUnAuthTip,i=o.isPublic,s=o.showConfirm,d=o.deleteWorkspaces,v=d.map((function(e){return e.name})).join(", "),y=1===d.length?t.html("REMOVE_WORKSPACE_CONFIRM_SI",{resource:v}):t.html("REMOVE_WORKSPACE_CONFIRM_PL",{resource:v});return E.default.createElement(p.default,{visible:r,onCancel:n,onOk:this.handleOk,width:960,icon:"key",title:t("EDIT_VISIBILITY"),description:t("EDIT_VISIBILITY_DESC")},!c&&E.default.createElement(f.Alert,{className:"margin-b12",type:"warning",message:t("HOST_CLUSTER_VISIBILITY_WARNING")}),c&&E.default.createElement(f.Alert,{className:"margin-b12",type:"error",message:t("CLUSTER_VISIBILITY_REMOVE_WARNING")}),E.default.createElement("div",{className:O.default.wrapper},E.default.createElement(f.Columns,null,E.default.createElement(f.Column,{className:"is-half"},E.default.createElement("div",{className:O.default.title},t("UNAUTHORIZED")),E.default.createElement("div",{className:O.default.content},E.default.createElement("div",{className:O.default.search},E.default.createElement(h.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.columns,onChange:function(t){e.setState({filters:t}),e.fetchWorkspaces(t)},filters:this.state.filters})),E.default.createElement("div",{className:O.default.list},u.map((function(t){return E.default.createElement(S.default,{key:t.name,data:t,type:"all",onClick:e.handleWorkspaceAuth,disabled:l.find((function(e){return e.name===t.name}))})}))),E.default.createElement("div",{className:O.default.footer},globals.user.globalRules.clusters.includes("manage")&&E.default.createElement(E.default.Fragment,null,E.default.createElement(f.Toggle,{checked:i,onChange:this.handlePublicChange}),E.default.createElement("span",null,t("SET_PUBLIC_CLUSTER")),E.default.createElement(f.Tooltip,{content:t("CLUSTER_VISIBILITY_A2")},E.default.createElement(f.Icon,{name:"information"})))))),E.default.createElement(f.Column,{className:"is-half"},E.default.createElement("div",{className:O.default.title},t("AUTHORIZED")),E.default.createElement("div",{className:O.default.content},E.default.createElement("div",{className:O.default.authedList},l.map((function(t){return E.default.createElement(S.default,{key:t.name,data:t,type:"authed",onClick:e.handleWorkspaceUnAuth})}))),E.default.createElement("div",{className:O.default.footer}))))),E.default.createElement(m.default,{visible:s,onOk:this.handleConfirm,onCancel:this.hideConfirm,resource:v,title:t("REMOVE_WORKSPACE_CONFIRM_TITLE"),desc:y}))}},{key:"columns",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:!0}]}}]),r}(E.default.Component);a.default=R},3319:function(e,t,a){e.exports={wrapper:"_1SbLbTFQFqcmexUmc7grjB",title:"_2JIUF6KDW0q8OuRAbzwbFy",content:"_3KsLjWUYDHjA6iBRaPIyOv",search:"qlBBKXQBG5hybwbhVbU-r",list:"_2McNE4ZD_UKTIxC59RzC6L",authedList:"_33baKvp6rG0kolft8ThzKb",footer:"rKEIrcFvmBNM5P5SjduSX"}},3320:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);r(12),r(137),r(3),r(14),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(30),r(14),r(4),r(16),r(40),r(10);var u=o(r(32)),l=o(r(25)),c=o(r(28)),i=o(r(38)),s=o(r(39)),d=o(r(35)),f=r(192),p=o(r(5)),m=o(r(801)),h=n(r(0)),v=r(56),y=o(r(3321));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.data;(0,t.onClick)(a)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.type,n=e.disabled;return a.name===globals.config.systemWorkspace?null:h.default.createElement("div",{className:(0,p.default)(y.default.wrapper,(0,u.default)({},y.default.disabled,n)),onClick:n?null:this.handleClick},!n&&"authed"===r&&h.default.createElement(f.Icon,{name:"chevron-left",size:20}),h.default.createElement(m.default,{className:y.default.title,icon:"enterprise",title:(0,v.showNameAndAlias)(a.name,"workspace"),description:a.description||"-",ellipsis:!0}),h.default.createElement(m.default,{className:y.default.manager,title:a.manager,description:t("MANAGER")}),!n&&"authed"!==r&&h.default.createElement(f.Icon,{name:"chevron-right",size:20}))}}]),r}(h.Component);a.default=_},3321:function(e,t,a){e.exports={wrapper:"_1qjLklC2JUMbrIwB1g79Hk",disabled:"_1H1hQxC4CBLI54qDMSBxda",title:"_39HEUMTKtnJRkqWNY8ncIH",manager:"_29St8pjb_Msm4R7o-VJCEM"}},3322:function(e,t,a){"use strict";a(17);var r=a(19);a(3),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(3);var n=r(a(58)),o=a(319),u=r(a(3323)),l=r(a(3324)),c=r(a(3325)),i=r(a(3364)),s=r(a(3365)),d=r(a(3373)),f=r(a(3378)),p=r(a(3382)),m=r(a(3383)),h=r(a(3384)),v=r(a(3388)),y=r(a(3389)),g=r(a(3390)),_=r(a(3391)),E=r(a(3392)),b=r(a(3394)),O=r(a(3395)),S=r(a(3396)),k=r(a(3398)),C=r(a(3400)),T=r(a(3401)),R=r(a(3402)),A=r(a(3403)),P=r(a(3407)),w=r(a(3409)),D=r(a(3410)),N=r(a(3412)),I="/clusters/:cluster",L=[{path:"/clusters/tags",component:D.default,exact:!0},{path:I,component:u.default,routes:[].concat((0,n.default)(N.default),[{path:"".concat(I,"/kubeConfig"),component:w.default,exact:!0},{path:"",component:l.default,routes:[{path:"".concat(I,"/overview"),component:c.default,exact:!0},{path:"".concat(I,"/nodes"),component:d.default},{path:"".concat(I,"/components"),component:f.default,exact:!0},{path:"".concat(I,"/projects"),component:p.default,exact:!0},{path:"".concat(I,"/customresources"),component:m.default,exact:!0},{path:"".concat(I,"/deployments"),component:h.default,exact:!0},{path:"".concat(I,"/statefulsets"),component:v.default,exact:!0},{path:"".concat(I,"/daemonsets"),component:y.default,exact:!0},{path:"".concat(I,"/jobs"),component:g.default,exact:!0},{path:"".concat(I,"/cronjobs"),component:_.default,exact:!0},{path:"".concat(I,"/pods"),component:E.default,exact:!0},{path:"".concat(I,"/services"),component:b.default,exact:!0},{path:"".concat(I,"/ingresses"),component:O.default,exact:!0},{path:"".concat(I,"/secrets"),component:S.default,exact:!0},{path:"".concat(I,"/configmaps"),component:k.default,exact:!0},{path:"".concat(I,"/serviceaccounts"),component:C.default,exact:!0},{path:"".concat(I,"/storageclasses"),component:i.default,exact:!0},{path:"".concat(I,"/volumes"),component:s.default},{path:"".concat(I,"/base-info"),component:A.default,exact:!0},{path:"".concat(I,"/visibility"),component:P.default,exact:!0},{path:"".concat(I,"/members"),component:T.default,exact:!0},{path:"".concat(I,"/roles"),component:R.default,exact:!0},{path:"".concat(I,"/storageclasses"),component:i.default,exact:!0},(0,o.getIndexRoute)({path:I,to:"".concat(I,"/overview"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(I,"/workloads"),to:"".concat(I,"/deployments"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(I,"/gateways"),to:"".concat(I,"/gateways/cluster"),exact:!0}),(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})]}])}];t.default=L},3323:function(e,t,a){"use strict";var r=a(19),n=a(163);a(12),a(11),a(6),a(37),a(8),a(13),a(9),a(4),a(21),a(16),a(29),a(10),a(46),a(66),a(7),a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(31),a(11),a(6),a(37),a(27),a(30),a(33),a(17),a(8),a(13),a(9),a(4),a(21),a(16),a(40),a(29),a(10),a(46),a(66),a(7),a(44);var o=r(a(42)),u=r(a(32));a(36);var l,c=r(a(43)),i=r(a(25)),s=r(a(28)),d=r(a(38)),f=r(a(39)),p=r(a(35)),m=a(192),h=r(a(26)),v=r(a(246)),y=r(a(70)),g=a(245),_=n(a(0)),E=r(a(448)),b=a(319);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,g.inject)("rootStore")(l=(0,g.observer)(l=function(e){(0,d.default)(r,e);var t,a=k(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).state={fetchFin:!1},t.store=new E.default,t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.init(this.props.match.params)}},{key:"componentDidUpdate",value:function(e){e.match.params.cluster!==this.cluster&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store.initializing=!0,!t.cluster){e.next=10;break}return e.next=4,Promise.all([this.store.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({cluster:t.cluster})]);case 4:if(!this.store.detail.isReady){e.next=7;break}return e.next=7,this.store.fetchProjects({cluster:t.cluster});case 7:(0,y.default)(globals,"clusterConfig.".concat(t.cluster),S(S({},this.store.detail.configz),{},{k8sVersion:this.store.detail.kubernetesVersion})),""===(0,h.default)(this.store.detail.configz,"ksVersion")&&(0,y.default)(globals,"need_rebuild_".concat(this.cluster,"_nav"),!0),globals.app.cacheHistory(this.props.match.url,S({type:"Cluster"},(0,v.default)(this.store.detail,["name","aliasName","group","isHost"])));case 10:this.store.initializing=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?_.default.createElement(m.Loading,{className:"ks-page-loading"}):_.default.createElement(g.Provider,{clusterStore:this.store},(0,b.renderRoutes)(this.props.route.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(_.Component))||l)||l;t.default=C},3324:function(e,t,a){"use strict";a(17);var r=a(19),n=a(163);a(3),a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(27),a(30),a(4),a(21),a(16),a(40),a(29),a(10),a(66);var o=r(a(42));a(36);var u,l=r(a(43)),c=r(a(25)),i=r(a(28)),s=r(a(38)),d=r(a(39)),f=r(a(35)),p=n(a(0)),m=a(245),h=r(a(809)),v=r(a(26)),y=r(a(197)),g=a(319);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var E=(0,m.inject)("rootStore","clusterStore")(u=(0,m.observer)(u=function(e){(0,s.default)(a,e);var t=_(a);function a(){var e;(0,c.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).enterCluster=function(){var t=(0,l.default)(o.default.mark((function t(a){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.routing.push("/clusters/".concat(a,"/overview")));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchConfigz=(0,h.default)((0,l.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.clusterStore.fetchClusterConfigz({cluster:e.cluster});case 2:t.sent&&(globals.app.getClusterNavs(e.cluster),(0,y.default)(globals,"need_rebuild_".concat(e.cluster,"_nav")),e.forceUpdate());case 4:case"end":return t.stop()}}),t)}))),3e3),e}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(){(0,v.default)(globals,"need_rebuild_".concat(this.cluster,"_nav"),!1)&&this.fetchConfigz()}},{key:"render",value:function(){var e=this.props.route;return p.default.createElement(p.default.Fragment,null,(0,g.renderRoutes)(e.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(p.Component))||u)||u;t.default=E},3325:function(e,t,a){"use strict";a(17);var r=a(19);a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(245),f=r(a(3326)),p=r(a(3357));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=(0,d.inject)("clusterStore")(n=(0,d.observer)(n=function(e){(0,l.default)(a,e);var t=m(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return this.cluster.detail.isReady?s.default.createElement(f.default,{match:this.props.match}):s.default.createElement(p.default,{store:this.cluster,match:this.props.match})}},{key:"cluster",get:function(){return this.props.clusterStore}}]),a}(s.default.Component))||n)||n;t.default=h},3326:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(4),r(16),r(40),r(29),r(10),r(66);var o,u,l,c,i=n(r(62)),s=n(r(25)),d=n(r(28)),f=n(r(75)),p=n(r(38)),m=n(r(39)),h=n(r(35)),v=n(r(45)),y=(n(r(63)),n(r(0))),g=r(245),_=r(192),E=n(r(824)),b=n(r(5)),O=n(r(847)),S=r(18),k=n(r(3327)),C=n(r(3336)),T=n(r(3338)),R=n(r(3340)),A=n(r(3342)),P=n(r(3345)),w=n(r(3351)),D=n(r(3354)),N=n(r(3356));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=(0,g.inject)("clusterStore")(o=(0,g.observer)((u=function(e){(0,p.default)(r,e);var a=I(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={showMore:!1},(0,i.default)(e,"isExclude",l,(0,f.default)(e)),(0,i.default)(e,"rankModalVisible",c,(0,f.default)(e)),e.showRankModal=function(){e.rankModalVisible=!0},e.hideRankModal=function(){e.rankModalVisible=!1},e.handleExclude=function(){e.isExclude=!e.isExclude},e.handleShowMore=function(){var t=e.state.showMore;e.setState({showMore:!t})},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.cluster.fetchVersion(this.props.match.params)}},{key:"render",value:function(){var e=this.props.match,a=this.cluster.detail,r=this.state.showMore;return y.default.createElement("div",null,y.default.createElement("div",{className:N.default.header},y.default.createElement("div",{className:N.default.title},t("OVERVIEW"))),y.default.createElement("div",{className:N.default.content},y.default.createElement(_.Columns,{className:N.default["margin-t0"]},y.default.createElement(_.Column,{className:"is-8"},y.default.createElement(P.default,{cluster:e.params.cluster,isExclude:this.isExclude}),y.default.createElement(w.default,{clusterDetail:a}),y.default.createElement(D.default,{cluster:e.params.cluster})),y.default.createElement(_.Column,{className:"is-4"},y.default.createElement(E.default,{className:N.default.padding12},y.default.createElement(O.default,{cluster:a,size:"large",noStatus:!0,theme:"light",className:N.default.clusterTitle}),globals.app.isMultiCluster?y.default.createElement(y.default.Fragment,null,y.default.createElement(T.default,{cluster:a,version:this.cluster.version}),r&&y.default.createElement(A.default,{cluster:e.params.cluster}),y.default.createElement("div",{className:(0,b.default)(N.default.showMore),onClick:this.handleShowMore},y.default.createElement(_.Icon,{name:r?"chevron-up":"chevron-down",size:16}),y.default.createElement("span",{className:N.default.text},r?t("FOLD"):t("UNFOLD")))):y.default.createElement(A.default,{cluster:e.params.cluster}),globals.app.isPlatformAdmin&&y.default.createElement(C.default,{cluster:e.params.cluster})),y.default.createElement(E.default,{className:N.default.padding12},y.default.createElement(R.default,{cluster:e.params.cluster,showRankModal:this.showRankModal}))))),y.default.createElement(k.default,{visible:this.rankModalVisible,cluster:e.params.cluster,onCancel:this.hideRankModal}))}},{key:"cluster",get:function(){return this.props.clusterStore}}]),r}(y.default.Component),l=(0,v.default)(u.prototype,"isExclude",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,v.default)(u.prototype,"rankModalVisible",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=u))||o)||o;a.default=L},3327:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=o(r(97)),l=n(r(0)),c=o(r(799)),i=o(r(3328)),s=o(r(3335));function d(e){var a=e.visible,r=void 0===a||a,n=e.onCancel,o=e.type,d=e.cluster,f=(0,l.useState)(!1),p=(0,u.default)(f,2),m=p[0],h=p[1];(0,l.useEffect)((function(){h(r)}),[r]);var v=(0,l.useCallback)((function(){h(!1),null==n||n()}),[]);return l.default.createElement(c.default,{bodyClassName:s.default.body,title:t("RESOURCE_USAGE_RANKING"),visible:m,onCancel:v,fullScreen:!0,hideFooter:!0},l.default.createElement(i.default,{type:o,cluster:d}))}var f=(0,l.memo)(d);a.default=f},3328:function(e,t,a){"use strict";var r=a(19);a(12),a(3),a(11),a(6),a(8),a(13),a(9),a(4),a(16),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(31),a(3),a(11),a(6),a(27),a(30),a(33),a(17),a(8),a(13),a(9),a(4),a(16),a(40),a(10),a(7);var n,o=r(a(32)),u=r(a(25)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=a(245),d=r(a(1532)),f=r(a(1533)),p=r(a(1205)),m=a(3329);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g={limit:10,page:1,sort_type:"desc"},_=(0,s.inject)("rootStore")(n=(0,s.observer)(n=function(e){(0,l.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).sourceMap={node:{store:new d.default(v(v({},g),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/clusters/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new f.default(v(v({},g),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,a){return"/clusters/".concat(e.cluster,"/projects/").concat(a,"/pods/").concat(t)}},project:{store:new p.default(v(v({},g),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/clusters/".concat(e.cluster,"/projects/").concat(t)}}},e}return a}(m.Component))||n)||n;t.default=_},3329:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(6),r(67),r(88),r(20),r(51),r(14),r(8),r(13),r(9),r(4),r(21),r(16),r(10),r(74),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(67),r(88),r(20),r(27),r(51),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(16),r(40),r(10),r(74),r(7);var o,u,l,c,i,s=n(r(58)),d=n(r(32)),f=n(r(62)),p=n(r(25)),m=n(r(28)),h=n(r(75)),v=n(r(38)),y=n(r(39)),g=n(r(35)),_=n(r(45)),E=(n(r(63)),r(192)),b=n(r(5)),O=n(r(803)),S=n(r(855)),k=n(r(1142)),C=n(r(1143)),T=n(r(1206)),R=n(r(165)),A=r(18),P=r(245),w=n(r(0)),D=n(r(3331)),N=n(r(3332)),I=n(r(3333)),L=r(56),M=r(61),j=r(804),x=n(r(3334));function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var G={limit:10,page:1,sort_type:"desc"},F=(o=function(e){(0,v.default)(r,e);var a=Y(r);function r(){var e;(0,p.default)(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=a.call.apply(a,[this].concat(o)),(0,f.default)(e,"type",u,(0,h.default)(e)),(0,f.default)(e,"hideColumns",l,(0,h.default)(e)),e.sourceMap={node:{store:new D.default(V(V({},G),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/whizard-telemetry/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new N.default(V(V({},G),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,a){return"/whizard-telemetry/".concat(e.cluster,"/projects/").concat(a,"/pods/").concat(t)}},project:{store:new I.default(V(V({},G),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/whizard-telemetry/".concat(e.cluster,"/projects/").concat(t)}}},e.transData=function(e,a){var r="",n="",o=null==e?void 0:e[a];if((a.indexOf("used_limits")>0||a.indexOf("used_requests")>0)&&(r=(0,R.default)(o)||""===o?"N/A":""),!r){var u=M.MONITOR_RANK_UNIT_MAP[a],l=null!=o?o:0;"%"===u?r="".concat((0,j.getValueByUnit)(l,u),"%"):""===u?r=Math.round(100*l)/100:(n=(0,j.getSuitableUnit)(l,u),r=(0,j.getValueByUnit)(l,n))}return"".concat("gpu"===n?"".concat(r," GPU"):"core"===n?t("VALUE_CORES",{value:r}):t("VALUE_UNIT",{value:r,unit:n}))},e.renderQos=function(e){return w.default.createElement(w.default.Fragment,null,e.qos_class&&w.default.createElement(E.Tooltip,{content:M.COLOR_QOS[e.qos_class].label},w.default.createElement("span",{style:{display:"inline-block",marginRight:"4px",width:"16px",height:"16px",lineHeight:"16px",textAlign:"center",borderRadius:"2px",color:M.COLOR_QOS[e.qos_class].color,background:M.COLOR_QOS[e.qos_class].background}},e.qos_class.slice(0,1).toUpperCase())))},e.fetchRankData=function(t){e.store.fetchAll(V(V({},t),{},{cluster_resources_filter:e.clusters}))},(0,f.default)(e,"onChange",c,(0,h.default)(e)),(0,f.default)(e,"handleColumnsHide",i,(0,h.default)(e)),e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.fetchRankData()}},{key:"renderToolbar",value:function(){return w.default.createElement("div",{className:(0,b.default)(x.default.toolbar,x.default.pane__toolbar,x.default.pane)},w.default.createElement(E.RadioGroup,{wrapClassName:"radio-group-button",value:this.type,onChange:this.onChange},w.default.createElement(E.RadioButton,{value:"node"},t("NODE_PL")),w.default.createElement(E.RadioButton,{value:"project"},t("PROJECT_PL")),w.default.createElement(E.RadioButton,{value:"pod"},t("POD_PL"))),w.default.createElement("div",{className:x.default.toolbar_filter},w.default.createElement(k.default,{className:x.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:this.columns,value:(0,A.toJS)(this.hideColumns),onChange:this.handleColumnsHide}),w.default.createElement(E.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),w.default.createElement(E.Select,{className:x.default.sortTypeSelect,value:this.store.sort_type,onChange:this.store.changeSortType,options:[{value:"desc",label:t("SORT_BY_DESC")},{value:"asc",label:t("SORT_BY_ASC")}]})))}},{key:"renderList",value:function(){var e=this.store.data.toJS();return w.default.createElement("div",{className:x.default.listContainer},w.default.createElement(T.default,{columns:this.filteredColumns,dataSource:e,emptyText:w.default.createElement(S.default,null),loading:this.store.isLoading,store:this.store}),this.renderPagination())}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,r=e.limit;return w.default.createElement("div",{className:(0,b.default)(x.default.pane,x.default.pane__pagination)},w.default.createElement(C.default,{page:t,total:a,limit:r,onChange:this.store.changePagination}))}},{key:"render",value:function(){return w.default.createElement("div",{className:x.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"store",get:function(){return this.sourceMap[this.type].store}},{key:"cluster",get:function(){return this.props.cluster}},{key:"options",get:function(){var e=this,a=this.sourceMap[this.type].name;return this.store.sort_metric_options.filter((function(t){return!(0,A.toJS)(e.hideColumns).includes("".concat(t,"-").concat(a))})).map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"columns",get:function(){var e,a=this,r=this.sourceMap[this.type],n=r.store,o=r.icon,u=r.name,l=r.url,c=r.desc,i=r.descLabel,d=null===(e=n.sort_metric_options)||void 0===e?void 0:e.map((function(e){return{key:"".concat(e,"-").concat(u),sort_metric:e,title:t("".concat(M.MONITOR_RANK_METERIC_LOCALS[e],"_TCAP")),isHideable:!0,render:function(t){return w.default.createElement("div",null,w.default.createElement("h3",null,a.transData(t,e)))}}})),f=[{title:t("namespace"===u?"PROJECT":u.toUpperCase()),width:"15%",key:u,render:function(e){var r=i?"".concat(t(i),": ").concat(null==e?void 0:e[c]," || '-'"):null==e?void 0:e[c];"WORKSPACES"===i&&(r=w.default.createElement("span",null,"".concat(t(i),": "),(0,L.showNameAndAlias)(null==e?void 0:e[c],"workspace")||"-")),"PROJECTS"===i&&(r=w.default.createElement("span",null,"".concat(t(i),": "),(0,L.showNameAndAlias)(null==e?void 0:e[c],"project")||"-"));var n=a.renderQos(e);return w.default.createElement(O.default,{className:x.default.avatar,icon:o,title:w.default.createElement(w.default.Fragment,null,n,"namespace"===u?(0,L.showNameAndAlias)(null==e?void 0:e[u],"project"):(null==e?void 0:e[u])||"-"),desc:r,iconSize:40,to:l(null==e?void 0:e[u],null==e?void 0:e.namespace)})}}];return(0,L.hideGPUByLicense)([].concat(f,(0,s.default)(d)),this.cluster)}},{key:"filteredColumns",get:function(){var e=this;return this.columns.filter((function(t){return!e.hideColumns.includes(t.key||t.dataIndex)}))}}]),r}(w.default.Component),u=(0,_.default)(o.prototype,"type",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"node"}}),l=(0,_.default)(o.prototype,"hideColumns",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=(0,_.default)(o.prototype,"onChange",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.store.sort_metric=e.store.sort_metric_options[0],e.hideColumns=[],new Promise((function(a){e.type=t,a()})).then((function(){e.fetchRankData()}))}}}),i=(0,_.default)(o.prototype,"handleColumnsHide",[A.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hideColumns=t;var a=e.sourceMap[e.type].name;if(t.includes("".concat(e.store.sort_metric,"-").concat(a))){var r,n=e.store.sort_metric_options.filter((function(e){return!t.includes("".concat(e,"-").concat(a))}));e.store.changeSortMetric(null!==(r=n[0])&&void 0!==r?r:"")}}}}),o),H=(0,P.inject)("rootStore")((0,P.observer)(F));a.default=H;var B=F;a.Component=B},3331:function(e,t,a){"use strict";a(17);var r=a(19);a(68),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(68),a(30),a(4),a(16),a(40),a(10);var n,o,u=r(a(62)),l=r(a(25)),c=r(a(75)),i=r(a(38)),s=r(a(39)),d=r(a(35)),f=r(a(45)),p=(r(a(63)),a(18)),m=a(56),h=r(a(1207));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=["node_cpu_usage","node_cpu_utilisation","node_load1","node_load5","node_load15","node_memory_usage_wo_cache","node_memory_utilisation","node_gpu_usage","node_gpu_memory_usage","node_disk_size_utilisation","node_pod_count","node_pod_utilisation","node_disk_inode_utilisation"],g=["node_cpu_utilisation","node_cpu_usage","node_cpu_total","node_memory_utilisation","node_memory_usage_wo_cache","node_memory_total","node_gpu_utilization","node_gpu_usage","node_gpu_total","node_gpu_memory_utilization","node_gpu_memory_usage","node_gpu_memory_total","node_disk_size_utilisation","node_disk_size_usage","node_disk_size_capacity","node_pod_utilisation","node_pod_running_count","node_pod_quota","node_disk_inode_utilisation","node_disk_inode_total","node_disk_inode_usage","node_pod_count","node_load1","node_load5","node_load15"],_=(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,u.default)(r,"sort_metric",o,(0,c.default)(r)),r.resource="nodes",r.sort_metric_options=(0,m.hideGPUByLicense)(y,r.cluster),r.metrics_filter=(0,m.hideGPUByLicense)(g,r.cluster).join("|"),r}return a}(h.default),o=(0,f.default)(n.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),n);t.default=_},3332:function(e,t,a){"use strict";a(17);var r=a(19);a(68),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(68),a(30),a(4),a(16),a(40),a(10);var n,o,u=r(a(62)),l=r(a(25)),c=r(a(75)),i=r(a(38)),s=r(a(39)),d=r(a(35)),f=r(a(45)),p=(r(a(63)),a(18)),m=a(56),h=r(a(1207));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation","pod_net_bytes_transmitted","pod_net_bytes_received"],g=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_net_bytes_transmitted","pod_net_bytes_received","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation"],_=(n=function(e){(0,i.default)(a,e);var t=v(a);function a(e){var r;return(0,l.default)(this,a),r=t.call(this,e),(0,u.default)(r,"sort_metric",o,(0,c.default)(r)),r.resource="pods",r.sort_metric_options=(0,m.hideGPUByLicense)(y,r.cluster),r.metrics_filter=(0,m.hideGPUByLicense)(g,r.cluster).join("|"),r}return a}(h.default),o=(0,f.default)(n.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),n);t.default=_},3333:function(e,t,a){"use strict";a(17);var r=a(19);a(68),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(68),a(30),a(4),a(16),a(40),a(10);var n,o,u,l=r(a(62)),c=r(a(25)),i=r(a(28)),s=r(a(75)),d=r(a(38)),f=r(a(39)),p=r(a(35)),m=r(a(45)),h=(r(a(63)),a(18)),v=a(56),y=r(a(1207));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=["namespace_cpu_usage","namespace_cpu_used_requests_utilisation","namespace_cpu_used_limits_utilisation","namespace_memory_usage_wo_cache","namespace_memory_used_requests_utilisation","namespace_memory_used_limits_utilisation","namespace_pvc_bytes_used","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count","namespace_net_bytes_received","namespace_net_bytes_transmitted"],E=["namespace_memory_usage_wo_cache","namespace_memory_limit_hard","namespace_cpu_usage","namespace_cpu_limit_hard","namespace_gpu_limit_hard","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count","namespace_pods_hard","namespace_net_bytes_received","namespace_net_bytes_transmitted","namespace_cpu_used_requests_utilisation","namespace_cpu_used_limits_utilisation","namespace_memory_used_requests_utilisation","namespace_memory_used_limits_utilisation","namespace_pvc_bytes_used","namespace_pvc_count"],b=(n=function(e){(0,d.default)(a,e);var t=g(a);function a(e){var r;return(0,c.default)(this,a),r=t.call(this,e),(0,l.default)(r,"sort_metric",o,(0,s.default)(r)),(0,l.default)(r,"changeWorkSpace",u,(0,s.default)(r)),r.resource="namespaces",r.sort_metric_options=(0,v.hideGPUByLicense)(_,r.cluster),r.metrics_filter=(0,v.hideGPUByLicense)(E,r.cluster).join("|"),r}return(0,i.default)(a,[{key:"fetchUrl",get:function(){return this.workspace?"".concat(this.apiVersion,"/workspace_metrics"):"".concat(this.apiVersion,"/namespace_metrics")}}]),a}(y.default),o=(0,m.default)(n.prototype,"sort_metric",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _[0]}}),u=(0,m.default)(n.prototype,"changeWorkSpace",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.workspace=t,e.fetchAll()}}}),n);t.default=b},3334:function(e,t,a){e.exports={wrapper:"kE3KwCjpxjL06m1JyXYqh",pane:"_2uVDNuCFQlEdzxeJFsgade",pane__toolbar:"_3pwemZYlldk8BVRzKSjR0M",title:"_2QLeiq4lO4-E0UWkTwZ2pU",toolbar:"B2iEbHtsi7TSbVQDFZAAM",toolbar_buttons:"_20ATWKNncgatSI7TsIFmSk",toolbar_filter:"_3DIJstY5eiupA7Z3Sx7ugA",sortTypeSelect:"_3xIBxesObSvBweKWDzU4ik",sort_button:"bIIGx7S36rL-ZE_ySMccm",table:"_3zcLFyY9c0qr-O4IcoD-xM",table_rank:"UQZcsZfu2_Uy2ZbJXbAhV",table_no_border:"_2CLtp-r29kgr89OqLBTEzk",rankList_row:"_3MTKghTP6FCVM_Oc0poYe2",rankCol:"WFE7sesMVKXIVySSq_c7Q",listContainer:"_36b1LYqEBKXqJV0PTKLfTL",pane__pagination:"toSE7w2UfWCbYgAaXuYw7",avatar:"_3D6xMvf2yi0ds1rEmmP39K"}},3335:function(e,t,a){e.exports={body:"E0vtK-35j9eQt49Mf6NsA"}},3336:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);r(3),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(4),r(16),r(40),r(10);var u=o(r(25)),l=o(r(28)),c=o(r(38)),i=o(r(39)),s=o(r(35)),d=n(r(0)),f=o(r(802)),p=o(r(801)),m=r(461),h=o(r(3337));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleTool=function(t){window.open(t.currentTarget.dataset.url,t.currentTarget.dataset.title,e.getWindowOpts())},e}return(0,l.default)(r,[{key:"getWindowOpts",value:function(){return(0,m.createCenterWindowOpt)({width:1200,height:800,scrollbars:1,resizable:1})}},{key:"render",value:function(){var e=this.props.cluster;return d.default.createElement(f.default,{title:t("TOOLS"),className:h.default.toolContainer},d.default.createElement("div",{className:h.default.level},d.default.createElement("div",{"data-title":"KubeCtl","data-url":"/terminal/kubectl/".concat(e),onClick:this.handleTool},d.default.createElement(p.default,{icon:"terminal",title:"kubectl",description:t("KUBECTL_DESC")})),d.default.createElement("div",{"data-title":"KubeConfig","data-url":"/clusters/".concat(e,"/kubeConfig"),onClick:this.handleTool},d.default.createElement(p.default,{icon:"data",title:"kubeconfig",description:t("KUBECONFIG_DESC")}))))}}]),r}(d.Component);a.default=y},3337:function(e,t,a){e.exports={toolContainer:"_2Bfr8X-g7qOWhCWvYqdfMP",level:"_7jLDaj4UuqLC0FWLjpwWf"}},3338:function(e,a,r){"use strict";r(17);var n=r(19),o=r(163);r(3),r(14),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(27),r(30),r(14),r(4),r(16),r(40),r(10);var u,l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(801)),p=n(r(26)),m=r(245),h=o(r(0)),v=r(56),y=n(r(3339));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,m.inject)("rootStore")(u=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.cluster;t.rootStore.routing.push("/clusters/".concat(a.name,"/visibility"))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.version;return h.default.createElement("div",{className:y.default.container},h.default.createElement("div",{className:y.default.title},h.default.createElement("p",null,t("BASIC_INFORMATION"))),h.default.createElement("div",{className:y.default.level},h.default.createElement(f.default,{title:(0,v.getDomTitle)(a.provider),description:t("PROVIDER")}),h.default.createElement(f.default,{title:(0,v.getDomTitle)("public"===a.visibility?t("VISIBILITY_PUBLIC"):t("VISIBILITY_PARTIAL")),description:t("CLUSTER_VISIBILITY_SCAP"),onClick:this.handleClick}),h.default.createElement(f.default,{title:(0,v.getDomTitle)(a.kubernetesVersion||r),description:t("KUBERNETES_VERSION")}),h.default.createElement(f.default,{title:(0,v.getDomTitle)((0,p.default)(a,"configz.ksVersion","-")),description:t("KUBESPHERE_VERSION")})))}}]),r}(h.Component))||u;a.default=_},3339:function(e,t,a){e.exports={container:"BVjeWOWAID34-TEF0b_fR",title:"_16Av2PREJGprEr_93DL4X4",level:"_1FOMscQVAI8cyABa4Bk5SV"}},3340:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(3),r(11),r(6),r(20),r(51),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(20),r(27),r(51),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(7);var u,l,c,i=n(r(62)),s=n(r(32)),d=n(r(25)),f=n(r(28)),p=n(r(75)),m=n(r(38)),h=n(r(39)),v=n(r(35)),y=n(r(45)),g=(n(r(63)),r(192)),_=n(r(5)),E=n(r(1152)),b=n(r(801)),O=n(r(26)),S=n(r(69)),k=n(r(1108)),C=r(18),T=r(245),R=o(r(0)),A=r(438),P=n(r(1532)),w=n(r(1533)),D=n(r(1205)),N=r(56),I=r(61),L=r(804),M=n(r(3341));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var V={limit:10,page:1,sort_type:"desc"},Y=(0,T.observer)((l=function(e){(0,m.default)(r,e);var a=U(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).sourceMap={node:{store:new P.default(x(x({},V),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/clusters/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new w.default(x(x({},V),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,a){return"/clusters/".concat(e.cluster,"/projects/").concat(a,"/pods/").concat(t)}},project:{store:new D.default(x(x({},V),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/clusters/".concat(e.cluster,"/projects/").concat(t)}}},e.transData=function(a){var r="",n="",o=(0,O.default)(a,e.store.sort_metric,0),u=I.MONITOR_RANK_UNIT_MAP[e.store.sort_metric];return"%"===u?r="".concat((0,L.getValueByUnit)(o,u),"%"):""===u?r=Math.round(100*o)/100:(n=(0,L.getSuitableUnit)(o,u),r=(0,L.getValueByUnit)(o,n)),"".concat(r," ").concat("core"===n?t("CORE_PL"):n)},(0,i.default)(e,"store",c,(0,p.default)(e)),e.state={sourceType:"node",data:[],sortType:"desc",isFold:!0},e.handleChangeSource=function(t){e.setState({sourceType:t}),e.store=e.sourceMap[t].store,e.handleTypeChange("desc")},e.handleChangeMetricType=function(t){e.store.changeSortMetric(t,{sort_type:"desc"}),e.setState({sortType:"desc"})},e.handleTypeChange=function(t){e.setState({sortType:t}),e.store.fetchAll({sort_type:t})},e.renderPanelHeader=function(){var a=e.state.sortType;return R.default.createElement("div",{className:M.default.title},R.default.createElement("div",null,t("RESOURCE_USAGE_RANKING")),R.default.createElement(g.RadioGroup,{mode:"button",value:a,onChange:e.handleTypeChange},R.default.createElement(g.RadioButton,{value:"desc"},R.default.createElement(g.Icon,{name:"sort-descending",size:16})),R.default.createElement(g.RadioButton,{value:"asc"},R.default.createElement(g.Icon,{name:"sort-ascending",size:16}))))},e.renderQos=function(e){return R.default.createElement(g.Tooltip,{content:I.COLOR_QOS[e.qos_class].label},R.default.createElement("span",{style:{marginRight:"4px",minWidth:"16px",height:"16px",lineHeight:"16px",textAlign:"center",borderRadius:"2px",color:I.COLOR_QOS[e.qos_class].color,background:I.COLOR_QOS[e.qos_class].background}},e.qos_class.slice(0,1).toUpperCase()))},e.renderListItems=function(a,r){if((0,S.default)(a))return R.default.createElement(E.default,null);var n=function(a){var n=e.sourceMap[r].descLabel;if(n){var o,u;if("PROJECTS"===n)return R.default.createElement("span",null,(0,N.getDomTitle)(null!==(o="".concat(t(n),": ").concat((0,N.showNameAndAlias)((0,O.default)(a,e.sourceMap[r].desc),"project",{},!0,(function(){return e.forceUpdate()}))))&&void 0!==o?o:"-"));if("WORKSPACES"===n)return R.default.createElement("span",null,(0,N.getDomTitle)(null!==(u="".concat(t(n),": ").concat((0,N.showNameAndAlias)((0,O.default)(a,e.sourceMap[r].desc),"workspace",{},!0)))&&void 0!==u?u:"-"))}return(0,N.getDomTitle)((0,O.default)(a,e.sourceMap[r].desc,"-"))},o=["project"];return R.default.createElement(R.default.Fragment,null,a.map((function(a,u){return R.default.createElement("div",{key:"".concat(a[r],"-").concat(u),className:M.default.listItem},R.default.createElement(g.Icon,{style:{width:52},size:40,className:"margin-r12",name:e.sourceMap[r].icon}),R.default.createElement(b.default,{className:M.default.textBox,title:R.default.createElement("div",{className:(0,_.default)(M.default.text,(0,s.default)({},M.default.noLabel,"master"!==a.role))},a.qos_class&&e.renderQos(a),R.default.createElement(A.Link,{to:e.sourceMap[r].url((0,O.default)(a,e.sourceMap[r].name),(0,O.default)(a,"namespace"))},(0,N.getDomTitle)((0,k.default)(o,(function(e){return e===r}))?(0,N.showNameAndAlias)((0,O.default)(a,e.sourceMap[r].name),r,{},!0,(function(){return e.forceUpdate()})):(0,O.default)(a,e.sourceMap[r].name,"-"))),"master"===a.role&&R.default.createElement("span",{className:M.default.label},t("CONTROL_PLANE"))),description:n(a)}),R.default.createElement("p",{className:M.default.cpu},e.transData(a)))})))},e.toggleFold=function(){e.setState({isFold:!e.state.isFold})},e.showMoreModal=function(){var t,a;null===(t=(a=e.props).showRankModal)||void 0===t||t.call(a)},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){var e=this.store,a=e.data,r=e.isLoading,n=this.state,o=n.sourceType,u=n.isFold,l=a.length>5,c=u?a.slice(0,5):a;return R.default.createElement("div",{className:M.default.container},this.renderPanelHeader(),R.default.createElement(g.Loading,{spinning:r},R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:M.default.header},R.default.createElement(g.Select,{className:M.default.select,value:o,onChange:this.handleChangeSource,options:this.sourceOptions}),R.default.createElement(g.Select,{className:M.default.select,value:this.store.sort_metric,onChange:this.handleChangeMetricType,options:this.options})),R.default.createElement("div",{className:M.default.list,style:{height:l&&!u?"auto":"392px"}},this.renderListItems(c,o),l&&R.default.createElement(g.Button,{className:M.default.fold,icon:u?"chevron-down":"chevron-up",onClick:this.toggleFold},u?t("UNFOLD"):t("FOLD"))),R.default.createElement("div",{className:M.default.more},R.default.createElement(g.Button,{onClick:this.showMoreModal},t("VIEW_MORE"))))))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"sourceOptions",get:function(){return[{label:t("NODES"),value:"node"},{label:t("PODS"),value:"pod"},{label:t("PROJECT_PL"),value:"project"}]}}]),r}(R.Component),c=(0,y.default)(l.prototype,"store",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sourceMap[this.state.sourceType].store}}),u=l))||u;a.default=Y},3341:function(e,t,a){e.exports={container:"_2mo2Puhwc8tT6e9PomRdYU",title:"_2WYsLXyHOnbrxXt0OFY1Km",header:"u4rCe6nDLY5vbaq5aXJDQ",select:"_25M1cGJCz3WgAIQhGkQ6JX",list:"RtrNzNpCozOK2jXlZFrPb",listItem:"_3-eBd_RaqO30cf2v7AeZWY",textBox:"_3ODrxke8bqLQHUb7302kOC",text:"_2WxN_xHdXDli_mWcI5oYGV",label:"_3rjIYXMWaltqHcODVaa0ww",noLabel:"_3RSzNTep-_u0G6h5xmtrsE",cpu:"v0DrKUbv1DFqez5KfSlC-",fold:"t2fjcneoLurD1QVIju9nO",more:"_1aPF0hZOOhyo-EPu3G8bIa"}},3342:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(11),r(6),r(87),r(24),r(140),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(11),r(6),r(27),r(87),r(30),r(24),r(140),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(16),r(40),r(10),r(7);var u=n(r(42)),l=n(r(32));r(36);var c,i=n(r(43)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=r(192),v=n(r(801)),y=n(r(26)),g=r(245),_=o(r(0)),E=n(r(3343)),b=r(56),O=r(804),S=n(r(3344));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R={request_latencies_total:"apiserver_request_latencies",request_rate:"apiserver_request_rate",schedule_attempts_count:"scheduler_schedule_attempts"},A=(0,g.observer)(c=function(e){(0,f.default)(r,e);var a=T(r);function r(e){var t;(0,s.default)(this,r),(t=a.call(this,e)).fetchData=(0,i.default)(u.default.mark((function e(){var a,r,n=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},r=C({last:!0},a),e.next=4,t.apiStore.fetchMetrics(C({metrics:[R.request_latencies_total,R.request_rate]},r));case 4:return e.next=6,t.schedulerStore.fetchMetrics(C({metrics:[R.schedule_attempts_count]},r));case 6:case"end":return e.stop()}}),e)}))),t.getSpecificData=function(e){return((0,y.default)(t.metrics,"".concat(R[e],".data.result"))||[]).reduce((function(e,t){return C(C({},e),{},(0,l.default)({},(0,y.default)(t,"metric.result"),(0,y.default)(t,"value[1]",0)))}),{})};var n=e.cluster;return t.apiStore=new E.default({module:"apiserver",cluster:n}),t.schedulerStore=new E.default({module:"scheduler",cluster:n}),t}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.metrics,a=Number((0,y.default)(e,"".concat(R.request_rate,".data.result[0].value[1]"),0)).toFixed(3),r=(0,O.getValueByUnit)((0,y.default)(e,"".concat(R.request_latencies_total,".data.result[0].value[1]")),"ms"),n=this.getSpecificData("schedule_attempts_count");return _.default.createElement("div",{className:S.default.k8sStatus},_.default.createElement("div",{className:S.default.title},_.default.createElement("p",null,t("KUBERNETES_STATUS"))),_.default.createElement(h.Loading,{spinning:this.schedulerStore.isLoading},_.default.createElement("div",{className:S.default.container},_.default.createElement("div",{className:S.default.level},_.default.createElement(v.default,{title:(0,b.getDomTitle)(t("VALUE_REQUESTS_SECOND",{value:a})),description:t("API_REQUESTS_PER_SECOND")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)("".concat(r," ms")),description:t("API_REQUEST_LATENCY")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)(n.scheduled),description:1===n.scheduled?t("SCHEDULING_OPERATION"):t("SCHEDULING_OPERATIONS")}),_.default.createElement(v.default,{title:(0,b.getDomTitle)(n.unschedulable),description:1===n.unschedulable?t("SCHEDULING_FAILURE"):t("SCHEDULING_FAILURES")})))))}},{key:"metrics",get:function(){var e=this.apiStore.data,t=this.schedulerStore.data;return C(C({},e),t)}}]),r}(_.Component))||c;a.default=A},3343:function(e,t,a){"use strict";var r=a(19);a(12),a(3),a(11),a(41),a(6),a(37),a(98),a(99),a(8),a(13),a(9),a(4),a(16),a(10),a(7),a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(31),a(3),a(11),a(41),a(6),a(37),a(27),a(98),a(30),a(33),a(17),a(99),a(8),a(13),a(9),a(4),a(21),a(16),a(40),a(10),a(7),a(44);var n=r(a(32)),o=r(a(97)),u=r(a(42));a(36);var l,c,i,s=r(a(43)),d=r(a(58)),f=r(a(62)),p=r(a(25)),m=r(a(28)),h=r(a(75)),v=r(a(38)),y=r(a(39)),g=r(a(35)),_=r(a(45)),E=(r(a(63)),a(18)),b=r(a(69)),O=r(a(26)),S=r(a(70)),k=r(a(846)),C=a(56),T=a(440);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var w=(l=function(e){(0,v.default)(n,e);var t,a,r=P(n);function n(){var e;(0,p.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=r.call.apply(r,[this].concat(a)),(0,f.default)(e,"health",c,(0,h.default)(e)),(0,f.default)(e,"etcd",i,(0,h.default)(e)),e.getApi=function(){return"".concat(e.apiVersion,"/component_metrics")},e.getNewRefreshedResult=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,d.default)(a);return t.forEach((function(t,a){var n=(0,O.default)(t,"metric.__name__"),o=null;if(n){var u=(0,O.default)(t,"metric.quantile"),l=(0,O.default)(t,"metric.verb"),c=(0,O.default)(t,"metric.result"),i=r.find((function(e){return u?(0,O.default)(e,"metric.quantile")===u:l?(0,O.default)(e,"metric.verb")===l:c?(0,O.default)(e,"metric.result")===c:(0,O.default)(e,"metric.__name__")===n}));(0,b.default)(i)?r.push(t):o=i}else o=r[a];if(!(0,b.default)(o)){var s=e.getNewValues(o.values,t.value);(0,S.default)(o,"values",s)}})),r},e}return(0,m.default)(n,[{key:"fetchHealthMetrics",value:(a=(0,s.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.health.isLoading=!0,e.next=3,this.requestHealthMetrics();case 3:this.health.isLoading=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"requestHealthMetrics",value:(t=(0,s.default)(u.default.mark((function e(){var t,a,r,n,l,c,i,s,d;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cluster&&globals.app.isMultiCluster?"kapis/clusters/".concat(this.cluster,"/resources.kubesphere.io/v1alpha2/componenthealth"):"kapis/resources.kubesphere.io/v1alpha2/componenthealth",e.next=3,(0,C.to)(request.get(t));case 3:a=e.sent,r=a.kubesphereStatus||[],n=(0,k.default)(r,"namespace"),l=r.some((function(e){return"kube-scheduler"===(0,O.default)(e,"label.component")&&(0,O.default)(e,"healthyBackends",0)})),c=r.some((function(e){return"kube-controller-manager"===(0,O.default)(e,"label.component")&&(0,O.default)(e,"healthyBackends",0)})),i={kubernetes:(0,O.default)(a,"kubernetesStatus",[]),node:(0,O.default)(a,"nodeStatus",{}),kubesphere:(0,O.default)(n,"kubesphere-system",[]),openpitrix:(0,O.default)(n,"openpitrix-system",[]),istio:(0,O.default)(n,"istio-system",[]),monitoring:(0,O.default)(n,"kubesphere-monitoring-system",[]),logging:(0,O.default)(n,"kubesphere-logging-system",[]),devops:(0,O.default)(n,"kubesphere-devops-system",[]),kubeSystem:(0,O.default)(n,"kube-system",[])},s={},d={},Object.entries(i).forEach((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1],n={total:0,health:0},u={total:0,health:0};"node"===a?(n.total=(0,O.default)(r,"totalNodes",0),n.health=(0,O.default)(r,"healthyNodes",0)):"kubernetes"===a?(n.total=r.length,n.health=r.filter((function(e){return"Healthy"===(0,T.getComponentStatus)(e)})).length):r.forEach((function(e){n.total+=e.totalBackends,n.health+=e.healthyBackends;var t=(0,T.getComponentStatus)(e);u.health+="Healthy"===t?1:0,u.total+="Stopped"===t?0:1})),s[a]=n,d[a]=u})),this.health=A(A({},this.health||{}),{data:i,counts:s,componentCounts:d,supportKsScheduler:l,supportControllerManager:c});case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(r(a(848)).default),c=(0,_.default)(l.prototype,"health",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},counts:{},supportKsScheduler:!1,supportControllerManager:!1,isLoading:!1}}}),i=(0,_.default)(l.prototype,"etcd",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,_.default)(l.prototype,"fetchHealthMetrics",[E.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchHealthMetrics"),l.prototype),(0,_.default)(l.prototype,"requestHealthMetrics",[E.action],Object.getOwnPropertyDescriptor(l.prototype,"requestHealthMetrics"),l.prototype),l);t.default=w},3344:function(e,t,a){e.exports={k8sStatus:"_165qOBnN9HAs4LrY_LK-d6",title:"_2vFFuGnTwzqjBij8D3BPRc",container:"_20PSSvdZ2gt1lsGGJB4rsS",level:"_2UJuf7ZQGgEclggVm__94Z"}},3345:function(e,a,r){"use strict";r(17);var n=r(19),o=r(163);r(3),r(4),r(193),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(4),r(193),r(16),r(40),r(10);var u,l,c,i,s=n(r(62)),d=n(r(25)),f=n(r(28)),p=n(r(75)),m=n(r(38)),h=n(r(39)),v=n(r(35)),y=n(r(45)),g=(n(r(63)),o(r(0))),_=r(245),E=n(r(26)),b=r(192),O=n(r(893)),S=r(18),k=r(804),C=n(r(3346)),T=n(r(3350));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var A={cpu_requests:"cluster_pod_cpu_requests_total",cpu_limits:"cluster_pod_cpu_limits_total",cpu_total:"cluster_cpu_total",cpu_requests_non_master:"cluster_pod_cpu_requests_non_master_total",cpu_limits_non_master:"cluster_pod_cpu_limits_non_master_total",cpu_total_non_master:"cluster_cpu_non_master_total",memory_requests:"cluster_pod_memory_requests_total",memorylimits:"cluster_pod_memory_limits_total",memory_total:"cluster_memory_total",memory_requests_non_master:"cluster_pod_memory_requests_non_master_total",memory_limits_non_master:"cluster_pod_memory_limits_non_master_total",memory_total_non_master:"cluster_memory_non_master_total",namespace_cpu_requests:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits:"cluster_namespace_quota_cpu_limits_hard_total",namespace_cpu_requests_non_master:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits_non_master:"cluster_namespace_quota_cpu_limits_hard_total",namespace_memory_requests:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits:"cluster_namespace_quota_memory_limits_hard_total",namespace_memory_requests_non_master:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits_non_master:"cluster_namespace_quota_memory_limits_hard_total"},P=(0,_.observer)((l=function(e){(0,m.default)(r,e);var a=R(r);function r(){var e;(0,d.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).monitorStore=new O.default({cluster:e.props.cluster}),(0,s.default)(e,"resourceType",c,(0,p.default)(e)),(0,s.default)(e,"metriceData",i,(0,p.default)(e)),e.getValue=function(e){return(0,E.default)(e,"value[1]",0)},e.fetchData=function(){e.monitorStore.fetchMetrics({metrics:Object.values(A),last:!0})},e.handleTypeChange=function(t){e.resourceType=t},e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return g.default.createElement("div",{className:T.default.container},g.default.createElement("div",{className:T.default.header},g.default.createElement("div",{className:T.default.title},t("APPLICATION_CLUSTER_QUOTA_STATISTICS")),g.default.createElement(b.RadioGroup,{mode:"button",buttonWidth:110,value:this.resourceType,onChange:this.handleTypeChange,wrapClassName:T.default.radio},g.default.createElement(b.RadioButton,{value:"pod",key:"pod"},t("CONTAINER")),g.default.createElement(b.RadioButton,{value:"project",key:"project"},t("PROJECT")))),g.default.createElement(b.Loading,{spinning:this.monitorStore.isLoading},g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:T.default.usageContainer},g.default.createElement(C.default,{merticType:"cpu",title:t("CPU_QUOTA"),resourceType:this.resourceType,data:this.metricData.cpu}),g.default.createElement(C.default,{merticType:"memory",title:t("MEMORY_QUOTA"),resourceType:this.resourceType,data:this.metricData.memory})))))}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,E.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"metricData",get:function(){var e,t=(0,k.getLastMonitoringData)(this.metrics);return"pod"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[A.cpu_requests_non_master]),limits:this.getValue(t[A.cpu_limits_non_master]),total:this.getValue(t[A.cpu_total_non_master])},memory:{requests:this.getValue(t[A.memory_requests_non_master]),limits:this.getValue(t[A.memory_limits_non_master]),total:this.getValue(t[A.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[A.cpu_requests]),limits:this.getValue(t[A.cpu_limits]),total:this.getValue(t[A.cpu_total])},memory:{requests:this.getValue(t[A.memory_requests]),limits:this.getValue(t[A.memorylimits]),total:this.getValue(t[A.memory_total])}}),"project"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[A.namespace_cpu_requests_non_master]),limits:this.getValue(t[A.namespace_cpu_limits_non_master]),total:this.getValue(t[A.cpu_total_non_master])},memory:{requests:this.getValue(t[A.namespace_memory_requests_non_master]),limits:this.getValue(t[A.namespace_memorylimits_non_master]),total:this.getValue(t[A.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[A.namespace_cpu_requests]),limits:this.getValue(t[A.namespace_cpu_limits]),total:this.getValue(t[A.cpu_total])},memory:{requests:this.getValue(t[A.namespace_memory_requests]),limits:this.getValue(t[A.namespace_memorylimits]),total:this.getValue(t[A.memory_total])}}),e}}]),r}(g.Component),c=(0,y.default)(l.prototype,"resourceType",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pod"}}),i=(0,y.default)(l.prototype,"metriceData",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=l))||u;a.default=P},3346:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);r(194),r(6),r(9),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.merticType,r=void 0===a?"cpu":a,n=e.title,o=e.data,p=e.resourceType,m=(0,l.useState)({requests:0,limits:0,total:0}),h=(0,u.default)(m,2),v=h[0],y=h[1],g=(0,s.getSuitableUnit)(o.total||o.limits||o.requests||0,r);(0,l.useEffect)((function(){var e={};Object.keys(o).forEach((function(t){e[t]=(0,s.getValueByUnit)(o[t],g)})),y(e)}),[o]);var _=function(e,t){return e<t?0:(100*e-100*t)/100},E=(0,l.useMemo)((function(){return"cpu"===r?[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:v.requests,unit:"core"},{name:t("QUOTA_TOTAL"),value:_(v.total,v.requests),unit:"core"}]},{dataKey:"value",innerRadius:34,outerRadius:46,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:v.limits,unit:"core"},{name:t("QUOTA_TOTAL"),value:_(v.total,v.limits),unit:"core"}]}]:[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:v.requests,unit:g},{name:t("QUOTA_TOTAL"),value:_(v.total,v.requests),unit:g}]},{dataKey:"value",innerRadius:34,outerRadius:46,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:v.limits,unit:g},{name:t("QUOTA_TOTAL"),value:_(v.total,v.limits),unit:g}]}]}),[v,r]),b=E.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return l.default.createElement("div",{className:f.default.container},l.default.createElement("div",{className:f.default.flexContainer},l.default.createElement("div",{className:f.default.chartContainer},l.default.createElement("div",{className:f.default.title},n),l.default.createElement("div",{className:f.default.chart},b?l.default.createElement("div",{className:f.default.noData},l.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/doughnut_chart_duotone.svg"}),l.default.createElement("p",null,t("NO_DATA"))):l.default.createElement(l.default.Fragment,null,l.default.createElement(c.MultiPie,{dataList:E,total:v.total,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 178px)"},noTooltip:!0}),l.default.createElement(i.Icon,{className:f.default.icon,name:r,size:32})))),l.default.createElement(d.default,{resourceType:p,mertic:v,unit:g})))},r(194),r(6),r(9),r(4),r(7);var u=o(r(97)),l=n(r(0)),c=r(821),i=r(192),s=r(804),d=o(r(3347)),f=o(r(3349))},3347:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.mertic,r=void 0===a?{}:a,n=e.unit,o=e.resourceType,f=(0,l.useState)("requests"),p=(0,u.default)(f,2),m=p[0],h=p[1],v=(0,l.useState)(0),y=(0,u.default)(v,2),g=y[0],_=y[1];(0,l.useEffect)((function(){var e=0;0===r.total||(0,s.default)(r)||(e=("requests"===m?r.requests:r.limits)/r.total*100);_(e)}),[m,r]),(0,l.useEffect)((function(){h("requests")}),[o]);var E=(0,l.useCallback)((function(e){h(e)}),[]);return l.default.createElement("div",{className:d.default.resourceRatio},l.default.createElement("div",{className:d.default.subTitle},l.default.createElement(c.RadioGroup,{mode:"button",value:m,onChange:E},l.default.createElement(c.RadioButton,{value:"requests"},t("QUOTA_REQUEST")),l.default.createElement(c.RadioButton,{value:"limit"},t("QUOTA_LIMIT")))),l.default.createElement("div",{className:d.default.radio},l.default.createElement("div",{className:d.default.radioWrapper},l.default.createElement("p",null,t("QUOTA_ALLOCATED")),l.default.createElement("p",null,"core"===n?t("VALUE_CORES",{value:"requests"===m?r.requests:r.limits}):t("VALUE_UNIT",{value:"requests"===m?r.requests:r.limits,unit:n}))),l.default.createElement("div",{className:d.default.middleStyle},"VS"),l.default.createElement("div",{className:d.default.radioWrapper},l.default.createElement("p",null,t("QUOTA_TOTAL")),l.default.createElement("p",null,"core"===n?t("VALUE_CORES",{value:r.total}):t("VALUE_UNIT",{value:r.total,unit:n})))),l.default.createElement(i.default,{bgColor:"#eff4f9",maskBgColor:"#E3E9EF",percent:g}))};var u=o(r(97)),l=n(r(0)),c=r(192),i=o(r(1370)),s=o(r(69)),d=o(r(3348))},3348:function(e,t,a){e.exports={resourceRatio:"_1fUEZ2TB-t0fMQV4l3ACo4",subTitle:"_1vbcsgfDS-GM0SJqrqvnYL",title:"_1Ikw3GCgFAv_lfARz3bQA-",radio:"_1wUm6engBLe0T9ZdhKcK_c",radioWrapper:"v5ipbsb_HvTj8l-aUcg75",middleStyle:"_3ruV0WGGqizDKwONs0sDru"}},3349:function(e,t,a){e.exports={container:"_1FfLhAgROftyj0IuUcQI4e",flexContainer:"_3XEnA-pHA2CNFrAV1LnWJF",title:"_2CBIhq8TuoMF1r-JDYlLGA",noData:"_1_444QYPwve2sPOoNmVVWH",chartContainer:"_1G7CGL6N9PpdMV6H4PvpwD",chart:"_3axU54fLqK1Opc2i0QIVAa",icon:"_1HKFmOmlSy27H88Xcdndw-"}},3350:function(e,t,a){e.exports={container:"gGKFTd29XBoqYhN47F0EN",header:"psEkXLBc8Tknh1fcEwq0R",title:"nnAGEVZwoSGU5FPr3MHhY",radioLabel:"_1rANBkB5gBrmSxmTvCrZES",radio:"_1sGDf57rraXGzxVxlyt5ka",usageContainer:"_3GkrBwSCVOVOLT3cNmYHXR"}},3351:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(6),r(20),r(14),r(140),r(8),r(13),r(9),r(4),r(193),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(20),r(27),r(30),r(14),r(140),r(33),r(17),r(8),r(13),r(9),r(4),r(193),r(322),r(21),r(16),r(40),r(10),r(7);var o=n(r(318)),u=n(r(42)),l=n(r(32));r(36);var c,i=n(r(43)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=n(r(0)),v=r(192),y=n(r(893)),g=r(821),_=r(245),E=n(r(5)),b=n(r(26)),O=r(56),S=r(804),k=n(r(1534)),C=n(r(3353));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={cpu_usage:"cluster_cpu_usage",cpu_total:"cluster_cpu_total",cpu_utilisation:"cluster_cpu_utilisation",gpu_usage:"cluster_gpu_usage",gpu_total:"cluster_gpu_total",gpu_utilization:"cluster_gpu_utilization",gpu_memory_utilization:"cluster_gpu_memory_utilization",gpu_memory_usage:"cluster_gpu_memory_usage",gpu_memory_total:"cluster_gpu_memory_total",memory_usage:"cluster_memory_usage_wo_cache",memory_total:"cluster_memory_total",memory_utilisation:"cluster_memory_utilisation",disk_size_usage:"cluster_disk_size_usage",disk_size_capacity:"cluster_disk_size_capacity",disk_utilisation:"cluster_disk_size_utilisation",pod_count:"cluster_pod_running_count",pod_capacity:"cluster_pod_quota"},w=(0,_.observer)(c=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).state={active:"cpu",params:{times:10,step:"48m"}},e.monitorStore=new y.default({cluster:e.cluster}),e.fetchData=function(){var t=(0,i.default)(u.default.mark((function t(a){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(R(R({metrics:Object.values((0,O.hideGPUByLicense)(P,e.cluster))},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return(0,b.default)(e,"value[1]",0)},e.handleSelect=function(t){e.setState({active:t})},e.renderTabItem=function(a){var r=a.type,n=a.icon,o=a.name,u=a.unit,c=a.used,i=a.total,s=a.unitType,d=(0,S.getSuitableUnit)(i||c,s)||u,f=(0,S.getValueByUnit)(c,d),p=(0,S.getValueByUnit)(i,d),m="core"===d?"CORE_PL":d,y=e.state.active===r,g=f&&p?f/p*100:0;return h.default.createElement("div",{className:(0,E.default)(C.default.tabItem,(0,l.default)({},C.default.checked,y)),key:r,onClick:function(){return e.handleSelect(r)}},h.default.createElement("div",{className:C.default.label},h.default.createElement(v.Icon,{name:n,size:20,type:y?"light":"dark"}),h.default.createElement("span",null,t(o)),h.default.createElement("span",null,t(m))),h.default.createElement("div",{className:C.default.value},h.default.createElement("span",null,f),h.default.createElement("span",null,"/",p)),h.default.createElement("div",{className:C.default.progress},h.default.createElement(k.default,{className:(0,E.default)((0,l.default)({},C.default.progressActive,y)),percent:parseFloat(g.toFixed(2)),content:h.default.createElement("div",{className:C.default.tabItem_tooltip},h.default.createElement("div",null,t(o)),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("USED_VALUE_CORES_PERCENTAGE",{value:f,percentage:0!==g?"".concat(g.toFixed(2),"%"):"0%"}):t("USED_VALUE_UNIT_PERCENTAGE",{value:f,unit:d,percentage:0!==g?"".concat(g.toFixed(2),"%"):"0%"})),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("TOTAL_VALUE_CORES",{value:p}):t("TOTAL_VALUE_UNIT",{value:p,unit:d})))})))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(){var e=this,t=this.renderChartOption.filter((function(t){return t.category===e.state.active}))[0],a={key:t.title,width:"100%",height:"100%"},r=(0,S.getAreaChartOps)(t);return h.default.createElement(g.SimpleArea,(0,o.default)({},a,r))}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading;return h.default.createElement("div",{className:C.default.container},h.default.createElement("div",{className:C.default.header},h.default.createElement("div",{className:C.default.title},t("NODE_RESOURCE_USAGE"))),h.default.createElement(v.Loading,{spinning:a},h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:C.default.tabs},h.default.createElement("div",{className:C.default.tabsHeader},this.tabOptions.map((function(t){return e.renderTabItem(t)}))),h.default.createElement("div",{className:C.default.tabsBody})),h.default.createElement("div",{className:C.default.chartContainer},this.renderChart()))))}},{key:"cluster",get:function(){return this.props.clusterDetail.name}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,b.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"tabOptions",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics),t=[{icon:"cpu",type:"cpu",name:"CPU",unitType:"cpu",used:this.getValue(e[P.cpu_usage]),total:this.getValue(e[P.cpu_total])},{icon:"memory",type:"memory",name:"MEMORY",unitType:"memory",used:this.getValue(e[P.memory_usage]),total:this.getValue(e[P.memory_total])},{icon:"gpu",type:"gpu",name:"GPU",used:this.getValue(e[P.gpu_usage]),total:this.getValue(e[P.gpu_total])},{icon:"computing",type:"gpu_merrory",name:"GPU_MEMORY",unit:"Gi",unitType:"memory",used:this.getValue(e[P.gpu_memory_usage]),total:this.getValue(e[P.gpu_memory_total])},{icon:"storage",type:"storage",name:"DISK",unitType:"disk",used:this.getValue(e[P.disk_size_usage]),total:this.getValue(e[P.disk_size_capacity])},{icon:"pod",type:"pod",name:"POD_PL",unit:"",used:this.getValue(e[P.pod_count]),total:this.getValue(e[P.pod_capacity])}];return(0,O.hideGPUByLicense)(t,this.cluster)}},{key:"renderChartOption",get:function(){var e=[{key:"CPU_USAGE",type:"utilisation",renderTitle:function(){return t("CPU_UTILISATION_TCAP")},category:"cpu",unit:"%",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.cpu_utilisation,".data.result"))},{key:"MEMORY_USAGE",type:"utilisation",renderTitle:function(){return t("MEMORY_UTILISATION_TCAP")},category:"memory",unit:"%",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.memory_utilisation,".data.result"))},{key:"GPU_USAGE",type:"utilisation",renderTitle:function(){return t("GPU_UTILIZATION")},category:"gpu",unit:"%",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.gpu_utilization,".data.result"))},{key:"GPU_MEMORY_USAGE",renderTitle:function(){return t("GPU_MEMORY_UTILIZATION")},type:"utilisation",category:"gpu_merrory",unit:"%",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.gpu_memory_utilization,".data.result"))},{key:"DISK_USAGE",type:"utilisation",renderTitle:function(){return t("DISK_SIZE_UTILISATION_TCAP")},category:"storage",unit:"%",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.disk_utilisation,".data.result"))},{key:"POD_COUNT",title:"POD_COUNT",category:"pod",unit:"",legend:["VALUE"],data:(0,b.default)(this.metrics,"".concat(P.pod_count,".data.result"))}];return(0,O.hideGPUByLicense)(e,this.cluster)}}]),r}(h.default.Component))||c;a.default=w},3353:function(e,t,a){e.exports={container:"_3AfNjV_69JEh6a-Ki6__ME",header:"_1KlUEi5CK7QfxyrYRm_PvN",title:"wxv8jUlnhu24IEsJ8B4bV",timeSelector:"_3LIahHmW7JD-ASZ0_IvGdl",tabs:"_3fZrB3MhmR4IMkudBgI2Hb",tabsHeader:"_16NEdMhyLw7u5fkRrSHGXu",tabItem:"_1VUPfd9JbUdb-RWTcl3s8Y",label:"_1g96nJUyAxnNVHQpEt-Tu4",value:"_102usDIj3RFrFQc0qzmjkL",progress:"_1jJ2mvEYx3w8f0WNYtBgUn",progressActive:"_1rMf9_vH9PUUNoTdhRT1CY",checked:"BmAIrTk8YXWlhoCQ3W2RT",chartContainer:"_2CnJeYKVn7aTV8NVZDMLte",tabItem_tooltip:"_3AgVoyIMKNanAI4WqrWE-p"}},3354:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(194),r(11),r(6),r(20),r(8),r(13),r(9),r(4),r(193),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(194),r(11),r(6),r(20),r(27),r(30),r(33),r(17),r(8),r(13),r(9),r(4),r(193),r(322),r(21),r(16),r(40),r(10),r(7);var o=n(r(318)),u=n(r(42)),l=n(r(32));r(36);var c,i=n(r(43)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=n(r(0)),v=r(245),y=n(r(893)),g=r(192),_=r(821),E=n(r(5)),b=n(r(26)),O=n(r(69)),S=r(804),k=r(18),C=n(r(3355));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P={oomkilled:"cluster_pod_oomkilled_count",pending:"cluster_pod_pending_count",evict:"cluster_pod_evicted_count",pod_total:"cluster_pod_count",pod_running:"cluster_pod_running_count",pod_pending:"cluster_pod_pending_count",pod_succeeded:"cluster_pod_succeeded_count",pod_failed:"cluster_pod_failed_count",pod_unknown:"cluster_pod_unknown_count",guaranteed:"cluster_pod_qos_guaranteed_count",burstable:"cluster_pod_qos_burstable_count",bestEffort:"cluster_pod_qos_besteffort_count"},w=(0,v.observer)(c=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).monitorStore=new y.default({cluster:e.props.cluster}),e.state={params:{times:10,step:"48m"}},e.fetchData=function(){var t=(0,i.default)(u.default.mark((function t(a){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(R(R({metrics:Object.values(P)},e.state.params),a));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return parseFloat((0,b.default)(e,"value[1]",0))},e.renderChartTitle=function(e){var a=e.icon,r=e.imgIcon,n=e.used,o=e.title;return h.default.createElement("div",{className:C.default.chartTitle},r?h.default.createElement("img",{src:r}):h.default.createElement(g.Icon,{name:a,size:40}),h.default.createElement("div",{className:C.default.chartInfo},h.default.createElement("p",null,n),h.default.createElement("p",null,t(o))))},e.renderTooltipQos=function(){var e=h.default.createElement("div",{className:C.default.qosContent},h.default.createElement("p",null,t.html("QOS_GUARANTEED")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BURSTABLE")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BESTEFFORT")));return h.default.createElement(g.Tooltip,{content:e},h.default.createElement(g.Icon,{name:"question",size:16}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(e){var a=(0,S.getAreaChartOps)(e);return(0,O.default)(a.data)?h.default.createElement("p",{className:C.default.noData},t("NO_DATA")):h.default.createElement(_.MediumArea,(0,o.default)({},a,{noTitle:!0,top:4,height:48,width:"100%",key:e.title}))}},{key:"renderPie",value:function(e){var t=e.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement(h.default.Fragment,null,t&&h.default.createElement("div",{className:C.default.emptyPie},h.default.createElement("div",null)),h.default.createElement(_.MultiPie,{legendClassName:C.default.legendClassName,dataList:e.dataList,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 166px)"}}))}},{key:"render",value:function(){var e=this,a=this.monitorStore.isLoading;return h.default.createElement("div",{className:C.default.container},h.default.createElement("div",{className:C.default.header},h.default.createElement("div",{className:C.default.title},t("POD_PL"))),h.default.createElement(g.Loading,{spinning:a},h.default.createElement("div",{className:C.default.flexcontainer},h.default.createElement("div",{className:(0,E.default)(C.default.chartbox,C.default.status)},this.renderPieOption.map((function(a,r){var n=a.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement("div",{className:(0,E.default)(C.default.item_pie,C.default.item),key:r},h.default.createElement("div",{className:C.default.pie_title},t(a.title),h.default.createElement("span",{className:C.default.pie_title_tooltip},"QoS"===a.title&&e.renderTooltipQos())),h.default.createElement("div",{className:C.default.pie_box},n?h.default.createElement("div",{className:C.default.pieNoData},h.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/doughnut_chart_duotone.svg"}),h.default.createElement("p",null,t("NO_DATA"))):h.default.createElement(h.default.Fragment,null,e.renderPie(a),h.default.createElement("div",{className:C.default.summary},h.default.createElement("p",null,a.total),h.default.createElement("p",null,t("ALL"))))))}))),h.default.createElement("div",{className:C.default.chartbox},this.renderChartOption.map((function(t,a){return h.default.createElement("div",{className:(0,E.default)(C.default.item,C.default.areaChartItem),key:a},e.renderChartTitle(t),h.default.createElement("div",{className:C.default.chartBox},e.renderChart(t)))}))))))}},{key:"metrics",get:function(){return(0,k.toJS)(this.monitorStore.data)}},{key:"renderChartOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{category:"oomkilled",title:"OOM_KILL_PODS",icon:"error",unit:"",legend:["OOM_KILL_PODS"],data:(0,b.default)(this.metrics,"".concat(P.oomkilled,".data.result")),used:this.getValue(e[P.oomkilled])},{category:"pending",title:"PENDING_PODS",icon:"history-duotone",unit:"",legend:["PENDING_PODS"],data:(0,b.default)(this.metrics,"".concat(P.pending,".data.result")),used:this.getValue(e[P.pending])},{category:"evict",title:"EVICTED_PODS",unit:"",legend:["EVICTED_PODS"],icon:"logout-right-duotone",data:(0,b.default)(this.metrics,"".concat(P.evict,".data.result")),used:this.getValue(e[P.evict])}]}},{key:"renderPieOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{title:"POD_STATUS",total:this.getValue(e[P.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#F5A623","#79879C","#CA2621","#E3E9EF","#EFF4F9"],data:[{name:t("RUNNING"),value:this.getValue(e[P.pod_running])},{name:t("PENDING"),value:this.getValue(e[P.pod_pending])},{name:t("COMPLETED"),value:this.getValue(e[P.pod_succeeded])},{name:t("FAILED"),value:this.getValue(e[P.pod_failed])},{name:t("UNKNOWN"),value:this.getValue(e[P.pod_unknown])}]}]},{title:"QoS",total:this.getValue(e[P.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#329DCE","#F5A623","#EFF4F9"],data:[{name:"Guaranteed",value:this.getValue(e[P.guaranteed])},{name:"Burstable",value:this.getValue(e[P.burstable])},{name:"BestEffort",value:this.getValue(e[P.bestEffort])}]}]}]}}]),r}(h.default.Component))||c;a.default=w},3355:function(e,t,a){e.exports={container:"_1KXDp6aGvTp3B_76jde76g",flexcontainer:"aa63oPBQk4YccjmIB7Tf9",header:"p0KevOJsuDpyFtpWy-Pmd",title:"_3lf4VoLw6TPRzGqQQqqXAy",chartbox:"_3rWJ6cDNQm7VQRaU1blM4C",status:"_3MNES7gfSxsOPIJfE685LF",item:"_1Kvjm9p_EFdynInmm0cLW-",chartTitle:"_187CCI_SZXINFXBWbawtoj",chartInfo:"_1yqGhF3ibLvdKq8jQ74m5Z",areaChartItem:"_2P17qQOGvnv6I_q2AIevQu",chartBox:"TIDiE53zz07X2qn4FWfbn",noData:"_2OYrYrcLQRhPNLGAvXK7h5",item_pie:"_3VMERMVFngxvFJA_26CjSZ",pie_title:"_3O6cFbvaVvKT56AbX_QwpL",pie_title_tooltip:"_1YotQOmdCOkQBRQYot574B",pie_box:"_3QATPh7y3GIIi3exaO4_5Y",legendClassName:"_3RmUw3Nkybn2574L0Z3tpa",pieNoData:"bOPidX29Du8n9Vdf6Rkbn",summary:"_3ki2HjqdR-jG5-iwK7mveQ",emptyPie:"_1tzQdq-cW2zRl4MEvRpmfk"}},3356:function(e,t,a){e.exports={header:"_3TIkcixsbk2rfOzvmSglll",title:"_2If3z4jEFyrdpEwSOz9Cd0",operator:"_2d8HFTvIeFbq48T_2_INiL",indicator:"_1LeQtqOY9e2t9Fxhx4vfwN",disabled:"_2u2IPfud0Pkfs92q2QRihf","margin-t0":"_3y79Yhcw03152ck3knp7Sm",padding12:"_1oddtKEmBPr2Q78MWdiz8P",showMore:"_2k_QK2HXB_eu_JnMgIqnk0",text:"_1zkshTewK41i-RbRj0OILz",clusterTitle:"Bzo6m09_knXXEuHuzNYwz",content:"_3l_a0hgmxdE69BM0ImrALf"}},3357:function(e,a,r){"use strict";r(17);var n=r(19),o=r(163);r(3),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var u,l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(26)),p=o(r(0)),m=r(18),h=r(245),v=r(192),y=n(r(802)),g=n(r(801)),_=n(r(840)),E=n(r(164)),b=r(461),O=r(805),S=n(r(1058)),k=n(r(3358)),C=n(r(3363));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var R=(0,h.inject)("rootStore")(u=(0,h.observer)(u=(0,O.trigger)(u=function(e){(0,i.default)(r,e);var a=T(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).kubekeyClusterStore=new S.default,e.websocket=e.props.rootStore.websocket,e.initWebsocket=function(){var t=e.props,a=t.store,r=t.match,n=a.getWatchUrl({name:r.params.cluster});n&&(e.websocket.watch(n),e.disposer=(0,m.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.fetchDetail(a.detail)})))},e.handleCopy=function(){(0,b.copyToClipboard)((0,m.toJS)(e.props.store.agent)),E.default.success({content:t("COPY_SUCCESSFUL")})},e.showEditYAML=function(){var t=e.kubekeyClusterStore;e.trigger("resource.yaml.edit",{store:t,detail:(0,m.toJS)(t.detail)})},e.rerun=function(){e.kubekeyClusterStore.patch(e.kubekeyClusterStore.detail,{spec:{rerunTrigger:(new Date).getTime()}})},e.handleMenuClick=function(t,a){switch(a){case"edit-yaml":e.showEditYAML();break;case"rerun":e.rerun()}},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.store.detail,t=e.name,a=e.conditions;"True"===(0,f.default)(a,"Initialized.status")&&this.props.store.fetchAgent({cluster:t}),this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"renderMenu",value:function(){return p.default.createElement(v.Menu,{onClick:this.handleMenuClick},p.default.createElement(v.Menu.MenuItem,{key:"edit-yaml"},p.default.createElement(v.Icon,{name:"pen"})," ",t("EDIT_YAML")),p.default.createElement(v.Menu.MenuItem,{key:"rerun"},p.default.createElement(v.Icon,{name:"refresh"})," ",t("RERUN")))}},{key:"render",value:function(){var e=this.props.store,a=e.detail,r=e.isAgentLoading,n=e.agent,o=a.kkName,u=a.conditions,l=a.connectionType;return"False"===(0,f.default)(u,"Initialized.status")?p.default.createElement(y.default,null,p.default.createElement("div",{className:C.default.title},p.default.createElement(v.Loading,{size:28}),p.default.createElement(g.default,{title:t("CLUSTER_INIT_FAILED"),description:(0,f.default)(u,"Initialized.reason")}))):o?p.default.createElement(y.default,{className:C.default.wrapper},p.default.createElement("div",{className:C.default.title},p.default.createElement(g.default,{icon:"cluster",title:t("CREATING_CLUSTER"),description:t.html("CREATING_CLUSTER_DESC")}),p.default.createElement("div",{className:C.default.action},p.default.createElement(v.Dropdown,{theme:"dark",content:this.renderMenu(),placement:"bottomRight"},p.default.createElement(v.Button,{type:"flat",icon:"more"})))),p.default.createElement(k.default,{name:o,store:this.kubekeyClusterStore})):p.default.createElement(y.default,{className:C.default.wrapper},p.default.createElement("div",{className:C.default.title},p.default.createElement(v.Loading,{size:28}),p.default.createElement(g.default,{title:t("WAIT_FOR_CLUSTER"),description:t("WAIT_FOR_CLUSTER_DESC")})),"proxy"===l&&p.default.createElement("div",{className:C.default.content},p.default.createElement("div",{className:C.default.card},p.default.createElement(g.default,{title:t.html("CLUSTER_AGENT_TIP_1")})),p.default.createElement("div",{className:C.default.card},p.default.createElement(g.default,{className:"margin-b12",title:t.html("CLUSTER_AGENT_TIP_2")}),p.default.createElement(v.Button,{className:C.default.copy,onClick:this.handleCopy},t("COPY")),p.default.createElement(v.Loading,{spinning:r},n?p.default.createElement(_.default,{mode:"yaml",className:C.default.editor,options:this.editOptions,value:n}):null)),p.default.createElement("div",{className:C.default.card},p.default.createElement(g.default,{title:t.html("CLUSTER_AGENT_TIP_3"),description:t.html("CLUSTER_AGENT_TIP_3_DESC")}))),o&&p.default.createElement(k.default,{name:o}))}},{key:"editOptions",get:function(){return{width:"100%",height:"100%",readOnly:!0}}}]),r}(p.Component))||u)||u)||u;a.default=R},3358:function(e,t,a){"use strict";a(17);var r=a(19),n=a(163);a(3),a(14),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(14),a(4),a(16),a(40),a(10);var o,u=r(a(25)),l=r(a(28)),c=r(a(38)),i=r(a(39)),s=r(a(35)),d=n(a(0)),f=a(18),p=a(245),m=r(a(333)),h=r(a(3359)),v=r(a(3361));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(0,p.observer)(o=function(e){(0,c.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).store=e.props.store,e.websocket=new m.default,e.initWebsocket=function(){var t=e.props.name;if(t){var a=e.store.getWatchUrl({name:t});a&&(e.websocket.watch(a),e.disposer=(0,f.reaction)((function(){return e.websocket.message}),(function(t){"MODIFIED"!==t.type&&"ADDED"!==t.type||(e.store.detail=e.store.mapper((0,f.toJS)(t.object)))})))}},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.store.detail;return d.default.createElement("div",{className:"padding-12"},d.default.createElement(h.default,{detail:e}),d.default.createElement(v.default,{detail:e}))}}]),a}(d.Component))||o;t.default=g},3359:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);r(3),r(20),r(4),r(16),r(29),r(10),r(71),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(20),r(30),r(4),r(16),r(40),r(29),r(10),r(71);var u=o(r(32)),l=o(r(25)),c=o(r(28)),i=o(r(38)),s=o(r(39)),d=o(r(35)),f=n(r(0)),p=o(r(26)),m=o(r(5)),h=r(192),v=r(1535),y=o(r(3360));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,i.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"getBarLength",value:function(e){if(0===e.length)return"20px";var t=e.length-1,a=e[t].status;return"calc(".concat(20*t,"% - ").concat(24*t-(a?80:60),"px)")}},{key:"render",value:function(){var e=(0,p.default)(this.props.detail,"status.Conditions",[]);return f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("div",{className:y.default.card},f.default.createElement("div",{className:y.default.title},t("CLUSTER_CREATION_PROGRESS"),"",f.default.createElement(h.Tooltip,{content:t("CLUSTER_CREATION_PROGRESS_TIP")},f.default.createElement(h.Icon,{name:"question"}))),f.default.createElement("div",{className:y.default.progress},f.default.createElement("div",{className:y.default.bar},f.default.createElement("div",{className:y.default.colorBar,style:{width:this.getBarLength(e)}})),f.default.createElement("div",{className:y.default.dots},v.CLUSTER_CREATING_STEPS.map((function(a,r){return f.default.createElement("div",{key:a,style:{left:"".concat(20*r,"%")}},f.default.createElement("div",{className:(0,m.default)(y.default.circle,(0,u.default)({},y.default.checked,r<=e.length-1))},r<=e.length-1&&((0,p.default)(e,"[".concat(r,"].status"))?f.default.createElement(h.Icon,{name:"check",size:14,type:"light"}):f.default.createElement(h.Icon,{name:"dot",size:14,type:"light"}))),f.default.createElement("div",null,t(a.toUpperCase().replace(/\s+/g,"_"))))}))))))}}]),r}(f.Component);a.default=_},3360:function(e,t,a){e.exports={wrapper:"xYCZzciHY43vhVTrp7xSh",card:"_2kmqpwwfGMsHH9oJWvLCE3",title:"_3MTBbVd_VKS-expBXUCKaT",progress:"_1mVqv7Bvf0EM6_nde2Kyoc",bar:"D50q03_8jlQUkGn4-ArPR",colorBar:"_3ZgBAbIKm1KQvhHUfK1aOp",dots:"rqHnXC7ewOYA30eJNVDPX",circle:"kdmVG3uMIdl6SzCY33nRO",checked:"_3a8-eYwYQuiJ6UzAKAsl3X"}},3361:function(e,a,r){"use strict";r(17);var n=r(19),o=r(163);r(20),r(4),r(16),r(29),r(10),r(66),r(71),r(139),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(20),r(30),r(4),r(16),r(40),r(29),r(10),r(66),r(71);var u,l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=o(r(0)),m=n(r(5)),h=r(18),v=r(245),y=n(r(26)),g=n(r(69)),_=n(r(801)),E=n(r(1208)),b=n(r(320)),O=n(r(333)),S=n(r(1044)),k=r(61),C=r(1535),T=n(r(3362));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,v.observer)(u=function(e){(0,s.default)(r,e);var a=R(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).watchLogs=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo");t.containerStore.watchLogs({namespace:e.namespace,podName:(0,y.default)(e,"pods[0].name"),container:(0,y.default)(e,"pods[0].containers[0].name"),timestamps:!0,follow:!0},t.scrollToBottom)},t.watchJob=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo"),a=t.workloadStore.getWatchUrl(e);a&&(t.websocket.watch(a),t.jobDisposer=(0,h.reaction)((function(){return t.websocket.message}),(function(e){"MODIFIED"!==e.type&&"ADDED"!==e.type||(t.workloadStore.detail=t.workloadStore.mapper((0,h.toJS)(e.object)))})))},t.handleToggle=function(){t.setState((function(e){return{showContent:!e.showContent}}))},t.scrollToBottom=function(){var e=t.logRef.current;e&&(e.scrollTop=e.scrollHeight)},t.state={showContent:!1},t.logRef=p.default.createRef(),t.workloadStore=new b.default("jobs"),t.containerStore=new S.default,t.websocket=new O.default,t.jobNameDisposer=(0,h.when)((function(){return!(0,g.default)((0,y.default)(t.props.detail,"status.jobInfo.name"))}),(function(){return t.watchJob()})),t.podNameDisposer=(0,h.when)((function(){return!(0,g.default)((0,y.default)(t.props.detail,"status.jobInfo.pods[0].name"))}),(function(){return t.watchLogs()})),t}return(0,i.default)(r,[{key:"componentWillUnmount",value:function(){this.websocket.close(),this.jobDisposer&&this.jobDisposer(),this.jobNameDisposer&&this.jobNameDisposer(),this.podNameDisposer&&this.podNameDisposer(),this.containerStore.stopWatchLogs()}},{key:"renderTitle",value:function(){var e=this.state.showContent,a=(0,y.default)(this.props.detail,"status.Conditions",[]),r=C.CLUSTER_CREATING_STEPS[Math.max(a.length-1,0)],n=(0,h.toJS)(this.workloadStore.detail),o=n.startTime?p.default.createElement(E.default,{data:n,module:"jobs"}):"-";return p.default.createElement("div",{className:(0,m.default)(T.default.title,(0,l.default)({},T.default.isOpen,e)),onClick:this.handleToggle},p.default.createElement(_.default,{icon:"log",title:t("LOGS"),description:t("CURRENT_STEP",{step:t(r.toUpperCase().replace(/\s+/g,"_"))})}),p.default.createElement(_.default,{title:o,description:t("STATUS")}))}},{key:"renderContent",value:function(){var e=this.containerStore.logs.data,a=this.state.showContent,r=(0,g.default)(e)?t("FETCHING_LOGS"):e,n=String(r).replace(/\\r\\n/g,"\n").split("\n");return p.default.createElement("div",{className:(0,m.default)(T.default.content,(0,l.default)({},T.default.visible,a))},p.default.createElement("div",{className:T.default.logs,ref:this.logRef},n.map((function(e,t){var a=e.match(k.PATTERN_UTC_TIME),r=a?a[0]:t,n=a?e.replace(a[0],""):e;return p.default.createElement("p",{key:r,dangerouslySetInnerHTML:{__html:n}})}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:T.default.wrapper},this.renderTitle(),this.renderContent())}}]),r}(p.Component))||u;a.default=A},3362:function(e,t,a){e.exports={wrapper:"_1ZYGr32d6j_R5baIgXQazX",title:"_2ZpzJeyVoDWjVKxqwHGm3g",isOpen:"jTlJLDldR-XG-iyh-mjK3",content:"_3f-fp8mhWq2tAQ_YVhTLKe",visible:"_28OOucN0W4PlaBPh8Ght1Q",logs:"_3ic5zBiEYnODK3W48mXCcw"}},3363:function(e,t,a){e.exports={wrapper:"R9IBUiaF5PkTbPyP6RWNd",title:"_1JQ4zn_Cw-dmE1ZDn69Txe",content:"_1otAQN1KwOXRV4R1rsL2ya",card:"_19gcBhB12xSSxmo7Sz-A-A",copy:"_3ssav0j2qS76PABoSIpIg8",action:"XPuWslQJNnmvAm5rlLuD_"}},3364:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(137),r(3),r(11),r(41),r(6),r(67),r(20),r(98),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(41),r(6),r(67),r(20),r(27),r(98),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var u,l=n(r(32)),c=n(r(318)),i=n(r(58)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=n(r(26)),v=n(r(259)),y=n(r(0)),g=r(192),_=n(r(164)),E=n(r(803)),b=n(r(811)),O=o(r(807)),S=r(56),k=r(61),C=n(r(505)),T=n(r(453)),R=r(1536);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=(0,O.default)({store:new T.default,name:"STORAGE_CLASS",module:"storageclasses"})(u=function(e){(0,f.default)(r,e);var a=w(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).accessorStore=new C.default,e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.prefix;return[{title:t("NAME"),key:"name",dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(a,r){var o=r.default,u=(0,S.getDisplayName)(r);return u=o?y.default.createElement("span",null,y.default.createElement("span",{className:"margin-r12"},u)," ",y.default.createElement(g.Tag,null,t("DEFAULT"))):u,y.default.createElement(E.default,{icon:k.ICON_TYPES[e.module],to:"".concat(n,"/").concat(a),title:u,desc:r.description})}},{title:t("storageclasses"),dataIndex:"storage.kubesphere.io/storagetype",isHideable:!0,search:!0,filters:R.storageClasses.map((function(e){return{value:e.value,text:t(e.label)}})),render:function(e,a){var r,n,o=a.storagetype;return t(null!==(r=null===(n=R.storageClasses.find((function(e){return e.value===o})))||void 0===n?void 0:n.label)&&void 0!==r?r:R.storageClasses[3].label)}},{title:t("PVC_COUNT"),dataIndex:"volumeCount",isHideable:!0,render:function(e,t){return(0,h.default)(t,'annotations["kubesphere.io/pvc-count"]')||0}},{title:t("ALLOW_VOLUME_CLONE"),dataIndex:"annotations",isHideable:!0,render:function(e){return"true"===e["storageclass.kubesphere.io/allow-clone"]?t("TRUE"):t("FALSE")}}].concat((0,i.default)(globals.app.hasClusterModule(e.props.match.params.cluster,"storage-utils")?[{title:t("ALLOW_VOLUME_SNAPSHOT"),dataIndex:"_originData",isHideable:!0,render:function(e){return"true"===e.metadata.annotations["storageclass.kubesphere.io/allow-snapshot"]?t("TRUE"):t("FALSE")}}]:[]),[{title:t("ALLOW_VOLUME_EXPANSION"),dataIndex:"allowVolumeExpansion",isHideable:!0,render:function(e){return e?t("TRUE"):t("FALSE")}},{title:t("PROVISIONER"),dataIndex:"provisioner",isHideable:!0}])},e.showCreate=function(){return e.props.trigger("storageclass.create",{name:"STORAGE_CLASS",module:e.props.module,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleBatchDelete=function(){e.props.trigger("storageclass.batch.delete",{accessorStore:e.accessorStore,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleDelete=function(t){e.props.trigger("storageclass.delete",{detail:t,accessorStore:e.accessorStore,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleUpdate=function(t){e.props.trigger("torageclass.update",{module:e.props.module,cluster:e.props.match.params.cluster,detail:t,success:e.props.getData})},e}return(0,d.default)(r,[{key:"validateSelect",value:function(e){var t=this,a=e.callback;return function(){var e=t.list,r=e.selectedRowKeys,n=e.data,o=n.some((function(e){return(0,v.default)(r,e.name)&&e.associationPVCCount}));return o?t.notifyDeleteTips():a.apply(void 0,arguments)}}},{key:"notifyDeleteTips",value:function(){_.default.error({content:"".concat(t("DEPENDENT_STORAGE_CLASS_DELETE_TIPS"))})}},{key:"render",value:function(){var e=this.props.tableProps;return y.default.createElement(O.ListPage,this.props,y.default.createElement(b.default,(0,c.default)({},e,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"tableActions",get:function(){var e=this.props.tableProps,a=(0,h.default)(e,"tableActions.selectActions",[]).filter((function(e){return"delete"!==e.key}));return P(P({},e.tableActions),{},{selectActions:[].concat((0,i.default)(a),[{action:"delete",key:"delete",onClick:this.handleBatchDelete,text:t("DELETE"),type:"danger"}])})}},{key:"itemActions",get:function(){var e=this,a=this.props.tableProps,r=["delete","edit"],n=(0,h.default)(a,"itemActions",[]).filter((function(e){return!r.includes(e.key)}));return[].concat((0,i.default)(n),[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return e.handleUpdate(t)}},{action:"delete",key:"delete",icon:"trash",onClick:function(t){return e.handleDelete(t)},text:t("DELETE"),type:"danger"}])}}]),r}(y.default.Component))||u;a.default=D},3365:function(e,a,r){"use strict";var n=r(19);r(12),r(11),r(6),r(20),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(139),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(11),r(6),r(20),r(27),r(30),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var o,u=n(r(32)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(245),m=r(319),h=n(r(467)),v=n(r(3366));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).pv=new h.default,t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.pv.getKsVersion(this.props.match.params)}},{key:"render",value:function(){return f.default.createElement(f.default.Fragment,null,(0,m.renderRoutes)(v.default))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"bannerProps",get:function(){return{className:"margin-b12",description:t("PERSISTENT_VOLUME_CLAIM_DESC"),module:"persistentvolumeclaims",title:t("PERSISTENT_VOLUME_CLAIM_PL")}}},{key:"routes",get:function(){return v.default.filter((function(e){return!!e.title})).map((function(e){return g(g({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(f.default.Component))||o)||o;a.default=E},3366:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(3367)),u=r(a(3371)),l="/clusters/:cluster/volumes",c=[{path:"".concat(l,"/Volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:o.default,exact:!0},{path:"".concat(l,"/PV"),title:"PERSISTENT_VOLUME_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/Volumes"),exact:!0})];t.default=c},3367:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(68),r(20),r(195),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(68),r(20),r(27),r(195),r(30),r(14),r(4),r(21),r(16),r(40),r(29),r(10),r(66);var o=n(r(318)),u=n(r(42));r(36);var l,c=n(r(43)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=r(192),h=n(r(867)),v=n(r(803)),y=n(r(808)),g=r(807),_=n(r(1209)),E=n(r(69)),b=n(r(834)),O=n(r(0)),S=r(438),k=n(r(467)),C=n(r(451)),T=r(56),R=r(61),A=r(440),P=n(r(3370));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,g.withClusterList)({store:new C.default,module:"persistentvolumeclaims",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(l=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).pvStore=new k.default,e.handleTabChange=function(){var t=e.props.match.params.cluster;e.props.rootStore.routing.push("/clusters/".concat(t,"/PV"))},e.showAction=function(){return!0},e.getItemDesc=function(e){var t=(0,A.getVolumeStatus)(e);return(0,E.default)(t)?e.storageClassName||"-":O.default.createElement(b.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.mapperAccessMode=function(e){var t=(0,T.map_accessModes)(e);return O.default.createElement("span",null,t.join(","))},e.renderAccessTitle=function(){var e=O.default.createElement("div",null,O.default.createElement("div",null,t("RWO_DESC")),O.default.createElement("div",null,t("ROX_DESC")),O.default.createElement("div",null,t("RWX_DESC")));return O.default.createElement("div",{className:P.default.mode_title},t("ACCESS_MODE_TCAP"),O.default.createElement(m.Tooltip,{content:e},O.default.createElement(m.Icon,{name:"question",size:16,className:P.default.question})))},e.pvYamlView=function(){var t=(0,c.default)(u.default.mark((function t(a){var r,n;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.spec.volumeName,n=e.props.match.params.cluster,t.next=4,e.pvStore.fetchDetail({cluster:n,name:r});case 4:return t.abrupt("return",e.props.trigger("resource.yaml.edit",{detail:e.pvStore.detail,yaml:e.pvStore.detail._originData,readOnly:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCreate=function(){var t=e.props,a=t.store,r=t.match,n=t.module;return e.props.trigger("volume.create",{store:a,module:n,onAddPv:function(){return e.props.trigger("pv.create",{store:e.pvStore})},cluster:r.params.cluster})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.store.getKsVersion(this.props.match.params)}},{key:"getStatus",value:function(){return R.VOLUME_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,o=this.props.match.params.cluster,u={title:t("PERSISTENT_VOLUME"),dataIndex:"_originData",isHideable:!0,search:!1,width:"25%",render:function(a){return O.default.createElement("div",{id:"pvColumn",className:P.default.pv_content},O.default.createElement(S.Link,{to:"/clusters/".concat(o,"/pv/").concat(a.spec.volumeName)},a.spec.volumeName),a.spec.volumeName&&O.default.createElement(m.Tooltip,{content:t("VIEW_YAML")},O.default.createElement(m.Icon,{className:P.default.yaml,name:"log",size:16,onClick:function(){return e.pvYamlView(a)}})))}},l=[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,width:"20%",render:function(t,a){return O.default.createElement(v.default,{icon:"storage",iconSize:40,to:"Terminating"===a.phase?"":"/clusters/".concat(o,"/projects/").concat(a.namespace,"/volumes/").concat(t),isMultiCluster:a.isFedManaged,desc:e.getItemDesc(a),title:(0,T.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"15%",render:function(e,a){var r=a.phase;return O.default.createElement(y.default,{type:r,name:t("VOLUME_STATUS_".concat(r.toUpperCase())),flicker:!0})}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"10%",render:function(t){return e.mapperAccessMode(t)}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"12%",render:function(e,t){return O.default.createElement(_.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"15%",render:function(e){return(0,T.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}];return this.props.store.ksVersion>=3.2&&l.splice(2,0,u),l}},{key:"render",value:function(){var e=this.props,t=e.tableProps,a=e.match;return O.default.createElement(g.ListPage,this.props,O.default.createElement(h.default,(0,o.default)({},t,{className:"table-2-6",itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:a.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"tabs",get:function(){return{value:"Volume",onChange:this.handleTabChange,options:[{value:"Volume",label:t("PERSISTENT_VOLUME_CLAIM")},{value:"PV",label:t("PV")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(O.default.Component))||l;a.default=D},3368:function(e,a,r){"use strict";r(17);var n=r(19);r(20),r(14),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(20),r(14);var o=n(r(58)),u=n(r(0)),l=r(245),c=n(r(246)),i=r(192),s=r(56),d=n(r(3369)),f=function(e){return u.default.createElement("span",{className:d.default.option,key:e.value},e.isFedManaged?u.default.createElement("img",{className:d.default.indicator,src:"/extensions-static/ks-console-embed/dist/v3dist/assets/cluster.svg"}):u.default.createElement(i.Icon,{name:"project"}),e.label)},p=(0,l.observer)((function(e){var a=e.namespace,r=e.list,n=e.onChange,l=e.onFetch,p=(0,c.default)(r,["page","total","limit"]),m=(0,o.default)(r.data.map((function(e){return{label:(0,s.showNameAndAlias)(e),value:e.name,isFedManaged:e.isFedManaged}})));return u.default.createElement(i.Select,{className:d.default.select,value:a,onChange:n,options:m,placeholder:t("ALL_PROJECTS"),pagination:p,isLoading:r.isLoading,valueRenderer:f,optionRenderer:f,onFetch:function(e){l(e)},searchable:!0,clearable:!0})}));a.default=p},3369:function(e,t,a){e.exports={select:"_2YBMsPA_6y4KarYxsOs4xv",option:"zNLKUmmAgrOglv5eJIpKA"}},3370:function(e,t,a){e.exports={mode_title:"g8QlCJy-fQF9buKTjwNsv",question:"U5zHvmvvHdsAuoC5QNq1",pv_content:"_2jBC4N_eKhB_IMAWm0UTuO",yaml:"_345LgwPnsPDsRv68L_cgry"}},3371:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(3),r(11),r(6),r(88),r(68),r(20),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(88),r(68),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var u,l=n(r(32)),c=n(r(318)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=n(r(0)),h=n(r(69)),v=o(r(807)),y=n(r(811)),g=n(r(467)),_=r(56),E=r(192),b=r(440),O=r(61),S=n(r(834)),k=n(r(803)),C=n(r(808)),T=n(r(3372));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=(0,v.default)({store:new g.default,module:"persistentvolumes",name:"PERSISTENT_VOLUME",authKey:"persistentvolumeclaims",rowKey:"uid"})(u=function(e){(0,d.default)(r,e);var a=P(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.cantDelete=function(e){var t=e.status;return["Bound"].indexOf(t.phase)>-1},e.getItemDesc=function(e){var t=(0,b.getVolumeStatus)(e);return(0,h.default)(t)?e.storageClassName||"-":m.default.createElement(S.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged||["Bound"].indexOf(e.status.phase)>-1,name:e.name}},e.renderAccessTitle=function(){var e=m.default.createElement("div",null,m.default.createElement("div",null,t("RWO_DESC")),m.default.createElement("div",null,t("ROX_DESC")),m.default.createElement("div",null,t("RWX_DESC")));return m.default.createElement("div",{className:T.default.mode_title},t("ACCESS_MODE_TCAP"),m.default.createElement(E.Tooltip,{content:e},m.default.createElement(E.Icon,{name:"question",size:16,className:T.default.question})))},e.mapperAccessMode=function(e){var t=(0,_.map_accessModes)(e);return m.default.createElement("span",null,t.join(","))},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.getData;(0,t.trigger)("pv.create",{module:r,cluster:a.params.cluster,success:n})},e}return(0,s.default)(r,[{key:"getStatus",value:function(){return O.PV_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,a=this.props,r=a.getSortOrder,n=a.getFilteredValue,o=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(t,a){return m.default.createElement(k.default,{icon:"storage",iconSize:40,to:"Terminating"===a.phase?"":"/clusters/".concat(o,"/pv/").concat(t),isMultiCluster:a.isFedManaged,desc:e.getItemDesc(a),title:(0,_.getDisplayName)(a)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:n("status"),width:"10.56%",render:function(e){var a=e.phase;return m.default.createElement(C.default,{type:a,name:t("PV_STATUS_".concat(a.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",isHideable:!0,width:"7%",render:function(e){return m.default.createElement("div",null,m.default.createElement("p",null,e))}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.32%",render:function(t){return e.mapperAccessMode(t)}},{title:t("RECLAIM_POLICY"),dataIndex:"_originData",isHideable:!0,width:"7.74%",render:function(e){return e.spec.persistentVolumeReclaimPolicy}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:140,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return m.default.createElement(v.ListPage,this.props,m.default.createElement(y.default,(0,c.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,renderProjectSelect:!1,emptyProps:{desc:""}})))}},{key:"itemActions",get:function(){var e=this,a=this.props.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return a("resource.baseinfo.edit",{detail:t,success:e.props.getData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"view",show:this.showAction,onClick:function(t){return a("resource.yaml.edit",{detail:t,success:e.props.getData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,disabled:this.cantDelete,onClick:function(t){return a("pv.delete",A(A({},e.props.tableProps),{},{detail:t,success:e.props.getData}))}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger;return A(A({},a.tableProps.tableActions),{},{selectActions:[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:this.showAction,onClick:function(){return r("pv.batch.delete",A(A({},e.props.tableProps),{},{success:e.props.getData}))}}]})}}]),r}(m.default.Component))||u;a.default=w},3372:function(e,t,a){e.exports={mode_title:"_2vs_PnSPXebgvBy3nZuegb",question:"_3Y4c2IH7tgyRPkhZQxNA_0",pv_content:"_14XQ8_zmRwCjtgkz04Wzge",yaml:"_2_YhNvXVq70vjV7Tj6V3qY"}},3373:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(41),r(6),r(88),r(20),r(98),r(14),r(24),r(8),r(13),r(9),r(4),r(193),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(41),r(6),r(88),r(20),r(27),r(98),r(30),r(14),r(24),r(33),r(17),r(8),r(13),r(9),r(4),r(193),r(322),r(21),r(16),r(40),r(29),r(10),r(66),r(7);var o=n(r(318)),u=n(r(42)),l=n(r(32));r(36);var c,i=n(r(43)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=n(r(0)),v=n(r(69)),y=n(r(26)),g=n(r(165)),_=r(192),E=r(56),b=r(61),O=r(334),S=r(804),k=n(r(454)),C=n(r(1210)),T=n(r(1508)),R=r(807),A=n(r(803)),P=n(r(808)),w=n(r(802)),D=n(r(801)),N=n(r(799)),I=n(r(814)),L=n(r(811)),M=r(18),j=n(r(3377));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var Y={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",gpu_utilization:"node_gpu_utilization",gpu_used:"node_gpu_usage",gpu_total:"node_gpu_total",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_used:"node_gpu_memory_usage",gpu_memory_total:"node_gpu_memory_total",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},G=(0,R.withClusterList)({store:new k.default,name:"CLUSTER_NODE",module:"nodes"})(c=function(e){(0,f.default)(r,e);var a=V(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).store=e.props.store,e.monitoringStore=new C.default({cluster:e.cluster}),e.getData=function(){var t=(0,i.default)(u.default.mark((function t(a){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(U(U({},a),e.props.match.params));case 2:return t.next=4,e.monitoringStore.fetchMetrics(U(U({},e.props.match.params),{},{resources:e.store.list.data.map((function(e){return e.name})),metrics:Object.values((0,E.hideGPUByLicense)(Y,e.cluster)),last:!0}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnschedulable=function(e){return e.taints.some((function(e){return"node.kubernetes.io/unschedulable"===e.key}))},e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.handleOpenTerminal=function(t){var a=N.default.open({onOk:function(){N.default.close(a)},modal:T.default,cluster:e.cluster,title:t.name,nodename:t.name,isEdgeNode:!0})},e.getLastValue=function(t,a,r){var n=e.monitoringStore.data,o=((0,y.default)(n[a],"data.result")||[]).find((function(e){return(0,y.default)(e,"metric.node")===t.name})),u=(0,y.default)(o,"value[1]",0);return(0,S.getValueByUnit)(u,r)},e.getRecordMetrics=function(t,a){var r={};return a.forEach((function(a){var n=e.getLastValue(t,(0,E.hideGPUByLicense)(Y,e.cluster)[a.type],a.unit);r[a.type]=parseFloat(n)})),r},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var a=e.props,r=a.module,n=a.prefix,o=a.getSortOrder,u=a.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:o("name"),search:!0,key:"name",render:function(e,t){return h.default.createElement(A.default,{icon:b.ICON_TYPES[r],iconSize:40,to:"success"!==t.importStatus?null:"".concat(n,"/").concat(e),title:e,desc:t.ip})}},{title:t("STATUS"),dataIndex:"status",key:"status",filters:e.getStatus(),filteredValue:u("status"),isHideable:!0,search:!0,render:function(a,r){var n=(0,O.getNodeStatus)(r),o=r.taints;return h.default.createElement("div",{className:j.default.status},h.default.createElement(P.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),!(0,v.default)(o)&&"success"===r.importStatus&&h.default.createElement(_.Tooltip,{content:e.renderTaintsTip(o)},h.default.createElement("span",{className:j.default.taints},o.length)))}},{title:t("ROLE"),dataIndex:"role",filters:e.getRoles(),filteredValue:u("role"),isHideable:!0,search:!0,render:function(e){return-1===e.indexOf("master")?t("WORKER"):t("CONTROL_PLANE")}},{title:t("CPU_USAGE"),key:"cpu",isHideable:!0,render:function(a){var r=e.getRecordMetrics(a,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return h.default.createElement(D.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(r.cpu_utilisation)),r.cpu_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(r.cpu_used,"/").concat(r.cpu_total," ").concat(t("CORE_PL"))})}},{title:t("MEMORY_USAGE"),key:"memory",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return h.default.createElement(D.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(a.memory_utilisation)),a.memory_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.memory_used,"/").concat(a.memory_total," GiB")})}},{title:t("GPU_USAGE"),key:"gpu",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"gpu_used",unit:"Core"},{type:"gpu_total",unit:"Core"},{type:"gpu_utilization"}]);return h.default.createElement(D.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(a.gpu_utilization)),a.gpu_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.gpu_used,"/").concat(a.gpu_total," GPU")})}},{title:t("GPU_MEMORY_USAGE"),key:"gpu_memory",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"gpu_memory_used",unit:"Gi"},{type:"gpu_memory_total",unit:"Gi"},{type:"gpu_memory_utilization"}]);return h.default.createElement(D.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(a.gpu_memory_utilization)),a.gpu_memory_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.gpu_memory_used,"/").concat(a.gpu_memory_total," GiB")})}},{title:t("POD_PL"),key:"pods",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"pod_used"},{type:"pod_total"}]),r=a.pod_total?parseFloat(a.pod_used/a.pod_total):0;return h.default.createElement(D.default,{title:"".concat(e.toPercentage(r)),description:"".concat(a.pod_used,"/").concat(a.pod_total)})}},{title:t("ALLOCATED_CPU"),key:"allocated_resources_cpu",isHideable:!0,render:e.renderCPUTooltip},{title:t("ALLOCATED_MEMORY"),key:"allocated_resources_memory",isHideable:!0,render:e.renderMemoryTooltip}]},e.renderCPUTooltip=function(e){var a=h.default.createElement("p",null,1===(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_LIMIT_SI",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_LIMIT_PL",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}));return h.default.createElement(_.Tooltip,{content:a,placement:"top"},h.default.createElement(D.default,{title:1===(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_REQUEST_SI",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_REQUEST_PL",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(e){var a=h.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,E.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}));return h.default.createElement(_.Tooltip,{content:a,placement:"top"},h.default.createElement(D.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,E.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.store.fetchCount(this.props.match.params)}},{key:"toPercentage",value:function(e){var t=(0,g.default)(e)||isNaN(e)?0:Number(e);return"".concat(Math.ceil(100*t),"%")}},{key:"getStatus",value:function(){return b.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getRoles",value:function(){return[{text:t("CONTROL_PLANE"),value:"master"},{text:t("WORKER"),value:"worker"}]}},{key:"renderOverview",value:function(){var e=this.store,a=e.masterNum,r=e.list.total;return h.default.createElement(w.default,{className:"margin-b12"},h.default.createElement("div",{className:j.default.overview},h.default.createElement(D.default,{icon:"nodes",title:r,description:1===r?t("NODE_SI"):t("NODE_PL")}),h.default.createElement(D.default,{title:a,description:1===a?t("MASTER_NODE_SI"):t("MASTER_NODE_PL")})))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps,n=this.monitoringStore.isLoading;return h.default.createElement(R.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(I.default,(0,o.default)({},a,{title:t("CLUSTER_NODE_PL"),tips:this.tips})),this.renderOverview(),h.default.createElement(L.default,(0,o.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:(0,E.hideGPUByLicense)(this.getColumns(),this.cluster),isLoading:r.isLoading||n})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"tips",get:function(){return[{title:t("NODE_TYPES_Q"),description:t("NODE_TYPES_A")},{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.store,n=a.clusterStore,o=a.routing,u=a.trigger,l=a.name;return[{key:"uncordon",icon:"start",text:t("UNCORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getUnschedulable(t)},onClick:function(e){return r.uncordon(e).then(o.query)}},{key:"cordon",icon:"stop",text:t("CORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&!e.getUnschedulable(t)},onClick:function(e){return r.cordon(e).then(o.query)}},{key:"terminal",icon:"terminal",text:t("OPEN_TERMINAL"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getReady(t)},onClick:function(t){return e.handleOpenTerminal(t)}},{key:"logs",icon:"eye",text:t("VIEW_LOG"),action:"edit",show:function(e){return"success"!==e.importStatus},onClick:function(){return u("node.add.log",{detail:(0,M.toJS)(n.detail)})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(e){return"failed"===e.importStatus},onClick:function(e){return u("resource.delete",{type:l,detail:e,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this.props,a=e.trigger,r=e.routing,n=e.clusterStore,o=e.tableProps,u=[];return n.detail.kkName&&u.push({key:"add",type:"control",text:t("ADD"),action:"create",onClick:function(){return a("node.add",{kkName:n.detail.kkName||"ddd"})}}),U(U({},o.tableActions),{},{actions:u,selectActions:[{key:"taint",type:"default",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return a("node.taint.batch",{success:r.query})}}]})}}]),r}(h.default.Component))||c;a.default=G},3377:function(e,t,a){e.exports={taints:"B4t1khP3gUFICAah4YTP5",overview:"_39TiTBliLeivJdhXYoDplZ",resource:"_1f_DIoH3TOaX8dMUSn7UMb",unAuthord:"_29VjReB-cl3AzGmel2f8Vq"}},3378:function(e,a,r){"use strict";r(17);var n=r(19);r(11),r(41),r(20),r(51),r(14),r(4),r(16),r(29),r(10),r(66),r(198),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(11),r(41),r(20),r(51),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66),r(198);var o,u=n(r(25)),l=n(r(28)),c=n(r(38)),i=n(r(39)),s=n(r(35)),d=n(r(0)),f=r(245),p=n(r(69)),m=r(192),h=n(r(814)),v=r(250),y=n(r(1537)),g=n(r(3379)),_=n(r(3381));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=(0,f.inject)("rootStore")(o=(0,f.observer)(o=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var n;(0,u.default)(this,r),(n=a.call(this,e)).getColor=function(e){return e?"#f5a623":"#55bc8a"},n.getCount=function(e){var t=n.store.exceptionCount,a=n.store.healthyCount;return t[e]||a[e]||0},n.getConfigs=function(){return[{type:"kubesphere",title:"KubeSphere",icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/kubesphere.svg"},{type:"kubernetes",title:"Kubernetes",icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/kubernetes.svg"},{type:"istio",title:t("APPLICATION_GOVERNANCE"),icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/istio.svg",disabled:!globals.app.hasClusterModule(n.cluster,"servicemesh")},{type:"monitoring",title:t("MONITORING"),icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/monitoring.svg",disabled:!globals.app.hasClusterModule(n.cluster,"monitoring")},{type:"logging",title:t("LOGGING"),icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/logging.svg",disabled:!globals.app.hasClusterModule(n.cluster,"logging")},{type:"devops",title:"DevOps",icon:"/extensions-static/ks-console-embed/dist/v3dist/assets/dev-ops.svg",disabled:!globals.app.hasClusterModule(n.cluster,"devops")}]},n.handleTypeChange=function(e){n.setState({type:e})};var o=((0,v.parse)(location.search.slice(1))||{}).type;return n.state={type:o||"kubesphere"},n.configs=n.getConfigs(),n.store=new y.default,n.store.fetchList({cluster:n.cluster}),n}return(0,l.default)(r,[{key:"renderHeader",value:function(){return d.default.createElement(h.default,{icon:"components",title:t("SYSTEM_COMPONENT_PL"),description:t("SERVICE_COMPONENTS_DESC"),extra:d.default.createElement("div",{className:_.default.toolbar},this.renderBar())})}},{key:"renderBar",value:function(){var e=this,t=this.store.exceptionCount;return d.default.createElement("div",{className:"inline-block"},d.default.createElement(m.RadioGroup,{mode:"button",value:this.state.type,onChange:this.handleTypeChange},this.configs.filter((function(e){return!e.disabled})).map((function(a){var r=a.type,n=a.title;return d.default.createElement(m.RadioButton,{key:r,value:r},n,d.default.createElement(m.Tag,{color:e.getColor(t[r])},e.getCount(r)))}))))}},{key:"renderCards",value:function(e){var t=this;return d.default.createElement("div",{className:_.default.cards},e.map((function(e){return d.default.createElement(g.default,{key:e.name,component:e,cluster:t.cluster})})))}},{key:"renderComponents",value:function(e){var t=this.store.list.data,a=this.configs.find((function(t){return t.type===e}))||{},r=t[e];return(0,p.default)(r)?null:d.default.createElement("div",{className:_.default.cardsWrapper},d.default.createElement("div",{className:_.default.cardTitle},d.default.createElement("img",{src:a.icon,alt:a.title})),this.renderCards(r))}},{key:"renderList",value:function(){var e=this.store.list.isLoading,t=this.state.type;return e?d.default.createElement("div",{className:"loading"},d.default.createElement(m.Loading,null)):this.renderComponents(t)}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderHeader(),this.renderList())}},{key:"prefix",get:function(){return this.props.match.url}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(d.default.Component))||o)||o;a.default=b},3379:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(14),r(29),r(71),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(3),r(14),r(29),r(71);var o=n(r(247)),u=n(r(0)),l=r(438),c=r(192),i=n(r(808)),s=n(r(801)),d=r(440),f=n(r(3380)),p=function(e){var a=e.cluster,r=e.component,n=void 0===r?{}:r,p=n.name,m=n.namespace,h=(0,d.getComponentStatus)(n),v="".concat(String(p).replace(/[- ]/g,"_").toUpperCase(),"_DESC"),y=t(v);return u.default.createElement("div",{className:f.default.card,"data-test":"service-component"},u.default.createElement(c.Columns,null,u.default.createElement(c.Column,null,u.default.createElement(s.default,{icon:"components",title:u.default.createElement(l.Link,{to:"/clusters/".concat(a,"/components/").concat(m,"/").concat(p)},p),description:y!==v?u.default.createElement("p",null,y):null})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:u.default.createElement(i.default,{type:h,name:t(h.toUpperCase())}),description:t("STATUS")})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:"".concat(n.healthyBackends,"/").concat(n.totalBackends),description:t("REPLICA_COUNT")})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:n.startedAt?(0,o.default)(n.startedAt).toNow(!0):"-",description:t("RUNNING_TIME")}))))};a.default=p},3380:function(e,t,a){e.exports={card:"_3O6k823fCfWBHm-4VH76MN"}},3381:function(e,t,a){e.exports={header:"_1-v5mSMLmxnQo7Tu8omd_Z",title:"_3FG6c5gZtLtRyuppsme5WY",leftIcon:"_1x8pzzm00S4pgPncQM94Nh",rightIcon:"L7cV3c7hdKq6JtRIgkKlE",toolbar:"PwUtcNaXagxdRnj7x31t9",cardsWrapper:"gLLpHGp47EN2wrIe50Kvd",cardTitle:"_1_xaHL38_uU-TZcr3Fpw2n"}},3382:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(137),r(3),r(11),r(41),r(6),r(20),r(14),r(8),r(13),r(9),r(4),r(193),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.MetricTypes=void 0,r(12),r(137),r(31),r(3),r(11),r(41),r(6),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(193),r(21),r(16),r(40),r(29),r(10),r(66),r(7);var u=n(r(318)),l=n(r(42)),c=n(r(50));r(36);var i,s=n(r(43)),d=n(r(32)),f=n(r(25)),p=n(r(28)),m=n(r(38)),h=n(r(39)),v=n(r(35)),y=n(r(0)),g=n(r(26)),_=n(r(141)),E=n(r(803)),b=n(r(808)),O=n(r(814)),S=o(r(807)),k=n(r(811)),C=r(56),T=n(r(441)),R=r(804),A=n(r(942));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var N={cpu:"namespace_cpu_usage",memory:"namespace_memory_usage_wo_cache",gpu:"namespace_gpu_usage",gpu_memory:"namespace_gpu_memory_usage",pod:"namespace_pod_count"};a.MetricTypes=N;var I=(0,S.default)({store:new T.default,name:"PROJECT",module:"projects"})(i=function(e){(0,m.default)(r,e);var a=D(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).monitoringStore=new A.default,e.showAction=function(e){return!e.isFedManaged},e.handleFetch=function(t,a){e.props.routing.query(w(w({},t),{},{type:e.type}),a)},e.handleTabChange=function(t){e.props.routing.push("/clusters/".concat(e.cluster,"/projects?type=").concat(t))},e.getData=(0,s.default)(l.default.mark((function t(){var a,r,n,o,u=arguments;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},r=a.silent,n=(0,c.default)(a,["silent"]),e.query=n,n.type=n.type||"user",e.type=n.type,o=e.props.store,r&&(o.list.silent=!0),t.next=8,o.fetchList(w(w({},e.props.match.params),n));case 8:return t.next=10,e.monitoringStore.fetchMetrics(w(w({},e.props.match.params),{},{resources:o.list.data.map((function(e){return e.name})),metrics:Object.values((0,C.hideGPUByLicense)(N,e.cluster)),last:!0}));case 10:o.list.silent=!1;case 11:case"end":return t.stop()}}),t)}))),e.getLastValue=function(t,a){var r=e.monitoringStore.data,n=((0,g.default)(r,"".concat(a,".data.result"))||[]).find((function(e){return(0,g.default)(e,"metric.namespace")===t.name}));return(0,g.default)(n,"value[1]",0)},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.prefix,o=[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return y.default.createElement(E.default,{to:"Terminating"===t.status?null:"".concat(n,"/").concat(e),icon:"project",iconSize:40,isMultiCluster:t.isFedHostNamespace,desc:t.description||"-",title:(0,C.getDisplayNameNew)(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,render:function(e){return y.default.createElement(b.default,{type:e,name:t(e.toUpperCase()),flicker:!0})}},{title:t("WORKSPACE"),dataIndex:"workspace",isHideable:!0,search:!0,render:function(e){return(0,C.showNameAndAlias)(e,"workspace")}}];return globals.app.hasClusterModule(e.cluster,"whizard-monitoring")&&o.push({title:t("CPU_USAGE"),key:"namespace_cpu_usage",isHideable:!0,render:function(t){return(0,R.getSuitableValue)(e.getLastValue(t,N.cpu),"cpu","-")}},{title:t("MEMORY_USAGE"),key:"namespace_memory_usage_wo_cache",isHideable:!0,render:function(t){return(0,R.getSuitableValue)(e.getLastValue(t,N.memory),"memory","-")}},{title:t("GPU_USAGE"),key:"namespace_gpu_usage",isHideable:!0,render:function(t){return(0,R.getSuitableValue)(e.getLastValue(t,N.gpu),"gpu","-")}},{title:t("GPU_MEMORY_USAGE"),key:"namespace_gpu_memory_usage",isHideable:!0,render:function(t){return(0,R.getSuitableValue)(e.getLastValue(t,N.gpu_memory),"memory","-")}},{title:t("POD_PL"),key:"namespace_pod_count",isHideable:!0,render:function(t){return e.getLastValue(t,N.pod)}}),o},e.showCreate=function(){return e.props.trigger("project.create",w(w({},e.props.match.params),{},{success:function(){return e.getData()}}))},e}return(0,p.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,r=this.monitoringStore.isLoading,n=(0,C.hideGPUByLicense)(this.getColumns(),this.cluster);return y.default.createElement(S.ListPage,(0,u.default)({},this.props,{getData:this.getData,module:"namespaces"}),y.default.createElement(O.default,(0,u.default)({},t,{tabs:this.tabs})),y.default.createElement(k.default,(0,u.default)({},a,{className:"table-2-6 table-4-3",itemActions:this.itemActions,tableActions:this.tableActions,columns:n,columnSearch:this.columnSearch,onCreate:"system"===this.type?null:this.showCreate,isLoading:a.isLoading||r})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.routing,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:(0,_.default)(e,"workspace"),success:n.query})}},{key:"edit-annotations",icon:"pen",text:t("EDIT_ANNOTATIONS"),action:"manage",show:function(t){return t.workspace!==globals.config.systemWorkspace&&e.showAction(t)},onClick:function(e){return r("resource.annotations.edit",{detail:e})}},{key:"modify",icon:"restart",text:t("ASSIGN_WORKSPACE"),action:"manage",show:function(t){return!t.workspace&&e.showAction(t)},onClick:function(e){return r("project.assignworkspace",{detail:e,success:n.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(t){return t.workspace!==globals.config.systemWorkspace&&e.showAction(t)},onClick:function(e){return r("resource.delete",{type:o,resource:e.name,detail:(0,_.default)(e,"workspace"),success:n.query})}}]}},{key:"tabs",get:function(){return{value:this.type||"user",onChange:this.handleTabChange,options:[{value:"user",label:t("USER_PROJECTS")},{value:"system",label:t("SYSTEM_PROJECTS")}]}}},{key:"tableActions",get:function(){return w(w({},this.props.tableProps.tableActions),{},{onFetch:this.handleFetch})}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"columnSearch",get:function(){var e=(0,C.compareVersion)((0,C.getClusterVersion)(this.cluster),"3.4.0")>=0;return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:e}]}}]),r}(y.default.Component))||i;a.default=I},3383:function(e,a,r){"use strict";r(17);var n=r(19),o=r(163);r(3),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var u,l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(0)),m=n(r(803)),h=n(r(814)),v=n(r(811)),y=o(r(807)),g=r(56),_=n(r(1211));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var b=(0,y.default)({store:new _.default,module:"customresourcedefinitions",name:"CRD"})(u=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).getColumns=function(){var a=e.props.match.params.cluster,r=e.props.getSortOrder;return[{title:t("KIND_TCAP"),dataIndex:"kind",render:function(e,t){return p.default.createElement(m.default,{to:"/clusters/".concat(a,"/customresources/").concat(t.name),title:e,desc:"".concat(t.group,"/").concat(t.latestVersion)})}},{title:t("NAME"),key:"name",dataIndex:"name"},{title:t("SCOPE_TCAP"),key:"scope",dataIndex:"scope"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return p.default.createElement(y.ListPage,(0,l.default)({},this.props,{noWatch:!0}),p.default.createElement(h.default,(0,l.default)({},t,{tabs:this.tabs})),p.default.createElement(v.default,(0,l.default)({},a,{itemActions:[],columns:this.getColumns(),onCreate:null,searchType:"name"})))}}]),r}(p.default.Component))||u;a.default=b},3384:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(11),r(88),r(20),r(98),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(88),r(20),r(27),r(98),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(58)),l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(867)),m=n(r(803)),h=r(807),v=n(r(26)),y=n(r(834)),g=n(r(902)),_=n(r(0)),E=r(438),b=n(r(320)),O=n(r(477)),S=r(56),k=r(61),C=r(18),T=r(245),R=r(440),A=r(1212);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var w=(0,h.withClusterList)({store:new b.default("deployments"),module:"deployments",name:"DEPLOYMENT",rowKey:"uid"})(o=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).workloadTemplateStore=new O.default,e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(a,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,C.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,R.getDeployStatus)(e)}))},e.getItemDesc=function(a){var r=(0,R.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?_.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return _.default.createElement(m.default,{icon:k.ICON_TYPES[o],iconSize:40,title:(0,S.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(g.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,S.showNameAndAlias)(e,"project"))}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:150,render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module;return e.props.trigger("workload.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,supportGpuSelect:!0,supportNodeGroupSelect:!0,rootStore:e.props.rootStore})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return k.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return _.default.createElement(h.ListPage,this.props,_.default.createElement(p.default,(0,l.default)({},a,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"k8sVersion",get:function(){var e,t,a=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.k8sVersion}},{key:"selectActions",get:function(){var e=this,a=this.props,r=a.tableProps,n=a.trigger,o=a.name,l=a.rootStore,c=this.disableStopButton();return(0,u.default)((0,v.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:c,action:"edit",onClick:function(){return n("resource.batch.stop",{type:o,rowKey:"uid",success:l.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.module,n=a.name,o=a.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return o("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return o("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return o("workload.redeploy",{module:r,detail:e})}},{key:"generateTemplate",icon:A.NoteDuotone,text:t("workload.template.generate"),action:"edit",show:this.showAction,onClick:function(t){return o("workloadTemplate.generate",{module:r,cluster:e.props.match.params.cluster,store:e.workloadTemplateStore,detail:t})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){o("workload.delete",{type:n,detail:t,k8sVersion:e.k8sVersion})}}]}}]),r}(_.default.Component))||o,D=(0,T.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return _.default.createElement(w,(0,l.default)({k8sVersion:n},e))}));a.default=D},3385:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.StarDuotone=function(e){var t=(0,o.mapProps)(e,16);return n.default.createElement("svg",t,n.default.createElement("path",{d:"M7.70083 0.943204C7.82285 0.694551 8.17731 0.69455 8.29932 0.943204L10.2145 4.84615C10.3113 5.04344 10.4992 5.18034 10.7166 5.21212L15.0015 5.83833C15.2743 5.8782 15.3836 6.21317 15.1867 6.40619L12.0825 9.44937C11.9265 9.60235 11.8553 9.82209 11.8921 10.0375L12.6246 14.3331C12.6711 14.6056 12.3846 14.813 12.1402 14.6838L8.3117 12.6595C8.11674 12.5564 7.88341 12.5564 7.68846 12.6595L3.85996 14.6838C3.61553 14.813 3.32908 14.6056 3.37556 14.3331L4.1081 10.0375C4.14483 9.82209 4.07367 9.60235 3.91762 9.44937L0.813478 6.40619C0.616597 6.21317 0.725816 5.8782 0.998629 5.83833L5.28353 5.21212C5.50098 5.18034 5.68881 5.04344 5.78562 4.84615L7.70083 0.943204Z",fill:"currentColor"}))};var n=r(a(0)),o=a(1213)},3386:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.StarHalfDuotone=function(e){var t=(0,o.mapProps)(e,16);return n.default.createElement("svg",t,n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2145 4.84615C10.3113 5.04344 10.4992 5.18034 10.7166 5.21212L15.0015 5.83833C15.0186 5.84082 15.035 5.84447 15.0507 5.84916C15.2868 5.91952 15.3713 6.22524 15.1867 6.40619L12.0825 9.44937C11.9265 9.60235 11.8553 9.82209 11.8921 10.0375L12.6246 14.3331C12.6275 14.3501 12.6291 14.3669 12.6295 14.3833C12.6354 14.6302 12.3693 14.8049 12.1402 14.6838L8.3117 12.6595C8.11674 12.5564 7.88341 12.5564 7.68845 12.6595L3.85996 14.6838C3.61553 14.813 3.32908 14.6056 3.37556 14.3331L4.1081 10.0375C4.14483 9.82209 4.07367 9.60235 3.91762 9.44937L0.813478 6.40619C0.616597 6.21317 0.725816 5.8782 0.998629 5.83833L5.28353 5.21212C5.29712 5.21013 5.3106 5.20774 5.32394 5.20494C5.52411 5.16299 5.69486 5.03111 5.78562 4.84615L7.70083 0.943204C7.82285 0.69455 8.17731 0.694551 8.29932 0.943204L10.2145 4.84615ZM7.06521 11.4807C7.35765 11.3261 7.67886 11.2488 8.00007 11.2488V3.36006L6.9826 5.43352C6.69217 6.02539 6.1287 6.4361 5.47634 6.53144L3.1871 6.866L4.85104 8.49726C5.31916 8.95619 5.53266 9.61541 5.42245 10.2616L5.03114 12.5563L7.06521 11.4807ZM8.93494 11.4807C8.6425 11.3261 8.32129 11.2488 8.00008 11.2488V3.36006L9.01755 5.43352C9.30799 6.02539 9.87145 6.4361 10.5238 6.53144L12.8131 6.866L11.1491 8.49726C10.681 8.95619 10.4675 9.61541 10.5777 10.2616L10.969 12.5563L8.93494 11.4807Z",fill:"currentColor"}))};var n=r(a(0)),o=a(1213)},3387:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.NoteDuotone=function(e){var t=(0,u.mapProps)(e,16);return o.default.createElement("svg",(0,n.default)({viewBox:"0 0 16 16"},t),o.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33333 3.33333C4.96514 3.33333 4.66667 3.63181 4.66667 4V14C4.66667 14.3682 4.96514 14.6667 5.33333 14.6667H13.3333C13.7015 14.6667 14 14.3682 14 14V4C14 3.63181 13.7015 3.33333 13.3333 3.33333H5.33333ZM11.6667 7V8.33333H7V7H11.6667ZM11.6667 9.66667V11H7V9.66667H11.6667Z",fill:"#b8c2cc"}),o.default.createElement("path",{d:"M2 2C2 1.63181 2.29848 1.33333 2.66667 1.33333H10C10.3682 1.33333 10.6667 1.63181 10.6667 2V3.33333H9.33333V2.66667H3.33333V11.3333H4.66667V12.6667H2.66667C2.29848 12.6667 2 12.3682 2 12V2Z",fill:"currentColor"}),o.default.createElement("path",{d:"M11.6667 7V8.33333H7V7H11.6667Z",fill:"currentColor"}),o.default.createElement("path",{d:"M11.6667 11V9.66667H7V11H11.6667Z",fill:"currentColor"}))};var n=r(a(318)),o=r(a(0)),u=a(1213)},3388:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(11),r(88),r(20),r(98),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(88),r(20),r(27),r(98),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(58)),l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(867)),m=n(r(803)),h=r(807),v=n(r(26)),y=n(r(834)),g=n(r(902)),_=n(r(0)),E=r(438),b=n(r(320)),O=r(56),S=r(61),k=r(18),C=r(440),T=r(245),R=r(1212),A=n(r(477));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var w=(0,h.withClusterList)({store:new b.default("statefulsets"),module:"statefulsets",name:"STATEFULSET",rowKey:"uid"})(o=function(e){(0,s.default)(r,e);var a=P(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).workloadTemplateStore=new A.default,e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(a,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,k.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,C.getStatefulSetStatus)(e)}))},e.getItemDesc=function(a){var r=(0,C.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?_.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return _.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(g.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module;return e.props.trigger("workload.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,rootStore:e.props.rootStore,supportNodeGroupSelect:!0})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return _.default.createElement(h.ListPage,this.props,_.default.createElement(p.default,(0,l.default)({},a,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"k8sVersion",get:function(){var e,t,a=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.k8sVersion}},{key:"selectActions",get:function(){var e=this,a=this.props,r=a.tableProps,n=a.trigger,o=a.name,l=a.rootStore,c=this.disableStopButton();return(0,u.default)((0,v.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:c,action:"edit",onClick:function(){return n("resource.batch.stop",{type:o,rowKey:"uid",success:l.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.module,n=a.trigger,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return n("workload.redeploy",{module:r,detail:e})}},{key:"generateTemplate",icon:R.NoteDuotone,text:t("workload.template.generate"),action:"edit",show:this.showAction,onClick:function(t){return n("workloadTemplate.generate",{module:r,cluster:e.props.match.params.cluster,store:e.workloadTemplateStore,detail:t})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("workload.delete",{type:o,detail:t,k8sVersion:e.k8sVersion})}}]}}]),r}(_.default.Component))||o,D=(0,T.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return _.default.createElement(w,(0,l.default)({k8sVersion:n},e))}));a.default=D},3389:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(11),r(88),r(20),r(98),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(88),r(20),r(27),r(98),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(58)),l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(867)),m=n(r(803)),h=r(807),v=n(r(26)),y=n(r(834)),g=n(r(902)),_=n(r(0)),E=r(438),b=n(r(320)),O=r(56),S=r(61),k=r(18),C=r(440),T=r(1212),R=n(r(477));function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.withClusterList)({store:new b.default("daemonsets"),module:"daemonsets",name:"DAEMONSET",rowKey:"uid"})(o=function(e){(0,s.default)(r,e);var a=A(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).workloadTemplateStore=new R.default,e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(a,"/").concat(t))},e.disableStopButton=function(){var t=e.props.tableProps,a=t.data,r=t.selectedRowKeys;return(0,k.toJS)(a).filter((function(e){return-1!==r.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,C.getDaemonSetStatus)(e)}))},e.getItemDesc=function(a){var r=(0,C.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?_.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return _.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(a),desc:e.getItemDesc(a),to:"/clusters/".concat(u,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(g.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module;return e.props.trigger("workload.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,rootStore:e.props.rootStore})},e}return(0,i.default)(r,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return _.default.createElement(h.ListPage,this.props,_.default.createElement(p.default,(0,l.default)({},a,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,r=e.trigger,n=e.name,o=e.rootStore,l=this.disableStopButton();return(0,u.default)((0,v.default)(a,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){r("workload.batch.delete",{type:n,rowKey:"uid"})}},{key:"stop",text:t("STOP"),disabled:l,action:"edit",onClick:function(){return r("resource.batch.stop",{type:n,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.module,n=a.name,o=a.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return o("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return o("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return o("workload.redeploy",{module:r,detail:e})}},{key:"generateTemplate",icon:T.NoteDuotone,text:t("workload.template.generate"),action:"edit",show:this.showAction,onClick:function(t){return o("workloadTemplate.generate",{module:r,cluster:e.props.match.params.cluster,store:e.workloadTemplateStore,detail:t})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return o("workload.delete",{type:n,detail:e})}}]}}]),r}(_.default.Component))||o;a.default=P},3390:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(20),r(14),r(4),r(21),r(200),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(20),r(27),r(30),r(14),r(4),r(21),r(200),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(867)),p=n(r(803)),m=n(r(164)),h=r(807),v=n(r(1208)),y=n(r(834)),g=n(r(0)),_=r(438),E=n(r(320)),b=r(56),O=r(61),S=r(440);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,h.withClusterList)({store:new E.default("jobs"),module:"jobs",name:"JOB",rowKey:"uid"})(o=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var r=(0,S.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?g.default.createElement(y.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return g.default.createElement(p.default,{icon:O.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return g.default.createElement(v.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return g.default.createElement(_.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("LAST_RUN_TIME"),dataIndex:"updateTime",sorter:!0,sortOrder:r("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module;return e.props.trigger("workload.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,rootStore:e.props.rootStore,supportNodeGroupSelect:!0})},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return O.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(f.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.store;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:function(a){o.rerun(a).then((function(){m.default.success(t("OPERATION_SUCCESS"))})).catch((function(e){console.error(e),m.default.error(t("OPERATION_FAILED"),e.message)})).finally((function(){e.props.routing.query()}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),r}(g.default.Component))||o;a.default=C},3391:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(20),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(20),r(27),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(867)),p=n(r(803)),m=n(r(808)),h=r(807),v=n(r(834)),y=n(r(0)),g=r(438),_=n(r(320)),E=r(56),b=r(61),O=r(440),S=r(245);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,h.withClusterList)({store:new _.default("cronjobs"),module:"cronjobs",name:"CRONJOB",rowKey:"uid"})(o=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(a,"/").concat(t))},e.handleSwitch=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.props.store.switch(t,a,r).then((function(){e.props.routing.query()}))},e.getItemDesc=function(a){var r=(0,O.getWorkloadStatus)(a,e.props.module),n=r.status,o=r.reason;return o?y.default.createElement(v.default,{status:n,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.getFilteredValue,o=a.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(t,a){return y.default.createElement(p.default,{icon:b.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),to:"/clusters/".concat(u,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:n("status"),isHideable:!0,search:!0,width:"15%",render:function(e,a){var r=(0,O.getWorkloadStatus)(a,o).status;return y.default.createElement(m.default,{type:r,name:t("CRONJOB_".concat(r.toUpperCase()))})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return y.default.createElement(g.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,E.showNameAndAlias)(e,"project"))}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t,a,r=e.props,n=r.query,o=r.match,u=r.module,l=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[o.params.cluster])||void 0===a?void 0:a.k8sVersion;return e.props.trigger("workload.create",{module:u,namespace:n.namespace,cluster:o.params.cluster,k8sVersion:l,success:function(){return e.props.routing.query()},rootStore:e.props.rootStore,supportNodeGroupSelect:!0})},e}return(0,c.default)(r,[{key:"getStatus",value:function(){return b.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return y.default.createElement(h.ListPage,this.props,y.default.createElement(f.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){var a,n,o=null===(a=globals.clusterConfig)||void 0===a||null===(n=a[null==t?void 0:t.cluster])||void 0===n?void 0:n.k8sVersion;r("resource.baseinfo.edit",{detail:t,k8sVersion:o,success:function(){return e.props.routing.query()}})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){var a,n,o=null===(a=globals.clusterConfig)||void 0===a||null===(n=a[null==t?void 0:t.cluster])||void 0===n?void 0:n.k8sVersion;r("resource.yaml.edit",{detail:t,k8sVersion:o,success:function(){return e.props.routing.query()}})}},{show:function(e){return e.suspend},key:"start",icon:"start",text:t("START"),action:"edit",onClick:function(t){var a,r,n=null===(a=globals.clusterConfig)||void 0===a||null===(r=a[null==t?void 0:t.cluster])||void 0===r?void 0:r.k8sVersion;e.handleSwitch(t,!0,n)}},{show:function(e){return!e.suspend},key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:function(t){var a,r,n=null===(a=globals.clusterConfig)||void 0===a||null===(r=a[null==t?void 0:t.cluster])||void 0===r?void 0:r.k8sVersion;e.handleSwitch(t,!1,n)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){var a,o,u=null===(a=globals.clusterConfig)||void 0===a||null===(o=a[null==t?void 0:t.cluster])||void 0===o?void 0:o.k8sVersion;r("resource.delete",{type:n,detail:t,k8sVersion:u,success:function(){return e.props.routing.query()}})}}]}}]),r}(y.default.Component))||o,T=(0,S.inject)()((function(e){var t,a,r=e.match.params.cluster,n=null===(t=globals.clusterConfig)||void 0===t||null===(a=t[r])||void 0===a?void 0:a.k8sVersion;return y.default.createElement(C,(0,u.default)({k8sVersion:n},e))}));a.default=T},3392:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(20),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(20),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(438),m=r(192),h=n(r(862)),v=r(807),y=n(r(834)),g=n(r(867)),_=r(56),E=r(61),b=n(r(452)),O=n(r(962)),S=n(r(3393));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,v.withClusterList)({store:new b.default,module:"pods",name:"POD",rowKey:"uid"})(o=(0,O.default)(["event"])(o=function(e){(0,i.default)(r,e);var a=k(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(a){var r=a.podStatus,n=r.status,o=r.type;return"running"!==o&&"completed"!==o?f.default.createElement(y.default,{status:o,reason:t(n),data:a,type:"pod",onShowEvents:function(){return e.showEvents(a)}}):t(o.toUpperCase())},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:e.renderAvatar},{title:t("PODS.PHASE"),dataIndex:"phase",filters:e.getPodPhaseOptions(),isHideable:!0,search:!0,with:"5%",render:function(e,a){var r=a.status,n=null==r?void 0:r.phase,o=(0,E.getPodPhaseDetail)({phase:n}).text;return f.default.createElement("span",null,t(o))}},{title:t("NODE_SI"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIP",search:!0,isHideable:!0,width:"15%",render:function(e,t){var a=t.podIp;return f.default.createElement("span",null,a)}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:a("startTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showEvents=function(a){e.props.trigger("pod.events",{detail:a,title:f.default.createElement("span",null,f.default.createElement(m.Icon,{name:"event"}),t("VIEW_EVENTS")),cluster:e.props.match.params.cluster})},e.renderAvatar=function(t,a){var r=e.props.module,n=e.props.match.params.cluster,o=a.podStatus;return f.default.createElement("div",{className:S.default.avatar},f.default.createElement("div",{className:S.default.icon},f.default.createElement(m.Icon,{name:E.ICON_TYPES[r],size:40}),f.default.createElement(h.default,{className:S.default.indicator,type:o.type,flicker:!0})),f.default.createElement("div",null,f.default.createElement(p.Link,{className:S.default.title,to:"/clusters/".concat(n,"/projects/").concat(a.namespace,"/").concat(r,"/").concat(t)},t),f.default.createElement("div",{className:S.default.desc},e.getItemDesc(a))))},e.renderNode=function(a,r){var n=e.props.match.params.cluster,o=r.node,u=r.nodeIp;if(!o)return"-";var l=t("NODE_IP",{node:o,ip:u});return f.default.createElement(p.Link,{to:"/clusters/".concat(n,"/nodes/").concat(o)},l)},e.renderStatus=function(e){return f.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getPodPhaseOptions",value:function(){return E.POD_PHASE_DETAILS.map((function(e){var a=e.value,r=e.text;return{value:a,text:t(r)}}))}},{key:"getPodsStatus",value:function(){return E.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return f.default.createElement(v.ListPage,this.props,f.default.createElement(g.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),hideColumn:["status"],onCreate:null,cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,r=e.name,n=e.trigger;return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return n("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:globals.config.enableInjectSidecarSet,onClick:function(e){return n("resource.yaml.edit",{detail:e,readOnly:!1})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{type:r,detail:e,success:a})}}]}}]),r}(f.default.Component))||o)||o;a.default=C},3393:function(e,t,a){e.exports={avatar:"hnCTvkjeNtr89Olva-MrQ",icon:"QQwUZJfYSbbO5IL2O_lym",indicator:"_1kPphabea24-UMspwsiDee",title:"_3Qr-w3lIIGV50Tlv7bCkkP",desc:"_1_C263QNG8-nzlZSpuGBqZ"}},3394:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(11),r(68),r(20),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(68),r(20),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(58)),l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=r(192),m=n(r(867)),h=n(r(803)),v=n(r(801)),y=r(807),g=n(r(26)),_=n(r(0)),E=r(438),b=n(r(327)),O=r(56),S=r(61);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,y.withClusterList)({store:new b.default,module:"services",name:"SERVICE",rowKey:"uid"})(o=function(e){(0,s.default)(r,e);var a=k(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.renderExternalService=function(e){var a={des:"-",title:"-"};return"NodePort"===e.specType&&(a.des=t("PORT_PL"),a.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(a.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),a.title=e.loadBalancerIngress.join("; ")),e.externalName?_.default.createElement(v.default,{description:a.des,title:function(){return _.default.createElement(p.Tooltip,{content:e.externalName},_.default.createElement("span",null,a.title))}}):_.default.createElement(v.default,{description:t("".concat(a.des)),title:a.title})},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return _.default.createElement(h.default,{icon:S.ICON_TYPES[n],iconSize:40,title:(0,O.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"15%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("INTERNAL_ACCESS"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"15%",render:function(e,a){return _.default.createElement(v.default,{title:a.clusterIP||"",description:t("".concat(a.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,a){return e.renderExternalService(a)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"10%",render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module,o=t.getData;return e.props.trigger("service.simple.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,success:o})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return _.default.createElement(y.ListPage,this.props,_.default.createElement(m.default,(0,l.default)({},a,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",show:this.showAction,onClick:function(e){return r("service.edit",{detail:e})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:function(t){return e.showAction(t)&&t.type===S.SERVICE_TYPES.VirtualIP},onClick:function(e){return r("service.gateway.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("service.delete",{type:n,detail:e})}}]}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,r=e.trigger,n=e.name;return(0,u.default)((0,g.default)(a,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){r("service.batch.delete",{type:n,rowKey:"uid"})}}])}}]),r}(_.default.Component))||o;a.default=C},3395:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(68),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(68),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(867)),p=n(r(803)),m=r(807),h=n(r(0)),v=r(438),y=n(r(464)),g=r(56),_=r(61),E=n(r(69));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.withClusterList)({store:new y.default,module:"ingresses",name:"ROUTE",rowKey:"uid"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return h.default.createElement(p.default,{icon:_.ICON_TYPES[n],iconSize:40,title:(0,g.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("GATEWAY_ADDRESS_TCAP"),dataIndex:"loadBalancerIngress",isHideable:!0,width:"22%",render:function(e){return(0,E.default)(e)?"-":e.join("; ")}},{title:t("Ingress Class"),dataIndex:"ingressClassName",isHideable:!0,width:"18%",render:function(e){return e||"-"}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return h.default.createElement(v.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,g.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,r=t.match,n=t.module,o=t.getData;return e.props.trigger("router.create",{module:n,namespace:a.namespace,cluster:r.params.cluster,success:function(){return o()}})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return h.default.createElement(m.ListPage,this.props,h.default.createElement(f.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",show:this.showAction,onClick:function(e){return a("router.rules.edit",{detail:e,namespace:e.namespace})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",show:this.showAction,onClick:function(e){return a("router.annotations.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(h.default.Component))||o;a.default=O},3396:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(14),r(9),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(30),r(14),r(9),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(867)),p=n(r(803)),m=r(807),h=n(r(0)),v=r(438),y=n(r(447)),g=r(56),_=r(61),E=n(r(3397));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.withClusterList)({store:new y.default,module:"secrets",name:"SECRET",rowKey:"uid"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.showSetDefault=function(e){return"kubernetes.io/dockerconfigjson"===e.type&&!e.isDefault},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getDefaultLabel=function(e,a){return a.isDefault?h.default.createElement("div",{className:E.default.titleRow},h.default.createElement("span",{className:E.default.title},e),h.default.createElement("span",{className:E.default.tag},t("DEFAULT_IMAGE_REGISTRY"))):e},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,className:"table-name",sortOrder:r("name"),render:function(t,a){return h.default.createElement(p.default,{icon:_.ICON_TYPES[n],iconSize:40,title:e.getDefaultLabel((0,g.getDisplayName)(a),a),desc:a.description||"-",to:"/clusters/".concat(o,"/projects/").concat(a.namespace,"/").concat(n,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"16%",render:function(e){return h.default.createElement(v.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,g.showNameAndAlias)(e,"project"))}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"20%",render:function(e){return _.SECRET_TYPES[e]?t(_.SECRET_TYPES[e]):e}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"16%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module,n=t.getData;return e.props.trigger("secret.create",{module:r,cluster:a.params.cluster,namespace:a.params.namespace,success:function(){return n()}})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return h.default.createElement(m.ListPage,this.props,h.default.createElement("div",{className:E.default.wrapper},h.default.createElement(f.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"}))))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.getData;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){r("secret.edit",{detail:e,success:o})}},{key:"default",icon:"star",text:t("SET_AS_DEFAULT"),action:"edit",show:this.showSetDefault,onClick:function(t){var a=e.props.match.params.cluster;r("secret.default",{cluster:a,detail:t,success:o})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){r("resource.delete",{type:n,detail:e,success:o})}}]}}]),r}(h.default.Component))||o;a.default=O},3397:function(e,t,a){e.exports={baseTag:"_3uVuUGuC2EHTxXkFjjvcmE",titleRow:"_21OATtg2uOyC5CA0xK8Cgb",tag:"_23UpDickjcJr3y2liGaM-4",title:"_361jFI80H7w8CSY6aff8x4",wrapper:"_2T4mS7QBBMogaLHOlUNIeh"}},3398:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(68),r(14),r(9),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(68),r(30),r(14),r(9),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(867)),p=n(r(803)),m=r(807),h=n(r(0)),v=r(438),y=n(r(476)),g=r(56),_=r(61),E=n(r(3399));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.withClusterList)({store:new y.default,module:"configmaps",name:"CONFIGMAP",rowKey:"uid"})(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",className:"table-name",sorter:!0,sortOrder:r("name"),render:function(e,t){return h.default.createElement(p.default,{icon:_.ICON_TYPES[n],iconSize:40,title:(0,g.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return h.default.createElement(v.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,g.showNameAndAlias)(e,"project"))}},{title:t("FIELDS"),dataIndex:"data",isHideable:!0,width:"13%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module;return e.props.trigger("configmap.create",{module:r,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return h.default.createElement(m.ListPage,this.props,h.default.createElement("div",{className:E.default.wrapper},h.default.createElement(f.default,(0,u.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"}))))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){return a("configmap.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return a("resource.delete",{type:r,detail:e})}}]}}]),r}(h.default.Component))||o;a.default=O},3399:function(e,t,a){e.exports={wrapper:"_1clC9cmPRehJ80J0Rr-Ldy"}},3400:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(6),r(20),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(6),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var o,u=n(r(32)),l=n(r(318)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(867)),m=n(r(803)),h=r(807),v=n(r(0)),y=r(438),g=n(r(488)),_=r(56),E=r(61);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=(0,h.withClusterList)({store:new g.default,module:"serviceaccounts",name:"SERVICE_ACCOUNT",rowKey:"uid"})(o=function(e){(0,s.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,r=a.getSortOrder,n=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(e,t){return v.default.createElement(m.default,{icon:E.ICON_TYPES[n],iconSize:40,title:(0,_.getDisplayName)(t),desc:t.description||"-",to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e),isMultiCluster:t.isFedManaged})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"16%",render:function(e){return v.default.createElement(y.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,_.showNameAndAlias)(e,"project"))}},{title:t("ROLE"),dataIndex:"role",isHideable:!0},{title:t("SECRET"),dataIndex:"secrets",isHideable:!0,render:function(e,t){return e.map((function(e){return v.default.createElement("div",{key:e.name},v.default.createElement(y.Link,{to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/secrets/").concat(e.name)},e.name))}))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.match,r=t.module;return e.props.trigger("serviceaccount.create",{module:r,namespace:a.params.namespace,cluster:a.params.cluster})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.tableProps;return v.default.createElement(h.ListPage,this.props,v.default.createElement(p.default,(0,l.default)({},a,{columns:this.getColumns(),itemActions:this.itemActions,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return r("serviceaccount.edit",O({detail:t},e.props.match.params))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return r("serviceaccount.role.edit",O({detail:t},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),r}(v.default.Component))||o;a.default=k},3401:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(3),r(11),r(6),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var u,l=n(r(318)),c=n(r(32)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=n(r(0)),h=r(18),v=n(r(803)),y=n(r(808)),g=n(r(814)),_=o(r(807)),E=n(r(811)),b=r(56),O=n(r(325)),S=n(r(324));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,_.default)({store:new O.default,module:"users",authKey:"members",name:"CLUSTER_MEMBER"})(u=function(e){(0,d.default)(r,e);var a=T(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).roleStore=new S.default("clusterroles"),e.getColumns=function(){return[{title:t("USERNAME"),dataIndex:"username",sorter:!0,render:function(e,t){return m.default.createElement(v.default,{avatar:t.avatar_url||"/extensions-static/ks-console-embed/dist/v3dist/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return m.default.createElement(y.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"clusterrole",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return m.default.createElement("p",null,e?(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList(C(C({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,r=e.tableProps;return m.default.createElement(_.ListPage,this.props,m.default.createElement(g.default,(0,l.default)({},a,{tabs:this.tabs,description:t("INVITE_CLUSTER_MEMBER_DESC")})),m.default.createElement(E.default,(0,l.default)({},r,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"canViewRoles",get:function(){var e=this.props.match.params.cluster;return globals.app.hasPermission({cluster:e,module:"roles",action:"view"})}},{key:"tips",get:function(){return[{title:t("HOW_TO_INVITE_MEMBER_Q"),description:t("HOW_TO_INVITE_MEMBER_A")}]}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.getData,n=a.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return n("member.edit",C(C({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.clusterrole,success:r}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",onClick:function(t){return n("member.remove",C({detail:t,success:r},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.getData,o=a.routing;return C(C({},a.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return r("member.invite",C(C({},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,title:t("INVITE_MEMBER"),desc:t("INVITE_CLUSTER_MEMBER_DESC"),searchPlaceholder:t("INVITE_MEMBER_SEARCH_PLACEHOLDER"),success:o.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return r("member.remove.batch",C({success:n},e.props.match.params))}}],getCheckboxProps:function(e){return{name:e.name}}})}},{key:"emptyProps",get:function(){return{desc:t("INVITE_CLUSTER_MEMBER_DESC")}}}]),r}(m.default.Component))||u;a.default=R},3402:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(3),r(11),r(6),r(67),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(74),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(67),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(74),r(66),r(7);var u,l=n(r(32)),c=n(r(318)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=n(r(0)),h=n(r(803)),v=n(r(814)),y=n(r(811)),g=o(r(807)),_=r(56),E=r(61),b=n(r(324));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,g.default)({store:new b.default("clusterroles"),module:"clusterroles",name:"CLUSTER_ROLE"})(u=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!globals.config.presetClusterRoles.includes(e.name)},e.getColumns=function(){var a=e.props.getSortOrder,r=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t){return m.default.createElement(h.default,{icon:E.ICON_TYPES[e.module],to:"/clusters/".concat(r,"/roles/").concat(t),title:t})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps;return m.default.createElement(g.ListPage,(0,c.default)({},this.props,{noWatch:!0}),m.default.createElement(v.default,(0,c.default)({},t,{tabs:this.tabs})),m.default.createElement(y.default,(0,c.default)({},a,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,r=a.trigger,n=a.name,o=a.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e,success:o.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return r("role.delete",{detail:t,type:n,success:o.query,cluster:e.props.match.params.cluster})}}]}},{key:"tableActions",get:function(){return S(S({},this.props.tableProps.tableActions),{},{onCreate:void 0,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("CLUSTER_ROLE_DESC")}}}]),r}(m.default.Component))||u;a.default=C},3403:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(11),r(41),r(67),r(20),r(14),r(4),r(193),r(16),r(29),r(10),r(74),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(318)),u=n(r(25)),l=n(r(28)),c=n(r(38)),i=n(r(39)),s=n(r(35));r(31),r(3),r(11),r(41),r(67),r(20),r(27),r(30),r(14),r(4),r(193),r(16),r(40),r(29),r(10),r(74),r(66);var d,f=r(192),p=n(r(3404)),m=n(r(802)),h=n(r(801)),v=n(r(814)),y=r(906),g=n(r(26)),_=r(245),E=n(r(0)),b=n(r(947)),O=n(r(893)),S=r(56),k=r(805),C=r(61),T=r(804),R=n(r(3405)),A=n(r(1214));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var w={cpu_usage:"cluster_cpu_total",memory_usage:"cluster_memory_total",gpu_usage:"cluster_gpu_usage",gpu_memory_usage:"cluster_gpu_memory_usage",disk_size_usage:"cluster_disk_size_capacity",node_count:"cluster_node_total"},D=(0,_.inject)("rootStore","clusterStore")(d=(0,_.observer)(d=(0,k.trigger)(d=function(e){(0,c.default)(r,e);var a=P(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).state={confirm:!1},e.monitorStore=new O.default,e.tagsStore=new b.default,e.fetchTagGroupList=function(){e.tagsStore.fetchGroupList()},e.getValue=function(e,a){var r=(0,g.default)(e,"value[1]",0),n=(0,T.getSuitableUnit)(r,a)||n,o=(0,T.getValueByUnit)(r,n),u=(0,S.coreUnitTS)(o,n);return"".concat(o," ").concat(t(u))},e.fetchData=function(){var t=e.store.detail.name;e.store.fetchVersion({cluster:t}),e.monitorStore.fetchMetrics({cluster:t,metrics:Object.values((0,S.hideGPUByLicense)(w,t)),last:!0})},e.fetchClusterDetail=function(){e.store.fetchDetail({name:e.props.match.params.cluster})},e.getResourceOptions=function(){if(e.monitorStore.isLoading)return[];var t=(0,T.getLastMonitoringData)(e.monitorStore.data),a=e.store.detail.name,r=[{name:1===e.getValue(t[w.node_count])?"NODE":"NODES",icon:"nodes",value:e.getValue(t[w.node_count])},{name:"CPU",icon:"cpu",value:e.getValue(t[w.cpu_usage],"cpu")},{name:"MEMORY",icon:"memory",value:e.getValue(t[w.memory_usage],"memory")},{name:"GPU",icon:"gpu",value:e.getValue(t[w.gpu_usage],"cpu")},{name:"GPU_MEMORY",icon:"computing",value:e.getValue(t[w.gpu_memory_usage],"memory")},{name:"DISK",icon:"storage",value:e.getValue(t[w.disk_size_usage],"disk")}];return(0,S.hideGPUByLicense)(r,a)},e.showEdit=function(){e.trigger("resource.baseinfo.edit",{detail:e.store.detail,modal:p.default,success:e.fetchClusterDetail})},e.showTags=function(){e.trigger("cluster.tag.clusterItemTags",{detail:e.store.detail,success:e.fetchClusterDetail,defaultValue:e.store.detail.tags.map((function(t){return(e.tagsStore.tags||[]).find((function(e){return e.name===t.name}))})).filter(Boolean),tagsGroup:e.tagsStore.tagsGroup,store:e.tagsStore,onAddTags:e.showAddTags,tags:[e.store.detail]})},e.showAddTags=function(){e.trigger("cluster.tag.add",{success:e.tagsStore.fetchGroupList,store:e.tagsStore})},e.handleChange=function(t){e.setState({confirm:t})},e.handleUnbind=function(){e.trigger("cluster.unbind",{store:e.store,detail:e.store.detail,success:function(){return e.props.rootStore.routing.push("/clusters")}})},e.updateKubeConfig=function(){e.trigger("cluster.updateKubeConfig",{detail:e.store.detail,success:e.fetchClusterDetail})},e.manageButtonClick=function(t,a){var r=e.enableManageAction.filter((function(e){return e.actionName===a}))[0];r&&r.onClick()},e.renderManageButton=function(){var t=e.enableManageAction,a=E.default.createElement(f.Menu,{onClick:e.manageButtonClick},t.map((function(e){return E.default.createElement(f.Menu.MenuItem,{key:e.actionName},E.default.createElement(f.Icon,{name:e.icon,type:"light"}),e.text)})));return t.length>1?E.default.createElement(A.default,{className:R.default.manage,content:a}):t.length>0&&E.default.createElement(f.Button,{className:R.default.singleButton,onClick:function(){return t[0].onClick()}},t[0].text)},e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.store.detail.isReady&&this.fetchData(),this.fetchTagGroupList()}},{key:"render",value:function(){var e=this,a=this.store.detail,r=a.provider,n=a.kubernetesVersion,u=a.tags,l=this.getResourceOptions();return E.default.createElement(E.default.Fragment,null,E.default.createElement(v.default,{icon:"cluster",title:t("BASIC_INFORMATION"),description:t("CLUSTER_BASE_INFO_DESC")}),E.default.createElement(m.default,{title:t("CLUSTER_INFORMATION")},E.default.createElement("div",{className:R.default.header},E.default.createElement(h.default,{icon:C.CLUSTER_PROVIDER_ICON[r]||"kubernetes",title:(0,S.getDomTitle)((0,S.getDisplayNameNew)(this.store.detail)),description:t("CLUSTER"),ellipsis:!0}),r&&E.default.createElement(h.default,{title:r,description:t("PROVIDER")}),E.default.createElement(h.default,{title:n||this.store.version,description:t("KUBERNETES_VERSION")}),this.editPromission&&this.renderManageButton()),E.default.createElement("div",{className:R.default.content},l.map((function(e){return E.default.createElement(h.default,{key:e.name,icon:e.icon,title:e.value,description:t(e.name)})})))),E.default.createElement(m.default,{title:t("CLUSTER_TAGS")},u.length>0&&E.default.createElement("div",{className:R.default.tags},u.map((function(t){var a=(e.tagsStore.tags||[]).find((function(e){return e.name===t.name}));return a?E.default.createElement(y.ClusterTagItem,(0,o.default)({},a,{key:a.name})):null})))))}},{key:"store",get:function(){return this.props.clusterStore}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"editPromission",get:function(){var e;return null===(e=globals.user.globalRules.clusters)||void 0===e?void 0:e.includes("manage")}},{key:"enableManageAction",get:function(){var e=this.store.detail,a=e.isHost,r=void 0!==a&&a,n="proxy"===e.connectionType,o=this.enabledActions,u=[];return o.includes("edit")&&globals.app.isMultiCluster&&u.push({actionName:"resource.baseinfo.edit",onClick:this.showEdit,icon:"pen",text:t("EDIT_INFORMATION")}),("platform-admin"===(0,g.default)(window,"globals.user.globalrole","")||(0,g.default)(window,"globals.user.globalRules.clusters",[]).includes("manage"))&&u.push({actionName:"cluster.tag.clusterItemTags",onClick:this.showTags,icon:"add",text:t("ADD_TAGS")}),globals.app.isMultiCluster&&!r&&!n&&o.includes("edit")&&u.push({actionName:"cluster.update.kubeconfig",icon:"data",text:t("UPDATE_KUBECONFIG"),onClick:this.updateKubeConfig}),globals.app.isMultiCluster&&o.includes("delete")&&!this.store.detail.isHost&&u.push({actionName:"cluster.unbind",onClick:this.handleUnbind,icon:"trash",text:t("REMOVE_CLUSTER")}),u}}]),r}(E.default.Component))||d)||d)||d;a.default=D},3404:function(e,a,r){"use strict";r(17);var n=r(19);r(41),r(20),r(14),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(41),r(20),r(30),r(14),r(4),r(16),r(40),r(10);var o=n(r(25)),u=n(r(28)),l=n(r(38)),c=n(r(39)),i=n(r(35)),s=r(192),d=n(r(799)),f=n(r(829)),p=n(r(26)),m=r(18),h=n(r(1)),v=n(r(0)),y=r(61);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,l.default)(r,e);var a=g(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).groupOptionRenderer=function(e){return v.default.createElement(v.default.Fragment,null,v.default.createElement(s.Tag,{type:y.CLUSTER_GROUP_TAG_TYPE[e.value]},t("ENV_".concat(e.label.toUpperCase()))),"",e.label)},n.providerOptionRenderer=function(e){return v.default.createElement(v.default.Fragment,null,v.default.createElement(s.Icon,{name:e.icon,type:"light",size:20}),e.label)},n.handleOk=function(e){(0,n.props.onOk)(e)},n.handleRegionSelect=function(e){n.setState({region:e})},n.state={region:(0,p.default)(e.detail,'metadata.labels["topology.kubernetes.io/region"]',""),formData:(0,f.default)((0,m.toJS)(e.detail._originData))},n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,o=this.state.formData;return v.default.createElement(d.default.Form,{data:o,width:691,title:t("EDIT_INFORMATION"),description:t("EDIT_CLUSTER_INFO_DESC"),icon:"cluster",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},v.default.createElement(s.Form.Item,{label:t("CLUSTER_NAME"),desc:t("NAME_DESC")},v.default.createElement(s.Input,{name:"metadata.name",disabled:!0})),v.default.createElement(s.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:y.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},v.default.createElement(s.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),v.default.createElement(s.Form.Item,{label:t("CLUSTER_LABEL"),desc:t("CLUSTER_LABEL_DESC")},v.default.createElement(s.Select,{name:"metadata.labels['cluster.kubesphere.io/group']",options:y.CLUSTER_PRESET_GROUPS,optionRenderer:this.groupOptionRenderer,placeholder:" "})),v.default.createElement(s.Form.Item,{label:t("PROVIDER"),desc:t("CLUSTER_PROVIDER_DESC")},v.default.createElement(s.Select,{name:"spec.provider",options:y.CLUSTER_PROVIDERS,optionRenderer:this.providerOptionRenderer,placeholder:" "})),v.default.createElement(s.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(s.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}},{key:"regions",get:function(){return(0,p.default)(globals.config,"regionZones",[]).map((function(e){return{label:e.alias,value:e.name}}))}},{key:"zones",get:function(){var e=this,t=(0,p.default)(globals.config,"regionZones",[]).find((function(t){return t.name===e.state.region}));return t&&t.zones?t.zones.map((function(e){return{label:e.alias,value:e.name}})):[]}}]),r}(v.default.Component);a.default=_,_.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},3405:function(e,t,a){e.exports={header:"_2SXq6W7Y5arA1V8ydx3x9k",content:"_3zCn6ZnEb1mjwR_f5JXgA",tip:"lIqFeO0ppH8_MxJdLUlTw",unbind:"_3-xB7xj9NBxURt-nM9E8YT",manage:"_12M4oLKObAdKFXEoaa5wxj",singleButton:"_1HEVP9zq3sERwI9RlCnfHB",tags:"_2ep7i_I3q4CFYM8VacKRGZ"}},3407:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(6),r(67),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(74),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(6),r(67),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(16),r(40),r(29),r(10),r(74),r(66),r(7);var o=n(r(42));r(36);var u,l=n(r(43)),c=n(r(32)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=r(192),h=n(r(803)),v=n(r(802)),y=n(r(801)),g=n(r(814)),_=n(r(914)),E=n(r(26)),b=r(18),O=r(245),S=n(r(0)),k=n(r(443)),C=r(56),T=r(805),R=n(r(3408));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,O.inject)("rootStore","clusterStore")(u=(0,O.observer)(u=(0,T.trigger)(u=function(e){(0,d.default)(r,e);var a=w(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).workspaceStore=new k.default,e.getData=function(t){e.workspaceStore.fetchList(P(P({},e.props.match.params),t))},e.afterEdit=(0,l.default)(o.default.mark((function t(){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.cluster,t.next=3,e.cluster.fetchDetail({name:a});case 3:e.getData();case 4:case"end":return t.stop()}}),t)}))),e.editVisibility=function(){return e.trigger("cluster.visibility.edit",{store:e.cluster,cluster:e.cluster.detail,success:e.afterEdit})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getColumns",value:function(){return[{title:t("WORKSPACE"),dataIndex:"name",render:function(e,t){return S.default.createElement(h.default,{icon:"enterprise",iconSize:40,title:(0,C.showNameAndAlias)(t.name,"workspace"),desc:t.description||"-",noLink:!0})}},{title:t("ADMINISTRATOR"),dataIndex:"manager"},{title:t("AUTHORIZATION_TIME_TCAP"),dataIndex:"createTime",width:"20%",render:function(e){return(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}},{key:"renderVisibility",value:function(){var e=this.workspaceStore.list,a=e.data,r=e.total,n=e.page,o=e.limit,u=e.filters,l=e.keyword,c=e.isLoading,i={total:r,page:n,limit:o},s={name:"Workspace",module:"workspaces",desc:t("CLUSTER_VISIBILITY_DESC")};return S.default.createElement("div",{className:R.default.tableWrapper},S.default.createElement(_.default,{className:"table-1-10",data:(0,b.toJS)(a),filters:u,keyword:l,pagination:i,isLoading:c,onFetch:this.getData,emptyProps:s,columns:this.getColumns(),columnSearch:this.columnSearch}))}},{key:"render",value:function(){return S.default.createElement(S.default.Fragment,null,S.default.createElement(g.default,{icon:"cluster",title:t("CLUSTER_VISIBILITY"),description:t("CLUSTER_VISIBILITY_DESC"),tips:this.tips}),S.default.createElement(v.default,null,S.default.createElement("div",{className:R.default.header},S.default.createElement(y.default,{icon:this.isClusterPublicVisible?"eye":"eye-closed",title:this.isClusterPublicVisible?t("VISIBILITY_PUBLIC"):t("VISIBILITY_PARTIAL"),description:t("CLUSTER_VISIBILITY_SCAP")}),globals.app.isMultiCluster&&this.enabledActions.includes("manage")&&S.default.createElement(m.Button,{onClick:this.editVisibility},t("EDIT_VISIBILITY"))),this.renderVisibility()))}},{key:"cluster",get:function(){return this.props.clusterStore}},{key:"isClusterPublicVisible",get:function(){return"public"===this.cluster.detail.visibility}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"tips",get:function(){return[{title:t("CLUSTER_VISIBILITY_Q1"),description:t("CLUSTER_VISIBILITY_A1")}]}},{key:"clusterRules",get:function(){return(0,E.default)(globals,"user.globalRules.clusters",[])}},{key:"columnSearch",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:!0}]}}]),r}(S.default.Component))||u)||u)||u;a.default=D},3408:function(e,t,a){e.exports={header:"_2w6hdp2HJmk_fypnMB8LtJ",tableWrapper:"_15y23XCn7gLEvRQ1wRkT2p"}},3409:function(e,t,a){"use strict";a(17);var r=a(19);a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n=r(a(25)),o=r(a(28)),u=r(a(38)),l=r(a(39)),c=r(a(35)),i=r(a(0)),s=r(a(1512));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var f=function(e){(0,u.default)(a,e);var t=d(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"pageClose",value:function(){window.opener=null,window.open("","_self",""),window.close()}},{key:"render",value:function(){return i.default.createElement(s.default,{title:"kubeconfig",match:this.props.match,onCancel:this.pageClose})}}]),a}(i.default.Component);t.default=f},3410:function(e,a,r){"use strict";var n=r(19),o=r(163);r(12),r(11),r(6),r(67),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(74),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(r(318)),l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35));r(12),r(31),r(11),r(6),r(67),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(74),r(7);var p,m=o(r(0)),h=r(245),v=r(805),y=n(r(947)),g=n(r(448)),_=n(r(69)),E=n(r(26)),b=r(192),O=n(r(845)),S=n(r(811)),k=n(r(5)),C=r(56),T=o(r(807)),R=n(r(962)),A=n(r(3411));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=function(){return"platform-admin"===(0,E.default)(window,"globals.user.globalrole","")},I=(0,R.default)(["tags-duotone"])(p=(0,T.default)({store:new y.default("labels"),module:"nodes",authKey:"cluster_tags",name:"CLUSTER_TAGs"})(p=(0,h.inject)("rootStore")(p=(0,h.observer)(p=(0,v.trigger)(p=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).initData=function(){t.fetchData()},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.store.fetchList(w(w({},e),{},{limit:10}))},t.handleTabChange=function(){t.routing.push("/clusters")},t.showAddTags=function(){t.trigger("cluster.tag.add",{module:"clusters",success:t.routing.query,store:t.store})},t.store=t.props.store,t.clusterStore=new g.default,t}return(0,i.default)(r,[{key:"getColumns",value:function(){var e=this.props.getSortOrder;return[{title:t("CLUSTER_TAG"),dataIndex:"id",isHideable:!0,render:function(e,t){return m.createElement("div",{className:(0,k.default)(A.default.clusterTagItem)},m.createElement("div",{className:A.default.label},t.label),m.createElement("div",{className:A.default.value},t.value))}},{title:t("CLUSTER"),dataIndex:"clusters",isHideable:!0,render:function(e){return e.length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:e("createTime"),isHideable:!0,width:200,render:function(e){return e?(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"componentDidMount",value:function(){this.initData()}},{key:"renderList",value:function(){var e=this.store.list,a=e.filters,r=e.isLoading,n=e.data,o=e.page,l=this.props.tableProps;return!(0,_.default)(n)||r||!(0,_.default)(a)||1!==o&&o?m.createElement(S.default,(0,u.default)({},l,{data:n,loading:r,enabledActions:N()?["edit","bind","hasBundled","delete","create"]:(0,E.default)(window,"globals.user.globalRules.clusters",[]).includes("manage")?["view","bind","hasBundled"]:["view"],itemActions:this.itemActions,rowKey:"name",tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showAddTags,searchType:"name"})):m.createElement(O.default,{icon:"tags-duotone",title:t("NO_CLUSTER_TAGS"),desc:t("NO_CLUSTER_TAGS_DESC"),actions:N()?m.createElement(b.Button,{type:"control",onClick:this.showAddTags},t("CREATE")):null})}},{key:"render",value:function(){return m.createElement(T.ListPage,this.props,this.renderList())}},{key:"authKey",get:function(){return"clusters"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"tableActions",get:function(){var e=this;return w(w({},this.props.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("cluster.tag.delete",{type:e.name,detail:e.store.list.data.filter((function(t){return e.store.list.selectedRowKeys.includes(t.name)})),success:e.routing.query})}}]})}},{key:"tabs",get:function(){return{value:"tags",onChange:this.handleTabChange,options:[{value:"clusters",label:t("CLUSTER_PL")},{value:"tags",label:t("CLUSTER_TAGS")}]}}},{key:"itemActions",get:function(){var e=this;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return e.trigger("cluster.tag.edit",{name:t.name,detail:[{key:t.label,value:t.value}],store:e.store,success:e.routing.query})}},{key:"bind",icon:"link",action:"bind",text:t("ADD_TO_CLUSTERS"),onClick:function(t){e.trigger("cluster.tag.bind",{detail:t,getList:e.clusterStore.fetchAllCluster,success:e.routing.query})}},{key:"hasBundled",icon:"eye",text:t("REMOVE_FROM_CLUSTERS"),action:"hasBundled",disabled:function(e){var t;return!(null==e||null===(t=e.clusters)||void 0===t?void 0:t.length)},onClick:function(t){e.trigger("cluster.tag.hasBundled",{detail:t,getList:e.clusterStore.fetchAllCluster,success:e.routing.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("cluster.tag.delete",{type:e.name,resource:t.name,detail:t,success:e.routing.query})}}]}}]),r}(m.Component))||p)||p)||p)||p)||p;a.default=I},3411:function(e,t,a){e.exports={banner:"_8MR_jkuxX3BO24ISjg65o",wrapper:"_2_LExZycdD34qPtVII-cl-",clusterTagItem:"_2-621emWvGyt67MEm5v4NS",label:"_1R5k1j8Y_KUzpUHIoj_sqP",value:"Qtmr8FVzhABs8l5KJ_nvB",loading:"_2pXZ8G1tXWMPRfWtv8hzmv"}},3412:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1538)),o=r(a(1554)),u=r(a(1555)),l=r(a(1556)),c=r(a(1559)),i=r(a(1560)),s=r(a(1562)),d=r(a(1564)),f=r(a(1565)),p=r(a(1566)),m=r(a(1568)),h=r(a(1573)),v=r(a(1575)),y=r(a(3513)),g=r(a(3519)),_=r(a(3520)),E=r(a(3533)),b=r(a(3562)),O=r(a(3567)),S=r(a(3570)),k=r(a(3574)),C=r(a(3579)),T="/clusters/:cluster",R=[{path:"".concat(T,"/nodes/:node"),component:_.default},{path:"".concat(T,"/customresources/:name"),component:S.default},{path:"".concat(T,"/roles/:name"),component:k.default},{path:"".concat(T,"/components/:namespace/:name"),component:O.default},{path:"".concat(T,"/storageclasses/:name"),component:b.default},{path:"".concat(T,"/ippools/:name"),component:C.default},{path:"".concat(T,"/pv/:name"),component:y.default},{path:"".concat(T,"/projects/:namespace"),component:g.default,routes:[{path:"".concat(T,"/projects/:namespace/deployments/:name"),component:n.default},{path:"".concat(T,"/projects/:namespace/statefulsets/:name"),component:o.default},{path:"".concat(T,"/projects/:namespace/daemonsets/:name"),component:u.default},{path:"".concat(T,"/projects/:namespace/jobs/:name"),component:l.default},{path:"".concat(T,"/projects/:namespace/cronjobs/:name"),component:c.default},{path:"".concat(T,"/projects/:namespace/services/:name"),component:i.default},{path:"".concat(T,"/projects/:namespace/ingresses/:name"),component:s.default},{path:"".concat(T,"/projects/:namespace/secrets/:name"),component:d.default},{path:"".concat(T,"/projects/:namespace/configmaps/:name"),component:f.default},{path:"".concat(T,"/projects/:namespace/serviceaccounts/:name"),component:p.default},{path:"".concat(T,"/projects/:namespace/pods/:podName/containers/:containerName"),component:h.default},{path:"".concat(T,"/projects/:namespace/pods/:podName"),component:m.default},{path:"".concat(T,"/projects/:namespace/volumes/:name"),component:v.default},{path:"".concat(T,"/projects/:namespace"),component:E.default}]}];t.default=R},3513:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(88),r(68),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(137),r(31),r(3),r(88),r(68),r(27),r(30),r(14),r(4),r(21),r(16),r(40),r(29),r(10),r(66);var o=n(r(318)),u=n(r(42));r(36);var l=n(r(43)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(0)),m=n(r(69)),h=n(r(26)),v=r(245),y=r(192),g=n(r(808)),_=r(56),E=r(805),b=r(18),O=n(r(467)),S=n(r(835)),k=n(r(3514));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new O.default,e.fetchData=(0,l.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.props.match.params);case 2:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,b.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",disabled:["Bound"].indexOf((0,h.default)(e.store.detail,"phase"))>-1,onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,b.toJS)(e.store.detail),success:e.returnTolist})}}]},e.getAttrs=function(){var a=e.store.detail,r=void 0===a?{}:a,n=r.createTime,o=r.phase,u=r.storageClassName,l=r.volumeHandle,c=r.persistentVolumeReclaimPolicy,i=r.accessModes,s=void 0===i?["-"]:i,d=r.capacity,f=r.volumeMode;return(0,m.default)((0,b.toJS)(r))?null:[{name:t("STATUS"),value:p.default.createElement("div",null,p.default.createElement(g.default,{type:o,name:t("PV_STATUS_".concat(o.toUpperCase()))}))},{name:t("CAPACITY"),value:"".concat((0,_.memoryFormat)(d,"Gi"),"Gi")},{name:t("ACCESS_MODE_TCAP"),value:s.join(",")},{name:t("STORAGE_CLASS"),value:u},{name:t("VOLUME_HANDLE"),value:l},{name:t("RECLAIM_POLICY"),value:c},{name:t("VOLUME_MODE"),value:t("VOLUME_MODE_".concat(f.toUpperCase()))},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.isFedManaged?[]:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("PERSISTENT_VOLUME_PL"),url:this.listUrl}]};return p.default.createElement(S.default,(0,o.default)({stores:e},a,{routes:(0,k.default)(this.props.match.path)}))}},{key:"name",get:function(){return"PERSISTENT_VOLUME"}},{key:"module",get:function(){return"persistentvolumes"}},{key:"authKey",get:function(){return"persistentvolumeclaims"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/volumes/PV")}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}}]),r}(p.default.Component),R=(0,v.inject)("rootStore")((0,v.observer)((0,E.trigger)(T)));a.default=R;var A=T;a.Component=A},3514:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(868)),u=r(a(869)),l=r(a(3515));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:l.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:o.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3515:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(6),r(68),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(68),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(7);var o,u=n(r(32)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(245),m=r(192),h=n(r(802)),v=n(r(451)),y=r(56),g=r(18),_=n(r(69)),E=n(r(3516)),b=n(r(3518));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=f.default.createElement("div",null,f.default.createElement("div",null,t("RWO_DESC")),f.default.createElement("div",null,t("ROX_DESC")),f.default.createElement("div",null,t("RWX_DESC"))),C=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new v.default,e.renderItem=function(){var a=e.store.detail;return f.default.createElement("div",null,f.default.createElement("div",{className:b.default.ItemBox},f.default.createElement("div",{className:b.default.leftBox},f.default.createElement(m.Icon,{name:"storage",size:"40"}),f.default.createElement("div",{className:b.default.rightBox},f.default.createElement("span",{className:b.default.title},a.name),f.default.createElement("span",{className:b.default.des},t("STORAGE_CLASS_VALUE",{value:a.storageClassName})))),f.default.createElement("div",{className:b.default.titleBox},f.default.createElement("span",{className:b.default.title},(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")),f.default.createElement("span",{className:b.default.des},t("CREATION_TIME")))),f.default.createElement("div",{className:b.default.IconLine},f.default.createElement("div",{className:b.default.cardBox},f.default.createElement(m.Icon,{name:"bm",size:30}),f.default.createElement("div",{className:b.default.text},f.default.createElement("span",{className:b.default.title},a.storageProvisioner),f.default.createElement("span",{className:b.default.des},t("PROVISIONER")))),f.default.createElement("div",{className:b.default.cardBox},f.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/Accessmodes.svg",size:48}),f.default.createElement("div",{className:b.default.text},f.default.createElement("span",{className:b.default.title},e.mapperAccessMode((0,g.toJS)(a.accessModes))),f.default.createElement("span",{className:b.default.des},e.renderAccessTitle()))),f.default.createElement("div",{className:b.default.cardBox},f.default.createElement(m.Icon,{name:"database",size:30}),f.default.createElement("div",{className:b.default.text},f.default.createElement("span",{className:b.default.title},a.capacity),f.default.createElement("span",{className:b.default.des},t("CAPACITY"))))))},e.renderAccessTitle=function(){return f.default.createElement("div",{className:b.default.mode_title},t("ACCESS_MODE"),f.default.createElement(m.Tooltip,{content:k},f.default.createElement(m.Icon,{name:"question",size:16,className:b.default.toolTip})))},e.mapperAccessMode=function(e){var t=(0,y.map_accessModes)(e);return f.default.createElement(f.default.Fragment,null,f.default.createElement("span",null,t.join(",")))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.detailStore.detail,t=e._originData,a=e.phase,r=e.cluster;"Bound"!==a?this.store.isLoading=!1:this.store.fetchDetail(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({cluster:r},t.spec.claimRef))}},{key:"render",value:function(){var e=this.store,a=e.detail,r=e.isLoading;return f.default.createElement(f.default.Fragment,null,f.default.createElement(E.default,null),f.default.createElement(h.default,{title:t("PERSISTENT_VOLUME_CLAIM")},!(0,_.default)(a)&&f.default.createElement(m.Loading,{spinning:r},this.renderItem())))}}]),r}(f.default.Component))||o)||o;a.default=C},3516:function(e,a,r){"use strict";r(17);var n=r(163),o=r(19);r(41),r(6),r(20),r(14),r(99),r(4),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=o(r(97));r(31),r(41),r(6),r(20),r(27),r(30),r(14),r(99),r(4),r(10);var l=o(r(801)),c=o(r(26)),i=o(r(69)),s=r(245),d=n(r(0)),f=o(r(3517)),p=[{label:"ANY_PATH",value:""},{label:"DIRECTORY_OR_CREATE",value:"DirectoryOrCreate"},{label:"FILE_OR_CREATE",value:"FileOrCreate"},{label:"DIRECTORY_EXIST",value:"Directory"},{label:"FILE_EXIST",value:"File"},{label:"SOCKET_EXIST",value:"Socket"},{label:"CHARACTER_DEVICE_EXIST",value:"CharDevice"},{label:"BLOCK_DEVICE_EXIST",value:"BlockDevice"}],m=[{label:"NODE_EXPAND_KEY",key:"nodeExpandSecretRef"},{label:"NODE_PUBLISH_KEY",key:"nodePublishSecretRef"},{label:"NODE_STAGING_KEY",key:"nodeStageSecretRef"},{label:"CONTROLLER_EXPAND_KEY",key:"controllerExpandSecretRef"},{label:"CONTROLLER_PUBLISH_KEY",key:"controllerPublishSecretRef"}],h={CSI:[{label:"DRIVER",valuePath:"csi.driver"},{label:"FSTYPE",valuePath:"csi.fsType"},{label:"VOLUME_HANDLE",valuePath:"csi.volumeHandle"},{label:"READ_ONLY",valuePath:"csi.readOnly"}],HostPath:[{label:"HOST_PATH",valuePath:"hostPath.path"},{label:"PATH_TYPE",valuePath:"hostPath.type",render:function(e){var a,r=e||"";return t(null===(a=p.find((function(e){return e.value===r})))||void 0===a?void 0:a.label)}}],NFS:[{label:"PATH",valuePath:"nfs.path"},{label:"SERVER_IP_ADDRESS",valuePath:"nfs.server"}]},v=(0,s.inject)("detailStore")((0,s.observer)((function(e){var a=e.detailStore.detail,r=[];m.forEach((function(e){(0,c.default)(a,"csi.".concat(e.key))&&r.push({label:e.label,name:(0,c.default)(a,"csi.".concat(e.key,".name")),namespace:(0,c.default)(a,"csi.".concat(e.key,".namespace"))})}));var n=a.volumeType;return d.createElement("div",{className:f.default.wrapper},d.createElement(l.default,{icon:"database",title:n,description:t("VOLUME_TYPE")}),h[n]&&d.createElement("div",{className:f.default.attrs},h[n].map((function(e){return d.createElement("div",{className:f.default.attr,key:e.valuePath},d.createElement("div",{className:f.default.attrValue},e.render?e.render((0,c.default)(a,e.valuePath,!1)):(0,c.default)(a,e.valuePath,!1).toString()),d.createElement("div",{className:f.default.attrTitle},t(e.label)))}))),function(){switch(n){case"CSI":return d.createElement(d.Fragment,null,!(0,i.default)((0,c.default)(a,"csi.volumeAttributes"))&&d.createElement(d.Fragment,null,d.createElement("div",{className:f.default.title},d.createElement("div",null,t("VOLUME_ATTRIBUTES"))),Object.entries((0,c.default)(a,"csi.volumeAttributes")).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return d.createElement("div",{key:a,className:f.default.kvContainer},d.createElement("div",{className:f.default.k},a),d.createElement("div",{className:f.default.v},r))}))),r.length>0&&d.createElement(d.Fragment,null,d.createElement("div",{className:f.default.title},d.createElement("div",null,t("SECRET_INFO"))),r.map((function(e){return d.createElement("div",{key:e.name,className:f.default.objectContainer},d.createElement("div",{className:f.default.v},t(e.label)),d.createElement("div",null,d.createElement("span",{className:f.default.k},t("NAME"),":"),d.createElement("span",{className:f.default.v},e.name)),d.createElement("div",null,d.createElement("span",{className:f.default.k},t("PROJECT"),":"),d.createElement("span",{className:f.default.v},e.namespace)))}))));default:return null}}())})));a.default=v},3517:function(e,t,a){e.exports={wrapper:"_2qRBJsVUbx2DCXhx-PjMOI",title:"DelqatdDDYD0WB80zjyye",attrs:"_3fLkwri_NoztGHHZnQ0Tvk",attr:"_2k08ybc8MfthAHUcjHCwur",k:"_19wHxkkHh7sTteCNmaVgfP",attrTitle:"_2LJajeyjpTUCghMOKSX0lj",attrValue:"Q12wxwvQ_-E9SSJ5IPDHw",objectContainer:"_1wRaHGoiEWQ4U0Y5L81-oi",kvContainer:"_39n5tBsQPDfpckCQt5CuKH",v:"_38RkRqcmTNqMQFeXrZeCLM"}},3518:function(e,t,a){e.exports={ItemBox:"_2mELQmeBTiwa56m4FRuCho",leftBox:"W7Qki2xI0vvqvcb2Q1F2M",rightBox:"_3RqsKWBD7eq3vXQvgCfOsD",title:"_3KYfcJ0CU8B4xFsFQda5Te",toolTip:"_37f2XY7RCBfmVNY1BOdNx8",des:"_2L3vvzzxhB-Zrg5WrqyiuM",titleBox:"_2gmisrquKxEER676oJ7GxM",IconLine:"_1IDNa6yWd9AhFr_21sUGZO",cardBox:"NqsBGhYtt3JFydHzSmjZq",text:"_17aFPuXEkGgpOO2vxoLjb-"}},3519:function(e,t,a){"use strict";a(17);var r=a(19),n=a(163);a(37),a(4),a(21),a(16),a(29),a(10),a(46),a(66),a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(37),a(30),a(4),a(21),a(16),a(40),a(29),a(10),a(46),a(66),a(44);var o=r(a(42));a(36);var u,l=r(a(43)),c=r(a(25)),i=r(a(28)),s=r(a(38)),d=r(a(39)),f=r(a(35)),p=n(a(0)),m=a(245),h=a(192),v=a(319),y=r(a(441));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var t,a=g(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).store=new y.default,t.init(e.match.params),t}return(0,i.default)(r,[{key:"init",value:(t=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.props.rootStore.getRules(t)]);case 3:this.store.initializing=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(h.Loading,{className:"ks-page-loading"}):p.default.createElement(m.Provider,{projectStore:this.store},(0,v.renderRoutes)(this.props.route.routes))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),r}(p.Component))||u)||u;t.default=_},3520:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(88),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(88),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(18),m=r(245),h=n(r(26)),v=n(r(69)),y=r(192),g=r(56),_=r(334),E=r(805),b=n(r(454)),O=n(r(943)),S=n(r(808)),k=n(r(3521));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,E.trigger)(o=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new b.default,e.fetchData=function(){var t=e.props.match.params,a=t.cluster,r=t.node;e.store.fetchDetail({name:r,cluster:a})},e.getOperations=function(){var a=e.store.detail.unschedulable;return[{key:"cordon",type:a?"control":"danger",text:a?t("UNCORDON"):t("CORDON"),action:"edit",onClick:e.handleCordon},{key:"eidtLabel",icon:"pen",text:t("EDIT_LABELS"),action:"edit",onClick:function(){return e.trigger("node.labels",{title:t("LABEL_PL"),detail:e.store.detail,success:e.fetchData})}},{key:"taintManagement",icon:"wrench",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return e.trigger("node.taint",{detail:e.store.detail,success:e.fetchData})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,v.default)(a)){var r=(0,_.getNodeStatus)(a),n=f.default.createElement(S.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),o=(0,h.default)(a,"status.addresses[0].address","-"),u=a.nodeInfo||{};return[{name:t("STATUS"),value:n},{name:t("IP_ADDRESS"),value:o},{name:t("ROLE"),value:-1===(0,_.getNodeRoles)(a.labels).indexOf("master")?t("WORKER"):t("CONTROL_PLANE")},{name:t("OS_VERSION"),value:u.osImage},{name:t("OS_TYPE"),value:t(u.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:u.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:u.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:u.kubeletVersion},{name:t("KUBE_PROXY_VERSION"),value:u.kubeProxyVersion},{name:t("ARCHITECTURE"),value:u.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,p.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,g.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_NODE_PL"),url:this.listUrl}]};return f.default.createElement(O.default,(0,u.default)({stores:e,routes:k.default},a))}},{key:"module",get:function(){return"nodes"}},{key:"name",get:function(){return"CLUSTER_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/nodes")}}]),r}(f.default.Component))||o)||o)||o;a.default=T},3521:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(869)),u=r(a(3522)),l=r(a(3530)),c=r(a(3531)),i=r(a(3532)),s="/clusters/:cluster/nodes/:node",d=[{path:"".concat(s,"/status"),title:"RUNNING_STATUS",component:u.default,exact:!0},{path:"".concat(s,"/pods"),title:"PODS",component:l.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(s,"/monitors"),title:"MONITORING",component:c.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(s,"/events"),title:"EVENT_PL",component:i.default,exact:!0},(0,n.getIndexRoute)({path:s,to:"".concat(s,"/status"),exact:!0})];t.default=d},3522:function(e,a,r){"use strict";r(17);var n=r(19);r(67),r(20),r(14),r(4),r(16),r(29),r(10),r(74),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(67),r(20),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(74),r(66);var o,u=n(r(25)),l=n(r(28)),c=n(r(38)),i=n(r(39)),s=n(r(35)),d=n(r(0)),f=r(18),p=r(245),m=n(r(26)),h=n(r(69)),v=n(r(1210)),y=r(56),g=n(r(802)),_=n(r(801)),E=n(r(3523)),b=n(r(3525)),O=n(r(3527)),S=n(r(3529));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var C=["node_cpu_utilisation","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_pod_utilisation"],T=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,c.default)(r,e);var a=k(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).store=e.detailStore,t.monitoringStore=new v.default({cluster:t.cluster}),t}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,a=e.role,r=void 0===a?[]:a;this.monitoringStore.fetchMetrics({resources:[t],metrics:(0,y.hideGPUByLicense)(C,this.cluster),step:"180s",fillZero:!r.includes("edge")})}},{key:"renderResourceStatus",value:function(){var e=(0,f.toJS)(this.monitoringStore.data),a=[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,m.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,m.default)(e,"node_memory_utilisation.data.result")},{key:"gpu",icon:"gpu",unit:"%",legend:["GPU_USAGE"],title:"GPU_USAGE",data:(0,m.default)(e,"node_gpu_utilization.data.result")},{key:"gpu_memory",icon:"computing",unit:"%",legend:["GPU_MEMORY_USAGE"],title:"GPU_MEMORY_USAGE",data:(0,m.default)(e,"node_gpu_memory_utilization.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,m.default)(e,"node_pod_utilisation.data.result")},{key:"storage",icon:"database",unit:"%",legend:["DISK_USAGE"],title:"DISK_USAGE",data:(0,m.default)(e,"node_disk_size_utilisation.data.result")}];return d.default.createElement(g.default,{className:S.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},d.default.createElement(E.default,{tabs:(0,y.hideGPUByLicense)(a)}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return d.default.createElement(g.default,{className:S.default.allocated,title:t("ALLOCATED_RESOURCES")},d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return d.default.createElement(g.default,{title:t("HEALTH_STATUS")},d.default.createElement("div",{className:S.default.conditions},e.map((function(e,t){return d.default.createElement(b.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,h.default)(e)?null:d.default.createElement(g.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&d.default.createElement("div",null,e.map((function(e,t){return d.default.createElement(O.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:S.default.main},this.renderResourceStatus(),this.renderAllocatedResources(),this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),r}(d.default.Component))||o)||o;a.default=T},3523:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(41),r(20),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(41),r(20),r(30),r(4),r(16),r(40),r(10);var o=n(r(318)),u=n(r(32)),l=n(r(25)),c=n(r(28)),i=n(r(75)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(0)),m=n(r(1)),h=n(r(5)),v=n(r(26)),y=n(r(69)),g=r(804),_=n(r(801)),E=r(821),b=n(r(3524));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=O(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={activeTab:(0,v.default)((0,i.default)(e),"props.tabs[0].key","")},e.getLastValue=function(e,t){var a=(0,v.default)(e,"[0].values",[]);return(0,g.getValueByUnit)(a[a.length-1][1],t)},e.handleTabClick=function(t){return e.setState({activeTab:t.currentTarget.dataset.key})},e}return(0,c.default)(r,[{key:"renderTabList",value:function(){var e=this,a=this.props.tabs,r=this.state.activeTab;return(0,y.default)(a)?null:p.default.createElement("div",{className:b.default.tabHeader},a.map((function(a){return p.default.createElement("div",{key:a.key,className:(0,h.default)(b.default.tabHeaderItem,(0,u.default)({},b.default.active,a.key===r)),"data-key":a.key,onClick:e.handleTabClick},p.default.createElement(_.default,{icon:a.icon,title:a.data?"".concat(e.getLastValue(a.data,a.unit),"%"):"0%",description:t("".concat(a.title,"_SCAP"))}))})))}},{key:"renderTabContent",value:function(){var e=this.props.tabs,t=this.state.activeTab,a=e.find((function(e){return e.key===t}));if(!a||!a.data)return null;var r=(0,g.getAreaChartOps)(a);return p.default.createElement("div",{className:b.default.tabContent},p.default.createElement(E.SimpleArea,(0,o.default)({width:"100%",height:200,theme:"dark",yAxis:{hide:!0,domain:[0,100]}},r)))}},{key:"render",value:function(){return p.default.createElement("div",{className:b.default.wrapper},this.renderTabList(),this.renderTabContent())}}]),r}(p.default.Component);a.default=S,S.propTypes={tabs:m.default.array},S.defaultProps={tabs:[]}},3524:function(e,t,a){e.exports={wrapper:"_1RTOu4WuOVY0Fca7CPEdB9",tabHeader:"Qd42i__2a3FJ2DzYpVXqd",tabHeaderItem:"_2ICL_nLZjLbTcDxms5nROn",active:"_2NpglgYkusPNf1fA7U4yCm",tabContent:"UsMeMpWi8k2TLXu-TzcHv",chartWrapper:"_1WcDqnOpkmr5xePLz3bOpj"}},3525:function(e,a,r){"use strict";r(17);var n=r(19);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(0)),u=r(192),l=r(56),c=r(334),i=n(r(801)),s=n(r(3526)),d=function(e){var a=e.data;if(!c.NODE_CONDITION_ICONS[a.type])return null;var r=(0,c.getConditionsStatus)(a),n=o.default.createElement("div",null,o.default.createElement("div",{className:"tooltip-title"},a.reason),o.default.createElement("p",{className:"tooltip-desc"},a.message),o.default.createElement("p",{className:"tooltip-desc"},t("LAST_HEARTBEAT_VALUE",{value:(0,l.getLocalTime)(a.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return o.default.createElement("div",{className:s.default.card},o.default.createElement("div",{className:s.default.icon},o.default.createElement(u.Icon,{name:c.NODE_CONDITION_ICONS[a.type],size:40}),o.default.createElement(u.Tooltip,{content:n},"Running"===r?o.default.createElement(u.Icon,{className:s.default.check,name:"check",type:"light",size:12}):o.default.createElement(u.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),o.default.createElement(i.default,{title:t("NODE_".concat(a.type.toUpperCase())),description:t("NODE_".concat(a.type.toUpperCase(),"_DESC"))}))};a.default=d},3526:function(e,t,a){e.exports={card:"_3gY1SwAB3Qyzo33NcoETa2",icon:"_3XS03qiViW-ikPky4F7m_x",check:"_2heWfhm7p3vRjks91Lxqps",substract:"_2VlaH5DM4vl23eEoRXmg0V"}},3527:function(e,a,r){"use strict";r(17);var n=r(19);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(0)),u=r(192),l=n(r(3528)),c=function(e){var a=e.data;return o.default.createElement("div",{className:l.default.card},o.default.createElement(u.Columns,null,o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("KEY"),":")," ",a.key)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("VALUE"),":")," ",a.value)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("POLICY"),":")," ",a.effect))))};a.default=c},3528:function(e,t,a){e.exports={card:"_33OfSfo5noeVvDTt0pECNi"}},3529:function(e,t,a){e.exports={charts:"_2JLcedz0mAjNBgUVbRpAlV",resources:"_2izO-GxzIDv54VNolZBX0N",allocated:"_1Ip9txFboGAHGxjdTg1JDy",conditions:"v93LP2ROQDO2QGQL3qZvm"}},3530:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(245),f=r(a(921));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,l.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},3531:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(11),r(6),r(67),r(20),r(14),r(8),r(13),r(9),r(4),r(193),r(16),r(29),r(10),r(74),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(11),r(6),r(67),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(193),r(16),r(40),r(29),r(10),r(74),r(66),r(7);var o,u=n(r(318)),l=n(r(58)),c=n(r(32)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=n(r(0)),h=r(245),v=n(r(26)),y=n(r(69)),g=r(804),_=n(r(1210)),E=r(976),b=r(821),O=n(r(872)),S=r(56);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T={cpu_utilisation:"node_cpu_utilisation",cpu_load1:"node_load1",cpu_load5:"node_load5",cpu_load15:"node_load15",gpu_utilization:"node_gpu_utilization",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_available:"node_gpu_memory_available",gpu_memory_usage:"node_gpu_memory_usage",gpu_temp:"node_gpu_temp",gpu_power_usage:"node_gpu_power_usage",memory_utilisation:"node_memory_utilisation",memory_usage:"node_memory_usage_wo_cache",disk_utilisation:"node_disk_size_utilisation",disk_inode_utilisation:"node_disk_inode_utilisation",device_size_utilisation:"node_device_size_utilisation",disk_inode_usage:"node_disk_inode_usage",disk_inode_total:"node_disk_inode_total",disk_read_iops:"node_disk_read_iops",disk_write_iops:"node_disk_write_iops",disk_read_throughput:"node_disk_read_throughput",disk_write_throughput:"node_disk_write_throughput",net_transmitted:"node_net_bytes_transmitted",net_received:"node_net_bytes_received"},R=(0,h.inject)("detailStore")(o=(0,h.observer)(o=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).fetchData=function(e){var t=n.store.detail,a=t.name,r=t.role,o=void 0===r?[]:r;n.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({resources:[a],metrics:Object.values((0,S.hideGPUByLicense)(T,n.cluster)),fillZero:!o.includes("edge")},e))},n.getMonitoringCfgs=function(){var e=(0,v.default)(n.metrics,"".concat(T.device_size_utilisation,".data.result"),[]),a=e&&e.map((function(e){return e.metric.device}));return[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["CPU_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,v.default)(n.metrics,"".concat(T.cpu_load1,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.cpu_load5,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.cpu_load15,".data.result[0]"),{})]},{type:"usage",title:"MEMORY_USAGE",unitType:"memory",legend:["MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.memory_usage,".data.result"))},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["GPU_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.gpu_utilization,".data.result"))},{type:"utilisation",title:"GPU_MEMORY_USAGE",unit:"%",legend:["GPU_MEMORY_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.gpu_memory_utilization,".data.result"))},{type:"usage",title:"GPU_TEMP",unit:"",legend:["GPU_TEMP"],data:(0,v.default)(n.metrics,"".concat(T.gpu_temp,".data.result"))},{type:"usage",title:"GPU_ENERGY_NO_PERCENT_TCAP",unit:"W",legend:["GPU_ENERGY_NO_PERCENT_TCAP"],data:(0,v.default)(n.metrics,"".concat(T.gpu_power_usage,".data.result"))},{type:"usage",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["NODE_GPU_MEMORY_USAGED","NODE_GPU_MEMORY_UNUSAGED"],data:[(0,v.default)(n.metrics,"".concat(T.gpu_memory_usage,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.gpu_memory_available,".data.result[0]"),{})]},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["INODE_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,g.getChartData)({legend:["INODE_USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(T.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,g.getChartData)({legend:["INODE_USAGE"],valuesData:[(0,v.default)(n.metrics,"".concat(T.disk_inode_total,".data.result[0].values"),[])]});return m.default.createElement(O.default,{usageData:e,totalData:t})}},{type:"utilisation",title:"DISK_USAGE",unit:"%",legend:["DISK_USAGE"],data:(0,v.default)(n.metrics,"".concat(T.disk_utilisation,".data.result"))},{type:"utilisation",title:"DISK_USAGE_DETAILS",unit:"%",legend:["AVERAGE_USAGE"].concat((0,l.default)(a)),data:[(0,v.default)(n.metrics,"".concat(T.disk_utilisation,".data.result[0]"))].concat((0,l.default)(e))},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,v.default)(n.metrics,"".concat(T.disk_read_iops,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.disk_write_iops,".data.result[0]"),{})]},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,v.default)(n.metrics,"".concat(T.disk_read_throughput,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.disk_write_throughput,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_TRAFFIC",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,v.default)(n.metrics,"".concat(T.net_transmitted,".data.result[0]"),{}),(0,v.default)(n.metrics,"".concat(T.net_received,".data.result[0]"),{})]}]},n.monitorStore=new _.default({cluster:n.cluster}),n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.store.detail.createTime,t=this.monitorStore,a=t.isLoading,r=t.isRefreshing,n=(0,S.hideGPUByLicense)(this.getMonitoringCfgs(),this.cluster);return m.default.createElement(E.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:r,isEmpty:(0,y.default)(this.metrics)},n.map((function(e){var t=(0,g.getAreaChartOps)(e);return(0,y.default)(t.data)?null:m.default.createElement(b.SimpleArea,(0,u.default)({key:t.title,width:"100%"},t))})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"metrics",get:function(){return this.monitorStore.data}}]),r}(m.default.Component))||o)||o;a.default=R},3532:function(e,t,a){"use strict";a(17);var r=a(19);a(14),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(14),a(4),a(16),a(40),a(10);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=a(245),d=a(56),f=a(868);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,s.inject)("detailStore")(n=(0,s.observer)(n=function(e){(0,l.default)(a,e);var t=p(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),a}(f.Component))||n)||n;t.default=m},3533:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(6),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(6),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var o,u=n(r(318)),l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=r(192),m=n(r(943)),h=n(r(808)),v=n(r(26)),y=n(r(69)),g=n(r(141)),_=r(18),E=r(245),b=n(r(0)),O=n(r(1043)),S=n(r(441)),k=n(r(875)),C=r(56),T=r(805),R=n(r(3534)),A=n(r(3535));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,E.inject)("rootStore")(o=(0,E.observer)(o=(0,T.trigger)(o=function(e){(0,s.default)(r,e);var a=D(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new S.default,e.quotaStore=new k.default,e.limitRangeStore=new O.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var a=e.name,r=(0,_.toJS)(e.store.detail),n=e.limitRangeStore.list.data;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",type:"control",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:a,detail:(0,g.default)(r,"workspace"),success:e.fetchData})}},{key:"edit-annotations",icon:"pen",action:"manage",text:t("EDIT_ANNOTATIONS"),show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.annotations.edit",{detail:r,success:e.fetchData})}},{key:"editQuota",icon:"pen",text:t("EDIT_PROJECT_QUOTAS"),action:"edit",onClick:function(){return e.trigger("project.quota.edit",{type:a,detail:r,success:function(){return e.quotaStore.fetch(e.params)}})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",w(w({},e.props.match.params),{},{store:e.limitRangeStore,detail:n[0],success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.delete",{type:a,detail:(0,g.default)(r,"workspace"),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,_.toJS)(e.store.detail);if(!(0,y.default)(a))return[{name:t("STATUS"),value:b.default.createElement(h.default,{type:a.status,name:t(a.status)})},{name:t("CLUSTER"),value:(0,C.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("WORKSPACE"),value:(0,C.showNameAndAlias)(a.workspace,"workspace")},{name:t("CREATION_TIME_TCAP"),value:(0,C.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator||"-"}]},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params)}},{key:"render",value:function(){var e={detailStore:this.store,quotaStore:this.quotaStore,limitRangeStore:this.limitRangeStore};if(this.store.isLoading&&!this.store.detail.name)return b.default.createElement(p.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,C.getDisplayNameNew)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_PL"),url:this.listUrl}]};return b.default.createElement("div",{className:R.default.detailPage},b.default.createElement(m.default,(0,u.default)({stores:e,routes:A.default},a)))}},{key:"module",get:function(){return"projects"}},{key:"name",get:function(){return"PROJECT"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/projects")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}},{key:"params",get:function(){return(0,v.default)(this.props.match,"params",{})}}]),r}(b.default.Component))||o)||o)||o;a.default=N},3534:function(e,t,a){e.exports={detailPage:"_1jdNGCQmXYoAXu4jdd0HNQ"}},3535:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(869)),u=r(a(3536)),l=r(a(3547)),c=r(a(3548)),i=r(a(3555)),s="/clusters/:cluster/projects/:namespace",d=[{path:"".concat(s,"/overview"),title:"OVERVIEW",component:u.default,exact:!0},{path:"".concat(s,"/pods"),title:"POD_PL",component:l.default,exact:!0},{path:"".concat(s,"/gateway"),title:"GATEWAY",component:c.default,exact:!0,clusterModule:"gateway"},{path:"".concat(s,"/quota"),title:"QUOTA_PL",component:i.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:o.default,exact:!0},(0,n.getIndexRoute)({path:s,to:"".concat(s,"/overview"),exact:!0})];t.default=d},3536:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(20),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(20),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(25)),l=n(r(28)),c=n(r(38)),i=n(r(39)),s=n(r(35)),d=n(r(0)),f=r(438),p=r(245),m=n(r(328)),h=r(192),v=n(r(802)),y=n(r(847)),g=n(r(3537)),_=n(r(448)),E=n(r(450)),b=n(r(3546));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,c.default)(r,e);var a=O(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).fedStore=new E.default({module:"namespaces"}),e.clusterStore=new _.default,e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){if(this.isFedManaged){var e=this.props.detailStore.detail.name;this.fedStore.fetchDetail({name:e,namespace:e}),this.clusterStore.fetchList({limit:-1})}}},{key:"renderPlacement",value:function(){var e=this.fedStore.detail,a=e.clusters,r=void 0===a?[]:a,n=e.name,o=(0,m.default)(this.clusterStore.list.data,"name");return d.default.createElement(v.default,{title:t("CLUSTER_PL")},d.default.createElement(h.Alert,{type:"warning",message:t("MULTI_CLUSTER_PROJECT_TIP"),hideIcon:!0}),d.default.createElement("div",{className:b.default.clusters},r.map((function(e){return o[e.name]?d.default.createElement(f.Link,{key:e.name,className:b.default.cluster,to:"/clusters/".concat(e.name,"/projects/").concat(n)},d.default.createElement(y.default,{cluster:o[e.name],theme:"light",tagClass:"float-right"})):null}))))}},{key:"render",value:function(){var e=this.props.detailStore.detail;return d.default.createElement(d.default.Fragment,null,this.isFedManaged&&this.renderPlacement(),d.default.createElement(g.default,{match:this.props.match,workspace:e.workspace}))}},{key:"isFedManaged",get:function(){return this.props.detailStore.detail.isFedManaged}}]),r}(d.default.Component))||o)||o;a.default=S},3537:function(e,a,r){"use strict";var n=r(19);r(12),r(11),r(41),r(6),r(20),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(11),r(41),r(6),r(20),r(27),r(30),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(66),r(7);var o,u=n(r(318)),l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(0)),m=r(245),h=n(r(832)),v=n(r(26)),y=r(18),g=r(61),_=r(804),E=n(r(3538)),b=n(r(942)),O=n(r(3539)),S=r(56),k=r(192),C=n(r(802)),T=n(r(3540)),R=n(r(1576)),A=n(r(3545));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=["namespace_pod_count","namespace_deployment_count","namespace_statefulset_count","namespace_daemonset_count","namespace_job_count","namespace_cronjob_count","namespace_pvc_count","namespace_service_count","namespace_secret_count","namespace_configmap_count","namespace_ingresses_extensions_count"],I=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage"],L=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(r,e);var a=D(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.fetchMetrics(),t.overviewStore.fetchResourceStatus(e)},t.fetchMetrics=function(e){var a=t.state,r=a.resourceType,n=a.range;"application"===r?t.appResourceMonitorStore.fetchMetrics(w(w(w({},t.props.match.params),{},{metrics:N,step:"".concat(Math.floor(n/10),"s"),times:10,fillZero:!0},e),{},{autoRefresh:!1})):t.physicalResourceMonitorStore.fetchMetrics(w(w(w({},t.props.match.params),{},{metrics:(0,S.hideGPUByLicense)(I,t.cluster),step:"".concat(Math.floor(n/40),"s"),times:40,fillZero:!0},e),{},{autoRefresh:!1}))},t.getResourceData=function(){var e=(0,y.toJS)(t.overviewStore.resource),a=e.quota,r=void 0===a?{}:a,n=e.status,o=void 0===n?{}:n,u=r.used||{};return[{key:"pods",icon:g.ICON_TYPES.pods,name:"POD",routeName:"pods",num:u["count/pods"],warnNum:o.pods,metric:"namespace_pod_count"},{key:"deployments",icon:g.ICON_TYPES.deployments,name:"DEPLOYMENT",routeName:"deployments",num:u["count/deployments.apps"],warnNum:o.deployments,metric:"namespace_deployment_count"},{key:"statefulsets",icon:g.ICON_TYPES.statefulsets,name:"STATEFULSET",routeName:"statefulsets",num:u["count/statefulsets.apps"],warnNum:o.statefulsets,metric:"namespace_statefulset_count"},{key:"daemonsets",icon:g.ICON_TYPES.daemonsets,name:"DAEMONSET",routeName:"daemonsets",num:u["count/daemonsets.apps"],warnNum:o.daemonsets,metric:"namespace_daemonset_count"},{key:"jobs",icon:g.ICON_TYPES.jobs,name:"JOB",routeName:"jobs",num:u["count/jobs.batch"],metric:"namespace_job_count"},{key:"cronjobs",icon:g.ICON_TYPES.cronjobs,name:"CRONJOB",routeName:"cronjobs",num:u["count/cronjobs.batch"],metric:"namespace_cronjob_count"},{key:"volumes",icon:g.ICON_TYPES.volumes,name:"PERSISTENT_VOLUME_CLAIM",routeName:"volumes",num:u.persistentvolumeclaims||u["count/persistentvolumeclaims"],warnNum:o["persistent-volume-claims"],metric:"namespace_pvc_count"},{key:"services",icon:g.ICON_TYPES.services,name:"SERVICE",routeName:"services",num:u["count/services"],metric:"namespace_service_count"},{key:"routes",icon:g.ICON_TYPES.ingresses,name:"ROUTE",routeName:"ingresses",num:u["count/ingresses.extensions"],metric:"namespace_ingresses_extensions_count"}]},t.handleResouceTypeChange=function(e){t.setState({resourceType:e},(function(){t.fetchMetrics()}))},t.handleRangeChange=function(e){t.setState({range:e},(function(){t.fetchMetrics()}))},t.state={resourceType:"application",range:43200},t.overviewStore=new E.default,t.appResourceMonitorStore=t.props.isObservability?new O.default:new b.default,t.physicalResourceMonitorStore=t.props.isObservability?new O.default:new b.default,t.fetchData(t.props.match.params),t}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,h.default)(e.match.params,this.props.match.params)||this.fetchData(this.props.match.params)}},{key:"componentDidMount",value:function(){(0,_.startAutoRefresh)(this,{method:"fetchMetrics",interval:1e4,leading:!1})}},{key:"componentWillUnmount",value:function(){(0,_.stopAutoRefresh)(this)}},{key:"renderApplicationResource",value:function(){var e=(0,y.toJS)(this.overviewStore.resource).isLoading,t=this.appResourceMonitorStore,a=t.data,r=t.isLoading,n=t.isRefreshing,o=this.getResourceData(),l=this.props,c=l.isObservability,i=l.match;return p.default.createElement(k.Loading,{spinning:e},p.default.createElement("div",{className:A.default.resources},o.filter((function(e){return!e.disabled})).map((function(e){return p.default.createElement(T.default,(0,u.default)({},i.params,e,{metrics:(0,v.default)(a,"".concat(e.metric,".data.result")),isMetricsLoading:r||n,isObservability:c}))}))))}},{key:"renderPhysicalResource",value:function(){var e=this,a=this.physicalResourceMonitorStore,r=a.data,n=a.isLoading,o=a.isRefreshing,u=this.timeOptions.find((function(t){return t.value===e.state.range}))||{};return p.default.createElement("div",null,p.default.createElement(R.default,{type:"cpu",title:t("CPU_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_cpu_usage.data.result"),isLoading:n||o,showDay:u.value>=172800}),p.default.createElement(R.default,{type:"memory",title:t("MEMORY_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_memory_usage_wo_cache.data.result"),isLoading:n||o,showDay:u.value>=172800}),this.showLicenseTip&&p.default.createElement(p.default.Fragment,null,p.default.createElement(R.default,{type:"cpu",title:t("GPU_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_gpu_usage.data.result"),isLoading:n||o,showDay:u.value>=172800}),p.default.createElement(R.default,{type:"memory",title:t("GPU_MEMORY_USAGE_TIME",{time:u.label}),metrics:(0,v.default)(r,"namespace_gpu_memory_usage.data.result"),isLoading:n||o,showDay:u.value>=172800})))}},{key:"renderHeader",value:function(){return globals.app.hasClusterModule(this.cluster,"whizard-monitoring")?p.default.createElement("div",{className:A.default.header},p.default.createElement(k.RadioGroup,{mode:"button",value:this.state.resourceType,onChange:this.handleResouceTypeChange,size:"small"},p.default.createElement(k.RadioButton,{value:"application"},t("APPLICATION_RESOURCE_PL")),p.default.createElement(k.RadioButton,{value:"physical"},t("PHYSICAL_RESOURCE_PL"))),p.default.createElement(k.Select,{className:A.default.timeSelect,defaultValue:this.state.range,options:this.timeOptions,onChange:this.handleRangeChange})):null}},{key:"render",value:function(){var e=this.state.resourceType;return p.default.createElement(C.default,{className:A.default.wrapper,title:t("RESOURCE_STATUS")},this.renderHeader(),"application"===e?this.renderApplicationResource():this.renderPhysicalResource())}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,v.default)(this.props.match,"params.namespace")}},{key:"cluster",get:function(){return(0,v.default)(this.props.match,"params.cluster")}},{key:"timeOptions",get:function(){return[{label:t("LAST_TIME_H",{num:1}),value:3600},{label:t("LAST_TIME_H",{num:2}),value:7200},{label:t("LAST_TIME_H",{num:5}),value:18e3},{label:t("LAST_TIME_H",{num:12}),value:43200},{label:t("LAST_TIME_D",{num:1}),value:86400},{label:t("LAST_TIME_D",{num:2}),value:172800},{label:t("LAST_TIME_D",{num:3}),value:259200},{label:t("LAST_TIME_D",{num:7}),value:604800}]}},{key:"showLicenseTip",get:function(){var e;return!(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)&&(0,v.default)(globals,'ksConfig["gpu.monitoring"]',!1)}}]),r}(p.default.Component))||o)||o;a.default=L},3538:function(e,t,a){"use strict";a(17);var r=a(19);a(37),a(8),a(4),a(21),a(46),a(44),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(37),a(8),a(4),a(21),a(46),a(44);var n=r(a(42)),o=r(a(97));a(36);var u,l,c=r(a(43)),i=r(a(62)),s=r(a(25)),d=r(a(28)),f=r(a(45)),p=(r(a(63)),a(18)),m=a(56),h=(u=function(){function e(){(0,s.default)(this,e),(0,i.default)(this,"resource",l,this)}var t;return(0,d.default)(e,[{key:"getPath",value:function(e){var t=e.cluster,a=e.namespace,r="";return t&&(r+="/klusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchResourceStatus",value:(t=(0,c.default)(n.default.mark((function e(t){var a,r,u,l;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resource.isLoading=!0,e.next=3,Promise.all([(0,m.to)(request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath(t),"/quotas"))),(0,m.to)(request.get("kapis/resources.kubesphere.io/v1alpha2".concat(this.getPath(t),"/abnormalworkloads")))]);case 3:a=e.sent,r=(0,o.default)(a,2),u=r[0],l=r[1],this.resource={quota:u.data,status:l.data,isLoading:!1};case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l=(0,f.default)(u.prototype,"resource",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{quota:{},status:{},isLoading:!0}}}),(0,f.default)(u.prototype,"fetchResourceStatus",[p.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchResourceStatus"),u.prototype),u);t.default=h},3539:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(38)),u=r(a(39)),l=r(a(35));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var i=function(e){(0,o.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).handleParams=function(e){return e},e.getApi=function(){return"".concat(e.apiVersion,"/namespace_metrics")},e}return a}(r(a(1544)).default);t.default=i},3540:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(14),r(4),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(27),r(30),r(14),r(4),r(16),r(40),r(10);var o,u,l,c=n(r(318)),i=n(r(32)),s=n(r(25)),d=n(r(28)),f=n(r(38)),p=n(r(39)),m=n(r(35)),h=n(r(0)),v=r(245),y=n(r(1)),g=n(r(5)),_=n(r(199)),E=r(192),b=r(804),O=n(r(3541)),S=n(r(3542));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,v.inject)("rootStore")(o=(0,v.observer)((l=u=function(e){(0,f.default)(r,e);var a=k(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleClick=function(){var t=e.props,a=t.onClick,r=t.name,n=t.routeName,o=t.workspace,u=t.namespace,l=t.cluster,c=t.isObservability;(0,_.default)(a)?a(r):n&&e.routing.push(c?"/whizard-telemetry/".concat(l,"/").concat(n,"?namespace=").concat(u):o?"/".concat(o,"/clusters/").concat(l,"/projects/").concat(u,"/").concat(n):"/clusters/".concat(l,"/").concat(n,"?namespace=").concat(u))},e.handleWarnClick=function(t){t.stopPropagation();var a=e.props,r=a.routeName,n=a.onClick,o=a.name,u=a.workspace,l=a.namespace,c=a.cluster,i=a.isObservability,s="volumes"===r?"pending":"updating";(0,_.default)(n)?n(o,s):r&&e.routing.push(i?"/whizard-telemetry/".concat(c,"/projects/").concat(l,"/").concat(r,"?status=").concat(s):u?"/".concat(u,"/clusters/").concat(c,"/projects/").concat(l,"/").concat(r,"?status=").concat(s):"/clusters/".concat(c,"/").concat(r,"?status=").concat(s))},e}return(0,d.default)(r,[{key:"renderWarn",value:function(){var e=this.props,a=e.warnNum,r=e.name,n=a>99?h.default.createElement("div",{className:S.default.skip},"..."):a;return a>0?h.default.createElement("div",{className:S.default.warn},h.default.createElement(E.Tooltip,{className:S.default.tips,content:t("RESOURCE_WARNING_TIPS",{warnNum:a,tipName:t("".concat(r,"_PL"))})},h.default.createElement("div",{onClick:this.handleWarnClick},n))):null}},{key:"render",value:function(){var e=this.props,a=e.className,r=e.icon,n=e.iconSize,o=e.name,u=e.routeName,l=e.num,s=e.metrics,d=e.onClick,f=e.cluster,p=(0,b.getAreaChartOps)({title:"",unit:"",legend:["COUNT"],data:s});return h.default.createElement("div",{"data-name":o,className:(0,g.default)(S.default.card,a)},h.default.createElement("div",{className:S.default.icon},h.default.createElement(E.Icon,{name:r,size:n}),this.renderWarn()),h.default.createElement("div",{className:(0,g.default)(S.default.info,(0,i.default)({},S.default.cursor,u||d)),onClick:this.handleClick},h.default.createElement("strong",null,l),h.default.createElement("span",null,"1"===l?t(o):t("".concat(o,"_PL")))),globals.app.hasClusterModule(f,"whizard-monitoring")&&h.default.createElement(O.default,(0,c.default)({width:330,height:44,bgColor:"transparent"},p)))}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(h.default.Component),u.propTypes={className:y.default.string,icon:y.default.string,iconSize:y.default.number,name:y.default.string,namespace:y.default.string,routeName:y.default.string,num:y.default.oneOfType([y.default.number,y.default.string]),warnNum:y.default.number,onClick:y.default.func},u.defaultProps={icon:"appcenter",iconSize:40,name:"deployment",namespace:"default",routeName:"",num:0,warnNum:0},o=l))||o)||o;a.default=C},3541:function(e,t,a){"use strict";a(17);var r=a(19);a(839),a(11),a(20),a(9),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(839),a(11),a(20),a(30),a(9),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(28)),u=r(a(38)),l=r(a(39)),c=r(a(35)),i=r(a(0)),s=r(a(1)),d=a(61),f=r(a(880)),p=r(a(852)),m=r(a(853)),h=r(a(926)),v=r(a(908)),y=r(a(854)),g=r(a(872));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,l.default)(this,a)}}var E=function(e){(0,u.default)(a,e);var t=_(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"getVeticalPoints",value:function(){var e=this.props.width,t=(e-10)/10;return Array(10).fill("").map((function(e,a){return 5+t*a}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,a=e.areaColors,r={stroke:"#55bc8a",strokeWidth:1,fill:"#fff",fillOpacity:1};return this.series.map((function(e,n){var o=d.COLORS_MAP[a[n]];return i.default.createElement(f.default,{key:e,dataKey:e,stroke:o,fillOpacity:"0.1",fill:o,unit:t,dot:r})}))}},{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,r=e.xKey,n=e.data;return i.default.createElement(y.default,{width:t,height:a,debounce:1},i.default.createElement(h.default,{data:n},i.default.createElement(m.default,{dataKey:r,hide:!0}),i.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:i.default.createElement(g.default,null)}),i.default.createElement(v.default,{strokeDasharray:"3 6",horizontal:!1,verticalPoints:this.getVeticalPoints()}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,a=e.data;return Object.keys(a[0]||{}).filter((function(e){return e!==t}))}}]),a}(i.default.Component);t.default=E,E.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},E.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:d.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},3542:function(e,t,a){e.exports={card:"_2EqCYVjXVpgt08cuRczGSh",icon:"_36HfcePtCXEzvj8yzTS4vF",warn:"_1ntTH3ZrzLLbchIomuwlhQ",tips:"-w63JOV5KksV8TOcQl-U3",skip:"_2kxI8l5XqQlDPtMvynz3RZ",info:"_1u4G7Fwu2z6_yIx2xKMV71",cursor:"_1gP2nTFiH8FENSNxmyr2hr"}},3545:function(e,t,a){e.exports={wrapper:"_29aBx9QNbrjLovrOIFCqJl",header:"_3S-YBwfAwlBHzJQi5UvabR",timeSelect:"_3zET3ukjC_TJNnZ6Dw5ePh"}},3546:function(e,t,a){e.exports={clusters:"_2cmfLkh2-73OlEHQZ0JznP",cluster:"Eh3sYZ8Yv_OZPh6LmU4ij"}},3547:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(245),f=r(a(921));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,l.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},3548:function(e,a,r){"use strict";var n=r(19);r(12),r(3),r(194),r(11),r(6),r(20),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(3),r(194),r(11),r(6),r(20),r(27),r(30),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(16),r(40),r(29),r(10),r(66),r(7);var o=n(r(318)),u=n(r(42));r(36);var l,c,i,s,d=n(r(43)),f=n(r(32)),p=n(r(62)),m=n(r(25)),h=n(r(28)),v=n(r(75)),y=n(r(38)),g=n(r(39)),_=n(r(35)),E=n(r(45)),b=(n(r(63)),n(r(0))),O=n(r(3549)),S=r(192),k=n(r(913)),C=r(18),T=r(245),R=n(r(69)),A=n(r(802)),P=n(r(3554));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var I=(0,T.inject)("detailStore","rootStore")(l=(0,T.observer)((c=function(e){(0,y.default)(r,e);var a=N(r);function r(){var e;(0,m.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).store=new k.default,(0,p.default)(e,"gatewayList",i,(0,v.default)(e)),(0,p.default)(e,"isLoading",s,(0,v.default)(e)),e.getProjectGateway=function(){var t=D({},e.props.match.params);return e.store.getGatewayByProject(D(D({},t),{},{cluster:e.cluster,workspace:e.workspace,includeUpper:!0}))},e.getInitGateway=(0,d.default)(u.default.mark((function t(){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getProjectGateway();case 3:a=t.sent,e.gatewayList=a,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.renderClusterGatewayTitle=function(){return b.default.createElement("div",{className:"title"},t("CLUSTER_GATEWAY"))},e.renderProjectTitle=function(){return b.default.createElement("div",{className:"title"},t("PROJECT_GATEWAY"))},e.renderWorkspaceTitle=function(){return b.default.createElement("div",{className:P.default.title},t("WORKSPACE_GATEWAY"))},e.renderGatewayCardTitle=function(t){return"workspace"===t?e.renderWorkspaceTitle():"project"===t?e.renderProjectTitle():e.renderClusterGatewayTitle()},e.renderOperations=function(a){var r=a.url,n=a.disabled;return b.default.createElement(S.Button,{disabled:n,onClick:function(){e.props.rootStore.routing.push(r)}},t("VIEW_DETAILS"))},e.renderGatewayCard=function(){return e.gatewayList.every((function(e){return(0,R.default)((0,C.toJS)(e))}))?e.renderEmpty():e.gatewayList.map((function(t,a,r){var n=t.gatewayType;return b.default.createElement(O.default,(0,o.default)({key:a,type:n,detail:t,actions:e.enableActions,manageDisable:"project"!==n},e.props,{store:e.store,getData:e.getInitGateway,title:e.renderGatewayCardTitle(n),prefix:"cluster"===n?null:e.prefix,gatewayList:(0,C.toJS)(r)}))}))},e}return(0,h.default)(r,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderEmpty",value:function(){return b.default.createElement(A.default,{className:"margin-t12 margin-b12"},b.default.createElement("div",{className:P.default.empty},b.default.createElement("div",{className:P.default.icon},b.default.createElement(S.Icon,{name:"loadbalancer",size:40})),b.default.createElement("div",{className:P.default.text},b.default.createElement("div",null,t("GATEWAY_NOT_ENABLED")),b.default.createElement("p",null,t("ENT_ENABLE_GATEWAY_TIP")))))}},{key:"render",value:function(){return b.default.createElement("div",null,b.default.createElement(S.Loading,{spinning:this.isLoading},b.default.createElement("div",null,this.renderGatewayCard())))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"prefix",get:function(){var e=this.props.detailStore.detail.workspace;return"/".concat(e,"/clusters/").concat(this.cluster,"/projects/").concat(this.namespace,"/gateways")}},{key:"enableActions",get:function(){return globals.app.getActions(D(D({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}}]),r}(b.default.Component),i=(0,E.default)(c.prototype,"gatewayList",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,E.default)(c.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=c))||l)||l;a.default=I},3549:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(41),r(67),r(68),r(20),r(195),r(14),r(99),r(4),r(16),r(29),r(10),r(74),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(41),r(67),r(68),r(20),r(27),r(195),r(30),r(14),r(99),r(4),r(16),r(40),r(29),r(10),r(74),r(66);var o,u,l,c=n(r(58)),i=n(r(97)),s=n(r(32)),d=n(r(25)),f=n(r(28)),p=n(r(38)),m=n(r(39)),h=n(r(35)),v=n(r(0)),y=r(18),g=r(245),_=r(3550),E=r(192),b=n(r(802)),O=r(56),S=n(r(5)),k=n(r(69)),C=n(r(64)),T=n(r(26)),R=r(805),A=r(61),P=n(r(164)),w=n(r(3551)),D=n(r(3553));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var I=(0,g.inject)("rootStore")(o=(0,g.observer)(o=(0,R.trigger)((l=u=function(e){(0,p.default)(r,e);var a=N(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleMoreMenuClick=function(t,a){var r=e.props.match.params,n=r.namespace,o=r.workspace,u=e.props,l=u.type;u.isFederated&&localStorage.setItem("federated-cluster",e.cluster);var c="cluster"===l?"kubesphere-system":n;switch(a){case"view":e.props.rootStore.routing.push({pathname:e.linkUrl,state:{isCluster:"cluster"===l}});break;case"edit":e.trigger("gateways.edit",{cluster:e.cluster,namespace:c,workspace:o,name:e.gateway.name,type:l,detail:(0,y.toJS)(e.gateway._originData),store:e.store,success:e.props.getData});break;case"update":e.trigger("gateways.update",{cluster:e.cluster,namespace:c,workspace:o,detail:(0,y.toJS)(e.gateway._originData),store:e.store,success:e.props.getData,type:l,updateToLatest:!!e.gateway.createTime});break;case"delete":e.trigger("gateways.delete",{cluster:e.cluster,type:"cluster"===e.props.type?"CLUSTER_GATEWAY":"workspace"===e.props.type?"WORKSPACE_GATEWAY":"PROJECT_GATEWAY",namespace:c,name:e.gateway.name,workspace:o,detail:(0,y.toJS)(e.gateway),store:e.store,success:e.props.getData})}},e.title=function(){return v.default.createElement(v.default.Fragment,null,v.default.createElement("span",null,"project"===e.props.type?t("PROJECT_GATEWAY"):"workspace"===e.props.type?t("WORKSPACE_GATEWAY"):t("CLUSTER_GATEWAY")),e.needUpdate?v.default.createElement(E.Tooltip,{content:t("UPDATE_GATEWAY_DESC"),placement:"top"},v.default.createElement(E.Icon,{name:"update",color:{primary:"#f5a623 ",secondary:"#ffe1be"}})):null)},e.handleCreateGateway=function(){var a=e.props.match.params,r=a.namespace,n=a.workspace,o=e.props,u=o.type,l=o.getData;if(globals.app.hasKSModule("gateway")&&e.isClusterInstallGatway){var c="";switch(u){case"cluster":c="kubesphere-router-cluster";break;case"workspace":c="kubesphere-router-workspace-".concat(n);break;case"project":c="kubesphere-router-namespace-".concat(r)}e.trigger("gateways.create",{name:c,namespace:"cluster"===u?"kubesphere-system":r,workspace:n,cluster:e.cluster,store:e.store,success:l})}else P.default.warning({content:t("PLEASE_INSTALL_GATEWAY")})},e.renderInternetAccess=function(){var a=e.props,r=a.isFederated,n=a.title;return v.default.createElement(v.default.Fragment,null,n,v.default.createElement(b.default,{className:(0,S.default)("margin-t12",(0,s.default)({},D.default.federatedContainer,r))},e.gatewayConfig.map((function(e,a){return v.default.createElement("div",{className:D.default.container,key:a},e.map((function(e){return e.icon?v.default.createElement("div",{className:D.default.header,key:e.key},"string"==typeof e.icon?v.default.createElement(E.Icon,{name:e.icon,size:40}):v.default.createElement("span",{className:D.default.customIcon},e.icon),v.default.createElement("div",{className:D.default.item},v.default.createElement("div",null,e.title),v.default.createElement("p",null,e.desc))):e.component?v.default.createElement("div",{className:(0,S.default)(D.default.item,"text-right"),key:e.key},e.component):v.default.createElement("div",{className:D.default.item,key:e.key},v.default.createElement("div",null,e.title),v.default.createElement("p",null,t(e.desc)))})))})),"NodePort"!==e.gateway.type&&v.default.createElement("div",{className:(0,S.default)(D.default.annotations,(0,s.default)({},D.default.bgWhite,r))},v.default.createElement("p",null,t("ANNOTATION_PL")),v.default.createElement("ul",null,(0,k.default)(e.gateway.annotations)?v.default.createElement("li",null,t("NO_DATA")):Object.entries(e.gateway.annotations).map((function(e){var t=(0,i.default)(e,2),a=t[0],r=t[1];return v.default.createElement("li",{key:a},v.default.createElement("span",{className:D.default.key},a),v.default.createElement("span",null,r))}))))))},e}return(0,f.default)(r,[{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name,":").concat(e.nodePort)})).join("; "):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,k.default)(e.loadBalancerIngress)?(0,k.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t}},{key:"renderMoreMenu",value:function(){return v.default.createElement(E.Menu,{onClick:this.handleMoreMenuClick},this.itemActions.map((function(e){return v.default.createElement(E.Menu.MenuItem,{key:e.key,disabled:e.disabled},v.default.createElement(E.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props.match.params,t=e.component,a=e.namespace,r=e.workspace,n=this.props,o=n.type,u=n.title,l=n.gatewayList,c=n.inCluster,i=(0,C.default)(l)&&l[0],s=(0,C.default)(l)&&l[1];return v.default.createElement("div",null,this.isEmptyData?a&&"cluster"===o||a&&"workspace"===o||r&&"cluster"===o||i&&r&&"workspace"===o||s&&a&&"project"===o||i&&a&&"project"===o?null:v.default.createElement(v.default.Fragment,null,u,v.default.createElement(w.default,{component:t,type:o,handleCreateGateway:this.handleCreateGateway,cluster:this.cluster,canEdit:this.canEdit,inCluster:c})):this.renderInternetAccess())}},{key:"gateway",get:function(){return this.props.detail}},{key:"store",get:function(){return this.props.store}},{key:"isEmptyData",get:function(){return(0,k.default)((0,y.toJS)(this.gateway))}},{key:"canEdit",get:function(){return this.props.actions&&!this.props.actions.includes("manage")}},{key:"hasGatewayTypeLabel",get:function(){return!!(0,T.default)(this.gateway,["_originData","metadata","labels","kubesphere.io/gateway-type"],!1)}},{key:"hasWorkspaceLabel",get:function(){return!!(0,T.default)(this.gateway,["_originData","metadata","labels","kubesphere.io/workspace"],!1)}},{key:"needUpdate",get:function(){var e=this.props.type;return!this.gateway.createTime||"cluster"===e&&!this.hasGatewayTypeLabel||"project"===e&&(!this.hasGatewayTypeLabel||!this.hasWorkspaceLabel)}},{key:"cluster",get:function(){var e=this.props.match.params.cluster;return this.props.isFederated?this.props.cluster.name:e}},{key:"itemActions",get:function(){var e=this.canEdit||!this.needUpdate,a=[{key:"view",icon:"eye",text:t("VIEW_DETAILS")},{key:"edit",icon:"pen",text:t("EDIT"),disabled:this.canEdit||this.needUpdate},{key:"delete",icon:"trash",text:t("DISABLE"),disabled:this.canEdit}],r={key:"update",icon:"update",text:t("UPDATE"),disabled:e};return!e&&a.splice(2,0,r),a}},{key:"linkUrl",get:function(){var e=this.props.prefix;return e?"".concat(e,"/").concat(this.gateway.name,"/gateway-configs"):"/clusters/".concat(this.cluster,"/gateways/cluster/").concat(this.gateway.name,"/gateway-configs")}},{key:"gatewayConfig",get:function(){var e=this.gateway,a=e.creator,r=e.createTime,n=e.replicas,o=e.type,u=e.ports,l=e.loadBalancerIngress,i=e.serviceMeshEnable,s=e.lb,d=this.props,f=d.renderOperations,p=d.manageDisable,m=(0,k.default)(u)?"-":u.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat("NodePort"===o?e.nodePort:e.port)})).join("/"),h=(0,k.default)(l)?"-":l.join(";"),y=[].concat((0,c.default)(A.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes"}]),g=s&&y.find((function(e){return e.value===s})).icon,b=globals.app.hasPermission({module:"clusters",action:"view"})&&"cluster"===this.props.type;return[[{key:"clusterType",icon:"loadbalancer",title:this.title(),desc:t("TYPE")},{key:"author",title:a||"-",desc:t("CREATOR")},{key:"createTime",title:r?(0,O.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss"):"-",desc:t("CREATION_TIME")},{key:"edit",component:f?f({url:this.linkUrl,disabled:!b||(0,k.default)(r)}):p?null:v.default.createElement(E.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},v.default.createElement(E.Button,null,t("MANAGE")))}],[{key:"method",icon:"eip-group",title:o,desc:t("ACCESS_MODE_SCAP")},s?{key:"lb",icon:g,title:s,desc:t("LOAD_BALANCER_PROVIDER_SCAP")}:{key:"ip",icon:"ip",title:h,desc:t("GATEWAY_ADDRESS_SCAP")},{key:"earth",icon:"earth",title:m,desc:t("NODE_PORTS_SCAP")},{key:"pod",icon:"pod",title:n,desc:1===n?t("REPLICA"):t("REPLICA_PL")},{key:"appGover",icon:v.default.createElement(_.ReactComponent,null),title:i?t("ON"):t("OFF"),desc:t("TRACING")}]]}},{key:"isClusterInstallGatway",get:function(){var e=this.props.match.params.cluster;return(0,T.default)(globals,"ksConfig.enabledExtensionModulesStatus.gateway.clusterSchedulingStatuses.".concat(e),!1)}}]),r}(v.default.Component),u.defaultProps={type:"cluster"},o=l))||o)||o)||o;a.default=I},3550:function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return c}));var r=a(318),n=a.n(r),o=a(0),u=a.n(o),l=u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.4 25L8.733 23.75V0L20.4 25zm-20 0l6.667-1.25V10L.4 25zm0 1.667h20L7.9 30 .4 26.667z",fill:"#36435C"}),c=function(e){return u.a.createElement("svg",n()({viewBox:"0 0 21 30",fill:"none",width:"1em",height:"1em"},e),l)};t.default="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjEgMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNCAyNUw4LjczMzM2IDIzLjc1VjBMMjAuNCAyNVpNMC40MDAwMjQgMjVMNy4wNjY2OSAyMy43NVYxMEwwLjQwMDAyNCAyNVpNMC40MDAwMjQgMjYuNjY2N0gyMC40TDcuOTAwMDIgMzBMMC40MDAwMjQgMjYuNjY2N1oiIGZpbGw9IiMzNjQzNUMiLz4KPC9zdmc+Cg=="},3551:function(e,a,r){"use strict";r(17);var n=r(19);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(0)),u=r(192),l=n(r(479)),c=n(r(26)),i=n(r(802)),s=r(56),d=n(r(3552)),f=function(e){var a=e.component,r=e.type,n=e.handleCreateGateway,f=e.cluster,p=e.canEdit,m=e.inCluster,h=a||r,v=globals.app.isMultiCluster?(0,c.default)(globals,"clusterConfig.".concat(f,".ksVersion")):(0,c.default)(globals,"ksConfig.ksVersion"),y="workspace"===r&&(0,s.compareVersion)(v,"v3.4.0")<0;return o.default.createElement(i.default,{className:"margin-t12 margin-b12"},o.default.createElement("div",{className:d.default.empty},o.default.createElement("div",{className:d.default.icon},o.default.createElement(u.Icon,{name:"loadbalancer",size:48})),o.default.createElement("div",{className:d.default.text},o.default.createElement("div",null,t("".concat((0,l.default)(h).toUpperCase(),"_GATEWAY_NOT_ENABLED"))),y?o.default.createElement("p",null,t("CLUSTER_UPGRADE_REQUIRED",{version:"3.4"})):m?o.default.createElement("p",null,t("ENT_".concat(h.toUpperCase(),"_ENABLE_GATEWAY_DESC"))):null),("cluster"===a||r)&&!p&&o.default.createElement(u.Button,{type:"control",onClick:n,disabled:y},t("ENABLE_GATEWAY"))))};a.default=f},3552:function(e,t,a){e.exports={empty:"_3HZVm8i6IadwtxGrnqMR7_",icon:"_3dvfboot-4SALZ8vO56p0x",text:"j_JN-6JOnqtEGFgydFH_n"}},3553:function(e,t,a){e.exports={container:"_1AlzVbABmp4ycHK1g3cNFC",item:"fuZrziso64X_zghKUPExW",header:"ac3mq3s0q-DhY3pP_adTF",customIcon:"_2GiBTBxd59F0dPeU4ph9TM",annotations:"_1gd_UYaGne3VIj0ATRJXFu",bgWhite:"zc0N-dc0ltthVJfwxG9iv",federatedContainer:"kA_HUVOWcFM1p5KHYjL3P"}},3554:function(e,t,a){e.exports={empty:"_1pASR0wnOOZ188jGyMPDDu",icon:"_36P6BNJUIu_o_9LugrstnV",text:"_2hrgMPH6R-G9psZHUOvDko"}},3555:function(e,t,a){"use strict";a(17);var r=a(19);a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(4),a(16),a(40),a(10);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(18),f=a(245),p=r(a(1577)),m=r(a(1578));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=(0,f.inject)("quotaStore","limitRangeStore")(n=(0,f.observer)(n=function(e){(0,l.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=(0,d.toJS)(this.props.limitRangeStore.list.data)[0],t=(0,d.toJS)(this.props.quotaStore.data);return s.default.createElement(s.default.Fragment,null,s.default.createElement(p.default,{detail:e}),s.default.createElement(m.default,{detail:t}))}}]),a}(s.default.Component))||n)||n;t.default=v},3562:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(41),r(6),r(37),r(14),r(8),r(13),r(9),r(4),r(21),r(16),r(29),r(10),r(46),r(66),r(7),r(44),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(41),r(6),r(37),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(21),r(16),r(40),r(29),r(10),r(46),r(66),r(7),r(44);var o=n(r(318)),u=n(r(42)),l=n(r(97)),c=n(r(32));r(36);var i,s,d=n(r(43)),f=n(r(62)),p=n(r(25)),m=n(r(28)),h=n(r(75)),v=n(r(38)),y=n(r(39)),g=n(r(35)),_=n(r(45)),E=(n(r(63)),n(r(0))),b=n(r(26)),O=n(r(69)),S=r(245),k=r(192),C=r(56),T=r(805),R=r(18),A=n(r(453)),P=n(r(505)),w=n(r(3563)),D=n(r(1211)),N=n(r(439)),I=n(r(943)),L=n(r(3564)),M=r(1536);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var V=(i=function(e){(0,v.default)(r,e);var a=U(r);function r(){var e;(0,p.default)(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=a.call.apply(a,[this].concat(o))).store=new A.default,e.accessorStore=new P.default,e.validateWebhookCFStore=new w.default,e.CrdStore=new D.default,e.state={shouldAddCrd:!1},(0,f.default)(e,"ksVersion",s,(0,h.default)(e)),e.fetchData=(0,d.default)(u.default.mark((function t(){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,t.next=3,e.accessorStore.getKsVersion(a);case 3:return e.ksVersion=t.sent,t.next=6,e.store.fetchDetail(a);case 6:(0,C.compareVersion)("".concat(e.ksVersion),"v3.3")<0?Promise.all([e.validateWebhookCFStore.fetchDetailWithoutWarning(x(x({},a),{},{name:"storageclass-accessor.storage.kubesphere.io"})),e.CrdStore.fetchDetailWithoutWarning(x(x({},a),{},{name:"accessors.storage.kubesphere.io"}))]).then((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1],o=r.urlNotSupport,u=n.urlNotSupport;o||u?e.setState({shouldAddCrd:!0}):(0,O.default)(r)||(0,O.default)(n)||e.checkHasAccessor()})):e.checkHasAccessor();case 7:case"end":return t.stop()}}),t)}))),e.checkAccessorExist=(0,d.default)(u.default.mark((function t(){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.match.params,!((0,C.compareVersion)("".concat(e.ksVersion),"v3.3")<0)){t.next=5;break}Promise.all([e.validateWebhookCFStore.fetchDetailWithoutWarning(x(x({},a),{},{name:"storageclass-accessor.storage.kubesphere.io"})),e.CrdStore.fetchDetailWithoutWarning(x(x({},a),{},{name:"accessors.storage.kubesphere.io"}))]).then(function(){var t=(0,d.default)(u.default.mark((function t(a){var r,n,o,c,i;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,l.default)(a,2),n=r[0],o=r[1],c=n.urlNotSupport,i=o.urlNotSupport,!c&&!i){t.next=7;break}e.setState({shouldAddCrd:!0}),t.next=10;break;case 7:if((0,O.default)(n)||(0,O.default)(o)){t.next=10;break}return t.next=10,e.checkHasAccessor();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7;break;case 5:return t.next=7,e.checkHasAccessor();case 7:case"end":return t.stop()}}),t)}))),e.checkHasAccessor=(0,d.default)(u.default.mark((function t(){var a,r,n,o;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(globals.app.hasKSModule("storage-utils")){t.next=2;break}return t.abrupt("return");case 2:return a=e.props.match.params,r=(0,b.default)(e.store.detail,"name"),t.next=6,e.accessorStore.fetchDetailWithoutWarning(x(x({},a),{},{name:"".concat(r,"-accessor")}));case 6:if(!(n=t.sent).urlNotSupport){t.next=11;break}e.setState({shouldAddCrd:!0}),t.next=17;break;case 11:if(!(0,O.default)(n)){t.next=17;break}return o=N.default.accessors(r),t.next=15,e.accessorStore.create(o,x({},a));case 15:return t.next=17,e.accessorStore.fetchDetail({cluster:a.cluster,name:"".concat(a.name,"-accessor")});case 17:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var a,r=e.props.match.params.cluster,n=(0,C.compareVersion)("".concat(e.ksVersion),"v3.3")>=0;return[{key:"editYaml",type:"default",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:(0,R.toJS)(e.store.detail),readOnly:!1,success:e.fetchData})}},{key:"setDefault",icon:"pen",text:t("SET_AS_DEFAULT_STORAGE_CLASS"),action:"edit",onClick:function(){return e.trigger("storageclass.set.default",{detail:(0,R.toJS)(e.store.detail),cluster:r,defaultStorageClass:e.defaultStorageClass.name,success:e.fetchData})}},{key:"accessor",icon:function(){return E.default.createElement(E.default.Fragment,null,E.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/storageclass-tree.svg",style:{width:"16px",marginRight:"12px"}}))},text:t("SET_AUTHORIZATION_RULES"),action:"edit",show:n&&globals.app.hasKSModule("storage-utils"),onClick:(a=(0,d.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkAccessorExist();case 2:e.trigger("storageclass.accessor",{storageClassName:(0,b.default)(e.store.detail,"name"),shouldAddCrd:e.state.shouldAddCrd,store:e.accessorStore,detail:(0,R.toJS)(e.accessorStore.detail),cluster:r,success:e.fetchData});case 3:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"funcManage",icon:"slider",text:t("SET_VOLUME_OPERATIONS"),action:"edit",onClick:function(){return e.trigger("storageclass.volume.function.update",{detail:(0,R.toJS)(e.store.detail),StorageClassStore:e.store,success:e.fetchData})}},{key:"autoResizer",icon:function(){return E.default.createElement(E.default.Fragment,null,E.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/storageclass_autoresizer.svg",style:{width:"16px",marginRight:"12px"}}))},text:t("SET_AUTO_EXPANSION"),action:"edit",disabled:!n||!(0,b.default)((0,R.toJS)(e.store.detail),"allowVolumeExpansion",!1),show:globals.app.hasKSModule("storage-utils"),onClick:function(){return e.trigger("storageclass.pvc.autoresizer",{detail:(0,R.toJS)(e.store.detail),StorageClassStore:e.store,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("storageclass.delete",{type:e.name,detail:(0,R.toJS)(e.store.detail),accessorStore:e.accessorStore,cluster:r,success:e.returnTolist})}}]},e.getAttrs=function(){var a,r,n=e.store.detail,o=void 0===n?{}:n;return(0,O.default)(o)?null:[{name:t("storageclasses"),value:t(null!==(a=null===(r=M.storageClasses.find((function(e){return e.value===o.storagetype})))||void 0===r?void 0:r.label)&&void 0!==a?a:M.storageClasses[3].label)},{name:t("PROVISIONER"),value:o.provisioner},{name:t("DEFAULT_STORAGE_CLASS"),value:o.default?t("YES"):"-"},{name:t("ALLOW_VOLUME_EXPANSION"),value:o.allowVolumeExpansion?t("TRUE"):t("FALSE")},{name:t("RECLAIM_POLICY"),value:o.reclaimPolicy},{name:t("ALLOW_VOLUME_SNAPSHOT"),value:o.supportSnapshot?t("TRUE"):t("FALSE")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params.cluster;this.store.fetchList({limit:-1,cluster:e}),this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return E.default.createElement(k.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,C.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STORAGE_CLASS_PL"),url:this.listUrl}]};return E.default.createElement(I.default,(0,o.default)({stores:e,routes:L.default},a))}},{key:"defaultStorageClass",get:function(){return(0,R.toJS)(this.store.list).data.find((function(e){return e.default}))||{}}},{key:"name",get:function(){return"STORAGE_CLASS"}},{key:"module",get:function(){return"storageclasses"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/storageclasses")}}]),r}(E.default.Component),s=(0,_.default)(i.prototype,"ksVersion",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i),Y=(0,S.inject)("rootStore")((0,S.observer)((0,T.trigger)(V)));a.default=Y;var G=V;a.Component=G},3563:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(10);var n=r(a(25)),o=r(a(38)),u=r(a(39)),l=r(a(35));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var i=function(e){(0,o.default)(a,e);var t=c(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).module="validatingwebhookconfigurations",e}return a}(r(a(49)).default);t.default=i},3564:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(3565)),u="/clusters/:cluster/storageclasses/:name",l=[{name:"volumes",path:"".concat(u,"/volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:o.default},(0,n.getIndexRoute)({path:u,to:"".concat(u,"/volumes"),exact:!0}),(0,n.getIndexRoute)({path:"*",to:"/404",exact:!0})];t.default=l},3565:function(e,a,r){"use strict";var n=r(19);r(12),r(11),r(6),r(20),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(11),r(6),r(20),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(7);var o,u=n(r(32)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(245),m=r(56),h=n(r(451)),v=n(r(26)),y=r(192),g=n(r(802)),_=n(r(803)),E=n(r(824)),b=n(r(808)),O=n(r(914)),S=n(r(1209)),k=n(r(5)),C=n(r(3566));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var P=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=A(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.store.detail,a=t.cluster,r=t.name;e.keyword&&(e.name=e.keyword,delete e.keyword),n.volumeStore.fetchList(R({storageClassName:r,cluster:a},e))},n.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return f.default.createElement(_.default,{icon:"storage",title:(0,m.getDisplayName)(t),noLink:!0})}},{title:t("STATUS"),dataIndex:"phase",width:"13%",render:function(e){return f.default.createElement(b.default,{type:e,name:t("VOLUME_STATUS_".concat(e.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",width:"13%",render:function(e){return e||"-"}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",width:"13%",render:function(e,t){return f.default.createElement(S.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("PROJECT"),dataIndex:"namespace",key:"namespace",width:"13%",customizable:!0,render:function(e){return(0,m.showNameAndAlias)(e,"project")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"21%",render:function(e){return(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.renderResizeItem=function(e){var t=e.src,a=e.title,r=e.des,n=e.iconName,o=e.key;return f.default.createElement("div",{key:o,className:(0,k.default)(C.default.item,C.default.item_bg)},n?f.default.createElement(y.Icon,{name:n,size:40}):f.default.createElement("img",{src:t,className:C.default.icon}),f.default.createElement("div",null,f.default.createElement("span",{className:C.default.title},a),f.default.createElement("span",{className:C.default.des},r)))},n.renderResize=function(){var e=n.props.detailStore.detail.annotations,a=JSON.parse((0,v.default)(e,"resize.kubesphere.io/enabled","false")),r=JSON.parse((0,v.default)(e,"restart.kubesphere.io/enabled","false")),o=(0,v.default)(e,"resize.kubesphere.io/storage-limit","10000Gi"),u=(0,v.default)(e,"resize.kubesphere.io/threshold","10%"),l=(0,v.default)(e,"resize.kubesphere.io/increase","10%"),c=(0,v.default)(e,"restart.kubesphere.io/max-time","300"),i={title:t("VALUE_TIMEOUT",{value:c}),iconName:"history-duotone",des:t("RESTART_WORKLOAD_AUTOMATICALLY")},s=[{iconName:"storage",title:o,des:t("MAXIMUM_SIZE_SCAP")},{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/chart.svg",title:u,des:t("THRESHOLD")},{iconName:"stretch",title:l,des:t("INCREMENT")}];return r&&s.push(i),a&&globals.app.hasKSModule("storage-utils")&&f.default.createElement(g.default,null,f.default.createElement("div",{className:(0,k.default)(C.default.item,C.default.top)},f.default.createElement("img",{src:"/extensions-static/ks-console-embed/dist/v3dist/assets/storageclass_autoresizer.svg",className:C.default.icon}),f.default.createElement("div",null,f.default.createElement("span",{className:C.default.title},t("AUTO_EXPANSION")),f.default.createElement("span",{className:C.default.des},t("AUTO_EXPANSION_DESC")))),f.default.createElement("div",{className:C.default.bottom},s.map((function(e,t){return n.renderResizeItem(R(R({},e),{},{key:t}))}))))},n.volumeStore=e.volumeStore||new h.default,n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this.volumeStore.list,a=e.data,r=e.filters,n=e.isLoading,o={total:e.total,page:e.page,limit:e.limit};return f.default.createElement(f.default.Fragment,null,this.renderResize(),f.default.createElement(E.default,{title:t("PERSISTENT_VOLUME_CLAIM_PL"),loading:n,empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("PERSISTENT_VOLUME_CLAIM")})},f.default.createElement(O.default,{className:C.default.table,data:a,columns:this.getColumns(),searchType:"name",keyword:r.name,filters:r,placeholder:t("SEARCH_BY_NAME"),pagination:o,isLoading:n,onFetch:this.handleFetch})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"storageClassName",get:function(){return this.store.detail.name}}]),r}(f.default.Component))||o)||o;a.default=P},3566:function(e,t,a){e.exports={table:"_2kjHtHOfFmm6itggAkoQAL",top:"_5cglYSZWbQvrCmvoMyqxP",item:"_21kLc98uyqQuBRc4Q-dyhM",icon:"_1vTN6gl6PThH5CifVSvUo6",title:"_1QIhBOEC_Y-VZV4BPZvjdr",des:"_3NV29u5T-Tku0Cp7CeL7d",bottom:"z1wHL-lLdkBj_ZwzB6voh",item_bg:"_2TzaGW5k734_6hWUzqgCSv"}},3567:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(245),m=r(192),h=r(56),v=r(440),y=n(r(1537)),g=n(r(808)),_=n(r(943)),E=n(r(3568));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new y.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[]},e.getAttrs=function(){var a=e.store.detail,r=(0,v.getComponentStatus)(a);return[{name:t("STATUS"),value:f.default.createElement(g.default,{type:r,name:t(r)})},{name:t("CLUSTER"),value:(0,h.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("PROJECT"),value:(0,h.showNameAndAlias)(a.namespace,"project")},{name:t("REPLICA_COUNT"),value:"".concat(a.healthyBackends,"/").concat(a.totalBackends)},{name:t("CREATION_TIME_TCAP"),value:(0,h.getLocalTime)(a.startedAt).format("YYYY-MM-DD HH:mm:ss")}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(m.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,h.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SYSTEM_COMPONENT_PL"),url:this.listUrl}]};return f.default.createElement(_.default,(0,u.default)({stores:e,routes:E.default},a))}},{key:"name",get:function(){return"SYSTEM_COMPONENT"}},{key:"module",get:function(){return"components"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/components")}}]),r}(f.default.Component))||o)||o;a.default=O},3568:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(3569)),u="/clusters/:cluster/components/:namespace/:name",l=[{path:"".concat(u,"/service-details"),title:"POD_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:u,to:"".concat(u,"/service-details"),exact:!0})];t.default=l},3569:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(245),f=r(a(921)),p=r(a(327));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,l.default)(a,e);var t=m(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).serviceStore=new p.default,e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.serviceStore.fetchDetail(this.props.match.params)}},{key:"render",value:function(){var e=this.props.match.params.cluster;return this.serviceStore.isLoading?null:s.default.createElement(f.default,{detail:this.serviceStore.detail,prefix:"/clusters/".concat(e)})}},{key:"module",get:function(){return this.props.module}},{key:"store",get:function(){return this.props.detailStore}}]),a}(s.default.Component))||n)||n;t.default=h},3570:function(e,a,r){"use strict";r(17);var n=r(19);r(3),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(31),r(3),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(18),m=r(245),h=n(r(69)),v=r(192),y=r(56),g=r(805),_=n(r(1211)),E=n(r(943)),b=n(r(3571));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,g.trigger)(o=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new _.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,h.default)(a))return[{name:t("CLUSTER"),value:(0,y.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("SCOPE_TCAP"),value:a.scope},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator||"-"}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:this.store.detail.kind,desc:this.store.detail.name,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return f.default.createElement(E.default,(0,u.default)({stores:e,routes:b.default},a))}},{key:"module",get:function(){return"customresourcedefinitions"}},{key:"name",get:function(){return"CRD"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/customresources")}}]),r}(f.default.Component))||o)||o)||o;a.default=S},3571:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(3572)),u="/clusters/:cluster/customresources/:name",l=[{path:"".concat(u,"/resources"),title:"RESOURCE_STATUS",component:o.default,exact:!0},(0,n.getIndexRoute)({path:u,to:"".concat(u,"/resources"),exact:!0})];t.default=l},3572:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(6),r(67),r(14),r(8),r(13),r(9),r(4),r(16),r(29),r(10),r(74),r(66),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(6),r(67),r(27),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(29),r(10),r(74),r(66),r(7);var o,u=n(r(58)),l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(0)),m=r(18),h=r(245),v=n(r(803)),y=n(r(811)),g=r(56),_=r(805),E=n(r(1444)),b=n(r(3573));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,h.inject)("rootStore","detailStore")(o=(0,h.observer)(o=(0,_.trigger)(o=function(e){(0,s.default)(r,e);var a=k(r);function r(e){var t;(0,c.default)(this,r),(t=a.call(this,e)).getData=function(e){t.store.fetchList(S(S({},e),{},{cluster:t.props.match.params.cluster}))};var n=t.props.detailStore.detail,o=n.group,u=n.latestVersion,l=n.kind,i=n.module;return t.store=new E.default({kind:l,module:i,apiVersion:"apis/".concat(o,"/").concat(u)}),t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.store.list,a=e.data,r=e.name,n=e.page,o=e.total,u=e.limit,l=e.isLoading,c={page:n,total:o,limit:u},i={name:r};return p.default.createElement("div",null,p.default.createElement("div",{className:b.default.title},t("CUSTOM_RESOURCE_PL")),p.default.createElement(y.default,{data:(0,m.toJS)(a),columns:this.columns,isLoading:l,onFetch:this.getData,itemActions:this.itemActions,enabledActions:this.enabledActions,pagination:c,filters:i,showEmpty:!1,searchType:"name",hideCustom:!0}))}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"customresourcedefinitions",cluster:this.props.match.params.cluster})}},{key:"itemActions",get:function(){var e=this;return[this.enabledActions.includes("edit")?{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,success:e.getData})}}:{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("resource.delete",{type:"CUSTOM_RESOURCE",detail:t,success:e.getData})}}]}},{key:"columns",get:function(){var e=this.props.detailStore.detail.scope;return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return p.default.createElement(v.default,{title:(0,g.getDisplayName)(t),desc:t.description,noLink:!0})}}].concat((0,u.default)("Namespaced"===e?[{title:t("PROJECT_DEVOPS_PROJECT"),dataIndex:"namespace",render:function(e){return(0,g.showNameAndAlias)(e,"project")}}]:[]),[{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}])}}]),r}(p.default.Component))||o)||o)||o;a.default=C},3573:function(e,t,a){e.exports={title:"_2jttfh7kRfWWvaOvcR-zmM"}},3574:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(67),r(14),r(4),r(16),r(29),r(10),r(74),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(67),r(27),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(74),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=n(r(0)),p=r(18),m=r(245),h=n(r(26)),v=n(r(69)),y=r(192),g=r(56),_=r(805),E=n(r(324)),b=n(r(943)),O=n(r(3575));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=new E.default("clusterroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),roleModules:(0,p.toJS)(e.store.roleCategory),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),cluster:e.props.match.params.cluster,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,v.default)(a))return[{name:t("CREATION_TIME_TCAP"),value:(0,g.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates("cluster"),this.store.fetchTemplatesCategory("cluster")}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,h.default)(this.store.detail,"name"),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_ROLE_PL"),url:this.listUrl}]};return f.default.createElement(b.default,(0,u.default)({stores:e,routes:O.default},a))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"clusterroles"}},{key:"name",get:function(){return"CLUSTER_ROLE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/roles")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetClusterRoles.includes(e)}}]),r}(f.default.Component))||o)||o)||o;a.default=k},3575:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(319),o=r(a(1076)),u=r(a(1077)),l="/clusters/:cluster/roles/:name",c=[{path:"".concat(l,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(l,"/users"),title:"AUTHORIZED_USER_PL",component:u.default,exact:!0},(0,n.getIndexRoute)({path:l,to:"".concat(l,"/authorizations"),exact:!0})];t.default=c},3579:function(e,a,r){"use strict";r(17);var n=r(19);r(12),r(137),r(3),r(11),r(14),r(4),r(16),r(29),r(10),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(27),r(30),r(14),r(4),r(16),r(40),r(29),r(10),r(66);var o,u=n(r(318)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35)),f=r(192),p=n(r(164)),m=n(r(943)),h=n(r(808)),v=n(r(26)),y=n(r(69)),g=r(18),_=r(245),E=r(496),b=n(r(0)),O=n(r(1443)),S=r(56),k=r(805),C=r(440),T=n(r(3580));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var A=(0,_.inject)("rootStore")(o=(0,_.observer)(o=(0,k.trigger)(o=function(e){(0,i.default)(r,e);var a=R(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).fetchData=function(){n.store.fetchDetail(n.props.match.params)},n.handleNatOutgoing=function(){var e=(0,g.toJS)(n.store.detail),a=(0,v.default)(e,"natOutgoing",!1);n.store.patch(e,{spec:{natOutgoing:!a}}).then((function(){a?p.default.success({content:"".concat(t("CLOSED_SUCCESSFUL"))}):p.default.success({content:"".concat(t("OPENED_SUCCESSFUL"))}),n.fetchData()}))},n.getOperations=function(){var e=n.name,a=n.props.match.params.cluster,r=(0,g.toJS)(n.store.detail);return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",type:"control",onClick:function(){return n.trigger("resource.baseinfo.edit",{type:e,detail:r,success:n.fetchData})}},{key:"editOverlay",icon:"pen",show:function(){return!n.isOutdated},text:t("EDIT_OVERLAY"),action:"edit",onClick:function(){n.trigger("network.ipool.editoverlay",{detail:r,cluster:a,success:n.fetchData})}},{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(){return n.trigger("resource.yaml.edit",{detail:r,readOnly:!0})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return n.trigger("resource.yaml.edit",{detail:r})}},{key:"modify",icon:"enterprise",text:t("ASSIGN_WORKSPACE"),action:"edit",show:function(){return!n.isCalico},onClick:function(){return n.trigger("network.ipool.assignworkspace",{detail:r,success:n.fetchData})}},{key:"OnOutgoing",icon:"start",text:t("CLOSE_NAT_OUTGOING"),action:"edit",show:function(e){return!n.isOutdated&&e.natOutgoing},onClick:n.handleNatOutgoing},{key:"OffOutgoing",icon:"stop",text:t("OPEN_NAT_OUTGOING"),action:"edit",show:function(e){return!n.isOutdated&&!e.natOutgoing},onClick:n.handleNatOutgoing},{key:"enable",icon:"start",text:t("ENABLE"),action:"edit",show:function(e){return e.disabled&&!n.isOutdated},onClick:function(){n.store.patch(r,{spec:{disabled:!1}}).then((function(){n.fetchData(),p.default.success({content:"".concat(t("ENABLE_SUCCESSFUL"))})}))}},{key:"disable",icon:"stop",text:t("DISABLE"),action:"edit",show:function(e){return!e.disabled&&!n.isOutdated},onClick:function(){n.trigger("network.ipool.disable",{detail:r,cluster:a,success:n.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return n.trigger("resource.delete",{type:e,detail:r,success:function(){return n.routing.push(n.listUrl)}})}}].filter((function(e){return!e.show||e.show(r)}))},n.getAttrs=function(){var e=(0,g.toJS)(n.store.detail);if(!(0,y.default)(e)){var a=new E.Netmask(e.cidr),r=(0,C.getOverlayStatus)(e);return[!n.isOutdated&&{name:t("STATUS"),value:b.default.createElement(h.default,{type:e.disabled?"Disabled":"Running",name:t(e.disabled?"DISABLED":"ENABLED")})},{name:t("NETWORK_SEGMENT"),value:e.cidr},{name:t("USED_IP_ADDRESSES"),value:(0,v.default)(e,"status.capacity",0)-(0,v.default)(e,"status.unallocated",0)},{name:t("IPPOOL_BLOCK_SIZE"),value:e.blockSize},{name:t("NAT outgoing"),value:e.natOutgoing?t("OPENED"):t("CLOSED")},!n.isOutdated&&{name:t("IPPOOL_OVERLAY_MODE"),value:r.value?"".concat(r.type,"(").concat(r.value,")"):r.type},{name:t("MASK"),value:a.mask},{name:t("NETWORK"),value:a.base},{name:t("START_IP_ADDRESS"),value:a.base},{name:t("END_IP_ADDRESS"),value:a.broadcast},{name:t("CREATION_TIME_TCAP"),value:(0,S.getLocalTime)(e.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:e.creator||"-"}].filter(Boolean)}},n.ippoolStore=new O.default,n.store=new(n.ippoolStore.getStoreByCluster(e.match.params.cluster)),n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return b.default.createElement(f.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,S.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("POD_IP_POOL_PL"),url:this.listUrl}]};return b.default.createElement(m.default,(0,u.default)({stores:e,routes:this.routes},a))}},{key:"module",get:function(){return"ippools"}},{key:"authKey",get:function(){return"network"}},{key:"name",get:function(){return"POD_IP_POOL"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/ippools")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,v.default)(this.props.match,"params",{})}},{key:"isOutdated",get:function(){if(!globals.app.isMultiCluster)return!1;var e=(0,v.default)(globals,"clusterConfig.".concat(this.props.match.params.cluster,".ksVersion"));return(0,S.compareVersion)(e,"3.4.0")<0}},{key:"isCalico",get:function(){var e=this.props.match.params.cluster;return this.ippoolStore.isCalico(e)}},{key:"routes",get:function(){return(0,T.default)(this.isCalico)}}]),r}(b.default.Component))||o)||o)||o;a.default=A},3580:function(e,t,a){"use strict";a(17);var r=a(19);a(11),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(11),a(27),a(4);var n=a(319),o=r(a(3581)),u=r(a(3583)),l=r(a(3590)),c="/clusters/:cluster/ippools/:name";t.default=function(e){var t=[{path:"".concat(c,"/workspaces"),title:"WORKSPACE_PL",component:o.default,exact:!0},{path:"".concat(c,"/namespaces"),title:"NAMESPACE_PL",component:u.default,exact:!0},{path:"".concat(c,"/pods"),title:"POD_PL",component:l.default,exact:!0}];return e?(t=t.filter((function(e){return"WORKSPACE_PL"!==e.title}))).push((0,n.getIndexRoute)({path:c,to:"".concat(c,"/namespaces"),exact:!0})):(t=t.filter((function(e){return"NAMESPACE_PL"!==e.title}))).push((0,n.getIndexRoute)({path:c,to:"".concat(c,"/workspaces"),exact:!0})),t}},3581:function(e,a,r){"use strict";var n=r(19);r(12),r(137),r(3),r(11),r(6),r(68),r(20),r(87),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(137),r(31),r(3),r(11),r(6),r(68),r(20),r(27),r(87),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(7);var o,u,l=n(r(32)),c=n(r(25)),i=n(r(28)),s=n(r(38)),d=n(r(39)),f=n(r(35)),p=n(r(45)),m=n(r(802)),h=n(r(801)),v=n(r(26)),y=n(r(69)),g=r(18),_=r(245),E=n(r(0)),b=n(r(443)),O=r(56),S=n(r(3582));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=(0,_.inject)("detailStore")(o=(0,_.observer)((u=function(e){(0,s.default)(r,e);var a=T(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).store=e.props.detailStore,e.workspaceStore=new b.default,e.fetchWorkspaces=function(){var t=e.store.detail,a=(0,v.default)(t,"status.workspaces",{});e.workspaceStore.fetchList({names:Object.keys(a).join(","),limit:-1})},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchWorkspaces()}},{key:"render",value:function(){var e=this.store.detail,a=(0,v.default)(e,"status.workspaces",{}),r=this.workspaces;return E.default.createElement(m.default,{title:t("WORKSPACES")},E.default.createElement("div",{className:S.default.wrapper},(0,y.default)(a)&&E.default.createElement("div",{className:S.default.empty},t("IPPOOL_WORKSPACE_EMPTY_TIP")),Object.keys(a).map((function(e){var n=r[e]||{};return E.default.createElement("div",{key:e,className:S.default.item},E.default.createElement(h.default,{icon:"enterprise",title:(0,O.showNameAndAlias)(n),description:n.description||t("WORKSPACE")}),E.default.createElement(h.default,{title:a[e].allocations,description:t("USED_IP_ADDRESSES")}),E.default.createElement(h.default,{title:n.manager,description:t("MANAGER")}))}))))}},{key:"workspaces",get:function(){return this.workspaceStore.list.data.reduce((function(e,t){return C(C({},e),{},(0,l.default)({},t.name,t))}),{})}}]),r}(E.default.Component),(0,p.default)(u.prototype,"workspaces",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"workspaces"),u.prototype),o=u))||o)||o;a.default=R},3582:function(e,t,a){e.exports={wrapper:"_21Nur-ML8E1lmqmL3lRt3i",item:"_1bL8xFnk72nG93G57IoCla",empty:"_18lwhh8wev9Vr_5zWvrNMe"}},3583:function(e,a,r){"use strict";r(17);var n=r(19);r(11),r(67),r(20),r(14),r(4),r(16),r(29),r(10),r(74),r(66),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(42));r(36);var u=n(r(43)),l=n(r(25)),c=n(r(28)),i=n(r(38)),s=n(r(39)),d=n(r(35));r(31),r(11),r(67),r(20),r(27),r(142),r(30),r(14),r(119),r(9),r(4),r(21),r(16),r(40),r(29),r(10),r(74),r(66);var f,p=n(r(830)),m=n(r(26)),h=n(r(70)),v=n(r(1012)),y=n(r(983)),g=r(245),_=n(r(0)),E=n(r(3584)),b=r(18),O=r(192),S=r(805),k=n(r(3585)),C=n(r(3587)),T=n(r(3589));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}function A(e){var t=(0,b.toJS)((0,m.default)(e,"annotations")),a=(0,m.default)(t,'["cni.projectcalico.org/ipv4pools"]',"[]");return JSON.parse(a)}function P(e,t){var a=(0,m.default)((0,b.toJS)(e),"_originData",{});return(0,h.default)(a,'metadata.annotations["cni.projectcalico.org/ipv4pools"]',JSON.stringify(t)),a}var w=(0,g.inject)("detailStore","rootStore")(f=(0,g.observer)(f=(0,S.trigger)(f=function(e){(0,i.default)(r,e);var a=R(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).fetchNamespacesList=function(){var e=n.name,t=n.props.match.params.cluster;n.store.fetchList({cluster:t,limit:-1,labelSelector:"ippool.network.kubesphere.io/".concat(e)})},n.handleShowForm=function(){n.setState({showForm:!0})},n.handleCancel=function(){n.setState({showForm:!1})},n.handleAdd=function(){var e=(0,u.default)(o.default.mark((function e(t){var a,r,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A(t),r=n.name,a.includes(r)){e.next=7;break}return a.push(r),u=P(t,a),e.next=7,n.store.patchNamespace({cluster:n.cluster,namespace:t.name},u);case 7:n.handleCancel(),n.fetchNamespacesList();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(e){var a=e.workspace,r=e.name,o=P(e,(0,y.default)(A(e),(function(e){return e!==n.name})));n.trigger("network.ipool.removeNamespace",{namespace:r,workspace:a,cluster:n.cluster,data:o,title:t("DROP"),desc:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT_DESC"),store:n.store,success:function(){n.fetchNamespacesList()}})},n.removeAll=function(){var e=n.store.list,a=n.detailStore.detail.name,r=e.data.filter((function(e){return A(e).includes(a)}));n.trigger("network.ipool.removeNamespaceAll",{title:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT"),desc:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT_DESC"),store:n.store,namespaceList:r,cluster:n.cluster,getData:function(e){return P(e,(0,y.default)(A(e),(function(e){return e!==n.name})))},success:function(){n.fetchNamespacesList()}})},n.renderTitle=function(){return _.default.createElement("div",{className:T.default.titleWrapper},_.default.createElement("div",{className:T.default.title},t("NAMESPACE_PL")),_.default.createElement(O.Button,{icon:"trash",type:"float",disabled:!(0,v.default)(n.store.list.data),onClick:n.removeAll},t("REMOVEALL_IPPOOLL_NAMESPACE")))},n.detailStore=e.detailStore,n.store=new E.default,n.state={showForm:!1},n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchNamespacesList()}},{key:"render",value:function(){var e=this,a=this.state.showForm;return _.default.createElement("div",null,this.renderTitle(),_.default.createElement("div",{className:T.default.panel},_.default.createElement(p.default,null,_.default.createElement(k.default,{icon:"add",title:t("ADD_IPPOOLL_NAMESPACE"),description:t("ADD_IPPOOLL_NAMESPACE_DESC"),onClick:this.handleShowForm}),a&&_.default.createElement(C.default,{onOk:this.handleAdd,onCancel:this.handleCancel,cluster:this.props.match.params.cluster}),this.list.map((function(a){return _.default.createElement(p.default.Item,{key:a.name,icon:"project",title:a.name,description:t("PROJECT"),onDelete:function(){return e.handleDelete(a)},details:[{title:(0,m.default)(e.namespaceState,a.name,0),description:t("USED_IP_ADDRESSES")},{title:a.creator||"-",description:t("ADMINISTRATOR")}]})})))))}},{key:"namespaceState",get:function(){var e=(0,b.toJS)(this.detailStore.detail);return(0,m.default)(e,"status.namespaces",{})}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"list",get:function(){var e=(0,b.toJS)(this.store.list).data;return void 0===e?[]:e}},{key:"name",get:function(){var e=this.detailStore.detail;return(0,m.default)(e,"name","")}}]),r}(_.default.Component))||f)||f)||f;a.default=w},3584:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(21),a(16),a(40),a(10);var n=r(a(42));a(36);var o=r(a(43)),u=r(a(25)),l=r(a(28)),c=r(a(38)),i=r(a(39)),s=r(a(35));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var f=function(e){(0,c.default)(r,e);var t,a=d(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).module="namespaces",e.getBindUrl=function(e){var t=e.namespace,a=e.cluster;return"clusters/".concat(a,"/api/v1/namespaces/").concat(t)},e}return(0,l.default)(r,[{key:"patchNamespace",value:(t=(0,o.default)(n.default.mark((function e(t,a){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request.put(this.getBindUrl(t),a));case 1:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/resources.kubesphere.io/v1alpha3"}}]),r}(r(a(49)).default);t.default=f},3585:function(e,t,a){"use strict";a(17);var r=a(19);a(12),a(137),a(4),a(16),a(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(137),a(31),a(30),a(4),a(16),a(40),a(10);var n=r(a(32)),o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=r(a(5)),f=a(192),p=r(a(3586));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,l.default)(a,e);var t=m(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.image,r=e.title,o=e.description,u=e.onClick,l=e.type;return s.default.createElement("div",{className:(0,d.default)(p.default.add,(0,n.default)({},p.default.withIcon,t||a),p.default[l]),onClick:u},s.default.createElement("div",{className:p.default.icon},t&&s.default.createElement(f.Icon,{name:t,size:40})),s.default.createElement("div",{className:p.default.text},s.default.createElement("div",{className:p.default.title},r),s.default.createElement("div",{className:p.default.description},o)))}}]),a}(s.default.Component);t.default=h},3586:function(e,t,a){e.exports={add:"_2dcq7NHXgEwsUW4m8Fk48L",withIcon:"_1HejuFRyIzWvFM3f0-NMFy"}},3587:function(e,a,r){"use strict";var n=r(19);r(12),r(11),r(41),r(6),r(20),r(14),r(8),r(13),r(9),r(4),r(16),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(31),r(11),r(41),r(6),r(20),r(27),r(861),r(30),r(14),r(33),r(17),r(8),r(13),r(9),r(4),r(16),r(40),r(10),r(7);var o,u,l,c=n(r(32)),i=n(r(25)),s=n(r(28)),d=n(r(38)),f=n(r(39)),p=n(r(35)),m=n(r(0)),h=n(r(5)),v=r(192),y=n(r(441)),g=n(r(1)),_=r(56),E=r(245),b=n(r(3588));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,E.observer)((l=u=function(e){(0,d.default)(r,e);var a=k(r);function r(){var e;return(0,i.default)(this,r),(e=a.call(this)).handleChange=function(t){e.setState({namespace:t})},e.fetchProjects=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.cluster;return t.name&&(t.nameAndAlias=t.name,delete t.name),e.projectStore.fetchList(S(S({cluster:a},t),{},{limit:-1}))},e.handleOk=function(){var t=e.props.onOk,a=e.state.namespace,r=e.projectStore.list.data.find((function(e){return e.name===a}));t&&(null==t||t(r))},e.projectStore=new y.default,e.state={namespace:""},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"getProjects",value:function(){var e=this.props.defaultValue,t=this.projectStore.list.data,a=t.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:(0,_.showNameAndAlias)(e),value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}));return e&&!t.find((function(t){return t.name===e}))&&a.unshift({label:e,value:e}),a}},{key:"render",value:function(){var e=this.props.onCancel,a=this.state.namespace;return m.default.createElement("div",{className:(0,h.default)(b.default.item)},m.default.createElement(v.Select,{options:this.getProjects(),isLoading:this.projectStore.list.isLoading,onChange:this.handleChange,defaultValue:a}),m.default.createElement("div",{className:b.default.operate},m.default.createElement(v.Button,{type:"control",onClick:this.handleOk},t("OK")),m.default.createElement(v.Button,{onClick:e},t("CANCEL"))))}}]),r}(m.default.Component),u.propTypes={onOk:g.default.func,onCancel:g.default.func},o=l))||o;a.default=C},3588:function(e,t,a){e.exports={item:"_3BPuVvwzk_ge6XiLGhcP6v",operate:"HrIC05qaTJCYxqZGeOZP8"}},3589:function(e,t,a){e.exports={panel:"_2yziRuevY1NN2X0AGAnWlQ",titleWrapper:"MbTA39N9Zn2UUDj-GAUOV",title:"_3Kgi3PGvirCbjpoBiX0lZa"}},3590:function(e,t,a){"use strict";a(17);var r=a(19);a(3),a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(3),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o=r(a(25)),u=r(a(28)),l=r(a(38)),c=r(a(39)),i=r(a(35)),s=r(a(0)),d=a(245),f=r(a(921));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,d.inject)("detailStore")(n=(0,d.observer)(n=function(e){(0,l.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),a}(s.default.Component))||n)||n;t.default=m},794:function(e,t,a){"use strict";a(17);var r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(245),o=a(319),u=r(a(1531)),l=r(a(3322)),c=(0,n.inject)("rootStore")((function(e){return e.rootStore.registerActions(u.default),(0,o.renderRoutes)(l.default)}));t.default=c},867:function(e,t,a){"use strict";var r=a(163),n=a(19);a(12),a(11),a(6),a(51),a(8),a(13),a(9),a(29),a(198),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(318)),u=n(a(32));a(12),a(11),a(6),a(27),a(51),a(33),a(17),a(8),a(13),a(9),a(4),a(29),a(198),a(7);var l=n(a(1144)),c=n(a(914)),i=n(a(69)),s=n(a(141)),d=a(245),f=a(250),p=r(a(0)),m=n(a(3368));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=(0,d.inject)("rootStore","clusterStore")((0,d.observer)((0,l.default)((function(e){var t=e.clusterStore,a=e.data,r=e.isLoading,n=e.filters,u=e.cluster,l=e.module,d=e.onFetch;(0,p.useEffect)((function(){var e=(0,f.parse)(location.search.slice(1));e.namespace&&t.project!==e.namespace&&t.setProject(e.namespace)}),[t]);var h=(0,i.default)(a)&&!r&&(0,i.default)(n)&&!t.project;return p.default.createElement(c.default,(0,o.default)({customFilter:p.default.createElement(m.default,{module:l,cluster:u,list:t.projects,namespace:t.project,onFetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.fetchProjects(v(v({cluster:u},(0,s.default)(t.projects.filters,"nameAndAlias","name")),e))},onChange:function(e){t.setProject(e),d({},!0)}}),showEmpty:h},e))}))));t.default=y},943:function(e,t,a){"use strict";a(17);var r=a(19);a(4),a(16),a(29),a(10),a(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(31),a(30),a(4),a(16),a(40),a(29),a(10),a(66);var n,o,u=r(a(25)),l=r(a(28)),c=r(a(38)),i=r(a(39)),s=r(a(35)),d=a(438),f=a(245),p=a(904);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=(n=(0,f.inject)("rootStore"),(0,d.withRouter)(o=n(o=function(e){(0,c.default)(a,e);var t=m(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace,r=e.workspace;return globals.app.getActions({skipAuth:this.props.skipAuth,module:this.authKey,workspace:r,cluster:t,project:a})}}]),a}(p.Component))||o)||o);t.default=h}}]);