(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1403:function(e,r,n){"use strict";n(15);var a=n(20);n(5),Object.defineProperty(r,"__esModule",{value:!0}),r.supportNames=r.default=void 0,n(5);var o=a(n(26)),u=n(1815),i=n(1816),c=n(3856),l=a(n(1370)),s=a(n(1371)),d=a(n(1696)),f=function(e){return"".concat((0,o.default)(e,"Host"),":").concat((0,o.default)(e,"Port"))},p={elasticsearch:{ICON:u.ReactComponent,title:"Elasticsearch",pathGetter:f,Form:l.default,get description(){return t("ES_DESC")},createConfig:{logs:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-logs-sink-elasticsearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"logs","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{elasticsearch_logs:{type:"elasticsearch",inputs:["kube_logs_remapped","systemd_logs_remapped"],bulk:{index:"{{ .cluster }}-logs-%Y.%m.%d"},endpoints:["http://elasticsearch-logging-data.kubesphere-logging-system.svc:9200"]}}}}},auditing:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-auditing-sink-elasticsearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"auditing","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{elasticsearch_auditing:{type:"elasticsearch",inputs:["auditing_remapped"],bulk:{index:"{{ .cluster }}-auditing-%Y.%m.%d"},endpoints:["http://elasticsearch-logging-data.kubesphere-logging-system.svc:9200"]}}}}},events:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-events-sink-elasticsearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"events","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{elasticsearch_events:{type:"elasticsearch",inputs:["kube_events_remapped"],bulk:{index:"{{ .cluster }}-events-%Y.%m.%d"},endpoints:["http://elasticsearch-logging-data.kubesphere-logging-system.svc:9200"]}}}}},"notification-history":{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-aggregator-notification-history-sink-elasticsearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"notification-history","logging.whizard.io/vector-role":"Aggregator","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{elasticsearch_notification_history:{type:"elasticsearch",inputs:["notification_history_remapped"],bulk:{index:"{{ .cluster }}-notification-history-%Y.%m.%d"},endpoints:["http://elasticsearch-logging-data.kubesphere-logging-system.svc:9200"]}}}}}}},opensearch:{ICON:c.ReactComponent,title:"Opensearch",pathGetter:f,Form:d.default,get description(){return t("OPENSEARCH_DESC")},createConfig:{logs:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-logs-sink-opensearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"logs","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{opensearch_logs:{type:"elasticsearch",api_version:"v8",auth:{strategy:"basic",user:"admin",password:"admin"},endpoints:["https://opensearch-cluster-data.kubesphere-logging-system.svc:9200"],tls:{verify_certificate:!1},inputs:["kube_logs_remapped","systemd_logs_remapped"],bulk:{index:"{{ .cluster }}-logs-%Y.%m.%d"}}}}}},auditing:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-auditing-sink-opensearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"auditing","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{opensearch_auditing:{type:"elasticsearch",api_version:"v8",auth:{strategy:"basic",user:"admin",password:"admin"},endpoints:["https://opensearch-cluster-data.kubesphere-logging-system.svc:9200"],tls:{verify_certificate:!1},inputs:["auditing_remapped"],bulk:{index:"{{ .cluster }}-auditing-%Y.%m.%d"}}}}}},events:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-events-sink-opensearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"events","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{opensearch_events:{type:"elasticsearch",api_version:"v8",auth:{strategy:"basic",user:"admin",password:"admin"},endpoints:["https://opensearch-cluster-data.kubesphere-logging-system.svc:9200"],tls:{verify_certificate:!1},inputs:["kube_events_remapped"],bulk:{index:"{{ .cluster }}-events-%Y.%m.%d"}}}}}},"notification-history":{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-aggregator-notification-history-sink-opensearch",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"notification-history","logging.whizard.io/vector-role":"Aggregator","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{opensearch_notification_history:{type:"elasticsearch",api_version:"v8",auth:{strategy:"basic",user:"admin",password:"admin"},endpoints:["https://opensearch-cluster-data.kubesphere-logging-system.svc:9200"],tls:{verify_certificate:!1},inputs:["notification_history_remapped"],bulk:{index:"{{ .cluster }}-notification-history-%Y.%m.%d"}}}}}}}},kafka:{ICON:i.ReactComponent,title:"Kafka",pathGetter:function(e){return(0,o.default)(e,"Brokers")},Form:s.default,get description(){return t("KAFKA_DESC")},createConfig:{logs:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-logs-sink-kafka",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"logs","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{kafka_logs:{type:"kafka",inputs:["kube_logs_remapped","systemd_logs_remapped"],bootstrap_servers:"10.27.0.30:9092",topic:"{{ .cluster }}-logs-{{ .kubernetes.namespace_name }}",encoding:{codec:"json"}}}}}},auditing:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-auditing-sink-kafka",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"auditing","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{kafka_auditing:{type:"kafka",inputs:["auditing_remapped"],bootstrap_servers:"10.27.0.30:9092",topic:"{{ .cluster }}-auditing-{{ .kubernetes.namespace_name }}",encoding:{codec:"json"}}}}}},events:{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-agent-events-sink-kafka",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"events","logging.whizard.io/vector-role":"Agent","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{kafka_events:{type:"kafka",inputs:["kube_events_remapped"],bootstrap_servers:"10.27.0.30:9092",topic:"{{ .cluster }}-events-{{ .kubernetes.namespace_name }}",encoding:{codec:"json"}}}}}},"notification-history":{apiVersion:"v1",kind:"Secret",metadata:{name:"vector-aggregator-notification-history-sink-kafka",namespace:"kubesphere-logging-system",labels:{"logging.whizard.io/component":"notification-history","logging.whizard.io/vector-role":"Aggregator","logging.whizard.io/enable":"true"}},data:{"sink.yaml":{sinks:{kafka_notification_history:{type:"kafka",inputs:["notification_history_remapped"],bootstrap_servers:"10.27.0.30:9092",topic:"{{ .cluster }}-notification-history-{{ .kubernetes.namespace_name }}",encoding:{codec:"json"}}}}}}}}};r.default=p;r.supportNames=["vector-agent-logs-sink-elasticsearch","vector-agent-auditing-sink-elasticsearch","vector-agent-events-sink-elasticsearch","vector-aggregator-notification-history-sink-elasticsearch","vector-agent-logs-sink-opensearch","vector-agent-auditing-sink-opensearch","vector-agent-events-sink-opensearch","vector-aggregator-notification-history-sink-opensearch","vector-agent-logs-sink-kafka","vector-agent-auditing-sink-kafka","vector-agent-events-sink-kafka","vector-aggregator-notification-history-sink-kafka"]},1795:function(e,t,r){"use strict";r(15),r(11),r(29),r(137),r(4),r(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(11),r(29),r(137),r(4),r(32);for(var n=r(3696),a=n.keys().filter((function(e){return"./index.js"!==e})),o={},u=0;u<a.length;u+=1)Object.assign(o,n(a[u]).default);var i=o;t.default=i},1801:function(e,r,n){"use strict";n(15);var a=n(20);n(31),n(18),n(16),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(31),n(18),n(42),n(16),n(4),n(23),n(57),n(17);var o=a(n(36)),u=a(n(37)),i=a(n(55)),c=a(n(56)),l=a(n(51)),s=n(186),d=a(n(787)),f=a(n(830)),p=a(n(26)),m=n(14),h=a(n(1)),g=a(n(0)),y=n(72);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var _=function(e){(0,i.default)(n,e);var r=v(n);function n(e){var a;return(0,o.default)(this,n),(a=r.call(this,e)).groupOptionRenderer=function(e){return g.default.createElement(g.default.Fragment,null,g.default.createElement(s.Tag,{type:y.CLUSTER_GROUP_TAG_TYPE[e.value]},t("ENV_".concat(e.label.toUpperCase()))),"  ",e.label)},a.providerOptionRenderer=function(e){return g.default.createElement(g.default.Fragment,null,g.default.createElement(s.Icon,{name:e.icon,type:"light",size:20}),e.label)},a.handleOk=function(e){(0,a.props.onOk)(e)},a.handleRegionSelect=function(e){a.setState({region:e})},a.state={region:(0,p.default)(e.detail,'metadata.labels["topology.kubernetes.io/region"]',""),formData:(0,f.default)((0,m.toJS)(e.detail._originData))},a}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,r=e.visible,n=e.isSubmitting,a=e.onCancel,o=this.state.formData;return g.default.createElement(d.default.Form,{data:o,width:691,title:t("EDIT_INFORMATION"),description:t("EDIT_CLUSTER_INFO_DESC"),icon:"cluster",onOk:this.handleOk,okText:t("OK"),onCancel:a,visible:r,isSubmitting:n},g.default.createElement(s.Form.Item,{label:t("CLUSTER_NAME"),desc:t("NAME_DESC")},g.default.createElement(s.Input,{name:"metadata.name",disabled:!0})),g.default.createElement(s.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:y.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},g.default.createElement(s.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),g.default.createElement(s.Form.Item,{label:t("CLUSTER_LABEL"),desc:t("CLUSTER_LABEL_DESC")},g.default.createElement(s.Select,{name:"metadata.labels['cluster.kubesphere.io/group']",options:y.CLUSTER_PRESET_GROUPS,optionRenderer:this.groupOptionRenderer,placeholder:" "})),g.default.createElement(s.Form.Item,{label:t("PROVIDER"),desc:t("CLUSTER_PROVIDER_DESC")},g.default.createElement(s.Select,{name:"spec.provider",options:y.CLUSTER_PROVIDERS,optionRenderer:this.providerOptionRenderer,placeholder:" "})),g.default.createElement(s.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},g.default.createElement(s.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}},{key:"regions",get:function(){return(0,p.default)(globals.config,"regionZones",[]).map((function(e){return{label:e.alias,value:e.name}}))}},{key:"zones",get:function(){var e=this,t=(0,p.default)(globals.config,"regionZones",[]).find((function(t){return t.name===e.state.region}));return t&&t.zones?t.zones.map((function(e){return{label:e.alias,value:e.name}})):[]}}]),n}(g.default.Component);r.default=_,_.propTypes={detail:h.default.object,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},1802:function(e,t,r){"use strict";r(15);var n=r(20);r(73),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(73),r(42),r(4),r(23),r(57),r(17);var a,o,u=n(r(65)),i=n(r(36)),c=n(r(88)),l=n(r(55)),s=n(r(56)),d=n(r(51)),f=n(r(49)),p=(n(r(66)),r(14)),m=r(52),h=n(r(1129));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var y=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_net_bytes_transmitted","pod_net_bytes_received","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation"],v=["pod_cpu_usage","pod_cpu_used_requests_utilisation","pod_cpu_used_limits_utilisation","pod_memory_usage_wo_cache","pod_memory_used_requests_utilisation","pod_memory_used_limits_utilisation","pod_gpu_usage","pod_gpu_memory_usage","pod_net_bytes_transmitted","pod_net_bytes_received","pod_pvc_bytes_usage","pod_pvc_bytes_utilisation"],_=(a=function(e){(0,l.default)(r,e);var t=g(r);function r(e){var n;return(0,i.default)(this,r),n=t.call(this,e),(0,u.default)(n,"sort_metric",o,(0,c.default)(n)),n.resource="pods",n.sort_metric_options=(0,m.hideGPUByLicense)(e.sort_metric_options||y,n.cluster),n.metrics_filter=(0,m.hideGPUByLicense)(v,n.cluster).join("|"),n}return r}(h.default),o=(0,f.default)(a.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),a);t.default=_},1805:function(e,t,r){"use strict";r(15),Object.defineProperty(t,"__esModule",{value:!0}),t.CLUSTER_CREATING_STEPS=void 0;t.CLUSTER_CREATING_STEPS=["Init Nodes","Pull Images","Init etcd Cluster","Init Control Plane","Join Nodes","Install Addons"]},1806:function(e,t,r){"use strict";r(15),Object.defineProperty(t,"__esModule",{value:!0}),t.storageClasses=void 0;t.storageClasses=[{value:"BlockStorage",label:"BLOCK_STORAGE"},{value:"ObjectStorage",label:"OBJECT_STORAGE"},{value:"FileStorage",label:"FILE_STORAGE"},{value:"Undefined",label:"UNCLASSIFIED"}]},1807:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(6),r(16),r(98),r(9),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5),r(6),r(16),r(98),r(9),r(4),r(22),r(7);var a=n(r(43)),o=n(r(96));r(41);var u,i,c,l,s,d,f,p=n(r(44)),m=n(r(65)),h=n(r(36)),g=n(r(37)),y=n(r(49)),v=(n(r(66)),r(14)),_=n(r(26)),E=n(r(855)),O=r(434),b=(u=function(){function e(){var t=this;(0,h.default)(this,e),(0,m.default)(this,"list",i,this),(0,m.default)(this,"count",c,this),(0,m.default)(this,"exceptionCount",l,this),(0,m.default)(this,"healthyCount",s,this),(0,m.default)(this,"detail",d,this),(0,m.default)(this,"isLoading",f,this),this.getListUrl=function(e){var r=e.cluster;return"".concat(t.apiVersion,"/klusters/").concat(r,"/components")},this.getDetailUrl=function(e){var r=e.cluster,n=e.name;return"".concat(t.getListUrl({cluster:r}),"/").concat(n)}}var t,r;return(0,g.default)(e,[{key:"fetchList",value:(r=(0,p.default)(a.default.mark((function e(t){var r,n,u,i,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,request.get(this.getListUrl(t));case 3:r=e.sent,n=(0,E.default)(r,"namespace"),u={kubernetes:(0,_.default)(n,"kube-system",[]),kubesphere:(0,_.default)(n,"kubesphere-system",[]),istio:(0,_.default)(n,"istio-system",[]),monitoring:(0,_.default)(n,"kubesphere-monitoring-system",[]),logging:(0,_.default)(n,"kubesphere-logging-system",[]),devops:(0,_.default)(n,"kubesphere-devops-system",[]),edgewize:(0,_.default)(n,"edgewize-system",[])},this.list={data:u,isLoading:!1},i={},c={},Object.entries(u).forEach((function(e){var t=(0,o.default)(e,2),r=t[0];t[1].forEach((function(e){var t=(0,O.getComponentStatus)(e);"Warning"===t&&(i[r]=i[r]||0,i[r]+=1),"Healthy"===t&&(c[r]=c[r]||0,c[r]+=1)}))})),this.exceptionCount=i,this.healthyCount=c;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchDetail",value:(t=(0,p.default)(a.default.mark((function e(t){var r,n,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cluster,n=t.name,this.isLoading=!0,e.next=4,request.get(this.getDetailUrl({cluster:r,name:n}));case 4:o=e.sent,this.detail=o,this.isLoading=!1;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/resources.kubesphere.io/v1alpha2"}},{key:"totalCount",get:function(){var e=this.count,t=e.kubesphere+e.kubernetes+e.openpitrix;return isNaN(t)?0:t}}]),e}(),i=(0,y.default)(u.prototype,"list",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:{},isLoading:!0}}}),c=(0,y.default)(u.prototype,"count",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=(0,y.default)(u.prototype,"exceptionCount",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,y.default)(u.prototype,"healthyCount",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,y.default)(u.prototype,"detail",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=(0,y.default)(u.prototype,"isLoading",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),(0,y.default)(u.prototype,"fetchList",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchList"),u.prototype),(0,y.default)(u.prototype,"fetchDetail",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchDetail"),u.prototype),u);t.default=b},3696:function(e,t,r){var n={"./cluster.js":3697,"./index.js":1795};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=3696},3697:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(6),n(84),n(86),n(29),n(18),n(16),n(9),n(13),n(10),n(4),n(22),n(85),n(38),n(7),n(32),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(11),n(6),n(84),n(86),n(29),n(18),n(28),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(85),n(38),n(7),n(32);var o=a(n(43));n(41);var u=a(n(44)),i=a(n(30)),c=a(n(58)),l=a(n(240)),s=a(n(787)),d=a(n(26)),f=a(n(63)),p=a(n(3698)),m=a(n(445));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g={"cluster.visibility.edit":{on:function(e){var r,n=e.store,a=e.success,g=e.cluster,y=(0,c.default)(e,["store","success","cluster"]),v=new m.default,_=s.default.open(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onOk:(r=(0,u.default)(o.default.mark((function e(r){var u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",s.default.close(_));case 2:if(!globals.user.globalRules.clusters.includes("manage")){e.next=5;break}return e.next=5,n.patch({name:n.detail.name},{metadata:{labels:{"cluster.kubesphere.io/visibility":r.public?"public":"private"}}});case 5:return u=[],r.addWorkspaces&&r.addWorkspaces.forEach((function(e){var t,r=(0,d.default)(e,"_originData.spec.placement.clusters",{});t=(0,f.default)(r)?[{op:"add",path:"/spec/placement",value:{clusters:[{name:g.name}]}}]:[{op:"add",path:"/spec/placement/clusters/-",value:{name:g.name}}],u.push(v.editVisible(e,t))})),r.deleteWorkspaces&&r.deleteWorkspaces.forEach((function(e){var t=(e.clusters.map((function(e){return e.name}))||[]).indexOf(g.name),r=[{op:"remove",path:"/spec/placement/clusters/".concat(t),value:{name:g.name}}];u.push(v.editVisible(e,r))})),e.next=10,Promise.all(u);case 10:s.default.close(_),a&&a(),l.default.success({content:t("UPDATE_SUCCESSFUL")});case 13:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),modal:p.default,store:n,cluster:g},y))}}};r.default=g},3698:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(31),n(6),n(84),n(73),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(188),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(31),n(6),n(84),n(73),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(188),n(7);var o=a(n(61)),u=a(n(30)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=n(186),p=a(n(787)),m=a(n(824)),h=a(n(915)),g=a(n(26)),y=a(n(63)),v=a(n(321)),_=n(14),E=a(n(0)),O=a(n(445)),b=a(n(3699)),S=a(n(3700));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var D=function(e){(0,l.default)(n,e);var r=T(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),u=0;u<t;u++)a[u]=arguments[u];return(e=r.call.apply(r,[this].concat(a))).state={allWorkspaces:[],authoredWorkspaces:[],addWorkspaces:[],deleteWorkspaces:[],isPublic:"public"===(0,g.default)(e.props,"cluster.visibility"),showUnAuthTip:!1,showConfirm:!1,filters:{}},e.workspaceStore=new O.default,e.authoredWorkspaceStore=new O.default,e.handleOk=function(){var t=e.state,r=t.allWorkspaces,n=t.authoredWorkspaces,a=(0,_.toJS)(e.authoredWorkspaceStore.list.data),o=(0,v.default)(r,"name"),u=(0,v.default)(n,"name"),i=(0,v.default)(a,"name"),c=n.filter((function(e){return!i[e.name]})),l=a.filter((function(e){return!u[e.name]})).map((function(e){return o[e.name]}));e.setState({addWorkspaces:c,deleteWorkspaces:l},(function(){e.state.deleteWorkspaces.length>0?e.setState({showConfirm:!0}):e.handleConfirm()}))},e.handleConfirm=function(){var t=e.props.onOk,r=e.state,n=r.addWorkspaces,a=r.deleteWorkspaces;t({public:r.isPublic,addWorkspaces:n,deleteWorkspaces:a})},e.hideConfirm=function(){e.setState({showConfirm:!1})},e.handleSearch=function(t){e.fetchWorkspaces({nameAndAlias:t})},e.fetchWorkspaces=function(t){e.workspaceStore.fetchList(C(C({},t),{},{labelSelector:"!cluster-role.kubesphere.io/edge",limit:-1})).then((function(){e.setState({allWorkspaces:(0,_.toJS)(e.workspaceStore.list.data)})}))},e.fetchAuthoredWorkspaces=function(t){var r=e.props.cluster,n=void 0===r?{}:r;e.authoredWorkspaceStore.fetchList(C(C({},t),{},{limit:-1,cluster:n.name})).then((function(){e.setState({authoredWorkspaces:(0,o.default)((0,_.toJS)(e.authoredWorkspaceStore.list.data))})}))},e.handleWorkspaceAuth=function(t){e.setState((function(e){var r=e.authoredWorkspaces;return{authoredWorkspaces:[].concat((0,o.default)(r),[t])}}))},e.handleWorkspaceUnAuth=function(t){var r=e.state.allWorkspaces;e.setState((function(e){var n=e.authoredWorkspaces,a=r.filter((function(e){return e.name===t.name}));return(0,y.default)(a)&&r.push(t),{authoredWorkspaces:n.filter((function(e){return e.name!==t.name})),allWorkspaces:r,showUnAuthTip:!0}}))},e.handlePublicChange=function(t){e.setState({isPublic:t})},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchWorkspaces(),this.fetchAuthoredWorkspaces()}},{key:"render",value:function(){var e=this,r=this.props,n=r.visible,a=r.onCancel,o=this.state,u=o.allWorkspaces,i=o.authoredWorkspaces,c=o.showUnAuthTip,l=o.isPublic,s=o.showConfirm,d=o.deleteWorkspaces,g=d.map((function(e){return e.name})).join(", "),y=1===d.length?t.html("REMOVE_WORKSPACE_CONFIRM_SI",{resource:g}):t.html("REMOVE_WORKSPACE_CONFIRM_PL",{resource:g});return E.default.createElement(p.default,{visible:n,onCancel:a,onOk:this.handleOk,width:960,icon:"key",title:t("EDIT_VISIBILITY"),description:t("EDIT_VISIBILITY_DESC")},!c&&E.default.createElement(f.Alert,{className:"margin-b12",type:"warning",message:t("HOST_CLUSTER_VISIBILITY_WARNING")}),c&&E.default.createElement(f.Alert,{className:"margin-b12",type:"error",message:t("CLUSTER_VISIBILITY_REMOVE_WARNING")}),E.default.createElement("div",{className:b.default.wrapper},E.default.createElement(f.Columns,null,E.default.createElement(f.Column,{className:"is-half"},E.default.createElement("div",{className:b.default.title},t("UNAUTHORIZED")),E.default.createElement("div",{className:b.default.content},E.default.createElement("div",{className:b.default.search},E.default.createElement(h.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.columns,onChange:function(t){e.setState({filters:t}),e.fetchWorkspaces(t)},filters:this.state.filters})),E.default.createElement("div",{className:b.default.list},u.map((function(t){return E.default.createElement(S.default,{key:t.name,data:t,type:"all",onClick:e.handleWorkspaceAuth,disabled:i.find((function(e){return e.name===t.name}))})}))),E.default.createElement("div",{className:b.default.footer},globals.user.globalRules.clusters.includes("manage")&&E.default.createElement(E.default.Fragment,null,E.default.createElement(f.Toggle,{checked:l,onChange:this.handlePublicChange}),E.default.createElement("span",null,t("SET_PUBLIC_CLUSTER")),E.default.createElement(f.Tooltip,{content:t("CLUSTER_VISIBILITY_A2")},E.default.createElement(f.Icon,{name:"information"})))))),E.default.createElement(f.Column,{className:"is-half"},E.default.createElement("div",{className:b.default.title},t("AUTHORIZED")),E.default.createElement("div",{className:b.default.content},E.default.createElement("div",{className:b.default.authedList},i.map((function(t){return E.default.createElement(S.default,{key:t.name,data:t,type:"authed",onClick:e.handleWorkspaceUnAuth})}))),E.default.createElement("div",{className:b.default.footer}))))),E.default.createElement(m.default,{visible:s,onOk:this.handleConfirm,onCancel:this.hideConfirm,resource:g,title:t("REMOVE_WORKSPACE_CONFIRM_TITLE"),desc:y}))}},{key:"columns",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:!0}]}}]),n}(E.default.Component);r.default=D},3699:function(e,t,r){e.exports={wrapper:"_1SbLbTFQFqcmexUmc7grjB",title:"_2JIUF6KDW0q8OuRAbzwbFy",content:"_3KsLjWUYDHjA6iBRaPIyOv",search:"qlBBKXQBG5hybwbhVbU-r",list:"_2McNE4ZD_UKTIxC59RzC6L",authedList:"_33baKvp6rG0kolft8ThzKb",footer:"rKEIrcFvmBNM5P5SjduSX"}},3700:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);n(12),n(109),n(5),n(16),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(17);var u=o(n(30)),i=o(n(36)),c=o(n(37)),l=o(n(55)),s=o(n(56)),d=o(n(51)),f=n(186),p=o(n(3)),m=o(n(790)),h=a(n(0)),g=n(52),y=o(n(3701));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var _=function(e){(0,l.default)(n,e);var r=v(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).handleClick=function(){var t=e.props,r=t.data;(0,t.onClick)(r)},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,r=e.data,n=e.type,a=e.disabled;return r.name===globals.config.systemWorkspace?null:h.default.createElement("div",{className:(0,p.default)(y.default.wrapper,(0,u.default)({},y.default.disabled,a)),onClick:a?null:this.handleClick},!a&&"authed"===n&&h.default.createElement(f.Icon,{name:"chevron-left",size:20}),h.default.createElement(m.default,{className:y.default.title,icon:"enterprise",title:(0,g.showNameAndAlias)(r.name,"workspace"),description:r.description||"-",ellipsis:!0}),h.default.createElement(m.default,{className:y.default.manager,title:r.manager,description:t("MANAGER")}),!a&&"authed"!==n&&h.default.createElement(f.Icon,{name:"chevron-right",size:20}))}}]),n}(h.Component);r.default=_},3701:function(e,t,r){e.exports={wrapper:"_1qjLklC2JUMbrIwB1g79Hk",disabled:"_1H1hQxC4CBLI54qDMSBxda",title:"_39HEUMTKtnJRkqWNY8ncIH",manager:"_29St8pjb_Msm4R7o-VJCEM"}},3702:function(e,t,r){"use strict";r(15);var n=r(20);r(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5);var a=n(r(61)),o=r(317),u=n(r(1796)),i=r(1798),c=n(r(3709)),l=n(r(3710)),s=n(r(3711)),d=n(r(3722)),f=n(r(3755)),p=n(r(3756)),m=n(r(3762)),h=n(r(3763)),g=n(r(3769)),y=n(r(3771)),v=n(r(3773)),_=n(r(1195)),E=n(r(3777)),O=n(r(3778)),b=n(r(3779)),S=n(r(3780)),k=n(r(3781)),C=n(r(3782)),T=n(r(3783)),D=n(r(3785)),A=n(r(3786)),N=n(r(3787)),R=n(r(3791)),P=n(r(3793)),M=n(r(3794)),w=n(r(3795)),I=n(r(3827)),L=n(r(3840)),j=n(r(3841)),x=n(r(3842)),U=n(r(3845)),z=n(r(3847)),V=n(r(3848)),Y=n(r(3850)),G=n(r(3852)),H=n(r(3859)),F=n(r(3861)),B=n(r(3866)),W=n(r(3868)),q="/clusters/:cluster",Q=[{path:"/clusters",component:s.default,redirect:globals.app.isMultiCluster?null:{from:"/clusters",to:"/clusters/default/overview",exact:!0},exact:!0},{path:"/clusters/tags",component:B.default,exact:!0},{path:q,component:c.default,routes:[].concat((0,a.default)(W.default),[{path:"".concat(q,"/kubeConfig"),component:z.default,exact:!0},{path:"",component:l.default,routes:[{path:"".concat(q,"/overview"),component:d.default,exact:!0},{path:"".concat(q,"/nodes"),component:g.default},{path:"".concat(q,"/edgenodes"),component:y.default,exact:!0},{path:"".concat(q,"/components"),component:v.default,exact:!0},{path:"".concat(q,"/projects"),component:_.default,exact:!0},{path:"".concat(q,"/customresources"),component:E.default,exact:!0},{path:"".concat(q,"/deployments"),component:O.default,exact:!0},{path:"".concat(q,"/statefulsets"),component:b.default,exact:!0},{path:"".concat(q,"/daemonsets"),component:S.default,exact:!0},{path:"".concat(q,"/jobs"),component:k.default,exact:!0},{path:"".concat(q,"/cronjobs"),component:C.default,exact:!0},{path:"".concat(q,"/pods"),component:T.default,exact:!0},{path:"".concat(q,"/services"),component:D.default,exact:!0},{path:"".concat(q,"/ingresses"),component:A.default,exact:!0},{path:"".concat(q,"/clusteringresssettings"),component:N.default,exact:!0},{path:"".concat(q,"/secrets"),component:R.default,exact:!0},{path:"".concat(q,"/configmaps"),component:P.default,exact:!0},{path:"".concat(q,"/serviceaccounts"),component:M.default,exact:!0},{path:"".concat(q,"/storageclasses"),component:f.default,exact:!0},{path:"".concat(q,"/volumes"),component:h.default},{path:"".concat(q,"/volume-snapshots"),component:p.default},{path:"".concat(q,"/volume-snapshot-classes"),component:m.default},{path:"".concat(q,"/monitor-cluster"),component:w.default},{path:"".concat(q,"/monitor-resource"),component:I.default},{path:"".concat(q,"/alerts"),component:u.default},{path:"".concat(q,"/alert-rules"),component:i.ClusterAlertingPolicies},{path:"".concat(q,"/base-info"),component:x.default,exact:!0},{path:"".concat(q,"/visibility"),component:U.default,exact:!0},{path:"".concat(q,"/members"),component:L.default,exact:!0},{path:"".concat(q,"/roles"),component:j.default,exact:!0},{path:"".concat(q,"/storageclasses"),component:f.default,exact:!0},{path:"".concat(q,"/snapshots/:namespace?"),component:p.default},{path:"".concat(q,"/networkpolicies"),component:V.default,exact:!0},{path:"".concat(q,"/ippools"),component:Y.default,exact:!0},{path:"".concat(q,"/log-collections/:component"),component:G.default},{path:"".concat(q,"/custom-monitoring"),component:H.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(q,"/gateways/:component"),component:F.default,exact:!0},(0,o.getIndexRoute)({path:q,to:"".concat(q,"/overview"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(q,"/workloads"),to:"".concat(q,"/deployments"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(q,"/log-collections"),to:"".concat(q,"/log-collections/logs"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(q,"/gateways"),to:"".concat(q,"/gateways/cluster"),exact:!0}),(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})]}])}];t.default=Q},3709:function(e,t,r){"use strict";var n=r(20),a=r(157);r(12),r(11),r(6),r(29),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(38),r(62),r(7),r(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(11),r(6),r(29),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(38),r(62),r(7),r(32);var o=n(r(43)),u=n(r(30));r(41);var i,c=n(r(44)),l=n(r(36)),s=n(r(37)),d=n(r(55)),f=n(r(56)),p=n(r(51)),m=r(186),h=n(r(26)),g=n(r(241)),y=n(r(74)),v=r(239),_=a(r(0)),E=n(r(438)),O=r(317);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,v.inject)("rootStore")(i=(0,v.observer)(i=function(e){(0,d.default)(n,e);var t,r=k(n);function n(e){var t;return(0,l.default)(this,n),(t=r.call(this,e)).state={fetchFin:!1},t.store=new E.default,t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.init(this.props.match.params)}},{key:"componentDidUpdate",value:function(e){e.match.params.cluster!==this.cluster&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store.initializing=!0,!t.cluster){e.next=10;break}return e.next=4,Promise.all([this.store.fetchDetail({name:t.cluster}),this.props.rootStore.getRules({cluster:t.cluster})]);case 4:if(!this.store.detail.isReady){e.next=7;break}return e.next=7,this.store.fetchProjects({cluster:t.cluster});case 7:(0,y.default)(globals,"clusterConfig.".concat(t.cluster),S(S({},this.store.detail.configz),{},{k8sVersion:this.store.detail.kubernetesVersion})),""===(0,h.default)(this.store.detail.configz,"ksVersion")&&(0,y.default)(globals,"need_rebuild_".concat(this.cluster,"_nav"),!0),globals.app.cacheHistory(this.props.match.url,S({type:"Cluster"},(0,g.default)(this.store.detail,["name","aliasName","group","isHost"])));case 10:this.store.initializing=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?_.default.createElement(m.Loading,{className:"ks-page-loading"}):_.default.createElement(v.Provider,{clusterStore:this.store},(0,O.renderRoutes)(this.props.route.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(_.Component))||i)||i;t.default=C},3710:function(e,t,r){"use strict";r(15);var n=r(20),a=r(157);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(28),r(42),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var o=n(r(43));r(41);var u,i=n(r(44)),c=n(r(36)),l=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=a(r(0)),m=r(239),h=n(r(800)),g=n(r(26)),y=n(r(242)),v=r(317);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var E=(0,m.inject)("rootStore","clusterStore")(u=(0,m.observer)(u=function(e){(0,s.default)(r,e);var t=_(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).enterCluster=function(){var t=(0,i.default)(o.default.mark((function t(r){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.routing.push("/clusters/".concat(r,"/overview")));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchConfigz=(0,h.default)((0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.clusterStore.fetchClusterConfigz({cluster:e.cluster});case 2:t.sent&&(globals.app.getClusterNavs(e.cluster),(0,y.default)(globals,"need_rebuild_".concat(e.cluster,"_nav")),e.forceUpdate());case 4:case"end":return t.stop()}}),t)}))),3e3),e}return(0,l.default)(r,[{key:"componentDidUpdate",value:function(){(0,g.default)(globals,"need_rebuild_".concat(this.cluster,"_nav"),!1)&&this.fetchConfigz()}},{key:"render",value:function(){var e=this.props.route;return p.default.createElement(p.default.Fragment,null,(0,v.renderRoutes)(e.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(p.Component))||u)||u;t.default=E},3711:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(31),n(6),n(84),n(73),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(85),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(315)),u=a(n(43));n(41);var i=a(n(44)),c=a(n(30)),l=a(n(61)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51));n(12),n(45),n(5),n(11),n(31),n(6),n(84),n(160),n(73),n(18),n(28),n(191),n(42),n(16),n(159),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(17),n(85),n(7);var h,g=a(n(26)),y=a(n(63)),v=a(n(189)),_=a(n(446)),E=a(n(0)),O=n(239),b=n(186),S=a(n(792)),k=a(n(833)),C=a(n(1400)),T=a(n(438)),D=n(791),A=a(n(1801)),N=a(n(915)),R=a(n(945)),P=a(n(3)),M=a(n(874)),w=a(n(886)),I=a(n(1047)),L=n(52),j=a(n(3721));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var V="cluster_overview_hide_columns",Y=(0,O.inject)("rootStore")(h=(0,O.observer)(h=(0,D.trigger)(h=function(e){(0,f.default)(n,e);var r=z(n);function n(e){var a;(0,s.default)(this,n),(a=r.call(this,e)).fetchTagGroupList=function(){a.tagsStore.fetchGroupList()},a.handleTabChange=function(e){a.routing.push("/clusters/".concat(e))},a.initData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.fetchHostData(e),a.fetchData(e)},a.getParamsLabel=function(e,t){var r=t?"cluster-role.kubesphere.io/host=":"!cluster-role.kubesphere.io/host",n=e.group,a=e.tags,o=void 0===a?[]:a;return n&&(n="cluster.kubesphere.io/group=".concat(n)),o=Array.isArray(o)?o.map((function(e){return"label.cluster.kubesphere.io/".concat(e)})):"cluster.kubesphere.io/group=".concat(o),[n].concat((0,l.default)(o),[r,"!cluster-role.kubesphere.io/edge"]).filter(Boolean).join(",")},a.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.store.fetchListByUser(U(U({},(0,v.default)(e,"group","tags","__index")),{},{limit:e.limit||10,page:e.page||1,labelSelector:a.getParamsLabel(e,!1)}))},a.fetchHostData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.hostStore.fetchListByUser(U(U({},(0,v.default)(e,"group","tags","__index")),{},{labelSelector:a.getParamsLabel(e,!0),limit:-1}))},a.showAddCluster=function(){a.trigger("cluster.add",{module:"clusters",success:a.routing.push,tagsStore:a.tagsStore,onAddTags:a.showAddTags})},a.handlePagination=function(e){a.fetchData(e)},a.handleRefresh=function(){a.fetchData({page:1})},a.handleSearch=function(e){a.fetchData(e),a.fetchHostData(e)},a.enterCluster=function(){var e=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.routing.push("/clusters/".concat(t,"/overview"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleBindTags=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=a.store.list.data,o=a.state.checked,u=a.hostStore.list.data;a.trigger("cluster.tag.clusterItemTags",{detail:e,defaultValue:t,value:t,success:function(){a.initData(),a.setState({checked:[]})},tagsGroup:a.tagsStore.tagsGroup,store:a.tagsStore,onAddTags:a.showAddTags,tags:r?n.concat(u).filter((function(e){return o.includes(e.name)})):[e]})},a.showAddTags=function(){a.trigger("cluster.tag.add",{success:a.tagsStore.fetchGroupList,store:a.tagsStore})},a.getItemActions=function(e){return[{key:"pen",icon:"pen",text:t("EDIT_INFORMATION"),show:!0,onClick:function(e){a.trigger("resource.baseinfo.edit",{detail:e,modal:A.default,success:a.initData})}},{key:"tag",icon:"add",text:t("ADD_TAGS"),show:"platform-admin"===(0,g.default)(window,"globals.user.globalrole","")||(0,g.default)(window,"globals.user.globalRules.clusters",[]).includes("manage"),onClick:function(e){a.handleBindTags(e,e.tags.map((function(e){return(a.tagsStore.tags||[]).find((function(t){return t.name===e.name}))})).filter(Boolean),!1)}},{key:"edit",icon:"pen",text:t("EDIT_CONFIG"),show:!e.isHost,onClick:function(e){a.trigger("cluster.editConfig",{detail:e,success:a.initData})}},{key:"data",icon:"data",text:t("UPDATE_KUBECONFIG"),show:!e.isHost&&"proxy"!==e.connectionType,onClick:function(e){a.trigger("cluster.updateKubeConfig",{detail:e,success:a.initData})}},{key:"trash",icon:"trash",text:t("REMOVE_CLUSTER"),show:!e.isHost,onClick:function(e){var t;a.trigger("cluster.unbind",{detail:U(U({},e),{},{tags:(null!==(t=e.tags)&&void 0!==t?t:[]).map((function(e){return(a.tagsStore.tags||[]).find((function(t){return t.name===e.name}))})).filter(Boolean)}),success:a.initData})}}].filter((function(e){return e.show}))},a.handleChecked=function(e,t){a.setState((function(r){var n=r.checked;return{checked:t?[].concat((0,l.default)(n),[e]):n.filter((function(t){return t!==e}))}}))},a.handleReset=function(){a.initData(a.state.filters)},a.clearFilter=function(){a.setState({filters:{}}),a.initData()},a.handleSelectAll=function(e){e?a.setState({checked:[].concat((0,l.default)(a.hostStore.list.data.filter((function(e){return e.tags.length<5})).map((function(e){return e.name}))),(0,l.default)(a.store.list.data.filter((function(e){return e.tags.length<5})).map((function(e){return e.name}))))}):a.setState({checked:[]})},a.renderAction=function(){var e,r=a.state,n=r.checked;return r.showCheckbox?(e=0===n.length?{indeterminate:!1,checked:!1}:n.length<a.hostStore.list.data.filter((function(e){return e.tags.length<5})).length+a.store.list.data.filter((function(e){return e.tags.length<5})).length?{indeterminate:!0,checked:!1}:{indeterminate:!1,checked:!0},E.default.createElement("div",{className:j.default.action},E.default.createElement(b.Checkbox,(0,o.default)({},e,{onChange:a.handleSelectAll}),t("SELECT_ALL")),E.default.createElement(b.Button,{disabled:!n.length,onClick:function(){return a.handleBindTags(n.map((function(e){return{name:e}})),[])}},t("ADD_TAGS")),E.default.createElement("div",null,E.default.createElement(b.Button,{onClick:function(){return a.setState({showCheckbox:!1})},type:"flat"},t("DESELECT"))))):null},a.handleColumnsHide=function(e){a.setState({hideColumns:e},(function(){var e=(0,L.safeParseJSON)(localStorage.getItem("hide-columns"),{});e[V]=a.state.hideColumns,localStorage.setItem("hide-columns",JSON.stringify(e))}))},a.handleFilterChange=function(e){a.setState({filters:e}),a.handleSearch(e)},a.store=new T.default,a.hostStore=new T.default,a.tagsStore=new R.default;var c=(0,g.default)((0,L.safeParseJSON)(localStorage.getItem("hide-columns"),{}),V,[]);return a.state={filters:{},checked:[],showCheckbox:!1,hideColumns:c},a}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.initData(),this.fetchTagGroupList()}},{key:"renderList",value:function(){var e=this,r=this.store.list,n=r.data,a=r.page,o=r.total,u=r.limit,i=r.isLoading,c=this.state,l=c.checked,s=c.showCheckbox,d=c.hideColumns,f=this.hostStore.list,p=f.data,m=f.isLoading;if((0,y.default)(n)&&!i&&!m&&(0,y.default)(p)&&(0,y.default)(this.state.filters))return E.default.createElement(k.default,{icon:"cluster",title:t("NO_CLUSTER_TIP"),desc:t("NO_CLUSTER_TIP_DESC"),actions:this.isOperation?E.default.createElement(b.Button,{type:"control",onClick:this.showAddCluster},t("ADD_CLUSTER")):null});if(i||m)return E.default.createElement(b.Loading,{className:j.default.loading});if((0,y.default)(n)&&!i&&!m&&(0,y.default)(p)&&!(0,y.default)(this.state.filters))return E.default.createElement(M.default,{icon:"exclamation",title:t("NO_MATCHING_RESULT_FOUND"),desc:null,action:E.default.createElement("p",null,t("YOU_CAN_TRY_TO"),E.default.createElement("span",{className:j.default.emptyAction,onClick:this.handleReset,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),E.default.createElement("span",{className:j.default.emptyAction,onClick:this.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS")))});if(!i&&(0,y.default)(n)&&!m&&(0,y.default)(p))return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:"h6 margin-b12"},t("CLUSTER_PL")," ",E.default.createElement("span",{className:j.default.total},o)),E.default.createElement("div",{className:j.default.noData},E.default.createElement("img",{src:"/assets/empty-card.svg",alt:""}),E.default.createElement("p",null,t("NO_RESOURCE_FOUND"))));var h=(0,_.default)(n,(function(e){return e.expiredDay}));return E.default.createElement("ul",{className:j.default.cards},!(0,y.default)(p)&&E.default.createElement("div",{className:"margin-b12"},E.default.createElement("div",{className:j.default.title},E.default.createElement("div",{className:"h6"},1===p.length?t("HOST_CLUSTER_TCAP"):t("HOST_CLUSTER_PL_TCAP")),!s&&E.default.createElement("div",{className:j.default.batchManage,onClick:function(){return e.setState((function(){return{showCheckbox:!0}}))}},E.default.createElement(b.Icon,{name:"cogwheel"}),E.default.createElement("span",{className:"margin-l4"},t("BATCH_MANAGE")))),p.map((function(t){return E.default.createElement(C.default,{showCheckbox:s,checked:l.includes(t.name),onChangeChecked:e.handleChecked,key:t.name,data:t,onEnter:e.enterCluster,isOperation:e.isOperation,itemActions:e.getItemActions(t),tagList:e.tagsStore.tags,hideColumns:d})}))),!(0,y.default)(h)&&E.default.createElement("div",null,E.default.createElement("div",{className:"h6"},t("MEMBER_CLUSTER_TCAP_PL")," ",E.default.createElement("span",{className:j.default.total},o)),h.map((function(t){return E.default.createElement(C.default,{key:t.name,showCheckbox:s,checked:l.includes(t.name),onChangeChecked:e.handleChecked,data:t,onEnter:e.enterCluster,isOperation:e.isOperation,itemActions:e.getItemActions(t),tagList:e.tagsStore.tags,hideColumns:d})})),E.default.createElement("div",{className:"text-right margin-t12"},E.default.createElement(w.default,{page:a,total:o,limit:u,onChange:this.handlePagination}))))}},{key:"renderSearch",value:function(){var e=this.state.hideColumns;return E.default.createElement("div",{className:j.default.searchPanel},E.default.createElement(N.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.columns,onChange:this.handleFilterChange,filters:this.state.filters}),E.default.createElement(b.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh,"data-test":"cluster-refresh"}),E.default.createElement(I.default,{className:j.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:this.clusterColumns,value:e,onChange:this.handleColumnsHide}),this.enabledActions.includes("create")&&E.default.createElement(b.Button,{type:"control",onClick:this.showAddCluster,"data-test":"cluster-create"},t("ADD_CLUSTER")))}},{key:"render",value:function(){return E.default.createElement("div",{className:j.default.wrapper},E.default.createElement(S.default,{className:j.default.banner,icon:"cluster",title:t("CLUSTER_MANAGEMENT"),description:t("CLUSTER_DESC"),tabs:this.tabs,tabsActions:this.renderSearch()}),this.renderAction(),this.renderList())}},{key:"authKey",get:function(){return"clusters"}},{key:"tabs",get:function(){return{value:"clusters",onChange:this.handleTabChange,options:[{value:"clusters",label:t("CLUSTER_PL")},"platform-admin"===globals.user.globalrole&&{value:"tags",label:t("CLUSTER_TAGS")}]}}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.authKey})}},{key:"isOperation",get:function(){return this.enabledActions}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"columns",get:function(){var e,r;return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS")},{dataIndex:"group",title:t("TYPE"),search:!0,filters:(null!==(e=this.tagsStore.group)&&void 0!==e?e:[]).map((function(e){return{text:e,value:e}})),renderSearch:function(e){return E.default.createElement("div",{className:"flex"},E.default.createElement("div",{className:(0,P.default)(j.default.clusterGroupTag,(0,c.default)({},j.default[e.key],!0))},t("ENV_".concat(e.label.toUpperCase()))),e.label)}},{dataIndex:"tags",title:t("TAG"),filters:(null!==(r=this.tagsStore.tags)&&void 0!==r?r:[]).map((function(e){return{text:"".concat(e.label,":").concat(e.value),value:e.name}})),search:!0,multi:!0,renderSearch:function(e){return E.default.createElement("div",null,e.label)}}]}},{key:"clusterColumns",get:function(){return[{title:t("CLUSTER_NAME"),dataIndex:"name"},{title:t("NODE_COUNT"),dataIndex:"nodeCount",isHideable:!0},{title:t("KUBERNETES_VERSION"),dataIndex:"version",isHideable:!0},{title:t("PROVIDER"),dataIndex:"provider",isHideable:!0},{title:t("TAG_PL"),dataIndex:"tags",isHideable:!0},{title:t("CREATION_TIME"),dataIndex:"createTime",isHideable:!0}]}}]),n}(E.default.Component))||h)||h)||h;r.default=Y},3721:function(e,t,r){e.exports={searchPanel:"JXASYiU6D6Vir-77S8jPn",search:"_2kZ_paFfCDfS54sVYxO5uP",banner:"Bcl945VYxNKukjCmwWYbH",wrapper:"_1akEUPD--PdefXH7mMFzRh",cards:"_1oOVvfOwX0wdLxlAHCW05L",total:"_23AMlY-PP_B8q-EWe9Nusy",noData:"_1Naiqed2b_IbMjwTPBJalB",title:"_3q94sgDETrKXBctIlXBfsM",batchManage:"IBJR_WKxnOiMS6lYLonFG",loading:"_3jc3swHeh4UBUKxi7Knl9E",action:"_1O2jUyZCK5QvwVHX6HFiz5",clusterGroupTag:"_18G3PV_M9QmHNm_Pe3L0Bx",production:"_22np8xSZf0UCnE96S_GI16",development:"_2U2V93_vAvEaumL9ON_mvg",testing:"_2i8Gsk7p8U7oR1hmzywLgD",demo:"_1GT3lsKPy9_-kGgfpWfFop",emptyAction:"x50n5e8tRjEUlvkd5XuBb"}},3722:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(3723)),p=n(r(3748));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=(0,d.inject)("clusterStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=m(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return this.cluster.detail.isReady?s.default.createElement(f.default,{match:this.props.match}):s.default.createElement(p.default,{store:this.cluster,match:this.props.match})}},{key:"cluster",get:function(){return this.props.clusterStore}}]),r}(s.default.Component))||a)||a;t.default=h},3723:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(4),n(23),n(57),n(24),n(17),n(62);var o,u,i,c,l=a(n(65)),s=a(n(36)),d=a(n(37)),f=a(n(88)),p=a(n(55)),m=a(n(56)),h=a(n(51)),g=a(n(49)),y=(a(n(66)),a(n(0))),v=n(239),_=n(186),E=a(n(801)),O=a(n(3)),b=a(n(814)),S=n(14),k=a(n(3724)),C=a(n(3729)),T=a(n(3731)),D=a(n(3733)),A=a(n(3735)),N=a(n(3737)),R=a(n(3742)),P=a(n(3745)),M=a(n(3747));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var I=(0,v.inject)("clusterStore")(o=(0,v.observer)((u=function(e){(0,p.default)(n,e);var r=w(n);function n(){var e;(0,s.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).state={showMore:!1},(0,l.default)(e,"isExclude",i,(0,f.default)(e)),(0,l.default)(e,"rankModalVisible",c,(0,f.default)(e)),e.showRankModal=function(){e.rankModalVisible=!0},e.hideRankModal=function(){e.rankModalVisible=!1},e.handleExclude=function(){e.isExclude=!e.isExclude},e.handleShowMore=function(){var t=e.state.showMore;e.setState({showMore:!t})},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.cluster.fetchVersion(this.props.match.params)}},{key:"render",value:function(){var e=this.props.match,r=this.cluster.detail,n=this.state.showMore;return y.default.createElement("div",null,y.default.createElement("div",{className:M.default.header},y.default.createElement("div",{className:M.default.title},t("OVERVIEW"))),y.default.createElement("div",{className:M.default.content},y.default.createElement(_.Columns,{className:M.default["margin-t0"]},y.default.createElement(_.Column,{className:"is-8"},y.default.createElement(N.default,{cluster:e.params.cluster,isExclude:this.isExclude}),y.default.createElement(R.default,{clusterDetail:r}),y.default.createElement(P.default,{cluster:e.params.cluster})),y.default.createElement(_.Column,{className:"is-4"},y.default.createElement(E.default,{className:M.default.padding12},y.default.createElement(b.default,{cluster:r,size:"large",noStatus:!0,theme:"light",className:M.default.clusterTitle}),globals.app.isMultiCluster?y.default.createElement(y.default.Fragment,null,y.default.createElement(T.default,{cluster:r,version:this.cluster.version}),n&&y.default.createElement(A.default,{cluster:e.params.cluster}),y.default.createElement("div",{className:(0,O.default)(M.default.showMore),onClick:this.handleShowMore},y.default.createElement(_.Icon,{name:n?"chevron-up":"chevron-down",size:16}),y.default.createElement("span",{className:M.default.text},n?t("FOLD"):t("UNFOLD")))):y.default.createElement(A.default,{cluster:e.params.cluster}),globals.app.isPlatformAdmin&&y.default.createElement(C.default,{cluster:e.params.cluster})),y.default.createElement(E.default,{className:M.default.padding12},y.default.createElement(D.default,{cluster:e.params.cluster,showRankModal:this.showRankModal}))))),y.default.createElement(k.default,{visible:this.rankModalVisible,cluster:e.params.cluster,onCancel:this.hideRankModal}))}},{key:"cluster",get:function(){return this.props.clusterStore}}]),n}(y.default.Component),i=(0,g.default)(u.prototype,"isExclude",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,g.default)(u.prototype,"rankModalVisible",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=u))||o)||o;r.default=I},3724:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=o(n(96)),i=a(n(0)),c=o(n(787)),l=o(n(3725)),s=o(n(3728));function d(e){var r=e.visible,n=void 0===r||r,a=e.onCancel,o=e.type,d=e.cluster,f=(0,i.useState)(!1),p=(0,u.default)(f,2),m=p[0],h=p[1];(0,i.useEffect)((function(){h(n)}),[n]);var g=(0,i.useCallback)((function(){h(!1),null==a||a()}),[]);return i.default.createElement(c.default,{bodyClassName:s.default.body,title:t("RESOURCE_USAGE_RANKING"),visible:m,onCancel:g,fullScreen:!0,hideFooter:!0},i.default.createElement(l.default,{type:o,cluster:d}))}var f=(0,i.memo)(d);r.default=f},3725:function(e,t,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var a,o=n(r(30)),u=n(r(36)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=r(239),d=n(r(1208)),f=n(r(1802)),p=n(r(1130)),m=r(1803);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var v={limit:10,page:1,sort_type:"desc"},_=(0,s.inject)("rootStore")(a=(0,s.observer)(a=function(e){(0,i.default)(r,e);var t=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).sourceMap={node:{store:new d.default(g(g({},v),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/clusters/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new f.default(g(g({},v),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,r){return"/clusters/".concat(e.cluster,"/projects/").concat(r,"/pods/").concat(t)}},project:{store:new p.default(g(g({},v),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/clusters/".concat(e.cluster,"/projects/").concat(t)}}},e}return r}(m.Component))||a)||a;t.default=_},3728:function(e,t,r){e.exports={body:"E0vtK-35j9eQt49Mf6NsA"}},3729:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);n(5),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(4),n(23),n(57),n(17);var u=o(n(36)),i=o(n(37)),c=o(n(55)),l=o(n(56)),s=o(n(51)),d=a(n(0)),f=o(n(789)),p=o(n(790)),m=n(453),h=o(n(3730));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,c.default)(n,e);var r=g(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).handleTool=function(t){window.open(t.currentTarget.dataset.url,t.currentTarget.dataset.title,e.getWindowOpts())},e}return(0,i.default)(n,[{key:"getWindowOpts",value:function(){return(0,m.createCenterWindowOpt)({width:1200,height:800,scrollbars:1,resizable:1})}},{key:"render",value:function(){var e=this.props.cluster;return d.default.createElement(f.default,{title:t("TOOLS"),className:h.default.toolContainer},d.default.createElement("div",{className:h.default.level},d.default.createElement("div",{"data-title":"KubeCtl","data-url":"/terminal/kubectl/".concat(e),onClick:this.handleTool},d.default.createElement(p.default,{icon:"terminal",title:"kubectl",description:t("KUBECTL_DESC")})),d.default.createElement("div",{"data-title":"KubeConfig","data-url":"/clusters/".concat(e,"/kubeConfig"),onClick:this.handleTool},d.default.createElement(p.default,{icon:"data",title:"kubeconfig",description:t("KUBECONFIG_DESC")}))))}}]),n}(d.Component);r.default=y},3730:function(e,t,r){e.exports={toolContainer:"_2Bfr8X-g7qOWhCWvYqdfMP",level:"_7jLDaj4UuqLC0FWLjpwWf"}},3731:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(16),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(28),n(42),n(16),n(4),n(23),n(57),n(17);var u,i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(790)),p=a(n(26)),m=n(239),h=o(n(0)),g=n(52),y=a(n(3732));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var _=(0,m.inject)("rootStore")(u=function(e){(0,l.default)(n,e);var r=v(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).handleClick=function(){var t=e.props,r=t.cluster;t.rootStore.routing.push("/clusters/".concat(r.name,"/visibility"))},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,r=e.cluster,n=e.version;return h.default.createElement("div",{className:y.default.container},h.default.createElement("div",{className:y.default.title},h.default.createElement("p",null,t("BASIC_INFORMATION"))),h.default.createElement("div",{className:y.default.level},h.default.createElement(f.default,{title:(0,g.getDomTitle)(r.provider),description:t("PROVIDER")}),h.default.createElement(f.default,{title:(0,g.getDomTitle)("public"===r.visibility?t("VISIBILITY_PUBLIC"):t("VISIBILITY_PARTIAL")),description:t("CLUSTER_VISIBILITY_SCAP"),onClick:this.handleClick}),h.default.createElement(f.default,{title:(0,g.getDomTitle)(r.kubernetesVersion||n),description:t("KUBERNETES_VERSION")}),h.default.createElement(f.default,{title:(0,g.getDomTitle)((0,p.default)(r,"configz.ksVersion","-")),description:t("KUBESPHERE_VERSION")})))}}]),n}(h.Component))||u;r.default=_},3732:function(e,t,r){e.exports={container:"BVjeWOWAID34-TEF0b_fR",title:"_16Av2PREJGprEr_93DL4X4",level:"_1FOMscQVAI8cyABa4Bk5SV"}},3733:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(11),n(6),n(18),n(48),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(18),n(28),n(48),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var u,i,c,l=a(n(65)),s=a(n(30)),d=a(n(36)),f=a(n(37)),p=a(n(88)),m=a(n(55)),h=a(n(56)),g=a(n(51)),y=a(n(49)),v=(a(n(66)),n(186)),_=a(n(3)),E=a(n(1103)),O=a(n(790)),b=a(n(26)),S=a(n(63)),k=a(n(1161)),C=n(14),T=n(239),D=o(n(0)),A=n(433),N=a(n(1208)),R=a(n(1802)),P=a(n(1130)),M=n(52),w=n(72),I=n(794),L=a(n(3734));function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var z={limit:10,page:1,sort_type:"desc"},V=(0,T.observer)((i=function(e){(0,m.default)(n,e);var r=U(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).sourceMap={node:{store:new N.default(x(x({},z),{},{cluster:e.cluster})),icon:"nodes",name:"node",desc:"host_ip",url:function(t){return"/clusters/".concat(e.cluster,"/nodes/").concat(t)}},pod:{store:new R.default(x(x({},z),{},{cluster:e.cluster})),icon:"pod",name:"pod",desc:"namespace",descLabel:"PROJECTS",url:function(t,r){return"/clusters/".concat(e.cluster,"/projects/").concat(r,"/pods/").concat(t)}},project:{store:new P.default(x(x({},z),{},{cluster:e.cluster})),icon:"project",name:"namespace",desc:"workspace",descLabel:"WORKSPACES",url:function(t){return"/clusters/".concat(e.cluster,"/projects/").concat(t)}}},e.transData=function(r){var n="",a="",o=(0,b.default)(r,e.store.sort_metric,0),u=w.MONITOR_RANK_UNIT_MAP[e.store.sort_metric];return"%"===u?n="".concat((0,I.getValueByUnit)(o,u),"%"):""===u?n=Math.round(100*o)/100:(a=(0,I.getSuitableUnit)(o,u),n=(0,I.getValueByUnit)(o,a)),"".concat(n," ").concat("core"===a?t("CORE_PL"):a)},(0,l.default)(e,"store",c,(0,p.default)(e)),e.state={sourceType:"node",data:[],sortType:"desc",isFold:!0},e.handleChangeSource=function(t){e.setState({sourceType:t}),e.store=e.sourceMap[t].store,e.handleTypeChange("desc")},e.handleChangeMetricType=function(t){e.store.changeSortMetric(t,{sort_type:"desc"}),e.setState({sortType:"desc"})},e.handleTypeChange=function(t){e.setState({sortType:t}),e.store.fetchAll({sort_type:t})},e.renderPanelHeader=function(){var r=e.state.sortType;return D.default.createElement("div",{className:L.default.title},D.default.createElement("div",null,t("RESOURCE_USAGE_RANKING")),D.default.createElement(v.RadioGroup,{mode:"button",value:r,onChange:e.handleTypeChange},D.default.createElement(v.RadioButton,{value:"desc"},D.default.createElement(v.Icon,{name:"sort-descending",size:16})),D.default.createElement(v.RadioButton,{value:"asc"},D.default.createElement(v.Icon,{name:"sort-ascending",size:16}))))},e.renderQos=function(e){return D.default.createElement(v.Tooltip,{content:w.COLOR_QOS[e.qos_class].label},D.default.createElement("span",{style:{marginRight:"4px",minWidth:"16px",height:"16px",lineHeight:"16px",textAlign:"center",borderRadius:"2px",color:w.COLOR_QOS[e.qos_class].color,background:w.COLOR_QOS[e.qos_class].background}},e.qos_class.slice(0,1).toUpperCase()))},e.renderListItems=function(r,n){if((0,S.default)(r))return D.default.createElement(E.default,null);var a=function(r){var a=e.sourceMap[n].descLabel;if(a){var o,u;if("PROJECTS"===a)return D.default.createElement("span",null,(0,M.getDomTitle)(null!==(o="".concat(t(a),": ").concat((0,M.showNameAndAlias)((0,b.default)(r,e.sourceMap[n].desc),"project",{},!0,(function(){return e.forceUpdate()}))))&&void 0!==o?o:"-"));if("WORKSPACES"===a)return D.default.createElement("span",null,(0,M.getDomTitle)(null!==(u="".concat(t(a),": ").concat((0,M.showNameAndAlias)((0,b.default)(r,e.sourceMap[n].desc),"workspace",{},!0)))&&void 0!==u?u:"-"))}return(0,M.getDomTitle)((0,b.default)(r,e.sourceMap[n].desc,"-"))},o=["project"];return D.default.createElement(D.default.Fragment,null,r.map((function(r,u){return D.default.createElement("div",{key:"".concat(r[n],"-").concat(u),className:L.default.listItem},D.default.createElement(v.Icon,{style:{width:52},size:40,className:"margin-r12",name:e.sourceMap[n].icon}),D.default.createElement(O.default,{className:L.default.textBox,title:D.default.createElement("div",{className:(0,_.default)(L.default.text,(0,s.default)({},L.default.noLabel,"master"!==r.role))},r.qos_class&&e.renderQos(r),D.default.createElement(A.Link,{to:e.sourceMap[n].url((0,b.default)(r,e.sourceMap[n].name),(0,b.default)(r,"namespace"))},(0,M.getDomTitle)((0,k.default)(o,(function(e){return e===n}))?(0,M.showNameAndAlias)((0,b.default)(r,e.sourceMap[n].name),n,{},!0,(function(){return e.forceUpdate()})):(0,b.default)(r,e.sourceMap[n].name,"-"))),"master"===r.role&&D.default.createElement("span",{className:L.default.label},t("CONTROL_PLANE"))),description:a(r)}),D.default.createElement("p",{className:L.default.cpu},e.transData(r)))})))},e.toggleFold=function(){e.setState({isFold:!e.state.isFold})},e.showMoreModal=function(){var t,r;null===(t=(r=e.props).showRankModal)||void 0===t||t.call(r)},e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){var e=this.store,r=e.data,n=e.isLoading,a=this.state,o=a.sourceType,u=a.isFold,i=r.length>5,c=u?r.slice(0,5):r;return D.default.createElement("div",{className:L.default.container},this.renderPanelHeader(),D.default.createElement(v.Loading,{spinning:n},D.default.createElement(D.default.Fragment,null,D.default.createElement("div",{className:L.default.header},D.default.createElement(v.Select,{className:L.default.select,value:o,onChange:this.handleChangeSource,options:this.sourceOptions}),D.default.createElement(v.Select,{className:L.default.select,value:this.store.sort_metric,onChange:this.handleChangeMetricType,options:this.options})),D.default.createElement("div",{className:L.default.list,style:{height:i&&!u?"auto":"392px"}},this.renderListItems(c,o),i&&D.default.createElement(v.Button,{className:L.default.fold,icon:u?"chevron-down":"chevron-up",onClick:this.toggleFold},u?t("UNFOLD"):t("FOLD"))),D.default.createElement("div",{className:L.default.more},D.default.createElement(v.Button,{onClick:this.showMoreModal},t("VIEW_MORE"))))))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}},{key:"sourceOptions",get:function(){return[{label:t("NODES"),value:"node"},{label:t("PODS"),value:"pod"},{label:t("PROJECT_PL"),value:"project"}]}}]),n}(D.Component),c=(0,y.default)(i.prototype,"store",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.sourceMap[this.state.sourceType].store}}),u=i))||u;r.default=V},3734:function(e,t,r){e.exports={container:"_2mo2Puhwc8tT6e9PomRdYU",title:"_2WYsLXyHOnbrxXt0OFY1Km",header:"u4rCe6nDLY5vbaq5aXJDQ",select:"_25M1cGJCz3WgAIQhGkQ6JX",list:"RtrNzNpCozOK2jXlZFrPb",listItem:"_3-eBd_RaqO30cf2v7AeZWY",textBox:"_3ODrxke8bqLQHUb7302kOC",text:"_2WxN_xHdXDli_mWcI5oYGV",label:"_3rjIYXMWaltqHcODVaa0ww",noLabel:"_3RSzNTep-_u0G6h5xmtrsE",cpu:"v0DrKUbv1DFqez5KfSlC-",fold:"t2fjcneoLurD1QVIju9nO",more:"_1aPF0hZOOhyo-EPu3G8bIa"}},3735:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(11),n(6),n(87),n(27),n(190),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(6),n(28),n(87),n(42),n(27),n(190),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(17),n(7);var u=a(n(43)),i=a(n(30));n(41);var c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=n(186),g=a(n(790)),y=a(n(26)),v=n(239),_=o(n(0)),E=a(n(988)),O=n(52),b=n(794),S=a(n(3736));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var D={request_latencies_total:"apiserver_request_latencies",request_rate:"apiserver_request_rate",schedule_attempts_count:"scheduler_schedule_attempts"},A=(0,v.observer)(c=function(e){(0,f.default)(n,e);var r=T(n);function n(e){var t;(0,s.default)(this,n),(t=r.call(this,e)).fetchData=(0,l.default)(u.default.mark((function e(){var r,n,a=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},n=C({last:!0},r),e.next=4,t.apiStore.fetchMetrics(C({metrics:[D.request_latencies_total,D.request_rate]},n));case 4:return e.next=6,t.schedulerStore.fetchMetrics(C({metrics:[D.schedule_attempts_count]},n));case 6:case"end":return e.stop()}}),e)}))),t.getSpecificData=function(e){return((0,y.default)(t.metrics,"".concat(D[e],".data.result"))||[]).reduce((function(e,t){return C(C({},e),{},(0,i.default)({},(0,y.default)(t,"metric.result"),(0,y.default)(t,"value[1]",0)))}),{})};var a=e.cluster;return t.apiStore=new E.default({module:"apiserver",cluster:a}),t.schedulerStore=new E.default({module:"scheduler",cluster:a}),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.metrics,r=Number((0,y.default)(e,"".concat(D.request_rate,".data.result[0].value[1]"),0)).toFixed(3),n=(0,b.getValueByUnit)((0,y.default)(e,"".concat(D.request_latencies_total,".data.result[0].value[1]")),"ms"),a=this.getSpecificData("schedule_attempts_count");return _.default.createElement("div",{className:S.default.k8sStatus},_.default.createElement("div",{className:S.default.title},_.default.createElement("p",null,t("KUBERNETES_STATUS"))),_.default.createElement(h.Loading,{spinning:this.schedulerStore.isLoading},_.default.createElement("div",{className:S.default.container},_.default.createElement("div",{className:S.default.level},_.default.createElement(g.default,{title:(0,O.getDomTitle)(t("VALUE_REQUESTS_SECOND",{value:r})),description:t("API_REQUESTS_PER_SECOND")}),_.default.createElement(g.default,{title:(0,O.getDomTitle)("".concat(n," ms")),description:t("API_REQUEST_LATENCY")}),_.default.createElement(g.default,{title:(0,O.getDomTitle)(a.scheduled),description:1===a.scheduled?t("SCHEDULING_OPERATION"):t("SCHEDULING_OPERATIONS")}),_.default.createElement(g.default,{title:(0,O.getDomTitle)(a.unschedulable),description:1===a.unschedulable?t("SCHEDULING_FAILURE"):t("SCHEDULING_FAILURES")})))))}},{key:"metrics",get:function(){var e=this.apiStore.data,t=this.schedulerStore.data;return C(C({},e),t)}}]),n}(_.Component))||c;r.default=A},3736:function(e,t,r){e.exports={k8sStatus:"_165qOBnN9HAs4LrY_LK-d6",title:"_2vFFuGnTwzqjBij8D3BPRc",container:"_20PSSvdZ2gt1lsGGJB4rsS",level:"_2UJuf7ZQGgEclggVm__94Z"}},3737:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(4),n(316),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(4),n(316),n(23),n(57),n(17);var u,i,c,l,s=a(n(65)),d=a(n(36)),f=a(n(37)),p=a(n(88)),m=a(n(55)),h=a(n(56)),g=a(n(51)),y=a(n(49)),v=(a(n(66)),o(n(0))),_=n(239),E=a(n(26)),O=n(186),b=a(n(890)),S=n(14),k=n(794),C=a(n(3738)),T=a(n(3741));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var A={cpu_requests:"cluster_pod_cpu_requests_total",cpu_limits:"cluster_pod_cpu_limits_total",cpu_total:"cluster_cpu_total",cpu_requests_non_master:"cluster_pod_cpu_requests_non_master_total",cpu_limits_non_master:"cluster_pod_cpu_limits_non_master_total",cpu_total_non_master:"cluster_cpu_non_master_total",memory_requests:"cluster_pod_memory_requests_total",memorylimits:"cluster_pod_memory_limits_total",memory_total:"cluster_memory_total",memory_requests_non_master:"cluster_pod_memory_requests_non_master_total",memory_limits_non_master:"cluster_pod_memory_limits_non_master_total",memory_total_non_master:"cluster_memory_non_master_total",namespace_cpu_requests:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits:"cluster_namespace_quota_cpu_limits_hard_total",namespace_cpu_requests_non_master:"cluster_namespace_quota_cpu_requests_hard_total",namespace_cpu_limits_non_master:"cluster_namespace_quota_cpu_limits_hard_total",namespace_memory_requests:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits:"cluster_namespace_quota_memory_limits_hard_total",namespace_memory_requests_non_master:"cluster_namespace_quota_memory_requests_hard_total",namespace_memorylimits_non_master:"cluster_namespace_quota_memory_limits_hard_total"},N=(0,_.observer)((i=function(e){(0,m.default)(n,e);var r=D(n);function n(){var e;(0,d.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).monitorStore=new b.default({cluster:e.props.cluster}),(0,s.default)(e,"resourceType",c,(0,p.default)(e)),(0,s.default)(e,"metriceData",l,(0,p.default)(e)),e.getValue=function(e){return(0,E.default)(e,"value[1]",0)},e.fetchData=function(){e.monitorStore.fetchMetrics({metrics:Object.values(A),last:!0})},e.handleTypeChange=function(t){e.resourceType=t},e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return v.default.createElement("div",{className:T.default.container},v.default.createElement("div",{className:T.default.header},v.default.createElement("div",{className:T.default.title},t("APPLICATION_CLUSTER_QUOTA_STATISTICS")),v.default.createElement(O.RadioGroup,{mode:"button",buttonWidth:110,value:this.resourceType,onChange:this.handleTypeChange,wrapClassName:T.default.radio},v.default.createElement(O.RadioButton,{value:"pod",key:"pod"},t("CONTAINER")),v.default.createElement(O.RadioButton,{value:"project",key:"project"},t("PROJECT")))),v.default.createElement(O.Loading,{spinning:this.monitorStore.isLoading},v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:T.default.usageContainer},v.default.createElement(C.default,{merticType:"cpu",title:t("CPU_QUOTA"),resourceType:this.resourceType,data:this.metricData.cpu}),v.default.createElement(C.default,{merticType:"memory",title:t("MEMORY_QUOTA"),resourceType:this.resourceType,data:this.metricData.memory})))))}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,E.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"metricData",get:function(){var e,t=(0,k.getLastMonitoringData)(this.metrics);return"pod"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[A.cpu_requests_non_master]),limits:this.getValue(t[A.cpu_limits_non_master]),total:this.getValue(t[A.cpu_total_non_master])},memory:{requests:this.getValue(t[A.memory_requests_non_master]),limits:this.getValue(t[A.memory_limits_non_master]),total:this.getValue(t[A.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[A.cpu_requests]),limits:this.getValue(t[A.cpu_limits]),total:this.getValue(t[A.cpu_total])},memory:{requests:this.getValue(t[A.memory_requests]),limits:this.getValue(t[A.memorylimits]),total:this.getValue(t[A.memory_total])}}),"project"===this.resourceType&&(e=this.props.isExclude?{cpu:{requests:this.getValue(t[A.namespace_cpu_requests_non_master]),limits:this.getValue(t[A.namespace_cpu_limits_non_master]),total:this.getValue(t[A.cpu_total_non_master])},memory:{requests:this.getValue(t[A.namespace_memory_requests_non_master]),limits:this.getValue(t[A.namespace_memorylimits_non_master]),total:this.getValue(t[A.memory_total_non_master])}}:{cpu:{requests:this.getValue(t[A.namespace_cpu_requests]),limits:this.getValue(t[A.namespace_cpu_limits]),total:this.getValue(t[A.cpu_total])},memory:{requests:this.getValue(t[A.namespace_memory_requests]),limits:this.getValue(t[A.namespace_memorylimits]),total:this.getValue(t[A.memory_total])}}),e}}]),n}(v.Component),c=(0,y.default)(i.prototype,"resourceType",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"pod"}}),l=(0,y.default)(i.prototype,"metriceData",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),u=i))||u;r.default=N},3738:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);n(187),n(6),n(10),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.merticType,n=void 0===r?"cpu":r,a=e.title,o=e.data,p=e.resourceType,m=(0,i.useState)({requests:0,limits:0,total:0}),h=(0,u.default)(m,2),g=h[0],y=h[1],v=(0,s.getSuitableUnit)(o.total||o.limits||o.requests||0,n);(0,i.useEffect)((function(){var e={};Object.keys(o).forEach((function(t){e[t]=(0,s.getValueByUnit)(o[t],v)})),y(e)}),[o]);var _=function(e,t){return e<t?0:(100*e-100*t)/100},E=(0,i.useMemo)((function(){return"cpu"===n?[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:g.requests,unit:"core"},{name:t("QUOTA_TOTAL"),value:_(g.total,g.requests),unit:"core"}]},{dataKey:"value",innerRadius:34,outerRadius:46,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:g.limits,unit:"core"},{name:t("QUOTA_TOTAL"),value:_(g.total,g.limits),unit:"core"}]}]:[{dataKey:"value",innerRadius:48,outerRadius:60,colors:["#329DCE","#EFF4F9"],data:[{name:t("QUOTA_REQUEST"),value:g.requests,unit:v},{name:t("QUOTA_TOTAL"),value:_(g.total,g.requests),unit:v}]},{dataKey:"value",innerRadius:34,outerRadius:46,colors:["#F5A623","#EFF4F9"],data:[{name:t("QUOTA_LIMIT"),value:g.limits,unit:v},{name:t("QUOTA_TOTAL"),value:_(g.total,g.limits),unit:v}]}]}),[g,n]),O=E.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return i.default.createElement("div",{className:f.default.container},i.default.createElement("div",{className:f.default.flexContainer},i.default.createElement("div",{className:f.default.chartContainer},i.default.createElement("div",{className:f.default.title},a),i.default.createElement("div",{className:f.default.chart},O?i.default.createElement("div",{className:f.default.noData},i.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),i.default.createElement("p",null,t("NO_DATA"))):i.default.createElement(i.default.Fragment,null,i.default.createElement(c.MultiPie,{dataList:E,total:g.total,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 178px)"},noTooltip:!0}),i.default.createElement(l.Icon,{className:f.default.icon,name:n,size:32})))),i.default.createElement(d.default,{resourceType:p,mertic:g,unit:v})))},n(187),n(6),n(10),n(4),n(7);var u=o(n(96)),i=a(n(0)),c=n(798),l=n(186),s=n(794),d=o(n(1804)),f=o(n(3740))},3740:function(e,t,r){e.exports={container:"_1FfLhAgROftyj0IuUcQI4e",flexContainer:"_3XEnA-pHA2CNFrAV1LnWJF",title:"_2CBIhq8TuoMF1r-JDYlLGA",noData:"_1_444QYPwve2sPOoNmVVWH",chartContainer:"_1G7CGL6N9PpdMV6H4PvpwD",chart:"_3axU54fLqK1Opc2i0QIVAa",icon:"_1HKFmOmlSy27H88Xcdndw-"}},3741:function(e,t,r){e.exports={container:"gGKFTd29XBoqYhN47F0EN",header:"psEkXLBc8Tknh1fcEwq0R",title:"nnAGEVZwoSGU5FPr3MHhY",radioLabel:"_1rANBkB5gBrmSxmTvCrZES",radio:"_1sGDf57rraXGzxVxlyt5ka",usageContainer:"_3GkrBwSCVOVOLT3cNmYHXR"}},3742:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(18),n(16),n(190),n(9),n(13),n(10),n(4),n(316),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(18),n(28),n(42),n(16),n(190),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(436),n(22),n(23),n(57),n(17),n(7);var o=a(n(315)),u=a(n(43)),i=a(n(30));n(41);var c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=n(186),y=a(n(890)),v=n(798),_=n(239),E=a(n(3)),O=a(n(26)),b=n(52),S=n(794),k=a(n(1402)),C=a(n(3744));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var N={cpu_usage:"cluster_cpu_usage",cpu_total:"cluster_cpu_total",cpu_utilisation:"cluster_cpu_utilisation",gpu_usage:"cluster_gpu_usage",gpu_total:"cluster_gpu_total",gpu_utilization:"cluster_gpu_utilization",gpu_memory_utilization:"cluster_gpu_memory_utilization",gpu_memory_usage:"cluster_gpu_memory_usage",gpu_memory_total:"cluster_gpu_memory_total",memory_usage:"cluster_memory_usage_wo_cache",memory_total:"cluster_memory_total",memory_utilisation:"cluster_memory_utilisation",disk_size_usage:"cluster_disk_size_usage",disk_size_capacity:"cluster_disk_size_capacity",disk_utilisation:"cluster_disk_size_utilisation",pod_count:"cluster_pod_running_count",pod_capacity:"cluster_pod_quota"},R=(0,_.observer)(c=function(e){(0,f.default)(n,e);var r=A(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).state={active:"cpu",params:{times:10,step:"48m"}},e.monitorStore=new y.default({cluster:e.cluster}),e.fetchData=function(){var t=(0,l.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(D(D({metrics:Object.values((0,b.hideGPUByLicense)(N,e.cluster))},e.state.params),r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return(0,O.default)(e,"value[1]",0)},e.handleSelect=function(t){e.setState({active:t})},e.renderTabItem=function(r){var n=r.type,a=r.icon,o=r.name,u=r.unit,c=r.used,l=r.total,s=r.unitType,d=(0,S.getSuitableUnit)(l||c,s)||u,f=(0,S.getValueByUnit)(c,d),p=(0,S.getValueByUnit)(l,d),m="core"===d?"CORE_PL":d,y=e.state.active===n,v=f&&p?f/p*100:0;return h.default.createElement("div",{className:(0,E.default)(C.default.tabItem,(0,i.default)({},C.default.checked,y)),key:n,onClick:function(){return e.handleSelect(n)}},h.default.createElement("div",{className:C.default.label},h.default.createElement(g.Icon,{name:a,size:20,type:y?"light":"dark"}),h.default.createElement("span",null,t(o)),h.default.createElement("span",null,t(m))),h.default.createElement("div",{className:C.default.value},h.default.createElement("span",null,f),h.default.createElement("span",null,"/",p)),h.default.createElement("div",{className:C.default.progress},h.default.createElement(k.default,{className:(0,E.default)((0,i.default)({},C.default.progressActive,y)),percent:parseFloat(v.toFixed(2)),content:h.default.createElement("div",{className:C.default.tabItem_tooltip},h.default.createElement("div",null,t(o)),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("USED_VALUE_CORES_PERCENTAGE",{value:f,percentage:0!==v?"".concat(v.toFixed(2),"%"):"0%"}):t("USED_VALUE_UNIT_PERCENTAGE",{value:f,unit:d,percentage:0!==v?"".concat(v.toFixed(2),"%"):"0%"})),h.default.createElement("p",null,h.default.createElement("i",null),"core"===d?t("TOTAL_VALUE_CORES",{value:p}):t("TOTAL_VALUE_UNIT",{value:p,unit:d})))})))},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(){var e=this,t=this.renderChartOption.filter((function(t){return t.category===e.state.active}))[0],r={key:t.title,width:"100%",height:"100%"},n=(0,S.getAreaChartOps)(t);return h.default.createElement(v.SimpleArea,(0,o.default)({},r,n))}},{key:"render",value:function(){var e=this,r=this.monitorStore.isLoading;return h.default.createElement("div",{className:C.default.container},h.default.createElement("div",{className:C.default.header},h.default.createElement("div",{className:C.default.title},t("NODE_RESOURCE_USAGE"))),h.default.createElement(g.Loading,{spinning:r},h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:C.default.tabs},h.default.createElement("div",{className:C.default.tabsHeader},this.tabOptions.map((function(t){return e.renderTabItem(t)}))),h.default.createElement("div",{className:C.default.tabsBody})),h.default.createElement("div",{className:C.default.chartContainer},this.renderChart()))))}},{key:"cluster",get:function(){return this.props.clusterDetail.name}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"showLicenseTip",get:function(){var e;return(null===(e=globals.licenseInfo)||void 0===e?void 0:e.showLicenseTip)||!(0,O.default)(globals,'ksConfig["gpu.monitoring"]',!1)}},{key:"tabOptions",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics),t=[{icon:"cpu",type:"cpu",name:"CPU",unitType:"cpu",used:this.getValue(e[N.cpu_usage]),total:this.getValue(e[N.cpu_total])},{icon:"memory",type:"memory",name:"MEMORY",unitType:"memory",used:this.getValue(e[N.memory_usage]),total:this.getValue(e[N.memory_total])},{icon:"gpu",type:"gpu",name:"GPU",used:this.getValue(e[N.gpu_usage]),total:this.getValue(e[N.gpu_total])},{icon:"computing",type:"gpu_merrory",name:"GPU_MEMORY",unit:"Gi",unitType:"memory",used:this.getValue(e[N.gpu_memory_usage]),total:this.getValue(e[N.gpu_memory_total])},{icon:"storage",type:"storage",name:"DISK",unitType:"disk",used:this.getValue(e[N.disk_size_usage]),total:this.getValue(e[N.disk_size_capacity])},{icon:"pod",type:"pod",name:"POD_PL",unit:"",used:this.getValue(e[N.pod_count]),total:this.getValue(e[N.pod_capacity])}];return(0,b.hideGPUByLicense)(t,this.cluster)}},{key:"renderChartOption",get:function(){var e=[{key:"CPU_USAGE",type:"utilisation",renderTitle:function(){return t("CPU_UTILISATION_TCAP")},category:"cpu",unit:"%",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.cpu_utilisation,".data.result"))},{key:"MEMORY_USAGE",type:"utilisation",renderTitle:function(){return t("MEMORY_UTILISATION_TCAP")},category:"memory",unit:"%",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.memory_utilisation,".data.result"))},{key:"GPU_USAGE",type:"utilisation",renderTitle:function(){return t("GPU_UTILIZATION")},category:"gpu",unit:"%",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.gpu_utilization,".data.result"))},{key:"GPU_MEMORY_USAGE",renderTitle:function(){return t("GPU_MEMORY_UTILIZATION")},type:"utilisation",category:"gpu_merrory",unit:"%",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.gpu_memory_utilization,".data.result"))},{key:"DISK_USAGE",type:"utilisation",renderTitle:function(){return t("DISK_SIZE_UTILISATION_TCAP")},category:"storage",unit:"%",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.disk_utilisation,".data.result"))},{key:"POD_COUNT",title:"POD_COUNT",category:"pod",unit:"",legend:["VALUE"],data:(0,O.default)(this.metrics,"".concat(N.pod_count,".data.result"))}];return(0,b.hideGPUByLicense)(e,this.cluster)}}]),n}(h.default.Component))||c;r.default=R},3744:function(e,t,r){e.exports={container:"_3AfNjV_69JEh6a-Ki6__ME",header:"_1KlUEi5CK7QfxyrYRm_PvN",title:"wxv8jUlnhu24IEsJ8B4bV",timeSelector:"_3LIahHmW7JD-ASZ0_IvGdl",tabs:"_3fZrB3MhmR4IMkudBgI2Hb",tabsHeader:"_16NEdMhyLw7u5fkRrSHGXu",tabItem:"_1VUPfd9JbUdb-RWTcl3s8Y",label:"_1g96nJUyAxnNVHQpEt-Tu4",value:"_102usDIj3RFrFQc0qzmjkL",progress:"_1jJ2mvEYx3w8f0WNYtBgUn",progressActive:"_1rMf9_vH9PUUNoTdhRT1CY",checked:"BmAIrTk8YXWlhoCQ3W2RT",chartContainer:"_2CnJeYKVn7aTV8NVZDMLte",tabItem_tooltip:"_3AgVoyIMKNanAI4WqrWE-p"}},3745:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(187),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(316),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(187),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(436),n(22),n(23),n(57),n(17),n(7);var o=a(n(315)),u=a(n(43)),i=a(n(30));n(41);var c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=n(239),y=a(n(890)),v=n(186),_=n(798),E=a(n(3)),O=a(n(26)),b=a(n(63)),S=n(794),k=n(14),C=a(n(3746));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var N={oomkilled:"cluster_pod_oomkilled_count",pending:"cluster_pod_pending_count",evict:"cluster_pod_evicted_count",pod_total:"cluster_pod_count",pod_running:"cluster_pod_running_count",pod_pending:"cluster_pod_pending_count",pod_succeeded:"cluster_pod_succeeded_count",pod_failed:"cluster_pod_failed_count",pod_unknown:"cluster_pod_unknown_count",guaranteed:"cluster_pod_qos_guaranteed_count",burstable:"cluster_pod_qos_burstable_count",bestEffort:"cluster_pod_qos_besteffort_count"},R=(0,g.observer)(c=function(e){(0,f.default)(n,e);var r=A(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).monitorStore=new y.default({cluster:e.props.cluster}),e.state={params:{times:10,step:"48m"}},e.fetchData=function(){var t=(0,l.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.monitorStore.fetchMetrics(D(D({metrics:Object.values(N)},e.state.params),r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getValue=function(e){return parseFloat((0,O.default)(e,"value[1]",0))},e.renderChartTitle=function(e){var r=e.icon,n=e.imgIcon,a=e.used,o=e.title;return h.default.createElement("div",{className:C.default.chartTitle},n?h.default.createElement("img",{src:n}):h.default.createElement(v.Icon,{name:r,size:40}),h.default.createElement("div",{className:C.default.chartInfo},h.default.createElement("p",null,a),h.default.createElement("p",null,t(o))))},e.renderTooltipQos=function(){var e=h.default.createElement("div",{className:C.default.qosContent},h.default.createElement("p",null,t.html("QOS_GUARANTEED")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BURSTABLE")),h.default.createElement("br",null),h.default.createElement("p",null,t.html("QOS_BESTEFFORT")));return h.default.createElement(v.Tooltip,{content:e},h.default.createElement(v.Icon,{name:"question",size:16}))},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderChart",value:function(e){var r=(0,S.getAreaChartOps)(e);return(0,b.default)(r.data)?h.default.createElement("p",{className:C.default.noData},t("NO_DATA")):h.default.createElement(_.MediumArea,(0,o.default)({},r,{noTitle:!0,top:4,height:48,width:"100%",key:e.title}))}},{key:"renderPie",value:function(e){var t=e.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement(h.default.Fragment,null,t&&h.default.createElement("div",{className:C.default.emptyPie},h.default.createElement("div",null)),h.default.createElement(_.MultiPie,{legendClassName:C.default.legendClassName,dataList:e.dataList,wrapperStyle:{display:"flex",left:"166px",justifyContent:"space-between",width:"calc(100% - 166px)"}}))}},{key:"render",value:function(){var e=this,r=this.monitorStore.isLoading;return h.default.createElement("div",{className:C.default.container},h.default.createElement("div",{className:C.default.header},h.default.createElement("div",{className:C.default.title},t("POD_PL"))),h.default.createElement(v.Loading,{spinning:r},h.default.createElement("div",{className:C.default.flexcontainer},h.default.createElement("div",{className:(0,E.default)(C.default.chartbox,C.default.status)},this.renderPieOption.map((function(r,n){var a=r.dataList.every((function(e){return e.data.every((function(e){return 0===e.value}))}));return h.default.createElement("div",{className:(0,E.default)(C.default.item_pie,C.default.item),key:n},h.default.createElement("div",{className:C.default.pie_title},t(r.title),h.default.createElement("span",{className:C.default.pie_title_tooltip},"QoS"===r.title&&e.renderTooltipQos())),h.default.createElement("div",{className:C.default.pie_box},a?h.default.createElement("div",{className:C.default.pieNoData},h.default.createElement("img",{src:"/assets/doughnut_chart_duotone.svg"}),h.default.createElement("p",null,t("NO_DATA"))):h.default.createElement(h.default.Fragment,null,e.renderPie(r),h.default.createElement("div",{className:C.default.summary},h.default.createElement("p",null,r.total),h.default.createElement("p",null,t("ALL"))))))}))),h.default.createElement("div",{className:C.default.chartbox},this.renderChartOption.map((function(t,r){return h.default.createElement("div",{className:(0,E.default)(C.default.item,C.default.areaChartItem),key:r},e.renderChartTitle(t),h.default.createElement("div",{className:C.default.chartBox},e.renderChart(t)))}))))))}},{key:"metrics",get:function(){return(0,k.toJS)(this.monitorStore.data)}},{key:"renderChartOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{category:"oomkilled",title:"OOM_KILL_PODS",icon:"error",unit:"",legend:["OOM_KILL_PODS"],data:(0,O.default)(this.metrics,"".concat(N.oomkilled,".data.result")),used:this.getValue(e[N.oomkilled])},{category:"pending",title:"PENDING_PODS",icon:"history-duotone",unit:"",legend:["PENDING_PODS"],data:(0,O.default)(this.metrics,"".concat(N.pending,".data.result")),used:this.getValue(e[N.pending])},{category:"evict",title:"EVICTED_PODS",unit:"",legend:["EVICTED_PODS"],icon:"logout-right-duotone",data:(0,O.default)(this.metrics,"".concat(N.evict,".data.result")),used:this.getValue(e[N.evict])}]}},{key:"renderPieOption",get:function(){var e=(0,S.getLastMonitoringData)(this.metrics);return[{title:"POD_STATUS",total:this.getValue(e[N.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#F5A623","#79879C","#CA2621","#E3E9EF","#EFF4F9"],data:[{name:t("RUNNING"),value:this.getValue(e[N.pod_running])},{name:t("PENDING"),value:this.getValue(e[N.pod_pending])},{name:t("COMPLETED"),value:this.getValue(e[N.pod_succeeded])},{name:t("FAILED"),value:this.getValue(e[N.pod_failed])},{name:t("UNKNOWN"),value:this.getValue(e[N.pod_unknown])}]}]},{title:"QoS",total:this.getValue(e[N.pod_total]),dataList:[{dataKey:"value",innerRadius:45,outerRadius:60,colors:["#55BC8A","#329DCE","#F5A623","#EFF4F9"],data:[{name:"Guaranteed",value:this.getValue(e[N.guaranteed])},{name:"Burstable",value:this.getValue(e[N.burstable])},{name:"BestEffort",value:this.getValue(e[N.bestEffort])}]}]}]}}]),n}(h.default.Component))||c;r.default=R},3746:function(e,t,r){e.exports={container:"_1KXDp6aGvTp3B_76jde76g",flexcontainer:"aa63oPBQk4YccjmIB7Tf9",header:"p0KevOJsuDpyFtpWy-Pmd",title:"_3lf4VoLw6TPRzGqQQqqXAy",chartbox:"_3rWJ6cDNQm7VQRaU1blM4C",status:"_3MNES7gfSxsOPIJfE685LF",item:"_1Kvjm9p_EFdynInmm0cLW-",chartTitle:"_187CCI_SZXINFXBWbawtoj",chartInfo:"_1yqGhF3ibLvdKq8jQ74m5Z",areaChartItem:"_2P17qQOGvnv6I_q2AIevQu",chartBox:"TIDiE53zz07X2qn4FWfbn",noData:"_2OYrYrcLQRhPNLGAvXK7h5",item_pie:"_3VMERMVFngxvFJA_26CjSZ",pie_title:"_3O6cFbvaVvKT56AbX_QwpL",pie_title_tooltip:"_1YotQOmdCOkQBRQYot574B",pie_box:"_3QATPh7y3GIIi3exaO4_5Y",legendClassName:"_3RmUw3Nkybn2574L0Z3tpa",pieNoData:"bOPidX29Du8n9Vdf6Rkbn",summary:"_3ki2HjqdR-jG5-iwK7mveQ",emptyPie:"_1tzQdq-cW2zRl4MEvRpmfk"}},3747:function(e,t,r){e.exports={header:"_3TIkcixsbk2rfOzvmSglll",title:"_2If3z4jEFyrdpEwSOz9Cd0",operator:"_2d8HFTvIeFbq48T_2_INiL",indicator:"_1LeQtqOY9e2t9Fxhx4vfwN",disabled:"_2u2IPfud0Pkfs92q2QRihf","margin-t0":"_3y79Yhcw03152ck3knp7Sm",padding12:"_1oddtKEmBPr2Q78MWdiz8P",showMore:"_2k_QK2HXB_eu_JnMgIqnk0",text:"_1zkshTewK41i-RbRj0OILz",clusterTitle:"Bzo6m09_knXXEuHuzNYwz",content:"_3l_a0hgmxdE69BM0ImrALf"}},3748:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var u,i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(26)),p=o(n(0)),m=n(14),h=n(239),g=n(186),y=a(n(789)),v=a(n(790)),_=a(n(841)),E=a(n(240)),O=n(453),b=n(791),S=a(n(1052)),k=a(n(3749)),C=a(n(3754));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var D=(0,h.inject)("rootStore")(u=(0,h.observer)(u=(0,b.trigger)(u=function(e){(0,l.default)(n,e);var r=T(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).kubekeyClusterStore=new S.default,e.websocket=e.props.rootStore.websocket,e.initWebsocket=function(){var t=e.props,r=t.store,n=t.match,a=r.getWatchUrl({name:n.params.cluster});a&&(e.websocket.watch(a),e.disposer=(0,m.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&r.fetchDetail(r.detail)})))},e.handleCopy=function(){(0,O.copyToClipboard)((0,m.toJS)(e.props.store.agent)),E.default.success({content:t("COPY_SUCCESSFUL")})},e.showEditYAML=function(){var t=e.kubekeyClusterStore;e.trigger("resource.yaml.edit",{store:t,detail:(0,m.toJS)(t.detail)})},e.rerun=function(){e.kubekeyClusterStore.patch(e.kubekeyClusterStore.detail,{spec:{rerunTrigger:(new Date).getTime()}})},e.handleMenuClick=function(t,r){switch(r){case"edit-yaml":e.showEditYAML();break;case"rerun":e.rerun()}},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.store.detail,t=e.name,r=e.conditions;"True"===(0,f.default)(r,"Initialized.status")&&this.props.store.fetchAgent({cluster:t}),this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"renderMenu",value:function(){return p.default.createElement(g.Menu,{onClick:this.handleMenuClick},p.default.createElement(g.Menu.MenuItem,{key:"edit-yaml"},p.default.createElement(g.Icon,{name:"pen"})," ",t("EDIT_YAML")),p.default.createElement(g.Menu.MenuItem,{key:"rerun"},p.default.createElement(g.Icon,{name:"refresh"})," ",t("RERUN")))}},{key:"render",value:function(){var e=this.props.store,r=e.detail,n=e.isAgentLoading,a=e.agent,o=r.kkName,u=r.conditions,i=r.connectionType;return"False"===(0,f.default)(u,"Initialized.status")?p.default.createElement(y.default,null,p.default.createElement("div",{className:C.default.title},p.default.createElement(g.Loading,{size:28}),p.default.createElement(v.default,{title:t("CLUSTER_INIT_FAILED"),description:(0,f.default)(u,"Initialized.reason")}))):o?p.default.createElement(y.default,{className:C.default.wrapper},p.default.createElement("div",{className:C.default.title},p.default.createElement(v.default,{icon:"cluster",title:t("CREATING_CLUSTER"),description:t.html("CREATING_CLUSTER_DESC")}),p.default.createElement("div",{className:C.default.action},p.default.createElement(g.Dropdown,{theme:"dark",content:this.renderMenu(),placement:"bottomRight"},p.default.createElement(g.Button,{type:"flat",icon:"more"})))),p.default.createElement(k.default,{name:o,store:this.kubekeyClusterStore})):p.default.createElement(y.default,{className:C.default.wrapper},p.default.createElement("div",{className:C.default.title},p.default.createElement(g.Loading,{size:28}),p.default.createElement(v.default,{title:t("WAIT_FOR_CLUSTER"),description:t("WAIT_FOR_CLUSTER_DESC")})),"proxy"===i&&p.default.createElement("div",{className:C.default.content},p.default.createElement("div",{className:C.default.card},p.default.createElement(v.default,{title:t.html("CLUSTER_AGENT_TIP_1")})),p.default.createElement("div",{className:C.default.card},p.default.createElement(v.default,{className:"margin-b12",title:t.html("CLUSTER_AGENT_TIP_2")}),p.default.createElement(g.Button,{className:C.default.copy,onClick:this.handleCopy},t("COPY")),p.default.createElement(g.Loading,{spinning:n},a?p.default.createElement(_.default,{mode:"yaml",className:C.default.editor,options:this.editOptions,value:a}):null)),p.default.createElement("div",{className:C.default.card},p.default.createElement(v.default,{title:t.html("CLUSTER_AGENT_TIP_3"),description:t.html("CLUSTER_AGENT_TIP_3_DESC")}))),o&&p.default.createElement(k.default,{name:o}))}},{key:"editOptions",get:function(){return{width:"100%",height:"100%",readOnly:!0}}}]),n}(p.Component))||u)||u)||u;r.default=D},3749:function(e,t,r){"use strict";r(15);var n=r(20),a=r(157);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var o,u=n(r(36)),i=n(r(37)),c=n(r(55)),l=n(r(56)),s=n(r(51)),d=a(r(0)),f=r(14),p=r(239),m=n(r(325)),h=n(r(3750)),g=n(r(3752));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var v=(0,p.observer)(o=function(e){(0,c.default)(r,e);var t=y(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).store=e.props.store,e.websocket=new m.default,e.initWebsocket=function(){var t=e.props.name;if(t){var r=e.store.getWatchUrl({name:t});r&&(e.websocket.watch(r),e.disposer=(0,f.reaction)((function(){return e.websocket.message}),(function(t){"MODIFIED"!==t.type&&"ADDED"!==t.type||(e.store.detail=e.store.mapper((0,f.toJS)(t.object)))})))}},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.websocket.close(),this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.store.detail;return d.default.createElement("div",{className:"padding-12"},d.default.createElement(h.default,{detail:e}),d.default.createElement(g.default,{detail:e}))}}]),r}(d.Component))||o;t.default=v},3750:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);n(5),n(18),n(4),n(23),n(24),n(17),n(64),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(18),n(42),n(4),n(23),n(57),n(24),n(17),n(64);var u=o(n(30)),i=o(n(36)),c=o(n(37)),l=o(n(55)),s=o(n(56)),d=o(n(51)),f=a(n(0)),p=o(n(26)),m=o(n(3)),h=n(186),g=n(1805),y=o(n(3751));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var _=function(e){(0,l.default)(n,e);var r=v(n);function n(){return(0,i.default)(this,n),r.apply(this,arguments)}return(0,c.default)(n,[{key:"getBarLength",value:function(e){if(0===e.length)return"20px";var t=e.length-1,r=e[t].status;return"calc(".concat(20*t,"% - ").concat(24*t-(r?80:60),"px)")}},{key:"render",value:function(){var e=(0,p.default)(this.props.detail,"status.Conditions",[]);return f.default.createElement("div",{className:y.default.wrapper},f.default.createElement("div",{className:y.default.card},f.default.createElement("div",{className:y.default.title},t("CLUSTER_CREATION_PROGRESS")," ",f.default.createElement(h.Tooltip,{content:t("CLUSTER_CREATION_PROGRESS_TIP")},f.default.createElement(h.Icon,{name:"question"}))),f.default.createElement("div",{className:y.default.progress},f.default.createElement("div",{className:y.default.bar},f.default.createElement("div",{className:y.default.colorBar,style:{width:this.getBarLength(e)}})),f.default.createElement("div",{className:y.default.dots},g.CLUSTER_CREATING_STEPS.map((function(r,n){return f.default.createElement("div",{key:r,style:{left:"".concat(20*n,"%")}},f.default.createElement("div",{className:(0,m.default)(y.default.circle,(0,u.default)({},y.default.checked,n<=e.length-1))},n<=e.length-1&&((0,p.default)(e,"[".concat(n,"].status"))?f.default.createElement(h.Icon,{name:"check",size:14,type:"light"}):f.default.createElement(h.Icon,{name:"dot",size:14,type:"light"}))),f.default.createElement("div",null,t(r.toUpperCase().replace(/\s+/g,"_"))))}))))))}}]),n}(f.Component);r.default=_},3751:function(e,t,r){e.exports={wrapper:"xYCZzciHY43vhVTrp7xSh",card:"_2kmqpwwfGMsHH9oJWvLCE3",title:"_3MTBbVd_VKS-expBXUCKaT",progress:"_1mVqv7Bvf0EM6_nde2Kyoc",bar:"D50q03_8jlQUkGn4-ArPR",colorBar:"_3ZgBAbIKm1KQvhHUfK1aOp",dots:"rqHnXC7ewOYA30eJNVDPX",circle:"kdmVG3uMIdl6SzCY33nRO",checked:"_3a8-eYwYQuiJ6UzAKAsl3X"}},3752:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(18),n(4),n(23),n(24),n(17),n(62),n(64),n(136),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(18),n(42),n(4),n(23),n(57),n(24),n(17),n(62),n(64);var u,i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=o(n(0)),m=a(n(3)),h=n(14),g=n(239),y=a(n(26)),v=a(n(63)),_=a(n(790)),E=a(n(1069)),O=a(n(318)),b=a(n(325)),S=a(n(1041)),k=n(72),C=n(1805),T=a(n(3753));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var A=(0,g.observer)(u=function(e){(0,s.default)(n,e);var r=D(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).watchLogs=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo");t.containerStore.watchLogs({namespace:e.namespace,podName:(0,y.default)(e,"pods[0].name"),container:(0,y.default)(e,"pods[0].containers[0].name"),timestamps:!0,follow:!0},t.scrollToBottom)},t.watchJob=function(){var e=(0,y.default)(t.props.detail,"status.jobInfo"),r=t.workloadStore.getWatchUrl(e);r&&(t.websocket.watch(r),t.jobDisposer=(0,h.reaction)((function(){return t.websocket.message}),(function(e){"MODIFIED"!==e.type&&"ADDED"!==e.type||(t.workloadStore.detail=t.workloadStore.mapper((0,h.toJS)(e.object)))})))},t.handleToggle=function(){t.setState((function(e){return{showContent:!e.showContent}}))},t.scrollToBottom=function(){var e=t.logRef.current;e&&(e.scrollTop=e.scrollHeight)},t.state={showContent:!1},t.logRef=p.default.createRef(),t.workloadStore=new O.default("jobs"),t.containerStore=new S.default,t.websocket=new b.default,t.jobNameDisposer=(0,h.when)((function(){return!(0,v.default)((0,y.default)(t.props.detail,"status.jobInfo.name"))}),(function(){return t.watchJob()})),t.podNameDisposer=(0,h.when)((function(){return!(0,v.default)((0,y.default)(t.props.detail,"status.jobInfo.pods[0].name"))}),(function(){return t.watchLogs()})),t}return(0,l.default)(n,[{key:"componentWillUnmount",value:function(){this.websocket.close(),this.jobDisposer&&this.jobDisposer(),this.jobNameDisposer&&this.jobNameDisposer(),this.podNameDisposer&&this.podNameDisposer(),this.containerStore.stopWatchLogs()}},{key:"renderTitle",value:function(){var e=this.state.showContent,r=(0,y.default)(this.props.detail,"status.Conditions",[]),n=C.CLUSTER_CREATING_STEPS[Math.max(r.length-1,0)],a=(0,h.toJS)(this.workloadStore.detail),o=a.startTime?p.default.createElement(E.default,{data:a,module:"jobs"}):"-";return p.default.createElement("div",{className:(0,m.default)(T.default.title,(0,i.default)({},T.default.isOpen,e)),onClick:this.handleToggle},p.default.createElement(_.default,{icon:"log",title:t("LOGS"),description:t("CURRENT_STEP",{step:t(n.toUpperCase().replace(/\s+/g,"_"))})}),p.default.createElement(_.default,{title:o,description:t("STATUS")}))}},{key:"renderContent",value:function(){var e=this.containerStore.logs.data,r=this.state.showContent,n=(0,v.default)(e)?t("FETCHING_LOGS"):e,a=String(n).replace(/\\r\\n/g,"\n").split("\n");return p.default.createElement("div",{className:(0,m.default)(T.default.content,(0,i.default)({},T.default.visible,r))},p.default.createElement("div",{className:T.default.logs,ref:this.logRef},a.map((function(e,t){var r=e.match(k.PATTERN_UTC_TIME),n=r?r[0]:t,a=r?e.replace(r[0],""):e;return p.default.createElement("p",{key:n,dangerouslySetInnerHTML:{__html:a}})}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:T.default.wrapper},this.renderTitle(),this.renderContent())}}]),n}(p.Component))||u;r.default=A},3753:function(e,t,r){e.exports={wrapper:"_1ZYGr32d6j_R5baIgXQazX",title:"_2ZpzJeyVoDWjVKxqwHGm3g",isOpen:"jTlJLDldR-XG-iyh-mjK3",content:"_3f-fp8mhWq2tAQ_YVhTLKe",visible:"_28OOucN0W4PlaBPh8Ght1Q",logs:"_3ic5zBiEYnODK3W48mXCcw"}},3754:function(e,t,r){e.exports={wrapper:"R9IBUiaF5PkTbPyP6RWNd",title:"_1JQ4zn_Cw-dmE1ZDn69Txe",content:"_1otAQN1KwOXRV4R1rsL2ya",card:"_19gcBhB12xSSxmo7Sz-A-A",copy:"_3ssav0j2qS76PABoSIpIg8",action:"XPuWslQJNnmvAm5rlLuD_"}},3755:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(109),n(5),n(11),n(31),n(6),n(84),n(18),n(97),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(31),n(6),n(84),n(18),n(28),n(97),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var u,i=a(n(61)),c=a(n(30)),l=a(n(315)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(26)),g=a(n(250)),y=a(n(0)),v=n(186),_=a(n(240)),E=a(n(788)),O=a(n(796)),b=o(n(793)),S=n(52),k=n(72),C=a(n(1212)),T=a(n(866)),D=n(1806);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var P=(0,b.default)({store:new T.default,name:"STORAGE_CLASS",module:"storageclasses"})(u=function(e){(0,f.default)(n,e);var r=R(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).accessorStore=new C.default,e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.prefix;return[{title:t("NAME"),key:"name",dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(r,n){var o=n.default,u=(0,S.getDisplayName)(n);return u=o?y.default.createElement("span",null,y.default.createElement("span",{className:"margin-r12"},u)," ",y.default.createElement(v.Tag,null,t("DEFAULT"))):u,y.default.createElement(E.default,{icon:k.ICON_TYPES[e.module],to:"".concat(a,"/").concat(r),title:u,desc:n.description})}},{title:t("storageclasses"),dataIndex:"storage.kubesphere.io/storagetype",isHideable:!0,search:!0,filters:D.storageClasses.map((function(e){return{value:e.value,text:t(e.label)}})),render:function(e,r){var n,a,o=r.storagetype;return t(null!==(n=null===(a=D.storageClasses.find((function(e){return e.value===o})))||void 0===a?void 0:a.label)&&void 0!==n?n:D.storageClasses[3].label)}},{title:t("PVC_COUNT"),dataIndex:"volumeCount",isHideable:!0,render:function(e,t){return(0,h.default)(t,'annotations["kubesphere.io/pvc-count"]')||0}},{title:t("ALLOW_VOLUME_CLONE"),dataIndex:"annotations",isHideable:!0,render:function(e){return"true"===e["storageclass.kubesphere.io/allow-clone"]?t("TRUE"):t("FALSE")}},{title:t("ALLOW_VOLUME_SNAPSHOT"),dataIndex:"_originData",isHideable:!0,render:function(e){return"true"===e.metadata.annotations["storageclass.kubesphere.io/allow-snapshot"]?t("TRUE"):t("FALSE")}},{title:t("ALLOW_VOLUME_EXPANSION"),dataIndex:"allowVolumeExpansion",isHideable:!0,render:function(e){return e?t("TRUE"):t("FALSE")}},{title:t("PROVISIONER"),dataIndex:"provisioner",isHideable:!0}]},e.showCreate=function(){return e.props.trigger("storageclass.create",{name:"STORAGE_CLASS",module:e.props.module,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleBatchDelete=function(){e.props.trigger("storageclass.batch.delete",{accessorStore:e.accessorStore,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleDelete=function(t){e.props.trigger("storageclass.delete",{detail:t,accessorStore:e.accessorStore,cluster:e.props.match.params.cluster,success:e.props.getData})},e.handleUpdate=function(t){e.props.trigger("torageclass.update",{module:e.props.module,cluster:e.props.match.params.cluster,detail:t,success:e.props.getData})},e}return(0,d.default)(n,[{key:"validateSelect",value:function(e){var t=this,r=e.callback;return function(){var e=t.list,n=e.selectedRowKeys,a=e.data,o=a.some((function(e){return(0,g.default)(n,e.name)&&e.associationPVCCount}));return o?t.notifyDeleteTips():r.apply(void 0,arguments)}}},{key:"notifyDeleteTips",value:function(){_.default.error({content:"".concat(t("DEPENDENT_STORAGE_CLASS_DELETE_TIPS"))})}},{key:"render",value:function(){var e=this.props.tableProps;return y.default.createElement(b.ListPage,this.props,y.default.createElement(O.default,(0,l.default)({},e,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate})))}},{key:"tableActions",get:function(){var e=this.props.tableProps,r=(0,h.default)(e,"tableActions.selectActions",[]).filter((function(e){return"delete"!==e.key}));return N(N({},e.tableActions),{},{selectActions:[].concat((0,i.default)(r),[{action:"delete",key:"delete",onClick:this.handleBatchDelete,text:t("DELETE"),type:"danger"}])})}},{key:"itemActions",get:function(){var e=this,r=this.props.tableProps,n=["delete","edit"],a=(0,h.default)(r,"itemActions",[]).filter((function(e){return!n.includes(e.key)}));return[].concat((0,i.default)(a),[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return e.handleUpdate(t)}},{action:"delete",key:"delete",icon:"trash",onClick:function(t){return e.handleDelete(t)},text:t("DELETE"),type:"danger"}])}}]),n}(y.default.Component))||u;r.default=P},3756:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(136),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(30)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(239),m=n(317),h=a(n(831)),g=a(n(3757));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var r=_(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).store=new h.default,e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.store.getKsVersion(this.props.match.params)}},{key:"render",value:function(){return f.default.createElement(f.default.Fragment,null,(0,m.renderRoutes)(g.default))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_VOLUME_SNAPSHOT_CLASS_Q"),description:t("WHAT_IS_VOLUME_SNAPSHOT_CLASS_A")},{title:t("WHAT_IS_VOLUME_SNAPSHOT_CONTENT_Q"),description:t("WHAT_IS_VOLUME_SNAPSHOT_CONTENT_A")}]}},{key:"bannerProps",get:function(){return{className:"margin-b12",description:t("VOLUME_SNAPSHOT_DESC"),module:"VOLUME_SNAPSHOT",title:t("VOLUME_SNAPSHOT_PL"),icon:"snapshot"}}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return v(v({},e),{},{name:e.path.split("/").pop()})}))}}]),n}(f.default.Component))||o)||o;r.default=E},3757:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(3758)),u=n(r(3761)),i="/clusters/:cluster/volume-snapshots",c=[{path:"".concat(i,"/snapshots"),title:"VOLUME_SNAPSHOT",component:o.default,exact:!0},{path:"".concat(i,"/snapshot-content"),title:"VOLUME_SNAPSHOT_CONTENT",component:u.default,exact:!0},(0,a.getIndexRoute)({path:i,to:"".concat(i,"/snapshots"),exact:!0})];t.default=c},3758:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var o=a(n(315)),u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=n(186),h=a(n(240)),g=a(n(810)),y=a(n(788)),v=a(n(795)),_=n(793),E=a(n(26)),O=a(n(63)),b=a(n(0)),S=a(n(831)),k=a(n(914)),C=a(n(910)),T=n(52),D=n(72),A=a(n(907));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,_.withClusterList)({store:new k.default,module:"volume-snapshots",name:"VOLUME_SNAPSHOT",authKey:"volumesnapshots"})(i=function(e){(0,d.default)(n,e);var r=N(n);function n(){var e;(0,l.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).volumeStore=new S.default,e.snapshotClass=new C.default,e.pvStore=new A.default,e.showApply=function(e){var t=e.cluster,r=e.namespace;return globals.app.hasPermission({module:"volumesnapshots",action:"create",project:r,cluster:t})},e.showCreate=(0,c.default)(u.default.mark((function t(){var r,n,a,o,i,c,l;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,n=r.trigger,a=r.store,o=r.match,i=o.params,c=i.cluster,l=i.namespace,n("create.snapshot",{store:a,module:a.module,cluster:c,namespace:l,success:e.props.getData});case 3:case"end":return t.stop()}}),t)}))),e.checkSnapshotClassExist=function(){var t=(0,c.default)(u.default.mark((function t(r){var n,a,o;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params,a=n.cluster,o=n.namespace,t.next=3,e.snapshotClass.fetchDetail({name:r,cluster:a,namespace:o});case 3:return t.abrupt("return",!(0,O.default)(e.snapshotClass.detail));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(n,[{key:"getStatus",value:function(){return D.VOLUME_SNAPSHOT_CLASS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this.props,r=e.getSortOrder,n=e.getFilteredValue,a=e.module,o=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(e,t){return b.default.createElement(y.default,{icon:"snapshot",iconSize:40,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(a,"/").concat(e),title:e,desc:t.snapshotClassName})}},{title:t("STATUS"),dataIndex:"readyToUse",isHideable:!0,filters:this.getStatus(),filteredValue:n("readyToUse"),search:!0,render:function(e,r){var n=r.errorMessage,a=r.status;return b.default.createElement("div",null,b.default.createElement(v.default,{type:a,name:t(a.toUpperCase())})," ",!(0,O.default)(n)&&b.default.createElement(m.Tooltip,{content:n},b.default.createElement(m.Icon,{name:"question"})))}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,render:function(e){return b.default.createElement("div",null,(0,T.showNameAndAlias)(e,"project"))}},{title:t("VOLUME_SNAPSHOT_CONTENT"),dataIndex:"boundVolumeSnapshotContentName",isHideable:!0,render:function(e){return e}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"20%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:r("createTime"),width:"20%",render:function(e){return e?(0,T.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return b.default.createElement(_.ListPage,(0,o.default)({},this.props,{noWatch:!0}),b.default.createElement(g.default,(0,o.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e,r=this,n=this.props,a=n.trigger,o=n.routing,i=n.name;return[{key:"apply",icon:"copy",text:t("CREATE_VOLUME"),show:function(e){return r.showApply(e)&&"success"===e.backupStatus&&(0,O.default)(e.error)},onClick:(e=(0,c.default)(u.default.mark((function e(n){var o,i,c,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.cluster,i=n.namespace,c=n.snapshotClassName,e.next=3,r.checkSnapshotClassExist(c);case 3:if(e.sent){e.next=7;break}return h.default.error({title:t("SNAPSHOT_CLASS_NOT_EXIST_TITLE"),content:t("SNAPSHOT_CLASS_NOT_EXIST")}),e.abrupt("return");case 7:return l=(0,E.default)(n,"_originData.spec.source.persistentVolumeClaimName"),e.next=10,r.volumeStore.fetchDetail({cluster:o,name:l,namespace:i});case 10:a("volume.create",{fromSnapshot:!0,module:"persistentvolumeclaims",cluster:o,namespace:i,store:new S.default,onAddPv:function(){return a("pv.create",{store:r.pvStore})},noCodeEdit:!0,extendformTemplate:{spec:{resources:{requests:{storage:(0,E.default)(n,"restoreSize")}},storageClassName:(0,E.default)(r.volumeStore,"detail.storageClassName"),dataSource:{name:(0,E.default)(n,"name"),kind:"VolumeSnapshot",apiGroup:"snapshot.storage.k8s.io"}}}});case 11:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(e){return!("deleting"===e.backupStatus)},onClick:function(e){return a("resource.delete",{type:i,detail:e,success:o.query})}}]}}]),n}(b.default.Component))||i;r.default=R},3761:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.cantDelete=r.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var o=a(n(58)),u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(315)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=n(793),y=n(72),v=a(n(796)),_=a(n(788)),E=a(n(795)),O=a(n(1213)),b=n(471),S=a(n(63)),k=a(n(26)),C=n(52);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,g.withClusterList)({store:new O.default,module:"volume-snapshot-content",name:"VOLUME_SNAPSHOT_CONTENT",authKey:"volumesnapshots"})(i=function(e){(0,f.default)(n,e);var r=T(n);function n(){return(0,s.default)(this,n),r.apply(this,arguments)}return(0,d.default)(n,[{key:"getStatus",value:function(){return y.VOLUME_SNAPSHOT_CLASS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this.props,r=e.getSortOrder,n=e.getFilteredValue,a=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:r("name"),search:!0,sorter:!0,render:function(e,t){return h.default.createElement(_.default,{icon:"snapshot",iconSize:40,to:"/clusters/".concat(a,"/volume-snapshot-content/").concat(e),title:e,desc:t.snapshotClassName})}},{title:t("STATUS"),dataIndex:"readyToUse",isHideable:!0,filters:this.getStatus(),filteredValue:n("readyToUse"),search:!0,render:function(e,r){var n=r.errorMessage,a=r.status;return h.default.createElement("div",null,h.default.createElement(E.default,{type:a,name:t(a.toUpperCase())})," ",!(0,S.default)(n)&&h.default.createElement(Tooltip,{content:n},h.default.createElement(Icon,{name:"question"})))}},{title:t("CAPACITY"),dataIndex:"restoreSize",isHideable:!0,width:"7%",render:function(e){return"".concat((0,C.memoryFormat)(e,"Gi"),"Gi")}},{title:t("VOLUME_SNAPSHOT_CLASS"),dataIndex:"snapshotClassName",isHideable:!0,width:"14%",render:function(e){return e||"-"}},{title:t("DELETION_POLICY"),dataIndex:"deletionPolicy",isHideable:!0,width:"9.86%",render:function(e){return e||"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,sorter:!0,sortOrder:r("createTime"),width:"12.33%",render:function(e){return e?(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return h.default.createElement(g.ListPage,(0,l.default)({},this.props,{noWatch:!0}),h.default.createElement(v.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e,r=this.props,n=r.trigger,a=r.routing,i=r.name,l=r.store,s=r.match.params.cluster;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),onClick:function(e){n("volume.snapshotContent.baseInfo.edit",{store:l,cluster:s,detail:e,success:a.query})}},{key:"view",icon:"eye",text:t("VIEW_YAML"),onClick:(e=(0,c.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.fetchDetail({name:t.name,cluster:s});case 2:r=e.sent,n("resource.yaml.edit",{readOnly:!0,detail:t,yaml:r._originData});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",disabled:b.cantDeleteSnapshotContent,onClick:function(e){e.namespace;var t=(0,o.default)(e,["namespace"]);return n("resource.delete",{type:i,detail:t,success:a.query})}}]}}]),n}(h.default.Component))||i;r.default=D;r.cantDelete=function(e){var t=e._originData;return(!(0,k.default)(t,"spec.source.snapshotHandle")||!(0,k.default)(t,"spec.volumeSnapshotRef.uid"))&&!(0,k.default)(t,'metadata.annotations["snapshot.storage.kubernetes.io/volumesnapshot-being-deleted"]')}},3762:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(12),n(109),n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(315)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=o(n(793)),y=a(n(788)),v=a(n(796)),_=n(52),E=a(n(910));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var b=(0,g.default)({store:new E.default,module:"volumesnapshotclasses",authKey:"volumesnapshotclasses",name:"VOLUME_SNAPSHOT_CLASS",rowKey:"uid"})(i=function(e){(0,f.default)(n,e);var r=O(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.prefix;return[{title:t("NAME"),dataIndex:"name",search:!0,sorter:!0,sortOrder:n("name"),render:function(e,t){return h.default.createElement(y.default,{to:"".concat(a,"/").concat(e),title:(0,_.getDisplayName)(t),desc:t.description})}},{title:t("VOLUME_SNAPSHOT_PL"),dataIndex:"count",isHideable:!0,width:"17.6%"},{title:t("PROVISIONER"),dataIndex:"driver",isHideable:!0,width:"17.6%"},{title:t("DELETION_POLICY"),dataIndex:"deletionPolicy",isHideable:!0,width:"17.6%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,isHideable:!0,width:"12.3%",render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]},e.showCreate=function(){e.props.trigger("snapshotClasses.create",{name:"VOLUME_SNAPSHOT_CLASS",module:"volumesnapshotclass",cluster:e.props.match.params.cluster,success:e.props.routing.query})},e}return(0,d.default)(n,[{key:"render",value:function(){var e=this.props.tableProps;return h.default.createElement(g.ListPage,(0,l.default)({},this.props,{noWatch:!0}),h.default.createElement(v.default,(0,l.default)({},e,{columns:this.getColumns(),itemActions:this.itemActions,onCreate:this.showCreate})))}},{key:"itemActions",get:function(){var e,r,n=this,a=this.props,o=a.trigger,i=a.store,l=a.match,s=a.name,d=l.params.cluster;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:(r=(0,c.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchDetail(t);case 2:r=e.sent,o("resource.baseinfo.edit",{store:i,detail:r,cluster:d,success:n.props.getData});case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"view",show:this.showAction,onClick:(e=(0,c.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchDetail(t);case 2:r=e.sent,o("volume.snapshot.yaml.edit",{store:i,detail:r,yaml:r._originData,success:n.props.getData});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,disabled:this.cantDelete,onClick:function(e){return o("resource.delete",{type:s,detail:e,success:n.props.getData})}}]}}]),n}(h.default.Component))||i;r.default=b},3763:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(136),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(30)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(239),m=n(317),h=a(n(907)),g=a(n(3764));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var r=_(n);function n(e){var t;return(0,i.default)(this,n),(t=r.call(this,e)).pv=new h.default,t}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.pv.getKsVersion(this.props.match.params)}},{key:"render",value:function(){return f.default.createElement(f.default.Fragment,null,(0,m.renderRoutes)(g.default))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"bannerProps",get:function(){return{className:"margin-b12",description:t("PERSISTENT_VOLUME_CLAIM_DESC"),module:"persistentvolumeclaims",title:t("PERSISTENT_VOLUME_CLAIM_PL")}}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return v(v({},e),{},{name:e.path.split("/").pop()})}))}}]),n}(f.default.Component))||o)||o;r.default=E},3764:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(3765)),u=n(r(3767)),i="/clusters/:cluster/volumes",c=[{path:"".concat(i,"/Volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:o.default,exact:!0},{path:"".concat(i,"/PV"),title:"PERSISTENT_VOLUME_PL",component:u.default,exact:!0},(0,a.getIndexRoute)({path:i,to:"".concat(i,"/Volumes"),exact:!0})];t.default=c},3765:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(73),n(18),n(192),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(73),n(18),n(28),n(192),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var o=a(n(315)),u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=n(186),h=a(n(810)),g=a(n(788)),y=a(n(795)),v=n(793),_=a(n(1131)),E=a(n(63)),O=a(n(804)),b=a(n(0)),S=n(433),k=a(n(907)),C=a(n(831)),T=n(52),D=n(72),A=n(434),N=a(n(3766));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,v.withClusterList)({store:new C.default,module:"persistentvolumeclaims",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(i=function(e){(0,d.default)(n,e);var r=R(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).pvStore=new k.default,e.handleTabChange=function(){var t=e.props.match.params.cluster;e.props.rootStore.routing.push("/clusters/".concat(t,"/PV"))},e.showAction=function(){return!0},e.getItemDesc=function(e){var t=(0,A.getVolumeStatus)(e);return(0,E.default)(t)?e.storageClassName||"-":b.default.createElement(O.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.mapperAccessMode=function(e){var t=(0,T.map_accessModes)(e);return b.default.createElement("span",null,t.join(","))},e.renderAccessTitle=function(){var e=b.default.createElement("div",null,b.default.createElement("div",null,t("RWO_DESC")),b.default.createElement("div",null,t("ROX_DESC")),b.default.createElement("div",null,t("RWX_DESC")));return b.default.createElement("div",{className:N.default.mode_title},t("ACCESS_MODE_TCAP"),b.default.createElement(m.Tooltip,{content:e},b.default.createElement(m.Icon,{name:"question",size:16,className:N.default.question})))},e.pvYamlView=function(){var t=(0,c.default)(u.default.mark((function t(r){var n,a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.spec.volumeName,a=e.props.match.params.cluster,t.next=4,e.pvStore.fetchDetail({cluster:a,name:n});case 4:return t.abrupt("return",e.props.trigger("resource.yaml.edit",{detail:e.pvStore.detail,yaml:e.pvStore.detail._originData,readOnly:!0}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCreate=function(){var t=e.props,r=t.store,n=t.match,a=t.module;return e.props.trigger("volume.create",{store:r,module:a,onAddPv:function(){return e.props.trigger("pv.create",{store:e.pvStore})},cluster:n.params.cluster})},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.store.getKsVersion(this.props.match.params)}},{key:"getStatus",value:function(){return D.VOLUME_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,r=this.props,n=r.getSortOrder,a=r.getFilteredValue,o=this.props.match.params.cluster,u={title:t("PERSISTENT_VOLUME"),dataIndex:"_originData",isHideable:!0,search:!1,width:"25%",render:function(r){return b.default.createElement("div",{id:"pvColumn",className:N.default.pv_content},b.default.createElement(S.Link,{to:"/clusters/".concat(o,"/pv/").concat(r.spec.volumeName)},r.spec.volumeName),r.spec.volumeName&&b.default.createElement(m.Tooltip,{content:t("VIEW_YAML")},b.default.createElement(m.Icon,{className:N.default.yaml,name:"log",size:16,onClick:function(){return e.pvYamlView(r)}})))}},i=[{title:t("NAME"),dataIndex:"name",sortOrder:n("name"),search:!0,sorter:!0,width:"20%",render:function(t,r){return b.default.createElement(g.default,{icon:"storage",iconSize:40,to:"Terminating"===r.phase?"":"/clusters/".concat(o,"/projects/").concat(r.namespace,"/volumes/").concat(t),isMultiCluster:r.isFedManaged,desc:e.getItemDesc(r),title:(0,T.getDisplayName)(r)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:a("status"),width:"15%",render:function(e,r){var n=r.phase;return b.default.createElement(y.default,{type:n,name:t("VOLUME_STATUS_".concat(n.toUpperCase())),flicker:!0})}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"10%",render:function(t){return e.mapperAccessMode(t)}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"12%",render:function(e,t){return b.default.createElement(_.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"15%",render:function(e){return(0,T.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}];return this.props.store.ksVersion>=3.2&&i.splice(2,0,u),i}},{key:"render",value:function(){var e=this.props,t=e.tableProps,r=e.match;return b.default.createElement(v.ListPage,this.props,b.default.createElement(h.default,(0,o.default)({},t,{className:"table-2-6",itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:r.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"tabs",get:function(){return{value:"Volume",onChange:this.handleTabChange,options:[{value:"Volume",label:t("PERSISTENT_VOLUME_CLAIM")},{value:"PV",label:t("PV")}]}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(b.default.Component))||i;r.default=P},3766:function(e,t,r){e.exports={mode_title:"g8QlCJy-fQF9buKTjwNsv",question:"U5zHvmvvHdsAuoC5QNq1",pv_content:"_2jBC4N_eKhB_IMAWm0UTuO",yaml:"_345LgwPnsPDsRv68L_cgry"}},3767:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(11),n(6),n(86),n(73),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(86),n(73),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var u,i=a(n(30)),c=a(n(315)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(63)),g=o(n(793)),y=a(n(796)),v=a(n(907)),_=n(52),E=n(186),O=n(434),b=n(72),S=a(n(804)),k=a(n(788)),C=a(n(795)),T=a(n(3768));function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,g.default)({store:new v.default,module:"persistentvolumes",name:"PERSISTENT_VOLUME",authKey:"persistentvolumeclaim",rowKey:"uid"})(u=function(e){(0,d.default)(n,e);var r=N(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.cantDelete=function(e){var t=e.status;return["Bound"].indexOf(t.phase)>-1},e.getItemDesc=function(e){var t=(0,O.getVolumeStatus)(e);return(0,h.default)(t)?e.storageClassName||"-":m.default.createElement(S.default,{reason:t,data:e,type:"volume"})},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged||["Bound"].indexOf(e.status.phase)>-1,name:e.name}},e.renderAccessTitle=function(){var e=m.default.createElement("div",null,m.default.createElement("div",null,t("RWO_DESC")),m.default.createElement("div",null,t("ROX_DESC")),m.default.createElement("div",null,t("RWX_DESC")));return m.default.createElement("div",{className:T.default.mode_title},t("ACCESS_MODE_TCAP"),m.default.createElement(E.Tooltip,{content:e},m.default.createElement(E.Icon,{name:"question",size:16,className:T.default.question})))},e.mapperAccessMode=function(e){var t=(0,_.map_accessModes)(e);return m.default.createElement("span",null,t.join(","))},e.showCreate=function(){var t=e.props,r=t.match,n=t.module,a=t.getData;(0,t.trigger)("pv.create",{module:n,cluster:r.params.cluster,success:a})},e}return(0,s.default)(n,[{key:"getStatus",value:function(){return b.PV_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getColumns",value:function(){var e=this,r=this.props,n=r.getSortOrder,a=r.getFilteredValue,o=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:n("name"),search:!0,sorter:!0,render:function(t,r){return m.default.createElement(k.default,{icon:"storage",iconSize:40,to:"Terminating"===r.phase?"":"/clusters/".concat(o,"/pv/").concat(t),isMultiCluster:r.isFedManaged,desc:e.getItemDesc(r),title:(0,_.getDisplayName)(r)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,search:!0,filters:this.getStatus(),filteredValue:a("status"),width:"10.56%",render:function(e){var r=e.phase;return m.default.createElement(C.default,{type:r,name:t("PV_STATUS_".concat(r.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",isHideable:!0,width:"7%",render:function(e){return m.default.createElement("div",null,m.default.createElement("p",null,e))}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,width:"12.32%",render:function(t){return e.mapperAccessMode(t)}},{title:t("RECLAIM_POLICY"),dataIndex:"_originData",isHideable:!0,width:"7.74%",render:function(e){return e.spec.persistentVolumeReclaimPolicy}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:140,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return m.default.createElement(g.ListPage,this.props,m.default.createElement(y.default,(0,c.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,renderProjectSelect:!1,emptyProps:{desc:""}})))}},{key:"itemActions",get:function(){var e=this,r=this.props.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){return r("resource.baseinfo.edit",{detail:t,success:e.props.getData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"view",show:this.showAction,onClick:function(t){return r("resource.yaml.edit",{detail:t,success:e.props.getData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,disabled:this.cantDelete,onClick:function(t){return r("pv.delete",A(A({},e.props.tableProps),{},{detail:t,success:e.props.getData}))}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger;return A(A({},r.tableProps.tableActions),{},{selectActions:[{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:this.showAction,onClick:function(){return n("pv.batch.delete",A(A({},e.props.tableProps),{},{success:e.props.getData}))}}]})}}]),n}(m.default.Component))||u;r.default=R},3768:function(e,t,r){e.exports={mode_title:"_2vs_PnSPXebgvBy3nZuegb",question:"_3Y4c2IH7tgyRPkhZQxNA_0",pv_content:"_14XQ8_zmRwCjtgkz04Wzge",yaml:"_2_YhNvXVq70vjV7Tj6V3qY"}},3769:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(31),n(6),n(86),n(18),n(97),n(16),n(27),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(31),n(6),n(86),n(18),n(28),n(97),n(42),n(16),n(27),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(436),n(22),n(23),n(57),n(24),n(17),n(62),n(7);var o=a(n(315)),u=a(n(43)),i=a(n(30));n(41);var c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=a(n(63)),y=a(n(26)),v=a(n(158)),_=n(186),E=n(52),O=n(72),b=n(444),S=n(794),k=a(n(856)),C=a(n(973)),T=a(n(1068)),D=n(793),A=a(n(788)),N=a(n(795)),R=a(n(789)),P=a(n(790)),M=a(n(787)),w=a(n(792)),I=a(n(796)),L=n(14),j=a(n(3770));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var V={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",gpu_utilization:"node_gpu_utilization",gpu_used:"node_gpu_usage",gpu_total:"node_gpu_total",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_used:"node_gpu_memory_usage",gpu_memory_total:"node_gpu_memory_total",pod_used:"node_pod_running_count",pod_total:"node_pod_quota"},Y=(0,D.withClusterList)({store:new k.default,name:"CLUSTER_NODE",module:"nodes"})(c=function(e){(0,f.default)(n,e);var r=z(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).store=e.props.store,e.monitoringStore=new C.default({cluster:e.cluster}),e.getData=function(){var t=(0,l.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(U(U({},r),e.props.match.params));case 2:return t.next=4,e.monitoringStore.fetchMetrics(U(U({},e.props.match.params),{},{resources:e.store.list.data.map((function(e){return e.name})),metrics:Object.values((0,E.hideGPUByLicense)(V,e.cluster)),last:!0}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnschedulable=function(e){return e.taints.some((function(e){return"node.kubernetes.io/unschedulable"===e.key}))},e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.handleOpenTerminal=function(t){var r=M.default.open({onOk:function(){M.default.close(r)},modal:T.default,cluster:e.cluster,title:t.name,nodename:t.name,isEdgeNode:!0})},e.getLastValue=function(t,r,n){var a=e.monitoringStore.data,o=((0,y.default)(a[r],"data.result")||[]).find((function(e){return(0,y.default)(e,"metric.node")===t.name})),u=(0,y.default)(o,"value[1]",0);return(0,S.getValueByUnit)(u,n)},e.getRecordMetrics=function(t,r){var n={};return r.forEach((function(r){var a=e.getLastValue(t,(0,E.hideGPUByLicense)(V,e.cluster)[r.type],r.unit);n[r.type]=parseFloat(a)})),n},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var r=e.props,n=r.module,a=r.prefix,o=r.getSortOrder,u=r.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:o("name"),search:!0,key:"name",render:function(e,t){return h.default.createElement(A.default,{icon:O.ICON_TYPES[n],iconSize:40,to:"success"!==t.importStatus?null:"".concat(a,"/").concat(e),title:e,desc:t.ip})}},{title:t("STATUS"),dataIndex:"status",key:"status",filters:e.getStatus(),filteredValue:u("status"),isHideable:!0,search:!0,render:function(r,n){var a=(0,b.getNodeStatus)(n),o=n.taints;return h.default.createElement("div",{className:j.default.status},h.default.createElement(N.default,{type:a,name:t("NODE_STATUS_".concat(a.toUpperCase()))}),!(0,g.default)(o)&&"success"===n.importStatus&&h.default.createElement(_.Tooltip,{content:e.renderTaintsTip(o)},h.default.createElement("span",{className:j.default.taints},o.length)))}},{title:t("ROLE"),dataIndex:"role",filters:e.getRoles(),filteredValue:u("role"),isHideable:!0,search:!0,render:function(e){return-1===e.indexOf("master")?t("WORKER"):t("CONTROL_PLANE")}},{title:t("CPU_USAGE"),key:"cpu",isHideable:!0,render:function(r){var n=e.getRecordMetrics(r,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return h.default.createElement(P.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(n.cpu_utilisation)),n.cpu_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(n.cpu_used,"/").concat(n.cpu_total," ").concat(t("CORE_PL"))})}},{title:t("MEMORY_USAGE"),key:"memory",isHideable:!0,render:function(t){var r=e.getRecordMetrics(t,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return h.default.createElement(P.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(r.memory_utilisation)),r.memory_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(r.memory_used,"/").concat(r.memory_total," GiB")})}},{title:t("GPU_USAGE"),key:"gpu",isHideable:!0,render:function(t){var r=e.getRecordMetrics(t,[{type:"gpu_used",unit:"Core"},{type:"gpu_total",unit:"Core"},{type:"gpu_utilization"}]);return h.default.createElement(P.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(r.gpu_utilization)),r.gpu_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(r.gpu_used,"/").concat(r.gpu_total," GPU")})}},{title:t("GPU_MEMORY_USAGE"),key:"gpu_memory",isHideable:!0,render:function(t){var r=e.getRecordMetrics(t,[{type:"gpu_memory_used",unit:"Gi"},{type:"gpu_memory_total",unit:"Gi"},{type:"gpu_memory_utilization"}]);return h.default.createElement(P.default,{title:h.default.createElement("div",{className:j.default.resource},h.default.createElement("span",null,e.toPercentage(r.gpu_memory_utilization)),r.gpu_memory_utilization>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(r.gpu_memory_used,"/").concat(r.gpu_memory_total," GiB")})}},{title:t("POD_PL"),key:"pods",isHideable:!0,render:function(t){var r=e.getRecordMetrics(t,[{type:"pod_used"},{type:"pod_total"}]),n=r.pod_total?parseFloat(r.pod_used/r.pod_total):0;return h.default.createElement(P.default,{title:"".concat(e.toPercentage(n)),description:"".concat(r.pod_used,"/").concat(r.pod_total)})}},{title:t("ALLOCATED_CPU"),key:"allocated_resources_cpu",isHideable:!0,render:e.renderCPUTooltip},{title:t("ALLOCATED_MEMORY"),key:"allocated_resources_memory",isHideable:!0,render:e.renderMemoryTooltip}]},e.renderCPUTooltip=function(e){var r=h.default.createElement("p",null,1===(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_LIMIT_SI",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_LIMIT_PL",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}));return h.default.createElement(_.Tooltip,{content:r,placement:"top"},h.default.createElement(P.default,{title:1===(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_REQUEST_SI",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_REQUEST_PL",{core:(0,E.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(e){var r=h.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,E.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}));return h.default.createElement(_.Tooltip,{content:r,placement:"top"},h.default.createElement(P.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,E.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchCount(this.props.match.params)}},{key:"toPercentage",value:function(e){var t=(0,v.default)(e)||isNaN(e)?0:Number(e);return"".concat(Math.ceil(100*t),"%")}},{key:"getStatus",value:function(){return O.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getRoles",value:function(){return[{text:t("CONTROL_PLANE"),value:"master"},{text:t("WORKER"),value:"worker"}]}},{key:"renderOverview",value:function(){var e=this.store,r=e.masterNum,n=e.list.total;return h.default.createElement(R.default,{className:"margin-b12"},h.default.createElement("div",{className:j.default.overview},h.default.createElement(P.default,{icon:"nodes",title:n,description:1===n?t("NODE_SI"):t("NODE_PL")}),h.default.createElement(P.default,{title:r,description:1===r?t("MASTER_NODE_SI"):t("MASTER_NODE_PL")})))}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps,a=this.monitoringStore.isLoading;return h.default.createElement(D.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(w.default,(0,o.default)({},r,{title:t("CLUSTER_NODE_PL"),tips:this.tips})),this.renderOverview(),h.default.createElement(I.default,(0,o.default)({},n,{itemActions:this.itemActions,tableActions:this.tableActions,columns:(0,E.hideGPUByLicense)(this.getColumns(),this.cluster),isLoading:n.isLoading||a})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"tips",get:function(){return[{title:t("NODE_TYPES_Q"),description:t("NODE_TYPES_A")},{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.store,a=r.clusterStore,o=r.routing,u=r.trigger,i=r.name;return[{key:"uncordon",icon:"start",text:t("UNCORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getUnschedulable(t)},onClick:function(e){return n.uncordon(e).then(o.query)}},{key:"cordon",icon:"stop",text:t("CORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&!e.getUnschedulable(t)},onClick:function(e){return n.cordon(e).then(o.query)}},{key:"terminal",icon:"terminal",text:t("OPEN_TERMINAL"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getReady(t)},onClick:function(t){return e.handleOpenTerminal(t)}},{key:"logs",icon:"eye",text:t("VIEW_LOG"),action:"edit",show:function(e){return"success"!==e.importStatus},onClick:function(){return u("node.add.log",{detail:(0,L.toJS)(a.detail)})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(e){return"failed"===e.importStatus},onClick:function(e){return u("resource.delete",{type:i,detail:e,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.trigger,n=e.routing,a=e.clusterStore,o=e.tableProps,u=[];return a.detail.kkName&&u.push({key:"add",type:"control",text:t("ADD"),action:"create",onClick:function(){return r("node.add",{kkName:a.detail.kkName||"ddd"})}}),U(U({},o.tableActions),{},{actions:u,selectActions:[{key:"taint",type:"default",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return r("node.taint.batch",{success:n.query})}}]})}}]),n}(h.default.Component))||c;r.default=Y},3770:function(e,t,r){e.exports={taints:"B4t1khP3gUFICAah4YTP5",overview:"_39TiTBliLeivJdhXYoDplZ",resource:"_1f_DIoH3TOaX8dMUSn7UMb",unAuthord:"_29VjReB-cl3AzGmel2f8Vq"}},3771:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(73),n(18),n(97),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(64),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(73),n(18),n(28),n(97),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(64),n(7);var o=a(n(315)),u=a(n(43)),i=a(n(30));n(41);var c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(0)),g=a(n(63)),y=a(n(26)),v=n(186),_=n(52),E=n(72),O=n(444),b=a(n(1175)),S=a(n(973)),k=a(n(1068)),C=n(793),T=a(n(788)),D=a(n(795)),A=a(n(790)),N=a(n(787)),R=a(n(792)),P=a(n(796)),M=a(n(874)),w=n(14),I=a(n(3772));function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var U=(0,C.withClusterList)({store:new b.default,name:"EDGE_NODE",module:"edgenodes"})(c=function(e){(0,f.default)(n,e);var r=x(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).store=e.props.store,e.monitoringStore=new S.default({cluster:e.cluster}),e.getData=function(){var t=(0,l.default)(u.default.mark((function t(r){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(j(j(j({},r),e.props.match.params),{},{type:"edgenode"}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUnschedulable=function(e){return e.taints.some((function(e){return"node.kubernetes.io/unschedulable"===e.key}))},e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.handleOpenTerminal=function(t){var r=N.default.open({onOk:function(){N.default.close(r)},modal:k.default,cluster:e.cluster,title:t.name,nodename:t.name})},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var r=e.props,n=r.module,a=r.prefix,o=r.getSortOrder,u=r.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:o("name"),search:!0,render:function(e,t){return h.default.createElement(T.default,{icon:E.ICON_TYPES[n],iconSize:40,to:"success"!==t.importStatus?null:"".concat(a,"/").concat(e),title:e,desc:t.ip})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:u("status"),isHideable:!0,search:!0,render:function(r,n){var a=(0,O.getNodeStatus)(n),o=n.taints;return h.default.createElement("div",{className:I.default.status},h.default.createElement(D.default,{type:a,name:t("NODE_STATUS_".concat(a.toUpperCase()))}),!(0,g.default)(o)&&"success"===n.importStatus&&h.default.createElement(v.Tooltip,{content:e.renderTaintsTip(o)},h.default.createElement("span",{className:I.default.taints},o.length)))}},{title:t("ROLE"),dataIndex:"role",isHideable:!0,filters:e.getRole(),filteredValue:u("role"),search:!0,render:function(e){return e.map((function(e){return t(e.replace("-","_").toUpperCase())})).join("/")}}]},e.renderCPUTooltip=function(e){var r=h.default.createElement("p",null,1===(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_LIMIT_SI",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_LIMIT_PL",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}));return h.default.createElement(v.Tooltip,{content:r,placement:"top"},h.default.createElement(A.default,{title:1===(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_REQUEST_SI",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_REQUEST_PL",{core:(0,_.cpuFormat)((0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,y.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.renderMemoryTooltip=function(e){var r=h.default.createElement("p",null,t("MEMORY_LIMIT_VALUE",{gib:(0,_.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}));return h.default.createElement(v.Tooltip,{content:r,placement:"top"},h.default.createElement(A.default,{title:t("MEMORY_REQUEST_VALUE",{gib:(0,_.memoryFormat)((0,y.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,y.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("RESOURCE_REQUEST")}))},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module;return e.props.trigger("workload.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,rootStore:e.props.rootStore})},e}return(0,d.default)(n,[{key:"getStatus",value:function(){return E.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"getRole",value:function(){return E.NODE_ROLE.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps,a=this.monitoringStore.isLoading;return this.cluster!==this.hostClusterName?h.default.createElement(h.default.Fragment,null,h.default.createElement(R.default,(0,o.default)({},r,{title:t("EDGE_NODE_PL"),tips:this.tips})),h.default.createElement(M.default,(0,o.default)({},n,{title:t("EDGE_LIST_NOT_HOST_TITLE"),desc:t("EDGE_LIST_NOT_HOST_TITLE_DESC")}))):h.default.createElement(C.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(R.default,(0,o.default)({},r,{title:t("EDGE_NODE_PL"),tips:this.tips})),h.default.createElement(P.default,(0,o.default)({},n,{onCreate:this.showCreate,itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),isLoading:n.isLoading||a})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"isExpired",get:function(){return(0,y.default)(globals,"licenseInfo.isExpired",!1)}},{key:"isUnAuthorized",get:function(){return(0,y.default)(globals,"licenseInfo.isUnAuthorized",!1)}},{key:"isOverLimit",get:function(){return(0,y.default)(globals,"licenseInfo.isOverLimit",!1)}},{key:"hostClusterName",get:function(){return(0,_.getHostClusterName)()}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.store,a=r.clusterStore,o=r.routing,u=r.trigger,i=r.name;return[{key:"uncordon",icon:"start",text:t("UNCORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getUnschedulable(t)},onClick:function(e){return n.uncordon(e).then(o.query)}},{key:"cordon",icon:"stop",text:t("CORDON"),action:"edit",show:function(t){return"success"===t.importStatus&&!e.getUnschedulable(t)},onClick:function(e){return n.cordon(e).then(o.query)}},{key:"terminal",icon:"terminal",text:t("OPEN_TERMINAL"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getReady(t)},onClick:function(t){return e.handleOpenTerminal(t)}},{key:"logs",icon:"eye",text:t("VIEW_LOG"),action:"edit",show:function(e){return"success"!==e.importStatus},onClick:function(){return u("node.add.log",{detail:(0,w.toJS)(a.detail)})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(e){return"failed"===e.importStatus},onClick:function(e){return u("resource.delete",{type:i,detail:e,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.routing,o=r.tableProps,u=[];return u.push({key:"add",type:"control",text:t("ADD"),action:"create",tooltip:void 0,forbidden:!1,onClick:function(){return n("node.edge.add",{cluster:e.cluster,store:e.store})}}),j(j({},o.tableActions),{},{actions:u,selectActions:[{key:"taint",type:"default",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return n("node.taint.batch",{success:a.query})}}]})}},{key:"tips",get:function(){return[{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}}]),n}(h.default.Component))||c;r.default=U},3772:function(e,t,r){e.exports={taints:"HoethcQ_rhN4mGKbK1rRH",overview:"_2-0e3OqOhUZTSiIln7YHO",resource:"_2HmdPdvlQ9R5HSNv-z7Xr8"}},3773:function(e,r,n){"use strict";n(15);var a=n(20);n(11),n(31),n(18),n(48),n(16),n(4),n(23),n(24),n(17),n(62),n(188),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(11),n(31),n(18),n(48),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62),n(188);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(239),p=a(n(63)),m=n(186),h=a(n(792)),g=n(244),y=a(n(1807)),v=a(n(3774)),_=a(n(3776));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var O=(0,f.inject)("rootStore")(o=(0,f.observer)(o=function(e){(0,c.default)(n,e);var r=E(n);function n(e){var a;(0,u.default)(this,n),(a=r.call(this,e)).getColor=function(e){return e?"#f5a623":"#55bc8a"},a.getCount=function(e){var t=a.store.exceptionCount,r=a.store.healthyCount;return t[e]||r[e]||0},a.getConfigs=function(){return[{type:"kubesphere",title:"KubeSphere",icon:"/assets/kubesphere.svg"},{type:"kubernetes",title:"Kubernetes",icon:"/assets/kubernetes.svg"},{type:"istio",title:t("APPLICATION_GOVERNANCE"),icon:"/assets/istio.svg",disabled:!globals.app.hasClusterModule(a.cluster,"servicemesh")},{type:"monitoring",title:t("MONITORING"),icon:"/assets/monitoring.svg",disabled:!globals.app.hasClusterModule(a.cluster,"monitoring")},{type:"logging",title:t("LOGGING"),icon:"/assets/logging.svg",disabled:!globals.app.hasClusterModule(a.cluster,"logging")},{type:"devops",title:"DevOps",icon:"/assets/dev-ops.svg",disabled:!globals.app.hasClusterModule(a.cluster,"devops")},{type:"edgewize",title:"EdgeWize",icon:"/assets/edgewize.svg",disabled:!globals.app.hasClusterModule(a.cluster,"edgewize")}]},a.handleTypeChange=function(e){a.setState({type:e})};var o=((0,g.parse)(location.search.slice(1))||{}).type;return a.state={type:o||"kubesphere"},a.configs=a.getConfigs(),a.store=new y.default,a.store.fetchList({cluster:a.cluster}),a}return(0,i.default)(n,[{key:"renderHeader",value:function(){return d.default.createElement(h.default,{icon:"components",title:t("SYSTEM_COMPONENT_PL"),description:t("SERVICE_COMPONENTS_DESC"),extra:d.default.createElement("div",{className:_.default.toolbar},this.renderBar())})}},{key:"renderBar",value:function(){var e=this,t=this.store.exceptionCount;return d.default.createElement("div",{className:"inline-block"},d.default.createElement(m.RadioGroup,{mode:"button",value:this.state.type,onChange:this.handleTypeChange},this.configs.filter((function(e){return!e.disabled})).map((function(r){var n=r.type,a=r.title;return d.default.createElement(m.RadioButton,{key:n,value:n},a,d.default.createElement(m.Tag,{color:e.getColor(t[n])},e.getCount(n)))}))))}},{key:"renderCards",value:function(e){var t=this;return d.default.createElement("div",{className:_.default.cards},e.map((function(e){return d.default.createElement(v.default,{key:e.name,component:e,cluster:t.cluster})})))}},{key:"renderComponents",value:function(e){var t=this.store.list.data,r=this.configs.find((function(t){return t.type===e}))||{},n=t[e];return(0,p.default)(n)?null:d.default.createElement("div",{className:_.default.cardsWrapper},d.default.createElement("div",{className:_.default.cardTitle},d.default.createElement("img",{src:r.icon,alt:r.title})),this.renderCards(n))}},{key:"renderList",value:function(){var e=this.store.list.isLoading,t=this.state.type;return e?d.default.createElement("div",{className:"loading"},d.default.createElement(m.Loading,null)):this.renderComponents(t)}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderHeader(),this.renderList())}},{key:"prefix",get:function(){return this.props.match.url}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(d.default.Component))||o)||o;r.default=O},3774:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(16),n(24),n(64),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(5),n(16),n(24),n(64);var o=a(n(243)),u=a(n(0)),i=n(433),c=n(186),l=a(n(795)),s=a(n(790)),d=n(434),f=a(n(3775)),p=function(e){var r=e.cluster,n=e.component,a=void 0===n?{}:n,p=a.name,m=a.namespace,h=(0,d.getComponentStatus)(a),g="".concat(String(p).replace(/[- ]/g,"_").toUpperCase(),"_DESC"),y=t(g);return u.default.createElement("div",{className:f.default.card,"data-test":"service-component"},u.default.createElement(c.Columns,null,u.default.createElement(c.Column,null,u.default.createElement(s.default,{icon:"components",title:u.default.createElement(i.Link,{to:"/clusters/".concat(r,"/components/").concat(m,"/").concat(p)},p),description:y!==g?u.default.createElement("p",null,y):null})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:u.default.createElement(l.default,{type:h,name:t(h.toUpperCase())}),description:t("STATUS")})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:"".concat(a.healthyBackends,"/").concat(a.totalBackends),description:t("REPLICA_COUNT")})),u.default.createElement(c.Column,{className:"is-2"},u.default.createElement(s.default,{title:a.startedAt?(0,o.default)(a.startedAt).toNow(!0):"-",description:t("RUNNING_TIME")}))))};r.default=p},3775:function(e,t,r){e.exports={card:"_3O6k823fCfWBHm-4VH76MN"}},3776:function(e,t,r){e.exports={header:"_1-v5mSMLmxnQo7Tu8omd_Z",title:"_3FG6c5gZtLtRyuppsme5WY",leftIcon:"_1x8pzzm00S4pgPncQM94Nh",rightIcon:"L7cV3c7hdKq6JtRIgkKlE",toolbar:"PwUtcNaXagxdRnj7x31t9",cardsWrapper:"gLLpHGp47EN2wrIe50Kvd",cardTitle:"_1_xaHL38_uU-TZcr3Fpw2n"}},3777:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var u,i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=a(n(788)),h=a(n(792)),g=a(n(796)),y=o(n(793)),v=n(52),_=a(n(1070));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var O=(0,y.default)({store:new _.default,module:"customresourcedefinitions",name:"CRD"})(u=function(e){(0,s.default)(n,e);var r=E(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){var r=e.props.match.params.cluster,n=e.props.getSortOrder;return[{title:t("KIND_TCAP"),dataIndex:"kind",render:function(e,t){return p.default.createElement(m.default,{to:"/clusters/".concat(r,"/customresources/").concat(t.name),title:e,desc:"".concat(t.group,"/").concat(t.latestVersion)})}},{title:t("NAME"),key:"name",dataIndex:"name"},{title:t("SCOPE_TCAP"),key:"scope",dataIndex:"scope"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,(0,i.default)({},this.props,{noWatch:!0}),p.default.createElement(h.default,(0,i.default)({},t,{tabs:this.tabs})),p.default.createElement(g.default,(0,i.default)({},r,{itemActions:[],columns:this.getColumns(),onCreate:null,searchType:"name"})))}}]),n}(p.default.Component))||u;r.default=O},3778:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(11),n(86),n(18),n(97),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(86),n(18),n(28),n(97),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(61)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(810)),m=a(n(788)),h=n(793),g=a(n(26)),y=a(n(804)),v=a(n(865)),_=a(n(0)),E=n(433),O=a(n(318)),b=n(52),S=n(72),k=n(14),C=n(239),T=n(434);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var A=(0,h.withClusterList)({store:new O.default("deployments"),module:"deployments",name:"DEPLOYMENT",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var r=D(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){var r=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(r,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.disableStopButton=function(){var t=e.props.tableProps,r=t.data,n=t.selectedRowKeys;return(0,k.toJS)(r).filter((function(e){return-1!==n.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,T.getDeployStatus)(e)}))},e.getItemDesc=function(r){var n=(0,T.getWorkloadStatus)(r,e.props.module),a=n.status,o=n.reason;return o?_.default.createElement(y.default,{status:a,reason:t(o),data:r}):r.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue,o=r.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return _.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(r),desc:e.getItemDesc(r),isMultiCluster:r.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(r.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:a("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(v.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:n("updateTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module;return e.props.trigger("workload.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,supportGpuSelect:!0,rootStore:e.props.rootStore})},e}return(0,l.default)(n,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return _.default.createElement(h.ListPage,(0,i.default)({},this.props,{a:1}),_.default.createElement(p.default,(0,i.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"k8sVersion",get:function(){var e,t,r=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[r])||void 0===t?void 0:t.k8sVersion}},{key:"selectActions",get:function(){var e=this,r=this.props,n=r.tableProps,a=r.trigger,o=r.name,i=r.rootStore,c=this.disableStopButton();return(0,u.default)((0,g.default)(n,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){a("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:c,action:"edit",onClick:function(){return a("resource.batch.stop",{type:o,rowKey:"uid",success:i.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.module,a=r.name,o=r.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return o("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return o("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return o("workload.redeploy",{module:n,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){o("workload.delete",{type:a,detail:t,k8sVersion:e.k8sVersion})}}]}}]),n}(_.default.Component))||o,N=(0,C.inject)()((function(e){var t,r,n=e.match.params.cluster,a=null===(t=globals.clusterConfig)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.k8sVersion;return _.default.createElement(A,(0,i.default)({k8sVersion:a},e))}));r.default=N},3779:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(11),n(86),n(18),n(97),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(86),n(18),n(28),n(97),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(61)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(810)),m=a(n(788)),h=n(793),g=a(n(26)),y=a(n(804)),v=a(n(865)),_=a(n(0)),E=n(433),O=a(n(318)),b=n(52),S=n(72),k=n(14),C=n(434),T=n(239);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var A=(0,h.withClusterList)({store:new O.default("statefulsets"),module:"statefulsets",name:"STATEFULSET",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var r=D(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){var r=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(r,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.disableStopButton=function(){var t=e.props.tableProps,r=t.data,n=t.selectedRowKeys;return(0,k.toJS)(r).filter((function(e){return-1!==n.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,C.getStatefulSetStatus)(e)}))},e.getItemDesc=function(r){var n=(0,C.getWorkloadStatus)(r,e.props.module),a=n.status,o=n.reason;return o?_.default.createElement(y.default,{status:a,reason:t(o),data:r}):r.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue,o=r.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return _.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(r),desc:e.getItemDesc(r),isMultiCluster:r.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(r.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:a("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(v.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module;return e.props.trigger("workload.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,rootStore:e.props.rootStore})},e}return(0,l.default)(n,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return _.default.createElement(h.ListPage,this.props,_.default.createElement(p.default,(0,i.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"k8sVersion",get:function(){var e,t,r=this.props.match.params.cluster;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[r])||void 0===t?void 0:t.k8sVersion}},{key:"selectActions",get:function(){var e=this,r=this.props,n=r.tableProps,a=r.trigger,o=r.name,i=r.rootStore,c=this.disableStopButton();return(0,u.default)((0,g.default)(n,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){a("workload.batch.delete",{type:o,rowKey:"uid",k8sVersion:e.k8sVersion})}},{key:"stop",text:t("STOP"),disabled:c,action:"edit",onClick:function(){return a("resource.batch.stop",{type:o,rowKey:"uid",success:i.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.module,a=r.trigger,o=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return a("workload.redeploy",{module:n,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return a("workload.delete",{type:o,detail:t,k8sVersion:e.k8sVersion})}}]}}]),n}(_.default.Component))||o,N=(0,T.inject)()((function(e){var t,r,n=e.match.params.cluster,a=null===(t=globals.clusterConfig)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.k8sVersion;return _.default.createElement(A,(0,i.default)({k8sVersion:a},e))}));r.default=N},3780:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(11),n(86),n(18),n(97),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(86),n(18),n(28),n(97),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(61)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(810)),m=a(n(788)),h=n(793),g=a(n(26)),y=a(n(804)),v=a(n(865)),_=a(n(0)),E=n(433),O=a(n(318)),b=n(52),S=n(72),k=n(14),C=n(434);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,h.withClusterList)({store:new O.default("daemonsets"),module:"daemonsets",name:"DAEMONSET",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var r=T(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){var r=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(r,"/").concat(t))},e.disableStopButton=function(){var t=e.props.tableProps,r=t.data,n=t.selectedRowKeys;return(0,k.toJS)(r).filter((function(e){return-1!==n.indexOf(e.uid)})).some((function(e){return"Stopped"===(0,C.getDaemonSetStatus)(e)}))},e.getItemDesc=function(r){var n=(0,C.getWorkloadStatus)(r,e.props.module),a=n.status,o=n.reason;return o?_.default.createElement(y.default,{status:a,reason:t(o),data:r}):r.description||"-"},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue,o=r.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return _.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,b.getDisplayName)(r),desc:e.getItemDesc(r),to:"/clusters/".concat(u,"/projects/").concat(r.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:a("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return _.default.createElement(v.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return _.default.createElement(E.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,b.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module;return e.props.trigger("workload.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,rootStore:e.props.rootStore})},e}return(0,l.default)(n,[{key:"getStatus",value:function(){return S.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return _.default.createElement(h.ListPage,this.props,_.default.createElement(p.default,(0,i.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,r=e.tableProps,n=e.trigger,a=e.name,o=e.rootStore,i=this.disableStopButton();return(0,u.default)((0,g.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("workload.batch.delete",{type:a,rowKey:"uid"})}},{key:"stop",text:t("STOP"),disabled:i,action:"edit",onClick:function(){return n("resource.batch.stop",{type:a,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,r=e.module,n=e.name,a=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return a("workload.redeploy",{module:r,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("workload.delete",{type:n,detail:e})}}]}}]),n}(_.default.Component))||o;r.default=D},3781:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(810)),p=a(n(788)),m=a(n(792)),h=n(793),g=a(n(1069)),y=a(n(804)),v=a(n(0)),_=n(433),E=a(n(318)),O=n(52),b=n(72),S=n(434);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var C=(0,h.withClusterList)({store:new E.default("jobs"),module:"jobs",name:"JOB",rowKey:"uid"})(o=function(e){(0,l.default)(n,e);var r=k(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){var r=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(r,"/").concat(t))},e.getItemDesc=function(r){var n=(0,S.getWorkloadStatus)(r,e.props.module),a=n.status,o=n.reason;return o?v.default.createElement(y.default,{status:a,reason:t(o),data:r}):r.description||"-"},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue,o=r.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return v.default.createElement(p.default,{icon:b.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(r),desc:e.getItemDesc(r),isMultiCluster:r.isFedManaged,to:"/clusters/".concat(u,"/projects/").concat(r.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:a("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return v.default.createElement(g.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return v.default.createElement(_.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("LAST_RUN_TIME"),dataIndex:"updateTime",sorter:!0,sortOrder:n("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module;return e.props.trigger("workload.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,rootStore:e.props.rootStore})},e}return(0,c.default)(n,[{key:"getStatus",value:function(){return b.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps;return v.default.createElement(h.ListPage,this.props,v.default.createElement(m.default,(0,u.default)({},r,{tabs:this.tabs})),v.default.createElement(f.default,(0,u.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name,a=e.store;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:function(e){return a.rerun(e)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(v.default.Component))||o;r.default=C},3782:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(810)),p=a(n(788)),m=a(n(795)),h=a(n(792)),g=n(793),y=a(n(804)),v=a(n(0)),_=n(433),E=a(n(318)),O=n(52),b=n(72),S=n(434),k=n(239);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var T=(0,g.withClusterList)({store:new E.default("cronjobs"),module:"cronjobs",name:"CRONJOB",rowKey:"uid"})(o=function(e){(0,l.default)(n,e);var r=C(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){var r=e.props.match.params.cluster;e.props.routing.push("/clusters/".concat(r,"/").concat(t))},e.handleSwitch=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.props.store.switch(t,r,n).then((function(){e.props.routing.query()}))},e.getItemDesc=function(r){var n=(0,S.getWorkloadStatus)(r,e.props.module),a=n.status,o=n.reason;return o?v.default.createElement(y.default,{status:a,reason:t(o),data:r}):r.description||"-"},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.getFilteredValue,o=r.module,u=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,r){return v.default.createElement(p.default,{icon:b.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(r),desc:e.getItemDesc(r),to:"/clusters/".concat(u,"/projects/").concat(r.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:a("status"),isHideable:!0,search:!0,width:"15%",render:function(e,r){var n=(0,S.getWorkloadStatus)(r,o).status;return v.default.createElement(m.default,{type:n,name:t("CRONJOB_".concat(n.toUpperCase()))})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return v.default.createElement(_.Link,{to:"/clusters/".concat(u,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t,r,n=e.props,a=n.query,o=n.match,u=n.module,i=null===(t=globals.clusterConfig)||void 0===t||null===(r=t[o.params.cluster])||void 0===r?void 0:r.k8sVersion;return e.props.trigger("workload.create",{module:u,namespace:a.namespace,cluster:o.params.cluster,k8sVersion:i,success:function(){return e.props.routing.query()},rootStore:e.props.rootStore})},e}return(0,c.default)(n,[{key:"getStatus",value:function(){return b.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps;return v.default.createElement(g.ListPage,this.props,v.default.createElement(h.default,(0,u.default)({},r,{tabs:this.tabs})),v.default.createElement(f.default,(0,u.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){var r,a,o=null===(r=globals.clusterConfig)||void 0===r||null===(a=r[null==t?void 0:t.cluster])||void 0===a?void 0:a.k8sVersion;n("resource.baseinfo.edit",{detail:t,k8sVersion:o,success:function(){return e.props.routing.query()}})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){var r,a,o=null===(r=globals.clusterConfig)||void 0===r||null===(a=r[null==t?void 0:t.cluster])||void 0===a?void 0:a.k8sVersion;n("resource.yaml.edit",{detail:t,k8sVersion:o,success:function(){return e.props.routing.query()}})}},{show:function(e){return e.suspend},key:"start",icon:"start",text:t("START"),action:"edit",onClick:function(t){var r,n,a=null===(r=globals.clusterConfig)||void 0===r||null===(n=r[null==t?void 0:t.cluster])||void 0===n?void 0:n.k8sVersion;e.handleSwitch(t,!0,a)}},{show:function(e){return!e.suspend},key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:function(t){var r,n,a=null===(r=globals.clusterConfig)||void 0===r||null===(n=r[null==t?void 0:t.cluster])||void 0===n?void 0:n.k8sVersion;e.handleSwitch(t,!1,a)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){var r,o,u=null===(r=globals.clusterConfig)||void 0===r||null===(o=r[null==t?void 0:t.cluster])||void 0===o?void 0:o.k8sVersion;n("resource.delete",{type:a,detail:t,k8sVersion:u,success:function(){return e.props.routing.query()}})}}]}}]),n}(v.default.Component))||o,D=(0,k.inject)()((function(e){var t,r,n=e.match.params.cluster,a=null===(t=globals.clusterConfig)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.k8sVersion;return v.default.createElement(T,(0,u.default)({k8sVersion:a},e))}));r.default=D},3783:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(433),m=n(186),h=a(n(839)),g=a(n(792)),y=n(793),v=a(n(804)),_=a(n(810)),E=n(52),O=n(72),b=a(n(452)),S=a(n(936)),k=a(n(3784));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var T=(0,y.withClusterList)({store:new b.default,module:"pods",name:"POD",rowKey:"uid"})(o=(0,S.default)(["event"])(o=function(e){(0,l.default)(n,e);var r=C(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getItemDesc=function(r){var n=r.podStatus,a=n.status,o=n.type;return"running"!==o&&"completed"!==o?f.default.createElement(v.default,{status:o,reason:t(a),data:r,type:"pod",onShowEvents:function(){return e.showEvents(r)}}):t(o.toUpperCase())},e.getColumns=function(){var r=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:e.renderAvatar},{title:t("STATUS"),dataIndex:"status",filters:e.getPodsStatus(),isHideable:!0,search:!0,with:"5%",render:function(e,r){var n=r.podStatus;return f.default.createElement("span",null,t(n.type.toUpperCase()))}},{title:t("NODE_SI"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIP",search:!0,isHideable:!0,width:"15%",render:function(e,t){var r=t.podIp;return f.default.createElement("span",null,r)}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:r("startTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showEvents=function(r){e.props.trigger("pod.events",{detail:r,title:f.default.createElement("span",null,f.default.createElement(m.Icon,{name:"event"}),t("VIEW_EVENTS")),cluster:e.props.match.params.cluster})},e.renderAvatar=function(t,r){var n=e.props.module,a=e.props.match.params.cluster,o=r.podStatus;return f.default.createElement("div",{className:k.default.avatar},f.default.createElement("div",{className:k.default.icon},f.default.createElement(m.Icon,{name:O.ICON_TYPES[n],size:40}),f.default.createElement(h.default,{className:k.default.indicator,type:o.type,flicker:!0})),f.default.createElement("div",null,f.default.createElement(p.Link,{className:k.default.title,to:"/clusters/".concat(a,"/projects/").concat(r.namespace,"/").concat(n,"/").concat(t)},t),f.default.createElement("div",{className:k.default.desc},e.getItemDesc(r))))},e.renderNode=function(r,n){var a=e.props.match.params.cluster,o=n.node,u=n.nodeIp;if(!o)return"-";var i=t("NODE_IP",{node:o,ip:u});return f.default.createElement(p.Link,{to:"/clusters/".concat(a,"/nodes/").concat(o)},i)},e.renderStatus=function(e){return f.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getPodsStatus",value:function(){return O.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps;return f.default.createElement(y.ListPage,this.props,f.default.createElement(g.default,r),f.default.createElement(_.default,(0,u.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),hideColumn:["status"],onCreate:null,cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e=this.props,r=e.getData,n=e.name,a=e.trigger;return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return a("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e,success:r})}}]}}]),n}(f.default.Component))||o)||o;r.default=T},3784:function(e,t,r){e.exports={avatar:"hnCTvkjeNtr89Olva-MrQ",icon:"QQwUZJfYSbbO5IL2O_lym",indicator:"_1kPphabea24-UMspwsiDee",title:"_3Qr-w3lIIGV50Tlv7bCkkP",desc:"_1_C263QNG8-nzlZSpuGBqZ"}},3785:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(11),n(73),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(73),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(61)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=n(186),m=a(n(810)),h=a(n(788)),g=a(n(790)),y=a(n(792)),v=n(793),_=a(n(26)),E=a(n(0)),O=n(433),b=a(n(443)),S=n(52),k=n(72);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,v.withClusterList)({store:new b.default,module:"services",name:"SERVICE",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var r=C(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.renderExternalService=function(e){var r={des:"-",title:"-"};return"NodePort"===e.specType&&(r.des=t("PORT_PL"),r.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(r.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),r.title=e.loadBalancerIngress.join("; ")),e.externalName?E.default.createElement(g.default,{description:r.des,title:function(){return E.default.createElement(p.Tooltip,{content:e.externalName},E.default.createElement("span",null,r.title))}}):E.default.createElement(g.default,{description:t("".concat(r.des)),title:r.title})},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,width:"20%",render:function(e,t){return E.default.createElement(h.default,{icon:k.ICON_TYPES[a],iconSize:40,title:(0,S.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(a,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"15%",render:function(e){return E.default.createElement(O.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,S.showNameAndAlias)(e,"project"))}},{title:t("INTERNAL_ACCESS"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"15%",render:function(e,r){return E.default.createElement(g.default,{title:r.clusterIP||"",description:t("".concat(r.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,r){return e.renderExternalService(r)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"10%",render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module,o=t.getData;return e.props.trigger("service.simple.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,success:o})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps;return E.default.createElement(v.ListPage,this.props,E.default.createElement(y.default,r),E.default.createElement(m.default,(0,i.default)({},n,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",show:this.showAction,onClick:function(e){return n("service.edit",{detail:e})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:function(t){return e.showAction(t)&&t.type===k.SERVICE_TYPES.VirtualIP},onClick:function(e){return n("service.gateway.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return n("service.delete",{type:a,detail:e})}}]}},{key:"selectActions",get:function(){var e=this.props,r=e.tableProps,n=e.trigger,a=e.name;return(0,u.default)((0,_.default)(r,"tableActions.selectActions",{})).filter((function(e){return"delete"!==e.key})).concat([{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("service.batch.delete",{type:a,rowKey:"uid"})}}])}}]),n}(E.default.Component))||o;r.default=T},3786:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(73),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(73),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(810)),p=a(n(788)),m=a(n(792)),h=n(793),g=a(n(0)),y=n(433),v=a(n(917)),_=n(52),E=n(72);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,h.withClusterList)({store:new v.default,module:"ingresses",name:"ROUTE",rowKey:"uid"})(o=function(e){(0,l.default)(n,e);var r=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(e,t){return g.default.createElement(p.default,{icon:E.ICON_TYPES[a],iconSize:40,title:(0,_.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(a,"/").concat(e)})}},{title:t("GATEWAY_ADDRESS_TCAP"),dataIndex:"loadBalancerIngress",isHideable:!0,width:"22%",render:function(e){return e.join("; ")}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return g.default.createElement(y.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,_.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module,o=t.getData;return e.props.trigger("router.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,success:function(){return o()}})},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.bannerProps,n=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(m.default,r),g.default.createElement(f.default,(0,u.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",show:this.showAction,onClick:function(e){return r("router.rules.edit",{detail:e,namespace:e.namespace})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",show:this.showAction,onClick:function(e){return r("router.annotations.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(g.default.Component))||o;r.default=b},3787:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(30)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(63)),m=a(n(796)),h=a(n(788)),g=a(n(789)),y=a(n(790)),v=a(n(792)),_=n(793),E=a(n(0)),O=n(3788),b=a(n(3789)),S=n(52),k=a(n(3790));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var A=(0,_.withClusterList)({store:new b.default,module:"clusteringresssettings",name:"ROUTE_SETTING",rowKey:"uid",authKey:"ingress-utils"})(o=function(e){(0,s.default)(n,e);var r=D(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getColumns=function(){var r=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){return E.default.createElement(h.default,{icon:O.ReactComponent,title:(0,S.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,noLink:!0})}},{title:t("DOMAIN_NAME_TCAP"),dataIndex:"uniqueDomainPattern",isHideable:!0,search:!0}]},e.showCreate=function(){var t=e.props,r=t.query,n=t.match,a=t.module,o=t.getData;return e.props.trigger("router.setting.create",{module:a,namespace:r.namespace,cluster:n.params.cluster,success:function(){return o()}})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,r=e.match,n=e.bannerProps,a=e.tableProps;return E.default.createElement(_.ListPage,this.props,E.default.createElement(v.default,(0,i.default)({},n,{icon:"loadbalancer"})),!this.showEmpty&&E.default.createElement("div",{className:k.default.routesSetting},E.default.createElement(g.default,null,E.default.createElement("div",{className:k.default.panel},E.default.createElement(y.default,{icon:O.ReactComponent,title:t("INVALID_DOMAIN_NAME"),description:t("ROUTE_SETTING_EMPTY_DESC")})))),E.default.createElement(m.default,(0,i.default)({},a,{itemActions:this.itemActions,className:k.default.table,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:r.params.cluster,emptyProps:{title:t("ROUTE_SETTING_EMPT"),icon:O.ReactComponent},createText:t("CREATE_DOMAIN_NAME")})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name,a=e.getData;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("router.setting.edit",{detail:e,isEdit:!0,success:a})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("resource.delete",{type:n,detail:e,success:a})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name,o=r.tableProps,u=o.rowKey;return T(T({},o.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){n("resource.batch.delete",{type:a,title:t("DELETE_MULTIPLE_ROUTE_SETTING"),rowKey:u,success:e.routing.query})}}]})}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEmpty",get:function(){var e,t=null===(e=this.props.store)||void 0===e?void 0:e.list,r=t.filters,n=t.total;return!t.isLoading&&(0,p.default)(r)&&0===n}}]),n}(E.default.Component))||o;r.default=A},3788:function(e,t,r){"use strict";r.r(t),r.d(t,"ReactComponent",(function(){return s}));var n=r(315),a=r.n(n),o=r(0),u=r.n(o),i=u.a.createElement("path",{d:"M28.32 8.933c.848 1.95 1.546 4.35 2.017 7.067H17.663c.471-2.717 1.17-5.117 2.017-7.067.807-1.856 1.69-3.169 2.52-3.975C23.013 4.165 23.617 4 24 4c.381 0 .986.165 1.8.958.83.806 1.713 2.119 2.52 3.975zM18.518 43.24A20.05 20.05 0 015.664 32h8.957c.748 4.636 2.127 8.566 3.897 11.24zM24.686 43.842a8.477 8.477 0 01.796-11.068l.774-.774h-8.593c.471 2.717 1.17 5.117 2.017 7.067.807 1.856 1.69 3.169 2.52 3.975.814.793 1.418.958 1.8.958.18 0 .409-.037.686-.158zM14.621 16c.748-4.636 2.127-8.566 3.897-11.24A20.051 20.051 0 005.664 16h8.957zM33.378 16c-.747-4.636-2.126-8.566-3.896-11.24A20.051 20.051 0 0142.336 16h-8.958z",fill:"#B6C2CD"}),c=u.a.createElement("path",{d:"M14.237 19A52.183 52.183 0 0014 24c0 1.717.082 3.39.237 5H4.63A20.036 20.036 0 014 24c0-1.727.219-3.402.63-5h9.607zM30.887 27.369L29.256 29H17.252A49.047 49.047 0 0117 24c0-1.733.088-3.406.252-5h13.496a49.901 49.901 0 01.139 8.369zM34.774 23.482a8.477 8.477 0 019.081-1.902A19.918 19.918 0 0043.37 19h-9.607a52.183 52.183 0 01.236 5.257l.775-.775zM42.518 31.225l-3.098 3.097 2.121 2.122 3.098-3.098a5.475 5.475 0 10-7.743-7.743l-3.098 3.098 2.121 2.12 3.098-3.097a2.475 2.475 0 013.5 3.5zM27.604 34.895l3.097-3.097 2.121 2.121-3.097 3.097a2.475 2.475 0 103.5 3.5l3.098-3.096 2.121 2.121-3.097 3.097a5.475 5.475 0 01-7.743-7.743z",fill:"#324558"}),l=u.a.createElement("path",{d:"M33.411 34.508l3.097-3.097 2.323 2.323-3.097 3.097-2.323-2.323z",fill:"#324558"}),s=function(e){return u.a.createElement("svg",a()({viewBox:"0 0 48 48",fill:"none",width:"1em",height:"1em"},e),i,c,l)};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI4LjMxOTcgOC45MzI3MkMyOS4xNjc2IDEwLjg4MjcgMjkuODY1OCAxMy4yODI3IDMwLjMzNjcgMTZIMTcuNjYzQzE4LjEzNCAxMy4yODI3IDE4LjgzMjIgMTAuODgyNyAxOS42OCA4LjkzMjcyQzIwLjQ4NyA3LjA3NjY2IDIxLjM3MDYgNS43NjQwMiAyMi4xOTkzIDQuOTU3OEMyMy4wMTQxIDQuMTY1MTkgMjMuNjE4MyA0IDIzLjk5OTkgNEMyNC4zODE0IDQgMjQuOTg1NyA0LjE2NTE5IDI1LjgwMDQgNC45NTc4QzI2LjYyOTIgNS43NjQwMiAyNy41MTI4IDcuMDc2NjYgMjguMzE5NyA4LjkzMjcyWiIgZmlsbD0iI0I2QzJDRCIvPgo8cGF0aCBkPSJNMTguNTE4MSA0My4yMzk0QzEyLjc0NDIgNDEuNTk3NSA4LjAzNDk4IDM3LjQyNjQgNS42NjQwNiAzMkgxNC42MjE0QzE1LjM2OTIgMzYuNjM1NyAxNi43NDgxIDQwLjU2NjIgMTguNTE4MSA0My4yMzk0WiIgZmlsbD0iI0I2QzJDRCIvPgo8cGF0aCBkPSJNMjQuNjg2MSA0My44NDE3QzIyLjE5OCA0MC41MjIxIDIyLjQ2MzQgMzUuNzkyNCAyNS40ODIyIDMyLjc3MzZMMjYuMjU1OCAzMkgxNy42NjNDMTguMTM0IDM0LjcxNzMgMTguODMyMiAzNy4xMTczIDE5LjY4IDM5LjA2NzNDMjAuNDg3IDQwLjkyMzMgMjEuMzcwNiA0Mi4yMzYgMjIuMTk5MyA0My4wNDIyQzIzLjAxNDEgNDMuODM0OCAyMy42MTgzIDQ0IDIzLjk5OTkgNDRDMjQuMTc5NiA0NCAyNC40MDg4IDQzLjk2MzMgMjQuNjg2MSA0My44NDE3WiIgZmlsbD0iI0I2QzJDRCIvPgo8cGF0aCBkPSJNMTQuNjIxNCAxNkMxNS4zNjkyIDExLjM2NDMgMTYuNzQ4MSA3LjQzMzgxIDE4LjUxODEgNC43NjA1N0MxMi43NDQyIDYuNDAyNTQgOC4wMzQ5OCAxMC41NzM2IDUuNjY0MDYgMTZIMTQuNjIxNFoiIGZpbGw9IiNCNkMyQ0QiLz4KPHBhdGggZD0iTTMzLjM3ODQgMTZDMzIuNjMwNiAxMS4zNjQzIDMxLjI1MTcgNy40MzM4IDI5LjQ4MTcgNC43NjA1N0MzNS4yNTU2IDYuNDAyNTQgMzkuOTY0OCAxMC41NzM2IDQyLjMzNTcgMTZIMzMuMzc4NFoiIGZpbGw9IiNCNkMyQ0QiLz4KPHBhdGggZD0iTTE0LjIzNyAxOUMxNC4wODE4IDIwLjYwOTcgMTQgMjIuMjgyOSAxNCAyNEMxNCAyNS43MTcxIDE0LjA4MTggMjcuMzkwMyAxNC4yMzcgMjlINC42MzAwOUM0LjIxODc3IDI3LjQwMTkgNCAyNS43MjY1IDQgMjRDNCAyMi4yNzM1IDQuMjE4NzYgMjAuNTk4MSA0LjYzMDA5IDE5SDE0LjIzN1oiIGZpbGw9IiMzMjQ1NTgiLz4KPHBhdGggZD0iTTMwLjg4NzEgMjcuMzY4OUwyOS4yNTU5IDI5SDE3LjI1MTdDMTcuMDg4MSAyNy40MDY0IDE3IDI1LjczMjYgMTcgMjRDMTcgMjIuMjY3NCAxNy4wODgxIDIwLjU5MzYgMTcuMjUxNyAxOUgzMC43NDgzQzMwLjkxMTkgMjAuNTkzNiAzMSAyMi4yNjc0IDMxIDI0QzMxIDI1LjE1MSAzMC45NjExIDI2LjI3NjEgMzAuODg3MSAyNy4zNjg5WiIgZmlsbD0iIzMyNDU1OCIvPgo8cGF0aCBkPSJNMzQuNzc0MyAyMy40ODE2QzM3LjIyOTMgMjEuMDI2NyA0MC44MTU2IDIwLjM5MjYgNDMuODU1IDIxLjU3OTVDNDMuNzQ5IDIwLjcwMDggNDMuNTg2IDE5LjgzOTcgNDMuMzY5OSAxOUgzMy43NjNDMzMuOTE4MiAyMC42MDk3IDM0IDIyLjI4MjkgMzQgMjRDMzQgMjQuMDg1NiAzMy45OTk4IDI0LjE3MTEgMzMuOTk5NCAyNC4yNTY2TDM0Ljc3NDMgMjMuNDgxNloiIGZpbGw9IiMzMjQ1NTgiLz4KPHBhdGggZD0iTTQyLjUxNzYgMzEuMjI0OUwzOS40MjAxIDM0LjMyMjRMNDEuNTQxNCAzNi40NDM4TDQ0LjYzODkgMzMuMzQ2MkM0Ni43NzcyIDMxLjIwOCA0Ni43NzcyIDI3Ljc0MTIgNDQuNjM4OSAyNS42MDNDNDIuNTAwNyAyMy40NjQ3IDM5LjAzMzkgMjMuNDY0NyAzNi44OTU2IDI1LjYwM0wzMy43OTgxIDI4LjcwMDVMMzUuOTE5NCAzMC44MjE4TDM5LjAxNjkgMjcuNzI0M0MzOS45ODM2IDI2Ljc1NzYgNDEuNTUwOSAyNi43NTc2IDQyLjUxNzYgMjcuNzI0M0M0My40ODQzIDI4LjY5MSA0My40ODQzIDMwLjI1ODIgNDIuNTE3NiAzMS4yMjQ5WiIgZmlsbD0iIzMyNDU1OCIvPgo8cGF0aCBkPSJNMjcuNjAzNyAzNC44OTQ5TDMwLjcwMDggMzEuNzk3OEwzMi44MjIxIDMzLjkxOTFMMjkuNzI1IDM3LjAxNjJDMjguNzU4MyAzNy45ODI5IDI4Ljc1ODMgMzkuNTUwMiAyOS43MjUgNDAuNTE2OUMzMC42OTE3IDQxLjQ4MzUgMzIuMjU5IDQxLjQ4MzUgMzMuMjI1NyA0MC41MTY5TDM2LjMyMjggMzcuNDE5OEwzOC40NDQxIDM5LjU0MTFMMzUuMzQ3IDQyLjYzODJDMzMuMjA4NyA0NC43NzY0IDI5Ljc0MTkgNDQuNzc2NCAyNy42MDM3IDQyLjYzODJDMjUuNDY1NCA0MC40OTk5IDI1LjQ2NTQgMzcuMDMzMSAyNy42MDM3IDM0Ljg5NDlaIiBmaWxsPSIjMzI0NTU4Ii8+CjxwYXRoIGQ9Ik0zMy40MTEyIDM0LjUwODNMMzYuNTA4NSAzMS40MTFMMzguODMxNSAzMy43MzRMMzUuNzM0MiAzNi44MzEzTDMzLjQxMTIgMzQuNTA4M1oiIGZpbGw9IiMzMjQ1NTgiLz4KPC9zdmc+Cg=="},3789:function(e,t,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(27),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var a=n(r(43)),o=n(r(61)),u=n(r(58));r(41);var i,c=n(r(44)),l=n(r(30)),s=n(r(36)),d=n(r(37)),f=n(r(55)),p=n(r(56)),m=n(r(51)),h=n(r(49)),g=n(r(26)),y=r(14),v=r(72);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var b=(i=function(e){(0,f.default)(n,e);var t,r=O(n);function n(){var e;(0,s.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).module="clusteringresssettings",e.getResourceUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"kapis/gateway.kubesphere.io/v1alpha2".concat(e.getPath(t),"/").concat(e.module)},e.getFilterParams=function(e){var t=E({},e);return t.uniqueDomainPattern&&(t.fieldSelector="spec.uniqueDomainPattern=".concat(t.uniqueDomainPattern),delete t.uniqueDomainPattern),t.name&&(t.fieldSelector="metadata.name=".concat(t.name),delete t.name),t},e}return(0,d.default)(n,[{key:"checkName",value:function(e,t){return request.get(this.getResourceUrl(e),this.getFilterParams(t),{headers:{"x-check-exist":!0}})}},{key:"fetchList",value:(t=(0,c.default)(a.default.mark((function e(){var t,r,n,i,c,l,s,d,f,p,m=this,h=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r=t.cluster,n=t.workspace,i=t.namespace,c=t.more,l=t.devops,s=(0,u.default)(t,["cluster","workspace","namespace","more","devops"]),this.list.isLoading=!0,s.sortBy||void 0!==s.ascending||(s.sortBy=v.LIST_DEFAULT_ORDER[this.module]||"createTime"),s.limit!==1/0&&-1!==s.limit||(s.page=1),s.limit=s.limit||10,s.page=s.page||1,e.next=8,request.get(this.getResourceUrl({cluster:r,workspace:n,namespace:i,devops:l}),this.getFilterParams(s));case 8:return d=e.sent,f=((0,g.default)(d,"items")||[]).map((function(e){return E(E({cluster:r,namespace:i},e),m.mapper(e))})),p=1===Number(s.page)?f.length+(d.metadata.remainingItemCount||0):this.list.total,this.list.update(E(E({data:c?[].concat((0,o.default)(this.list.data),(0,o.default)(f)):f,total:p},s),{},{limit:Number(s.limit)||10,page:Number(s.page)||1,isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",f);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(n(r(68)).default),(0,h.default)(i.prototype,"checkName",[y.action],Object.getOwnPropertyDescriptor(i.prototype,"checkName"),i.prototype),(0,h.default)(i.prototype,"fetchList",[y.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchList"),i.prototype),i);t.default=b},3790:function(e,t,r){e.exports={panel:"FyXk2dppIa5i82ApkI1Ql",routesSetting:"_3UOnCQ8P2oZzf_eNyRK1IA",table:"_228gCjzBUQV2Q4vU2rUrfl"}},3791:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(16),n(10),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(42),n(16),n(10),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(810)),p=a(n(788)),m=n(793),h=a(n(0)),g=n(433),y=a(n(851)),v=n(52),_=n(72),E=a(n(3792));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,m.withClusterList)({store:new y.default,module:"secrets",name:"SECRET",rowKey:"uid"})(o=function(e){(0,l.default)(n,e);var r=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.showSetDefault=function(e){return"kubernetes.io/dockerconfigjson"===e.type&&!e.isDefault},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getDefaultLabel=function(e,r){return r.isDefault?h.default.createElement("div",{className:E.default.titleRow},h.default.createElement("span",{className:E.default.title},e),h.default.createElement("span",{className:E.default.tag},t("DEFAULT_IMAGE_REGISTRY"))):e},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,r){return h.default.createElement(p.default,{icon:_.ICON_TYPES[a],iconSize:40,title:e.getDefaultLabel((0,v.getDisplayName)(r),r),desc:r.description||"-",to:"/clusters/".concat(o,"/projects/").concat(r.namespace,"/").concat(a,"/").concat(t),isMultiCluster:r.isFedManaged})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"16%",render:function(e){return h.default.createElement(g.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,v.showNameAndAlias)(e,"project"))}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"20%",render:function(e){return _.SECRET_TYPES[e]?t(_.SECRET_TYPES[e]):e}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"16%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,n=t.module,a=t.getData;return e.props.trigger("secret.create",{module:n,cluster:r.params.cluster,namespace:r.params.namespace,success:function(){return a()}})},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return h.default.createElement(m.ListPage,this.props,h.default.createElement(f.default,(0,u.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name,o=r.getData;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){n("secret.edit",{detail:e,success:o})}},{key:"default",icon:"star",text:t("SET_AS_DEFAULT"),action:"edit",show:this.showSetDefault,onClick:function(t){var r=e.props.match.params.cluster;n("secret.default",{cluster:r,detail:t,success:o})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){n("resource.delete",{type:a,detail:e,success:o})}}]}}]),n}(h.default.Component))||o;r.default=b},3792:function(e,t,r){e.exports={baseTag:"_3uVuUGuC2EHTxXkFjjvcmE",titleRow:"_21OATtg2uOyC5CA0xK8Cgb",tag:"_23UpDickjcJr3y2liGaM-4",title:"_361jFI80H7w8CSY6aff8x4"}},3793:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(73),n(16),n(10),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(73),n(42),n(16),n(10),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(810)),p=a(n(788)),m=n(793),h=a(n(0)),g=n(433),y=a(n(1e3)),v=n(52),_=n(72);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,m.withClusterList)({store:new y.default,module:"configmaps",name:"CONFIGMAP",rowKey:"uid"})(o=function(e){(0,l.default)(n,e);var r=E(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(e,t){return h.default.createElement(p.default,{icon:_.ICON_TYPES[a],iconSize:40,title:(0,v.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(a,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return h.default.createElement(g.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,v.showNameAndAlias)(e,"project"))}},{title:t("FIELDS"),dataIndex:"data",isHideable:!0,width:"13%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,n=t.module;return e.props.trigger("configmap.create",{module:n,namespace:r.params.namespace,cluster:r.params.cluster})},e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return h.default.createElement(m.ListPage,this.props,h.default.createElement(f.default,(0,u.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){return r("configmap.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(h.default.Component))||o;r.default=O},3794:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(30)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(810)),m=a(n(788)),h=n(793),g=a(n(0)),y=n(433),v=a(n(1214)),_=n(52),E=n(72);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var k=(0,h.withClusterList)({store:new v.default,module:"serviceaccounts",name:"SERVICE_ACCOUNT",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var r=S(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(e,t){return g.default.createElement(m.default,{icon:E.ICON_TYPES[a],iconSize:40,title:(0,_.getDisplayName)(t),desc:t.description||"-",to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(a,"/").concat(e),isMultiCluster:t.isFedManaged})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"16%",render:function(e){return g.default.createElement(y.Link,{to:"/clusters/".concat(o,"/projects/").concat(e)},(0,_.showNameAndAlias)(e,"project"))}},{title:t("ROLE"),dataIndex:"role",isHideable:!0},{title:t("SECRET"),dataIndex:"secrets",isHideable:!0,render:function(e,t){return e.map((function(e){return g.default.createElement("div",{key:e.name},g.default.createElement(y.Link,{to:"/clusters/".concat(o,"/projects/").concat(t.namespace,"/secrets/").concat(e.name)},e.name))}))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,n=t.module;return e.props.trigger("serviceaccount.create",{module:n,namespace:r.params.namespace,cluster:r.params.cluster})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,r=e.tableProps;return g.default.createElement(h.ListPage,this.props,g.default.createElement(p.default,(0,i.default)({},r,{columns:this.getColumns(),itemActions:this.itemActions,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return n("serviceaccount.edit",b({detail:t},e.props.match.params))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return n("serviceaccount.role.edit",b({detail:t},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{type:a,detail:e})}}]}}]),n}(g.default.Component))||o;r.default=k},3795:function(e,t,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(136),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(62),r(7);var a,o=n(r(30)),u=n(r(36)),i=n(r(37)),c=n(r(55)),l=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(239),p=r(186),m=r(317),h=n(r(845)),g=n(r(3796));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var E=(0,f.inject)("rootStore")(a=(0,f.observer)(a=function(e){(0,c.default)(r,e);var t=_(r);function r(e){var n;(0,u.default)(this,r),n=t.call(this,e);var a=new h.default({cluster:n.cluster});return n.props.rootStore.register("monitoring",a),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.rootStore.monitoring.checkEtcd()}},{key:"render",value:function(){return d.default.createElement(p.Loading,{spinning:this.props.rootStore.monitoring.etcdChecking},(0,m.renderRoutes)(g.default))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return v(v({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(d.default.Component))||a)||a;t.default=E},3796:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(3797)),u=n(r(3816)),i=n(r(3818)),c=n(r(3820)),l=n(r(3822)),s=n(r(3824)),d="/clusters/:cluster/monitor-cluster",f=[{path:"".concat(d,"/overview"),title:"OVERVIEW",component:o.default,exact:!0},{path:"".concat(d,"/resource"),title:"PHYSICAL_RESOURCES_MONITORING",component:u.default,exact:!0},{path:"".concat(d,"/etcd"),title:"ETCD_MONITORING",component:i.default,requireETCD:!0,exact:!0},{path:"".concat(d,"/api-server"),title:"API_SERVER_MONITORING",component:c.default,exact:!0},{path:"".concat(d,"/scheduler"),title:"SCHEDULER_MONITORING",component:l.default,exact:!0},{path:"".concat(d,"/ranking"),title:"RESOURCE_USAGE_RANKING",component:s.default,exact:!0},(0,a.getIndexRoute)({path:d,to:"".concat(d,"/overview"),exact:!0})];t.default=f},3797:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(6),n(18),n(97),n(16),n(9),n(4),n(23),n(24),n(17),n(62),n(7),n(110),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(6),n(18),n(28),n(97),n(42),n(16),n(9),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(7),n(110);var o=a(n(30)),u=a(n(43));n(41);var i,c,l=a(n(44)),s=a(n(36)),d=a(n(37)),f=a(n(55)),p=a(n(56)),m=a(n(51)),h=a(n(49)),g=a(n(0)),y=n(14),v=n(239),_=a(n(3)),E=a(n(26)),O=a(n(988)),b=n(186),S=a(n(801)),k=n(822),C=n(1132),T=a(n(3815));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var A=(0,v.inject)("rootStore")(i=(0,v.observer)((c=function(e){(0,f.default)(n,e);var r=D(n);function n(e){var t;return(0,s.default)(this,n),(t=r.call(this,e)).updateData=function(){t.timer=setTimeout((0,l.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.componentMonitoringStore.requestHealthMetrics();case 2:t.updateData();case 3:case"end":return e.stop()}}),e)}))),2e3)},t.getComponentStatus=function(e){return(e.conditions||[]).some((function(e){return"Ture"!==e.status&&"Healthy"!==e.type}))?"unhealthy":"healthy"},t.getCoreComponentStatus=function(){var e=t.componentHealth.data,r=void 0===e?{}:e,n=r.kubernetes,a=void 0===n?[]:n,o=r.node,u=void 0===o?{}:o,i={};return a.forEach((function(e){i[(0,E.default)(e,"metadata.name")]=t.getComponentStatus(e)})),i.node=u.healthyNodes===u.totalNodes?"healthy":"unhealthy",i["controller-manager"]=t.componentHealth.supportControllerManager?"healthy":"unhealthy",i.scheduler=t.componentHealth.supportKsScheduler?"healthy":"unhealthy",i["etcd-0"]=t.supportETCD?"healthy":"unhealthy",i},t.fetchData=function(){t.componentMonitoringStore.fetchHealthMetrics()},t.handleNodeClick=function(){globals.app.hasPermission({module:"nodes",action:"view",cluster:t.cluster})&&t.routing.push("/clusters/".concat(t.cluster,"/nodes"))},t.handleComponentsClick=function(e,r){"kubeSystem"===r&&(r="kubernetes"),globals.app.hasPermission({module:"monitoring",action:"view",cluster:t.cluster})&&!e&&t.routing.push("/clusters/".concat(t.cluster,"/components?type=").concat(r))},t.componentMonitoringStore=new O.default({cluster:t.cluster}),t.fetchData(),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"renderNodeStatus",value:function(){var e=this.componentHealth,r=e.counts,n=e.isLoading,a=void 0!==n&&n,o=r.node||{},u=o.health,i=void 0===u?0:u,c=o.total,l=void 0===c?0:c;return g.default.createElement(S.default,{className:T.default.node,title:t("CLUSTER_NODE_STATUS")},g.default.createElement(b.Loading,{spinning:a},g.default.createElement(k.StatusCircle,{theme:"light",className:T.default.nodeStatus,name:t("NODE_ONLINE_STATUS"),legend:["ONLINE_NODES","ALL_NODES"],used:i,total:l,onClick:this.handleNodeClick})))}},{key:"renderServiceComponents",value:function(){var e=this,r=this.componentHealth.componentCounts,n=[{type:"kubesphere",icon:"/assets/kubesphere.svg"},{type:"kubeSystem",icon:"/assets/kubernetes.svg"},{type:"istio",icon:"/assets/istio.svg",disabled:!globals.app.hasClusterModule(this.cluster,"servicemesh")},{type:"monitoring",icon:"/assets/monitoring.svg",disabled:!globals.app.hasClusterModule(this.cluster,"monitoring")},{type:"logging",icon:"/assets/logging.svg",disabled:!globals.app.hasClusterModule(this.cluster,"logging")},{type:"devops",icon:"/assets/dev-ops.svg",disabled:!globals.app.hasClusterModule(this.cluster,"devops")}];return g.default.createElement("div",{className:(0,_.default)(T.default.list,T.default.service)},n.map((function(n){return g.default.createElement("div",{key:n.type,className:(0,_.default)(T.default.item,(0,o.default)({},T.default.disabled,n.disabled)),onClick:function(){return e.handleComponentsClick(n.disabled,n.type)}},g.default.createElement("img",{src:n.icon}),n.disabled?g.default.createElement("span",null,t("DISABLED")):g.default.createElement("p",null,(0,E.default)(r,"[".concat(n.type,"].health"),0),g.default.createElement("span",null,"/",(0,E.default)(r,"[".concat(n.type,"].total"),0))))})))}},{key:"renderCoreComponents",value:function(){var e=this.getCoreComponentStatus(),r=[{type:"etcd-0",name:"etcd"},{type:"controller-manager",name:t("CONTROLLER_MANAGER")},{type:"scheduler",name:t("KUBERNETES_SCHEDULER")}];return g.default.createElement("div",{className:(0,_.default)(T.default.list,T.default.core)},r.map((function(t){var r=e[t.type];return g.default.createElement("div",{key:t.type,className:T.default.item},g.default.createElement("div",{className:(0,_.default)(T.default.itemIcon,T.default[r])},g.default.createElement(b.Icon,{name:"healthy"===r||"ready"===r?"check":"substract",type:"light",size:16})),g.default.createElement("p",{title:t.name},t.name))})))}},{key:"renderComponentStatus",value:function(){var e=this.componentMonitoringStore.health.isLoading,r=void 0!==e&&e;return g.default.createElement(S.default,{className:T.default.components,title:t("COMPONENT_STATUS")},g.default.createElement(b.Loading,{spinning:r},g.default.createElement("div",{className:T.default.wrapper},this.renderServiceComponents(),this.renderCoreComponents())))}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(b.Columns,{className:"is-1_1"},g.default.createElement(b.Column,{className:"is-5"},this.renderNodeStatus()),g.default.createElement(b.Column,{className:"is-7"},this.renderComponentStatus())),g.default.createElement(b.Columns,null,g.default.createElement(b.Column,{className:"is-12"},g.default.createElement(C.ClusterResourceStatus,{cluster:this.cluster}),this.supportETCD&&g.default.createElement(C.ETCDStatus,{cluster:this.cluster}),g.default.createElement(C.ServiceComponentStatus,{cluster:this.cluster}))))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"componentHealth",get:function(){return(0,y.toJS)(this.componentMonitoringStore.health)}},{key:"supportETCD",get:function(){return this.props.rootStore.monitoring.supportETCD}}]),n}(g.default.Component),(0,h.default)(c.prototype,"componentHealth",[y.computed],Object.getOwnPropertyDescriptor(c.prototype,"componentHealth"),c.prototype),(0,h.default)(c.prototype,"supportETCD",[y.computed],Object.getOwnPropertyDescriptor(c.prototype,"supportETCD"),c.prototype),i=c))||i)||i;r.default=A},3815:function(e,t,r){e.exports={node:"_3i-uxhPvdOU7S87_Y_mDGo",nodeStatus:"dcF8cBxuJtvRguAP4tyZY",components:"iWa6mM_kmem6_FeIMa4Pl",wrapper:"_3btAUBGyO6S5qH0FSnXeTv",list:"_3L8WX-6mq4GV4pbaROMlGJ",item:"_2UinRAcLgwuDAMGFx7YxbZ",disabled:"_1HAzX3NlEQy_mvZTgYwzYN",service:"_33modxTT0s7VIqxv-YEXZn",core:"kxr_ctYj8oXbD9VAkJOeH",itemIcon:"_1OmtFwq6wNRWsioVW_CD22",healthy:"_2QxcTXrERt_mX8QVqRxkEJ",ready:"_3Au1Y8qOTFYdO_gsobjOyD",unhealthy:"_2yMksWvLJFTdIz6XA4wSst",warn:"_2BFyv45uYWQsWKpdoGHxsK",danger:"NnQSs-w924JQVyzrsKDor",unknown:"JX1J9FsOwhFbiEW0Ndfkg"}},3816:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(239),h=a(n(26)),g=a(n(63)),y=n(794),v=a(n(890)),_=n(822),E=n(798),O=a(n(862)),b=n(52),S=a(n(3817));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var T={cpu_utilisation:"cluster_cpu_utilisation",memory_utilisation:"cluster_memory_utilisation",cpu_load1:"cluster_load1",cpu_load5:"cluster_load5",cpu_load15:"cluster_load15",gpu_usage:"cluster_gpu_usage",gpu_total:"cluster_gpu_total",gpu_utilization:"cluster_gpu_utilization",gpu_memory_utilization:"cluster_gpu_memory_utilization",gpu_memory_usage:"cluster_gpu_memory_usage",gpu_memory_total:"cluster_gpu_memory_total",disk_size_usage:"cluster_disk_size_usage",disk_inode_utilisation:"cluster_disk_inode_utilisation",disk_inode_usage:"cluster_disk_inode_usage",disk_inode_total:"cluster_disk_inode_total",disk_read_iops:"cluster_disk_read_iops",disk_write_iops:"cluster_disk_write_iops",disk_read_throughput:"cluster_disk_read_throughput",disk_write_throughput:"cluster_disk_write_throughput",net_transmitted:"cluster_net_bytes_transmitted",net_received:"cluster_net_bytes_received",pod_running:"cluster_pod_running_count",pod_pending:"cluster_pod_pending_count",pod_succeeded:"cluster_pod_succeeded_count",pod_failed:"cluster_pod_failed_count",pod_unknown:"cluster_pod_unknown_count"},D=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=C(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).fetchData=function(e){var t=a.props.match.params.cluster;a.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({metrics:Object.values((0,b.hideGPUByLicense)(T,t))},e))},a.getMonitoringCfgs=function(){var e=[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,h.default)(a.metrics,"".concat(T.cpu_load1,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.cpu_load5,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.cpu_load15,".data.result[0]"),{})]},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.gpu_utilization,".data.result"))},{type:"usage",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.gpu_memory_usage,".data.result"))},{type:"usage",title:"DISK_USAGE",unitType:"disk",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.disk_size_usage,".data.result"))},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["USAGE"],data:(0,h.default)(a.metrics,"".concat(T.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,h.default)(a.metrics,"".concat(T.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[(0,h.default)(a.metrics,"".concat(T.disk_inode_total,".data.result[0].values"),[])]});return p.default.createElement(O.default,{usageData:e,totalData:t})}},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,h.default)(a.metrics,"".concat(T.disk_read_throughput,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.disk_write_throughput,".data.result[0]"),{})]},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,h.default)(a.metrics,"".concat(T.disk_read_iops,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.disk_write_iops,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_BANDWIDTH",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,h.default)(a.metrics,"".concat(T.net_transmitted,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.net_received,".data.result[0]"),{})]},{type:"count",title:"POD_STATUS",unit:"",legend:["RUNNING","PENDING","COMPLETED","FAILED","UNKNOWN"],data:[(0,h.default)(a.metrics,"".concat(T.pod_running,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.pod_pending,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.pod_succeeded,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.pod_failed,".data.result[0]"),{}),(0,h.default)(a.metrics,"".concat(T.pod_unknown,".data.result[0]"),{})]}],r=a.props.match.params.cluster;return(0,b.hideGPUByLicense)(e,r)},a.monitorStore=new v.default({cluster:e.match.params.cluster}),a}return(0,l.default)(n,[{key:"render",value:function(){var e=this.monitorStore,r=e.isLoading,n=e.isRefreshing,a=this.getMonitoringCfgs();return p.default.createElement(_.Controller,{title:t("PHYSICAL_RESOURCES_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:(0,g.default)(this.metrics)},p.default.createElement("div",{className:S.default.content},a.map((function(e){var t=(0,y.getAreaChartOps)(e);return(0,g.default)(t.data)?null:p.default.createElement("div",{key:e.title,className:S.default.box},p.default.createElement(E.SimpleArea,(0,u.default)({width:"100%",height:190},t)))}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(p.default.Component))||o)||o;r.default=D},3817:function(e,t,r){e.exports={content:"_3JNPBRmrvckZ-0ddD430sz",box:"_211PBa-chb6-SswmEnq_qi"}},3818:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(31),n(6),n(18),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(31),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(239),h=a(n(26)),g=a(n(63)),y=n(794),v=a(n(988)),_=n(798),E=n(822),O=n(1132),b=a(n(3819));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var C={proposals_committed_rate:"etcd_server_proposals_committed_rate",proposals_applied_rate:"etcd_server_proposals_applied_rate",proposals_failed_rate:"etcd_server_proposals_failed_rate",proposals_pending_count:"etcd_server_proposals_pending_count",db_size:"etcd_mvcc_db_size",client_received_bytes:"etcd_network_client_grpc_received_bytes",client_sent_bytes:"etcd_network_client_grpc_sent_bytes",grpc_received_rate:"etcd_grpc_server_msg_received_rate",grpc_sent_rate:"etcd_grpc_server_msg_sent_rate",wal_fsync_duration_average:"etcd_disk_wal_fsync_duration",wal_fsync_duration_quantile:"etcd_disk_wal_fsync_duration_quantile",backend_commit_duration_average:"etcd_disk_backend_commit_duration",backend_commit_duration_quantile:"etcd_disk_backend_commit_duration_quantile"},T=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=k(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).fetchData=function(e){a.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({metrics:Object.values(C)},e))},a.getQuantileData=function(e,t){return((0,h.default)(a.metrics,"".concat(C[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.quantile")===t}))||{}},a.getMonitoringCfgs=function(){return[{type:"size",title:"DB_SIZE",unitType:"memory",legend:["DB_SIZE"],data:(0,h.default)(a.metrics,"".concat(C.db_size,".data.result"))},{type:"area",title:"CLIENT_TRAFFIC",unitType:"traffic",legend:["RECEIVED","SENT"],data:[(0,h.default)(a.metrics,"".concat(C.client_received_bytes,".data.result[0]")),(0,h.default)(a.metrics,"".concat(C.client_sent_bytes,".data.result[0]"))]},{type:"area",title:"GRPC_STREAM_MESSAGES",unit:t("TIMES_PER_SECOND"),legend:["RECEIVED","SENT"],data:[(0,h.default)(a.metrics,"".concat(C.grpc_received_rate,".data.result[0]")),(0,h.default)(a.metrics,"".concat(C.grpc_sent_rate,".data.result[0]"))]},{type:"grade",title:"WAL_FSYNC",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[a.getQuantileData("wal_fsync_duration_quantile","0.99"),a.getQuantileData("wal_fsync_duration_quantile","0.9"),a.getQuantileData("wal_fsync_duration_quantile","0.5"),(0,h.default)(a.metrics,"".concat(C.wal_fsync_duration_average,".data.result[0]"))]},{type:"grade",title:"DB_FSYNC",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[a.getQuantileData("backend_commit_duration_quantile","0.99"),a.getQuantileData("backend_commit_duration_quantile","0.9"),a.getQuantileData("backend_commit_duration_quantile","0.5"),(0,h.default)(a.metrics,"".concat(C.backend_commit_duration_average,".data.result[0]"))]},{type:"area",title:"RAFT_PROPOSAL",unit:t("TIMES_PER_SECOND"),legend:["PROPOSAL_COMMITTED","PROPOSAL_APPLIED","PROPOSAL_FAILED","PROPOSAL_PENDING"],data:[(0,h.default)(a.metrics,"".concat(C.proposals_committed_rate,".data.result[0]")),(0,h.default)(a.metrics,"".concat(C.proposals_applied_rate,".data.result[0]")),(0,h.default)(a.metrics,"".concat(C.proposals_failed_rate,".data.result[0]")),(0,h.default)(a.metrics,"".concat(C.proposals_pending_count,".data.result[0]"))],areaColors:["blue","green","red","yellow"]}]},a.monitorStore=new v.default({module:"etcd",cluster:e.match.params.cluster}),a}return(0,l.default)(n,[{key:"renderChart",value:function(e){var t={width:"100%",height:190},r=(0,y.getAreaChartOps)(e);if((0,g.default)(r.data))return null;var n=null;switch(e.type){case"grade":n=p.default.createElement(_.PercentArea,(0,u.default)({},t,r));break;default:n=p.default.createElement(_.SimpleArea,(0,u.default)({},t,r))}return p.default.createElement("div",{key:e.title,className:b.default.box},n)}},{key:"render",value:function(){var e=this,r=this.monitorStore,n=r.isLoading,a=r.isRefreshing,o=this.getMonitoringCfgs(),u=this.props.match.params.cluster;return p.default.createElement(E.Controller,{title:t("ETCD_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:n,refreshing:a,isEmpty:(0,g.default)(this.metrics)},p.default.createElement("div",{className:b.default.content},p.default.createElement("div",{className:b.default.box},p.default.createElement("div",{className:b.default.status},p.default.createElement(O.ETCDNodes,{cluster:u}))),o.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(p.default.Component))||o)||o;r.default=T},3819:function(e,t,r){e.exports={content:"TcL0IZBZvEALWaAJxOyjq",box:"_2x_rs3rGZ_x3CzWhr678DG",status:"_166raJC5y_hKM3BLES1zxS"}},3820:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(31),n(6),n(18),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(31),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(239),h=a(n(26)),g=a(n(63)),y=n(794),v=a(n(988)),_=n(798),E=n(822),O=a(n(3821));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var k={request_latencies_total:"apiserver_request_latencies",request_latencies_apis:"apiserver_request_by_verb_latencies",request_rate:"apiserver_request_rate"},C=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=S(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).fetchData=function(e){a.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({metrics:Object.values(k)},e))},a.getSpecificData=function(e,t,r){return((0,h.default)(a.metrics,"".concat(k[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.".concat(t))===r}))||{}},a.getVerbData=function(e){return a.getSpecificData("request_latencies_apis","verb",e)},a.getMonitoringCfgs=function(){return[{type:"io",title:"REQUEST_LATENCY",unit:"ms",legend:["REST_CREATE","REST_DELETE","REST_DELETECOLLECTION","REST_GET","REST_POST","REST_PATCH","REST_PUT","REST_UPDATE","REST_LIST","TOTAL_AVERAGE"],data:[a.getVerbData("CREATE"),a.getVerbData("DELETE"),a.getVerbData("DELETECOLLECTION"),a.getVerbData("GET"),a.getVerbData("POST"),a.getVerbData("PATCH"),a.getVerbData("PUT"),a.getVerbData("UPDATE"),a.getVerbData("LIST"),(0,h.default)(a.metrics,"".concat(k.request_latencies_total,".data.result[0]"))]},{type:"request",title:"REQUEST_PER_SECOND",unit:t("TIMES_PER_SECOND"),legend:["REQUEST"],data:(0,h.default)(a.metrics,"".concat(k.request_rate,".data.result"))}]},a.monitorStore=new v.default({module:"apiserver",cluster:e.match.params.cluster}),a}return(0,l.default)(n,[{key:"renderChart",value:function(e){var t={width:"100%",height:190},r=(0,y.getAreaChartOps)(e);if((0,g.default)(r.data))return null;var n=null;switch(e.type){case"grade":n=p.default.createElement(_.PercentArea,(0,u.default)({},t,r));break;default:n=p.default.createElement(_.SimpleArea,(0,u.default)({},t,r))}return p.default.createElement("div",{key:e.title,className:O.default.box},n)}},{key:"render",value:function(){var e=this,r=this.monitorStore,n=r.isLoading,a=r.isRefreshing,o=this.getMonitoringCfgs();return p.default.createElement(E.Controller,{title:t("API_SERVER_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:n,refreshing:a,isEmpty:(0,g.default)(this.metrics)},p.default.createElement("div",{className:O.default.content},o.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(p.default.Component))||o)||o;r.default=C},3821:function(e,t,r){e.exports={content:"_19HqLz1uFh_5QO0V5xfiZI",box:"_3YA930Ry5q0idy7W6W7Olz"}},3822:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(31),n(6),n(18),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(31),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(239),h=a(n(26)),g=a(n(63)),y=n(794),v=a(n(988)),_=n(798),E=n(822),O=a(n(3823));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var k={schedule_attempts_count:"scheduler_schedule_attempts",schedule_attempt_rate:"scheduler_schedule_attempt_rate",scheduling_latency_average:"scheduler_e2e_scheduling_latency",scheduling_latency_quantile:"scheduler_e2e_scheduling_latency_quantile"},C=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=S(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).fetchData=function(e){a.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({metrics:Object.values(k)},e))},a.getSpecificData=function(e,t,r){return((0,h.default)(a.metrics,"".concat(k[e],".data.result"))||[]).find((function(e){return(0,h.default)(e,"metric.".concat(t))===r}))||{}},a.getMonitoringCfgs=function(){return[{type:"area",title:"SCHEDULE_ATTEMPTS",unit:"",legend:["SUCCESS","ERROR","FAILURE"],data:[a.getSpecificData("schedule_attempts_count","result","scheduled"),a.getSpecificData("schedule_attempts_count","result","error"),a.getSpecificData("schedule_attempts_count","result","unschedulable")],areaColors:["blue","red","yellow"]},{type:"area",title:"SCHEDULING_RATE",unit:t("TIMES_PER_SECOND"),legend:["SUCCESS","ERROR","FAILURE"],data:[a.getSpecificData("schedule_attempt_rate","result","scheduled"),a.getSpecificData("schedule_attempt_rate","result","error"),a.getSpecificData("schedule_attempt_rate","result","unschedulable")],areaColors:["blue","red","yellow"]},{type:"grade",title:"SCHEDULING_LATENCY",unit:"ms",legend:["99th","90th","50th","AVERAGE"],data:[a.getSpecificData("scheduling_latency_quantile","quantile","0.99"),a.getSpecificData("scheduling_latency_quantile","quantile","0.9"),a.getSpecificData("scheduling_latency_quantile","quantile","0.5"),(0,h.default)(a.metrics,"".concat(k.scheduling_latency_average,".data.result[0]"))]}]},a.monitorStore=new v.default({module:"scheduler",cluster:e.match.params.cluster}),a}return(0,l.default)(n,[{key:"renderChart",value:function(e){var t={width:"100%",height:190},r=(0,y.getAreaChartOps)(e);if((0,g.default)(r.data))return null;var n=null;switch(e.type){case"grade":n=p.default.createElement(_.PercentArea,(0,u.default)({},t,r));break;default:n=p.default.createElement(_.SimpleArea,(0,u.default)({},t,r))}return p.default.createElement("div",{key:e.title,className:O.default.box},n)}},{key:"render",value:function(){var e=this,r=this.monitorStore,n=r.isLoading,a=r.isRefreshing,o=this.getMonitoringCfgs();return p.default.createElement(E.Controller,{title:t("SCHEDULER_MONITORING"),step:"2m",times:50,onFetch:this.fetchData,loading:n,refreshing:a,isEmpty:(0,g.default)(this.metrics)},p.default.createElement("div",{className:O.default.content},o.map((function(t){return e.renderChart(t)}))))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(p.default.Component))||o)||o;r.default=C},3823:function(e,t,r){e.exports={content:"sWcV6DTJ_nB-mAR8ayQtO",box:"_20J7gX0eLgCDG08z96LldT"}},3824:function(e,r,n){"use strict";n(15);var a=n(20);n(18),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(18),n(42),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(239),p=a(n(3)),m=a(n(1208)),h=a(n(886)),g=n(186),y=a(n(1809)),v=n(52),_=a(n(3826));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var O=["node_cpu_utilisation","node_load1","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_disk_inode_utilisation","node_pod_utilisation"],b=(0,f.inject)("rootStore")(o=(0,f.observer)(o=function(e){(0,c.default)(n,e);var r=E(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).download=function(){t.store.download("node.usage.rank.json")},t.store=new m.default({cluster:t.cluster,sort_metric_options:(0,v.hideGPUByLicense)(O,t.cluster),sort_metric:O[0]}),t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},d.default.createElement("h3",{className:(0,p.default)(_.default.pane,_.default.title)},t("RESOURCE_USAGE_RANKING")),this.renderToolbar(),this.renderList())}},{key:"renderToolbar",value:function(){var e=this;return d.default.createElement("div",{className:(0,p.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(g.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),d.default.createElement("span",{className:_.default.sort_button},d.default.createElement(g.Icon,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:function(){return e.store.changeSortType()}}))),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(g.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderList",value:function(){return d.default.createElement(g.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(y.default,{store:this.store,cluster:this.cluster}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,r=e.total,n=e.limit;return d.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(h.default,{page:t,total:r,limit:n,onChange:this.store.changePagination}))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),n}(d.default.Component))||o)||o;r.default=b},3826:function(e,t,r){e.exports={wrapper:"_2P7PdvezYjRtSEmE29J8Ar",pane:"_1DURUYk4FqXRlVLiEK23O1",pane__toolbar:"aRdfy8lcLlfL-Y83e6jGD",pane__pagination:"_2eA13_VjA75hvBiAhRlUYV",title:"MPxO6uDiB7DbkF0b5iMTu",toolbar:"_3Z9Ad95QU2iGBj_xxDW3fd",toolbar_buttons:"_3QmcC0Hk1xUcNxHR_0EbXW",toolbar_filter:"uWPN7S-1sicqgHS-Nsc7-",sort_button:"yvJ2AO-e2ripmTSNwZtqP",table:"_12Tl8qEZhLLCQSTWy13y8Q",table_rank:"_1pyQQOSWX0OLiSRx3H4ynW",table_no_border:"_2NEj9rhYr8D6hKOtN9QJO0",rankList_row:"_1bS8qY9r_xrxLEJd4YDutw",rankCol:"_3cPfq94oQC6yhhBgO7gFBj"}},3827:function(e,t,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(136),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var a,o=n(r(30)),u=n(r(36)),i=n(r(37)),c=n(r(55)),l=n(r(56)),s=n(r(51)),d=n(r(0)),f=r(239),p=r(317),m=n(r(3828));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var v=(0,f.inject)("rootStore")(a=(0,f.observer)(a=function(e){(0,c.default)(r,e);var t=y(r);function r(){return(0,u.default)(this,r),t.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,(0,p.renderRoutes)(m.default))}},{key:"routes",get:function(){return m.default.filter((function(e){return!!e.title})).map((function(e){return g(g({},e),{},{name:e.path.split("/").pop()})}))}}]),r}(d.default.Component))||a)||a;t.default=v},3828:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(3829)),u=n(r(3836)),i="/clusters/:cluster/monitor-resource",c=[{path:"".concat(i,"/usage"),title:"RESOURCE_USAGE",component:o.default,exact:!0},{path:"".concat(i,"/ranking"),title:"USAGE_RANKING",component:u.default,exact:!0},(0,a.getIndexRoute)({path:i,to:"".concat(i,"/usage"),exact:!0})];t.default=c},3829:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(1811)),p=n(r(1813)),m=n(r(3834));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var g=(0,d.inject)("rootStore")(a=function(e){(0,i.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"renderPhysicalResource",value:function(){return s.default.createElement(f.default,this.props)}},{key:"renderVirtualResource",value:function(){return s.default.createElement(p.default,this.props)}},{key:"renderProjectTrend",value:function(){return s.default.createElement(m.default,this.props)}},{key:"render",value:function(){return s.default.createElement("div",null,this.renderPhysicalResource(),this.renderVirtualResource(),this.renderProjectTrend())}}]),r}(s.default.Component))||a;t.default=g},3834:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(6),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(6),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(239),h=a(n(3)),g=a(n(63)),y=a(n(26)),v=n(794),_=a(n(1133)),E=n(186),O=a(n(801)),b=n(798),S=a(n(3835));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D={namespace_count:"cluster_namespace_count"},A=(0,m.inject)("rootStore")(o=(0,m.observer)(o=function(e){(0,s.default)(n,e);var r=T(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.monitorStore.fetchMetrics(C({metrics:Object.values(D),step:"60m",times:100},e))},t.monitorStore=new _.default({cluster:e.match.params.cluster}),t.fetchData(),t}return(0,l.default)(n,[{key:"renderChart",value:function(){var e=(0,v.getAreaChartOps)({title:"PROJECT_COUNT",unit:"",legend:["PROJECT_COUNT"],data:(0,y.default)(this.metrics,"".concat(D.namespace_count,".data.result"))});return(0,g.default)(e.data)?null:p.default.createElement(b.SimpleArea,(0,u.default)({width:"100%",bgColor:"transparent"},e))}},{key:"render",value:function(){var e=this.monitorStore,r=e.isLoading,n=e.isRefreshing,a=(0,g.default)(this.metrics);return p.default.createElement(E.Loading,{spinning:r},p.default.createElement(O.default,{className:(0,h.default)(S.default.card,(0,i.default)({},S.default.empty,a)),refreshing:n,empty:t("NO_MONITORING_DATA")},this.renderChart()))}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(p.default.Component))||o)||o;r.default=A},3835:function(e,t,r){e.exports={card:"wwlsDBiAjm0q1bmRNgj6o",empty:"_1ad28rokzs4wIzr9i7erxd"}},3836:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a=n(r(36)),o=n(r(37)),u=n(r(55)),i=n(r(56)),c=n(r(51)),l=n(r(0)),s=n(r(3837)),d=n(r(3839));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var p=function(e){(0,u.default)(r,e);var t=f(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return l.default.createElement("div",{className:d.default.wrapper},l.default.createElement(s.default,{cluster:this.props.match.params.cluster}))}}]),r}(l.default.Component);t.default=p},3837:function(e,r,n){"use strict";n(15);var a=n(20);n(18),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(18),n(42),n(4),n(23),n(57),n(17);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(239),p=a(n(3)),m=a(n(886)),h=n(186),g=a(n(1130)),y=n(52),v=a(n(1814)),_=a(n(3838));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var O=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count","namespace_net_bytes_received","namespace_net_bytes_transmitted"],b=(0,f.observer)(o=function(e){(0,c.default)(n,e);var r=E(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).download=function(){t.store.download("project.usage.rank.json")},t.store=new g.default({limit:10,sort_type:"desc",cluster:e.cluster,sort_metric_options:(0,y.hideGPUByLicense)(O,e.cluster)}),t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"renderToolbar",value:function(){var e=this;return d.default.createElement("div",{className:(0,p.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(h.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}),d.default.createElement("span",{className:_.default.sort_button},d.default.createElement(h.Icon,{name:"desc"===this.store.sort_type?"sort-descending":"sort-ascending",type:"coloured",size:"small",onClick:function(){return e.store.changeSortType()}}))),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(h.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderList",value:function(){return d.default.createElement(h.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(v.default,{cluster:this.props.cluster,store:this.store}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,r=e.total,n=e.limit;return d.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(m.default,{page:t,total:r,limit:n,onChange:this.store.changePagination}))}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),n}(d.default.Component))||o;r.default=b},3838:function(e,t,r){e.exports={wrapper:"_1CmVFNd0G-zs9E1iHfdivR",pane:"_3Xxq0iOcg5rPC1z0QX4VcZ",pane__toolbar:"_2PEZlO8QdUlfOW_Gg2bFho",pane__pagination:"_3tB6nH6MnNdOJ_hACtTFVh",title:"_3WzAR13ip4gsV70FVDKTdJ",toolbar:"_3QzlZPN09RgS4Y67QlJd09",toolbar_buttons:"_2HATCZlaUbpt610R3YC6_p",toolbar_filter:"_3d9XJJFMH1N7n4BKj6Mkwu",sort_button:"Zm30W-XpLeAnhkrxGKaXD",table:"_1zke06m-W2VOKXFYSeau6f",table_rank:"_2fmtCI2sslMwd4fyo_vmK3",table_no_border:"_1QODthKAirf_FppmVzGK2r",rankList_row:"_36FQnaParFo539EUHrLM3j",rankLink__sort_col:"_1tK0CngMzBLJehA_bn8nmS"}},3839:function(e,t,r){e.exports={wrapper:"wa7tMIrleTBU3e6ZCinRa",pane:"TOMVoOzgz8bnMGaXhMj6v",tabs:"_1XJp5HqlcLBB0vE-AP9V6C",selected:"Bgy3xm4otfT4hHjzR2om-"}},3840:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var u,i=a(n(315)),c=a(n(30)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=n(14),g=a(n(788)),y=a(n(795)),v=a(n(792)),_=o(n(793)),E=a(n(796)),O=n(52),b=a(n(322)),S=a(n(441));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var D=(0,_.default)({store:new b.default,module:"users",authKey:"members",name:"CLUSTER_MEMBER"})(u=function(e){(0,d.default)(n,e);var r=T(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).roleStore=new S.default("clusterroles"),e.getColumns=function(){return[{title:t("USERNAME"),dataIndex:"username",sorter:!0,render:function(e,t){return m.default.createElement(g.default,{avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return m.default.createElement(y.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"clusterrole",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return m.default.createElement("p",null,e?(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.canViewRoles&&this.roleStore.fetchList(C(C({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,n=e.tableProps;return m.default.createElement(_.ListPage,this.props,m.default.createElement(v.default,(0,i.default)({},r,{tabs:this.tabs,description:t("INVITE_CLUSTER_MEMBER_DESC")})),m.default.createElement(E.default,(0,i.default)({},n,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"canViewRoles",get:function(){var e=this.props.match.params.cluster;return globals.app.hasPermission({cluster:e,module:"roles",action:"view"})}},{key:"tips",get:function(){return[{title:t("HOW_TO_INVITE_MEMBER_Q"),description:t("HOW_TO_INVITE_MEMBER_A")}]}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.getData,a=r.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",onClick:function(t){return a("member.edit",C(C({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.clusterrole,success:n}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",onClick:function(t){return a("member.remove",C({detail:t,success:n},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.getData,o=r.routing;return C(C({},r.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return n("member.invite",C(C({},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,title:t("INVITE_MEMBER"),desc:t("INVITE_CLUSTER_MEMBER_DESC"),searchPlaceholder:t("INVITE_MEMBER_SEARCH_PLACEHOLDER"),success:o.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return n("member.remove.batch",C({success:a},e.props.match.params))}}],getCheckboxProps:function(e){return{name:e.name}}})}},{key:"emptyProps",get:function(){return{desc:t("INVITE_CLUSTER_MEMBER_DESC")}}}]),n}(m.default.Component))||u;r.default=D},3841:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var u,i=a(n(30)),c=a(n(315)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(788)),g=a(n(792)),y=a(n(796)),v=o(n(793)),_=n(52),E=n(72),O=a(n(441));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,v.default)({store:new O.default("clusterroles"),module:"clusterroles",name:"CLUSTER_ROLE"})(u=function(e){(0,d.default)(n,e);var r=k(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).showAction=function(e){return!globals.config.presetClusterRoles.includes(e.name)},e.getColumns=function(){var r=e.props.getSortOrder,n=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t){return m.default.createElement(h.default,{icon:E.ICON_TYPES[e.module],to:"/clusters/".concat(n,"/roles/").concat(t),title:t})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return m.default.createElement(v.ListPage,(0,c.default)({},this.props,{noWatch:!0}),m.default.createElement(g.default,(0,c.default)({},t,{tabs:this.tabs})),m.default.createElement(y.default,(0,c.default)({},r,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name,o=r.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e,success:o.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("role.delete",{detail:t,type:a,success:o.query,cluster:e.props.match.params.cluster})}}]}},{key:"tableActions",get:function(){return S(S({},this.props.tableProps.tableActions),{},{onCreate:void 0,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("CLUSTER_ROLE_DESC")}}}]),n}(m.default.Component))||u;r.default=C},3842:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(11),n(31),n(84),n(18),n(16),n(4),n(316),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(315)),u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51));n(45),n(5),n(11),n(31),n(84),n(18),n(28),n(42),n(16),n(4),n(316),n(23),n(57),n(24),n(17),n(85),n(62);var d,f=n(186),p=a(n(1801)),m=a(n(789)),h=a(n(790)),g=a(n(792)),y=n(924),v=a(n(26)),_=n(239),E=a(n(0)),O=a(n(945)),b=a(n(890)),S=n(52),k=n(791),C=n(72),T=n(794),D=a(n(3843)),A=a(n(1216));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var R={cpu_usage:"cluster_cpu_total",memory_usage:"cluster_memory_total",gpu_usage:"cluster_gpu_usage",gpu_memory_usage:"cluster_gpu_memory_usage",disk_size_usage:"cluster_disk_size_capacity",node_count:"cluster_node_total"},P=(0,_.inject)("rootStore","clusterStore")(d=(0,_.observer)(d=(0,k.trigger)(d=function(e){(0,c.default)(n,e);var r=N(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).state={confirm:!1},e.monitorStore=new b.default,e.tagsStore=new O.default,e.fetchTagGroupList=function(){e.tagsStore.fetchGroupList()},e.getValue=function(e,r){var n=(0,v.default)(e,"value[1]",0),a=(0,T.getSuitableUnit)(n,r)||a,o=(0,T.getValueByUnit)(n,a),u=(0,S.coreUnitTS)(o,a);return"".concat(o," ").concat(t(u))},e.fetchData=function(){var t=e.store.detail.name;e.store.fetchVersion({cluster:t}),e.monitorStore.fetchMetrics({cluster:t,metrics:Object.values((0,S.hideGPUByLicense)(R,t)),last:!0})},e.fetchClusterDetail=function(){e.store.fetchDetail({name:e.props.match.params.cluster})},e.getResourceOptions=function(){if(e.monitorStore.isLoading)return[];var t=(0,T.getLastMonitoringData)(e.monitorStore.data),r=e.store.detail.name,n=[{name:1===e.getValue(t[R.node_count])?"NODE":"NODES",icon:"nodes",value:e.getValue(t[R.node_count])},{name:"CPU",icon:"cpu",value:e.getValue(t[R.cpu_usage],"cpu")},{name:"MEMORY",icon:"memory",value:e.getValue(t[R.memory_usage],"memory")},{name:"GPU",icon:"gpu",value:e.getValue(t[R.gpu_usage],"cpu")},{name:"GPU_MEMORY",icon:"computing",value:e.getValue(t[R.gpu_memory_usage],"memory")},{name:"DISK",icon:"storage",value:e.getValue(t[R.disk_size_usage],"disk")}];return(0,S.hideGPUByLicense)(n,r)},e.showEdit=function(){e.trigger("resource.baseinfo.edit",{detail:e.store.detail,modal:p.default,success:e.fetchClusterDetail})},e.showTags=function(){e.trigger("cluster.tag.clusterItemTags",{detail:e.store.detail,success:e.fetchClusterDetail,defaultValue:e.store.detail.tags.map((function(t){return(e.tagsStore.tags||[]).find((function(e){return e.name===t.name}))})).filter(Boolean),tagsGroup:e.tagsStore.tagsGroup,store:e.tagsStore,onAddTags:e.showAddTags,tags:[e.store.detail]})},e.showAddTags=function(){e.trigger("cluster.tag.add",{success:e.tagsStore.fetchGroupList,store:e.tagsStore})},e.handleChange=function(t){e.setState({confirm:t})},e.handleUnbind=function(){e.trigger("cluster.unbind",{store:e.store,detail:e.store.detail,success:function(){return e.props.rootStore.routing.push("/clusters")}})},e.updateKubeConfig=function(){e.trigger("cluster.updateKubeConfig",{detail:e.store.detail,success:e.fetchClusterDetail})},e.manageButtonClick=function(t,r){var n=e.enableManageAction.filter((function(e){return e.actionName===r}))[0];n&&n.onClick()},e.renderManageButton=function(){var t=e.enableManageAction,r=E.default.createElement(f.Menu,{onClick:e.manageButtonClick},t.map((function(e){return E.default.createElement(f.Menu.MenuItem,{key:e.actionName},E.default.createElement(f.Icon,{name:e.icon,type:"light"}),e.text)})));return t.length>1?E.default.createElement(A.default,{className:D.default.manage,content:r}):t.length>0&&E.default.createElement(f.Button,{className:D.default.singleButton,onClick:function(){return t[0].onClick()}},t[0].text)},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.store.detail.isReady&&this.fetchData(),this.fetchTagGroupList()}},{key:"render",value:function(){var e=this,r=this.store.detail,n=r.provider,a=r.kubernetesVersion,u=r.tags,i=this.getResourceOptions();return E.default.createElement(E.default.Fragment,null,E.default.createElement(g.default,{icon:"cluster",title:t("BASIC_INFORMATION"),description:t("CLUSTER_BASE_INFO_DESC")}),E.default.createElement(m.default,{title:t("CLUSTER_INFORMATION")},E.default.createElement("div",{className:D.default.header},E.default.createElement(h.default,{icon:C.CLUSTER_PROVIDER_ICON[n]||"kubernetes",title:(0,S.getDomTitle)((0,S.getDisplayNameNew)(this.store.detail)),description:t("CLUSTER"),ellipsis:!0}),n&&E.default.createElement(h.default,{title:n,description:t("PROVIDER")}),E.default.createElement(h.default,{title:a||this.store.version,description:t("KUBERNETES_VERSION")}),this.editPromission&&this.renderManageButton()),E.default.createElement("div",{className:D.default.content},i.map((function(e){return E.default.createElement(h.default,{key:e.name,icon:e.icon,title:e.value,description:t(e.name)})})))),E.default.createElement(m.default,{title:t("CLUSTER_TAGS")},u.length>0&&E.default.createElement("div",{className:D.default.tags},u.map((function(t){var r=(e.tagsStore.tags||[]).find((function(e){return e.name===t.name}));return r?E.default.createElement(y.ClusterTagItem,(0,o.default)({},r,{key:r.name})):null})))))}},{key:"store",get:function(){return this.props.clusterStore}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"editPromission",get:function(){var e;return null===(e=globals.user.globalRules.clusters)||void 0===e?void 0:e.includes("manage")}},{key:"enableManageAction",get:function(){var e=this.store.detail,r=e.isHost,n=void 0!==r&&r,a="proxy"===e.connectionType,o=this.enabledActions,u=[];return o.includes("edit")&&globals.app.isMultiCluster&&u.push({actionName:"resource.baseinfo.edit",onClick:this.showEdit,icon:"pen",text:t("EDIT_INFORMATION")}),("platform-admin"===(0,v.default)(window,"globals.user.globalrole","")||(0,v.default)(window,"globals.user.globalRules.clusters",[]).includes("manage"))&&u.push({actionName:"cluster.tag.clusterItemTags",onClick:this.showTags,icon:"add",text:t("ADD_TAGS")}),globals.app.isMultiCluster&&!n&&!a&&o.includes("edit")&&u.push({actionName:"cluster.update.kubeconfig",icon:"data",text:t("UPDATE_KUBECONFIG"),onClick:this.updateKubeConfig}),globals.app.isMultiCluster&&o.includes("delete")&&!this.store.detail.isHost&&u.push({actionName:"cluster.unbind",onClick:this.handleUnbind,icon:"trash",text:t("REMOVE_CLUSTER")}),u}}]),n}(E.default.Component))||d)||d)||d;r.default=P},3843:function(e,t,r){e.exports={header:"_2SXq6W7Y5arA1V8ydx3x9k",content:"_3zCn6ZnEb1mjwR_f5JXgA",tip:"lIqFeO0ppH8_MxJdLUlTw",unbind:"_3-xB7xj9NBxURt-nM9E8YT",manage:"_12M4oLKObAdKFXEoaa5wxj",singleButton:"_1HEVP9zq3sERwI9RlCnfHB",tags:"_2ep7i_I3q4CFYM8VacKRGZ"}},3845:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o=a(n(43));n(41);var u,i=a(n(44)),c=a(n(30)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=n(186),h=a(n(788)),g=a(n(789)),y=a(n(790)),v=a(n(792)),_=a(n(873)),E=a(n(26)),O=n(14),b=n(239),S=a(n(0)),k=a(n(445)),C=n(52),T=n(791),D=a(n(3846));function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,b.inject)("rootStore","clusterStore")(u=(0,b.observer)(u=(0,T.trigger)(u=function(e){(0,d.default)(n,e);var r=R(n);function n(){var e;(0,l.default)(this,n);for(var t=arguments.length,a=new Array(t),u=0;u<t;u++)a[u]=arguments[u];return(e=r.call.apply(r,[this].concat(a))).workspaceStore=new k.default,e.getData=function(t){e.workspaceStore.fetchList(N(N({},e.props.match.params),t))},e.afterEdit=(0,i.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params.cluster,t.next=3,e.cluster.fetchDetail({name:r});case 3:e.getData();case 4:case"end":return t.stop()}}),t)}))),e.editVisibility=function(){return e.trigger("cluster.visibility.edit",{store:e.cluster,cluster:e.cluster.detail,success:e.afterEdit})},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getColumns",value:function(){return[{title:t("WORKSPACE"),dataIndex:"name",render:function(e,t){return S.default.createElement(h.default,{icon:"enterprise",iconSize:40,title:(0,C.showNameAndAlias)(t.name,"workspace"),desc:t.description||"-",noLink:!0})}},{title:t("ADMINISTRATOR"),dataIndex:"manager"},{title:t("AUTHORIZATION_TIME_TCAP"),dataIndex:"createTime",width:"20%",render:function(e){return(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}},{key:"renderVisibility",value:function(){var e=this.workspaceStore.list,r=e.data,n=e.total,a=e.page,o=e.limit,u=e.filters,i=e.keyword,c=e.isLoading,l={total:n,page:a,limit:o},s={name:"Workspace",module:"workspaces",desc:t("CLUSTER_VISIBILITY_DESC")};return S.default.createElement("div",{className:D.default.tableWrapper},S.default.createElement(_.default,{className:"table-1-10",data:(0,O.toJS)(r),filters:u,keyword:i,pagination:l,isLoading:c,onFetch:this.getData,emptyProps:s,columns:this.getColumns(),columnSearch:this.columnSearch}))}},{key:"render",value:function(){return S.default.createElement(S.default.Fragment,null,S.default.createElement(v.default,{icon:"cluster",title:t("CLUSTER_VISIBILITY"),description:t("CLUSTER_VISIBILITY_DESC"),tips:this.tips}),S.default.createElement(g.default,null,S.default.createElement("div",{className:D.default.header},S.default.createElement(y.default,{icon:this.isClusterPublicVisible?"eye":"eye-closed",title:this.isClusterPublicVisible?t("VISIBILITY_PUBLIC"):t("VISIBILITY_PARTIAL"),description:t("CLUSTER_VISIBILITY_SCAP")}),globals.app.isMultiCluster&&this.enabledActions.includes("manage")&&S.default.createElement(m.Button,{onClick:this.editVisibility},t("EDIT_VISIBILITY"))),this.renderVisibility()))}},{key:"cluster",get:function(){return this.props.clusterStore}},{key:"isClusterPublicVisible",get:function(){return"public"===this.cluster.detail.visibility}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"tips",get:function(){return[{title:t("CLUSTER_VISIBILITY_Q1"),description:t("CLUSTER_VISIBILITY_A1")}]}},{key:"clusterRules",get:function(){return(0,E.default)(globals,"user.globalRules.clusters",[])}},{key:"columnSearch",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:!0}]}}]),n}(S.default.Component))||u)||u)||u;r.default=P},3846:function(e,t,r){e.exports={header:"_2w6hdp2HJmk_fypnMB8LtJ",tableWrapper:"_15y23XCn7gLEvRQ1wRkT2p"}},3847:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a=n(r(36)),o=n(r(37)),u=n(r(55)),i=n(r(56)),c=n(r(51)),l=n(r(0)),s=n(r(1779));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var f=function(e){(0,u.default)(r,e);var t=d(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"pageClose",value:function(){window.opener=null,window.open("","_self",""),window.close()}},{key:"render",value:function(){return l.default.createElement(s.default,{title:"kubeconfig",match:this.props.match,onCancel:this.pageClose})}}]),r}(l.default.Component);t.default=f},3848:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(30)),i=a(n(315)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(810)),m=a(n(788)),h=a(n(792)),g=n(793),y=a(n(26)),v=a(n(0)),_=n(433),E=a(n(3849)),O=n(52),b=n(72);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,g.withClusterList)({store:new E.default("networkpolicies"),name:"NETWORK_POLICY",module:"networkpolicies",authKey:"network",rowKey:"key"})(o=function(e){(0,s.default)(n,e);var r=C(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).tips=function(){var e=t.html("NETWORK_POLICY_A1");return[{title:t("NETWORK_POLICY_Q"),description:t.html("NETWORK_POLICY_A")},{title:t("NETWORK_POLICY_Q1"),description:(0,O.htmlLinkControl)(e)}]},a.store=e.store,a}return(0,l.default)(n,[{key:"render",value:function(){var e=this.tips,t=this.props,r=t.query,n=t.match,a=t.bannerProps,o=t.tableProps;return v.default.createElement(g.ListPage,this.props,v.default.createElement(h.default,(0,i.default)({},a,{tips:e()})),v.default.createElement(p.default,(0,i.default)({},o,{rowKey:"key",itemActions:this.itemActions,namespace:r.namespace,columns:this.getColumns,actions:this.actions,cluster:n.params.cluster,searchType:"name"})))}},{key:"params",get:function(){return(0,y.default)(this.props.match,"params",{})}},{key:"cluster",get:function(){return(0,y.default)(this.params,"cluster")}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.routing,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e,success:n.query})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e,success:n.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e,success:n.query})}}]}},{key:"actions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.routing,o=this.cluster;return[{key:"create",type:"control",text:t("CREATE_BTN"),action:"create",onClick:function(){return n("network.policies.addByYaml",k(k({},e.props),{},{cluster:o,success:a.query}))}}]}},{key:"getColumns",get:function(){var e=this.props,r=e.getSortOrder,n=e.module,a=this.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(e,t){return v.default.createElement(m.default,{icon:b.ICON_TYPES[n],iconSize:40,title:(0,O.getDisplayName)(t),desc:t.description,to:"/clusters/".concat(a,"/projects/").concat(t.namespace,"/").concat(n,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return v.default.createElement(_.Link,{to:"/clusters/".concat(a,"/projects/").concat(e)},(0,O.showNameAndAlias)(e,"project"))}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}}]),n}(v.default.Component))||o;r.default=T},3849:function(e,t,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(27),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var a=n(r(43)),o=n(r(30)),u=n(r(58));r(41);var i,c,l=n(r(44)),s=n(r(65)),d=n(r(36)),f=n(r(37)),p=n(r(88)),m=n(r(55)),h=n(r(56)),g=n(r(51)),y=n(r(49)),v=(n(r(66)),n(r(68))),_=r(14);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,g.default)(e);if(t){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var S=(i=function(e){(0,m.default)(n,e);var t,r=b(n);function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"namespacenetworkpolicies";return(0,d.default)(this,n),e=r.call(this,t),(0,s.default)(e,"list",c,(0,p.default)(e)),e.getResourceUrl=function(t){return"/kapis/networking.k8s.io/v1".concat(e.getPath(t),"/").concat(e.module)},e}return(0,f.default)(n,[{key:"fetchList",value:(t=(0,l.default)(a.default.mark((function e(){var t,r,n,o,i,c,l,s,d,f,p,m,h=this,g=arguments;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>0&&void 0!==g[0]?g[0]:{},o=n.cluster,i=n.namespace,c=n.page,l=void 0===c?this.list.page:c,s=(0,u.default)(n,["cluster","namespace","page"]),this.list.isLoading=!0,d=s,f=s.name,d.limit?this.list.limit=d.limit:d.limit=this.list.limit,(null===(t=this.list)||void 0===t||null===(r=t.continues)||void 0===r?void 0:r[l])?d.continue=this.list.continues[l]:this.list.continues={1:""},d.page=l,e.next=9,request.get(this.getResourceUrl({cluster:o,namespace:i}),d);case 9:return p=e.sent,m=p.items.map((function(e){return O({cluster:o,namespace:i},h.mapper(e))})),this.list.continues[Number(l)+1]=p.metadata.continue||"",1===Number(l)&&(this.list.total=m.length+(p.metadata.remainingItemCount||0)),f&&(this.list.filters={name:f}),(0,_.extendObservable)(this.list,{data:m,page:Number(l),name:f}),this.list.isLoading=!1,e.abrupt("return",this.list);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),n}(v.default),c=(0,y.default)(i.prototype,"list",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{data:[],page:1,limit:10,total:0,continues:{1:""},isLoading:!0}}}),(0,y.default)(i.prototype,"fetchList",[_.action],Object.getOwnPropertyDescriptor(i.prototype,"fetchList"),i.prototype),i);t.default=S},3850:function(e,r,n){"use strict";n(6),n(28),n(34),n(15),n(9),n(13),n(10),n(7);var a=n(20),o=n(157);n(12),n(109),n(5),n(11),n(48),n(16),n(27),n(4),n(23),n(24),n(17),n(62),n(188),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(48),n(42),n(16),n(27),n(4),n(23),n(57),n(24),n(17),n(62),n(188);var u,i=a(n(30)),c=a(n(315)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=n(186),h=a(n(788)),g=a(n(801)),y=a(n(795)),v=a(n(790)),_=a(n(240)),E=a(n(792)),O=o(n(793)),b=a(n(796)),S=a(n(26)),k=a(n(74)),C=a(n(0)),T=a(n(1316)),D=n(52),A=n(72),N=n(434),R=n(244),P=n(239),M=n(14),w=a(n(3851));function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var x=(0,O.default)({module:"ippools",name:"POD_IP_POOL",authKey:"network"})(u=function(e){(0,d.default)(n,e);var r=j(n);function n(e){var a;return(0,l.default)(this,n),(a=r.call(this,e)).handleNatOutgoing=function(e){var r=(0,M.toJS)(e),n=r._originData,o=(0,S.default)(r,"natOutgoing",!1);(0,k.default)(n,"spec.natOutgoing",!o),a.store.patch(r,{spec:{natOutgoing:!o}}).then((function(){o?_.default.success({content:"".concat(t("CLOSED_SUCCESSFUL"))}):_.default.success({content:"".concat(t("OPENED_SUCCESSFUL"))}),a.props.rootStore.routing.query()}))},a.getColumns=function(){var e=a.props,r=e.getSortOrder,n=e.module,o=e.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,key:"name",render:function(e,t){return C.default.createElement(h.default,{icon:A.ICON_TYPES[n],iconSize:40,title:(0,D.getDisplayName)(t),desc:t.description||"-",to:"".concat(a.props.match.url,"/").concat(e)})}},a.isOutdated?null:{title:t("STATUS"),dataIndex:"status",filters:a.getDisabledFilters(),filteredValue:o("disabled"),isHideable:!0,search:!0,render:function(e,r){var n=r.disabled;return C.default.createElement(y.default,{type:n?"Disabled":"Running",name:t(n?"DISABLED":"ENABLED")})}},{title:t("NETWORK_SEGMENT"),isHideable:!0,dataIndex:"cidr"},{title:a.isCalico?t("USED_IP_ADDRESSES"):C.default.createElement("span",{className:"flexbox items-center"},C.default.createElement("span",{className:"margin-r4"},t("USED_IP_ADDRESSES")),C.default.createElement(m.Tooltip,{content:t("IPPOOL_USED_TIP")},C.default.createElement(m.Icon,{name:"question",size:16}))),dataIndex:"status1",isHideable:!0,render:function(e,r){var n=r.status,a=(0,S.default)(n,"capacity",0),o=(0,S.default)(n,"unallocated",0);return C.default.createElement(v.default,{title:a-o,description:t("TOTAL_VALUE",{value:a})})}},{title:t("IPPOOL_BLOCK_SIZE"),dataIndex:"blockSize",isHideable:!0,render:function(e){return null!=e?e:"-"}},a.isOutdated?null:{title:t("IPPOOL_OVERLAY_MODE"),dataIndex:"overlay",isHideable:!0,render:function(e,t){var r=t.ipipMode,n=t.vxlanMode,a=(0,N.getOverlayStatus)({ipipMode:r,vxlanMode:n});return C.default.createElement("div",null,C.default.createElement("span",{className:"font-bold"},a.type),a.value&&C.default.createElement("span",{style:{marginLeft:"4px"}},"(",a.value,")"))}},a.isOutdated?null:{title:t("NAT outgoing"),dataIndex:"natOutgoing",isHideable:!0,render:function(e){return e?t("OPENED"):t("CLOSED")}},a.columnConfig.hideWorkspace?null:{title:t("WORKSPACE"),dataIndex:"workspace",isHideable:!0,render:function(e,r){return r.isDefault?t("ALL"):(0,D.showNameAndAlias)(e,"workspace")||t("NOT_ASSIGNED")}}].filter(Boolean)},a.showCreate=function(){var e,t,r,n=a.props,o=n.match,u=n.module;return a.props.trigger("network.ippool.add",{module:u,cluster:o.params.cluster,trigger:a.props.trigger,isOutdated:a.isOutdated,hideWorkspace:a.columnConfig.hideWorkspace,isCalico:a.isCalico,success:a.props.rootStore.routing.query,allList:(0,M.toJS)(null!==(e=null===(t=a.store)||void 0===t||null===(r=t.list)||void 0===r?void 0:r.data)&&void 0!==e?e:[])})},a.ippoolStore=new T.default,a.store=new(a.ippoolStore.getStoreByCluster(e.match.params.cluster)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchList({hasStatus:!this.isCalico&&void 0,limit:-1,page:1,cluster:this.props.match.params.cluster})}},{key:"getDisabledFilters",value:function(){return[{text:t("ENABLED"),value:"enabled"},{text:t("DISABLED"),value:"disabled"}]}},{key:"render",value:function(){var e=this.props,r=e.match,n=e.bannerProps,a=e.tableProps;return C.default.createElement(O.ListPage,this.props,C.default.createElement(E.default,(0,c.default)({},n,{tips:this.tips})),this.isOutdated&&C.default.createElement(g.default,{className:w.default.upload},C.default.createElement(v.default,{icon:"upload-duotone",title:t("FUNCTION_UPGRADE"),description:t("FUNCTION_UPGRADE_DESC")})),C.default.createElement(b.default,(0,c.default)({},a,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:r.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"isOutdated",get:function(){var e=this.props.match.params.cluster;return this.ippoolStore.isOutdated(e)}},{key:"isCalico",get:function(){var e=this.props.match.params.cluster;return this.ippoolStore.isCalico(e)}},{key:"columnConfig",get:function(){var e=this.isCalico;return{hideWorkspace:e,hideSerch:e,hideFilter:e}}},{key:"tips",get:function(){return[{title:t("IPPOOL_USAGE_Q"),description:this.isCalico?t("IPPOOL_USAGE_A_1"):t("IPPOOL_USAGE_A")}]}},{key:"itemActions",get:function(){var e=this,r=this.props,n=r.trigger,a=r.name,o=r.match;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(t){n("resource.baseinfo.edit",{detail:t,success:e.props.rootStore.routing.query})}},{key:"editOverlay",icon:"pen",text:t("EDIT_OVERLAY"),action:"edit",show:function(){return!e.isOutdated},onClick:function(t){n("network.ipool.editoverlay",{detail:t,cluster:o.params.cluster,success:e.props.rootStore.routing.query})}},{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return n("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"modify",icon:"enterprise",text:t("ASSIGN_WORKSPACE"),show:function(){return!e.columnConfig.hideWorkspace},action:"edit",onClick:function(t){return n("network.ipool.assignworkspace",{detail:t,cluster:o.params.cluster,success:e.props.rootStore.routing.query})}},{key:"OnOutgoing",icon:"start",text:t("CLOSE_NAT_OUTGOING"),action:"edit",show:function(t){return!e.isOutdated&&t.natOutgoing},onClick:this.handleNatOutgoing},{key:"OffOutgoing",icon:"stop",text:t("OPEN_NAT_OUTGOING"),action:"edit",show:function(t){return!e.isOutdated&&!t.natOutgoing},onClick:this.handleNatOutgoing},{key:"enable",icon:"start",text:t("ENABLE"),action:"edit",show:function(t){return!e.isOutdated&&t.disabled},onClick:function(r){e.props.store.patch(r,{spec:{disabled:!1}}).then((function(){_.default.success({content:"".concat(t("ENABLE_SUCCESSFUL"))}),e.props.rootStore.routing.query()}))}},{key:"disable",icon:"stop",text:t("DISABLE"),action:"edit",show:function(t){return!e.isOutdated&&!t.disabled},onClick:function(t){n("network.ipool.disable",{detail:t,cluster:o.params.cluster,success:e.props.rootStore.routing.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{type:a,detail:e})}}]}}]),n}(C.default.Component))||u,U=(0,P.inject)("rootStore")((function(e){var t=e.match.params.cluster,r=(0,R.parse)(e.location.search.slice(1)),n=C.default.useMemo((function(){return new T.default}),[]),a=C.default.useMemo((function(){return new(n.getStoreByCluster(t))}),[t]),o=n.isCalico(t);return C.default.useEffect((function(){o&&Number(r.page)>1&&e.rootStore.routing.query(L(L({},r),{},{page:1}))}),[o]),C.default.createElement(x,(0,c.default)({store:a},e))}));r.default=U},3851:function(e,t,r){e.exports={upload:"_2_3IPi65_G0tYI4auyS45R"}},3852:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(11),n(84),n(18),n(16),n(9),n(4),n(23),n(24),n(17),n(85),n(62),n(64),n(136),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(11),n(84),n(18),n(28),n(42),n(16),n(9),n(4),n(22),n(23),n(57),n(24),n(17),n(85),n(62),n(64);var u=a(n(43)),i=a(n(30));n(41);var c,l,s=a(n(44)),d=a(n(36)),f=a(n(37)),p=a(n(55)),m=a(n(56)),h=a(n(51)),g=a(n(49)),y=a(n(0)),v=n(239),_=n(14),E=a(n(3)),O=a(n(26)),b=a(n(135)),S=a(n(1152)),k=a(n(250)),C=n(440),T=n(894),D=n(433),A=n(186),N=a(n(790)),R=a(n(789)),P=a(n(792)),M=a(n(3853)),w=a(n(851)),I=n(52),L=o(n(1403)),j=a(n(3858));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);if(t){var a=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var U=(0,v.inject)("rootStore")(c=(0,v.observer)((l=function(e){(0,p.default)(n,e);var r=x(n);function n(){var e;(0,d.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).store=new w.default,e.state={showCreate:!1},e.refresh=function(){e.store.fetchListByK8s({labelSelector:"logging.whizard.io/component=".concat(e.component),cluster:e.props.match.params.cluster,namespace:"kubesphere-logging-system"})},e.handleTabChange=function(t){e.props.rootStore.routing.push("/clusters/".concat(e.cluster,"/log-collections/").concat(t))},e.showCreateModal=function(){e.setState({showCreate:!0})},e.hideCreateModal=function(){e.setState({showCreate:!1})},e.createCollection=function(){var t=(0,s.default)(u.default.mark((function t(r){var n,a,o,c,l,s,d;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.Name,a="".concat(n,"_").concat(e.component).replace("-","_"),o=(0,b.default)((0,O.default)(L.default,"".concat(n,".createConfig.").concat(e.component),""))){t.next=5;break}return t.abrupt("return");case 5:return c=(0,O.default)(o,'data["sink.yaml"].sinks.['.concat(a,"]"),""),"elasticsearch"!==n&&"opensearch"!==n||(c.endpoints[0]=(0,S.default)(r.host,"http")?"".concat(r.host,":").concat(r.port):"http://".concat(r.host,":").concat(r.port),c.bulk={index:"{{ .cluster }}-".concat(r.logstashPrefix,"-%Y.%m.%d")}),"opensearch"===n&&(c.auth={strategy:"basic",user:null==r||null===(l=r.auth)||void 0===l?void 0:l.user,password:null==r||null===(s=r.auth)||void 0===s?void 0:s.password}),"kafka"===n&&(c.bootstrap_servers=r.bootstrap_servers,c.topic=r.topic),d=(0,T.objectToYaml)({data:{sinks:(0,i.default)({},a,c)}}),o.data["sink.yaml"]=(0,C.safeBtoa)(d),t.next=13,e.store.create(o,{namespace:"kubesphere-logging-system",cluster:e.cluster});case 13:e.hideCreateModal(),e.refresh();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.refresh();var e=this.tabs.options.filter((function(e){return!e.hidden})).map((function(e){return e.value}));e.includes(this.component)||this.handleTabChange(e[0]||"logs")}},{key:"componentDidUpdate",value:function(e){this.component!==e.match.params.component&&this.refresh()}},{key:"renderCreateButton",value:function(){return this.enabledActions.includes("create")?y.default.createElement(A.Button,{type:"control",disabled:this.store.list.isLoading,onClick:this.showCreateModal},t("ADD_LOG_RECEIVER")):null}},{key:"renderModal",value:function(){var e=this.state.showCreate;return e&&y.default.createElement(M.default,{title:t("ADD_LOG_RECEIVER"),store:this.store,visible:e,isSubmitting:this.store.isSubmitting,onCancel:this.hideCreateModal,onOk:this.createCollection,component:this.component})}},{key:"renderCollection",value:function(){return y.default.createElement(A.Loading,{spinning:this.store.list.isLoading},y.default.createElement("div",null,this.collections.length?this.collections.map(this.renderCollectionItem,this):this.renderEmptyCollection()))}},{key:"renderCollectionItem",value:function(e){if(!(0,k.default)(L.supportNames,e.name))return null;var r=e.name.split("-").pop(),n="".concat(r,"_").concat(this.component).replace("-","_"),a=(0,O.default)(L.default,r,{}),o=(0,O.default)((0,T.getValueObj)((0,C.safeAtob)((0,O.default)(e._originData,'data["sink.yaml"]',{}))),"sinks.".concat(n),{}),u=(0,O.default)(a,"ICON",(function(){})),i=(0,O.default)(a,"title",""),c=(0,O.default)(o,"endpoints[0]","");"kafka"===r&&(c=(0,O.default)(o,"bootstrap_servers",""));var l={logs:t("LOGGING"),events:t("EVENT_PL"),auditing:t("AUDIT_LOGS"),"notification-history":t("NOTIFICATION_HISTORY")};return y.default.createElement(D.Link,{key:e.uid,to:"".concat(this.props.match.url,"/").concat(e.name)},y.default.createElement(R.default,{className:j.default.item},y.default.createElement(u,{width:40,height:40}),y.default.createElement(N.default,{title:y.default.createElement("span",{className:j.default.title},i),description:t("ADDRESS_VALUE",{value:c})}),y.default.createElement(N.default,{title:"true"===(0,O.default)(e,'labels["logging.whizard.io/enable"]',"false")?t("ENABLED"):t("DISABLED"),description:t("STATUS")}),y.default.createElement(N.default,{title:l[(0,O.default)(e,'labels["logging.whizard.io/component"]',"logs")],description:t("TYPE")}),y.default.createElement(N.default,{title:(0,I.getLocalTime)(e.createTime).format("YYYY-MM-DD HH:mm:ss"),description:t("CREATION_TIME")})))}},{key:"renderEmptyCollection",value:function(){return y.default.createElement("div",{className:(0,E.default)(j.default.pane,j.default.empty)},y.default.createElement(A.Icon,{size:40,name:"file"}),y.default.createElement("p",null,t("EMPTY_LOG_COLLECTIONS")),this.renderCreateButton())}},{key:"render",value:function(){return y.default.createElement("div",{className:j.default.wrapper},y.default.createElement(P.default,{className:j.default.header,icon:"file",title:t("LOG_RECEIVER_PL"),description:t("LOG_COLLECTION_DESC"),tabs:this.tabs,extra:y.default.createElement("div",{className:j.default.extra},y.default.createElement(A.Button,{type:"flat",onClick:this.refresh},y.default.createElement(A.Icon,{name:"refresh"})),this.renderCreateButton())}),this.renderCollection(),this.renderModal())}},{key:"collections",get:function(){return this.store.list.data}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"tabs",get:function(){var e=(0,I.getHostClusterName)();return{value:this.component,onChange:this.handleTabChange,options:[{value:"logs",label:t("CONTAINER_LOGS"),hidden:!globals.app.hasClusterExtensionModule(this.cluster,"whizard-logging")},{value:"events",label:t("RESOURCE_EVENTS"),hidden:!globals.app.hasClusterExtensionModule(this.cluster,"whizard-events")},{value:"auditing",label:t("AUDIT_LOGS"),hidden:!globals.app.hasClusterExtensionModule(this.cluster,"whizard-auditing")},{value:"notification-history",label:t("NOTIFICATION_HISTORY"),hidden:globals.currentCluster!==e||!globals.app.hasExtensionModuleAnnotation("whizard-notification","logging.kubesphere.io/enable-notification-history")}]}}}]),n}(y.default.Component),(0,g.default)(l.prototype,"collections",[_.computed],Object.getOwnPropertyDescriptor(l.prototype,"collections"),l.prototype),c=l))||c)||c;r.default=U},3853:function(e,r,n){"use strict";var a=n(157),o=n(20);n(12),n(109),n(5),n(11),n(31),n(6),n(18),n(87),n(16),n(98),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(136),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(31),n(6),n(18),n(28),n(87),n(42),n(16),n(34),n(15),n(98),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var u=o(n(315)),i=o(n(58)),c=o(n(30)),l=o(n(96)),s=o(n(36)),d=o(n(37)),f=o(n(55)),p=o(n(56)),m=o(n(51)),h=a(n(0)),g=o(n(1)),y=o(n(26)),v=o(n(3)),_=n(186),E=o(n(787)),O=o(n(3854)),b=o(n(1403)),S=o(n(3857));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,m.default)(e);if(t){var a=(0,m.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var D=function(e){(0,f.default)(n,e);var r=T(n);function n(){var e;(0,s.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).collectionMap=Object.entries(b.default).reduce((function(e,t){var r=(0,l.default)(t,2),n=r[0],a=r[1];return C(C({},e),{},(0,c.default)({},n,{Form:(0,O.default)(a.Form)}))}),{}),e.formRef=h.default.createRef(),e.state={collectionType:"",formData:{}},e.selectCollectionType=function(t){e.setState({collectionType:t.currentTarget.dataset.type},(function(){var t=(0,y.default)(b.default,"".concat(e.state.collectionType,".validator"));e.formRef.current.setCustomValidator(t)}))},e.handleSubmit=function(t){e.props.onOk(C(C({},t),{Name:e.state.collectionType}))},e.returnToSelectTypeForm=function(){e.setState({collectionType:""})},e}return(0,d.default)(n,[{key:"hasCollectionType",value:function(e){return this.props.store.list.data.find((function(t){var r,n;return(null==t||null===(r=t.name)||void 0===r||null===(n=r.split("-"))||void 0===n?void 0:n.pop())===e}))}},{key:"render",value:function(){var e=this.props,t=e.title,r=(0,i.default)(e,["title"]),n=this.state,a=n.collectionType,o=n.formData;return h.default.createElement(E.default.Form,(0,u.default)({},r,{icon:"clock",width:691,title:t,data:o,formRef:this.formRef,onOk:this.handleSubmit,bodyClassName:S.default.body,disableOk:""===a}),this.renderContent())}},{key:"renderContent",value:function(){var e=this.state.collectionType,t=(0,y.default)(this.collectionMap,"".concat(e,".Form")),r=(0,y.default)(b.default,"".concat(e,".title"));return t?h.default.createElement(t,{wrapperTitle:r,wrapperOnBack:this.returnToSelectTypeForm,component:this.component}):this.renderFormSelector()}},{key:"renderFormSelector",value:function(){return h.default.createElement("div",null,h.default.createElement(_.Alert,{className:"margin-b12",type:"info",message:t("LOG_COLLECTION_TIPS")}),h.default.createElement("div",{className:S.default.items},this.renderFormSelectorItems()))}},{key:"renderFormSelectorItems",value:function(){var e=this;return Object.entries(b.default).map((function(t){var r=(0,l.default)(t,2),n=r[0],a=r[1],o=a.ICON,u=(0,i.default)(a,["ICON"]);return h.default.createElement("div",{key:n,"data-type":n,className:(0,v.default)(S.default.collectionType,e.hasCollectionType(n)&&S.default.disabled),onClick:e.hasCollectionType(n)?null:e.selectCollectionType},h.default.createElement("div",null,h.default.createElement(o,{width:40,height:40})),h.default.createElement("div",null,h.default.createElement("h3",null,u.title),h.default.createElement("p",null,u.description)))}))}},{key:"component",get:function(){return this.props.component}}]),n}(h.Component);r.default=D,D.propTypes={store:g.default.object,detail:g.default.object,visible:g.default.bool,isSubmitting:g.default.bool,onOk:g.default.func,onCancel:g.default.func},D.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},3854:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){(0,i.default)(m,t);var r,n,p=(r=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.default)(r);if(n){var a=(0,l.default)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.default)(this,e)});function m(){return(0,o.default)(this,m),p.apply(this,arguments)}return(0,u.default)(m,[{key:"render",value:function(){var t=this.props,r=t.wrapperOnBack,n=t.wrapperClassName,o=t.wrapperTitle,u=void 0===o?"":o,i=t.hiddenBack,c=void 0!==i&&i,l=(0,a.default)(t,["wrapperOnBack","wrapperClassName","wrapperTitle","hiddenBack"]);return s.default.createElement("div",{className:n},s.default.createElement("h3",{className:f.default.title},c||s.default.createElement(d.ReactComponent,{onClick:r}),s.default.createElement("strong",null,u)),s.default.createElement("div",{className:f.default.content},s.default.createElement(e,l)))}}]),m}(s.default.Component)},r(45),r(42),r(4),r(23),r(57),r(17);var a=n(r(58)),o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(881),f=n(r(3855))},3855:function(e,t,r){e.exports={title:"_vi43jp1IhuQ1z5Ok0h7g",content:"xkLnfMG-J4SV3jMNs09Ra"}},3856:function(e,t,r){"use strict";r.r(t),r.d(t,"ReactComponent",(function(){return l}));var n=r(315),a=r.n(n),o=r(0),u=r.n(o),i=u.a.createElement("g",{clipPath:"url(#clip0_1316_134671)"},u.a.createElement("path",{d:"M38.586 14.688c-.781 0-1.414.633-1.414 1.414 0 11.636-9.434 21.07-21.07 21.07a1.414 1.414 0 100 2.828C29.3 40 40 29.3 40 16.102c0-.781-.633-1.415-1.414-1.415z",fill:"#005EB8"}),u.a.createElement("path",{d:"M30.05 23.75c1.36-2.218 2.676-5.176 2.417-9.317C31.931 5.855 24.162-.653 16.825.053c-2.872.275-5.82 2.617-5.559 6.81.114 1.822 1.006 2.898 2.456 3.724 1.38.787 3.152 1.286 5.161 1.851 2.427.683 5.243 1.45 7.407 3.044 2.593 1.912 4.366 4.127 3.76 8.268z",fill:"#003B5C"}),u.a.createElement("path",{d:"M2.45 8.75C1.09 10.968-.227 13.926.032 18.067c.536 8.578 8.305 15.086 15.642 14.38 2.872-.275 5.82-2.617 5.559-6.81-.114-1.822-1.006-2.898-2.456-3.724-1.38-.788-3.152-1.286-5.161-1.851-2.427-.683-5.243-1.45-7.406-3.044-2.594-1.912-4.367-4.127-3.762-8.268z",fill:"#005EB8"})),c=u.a.createElement("defs",null,u.a.createElement("clipPath",{id:"clip0_1316_134671"},u.a.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"}))),l=function(e){return u.a.createElement("svg",a()({viewBox:"0 0 40 40",fill:"none",width:"1em",height:"1em"},e),i,c)};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzMTZfMTM0NjcxKSI+CjxwYXRoIGQ9Ik0zOC41ODU5IDE0LjY4NzVDMzcuODA0OSAxNC42ODc1IDM3LjE3MTggMTUuMzIwNiAzNy4xNzE4IDE2LjEwMTZDMzcuMTcxOCAyNy43Mzg0IDI3LjczODQgMzcuMTcxOCAxNi4xMDE2IDM3LjE3MThDMTUuMzIwNiAzNy4xNzE4IDE0LjY4NzUgMzcuODA0OSAxNC42ODc1IDM4LjU4NTlDMTQuNjg3NSAzOS4zNjY5IDE1LjMyMDYgNDAgMTYuMTAxNiA0MEMyOS4zMDAzIDQwIDQwIDI5LjMwMDMgNDAgMTYuMTAxNkM0MCAxNS4zMjA2IDM5LjM2NjkgMTQuNjg3NSAzOC41ODU5IDE0LjY4NzVaIiBmaWxsPSIjMDA1RUI4Ii8+CjxwYXRoIGQ9Ik0zMC4wNTA5IDIzLjc1QzMxLjQxMDggMjEuNTMxNiAzMi43MjYgMTguNTczNiAzMi40NjcyIDE0LjQzMjZDMzEuOTMxMiA1Ljg1NDU2IDI0LjE2MTggLTAuNjUyODkzIDE2LjgyNTQgMC4wNTIzMzI1QzEzLjk1MzMgMC4zMjg0MiAxMS4wMDQzIDIuNjY5NSAxMS4yNjYzIDYuODYyODFDMTEuMzgwMSA4LjY4NTA2IDEyLjI3MiA5Ljc2MDU2IDEzLjcyMTUgMTAuNTg3NEMxNS4xMDExIDExLjM3NDUgMTYuODczNiAxMS44NzMxIDE4Ljg4MyAxMi40MzgyQzIxLjMxMDEgMTMuMTIwOSAyNC4xMjU2IDEzLjg4NzcgMjYuMjg5NSAxNS40ODIzQzI4Ljg4MjggMTcuMzkzNSAzMC42NTU3IDE5LjYwODkgMzAuMDUwOSAyMy43NVoiIGZpbGw9IiMwMDNCNUMiLz4KPHBhdGggZD0iTTIuNDQ5MTMgOC43NUMxLjA4OTIzIDEwLjk2ODQgLTAuMjI1OTQxIDEzLjkyNjQgMC4wMzI4MDgyIDE4LjA2NzRDMC41Njg3OTUgMjYuNjQ1NCA4LjMzODE5IDMzLjE1MjkgMTUuNjc0NiAzMi40NDc3QzE4LjU0NjcgMzIuMTcxNiAyMS40OTU3IDI5LjgzMDUgMjEuMjMzNyAyNS42MzcyQzIxLjExOTkgMjMuODE0OSAyMC4yMjc5IDIyLjczOTQgMTguNzc4NSAyMS45MTI2QzE3LjM5ODkgMjEuMTI1NSAxNS42MjY0IDIwLjYyNjkgMTMuNjE3IDIwLjA2MThDMTEuMTg5OSAxOS4zNzkxIDguMzc0NDQgMTguNjEyMyA2LjIxMDU5IDE3LjAxNzdDMy42MTcxNyAxNS4xMDY1IDEuODQ0MzMgMTIuODkxMSAyLjQ0OTEzIDguNzVaIiBmaWxsPSIjMDA1RUI4Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMTMxNl8xMzQ2NzEiPgo8cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},3857:function(e,t,r){e.exports={items:"_4KpY8XoatSiX6KSIelpPx",collectionType:"_227xYBidUyS7Co_VCst5pL",disabled:"_3l_3z51HkJawL3fJqcBj-x",createTip:"_15-kJBHYuBzcVNchgfqXjx"}},3858:function(e,t,r){e.exports={empty:"E_TGs1mcrGTpnS6fCHLve",header:"GDQFBrmFWQgDOgXCXYVBn",extra:"_3U_QE41nPUA_tmHQ-GnXBZ",pane:"_1Spp0J1Fpg5wUQfw135nUu",item:"_3laeV8sqiN4xp4otZGaW2u",title:"_1tvY2b0c_9eqZOhe7p0fHU"}},3859:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(109),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var u,i=a(n(315)),c=a(n(30)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(790)),g=a(n(792)),y=o(n(793)),v=a(n(796)),_=n(52),E=a(n(1817)),O=a(n(3860));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,y.default)({store:new E.default,module:"clusterdashboards",authKey:"monitoring",name:"CUSTOM_MONITORING_DASHBOARD"})(u=function(e){(0,d.default)(n,e);var r=k(n);function n(){var e;(0,l.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).showCreate=function(){e.props.trigger("custom.monitoring.create",S(S({},e.props.match.params),{},{module:"clusterdashboards"}))},e.showEdit=function(t){e.props.trigger("custom.monitoring.edit",S(S({},e.props.match.params),{},{readOnly:!e.props.tableProps.enabledActions.includes("edit"),detail:t}))},e}return(0,s.default)(n,[{key:"getColumns",value:function(){var e=this;return[{title:t("NAME"),dataIndex:"title",render:function(t,r){return m.default.createElement(h.default,{title:m.default.createElement("div",{className:O.default.title,onClick:function(){return e.showEdit(r)}},(0,_.getDisplayName)(r)),description:r.description||"-"})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return m.default.createElement("div",null,m.default.createElement(y.ListPage,this.props,m.default.createElement(g.default,(0,i.default)({},t,{tabs:this.tabs})),m.default.createElement(v.default,(0,i.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"}))))}},{key:"itemActions",get:function(){var e=this.props,r=e.name,n=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("resource.delete",{type:r,detail:e})}}]}}]),n}(m.default.Component))||u;r.default=C},3860:function(e,t,r){e.exports={title:"m4_SNQXnKSZC2zYTgw2nP"}},3861:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(7);var o=a(n(30)),u=a(n(315)),i=a(n(43));n(41);var c,l,s,d,f=a(n(44)),p=a(n(65)),m=a(n(36)),h=a(n(37)),g=a(n(88)),y=a(n(55)),v=a(n(56)),_=a(n(51)),E=a(n(49)),O=(a(n(66)),a(n(0))),b=n(239),S=n(791),k=(a(n(792)),a(n(834))),C=n(14),T=n(186),D=a(n(1134)),A=a(n(1819));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,_.default)(e);if(t){var a=(0,_.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}var M=(0,b.inject)("rootStore","clusterStore")(c=(0,b.observer)(c=(0,S.trigger)((l=function(e){(0,y.default)(n,e);var r=P(n);function n(){var e;(0,m.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).store=new k.default,(0,p.default)(e,"hostGateway",s,(0,g.default)(e)),(0,p.default)(e,"isLoading",d,(0,g.default)(e)),e.getData=(0,f.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,r=e.props.match.params.cluster,t.next=4,e.store.getGateway({cluster:r,type:"cluster"});case 4:e.hostGateway=t.sent,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.handleTabChange=function(t){e.props.rootStore.routing.push("/clusters/".concat(e.cluster,"/gateways/").concat(t))},e.renderGatewayCard=function(){return e.tabComponent[e.component]},e}return(0,h.default)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e){e.match.params.component!==this.component&&"cluster"===this.component&&this.getData()}},{key:"render",value:function(){return O.default.createElement(O.default.Fragment,null,!1,this.renderGatewayCard())}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"prefix",get:function(){return this.props.match.url}},{key:"tabs",get:function(){return{value:this.component,onChange:this.handleTabChange,options:[{value:"cluster",label:t("CLUSTER_GATEWAY")},{value:"workspace",label:t("WORKSPACE_GATEWAY_PL")},{value:"project",label:t("PROJECT_GATEWAY_PL")}]}}},{key:"tabComponent",get:function(){return{cluster:O.default.createElement(T.Loading,{spinning:this.isLoading},O.default.createElement(D.default,(0,u.default)({type:"cluster"},this.props,{actions:this.enabledActions,prefix:this.prefix,detail:this.hostGateway,store:this.store,getData:this.getData,inCluster:!0}))),workspace:O.default.createElement(A.default,(0,u.default)({},this.props,{cluster:this.cluster,type:"workspace",inCluster:!0})),project:O.default.createElement(A.default,(0,u.default)({},this.props,{cluster:this.cluster,type:"project",inCluster:!0}))}}},{key:"enabledActions",get:function(){return"cluster"===this.component?globals.app.getActions({module:"cluster-settings",cluster:this.cluster}):"workspace"===this.component?globals.app.getActions({module:"ks-workspace-gateway",workspace:this.workspace}):globals.app.getActions(R(R({module:"ks-project-gateway"},this.props.match.params),{},{project:this.namespace}))}}]),n}(O.default.Component),s=(0,E.default)(l.prototype,"hostGateway",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,E.default)(l.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=l))||c)||c)||c;r.default=M},3866:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(85),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51));n(12),n(45),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(85),n(7);var p,m=o(n(0)),h=n(239),g=n(791),y=a(n(792)),v=a(n(945)),_=a(n(438)),E=a(n(63)),O=a(n(26)),b=n(186),S=a(n(833)),k=a(n(796)),C=a(n(3)),T=n(52),D=o(n(793)),A=a(n(936)),N=a(n(3867));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var w=function(){return"platform-admin"===(0,O.default)(window,"globals.user.globalrole","")},I=(0,A.default)(["tags-duotone"])(p=(0,D.default)({store:new v.default("labels"),module:"nodes",authKey:"cluster_tags",name:"CLUSTER_TAGs"})(p=(0,h.inject)("rootStore")(p=(0,h.observer)(p=(0,g.trigger)(p=function(e){(0,s.default)(n,e);var r=M(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).initData=function(){t.fetchData()},t.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.store.fetchList(P(P({},e),{},{limit:10}))},t.handleTabChange=function(){t.routing.push("/clusters")},t.showAddTags=function(){t.trigger("cluster.tag.add",{module:"clusters",success:t.routing.query,store:t.store})},t.store=t.props.store,t.clusterStore=new _.default,t}return(0,l.default)(n,[{key:"getColumns",value:function(){var e=this.props.getSortOrder;return[{title:t("CLUSTER_TAG"),dataIndex:"id",isHideable:!0,render:function(e,t){return m.createElement("div",{className:(0,C.default)(N.default.clusterTagItem)},m.createElement("div",{className:N.default.label},t.label),m.createElement("div",{className:N.default.value},t.value))}},{title:t("CLUSTER"),dataIndex:"clusters",isHideable:!0,render:function(e){return e.length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:e("createTime"),isHideable:!0,width:200,render:function(e){return e?(0,T.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]}},{key:"componentDidMount",value:function(){this.initData()}},{key:"renderList",value:function(){var e=this.store.list,r=e.filters,n=e.isLoading,a=e.data,o=e.page,i=this.props.tableProps;return!(0,E.default)(a)||n||!(0,E.default)(r)||1!==o&&o?m.createElement(k.default,(0,u.default)({},i,{data:a,loading:n,enabledActions:w()?["edit","bind","hasBundled","delete","create"]:(0,O.default)(window,"globals.user.globalRules.clusters",[]).includes("manage")?["view","bind","hasBundled"]:["view"],itemActions:this.itemActions,rowKey:"name",tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showAddTags,searchType:"name"})):m.createElement(S.default,{icon:"tags-duotone",title:t("NO_CLUSTER_TAGS"),desc:t("NO_CLUSTER_TAGS_DESC"),actions:w()?m.createElement(b.Button,{type:"control",onClick:this.showAddTags},t("CREATE")):null})}},{key:"render",value:function(){return m.createElement("div",{className:N.default.wrapper},m.createElement(D.ListPage,this.props,m.createElement(y.default,{className:N.default.banner,icon:"cluster",title:t("CLUSTER_MANAGEMENT"),description:t("CLUSTER_DESC"),tabs:this.tabs}),this.renderList()))}},{key:"authKey",get:function(){return"clusters"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"tableActions",get:function(){var e=this;return P(P({},this.props.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("cluster.tag.delete",{type:e.name,detail:e.store.list.data.filter((function(t){return e.store.list.selectedRowKeys.includes(t.name)})),success:e.routing.query})}}]})}},{key:"tabs",get:function(){return{value:"tags",onChange:this.handleTabChange,options:[{value:"clusters",label:t("CLUSTER_PL")},{value:"tags",label:t("CLUSTER_TAGS")}]}}},{key:"itemActions",get:function(){var e=this;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(t){return e.trigger("cluster.tag.edit",{name:t.name,detail:[{key:t.label,value:t.value}],store:e.store,success:e.routing.query})}},{key:"bind",icon:"link",action:"bind",text:t("ADD_TO_CLUSTERS"),onClick:function(t){e.trigger("cluster.tag.bind",{detail:t,getList:e.clusterStore.fetchAllCluster,success:e.routing.query})}},{key:"hasBundled",icon:"eye",text:t("REMOVE_FROM_CLUSTERS"),action:"hasBundled",disabled:function(e){var t;return!(null==e||null===(t=e.clusters)||void 0===t?void 0:t.length)},onClick:function(t){e.trigger("cluster.tag.hasBundled",{detail:t,getList:e.clusterStore.fetchAllCluster,success:e.routing.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("cluster.tag.delete",{type:e.name,resource:t.name,detail:t,success:e.routing.query})}}]}}]),n}(m.Component))||p)||p)||p)||p)||p;r.default=I},3867:function(e,t,r){e.exports={banner:"_8MR_jkuxX3BO24ISjg65o",wrapper:"_2_LExZycdD34qPtVII-cl-",clusterTagItem:"_2-621emWvGyt67MEm5v4NS",label:"_1R5k1j8Y_KUzpUHIoj_sqP",value:"Qtmr8FVzhABs8l5KJ_nvB",loading:"_2pXZ8G1tXWMPRfWtv8hzmv"}},3868:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(1217)),o=n(r(1411)),u=n(r(1222)),i=n(r(1223)),c=n(r(1225)),l=n(r(1226)),s=n(r(1228)),d=n(r(1413)),f=n(r(1414)),p=n(r(1415)),m=n(r(1229)),h=n(r(1230)),g=n(r(1843)),y=n(r(1231)),v=n(r(1418)),_=r(1846),E=n(r(3977)),O=n(r(3981)),b=n(r(1848)),S=n(r(3990)),k=n(r(3991)),C=n(r(4003)),T=n(r(4013)),D=n(r(4035)),A=n(r(4039)),N=n(r(4042)),R=n(r(4046)),P=n(r(4051)),M=n(r(4056)),w=n(r(1235)),I="/clusters/:cluster",L=[{path:"".concat(I,"/nodes/:node"),component:k.default},{path:"".concat(I,"/edgenodes/:node"),component:C.default},{path:"".concat(I,"/customresources/:name"),component:N.default},{path:"".concat(I,"/roles/:name"),component:R.default},{path:["".concat(I,"/alert-rules/builtin/:name"),"".concat(I,"/alert-rules/:name")],component:_.ClusterAlertPolicyDetail},{path:"".concat(I,"/log-collections/:component/:name"),component:P.default},{path:"".concat(I,"/components/:namespace/:name"),component:A.default},{path:"".concat(I,"/gateways/:component/:gatewayName"),component:w.default},{path:"".concat(I,"/storageclasses/:name"),component:D.default},{path:"".concat(I,"/ippools/:name"),component:M.default},{path:"".concat(I,"/pv/:name"),component:b.default},{path:"".concat(I,"/volume-snapshot-content/:name"),component:E.default},{path:"".concat(I,"/volume-snapshot-classes/:name"),component:O.default},{path:"".concat(I,"/projects/:namespace"),component:S.default,routes:[{path:"".concat(I,"/projects/:namespace/deployments/:name"),component:a.default},{path:"".concat(I,"/projects/:namespace/statefulsets/:name"),component:o.default},{path:"".concat(I,"/projects/:namespace/daemonsets/:name"),component:u.default},{path:"".concat(I,"/projects/:namespace/jobs/:name"),component:i.default},{path:"".concat(I,"/projects/:namespace/cronjobs/:name"),component:c.default},{path:"".concat(I,"/projects/:namespace/services/:name"),component:l.default},{path:"".concat(I,"/projects/:namespace/ingresses/:name"),component:s.default},{path:"".concat(I,"/projects/:namespace/secrets/:name"),component:d.default},{path:"".concat(I,"/projects/:namespace/configmaps/:name"),component:f.default},{path:"".concat(I,"/projects/:namespace/serviceaccounts/:name"),component:p.default},{path:"".concat(I,"/projects/:namespace/pods/:podName/containers/:containerName"),component:h.default},{path:"".concat(I,"/projects/:namespace/pods/:podName"),component:m.default},{path:"".concat(I,"/projects/:namespace/volume-snapshots/:name"),component:v.default},{path:"".concat(I,"/projects/:namespace/volumes/:name"),component:y.default},{path:"".concat(I,"/projects/:namespace/networkpolicies/:name"),component:g.default},{path:"".concat(I,"/projects/:namespace"),component:T.default}]}];t.default=L},3977:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(28),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var o=a(n(315)),u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(63)),g=n(239),y=n(186),v=a(n(795)),_=n(52),E=n(791),O=a(n(1213)),b=a(n(805)),S=n(471),k=a(n(3978));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,g.inject)("rootStore")(i=(0,g.observer)(i=(0,E.trigger)(i=function(e){(0,d.default)(n,e);var r=C(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).store=new O.default,e.fetchData=(0,c.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.props.match.params);case 2:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var r,n=e.props.match.params,a=n.cluster,o=n.namespace;return[{key:"view",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:(r=(0,c.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.trigger("resource.yaml.edit",{readOnly:!0,detail:e.store.detail,yaml:e.store.detail._originData});case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),onClick:function(){e.trigger("volume.snapshotContent.baseInfo.edit",{store:e.store,cluster:a,namespace:o,detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",disabled:(0,S.cantDeleteSnapshotContent)(e.store.detail),onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:e.returnTolist})}}]},e.getAttrs=function(){var r=e.store.detail,n=void 0===r?{}:r,a=n.createTime,o=n.creator,u=n.status,i=n.restoreSize,c=n.snapshotClassName,l=n.snapshotHandle,s=n.driver,d=n.deletionPolicy;return(0,h.default)(n)?null:[{name:t("STATUS"),value:m.default.createElement("div",null,m.default.createElement(v.default,{type:u,name:t(u.toUpperCase())}))},{name:t("CAPACITY"),value:"".concat((0,_.memoryFormat)(i,"Gi"),"Gi")},{name:t("VOLUME_SNAPSHOT_CLASS"),value:c},{name:t("SNAPSHOT_HANDLE"),value:l},{name:t("PROVISIONER"),value:s},{name:t("DELETION_POLICY"),value:d},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:""===o?"-":o}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_CONTENT_PL"),url:this.listUrl}]};return m.default.createElement(b.default,(0,o.default)({stores:e},r,{routes:(0,k.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT_CONTENT"}},{key:"module",get:function(){return"snapshot-content"}},{key:"authKey",get:function(){return"volumesnapshots"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/volume-snapshots/").concat(this.module)}}]),n}(m.default.Component))||i)||i)||i;r.default=T},3978:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(813)),u=n(r(821)),i=n(r(3979));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:i.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:o.default},(0,a.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},3979:function(e,r,n){"use strict";n(15);var a=n(20),o=n(157);n(5),n(16),n(4),n(23),n(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(17);var u,i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=o(n(0)),p=n(239),m=n(186),h=a(n(789)),g=a(n(914)),y=n(471),v=a(n(63)),_=a(n(3980));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,p.inject)("detailStore")(u=(0,p.observer)(u=function(e){(0,l.default)(n,e);var r=E(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new g.default,e.renderItem=function(){var r=e.store.detail;return f.default.createElement("div",null,f.default.createElement("div",{className:_.default.ItemBox},f.default.createElement("div",{className:_.default.leftBox},f.default.createElement(m.Icon,{name:"snapshot",size:"40"}),f.default.createElement("div",{className:_.default.rightBox},f.default.createElement("span",{className:_.default.title},r.name),f.default.createElement("span",{className:_.default.des},t("NAME")))),f.default.createElement("div",{className:_.default.titleBox},f.default.createElement("span",{className:_.default.title},r.snapshotClassName),f.default.createElement("span",{className:_.default.des},t("VOLUME_SNAPSHOT_CLASS")))))},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.detailStore.detail,t=e.volumeSnapshot,r=e.namespace,n=e.status,a=e.cluster;"ready"===n&&(0,y.cantDeleteSnapshotContent)(this.props.detailStore.detail)?this.store.fetchDetail({cluster:a,name:t,namespace:r}):this.store.isLoading=!1}},{key:"render",value:function(){var e=this.store,r=e.detail,n=e.isLoading;return f.default.createElement(h.default,{title:t("VOLUME_SNAPSHOT_PL")},!(0,v.default)(r)&&f.default.createElement(m.Loading,{spinning:n},this.renderItem()))}}]),n}(f.Component))||u)||u;r.default=O},3980:function(e,t,r){e.exports={ItemBox:"_1fxvFDRBXomWXMXThPuGiO",leftBox:"_2i20s7mRN2aF2FYpKovLCt",rightBox:"_2od794bHFxQpdtTn7X-fkA",title:"_27BSz92lxWakrFD9ymm2A3",toolTip:"_3UNOqG8qLUxZlBapo3qr5Z",des:"_2yKnVC3aGLnopPAOx8d-hn",mode_title:"_1zTSWtxQ1s3FuIVK6c_AJd",titleBox:"_1EQfuxx1JyPD3obadFjEbe",IconLine:"WFEYMWanZFc5X5ji7EDzw",cardBox:"_11Nc11agNjqy5SvwpHgDnb",text:"_3iZaDwgdoUnaHTHBRCk0Uo"}},3981:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(28),n(42),n(16),n(4),n(22),n(23),n(57),n(24),n(17),n(62);var o=a(n(315)),u=a(n(43));n(41);var i,c=a(n(44)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(63)),g=n(239),y=n(186),v=n(52),_=n(791),E=a(n(910)),O=a(n(805)),b=a(n(3982));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var k=(0,g.inject)("rootStore")(i=(0,g.observer)(i=(0,_.trigger)(i=function(e){(0,d.default)(n,e);var r=S(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=r.call.apply(r,[this].concat(o))).store=new E.default,e.state={detail:{}},e.fetchData=(0,c.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchDetail(e.props.match.params);case 2:r=t.sent,e.setState({detail:r});case 4:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var r,n=e.props.match.params,a=n.cluster,o=n.namespace,i=e.state.detail;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){e.trigger("volume.snapshotContent.baseInfo.edit",{store:e.store,cluster:a,namespace:o,detail:e.store.detail,success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:(r=(0,c.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.trigger("volume.snapshot.yaml.edit",{store:e.store,detail:i,yaml:i._originData,success:e.fetchData});case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{title:t("DETELE_VOLUME_SNAPSHOT_CLASS"),type:e.name,detail:i,success:e.returnTolist})}}]},e.getAttrs=function(){var r=e.store.detail,n=void 0===r?{}:r,a=n.createTime,o=n.driver,u=n.deletionPolicy;return(0,h.default)(n)?null:[{name:t("PROVISIONER"),value:o},{name:t("DELETION_POLICY"),value:u},{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return m.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,v.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("VOLUME_SNAPSHOT_CLASS_PL"),url:this.listUrl}]};return m.default.createElement(O.default,(0,o.default)({stores:e},r,{routes:(0,b.default)(this.props.match.path)}))}},{key:"name",get:function(){return"VOLUME_SNAPSHOT_CLASS"}},{key:"module",get:function(){return"volume-snapshot-classes"}},{key:"authKey",get:function(){return"volumesnapshotclasses"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/").concat(this.module)}}]),n}(m.default.Component))||i)||i)||i;r.default=k},3982:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(3983));t.default=function(e){return[{path:"".concat(e,"/volume-snapshot"),title:"VOLUME_SNAPSHOT_PL",exact:!0,component:o.default},(0,a.getIndexRoute)({path:e,to:"".concat(e,"/volume-snapshot"),exact:!0})]}},3983:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var o,u=a(n(30)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(239),m=n(52),h=a(n(914)),g=a(n(788)),y=a(n(789)),v=a(n(795)),_=a(n(873)),E=a(n(3984));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var k=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var r=S(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).handleFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.store.detail,r=t.cluster,n=t.name;e.keyword&&(e.name=e.keyword,delete e.keyword),a.volumeSnapshotStore.fetchList(b({volumeSnapshotClassName:n,cluster:r},e))},a.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return f.default.createElement(g.default,{icon:"snapshot",iconSize:40,title:(0,m.getDisplayName)(t),to:"/clusters/".concat(t.cluster,"/projects/").concat(t.namespace,"/volume-snapshots/").concat(e),desc:t.snapshotClassName,noLink:!0})}},{title:t("STATUS"),dataIndex:"backupStatus",width:"20.5%",render:function(e,r){return f.default.createElement(v.default,{type:r.readyToUse?"ready":"failed",name:r.readyToUse?t("READY"):t("UNREADY")})}},{title:t("CAPACITY"),dataIndex:"restoreSize",width:"20.5%",render:function(e){return e}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"20.5%",render:function(e){return(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},a.volumeSnapshotStore=e.volumeSnapshotStore||new h.default,a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this.volumeSnapshotStore.list,r=e.data,n=e.filters,a=e.isLoading,o={total:e.total,page:e.page,limit:e.limit};return f.default.createElement(y.default,{title:t("VOLUME_SNAPSHOT_PL"),loading:a,empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("VOLUME_SNAPSHOT")}),className:E.default.noPadding},f.default.createElement(_.default,{className:E.default.table,data:r,columns:this.getColumns(),searchType:"name",keyword:n.name,filters:n,placeholder:t("SEARCH_BY_NAME"),pagination:o,isLoading:a,onFetch:this.handleFetch}))}},{key:"store",get:function(){return this.props.detailStore}},{key:"storageClassName",get:function(){return this.store.detail.name}}]),n}(f.default.Component))||o)||o;r.default=k},3984:function(e,t,r){e.exports={noPadding:"_160nVM5I48EClrJRzVwIZM"}},3990:function(e,t,r){"use strict";r(15);var n=r(20),a=r(157);r(29),r(4),r(22),r(23),r(24),r(17),r(38),r(62),r(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(29),r(42),r(4),r(22),r(23),r(57),r(24),r(17),r(38),r(62),r(32);var o=n(r(43));r(41);var u,i=n(r(44)),c=n(r(36)),l=n(r(37)),s=n(r(55)),d=n(r(56)),f=n(r(51)),p=a(r(0)),m=r(239),h=r(186),g=r(317),y=n(r(439));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var _=(0,m.inject)("rootStore")(u=(0,m.observer)(u=function(e){(0,s.default)(n,e);var t,r=v(n);function n(e){var t;return(0,c.default)(this,n),(t=r.call(this,e)).store=new y.default,t.init(e.match.params),t}return(0,l.default)(n,[{key:"init",value:(t=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(t),this.props.rootStore.getRules(t)]);case 3:this.store.initializing=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(h.Loading,{className:"ks-page-loading"}):p.default.createElement(m.Provider,{projectStore:this.store},(0,g.renderRoutes)(this.props.route.routes))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),n}(p.Component))||u)||u;t.default=_},3991:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(86),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(86),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(14),m=n(239),h=a(n(26)),g=a(n(63)),y=n(186),v=n(52),_=n(444),E=n(791),O=a(n(856)),b=a(n(823)),S=a(n(795)),k=a(n(3992));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var T=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,E.trigger)(o=function(e){(0,l.default)(n,e);var r=C(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new O.default,e.fetchData=function(){var t=e.props.match.params,r=t.cluster,n=t.node;e.store.fetchDetail({name:n,cluster:r})},e.getOperations=function(){var r=e.store.detail.unschedulable;return[{key:"cordon",type:r?"control":"danger",text:r?t("UNCORDON"):t("CORDON"),action:"edit",onClick:e.handleCordon},{key:"eidtLabel",icon:"pen",text:t("EDIT_LABELS"),action:"edit",onClick:function(){return e.trigger("node.labels",{title:t("LABEL_PL"),detail:e.store.detail,success:e.fetchData})}},{key:"taintManagement",icon:"wrench",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return e.trigger("node.taint",{detail:e.store.detail,success:e.fetchData})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,g.default)(r)){var n=(0,_.getNodeStatus)(r),a=f.default.createElement(S.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),o=(0,h.default)(r,"status.addresses[0].address","-"),u=r.nodeInfo||{};return[{name:t("STATUS"),value:a},{name:t("IP_ADDRESS"),value:o},{name:t("ROLE"),value:-1===(0,_.getNodeRoles)(r.labels).indexOf("master")?t("WORKER"):t("CONTROL_PLANE")},{name:t("OS_VERSION"),value:u.osImage},{name:t("OS_TYPE"),value:t(u.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:u.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:u.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:u.kubeletVersion},{name:t("KUBE_PROXY_VERSION"),value:u.kubeProxyVersion},{name:t("ARCHITECTURE"),value:u.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,p.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,v.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_NODE_PL"),url:this.listUrl}]};return f.default.createElement(b.default,(0,u.default)({stores:e,routes:k.default},r))}},{key:"module",get:function(){return"nodes"}},{key:"name",get:function(){return"CLUSTER_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/nodes")}}]),n}(f.default.Component))||o)||o)||o;r.default=T},3992:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(821)),u=n(r(3993)),i=n(r(4e3)),c=n(r(4001)),l=n(r(4002)),s="/clusters/:cluster/nodes/:node",d=[{path:"".concat(s,"/status"),title:"RUNNING_STATUS",component:u.default,exact:!0},{path:"".concat(s,"/pods"),title:"PODS",component:i.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(s,"/monitors"),title:"MONITORING",component:c.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(s,"/events"),title:"EVENT_PL",component:l.default,exact:!0},(0,a.getIndexRoute)({path:s,to:"".concat(s,"/status"),exact:!0})];t.default=d},3993:function(e,r,n){"use strict";n(15);var a=n(20);n(84),n(18),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(84),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(14),p=n(239),m=a(n(26)),h=a(n(63)),g=a(n(973)),y=n(52),v=a(n(789)),_=a(n(790)),E=a(n(1136)),O=a(n(3995)),b=a(n(3997)),S=a(n(3999));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var C=["node_cpu_utilisation","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_pod_utilisation"],T=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,c.default)(n,e);var r=k(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).store=e.detailStore,t.monitoringStore=new g.default({cluster:t.cluster}),t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,r=e.role,n=void 0===r?[]:r;this.monitoringStore.fetchMetrics({resources:[t],metrics:(0,y.hideGPUByLicense)(C,this.cluster),step:"180s",fillZero:!n.includes("edge")})}},{key:"renderResourceStatus",value:function(){var e=(0,f.toJS)(this.monitoringStore.data),r=[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,m.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,m.default)(e,"node_memory_utilisation.data.result")},{key:"gpu",icon:"gpu",unit:"%",legend:["GPU_USAGE"],title:"GPU_USAGE",data:(0,m.default)(e,"node_gpu_utilization.data.result")},{key:"gpu_memory",icon:"computing",unit:"%",legend:["GPU_MEMORY_USAGE"],title:"GPU_MEMORY_USAGE",data:(0,m.default)(e,"node_gpu_memory_utilization.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,m.default)(e,"node_pod_utilisation.data.result")},{key:"storage",icon:"database",unit:"%",legend:["DISK_USAGE"],title:"DISK_USAGE",data:(0,m.default)(e,"node_disk_size_utilisation.data.result")}];return d.default.createElement(v.default,{className:S.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},d.default.createElement(E.default,{tabs:(0,y.hideGPUByLicense)(r)}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return d.default.createElement(v.default,{className:S.default.allocated,title:t("ALLOCATED_RESOURCES")},d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return d.default.createElement(v.default,{title:t("HEALTH_STATUS")},d.default.createElement("div",{className:S.default.conditions},e.map((function(e,t){return d.default.createElement(O.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,h.default)(e)?null:d.default.createElement(v.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&d.default.createElement("div",null,e.map((function(e,t){return d.default.createElement(b.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:S.default.main},this.renderResourceStatus(),this.renderAllocatedResources(),this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(d.default.Component))||o)||o;r.default=T},3995:function(e,r,n){"use strict";n(15);var a=n(20);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(0)),u=n(186),i=n(52),c=n(444),l=a(n(790)),s=a(n(3996)),d=function(e){var r=e.data;if(!c.NODE_CONDITION_ICONS[r.type])return null;var n=(0,c.getConditionsStatus)(r),a=o.default.createElement("div",null,o.default.createElement("div",{className:"tooltip-title"},r.reason),o.default.createElement("p",{className:"tooltip-desc"},r.message),o.default.createElement("p",{className:"tooltip-desc"},t("LAST_HEARTBEAT_VALUE",{value:(0,i.getLocalTime)(r.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return o.default.createElement("div",{className:s.default.card},o.default.createElement("div",{className:s.default.icon},o.default.createElement(u.Icon,{name:c.NODE_CONDITION_ICONS[r.type],size:40}),o.default.createElement(u.Tooltip,{content:a},"Running"===n?o.default.createElement(u.Icon,{className:s.default.check,name:"check",type:"light",size:12}):o.default.createElement(u.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),o.default.createElement(l.default,{title:t("NODE_".concat(r.type.toUpperCase())),description:t("NODE_".concat(r.type.toUpperCase(),"_DESC"))}))};r.default=d},3996:function(e,t,r){e.exports={card:"_3gY1SwAB3Qyzo33NcoETa2",icon:"_3XS03qiViW-ikPky4F7m_x",check:"_2heWfhm7p3vRjks91Lxqps",substract:"_2VlaH5DM4vl23eEoRXmg0V"}},3997:function(e,r,n){"use strict";n(15);var a=n(20);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(0)),u=n(186),i=a(n(3998)),c=function(e){var r=e.data;return o.default.createElement("div",{className:i.default.card},o.default.createElement(u.Columns,null,o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("KEY"),":")," ",r.key)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("VALUE"),":")," ",r.value)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("POLICY"),":")," ",r.effect))))};r.default=c},3998:function(e,t,r){e.exports={card:"_33OfSfo5noeVvDTt0pECNi"}},3999:function(e,t,r){e.exports={charts:"_2JLcedz0mAjNBgUVbRpAlV",resources:"_2izO-GxzIDv54VNolZBX0N",allocated:"_1Ip9txFboGAHGxjdTg1JDy",conditions:"v93LP2ROQDO2QGQL3qZvm"}},4e3:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,d.inject)("detailStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),r}(s.default.Component))||a)||a;t.default=m},4001:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(84),n(18),n(16),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(84),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o,u=a(n(315)),i=a(n(61)),c=a(n(30)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=n(239),g=a(n(26)),y=a(n(63)),v=n(794),_=a(n(973)),E=n(822),O=n(798),b=a(n(862)),S=n(52);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var T={cpu_utilisation:"node_cpu_utilisation",cpu_load1:"node_load1",cpu_load5:"node_load5",cpu_load15:"node_load15",gpu_utilization:"node_gpu_utilization",gpu_memory_utilization:"node_gpu_memory_utilization",gpu_memory_available:"node_gpu_memory_available",gpu_memory_usage:"node_gpu_memory_usage",gpu_temp:"node_gpu_temp",gpu_power_usage:"node_gpu_power_usage",memory_utilisation:"node_memory_utilisation",memory_usage:"node_memory_usage_wo_cache",disk_utilisation:"node_disk_size_utilisation",disk_inode_utilisation:"node_disk_inode_utilisation",device_size_utilisation:"node_device_size_utilisation",disk_inode_usage:"node_disk_inode_usage",disk_inode_total:"node_disk_inode_total",disk_read_iops:"node_disk_read_iops",disk_write_iops:"node_disk_write_iops",disk_read_throughput:"node_disk_read_throughput",disk_write_throughput:"node_disk_write_throughput",net_transmitted:"node_net_bytes_transmitted",net_received:"node_net_bytes_received"},D=(0,h.inject)("detailStore")(o=(0,h.observer)(o=function(e){(0,d.default)(n,e);var r=C(n);function n(e){var a;return(0,l.default)(this,n),(a=r.call(this,e)).fetchData=function(e){var t=a.store.detail,r=t.name,n=t.role,o=void 0===n?[]:n;a.monitorStore.fetchMetrics(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({resources:[r],metrics:Object.values((0,S.hideGPUByLicense)(T,a.cluster)),fillZero:!o.includes("edge")},e))},a.getMonitoringCfgs=function(){var e=(0,g.default)(a.metrics,"".concat(T.device_size_utilisation,".data.result"),[]),r=e&&e.map((function(e){return e.metric.device}));return[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["CPU_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,g.default)(a.metrics,"".concat(T.cpu_load1,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.cpu_load5,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.cpu_load15,".data.result[0]"),{})]},{type:"usage",title:"MEMORY_USAGE",unitType:"memory",legend:["MEMORY_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.memory_usage,".data.result"))},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["MEMORY_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["GPU_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.gpu_utilization,".data.result"))},{type:"utilisation",title:"GPU_MEMORY_USAGE",unit:"%",legend:["GPU_MEMORY_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.gpu_memory_utilization,".data.result"))},{type:"usage",title:"GPU_TEMP",unit:"℃",legend:["GPU_TEMP"],data:(0,g.default)(a.metrics,"".concat(T.gpu_temp,".data.result"))},{type:"usage",title:"GPU_ENERGY_NO_PERCENT_TCAP",unit:"W",legend:["GPU_ENERGY_NO_PERCENT_TCAP"],data:(0,g.default)(a.metrics,"".concat(T.gpu_power_usage,".data.result"))},{type:"usage",title:"GPU_MEMORY_USAGE",unitType:"memory",legend:["NODE_GPU_MEMORY_USAGED","NODE_GPU_MEMORY_UNUSAGED"],data:[(0,g.default)(a.metrics,"".concat(T.gpu_memory_usage,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.gpu_memory_available,".data.result[0]"),{})]},{type:"utilisation",title:"INODE_USAGE",unit:"%",legend:["INODE_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.disk_inode_utilisation,".data.result")),renderTooltip:function(){var e=(0,v.getChartData)({legend:["INODE_USAGE"],valuesData:[(0,g.default)(a.metrics,"".concat(T.disk_inode_usage,".data.result[0].values"),[])]}),t=(0,v.getChartData)({legend:["INODE_USAGE"],valuesData:[(0,g.default)(a.metrics,"".concat(T.disk_inode_total,".data.result[0].values"),[])]});return m.default.createElement(b.default,{usageData:e,totalData:t})}},{type:"utilisation",title:"DISK_USAGE",unit:"%",legend:["DISK_USAGE"],data:(0,g.default)(a.metrics,"".concat(T.disk_utilisation,".data.result"))},{type:"utilisation",title:"DISK_USAGE_DETAILS",unit:"%",legend:["AVERAGE_USAGE"].concat((0,i.default)(r)),data:[(0,g.default)(a.metrics,"".concat(T.disk_utilisation,".data.result[0]"))].concat((0,i.default)(e))},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,g.default)(a.metrics,"".concat(T.disk_read_iops,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.disk_write_iops,".data.result[0]"),{})]},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,g.default)(a.metrics,"".concat(T.disk_read_throughput,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.disk_write_throughput,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_TRAFFIC",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,g.default)(a.metrics,"".concat(T.net_transmitted,".data.result[0]"),{}),(0,g.default)(a.metrics,"".concat(T.net_received,".data.result[0]"),{})]}]},a.monitorStore=new _.default({cluster:a.cluster}),a}return(0,s.default)(n,[{key:"render",value:function(){var e=this.store.detail.createTime,t=this.monitorStore,r=t.isLoading,n=t.isRefreshing,a=(0,S.hideGPUByLicense)(this.getMonitoringCfgs(),this.cluster);return m.default.createElement(E.Controller,{createTime:e,onFetch:this.fetchData,loading:r,refreshing:n,isEmpty:(0,y.default)(this.metrics)},a.map((function(e){var t=(0,v.getAreaChartOps)(e);return(0,y.default)(t.data)?null:m.default.createElement(O.SimpleArea,(0,u.default)({key:t.title,width:"100%"},t))})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(m.default.Component))||o)||o;r.default=D},4002:function(e,t,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=r(239),d=r(52),f=r(813);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,s.inject)("detailStore")(a=(0,s.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),r}(f.Component))||a)||a;t.default=m},4003:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(73),n(18),n(16),n(4),n(23),n(24),n(17),n(62),n(64),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(73),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62),n(64);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(14),m=n(239),h=a(n(26)),g=a(n(63)),y=n(186),v=n(52),_=n(444),E=n(791),O=a(n(856)),b=a(n(823)),S=a(n(795)),k=a(n(4004));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var T=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,E.trigger)(o=function(e){(0,l.default)(n,e);var r=C(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new O.default,e.fetchData=function(){var t=e.props.match.params,r=t.cluster,n=t.node;e.store.fetchDetail({name:n,cluster:r})},e.getOperations=function(){var r=e.store.detail.unschedulable;return[{key:"cordon",type:r?"control":"danger",text:r?t("UNCORDON"):t("CORDON"),action:"edit",onClick:e.handleCordon},{key:"eidtLabel",icon:"pen",text:t("EDIT_LABELS"),action:"edit",onClick:function(){return e.trigger("node.labels",{title:t("LABEL_PL"),detail:e.store.detail,success:e.fetchData})}},{key:"taintManagement",icon:"wrench",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return e.trigger("node.taint",{detail:e.store.detail,success:e.fetchData})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,g.default)(r)){var n=(0,_.getNodeStatus)(r),a=f.default.createElement(S.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),o=(0,h.default)(r,"status.addresses[0].address","-"),u=r.nodeInfo||{};return[{name:t("STATUS"),value:a},{name:t("IP_ADDRESS"),value:o},{name:t("ROLE"),value:(0,_.getNodeRoles)(r.labels).map((function(e){return t(e.replace(/[- ]/g,"_").toUpperCase())})).join("/")||"-"},{name:t("OS_VERSION"),value:u.osImage},{name:t("OS_TYPE"),value:t(u.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:u.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:u.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:u.kubeletVersion},{name:t("KUBE_PROXY_VERSION"),value:u.kubeProxyVersion},{name:t("ARCHITECTURE"),value:u.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,p.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,v.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("EDGE_NODE_PL"),url:this.listUrl}]};return f.default.createElement(b.default,(0,u.default)({stores:e,routes:k.default},r))}},{key:"module",get:function(){return"edgenodes"}},{key:"name",get:function(){return"EDGE_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/edgenodes")}}]),n}(f.default.Component))||o)||o)||o;r.default=T},4004:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(821)),u=n(r(4005)),i=n(r(4011)),c=n(r(4012)),l="/clusters/:cluster/edgenodes/:node",s=[{path:"".concat(l,"/status"),title:"RUNNING_STATUS",component:u.default,exact:!0},{path:"".concat(l,"/pods"),title:"POD_PL",component:i.default,exact:!0},{path:"".concat(l,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(l,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,a.getIndexRoute)({path:l,to:"".concat(l,"/status"),exact:!0})];t.default=s},4005:function(e,r,n){"use strict";n(15);var a=n(20);n(84),n(18),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(84),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(14),p=n(239),m=a(n(26)),h=a(n(63)),g=a(n(973)),y=n(52),v=a(n(789)),_=a(n(790)),E=a(n(1136)),O=a(n(4006)),b=a(n(4008)),S=a(n(4010));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var C=["node_cpu_utilisation","node_memory_utilisation","node_disk_size_utilisation","node_pod_utilisation"],T=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,c.default)(n,e);var r=k(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).store=e.detailStore,t.monitoringStore=new g.default({cluster:t.cluster}),t}return(0,i.default)(n,[{key:"componentDidMount",value:function(){}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,r=e.role,n=void 0===r?[]:r;this.monitoringStore.fetchMetrics({resources:[t],metrics:C,step:"180s",fillZero:!n.includes("edge")})}},{key:"renderResourceStatus",value:function(){var e=(0,f.toJS)(this.monitoringStore.data);return d.default.createElement(v.default,{className:S.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},d.default.createElement(E.default,{tabs:[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,m.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,m.default)(e,"node_memory_utilisation.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,m.default)(e,"node_pod_utilisation.data.result")},{key:"storage",icon:"database",unit:"%",legend:["DISK_USAGE"],title:"DISK_USAGE",data:(0,m.default)(e,"node_disk_size_utilisation.data.result")}]}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return d.default.createElement(v.default,{className:S.default.allocated,title:t("ALLOCATED_RESOURCES")},d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),d.default.createElement(_.default,{title:1===(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,y.cpuFormat)((0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,m.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),d.default.createElement(_.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,y.memoryFormat)((0,m.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,m.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return d.default.createElement(v.default,{title:t("HEALTH_STATUS")},d.default.createElement("div",{className:S.default.conditions},e.map((function(e,t){return d.default.createElement(O.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,h.default)(e)?null:d.default.createElement(v.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&d.default.createElement("div",null,e.map((function(e,t){return d.default.createElement(b.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return d.default.createElement("div",{className:S.default.main},this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(d.default.Component))||o)||o;r.default=T},4006:function(e,r,n){"use strict";n(15);var a=n(20);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(0)),u=n(186),i=n(52),c=n(444),l=a(n(790)),s=a(n(4007)),d=function(e){var r=e.data;if(!c.NODE_CONDITION_ICONS[r.type])return null;var n=(0,c.getConditionsStatus)(r),a=o.default.createElement("div",null,o.default.createElement("div",{className:"tooltip-title"},r.reason),o.default.createElement("p",{className:"tooltip-desc"},r.message),o.default.createElement("p",{className:"tooltip-desc"},t("LATEST_UPDATE_VALUE",{value:(0,i.getLocalTime)(r.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return o.default.createElement("div",{className:s.default.card},o.default.createElement("div",{className:s.default.icon},o.default.createElement(u.Icon,{name:c.NODE_CONDITION_ICONS[r.type],size:40}),o.default.createElement(u.Tooltip,{content:a},"Running"===n?o.default.createElement(u.Icon,{className:s.default.check,name:"check",type:"light",size:12}):o.default.createElement(u.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),o.default.createElement(l.default,{title:t("NODE_".concat(r.type.toUpperCase())),description:t("NODE_".concat(r.type.toUpperCase(),"_DESC"))}))};r.default=d},4007:function(e,t,r){e.exports={card:"Kh3LUefQi7XfqAml1jJcj",icon:"_3iy83CfEy08rg9_-QKFkq7",check:"_17SNYe2bxLoE0pvH1a2aDg",substract:"_3eJAVhQ8al4C0aso0N6wDI"}},4008:function(e,r,n){"use strict";n(15);var a=n(20);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(0)),u=n(186),i=a(n(4009)),c=function(e){var r=e.data;return o.default.createElement("div",{className:i.default.card},o.default.createElement(u.Columns,null,o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("KEY"),":"),r.key)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("VALUE"),":"),r.value)),o.default.createElement(u.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("POLICY"),":")," ",t(r.effect.toUpperCase())))))};r.default=c},4009:function(e,t,r){e.exports={card:"_1Ens6X0pfcZc-RZ6-o7rji"}},4010:function(e,t,r){e.exports={charts:"ZmLO9iLSnLt1J6Gz4uKwS",resources:"lyqB5tNGCKuC1h5-5HtLB",allocated:"_1JOW87aTOtJJdxN1fWMTGb",conditions:"_1DY4TX4djJSe-gKH5iAwVJ"}},4011:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,d.inject)("detailStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,showMonitoring:!1,limit:6,prefix:"/clusters/".concat(e)})}}]),r}(s.default.Component))||a)||a;t.default=m},4012:function(e,t,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=r(239),d=r(52),f=r(813);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,s.inject)("detailStore")(a=(0,s.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),r}(f.Component))||a)||a;t.default=m},4013:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=n(186),m=a(n(823)),h=a(n(795)),g=a(n(26)),y=a(n(63)),v=a(n(189)),_=n(14),E=n(239),O=a(n(0)),b=a(n(1096)),S=a(n(439)),k=a(n(885)),C=n(52),T=n(791),D=a(n(4014)),A=a(n(4015));function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var M=(0,E.inject)("rootStore")(o=(0,E.observer)(o=(0,T.trigger)(o=function(e){(0,s.default)(n,e);var r=P(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new S.default,e.quotaStore=new k.default,e.limitRangeStore=new b.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var r=e.name,n=(0,_.toJS)(e.store.detail),a=e.limitRangeStore.list.data;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",type:"control",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:r,detail:(0,v.default)(n,"workspace"),success:e.fetchData})}},{key:"edit-annotations",icon:"pen",action:"manage",text:t("EDIT_ANNOTATIONS"),show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.annotations.edit",{detail:n,success:e.fetchData})}},{key:"editQuota",icon:"pen",text:t("EDIT_PROJECT_QUOTAS"),action:"edit",onClick:function(){return e.trigger("project.quota.edit",{type:r,detail:n,success:function(){return e.quotaStore.fetch(e.params)}})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",R(R({},e.props.match.params),{},{store:e.limitRangeStore,detail:a[0],success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.delete",{type:r,detail:(0,v.default)(n,"workspace"),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,_.toJS)(e.store.detail);if(!(0,y.default)(r))return[{name:t("STATUS"),value:O.default.createElement(h.default,{type:r.status,name:t(r.status)})},{name:t("CLUSTER"),value:(0,C.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("WORKSPACE"),value:(0,C.showNameAndAlias)(r.workspace,"workspace")},{name:t("CREATION_TIME_TCAP"),value:(0,C.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator||"-"}]},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params)}},{key:"render",value:function(){var e={detailStore:this.store,quotaStore:this.quotaStore,limitRangeStore:this.limitRangeStore};if(this.store.isLoading&&!this.store.detail.name)return O.default.createElement(p.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,C.getDisplayNameNew)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_PL"),url:this.listUrl}]};return O.default.createElement("div",{className:D.default.detailPage},O.default.createElement(m.default,(0,u.default)({stores:e,routes:A.default},r)))}},{key:"module",get:function(){return"projects"}},{key:"name",get:function(){return"PROJECT"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/projects")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}},{key:"params",get:function(){return(0,g.default)(this.props.match,"params",{})}}]),n}(O.default.Component))||o)||o)||o;r.default=M},4014:function(e,t,r){e.exports={detailPage:"_1jdNGCQmXYoAXu4jdd0HNQ"}},4015:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(821)),u=n(r(4016)),i=n(r(4025)),c=n(r(4026)),l=n(r(4028)),s="/clusters/:cluster/projects/:namespace",d=[{path:"".concat(s,"/overview"),title:"OVERVIEW",component:u.default,exact:!0},{path:"".concat(s,"/pods"),title:"POD_PL",component:i.default,exact:!0},{path:"".concat(s,"/gateway"),title:"GATEWAY",component:c.default,exact:!0,clusterModule:"gateway"},{path:"".concat(s,"/quota"),title:"QUOTA_PL",component:l.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:o.default,exact:!0},(0,a.getIndexRoute)({path:s,to:"".concat(s,"/overview"),exact:!0})];t.default=d},4016:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(433),p=n(239),m=a(n(321)),h=n(186),g=a(n(789)),y=a(n(814)),v=a(n(1419)),_=a(n(438)),E=a(n(437)),O=a(n(4024));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var S=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,c.default)(n,e);var r=b(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).fedStore=new E.default({module:"namespaces"}),e.clusterStore=new _.default,e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){if(this.isFedManaged){var e=this.props.detailStore.detail.name;this.fedStore.fetchDetail({name:e,namespace:e}),this.clusterStore.fetchList({limit:-1})}}},{key:"renderPlacement",value:function(){var e=this.fedStore.detail,r=e.clusters,n=void 0===r?[]:r,a=e.name,o=(0,m.default)(this.clusterStore.list.data,"name");return d.default.createElement(g.default,{title:t("CLUSTER_PL")},d.default.createElement(h.Alert,{type:"warning",message:t("MULTI_CLUSTER_PROJECT_TIP"),hideIcon:!0}),d.default.createElement("div",{className:O.default.clusters},n.map((function(e){return o[e.name]?d.default.createElement(f.Link,{key:e.name,className:O.default.cluster,to:"/clusters/".concat(e.name,"/projects/").concat(a)},d.default.createElement(y.default,{cluster:o[e.name],theme:"light",tagClass:"float-right"})):null}))))}},{key:"render",value:function(){var e=this.props.detailStore.detail;return d.default.createElement(d.default.Fragment,null,this.isFedManaged&&this.renderPlacement(),d.default.createElement(v.default,{match:this.props.match,workspace:e.workspace}))}},{key:"isFedManaged",get:function(){return this.props.detailStore.detail.isFedManaged}}]),n}(d.default.Component))||o)||o;r.default=S},4024:function(e,t,r){e.exports={clusters:"_2cmfLkh2-73OlEHQZ0JznP",cluster:"Eh3sYZ8Yv_OZPh6LmU4ij"}},4025:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,d.inject)("detailStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),r}(s.default.Component))||a)||a;t.default=m},4026:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(187),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(187),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(7);var o=a(n(315)),u=a(n(43));n(41);var i,c,l,s,d=a(n(44)),f=a(n(30)),p=a(n(65)),m=a(n(36)),h=a(n(37)),g=a(n(88)),y=a(n(55)),v=a(n(56)),_=a(n(51)),E=a(n(49)),O=(a(n(66)),a(n(0))),b=a(n(1134)),S=n(186),k=a(n(834)),C=n(14),T=n(239),D=a(n(63)),A=a(n(789)),N=a(n(4027));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,_.default)(e);if(t){var a=(0,_.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}var w=(0,T.inject)("detailStore","rootStore")(i=(0,T.observer)((c=function(e){(0,y.default)(n,e);var r=M(n);function n(){var e;(0,m.default)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=r.call.apply(r,[this].concat(i))).store=new k.default,(0,p.default)(e,"gatewayList",l,(0,g.default)(e)),(0,p.default)(e,"isLoading",s,(0,g.default)(e)),e.getProjectGateway=function(){var t=P({},e.props.match.params);return e.store.getGatewayByProject(P(P({},t),{},{cluster:e.cluster,workspace:e.workspace,includeUpper:!0}))},e.getInitGateway=(0,d.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.getProjectGateway();case 3:r=t.sent,e.gatewayList=r,e.isLoading=!1;case 6:case"end":return t.stop()}}),t)}))),e.renderClusterGatewayTitle=function(){return O.default.createElement("div",{className:"title"},t("CLUSTER_GATEWAY"))},e.renderProjectTitle=function(){return O.default.createElement("div",{className:"title"},t("PROJECT_GATEWAY"))},e.renderWorkspaceTitle=function(){return O.default.createElement("div",{className:N.default.title},t("WORKSPACE_GATEWAY"))},e.renderGatewayCardTitle=function(t){return"workspace"===t?e.renderWorkspaceTitle():"project"===t?e.renderProjectTitle():e.renderClusterGatewayTitle()},e.renderOperations=function(r){var n=r.url,a=r.disabled;return O.default.createElement(S.Button,{disabled:a,onClick:function(){e.props.rootStore.routing.push(n)}},t("VIEW_DETAILS"))},e.renderGatewayCard=function(){return e.gatewayList.every((function(e){return(0,D.default)((0,C.toJS)(e))}))?e.renderEmpty():e.gatewayList.map((function(t,r,n){var a=t.gatewayType;return O.default.createElement(b.default,(0,o.default)({key:r,type:a,detail:t,actions:e.enableActions,manageDisable:"project"!==a},e.props,{store:e.store,getData:e.getInitGateway,title:e.renderGatewayCardTitle(a),prefix:"cluster"===a?null:e.prefix,gatewayList:(0,C.toJS)(n)}))}))},e}return(0,h.default)(n,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderEmpty",value:function(){return O.default.createElement(A.default,{className:"margin-t12 margin-b12"},O.default.createElement("div",{className:N.default.empty},O.default.createElement("div",{className:N.default.icon},O.default.createElement(S.Icon,{name:"loadbalancer",size:40})),O.default.createElement("div",{className:N.default.text},O.default.createElement("div",null,t("GATEWAY_NOT_ENABLED")),O.default.createElement("p",null,t("ENT_ENABLE_GATEWAY_TIP")))))}},{key:"render",value:function(){return O.default.createElement("div",null,O.default.createElement(S.Loading,{spinning:this.isLoading},O.default.createElement("div",null,this.renderGatewayCard())))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"prefix",get:function(){var e=this.props.detailStore.detail.workspace;return"/".concat(e,"/clusters/").concat(this.cluster,"/projects/").concat(this.namespace,"/gateways")}},{key:"enableActions",get:function(){return globals.app.getActions(P(P({module:"project-settings"},this.props.match.params),{},{project:this.namespace}))}}]),n}(O.default.Component),l=(0,E.default)(c.prototype,"gatewayList",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=(0,E.default)(c.prototype,"isLoading",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=c))||i)||i;r.default=w},4027:function(e,t,r){e.exports={empty:"_1pASR0wnOOZ188jGyMPDDu",icon:"_36P6BNJUIu_o_9LugrstnV",text:"_2hrgMPH6R-G9psZHUOvDko"}},4028:function(e,t,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(14),f=r(239),p=n(r(1233)),m=n(r(1234));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var g=(0,f.inject)("quotaStore","limitRangeStore")(a=(0,f.observer)(a=function(e){(0,i.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=(0,d.toJS)(this.props.limitRangeStore.list.data)[0],t=(0,d.toJS)(this.props.quotaStore.data);return s.default.createElement(s.default.Fragment,null,s.default.createElement(p.default,{detail:e}),s.default.createElement(m.default,{detail:t}))}}]),r}(s.default.Component))||a)||a;t.default=g},4035:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(31),n(6),n(29),n(16),n(9),n(13),n(10),n(4),n(22),n(23),n(24),n(17),n(38),n(62),n(7),n(32),Object.defineProperty(r,"__esModule",{value:!0}),r.Component=r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(31),n(6),n(29),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(38),n(62),n(7),n(32);var o=a(n(315)),u=a(n(43)),i=a(n(96)),c=a(n(30));n(41);var l,s,d=a(n(44)),f=a(n(65)),p=a(n(36)),m=a(n(37)),h=a(n(88)),g=a(n(55)),y=a(n(56)),v=a(n(51)),_=a(n(49)),E=(a(n(66)),a(n(0))),O=a(n(26)),b=a(n(63)),S=n(239),k=n(186),C=n(52),T=n(791),D=n(14),A=a(n(866)),N=a(n(1212)),R=a(n(1851)),P=a(n(1070)),M=a(n(435)),w=a(n(823)),I=a(n(4036)),L=n(1806);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var a=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.default)(this,r)}}var z=(l=function(e){(0,g.default)(n,e);var r=U(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new A.default,e.accessorStore=new N.default,e.validateWebhookCFStore=new R.default,e.CrdStore=new P.default,e.state={shouldAddCrd:!1},(0,f.default)(e,"ksVersion",s,(0,h.default)(e)),e.fetchData=(0,d.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.accessorStore.getKsVersion(r);case 3:return e.ksVersion=t.sent,t.next=6,e.store.fetchDetail(r);case 6:(0,C.compareVersion)("".concat(e.ksVersion),"v3.3")<0?Promise.all([e.validateWebhookCFStore.fetchDetailWithoutWarning(x(x({},r),{},{name:"storageclass-accessor.storage.kubesphere.io"})),e.CrdStore.fetchDetailWithoutWarning(x(x({},r),{},{name:"accessors.storage.kubesphere.io"}))]).then((function(t){var r=(0,i.default)(t,2),n=r[0],a=r[1],o=n.urlNotSupport,u=a.urlNotSupport;o||u?e.setState({shouldAddCrd:!0}):(0,b.default)(n)||(0,b.default)(a)||e.checkHasAccessor()})):e.checkHasAccessor();case 7:case"end":return t.stop()}}),t)}))),e.checkAccessorExist=(0,d.default)(u.default.mark((function t(){var r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.match.params,!((0,C.compareVersion)("".concat(e.ksVersion),"v3.3")<0)){t.next=5;break}Promise.all([e.validateWebhookCFStore.fetchDetailWithoutWarning(x(x({},r),{},{name:"storageclass-accessor.storage.kubesphere.io"})),e.CrdStore.fetchDetailWithoutWarning(x(x({},r),{},{name:"accessors.storage.kubesphere.io"}))]).then(function(){var t=(0,d.default)(u.default.mark((function t(r){var n,a,o,c,l;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,i.default)(r,2),a=n[0],o=n[1],c=a.urlNotSupport,l=o.urlNotSupport,!c&&!l){t.next=7;break}e.setState({shouldAddCrd:!0}),t.next=10;break;case 7:if((0,b.default)(a)||(0,b.default)(o)){t.next=10;break}return t.next=10,e.checkHasAccessor();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=7;break;case 5:return t.next=7,e.checkHasAccessor();case 7:case"end":return t.stop()}}),t)}))),e.checkHasAccessor=(0,d.default)(u.default.mark((function t(){var r,n,a,o;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(globals.app.hasKSModule("storage-utils")){t.next=2;break}return t.abrupt("return");case 2:return r=e.props.match.params,n=(0,O.default)(e.store.detail,"name"),t.next=6,e.accessorStore.fetchDetailWithoutWarning(x(x({},r),{},{name:"".concat(n,"-accessor")}));case 6:if(!(a=t.sent).urlNotSupport){t.next=11;break}e.setState({shouldAddCrd:!0}),t.next=17;break;case 11:if(!(0,b.default)(a)){t.next=17;break}return o=M.default.accessors(n),t.next=15,e.accessorStore.create(o,x({},r));case 15:return t.next=17,e.accessorStore.fetchDetail({cluster:r.cluster,name:"".concat(r.name,"-accessor")});case 17:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var r,n=e.props.match.params.cluster,a=(0,C.compareVersion)("".concat(e.ksVersion),"v3.3")>=0;return[{key:"editYaml",type:"default",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:(0,D.toJS)(e.store.detail),readOnly:!1,success:e.fetchData})}},{key:"setDefault",icon:"pen",text:t("SET_AS_DEFAULT_STORAGE_CLASS"),action:"edit",onClick:function(){return e.trigger("storageclass.set.default",{detail:(0,D.toJS)(e.store.detail),cluster:n,defaultStorageClass:e.defaultStorageClass.name,success:e.fetchData})}},{key:"accessor",icon:function(){return E.default.createElement(E.default.Fragment,null,E.default.createElement("img",{src:"/assets/storageclass-tree.svg",style:{width:"16px",marginRight:"12px"}}))},text:t("SET_AUTHORIZATION_RULES"),action:"edit",show:a&&globals.app.hasKSModule("storage-utils"),onClick:(r=(0,d.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkAccessorExist();case 2:e.trigger("storageclass.accessor",{storageClassName:(0,O.default)(e.store.detail,"name"),shouldAddCrd:e.state.shouldAddCrd,store:e.accessorStore,detail:(0,D.toJS)(e.accessorStore.detail),cluster:n,success:e.fetchData});case 3:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"funcManage",icon:"slider",text:t("SET_VOLUME_OPERATIONS"),action:"edit",onClick:function(){return e.trigger("storageclass.volume.function.update",{detail:(0,D.toJS)(e.store.detail),StorageClassStore:e.store,success:e.fetchData})}},{key:"autoResizer",icon:function(){return E.default.createElement(E.default.Fragment,null,E.default.createElement("img",{src:"/assets/storageclass_autoresizer.svg",style:{width:"16px",marginRight:"12px"}}))},text:t("SET_AUTO_EXPANSION"),action:"edit",disabled:!a||!(0,O.default)((0,D.toJS)(e.store.detail),"allowVolumeExpansion",!1),show:globals.app.hasKSModule("storage-utils"),onClick:function(){return e.trigger("storageclass.pvc.autoresizer",{detail:(0,D.toJS)(e.store.detail),StorageClassStore:e.store,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("storageclass.delete",{type:e.name,detail:(0,D.toJS)(e.store.detail),accessorStore:e.accessorStore,cluster:n,success:e.returnTolist})}}]},e.getAttrs=function(){var r,n,a=e.store.detail,o=void 0===a?{}:a;return(0,b.default)(o)?null:[{name:t("storageclasses"),value:t(null!==(r=null===(n=L.storageClasses.find((function(e){return e.value===o.storagetype})))||void 0===n?void 0:n.label)&&void 0!==r?r:L.storageClasses[3].label)},{name:t("PROVISIONER"),value:o.provisioner},{name:t("DEFAULT_STORAGE_CLASS"),value:o.default?t("YES"):"-"},{name:t("ALLOW_VOLUME_EXPANSION"),value:o.allowVolumeExpansion?t("TRUE"):t("FALSE")},{name:t("RECLAIM_POLICY"),value:o.reclaimPolicy},{name:t("ALLOW_VOLUME_SNAPSHOT"),value:o.supportSnapshot?t("TRUE"):t("FALSE")}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.cluster;this.store.fetchList({limit:-1,cluster:e}),this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return E.default.createElement(k.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,C.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STORAGE_CLASS_PL"),url:this.listUrl}]};return E.default.createElement(w.default,(0,o.default)({stores:e,routes:I.default},r))}},{key:"defaultStorageClass",get:function(){return(0,D.toJS)(this.store.list).data.find((function(e){return e.default}))||{}}},{key:"name",get:function(){return"STORAGE_CLASS"}},{key:"module",get:function(){return"storageclasses"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/storageclasses")}}]),n}(E.default.Component),s=(0,_.default)(l.prototype,"ksVersion",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l),V=(0,S.inject)("rootStore")((0,S.observer)((0,T.trigger)(z)));r.default=V;var Y=z;r.Component=Y},4036:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(4037)),u="/clusters/:cluster/storageclasses/:name",i=[{name:"volumes",path:"".concat(u,"/volumes"),title:"PERSISTENT_VOLUME_CLAIM_PL",component:o.default},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/volumes"),exact:!0}),(0,a.getIndexRoute)({path:"*",to:"/404",exact:!0})];t.default=i},4037:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(6),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(6),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var o,u=a(n(30)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(239),m=n(52),h=a(n(831)),g=a(n(26)),y=n(186),v=a(n(789)),_=a(n(788)),E=a(n(801)),O=a(n(795)),b=a(n(873)),S=a(n(1131)),k=a(n(3)),C=a(n(4038));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var N=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var r=A(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).handleFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.store.detail,r=t.cluster,n=t.name;e.keyword&&(e.name=e.keyword,delete e.keyword),a.volumeStore.fetchList(D({storageClassName:n,cluster:r},e))},a.getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return f.default.createElement(_.default,{icon:"storage",title:(0,m.getDisplayName)(t),noLink:!0})}},{title:t("STATUS"),dataIndex:"phase",width:"13%",render:function(e){return f.default.createElement(O.default,{type:e,name:t("VOLUME_STATUS_".concat(e.toUpperCase()))})}},{title:t("CAPACITY"),dataIndex:"capacity",width:"13%",render:function(e){return e||"-"}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",width:"13%",render:function(e,t){return f.default.createElement(S.default,{namespace:t.namespace,cluster:t.cluster,name:t.name})}},{title:t("PROJECT"),dataIndex:"namespace",key:"namespace",width:"13%",customizable:!0,render:function(e){return(0,m.showNameAndAlias)(e,"project")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",width:"21%",render:function(e){return(0,m.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},a.renderResizeItem=function(e){var t=e.src,r=e.title,n=e.des,a=e.iconName,o=e.key;return f.default.createElement("div",{key:o,className:(0,k.default)(C.default.item,C.default.item_bg)},a?f.default.createElement(y.Icon,{name:a,size:40}):f.default.createElement("img",{src:t,className:C.default.icon}),f.default.createElement("div",null,f.default.createElement("span",{className:C.default.title},r),f.default.createElement("span",{className:C.default.des},n)))},a.renderResize=function(){var e=a.props.detailStore.detail.annotations,r=JSON.parse((0,g.default)(e,"resize.kubesphere.io/enabled","false")),n=JSON.parse((0,g.default)(e,"restart.kubesphere.io/enabled","false")),o=(0,g.default)(e,"resize.kubesphere.io/storage-limit","10000Gi"),u=(0,g.default)(e,"resize.kubesphere.io/threshold","10%"),i=(0,g.default)(e,"resize.kubesphere.io/increase","10%"),c=(0,g.default)(e,"restart.kubesphere.io/max-time","300"),l={title:t("VALUE_TIMEOUT",{value:c}),iconName:"history-duotone",des:t("RESTART_WORKLOAD_AUTOMATICALLY")},s=[{iconName:"storage",title:o,des:t("MAXIMUM_SIZE_SCAP")},{src:"/assets/chart.svg",title:u,des:t("THRESHOLD")},{iconName:"stretch",title:i,des:t("INCREMENT")}];return n&&s.push(l),r&&globals.app.hasKSModule("storage-utils")&&f.default.createElement(v.default,null,f.default.createElement("div",{className:(0,k.default)(C.default.item,C.default.top)},f.default.createElement("img",{src:"/assets/storageclass_autoresizer.svg",className:C.default.icon}),f.default.createElement("div",null,f.default.createElement("span",{className:C.default.title},t("AUTO_EXPANSION")),f.default.createElement("span",{className:C.default.des},t("AUTO_EXPANSION_DESC")))),f.default.createElement("div",{className:C.default.bottom},s.map((function(e,t){return a.renderResizeItem(D(D({},e),{},{key:t}))}))))},a.volumeStore=e.volumeStore||new h.default,a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this.volumeStore.list,r=e.data,n=e.filters,a=e.isLoading,o={total:e.total,page:e.page,limit:e.limit};return f.default.createElement(f.default.Fragment,null,this.renderResize(),f.default.createElement(E.default,{title:t("PERSISTENT_VOLUME_CLAIM_PL"),loading:a,empty:t("NO_AVAILABLE_RESOURCE_VALUE",{resource:t("PERSISTENT_VOLUME_CLAIM")})},f.default.createElement(b.default,{className:C.default.table,data:r,columns:this.getColumns(),searchType:"name",keyword:n.name,filters:n,placeholder:t("SEARCH_BY_NAME"),pagination:o,isLoading:a,onFetch:this.handleFetch})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"storageClassName",get:function(){return this.store.detail.name}}]),n}(f.default.Component))||o)||o;r.default=N},4038:function(e,t,r){e.exports={table:"_2kjHtHOfFmm6itggAkoQAL",top:"_5cglYSZWbQvrCmvoMyqxP",item:"_21kLc98uyqQuBRc4Q-dyhM",icon:"_1vTN6gl6PThH5CifVSvUo6",title:"_1QIhBOEC_Y-VZV4BPZvjdr",des:"_3NV29u5T-Tku0Cp7CeL7d",bottom:"z1wHL-lLdkBj_ZwzB6voh",item_bg:"_2TzaGW5k734_6hWUzqgCSv"}},4039:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(239),m=n(186),h=n(52),g=n(434),y=a(n(1807)),v=a(n(795)),_=a(n(823)),E=a(n(4040));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var r=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new y.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[]},e.getAttrs=function(){var r=e.store.detail,n=(0,g.getComponentStatus)(r);return[{name:t("STATUS"),value:f.default.createElement(v.default,{type:n,name:t(n)})},{name:t("CLUSTER"),value:(0,h.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("PROJECT"),value:(0,h.showNameAndAlias)(r.namespace,"project")},{name:t("REPLICA_COUNT"),value:"".concat(r.healthyBackends,"/").concat(r.totalBackends)},{name:t("CREATION_TIME_TCAP"),value:(0,h.getLocalTime)(r.startedAt).format("YYYY-MM-DD HH:mm:ss")}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(m.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,h.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SYSTEM_COMPONENT_PL"),url:this.listUrl}]};return f.default.createElement(_.default,(0,u.default)({stores:e,routes:E.default},r))}},{key:"name",get:function(){return"SYSTEM_COMPONENT"}},{key:"module",get:function(){return"components"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/components")}}]),n}(f.default.Component))||o)||o;r.default=b},4040:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(4041)),u="/clusters/:cluster/components/:namespace/:name",i=[{path:"".concat(u,"/service-details"),title:"POD_PL",component:o.default,exact:!0},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/service-details"),exact:!0})];t.default=i},4041:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(849)),p=n(r(443));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=(0,d.inject)("detailStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=m(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).serviceStore=new p.default,e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.serviceStore.fetchDetail(this.props.match.params)}},{key:"render",value:function(){var e=this.props.match.params.cluster;return this.serviceStore.isLoading?null:s.default.createElement(f.default,{detail:this.serviceStore.detail,prefix:"/clusters/".concat(e)})}},{key:"module",get:function(){return this.props.module}},{key:"store",get:function(){return this.props.detailStore}}]),r}(s.default.Component))||a)||a;t.default=h},4042:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(14),m=n(239),h=a(n(63)),g=n(186),y=n(52),v=n(791),_=a(n(1070)),E=a(n(823)),O=a(n(4043));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var S=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,v.trigger)(o=function(e){(0,l.default)(n,e);var r=b(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new _.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,h.default)(r))return[{name:t("CLUSTER"),value:(0,y.showNameAndAlias)(e.props.match.params.cluster,"cluster")},{name:t("SCOPE_TCAP"),value:r.scope},{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator||"-"}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(g.Loading,{className:"ks-page-loading"});var r={module:this.module,name:this.store.detail.kind,desc:this.store.detail.name,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return f.default.createElement(E.default,(0,u.default)({stores:e,routes:O.default},r))}},{key:"module",get:function(){return"customresourcedefinitions"}},{key:"name",get:function(){return"CRD"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/customresources")}}]),n}(f.default.Component))||o)||o)||o;r.default=S},4043:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(4044)),u="/clusters/:cluster/customresources/:name",i=[{path:"".concat(u,"/resources"),title:"RESOURCE_STATUS",component:o.default,exact:!0},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/resources"),exact:!0})];t.default=i},4044:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o,u=a(n(61)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(14),h=n(239),g=a(n(788)),y=a(n(796)),v=n(52),_=n(791),E=a(n(1173)),O=a(n(4045));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,h.inject)("rootStore","detailStore")(o=(0,h.observer)(o=(0,_.trigger)(o=function(e){(0,s.default)(n,e);var r=k(n);function n(e){var t;(0,c.default)(this,n),(t=r.call(this,e)).getData=function(e){t.store.fetchList(S(S({},e),{},{cluster:t.props.match.params.cluster}))};var a=t.props.detailStore.detail,o=a.group,u=a.latestVersion,i=a.kind,l=a.module;return t.store=new E.default({kind:i,module:l,apiVersion:"apis/".concat(o,"/").concat(u)}),t}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.store.list,r=e.data,n=e.name,a=e.page,o=e.total,u=e.limit,i=e.isLoading,c={page:a,total:o,limit:u},l={name:n};return p.default.createElement("div",null,p.default.createElement("div",{className:O.default.title},t("CUSTOM_RESOURCE_PL")),p.default.createElement(y.default,{data:(0,m.toJS)(r),columns:this.columns,isLoading:i,onFetch:this.getData,itemActions:this.itemActions,enabledActions:this.enabledActions,pagination:c,filters:l,showEmpty:!1,searchType:"name",hideCustom:!0}))}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"customresourcedefinitions",cluster:this.props.match.params.cluster})}},{key:"itemActions",get:function(){var e=this;return[this.enabledActions.includes("edit")?{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,success:e.getData})}}:{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(t){return e.trigger("resource.yaml.edit",{detail:t,yaml:t._originData,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(t){return e.trigger("resource.delete",{type:"CUSTOM_RESOURCE",detail:t,success:e.getData})}}]}},{key:"columns",get:function(){var e=this.props.detailStore.detail.scope;return[{title:t("NAME"),dataIndex:"name",render:function(e,t){return p.default.createElement(g.default,{title:(0,v.getDisplayName)(t),desc:t.description,noLink:!0})}}].concat((0,u.default)("Namespaced"===e?[{title:t("PROJECT_DEVOPS_PROJECT"),dataIndex:"namespace",render:function(e){return(0,v.showNameAndAlias)(e,"project")}}]:[]),[{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",render:function(e){return(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}])}}]),n}(p.default.Component))||o)||o)||o;r.default=C},4045:function(e,t,r){e.exports={title:"_2jttfh7kRfWWvaOvcR-zmM"}},4046:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(84),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(84),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=a(n(0)),p=n(14),m=n(239),h=a(n(26)),g=a(n(63)),y=n(186),v=n(52),_=n(791),E=a(n(441)),O=a(n(823)),b=a(n(4047));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var k=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,l.default)(n,e);var r=S(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new E.default("clusterroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),roleModules:(0,p.toJS)(e.store.roleCategory),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),cluster:e.props.match.params.cluster,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,g.default)(r))return[{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates("cluster"),this.store.fetchTemplatesCategory("cluster")}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,h.default)(this.store.detail,"name"),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_ROLE_PL"),url:this.listUrl}]};return f.default.createElement(O.default,(0,u.default)({stores:e,routes:b.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"clusterroles"}},{key:"name",get:function(){return"CLUSTER_ROLE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/roles")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetClusterRoles.includes(e)}}]),n}(f.default.Component))||o)||o)||o;r.default=k},4047:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(1022)),u=n(r(1074)),i="/clusters/:cluster/roles/:name",c=[{path:"".concat(i,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(i,"/users"),title:"AUTHORIZED_USER_PL",component:u.default,exact:!0},(0,a.getIndexRoute)({path:i,to:"".concat(i,"/authorizations"),exact:!0})];t.default=c},4051:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(16),n(27),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(136),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(27),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,u=a(n(315)),i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(0)),m=n(791),h=a(n(26)),g=n(239),y=a(n(851)),v=a(n(823)),_=n(186),E=a(n(1403)),O=a(n(4052)),b=a(n(4055));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,g.inject)("rootStore")(o=(0,g.observer)(o=(0,m.trigger)(o=function(e){(0,s.default)(n,e);var r=C(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new y.default,e.fetchData=function(){e.store.fetchDetail(k(k({},e.props.match.params),{},{namespace:"kubesphere-logging-system"}))},e.getOperations=function(){return[{key:"edit",type:"control",text:t("EDIT"),action:"edit",onClick:function(){return e.trigger("log.collection.edit",{success:e.fetchData,component:e.component})}},{key:"changeStatus",text:t("CHANGE_STATUS"),icon:"pin",action:"edit",onClick:function(){return e.trigger("log.collection.active.switch",{data:{enabled:Number("true"===(0,h.default)(e.store.detail,'labels["logging.whizard.io/enable"]',"false")?1:0)},success:e.fetchData})}},{key:"delete",text:t("DELETE"),icon:"trash",action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:"LOG_RECEIVER",detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}},{key:"editYaml",text:t("EDIT_YAML"),icon:"pen",action:"edit",onClick:function(){e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}}]},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getAttrs",value:function(){return[{name:t("STATUS"),value:"true"===(0,h.default)(this.store,'detail.labels["logging.whizard.io/enable"]')?t("ENABLED"):t("DISABLED")}]}},{key:"render",value:function(){var e,r={detailStore:this.store},n=this.store.detail,a=(null==n||null===(e=n.name)||void 0===e?void 0:e.split("-").pop())||"",o=(0,h.default)(E.default,"".concat(a,".ICON")),i=(0,h.default)(E.default,"".concat(a,".title"),t("LOADING")),c=o?p.default.createElement(o,{className:b.default.icon,width:32,height:32}):"Loading";if(this.store.isLoading)return p.default.createElement(_.Loading,{className:"ks-page-loading"});var l={module:this.module,name:i,icon:c,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("LOG_RECEIVER_PL"),url:this.listUrl}]};return p.default.createElement(v.default,(0,u.default)({stores:r,routes:O.default},l))}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/log-collections/").concat(this.component)}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"component",get:function(){return this.props.match.params.component}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(p.default.Component))||o)||o)||o;r.default=T},4052:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(317),o=n(r(4053)),u="/clusters/:cluster/log-collections/:component/:name",i=[{path:"".concat(u,"/resource-status"),title:"RESOURCE_STATUS",component:o.default,exact:!0},(0,a.getIndexRoute)({path:u,to:"".concat(u,"/resource-status"),exact:!0})];t.default=i},4053:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(16),n(4),n(23),n(24),n(17),n(62),n(64),n(136),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62),n(64);var o,u=a(n(36)),i=a(n(37)),c=a(n(55)),l=a(n(56)),s=a(n(51)),d=a(n(0)),f=n(239),p=a(n(26)),m=a(n(789)),h=a(n(1218)),g=a(n(4054));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var v=(0,f.inject)("detailStore")(o=(0,f.observer)(o=function(e){(0,c.default)(n,e);var r=y(n);function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=(0,p.default)(this.props.detailStore,"detail",{}),r=e.name.split("-").pop(),n="".concat(r,"_").concat(this.component).replace("-","_"),a=(0,p.default)(e,"config.sinks.".concat(n),{}),o="",u="",i="logs";return"kafka"===r?(o=(0,p.default)(a,"bootstrap_servers","-"),u=(0,p.default)(a,"topic","")):(o=(0,p.default)(a,"endpoints[0]","-"),i=(0,p.default)(a,"bulk.index","-").replace("{{ .cluster }}-","").replace("-%Y.%m.%d","")),d.default.createElement(m.default,null,d.default.createElement(h.default,{className:g.default.attributes},"kafka"===r&&d.default.createElement(h.default.Item,{className:g.default.item,name:t("TOPIC"),value:u}),d.default.createElement(h.default.Item,{className:g.default.item,name:t("ADDRESS"),value:o}),"elasticsearch"===r&&d.default.createElement(h.default.Item,{className:g.default.item,name:t("INDEX_PREFIX"),value:i})))}},{key:"component",get:function(){return this.props.match.params.component}}]),n}(d.default.Component))||o)||o;r.default=v},4054:function(e,t,r){e.exports={attributes:"_1fcFwLiMNf2V7HyrLmivLq",item:"V_5vTiOowYSB3wAuDhlip"}},4055:function(e,t,r){e.exports={icon:"_3OH5gauRQWhyK_uriQN9S9"}},4056:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(11),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,u=a(n(315)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51)),f=n(186),p=a(n(240)),m=a(n(823)),h=a(n(795)),g=a(n(26)),y=a(n(63)),v=n(14),_=n(239),E=n(477),O=a(n(0)),b=a(n(1316)),S=n(52),k=n(791),C=n(434),T=a(n(4057));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var A=(0,_.inject)("rootStore")(o=(0,_.observer)(o=(0,k.trigger)(o=function(e){(0,l.default)(n,e);var r=D(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).fetchData=function(){a.store.fetchDetail(a.props.match.params)},a.handleNatOutgoing=function(){var e=(0,v.toJS)(a.store.detail),r=(0,g.default)(e,"natOutgoing",!1);a.store.patch(e,{spec:{natOutgoing:!r}}).then((function(){r?p.default.success({content:"".concat(t("CLOSED_SUCCESSFUL"))}):p.default.success({content:"".concat(t("OPENED_SUCCESSFUL"))}),a.fetchData()}))},a.getOperations=function(){var e=a.name,r=a.props.match.params.cluster,n=(0,v.toJS)(a.store.detail);return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",type:"control",onClick:function(){return a.trigger("resource.baseinfo.edit",{type:e,detail:n,success:a.fetchData})}},{key:"editOverlay",icon:"pen",show:function(){return!a.isOutdated},text:t("EDIT_OVERLAY"),action:"edit",onClick:function(){a.trigger("network.ipool.editoverlay",{detail:n,cluster:r,success:a.fetchData})}},{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(){return a.trigger("resource.yaml.edit",{detail:n,readOnly:!0})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return a.trigger("resource.yaml.edit",{detail:n})}},{key:"modify",icon:"enterprise",text:t("ASSIGN_WORKSPACE"),action:"edit",show:function(){return!a.isCalico},onClick:function(){return a.trigger("network.ipool.assignworkspace",{detail:n,success:a.fetchData})}},{key:"OnOutgoing",icon:"start",text:t("CLOSE_NAT_OUTGOING"),action:"edit",show:function(e){return!a.isOutdated&&e.natOutgoing},onClick:a.handleNatOutgoing},{key:"OffOutgoing",icon:"stop",text:t("OPEN_NAT_OUTGOING"),action:"edit",show:function(e){return!a.isOutdated&&!e.natOutgoing},onClick:a.handleNatOutgoing},{key:"enable",icon:"start",text:t("ENABLE"),action:"edit",show:function(e){return e.disabled&&!a.isOutdated},onClick:function(){a.store.patch(n,{spec:{disabled:!1}}).then((function(){a.fetchData(),p.default.success({content:"".concat(t("ENABLE_SUCCESSFUL"))})}))}},{key:"disable",icon:"stop",text:t("DISABLE"),action:"edit",show:function(e){return!e.disabled&&!a.isOutdated},onClick:function(){a.trigger("network.ipool.disable",{detail:n,cluster:r,success:a.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return a.trigger("resource.delete",{type:e,detail:n,success:function(){return a.routing.push(a.listUrl)}})}}].filter((function(e){return!e.show||e.show(n)}))},a.getAttrs=function(){var e=(0,v.toJS)(a.store.detail);if(!(0,y.default)(e)){var r=new E.Netmask(e.cidr),n=(0,C.getOverlayStatus)(e);return[!a.isOutdated&&{name:t("STATUS"),value:O.default.createElement(h.default,{type:e.disabled?"Disabled":"Running",name:t(e.disabled?"DISABLED":"ENABLED")})},{name:t("NETWORK_SEGMENT"),value:e.cidr},{name:t("USED_IP_ADDRESSES"),value:(0,g.default)(e,"status.capacity",0)-(0,g.default)(e,"status.unallocated",0)},{name:t("IPPOOL_BLOCK_SIZE"),value:e.blockSize},{name:t("NAT outgoing"),value:e.natOutgoing?t("OPENED"):t("CLOSED")},!a.isOutdated&&{name:t("IPPOOL_OVERLAY_MODE"),value:n.value?"".concat(n.type,"(").concat(n.value,")"):n.type},{name:t("MASK"),value:r.mask},{name:t("NETWORK"),value:r.base},{name:t("START_IP_ADDRESS"),value:r.base},{name:t("END_IP_ADDRESS"),value:r.broadcast},{name:t("CREATION_TIME_TCAP"),value:(0,S.getLocalTime)(e.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:e.creator||"-"}].filter(Boolean)}},a.ippoolStore=new b.default,a.store=new(a.ippoolStore.getStoreByCluster(e.match.params.cluster)),a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return O.default.createElement(f.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,S.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("POD_IP_POOL_PL"),url:this.listUrl}]};return O.default.createElement(m.default,(0,u.default)({stores:e,routes:this.routes},r))}},{key:"module",get:function(){return"ippools"}},{key:"authKey",get:function(){return"network"}},{key:"name",get:function(){return"POD_IP_POOL"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/clusters/".concat(e,"/ippools")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,g.default)(this.props.match,"params",{})}},{key:"isOutdated",get:function(){if(!globals.app.isMultiCluster)return!1;var e=(0,g.default)(globals,"clusterConfig.".concat(this.props.match.params.cluster,".ksVersion"));return(0,S.compareVersion)(e,"3.4.0")<0}},{key:"isCalico",get:function(){var e=this.props.match.params.cluster;return this.ippoolStore.isCalico(e)}},{key:"routes",get:function(){return(0,T.default)(this.isCalico)}}]),n}(O.default.Component))||o)||o)||o;r.default=A},4057:function(e,t,r){"use strict";r(15);var n=r(20);r(11),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(11),r(28),r(4);var a=r(317),o=n(r(4058)),u=n(r(4060)),i=n(r(4070)),c="/clusters/:cluster/ippools/:name";t.default=function(e){var t=[{path:"".concat(c,"/workspaces"),title:"WORKSPACE_PL",component:o.default,exact:!0},{path:"".concat(c,"/namespaces"),title:"NAMESPACE_PL",component:u.default,exact:!0},{path:"".concat(c,"/pods"),title:"POD_PL",component:i.default,exact:!0}];return e?(t=t.filter((function(e){return"WORKSPACE_PL"!==e.title}))).push((0,a.getIndexRoute)({path:c,to:"".concat(c,"/namespaces"),exact:!0})):(t=t.filter((function(e){return"NAMESPACE_PL"!==e.title}))).push((0,a.getIndexRoute)({path:c,to:"".concat(c,"/workspaces"),exact:!0})),t}},4058:function(e,r,n){"use strict";var a=n(20);n(12),n(109),n(5),n(11),n(6),n(73),n(18),n(87),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(6),n(73),n(18),n(28),n(87),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var o,u,i=a(n(30)),c=a(n(36)),l=a(n(37)),s=a(n(55)),d=a(n(56)),f=a(n(51)),p=a(n(49)),m=a(n(789)),h=a(n(790)),g=a(n(26)),y=a(n(63)),v=n(14),_=n(239),E=a(n(0)),O=a(n(445)),b=n(52),S=a(n(4059));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,_.inject)("detailStore")(o=(0,_.observer)((u=function(e){(0,s.default)(n,e);var r=T(n);function n(){var e;(0,c.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).store=e.props.detailStore,e.workspaceStore=new O.default,e.fetchWorkspaces=function(){var t=e.store.detail,r=(0,g.default)(t,"status.workspaces",{});e.workspaceStore.fetchList({names:Object.keys(r).join(","),limit:-1})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchWorkspaces()}},{key:"render",value:function(){var e=this.store.detail,r=(0,g.default)(e,"status.workspaces",{}),n=this.workspaces;return E.default.createElement(m.default,{title:t("WORKSPACES")},E.default.createElement("div",{className:S.default.wrapper},(0,y.default)(r)&&E.default.createElement("div",{className:S.default.empty},t("IPPOOL_WORKSPACE_EMPTY_TIP")),Object.keys(r).map((function(e){var a=n[e]||{};return E.default.createElement("div",{key:e,className:S.default.item},E.default.createElement(h.default,{icon:"enterprise",title:(0,b.showNameAndAlias)(a),description:a.description||t("WORKSPACE")}),E.default.createElement(h.default,{title:r[e].allocations,description:t("USED_IP_ADDRESSES")}),E.default.createElement(h.default,{title:a.manager,description:t("MANAGER")}))}))))}},{key:"workspaces",get:function(){return this.workspaceStore.list.data.reduce((function(e,t){return C(C({},e),{},(0,i.default)({},t.name,t))}),{})}}]),n}(E.default.Component),(0,p.default)(u.prototype,"workspaces",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"workspaces"),u.prototype),o=u))||o)||o;r.default=D},4059:function(e,t,r){e.exports={wrapper:"_21Nur-ML8E1lmqmL3lRt3i",item:"_1bL8xFnk72nG93G57IoCla",empty:"_18lwhh8wev9Vr_5zWvrNMe"}},4060:function(e,r,n){"use strict";n(15);var a=n(20);n(11),n(84),n(18),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(n(43));n(41);var u=a(n(44)),i=a(n(36)),c=a(n(37)),l=a(n(55)),s=a(n(56)),d=a(n(51));n(45),n(11),n(84),n(18),n(28),n(191),n(42),n(16),n(159),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(85),n(62);var f,p=a(n(812)),m=a(n(26)),h=a(n(74)),g=a(n(1023)),y=a(n(1029)),v=n(239),_=a(n(0)),E=a(n(4064)),O=n(14),b=n(186),S=n(791),k=a(n(4065)),C=a(n(4067)),T=a(n(4069));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}function A(e){var t=(0,O.toJS)((0,m.default)(e,"annotations")),r=(0,m.default)(t,'["cni.projectcalico.org/ipv4pools"]',"[]");return JSON.parse(r)}function N(e,t){var r=(0,m.default)((0,O.toJS)(e),"_originData",{});return(0,h.default)(r,'metadata.annotations["cni.projectcalico.org/ipv4pools"]',JSON.stringify(t)),r}var R=(0,v.inject)("detailStore","rootStore")(f=(0,v.observer)(f=(0,S.trigger)(f=function(e){(0,l.default)(n,e);var r=D(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).fetchNamespacesList=function(){var e=a.name,t=a.props.match.params.cluster;a.store.fetchList({cluster:t,limit:-1,labelSelector:"ippool.network.kubesphere.io/".concat(e)})},a.handleShowForm=function(){a.setState({showForm:!0})},a.handleCancel=function(){a.setState({showForm:!1})},a.handleAdd=function(){var e=(0,u.default)(o.default.mark((function e(t){var r,n,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=A(t),n=a.name,r.includes(n)){e.next=7;break}return r.push(n),u=N(t,r),e.next=7,a.store.patchNamespace({cluster:a.cluster,namespace:t.name},u);case 7:a.handleCancel(),a.fetchNamespacesList();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(e){var r=e.workspace,n=e.name,o=N(e,(0,y.default)(A(e),(function(e){return e!==a.name})));a.trigger("network.ipool.removeNamespace",{namespace:n,workspace:r,cluster:a.cluster,data:o,title:t("DROP"),desc:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT_DESC"),store:a.store,success:function(){a.fetchNamespacesList()}})},a.removeAll=function(){var e=a.store.list,r=a.detailStore.detail.name,n=e.data.filter((function(e){return A(e).includes(r)}));a.trigger("network.ipool.removeNamespaceAll",{title:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT"),desc:t("REMOVEALL_IPPOOLL_NAMESPACE_PROJECT_DESC"),store:a.store,namespaceList:n,cluster:a.cluster,getData:function(e){return N(e,(0,y.default)(A(e),(function(e){return e!==a.name})))},success:function(){a.fetchNamespacesList()}})},a.renderTitle=function(){return _.default.createElement("div",{className:T.default.titleWrapper},_.default.createElement("div",{className:T.default.title},t("NAMESPACE_PL")),_.default.createElement(b.Button,{icon:"trash",type:"float",disabled:!(0,g.default)(a.store.list.data),onClick:a.removeAll},t("REMOVEALL_IPPOOLL_NAMESPACE")))},a.detailStore=e.detailStore,a.store=new E.default,a.state={showForm:!1},a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchNamespacesList()}},{key:"render",value:function(){var e=this,r=this.state.showForm;return _.default.createElement("div",null,this.renderTitle(),_.default.createElement("div",{className:T.default.panel},_.default.createElement(p.default,null,_.default.createElement(k.default,{icon:"add",title:t("ADD_IPPOOLL_NAMESPACE"),description:t("ADD_IPPOOLL_NAMESPACE_DESC"),onClick:this.handleShowForm}),r&&_.default.createElement(C.default,{onOk:this.handleAdd,onCancel:this.handleCancel,cluster:this.props.match.params.cluster}),this.list.map((function(r){return _.default.createElement(p.default.Item,{key:r.name,icon:"project",title:r.name,description:t("PROJECT"),onDelete:function(){return e.handleDelete(r)},details:[{title:(0,m.default)(e.namespaceState,r.name,0),description:t("USED_IP_ADDRESSES")},{title:r.creator||"-",description:t("ADMINISTRATOR")}]})})))))}},{key:"namespaceState",get:function(){var e=(0,O.toJS)(this.detailStore.detail);return(0,m.default)(e,"status.namespaces",{})}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"list",get:function(){var e=(0,O.toJS)(this.store.list).data;return void 0===e?[]:e}},{key:"name",get:function(){var e=this.detailStore.detail;return(0,m.default)(e,"name","")}}]),n}(_.default.Component))||f)||f)||f;r.default=R},4064:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(22),r(23),r(57),r(17);var a=n(r(43));r(41);var o=n(r(44)),u=n(r(36)),i=n(r(37)),c=n(r(55)),l=n(r(56)),s=n(r(51));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var a=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var f=function(e){(0,c.default)(n,e);var t,r=d(n);function n(){var e;(0,u.default)(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).module="namespaces",e.getBindUrl=function(e){var t=e.namespace,r=e.cluster;return"clusters/".concat(r,"/api/v1/namespaces/").concat(t)},e}return(0,i.default)(n,[{key:"patchNamespace",value:(t=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request.put(this.getBindUrl(t),r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"apiVersion",get:function(){return"kapis/resources.kubesphere.io/v1alpha3"}}]),n}(n(r(68)).default);t.default=f},4065:function(e,t,r){"use strict";r(15);var n=r(20);r(12),r(109),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(109),r(45),r(42),r(4),r(23),r(57),r(17);var a=n(r(30)),o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=n(r(3)),f=r(186),p=n(r(4066));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,i.default)(r,e);var t=m(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,t=e.icon,r=e.image,n=e.title,o=e.description,u=e.onClick,i=e.type;return s.default.createElement("div",{className:(0,d.default)(p.default.add,(0,a.default)({},p.default.withIcon,t||r),p.default[i]),onClick:u},s.default.createElement("div",{className:p.default.icon},t&&s.default.createElement(f.Icon,{name:t,size:40})),s.default.createElement("div",{className:p.default.text},s.default.createElement("div",{className:p.default.title},n),s.default.createElement("div",{className:p.default.description},o)))}}]),r}(s.default.Component);t.default=h},4066:function(e,t,r){e.exports={add:"_2dcq7NHXgEwsUW4m8Fk48L",withIcon:"_1HejuFRyIzWvFM3f0-NMFy"}},4067:function(e,r,n){"use strict";var a=n(20);n(12),n(11),n(31),n(6),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(11),n(31),n(6),n(18),n(28),n(859),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var o,u,i,c=a(n(30)),l=a(n(36)),s=a(n(37)),d=a(n(55)),f=a(n(56)),p=a(n(51)),m=a(n(0)),h=a(n(3)),g=n(186),y=a(n(439)),v=a(n(1)),_=n(52),E=n(239),O=a(n(4068));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,E.observer)((i=u=function(e){(0,d.default)(n,e);var r=k(n);function n(){var e;return(0,l.default)(this,n),(e=r.call(this)).handleChange=function(t){e.setState({namespace:t})},e.fetchProjects=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.props.cluster;return t.name&&(t.nameAndAlias=t.name,delete t.name),e.projectStore.fetchList(S(S({cluster:r},t),{},{limit:-1}))},e.handleOk=function(){var t=e.props.onOk,r=e.state.namespace,n=e.projectStore.list.data.find((function(e){return e.name===r}));t&&(null==t||t(n))},e.projectStore=new y.default,e.state={namespace:""},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.fetchProjects()}},{key:"getProjects",value:function(){var e=this.props.defaultValue,t=this.projectStore.list.data,r=t.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:(0,_.showNameAndAlias)(e),value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}));return e&&!t.find((function(t){return t.name===e}))&&r.unshift({label:e,value:e}),r}},{key:"render",value:function(){var e=this.props.onCancel,r=this.state.namespace;return m.default.createElement("div",{className:(0,h.default)(O.default.item)},m.default.createElement(g.Select,{options:this.getProjects(),isLoading:this.projectStore.list.isLoading,onChange:this.handleChange,defaultValue:r}),m.default.createElement("div",{className:O.default.operate},m.default.createElement(g.Button,{type:"control",onClick:this.handleOk},t("OK")),m.default.createElement(g.Button,{onClick:e},t("CANCEL"))))}}]),n}(m.default.Component),u.propTypes={onOk:v.default.func,onCancel:v.default.func},o=i))||o;r.default=C},4068:function(e,t,r){e.exports={item:"_3BPuVvwzk_ge6XiLGhcP6v",operate:"HrIC05qaTJCYxqZGeOZP8"}},4069:function(e,t,r){e.exports={panel:"_2yziRuevY1NN2X0AGAnWlQ",titleWrapper:"MbTA39N9Zn2UUDj-GAUOV",title:"_3Kgi3PGvirCbjpoBiX0lZa"}},4070:function(e,t,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var a,o=n(r(36)),u=n(r(37)),i=n(r(55)),c=n(r(56)),l=n(r(51)),s=n(r(0)),d=r(239),f=n(r(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var m=(0,d.inject)("detailStore")(a=(0,d.observer)(a=function(e){(0,i.default)(r,e);var t=p(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return(e=t.call.apply(t,[this].concat(a))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{detail:this.store.detail,limit:6,prefix:"/clusters/".concat(e)})}}]),r}(s.default.Component))||a)||a;t.default=m},777:function(e,t,r){"use strict";r(15);var n=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(239),o=r(317),u=n(r(1795)),i=n(r(3702)),c=(0,a.inject)("rootStore")((function(e){return e.rootStore.registerActions(u.default),(0,o.renderRoutes)(i.default)}));t.default=c}}]);