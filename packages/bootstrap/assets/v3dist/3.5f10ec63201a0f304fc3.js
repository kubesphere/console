(window.webpackJsonp=window.webpackJsonp||[]).push([[3],Array(775).concat([function(e,t,a){"use strict";a(15),a(11),a(29),a(137),a(4),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(11),a(29),a(137),a(4),a(32);for(var r=a(2030),n=r.keys().filter((function(e){return"./index.js"!==e})),l={},o=0;o<n.length;o+=1)Object.assign(l,r(n[o]).default);var u=l;t.default=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15),r(5),r(6),r(27),r(931),r(137),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.getDMPQuery=function(e){var t=e.rule,a=e.namespace,r=e.cluster_id,l=e.duration,o=n.ALL_QUERY_CONFIG[t.metricType];return o=o.replaceAll("$NAMESPACE",a).replaceAll("$CLUSTERID",r).replaceAll("$DURATION",l),""===t.thresholds||"-"===t.thresholds||Number.isNaN(t.thresholds)?o:"".concat(o," ").concat(t.comparator," ").concat(t.thresholds)},a.arrayToObject=function(e){var t={};return e.forEach((function(e){Object.assign(t,e)})),t},a.severityOptions=void 0,r(5),r(6),r(931),r(137),r(4),r(24),r(64),r(1092),r(7);var n=r(1294);var l=[{label:t("CRITICAL_ALERT"),value:"critical",bgColor:"#CA2621",color:"#FFFFFF"},{label:t("ERROR_ALERT"),value:"error",color:"#FFFFFF",bgColor:"#F5A623"},{label:t("WARNING_ALERT"),value:"warning",color:"#5F5110",bgColor:"#FFD939"},{label:t("INFO_ALERT"),value:"info",color:"#36435C",bgColor:"#D8DEE5"}];a.severityOptions=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.disabledRuleConfig=t.BYTE_RULE_CONFIG=t.ITEM_RULE_CONFIG=t.BANDWIDTH_RULE_CONFIG=t.THROUGHPUT_RULE_CONFIG=t.DISK_MB_RULE_CONFIG=t.DISK_RULE_CONFIG=t.MEMORY_RULE_CONFIG=t.CPU_RULE_CONFIG=t.TIME_RULE_CONFIG=t.PERCENT_RULE_CONFIG=t.BASE_RULE_CONFIG=t.getBaseRuleConfig=t.SEVERITY_LEVEL=void 0,a(12),a(11),a(6),a(28),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var n=r(a(30));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=[{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="}];t.SEVERITY_LEVEL=[{type:"critical",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#ca2621"},label:"CRITICAL_ALERT",value:"critical"},{type:"error",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#f5a623"},label:"ERROR_ALERT",value:"error"},{className:"tag-ffd939",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#FFD939"},label:"WARNING_ALERT",value:"warning"},{type:"secondary",prefixIcon:"information",color:{primary:"#fae7e5",secondary:"#79879c"},label:"INFO_ALERT",value:"info"}];var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.comparator,a=void 0===t?{}:t,r=e.thresholds,n=void 0===r?{}:r;return[o({name:"comparator",options:u,placeholder:"CONDITION_OPERATOR"},a),o({type:"number",name:"thresholds",placeholder:"THRESHOLD"},n)]};t.getBaseRuleConfig=c;var s=c({thresholds:{min:0}});t.BASE_RULE_CONFIG=s;var i=c({thresholds:{min:0,max:100,unit:"%"}});t.PERCENT_RULE_CONFIG=i;var f=c({thresholds:{min:0,max:1e4,unit:"s"}});t.TIME_RULE_CONFIG=f;var d=c({thresholds:{unit:"core",min:0}});t.CPU_RULE_CONFIG=d;var p=c({thresholds:{unit:"Mi",min:0}});t.MEMORY_RULE_CONFIG=p;var m=c({thresholds:{unit:"GB",min:0}});t.DISK_RULE_CONFIG=m;var v=c({thresholds:{unit:"MB",min:0}});t.DISK_MB_RULE_CONFIG=v;var h=c({thresholds:{unit:"KB/s",min:0}});t.THROUGHPUT_RULE_CONFIG=h;var E=c({thresholds:{unit:"Mbps",min:0,converter:function(e){return e*(Math.pow(1024,2)/8)}}});t.BANDWIDTH_RULE_CONFIG=E;var y=c({thresholds:{unit:"",min:0}});t.ITEM_RULE_CONFIG=y;var g=c({thresholds:{unit:"byte",min:0}});t.BYTE_RULE_CONFIG=g;var b=c({comparator:{disabled:!0,value:"-",options:[{label:"- ",value:"-"}]},thresholds:{disabled:!0,value:"-",type:"text"}});t.disabledRuleConfig=b},,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(84),r(48),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(48),r(42),r(4),r(23),r(57),r(17),r(85);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(186),p=n(r(800)),m=n(r(26)),v=n(r(74)),h=r(239),E=r(52),y=r(72),g=n(r(1107)),b=n(r(439));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,h.observer)(l=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).projectStore=new b.default,e.nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.projectValidator=function(e,t,a){a()},e.handleNameChange=(0,p.default)((function(t){var a=e.props,r=a.module,n=a.isFederated,l=(0,m.default)(e.fedFormTemplate,"metadata.labels",{});y.APP_LABEL_MODULES.includes(r)&&(l.app=t.slice(0,63)),(0,E.updateLabels)(e.fedFormTemplate,r,l),n&&y.APP_LABEL_MODULES.includes(r)&&(0,v.default)(e.formTemplate,"metadata.labels.app",t.slice(0,63))}),200),e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.maxNameLength,n=void 0===r?253:r,l=e.isEdgeWize,o=253===n?t("LONG_NAME_DESC"):t("NAME_DESC");return f.default.createElement(d.Form,{data:this.formTemplate,ref:a},f.default.createElement(d.Columns,null,f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("NAME"),desc:o,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:o})}]},f.default.createElement(d.Input,{name:"metadata.name",onChange:this.handleNameChange,maxLength:n,autoFocus:!0}))),f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:y.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},f.default.createElement(d.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),f.default.createElement(d.Columns,null,!this.props.namespace&&f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("PROJECT"),desc:t("SELECT_PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")},{validator:this.projectValidator}]},f.default.createElement(g.default,{isEdgeWize:l,name:"metadata.namespace",cluster:this.props.cluster,defaultValue:this.namespace}))),f.default.createElement(d.Column,null,f.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},f.default.createElement(d.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,m.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,m.default)(t,y.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,m.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(f.default.Component))||l;a.default=_},,,,,,,,,,function(e,t,a){e.exports={footer:"_1WMMKdlgPJP8HpmV7ErYX0",rebalanceFooter:"_3F76rZJvolgVz7-vsSOWkY",form:"_3tPN78F46lD5kfG084VCUN",alert:"_1X_J55mhN5eJy0wnSJ2pTt",tips:"_1tYW3rzvJc_uMQ0NkDnvqE",autoBackupToggle:"_1D6snPJqcb_azVvtVFjGJV",autoBackupSetting:"_1N_2GVI6dr20-Rd1UtncoJ",formItem:"h2Fubg6ObXXG2H5an03nb",label:"_3-vh6NLtJiBGlZHRn5ndip",otherItems:"_1_0eixoO7ATqBczd7r0j46",addRuleRow:"_3GiUwHWU3kRZMWx02JvN6b",modalPadding:"_3-fp4OZMjVTRyLOFPgjy6J",rebalance:"_3PlWFKo389VW80SuC71P66",subTitle:"_3aY4r5FdC1aHn4J42EoV3Y",historyContainer:"_1WQysINpV3YlChN2wjjP8O",row:"O1E620GeBroxK3oug8z3D",time:"_2vXSlcGPQbRtZ-yIdeliSx",status:"_1y1hRCANq2uyk1g-iaOJRi",historyItem:"y2A7stXUPTKgkjrQRXUQK",advanced:"_2XK7rJSU93ZtweTKZRZk09",retentionTime:"EnZOPrLaNoHjkPomMuWgw",checkboxWrapper:"joPZ-akJHlFTj44jdzP75"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={body:"_3XpBlmVgox84--EIeoh9fz",content:"_1F464iNseM7XiK3gfga5vM",licenseTip:"_2dX1tvwR7ipGdCOFkK1Zff",wrapper:"YfqK_u02oybtZ3G8fQioe",title:"vWoxrLipXpH0_9MujX0tS",tip:"_1Ioqq6AH-6kAmBtAqeShnj",container:"_1ff-HAmM9PkupcPF5IHG-g",tabs:"_3UVSHIgbB4j88-oDkYHXoW",active:"_2ZtuXPp-bDSkwl_xOknaDU",tooltipTrigger:"ADIqskK1YalArD57gBPYe",tipIcon:"_3j-9lnSWFemgYsnnZgoR2R",updateIcon:"V-EgOBnVouCHu_MYAMSXg",form:"_1mBCTvVb8kcquZWer2bcmr",confirm:"_2CpgnkNxBu6v2utr4FQUnF",confirmActive:"_28K21pPDNYL8rlm-fMFgr-",wrapperActive:"_2u6nNgENwc3ovcH_X5lWJ3",formContainer:"_1uFnFyG7d4K1XrJ471RRUu",footer:"_3eVjkRQJaFlSH1dxNxa8L-",panel:"hbM182I7vu3iJceuVUKlA"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(30)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(26)),p=r(a(800));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=h(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={value:e.props.value},e.handleChange=function(t){var a=(0,d.default)(t,"currentTarget.value",t);e.setState({value:a}),e.change(a)},e.change=(0,p.default)((function(t){e.props.onChange(t)}),e.props.debounce),e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.children;e.value,e.onChange;return t(v(v({},(0,l.default)(e,["children","value","onChange"])),{},{value:this.state.value,onChange:this.handleChange}))}}]),a}(f.default.Component);t.default=E},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(158)),d=n(r(63)),p=n(r(0)),m=n(r(1)),v=r(14),h=n(r(3)),E=n(r(787)),y=n(r(884)),g=n(r(2066));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.onCancel,n=e.store,l=e.detail,o=t.editor.current.getData(),u=n.list,c=(0,v.toJS)(u.selectedRowKeys),s=c?c.filter((function(e){return e!==l.uid})):"";(0,f.default)(o)?r():(a(o),c&&u.setSelectRowKeys(s))},t.state={value:e.store?null:e.detail},t.editor=p.default.createRef(),t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.init(this.props)}},{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"init",value:function(e){var t=this,a=e.yaml,r=e.detail,n=e.store,l=e.k8sVersion;if(a)return this.setState({value:a});r&&r.name&&n.fetchDetail(r,l).then((function(e){var a=n.deployedScheduleTemplate;(0,d.default)(a)?t.setState({value:e._originData}):t.setState({value:[e._originData,a]})}))}},{key:"render",value:function(){var e=this.props,a=e.readOnly,r=e.visible,n=e.onCancel,o=e.isSubmitting,u=a?t("VIEW_YAML"):t("EDIT_YAML"),c=a?"eye":"pen";return p.default.createElement(E.default,{icon:c,title:u,bodyClassName:(0,h.default)((0,l.default)({},g.default.readOnly,a)),onOk:this.handleOk,onCancel:n,okText:t("OK"),visible:r,closable:a,hideFooter:a,isSubmitting:o,fullScreen:!0},this.state.value&&p.default.createElement(y.default,{ref:this.editor,editorClassName:g.default.editor,value:this.state.value,readOnly:a}))}}]),r}(p.default.Component);a.default=S,S.propTypes={detail:m.default.object,yaml:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool,readOnly:m.default.bool},S.defaultProps={visible:!1,isSubmitting:!1,readOnly:!1,detail:{},onOk:function(){},onCancel:function(){}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.children,r=e.label;return n.default.createElement("div",{className:(0,l.default)(o.default.wrapper,t)},n.default.createElement("header",null,r),n.default.createElement("div",null,a))};var n=r(a(0)),l=r(a(3)),o=r(a(2836))},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.label,a=e.children,r=e.tips,c=e.className;return n.default.createElement("div",{className:(0,o.default)(u.default.wrapper,c)},n.default.createElement("label",{className:u.default.label},n.default.createElement("span",null,t),r&&n.default.createElement(l.Tooltip,{content:r},n.default.createElement(l.Icon,{name:"information"}))),n.default.createElement("div",{className:u.default.content},a))};var n=r(a(0)),l=a(186),o=r(a(3)),u=r(a(2838))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.title,r=e.description;return n.default.createElement("div",{className:(0,l.default)(o.default.text,t)},n.default.createElement("div",null,a),n.default.createElement("p",null,r))},a(12),a(109);var n=r(a(0)),l=r(a(3)),o=r(a(2716))},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var l=n(a(315)),o=n(a(58)),u=n(a(36)),c=n(a(37)),s=n(a(55)),i=n(a(56)),f=n(a(51)),d=r(a(0)),p=a(186),m=n(a(799)),v=n(a(2733));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,s.default)(a,e);var t=h(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleSelectChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t,r)},e.handleNumberChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t,r)},e.handleInputChange=function(t){var a=e.props,r=a.name;(0,a.onChange)(t.target.value,r)},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.param,a=(0,o.default)(e,["param"]);if(t.options){var r=t.options.map((function(e){return{label:e,value:e}}));return d.default.createElement(p.Select,(0,l.default)({options:r},a,{onChange:this.handleSelectChange}))}return"integer"===t.type?d.default.createElement(m.default,(0,l.default)({className:v.default.number,min:t.min,unit:t.unit},a,{onChange:this.handleNumberChange,showUnit:!0})):d.default.createElement(p.Input,(0,l.default)({},a,{onChange:this.handleInputChange}))}}]),a}(d.Component);t.default=E},,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.errorMessage,a=e.children;return n.default.createElement("div",{className:o.default.wrapper},t&&n.default.createElement(l.Tooltip,{content:t},n.default.createElement("div",{className:o.default.error})),a)};var n=r(a(0)),l=a(186),o=r(a(2822))},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(315)),l=r(a(30)),o=r(a(58)),u=r(a(36)),c=r(a(37)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(0)),p=r(a(799)),m=r(a(158)),v=r(a(470)),h=r(a(3)),E=a(186),y=r(a(3217));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(a,e);var t=S(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).add=function(){var t=e.props,a=t.onChange,r=t.min,n=t.max,l=t.value,o=t.defaultValue;if(!t.disabled){var u=(0,m.default)(o)?r-1:o,c=(0,m.default)(l)||""===l?u:l;c<n&&a(Number(c)+1,"add")}},e.subtract=function(){var t=e.props,a=t.onChange,r=t.min,n=t.value,l=t.defaultValue;if(!t.disabled){var o=(0,m.default)(l)?r+1:l,u=(0,m.default)(n)||""===n?o:n;u>r&&a(Number(u)-1)}},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.unit,r=e.showUnit,l=e.value,u=e.defaultValue,c=(e.onChange,e.integer,e.showFunc),s=e.style,i=void 0===s?{}:s,f=(0,o.default)(e,["className","unit","showUnit","value","defaultValue","onChange","integer","showFunc","style"]),p=(0,m.default)(l)?u:l;a&&(p=(0,v.default)(p,a));var g=b(b({type:"text"},f),{},{value:(0,m.default)(p)?"":p,onChange:this.handleChange});return a&&r||c?d.default.createElement("div",{className:(0,h.default)(t,y.default.withUnit),style:i},d.default.createElement(E.Input,g),d.default.createElement("div",{className:y.default.funcContainer},d.default.createElement("span",null,a),c&&d.default.createElement("div",{className:y.default.func},d.default.createElement(E.Icon,{name:"chevron-up",clickable:!0,onClick:this.add}),d.default.createElement(E.Icon,{name:"chevron-down",clickable:!0,onClick:this.subtract})))):d.default.createElement(E.Input,(0,n.default)({className:t,style:i},g))}}]),a}(p.default);t.default=_},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),o=r(186),u=n(r(787)),c=n(r(2241)),s=function(e){var a=e.onCancel,r=e.title,n=e.visible,s=e.isSubmitting,i=e.desc,f=e.icon;return l.default.createElement(u.default,{width:600,onOk:function(){e.onOk()},okText:t("OK"),onCancel:a,visible:n,isSubmitting:s,hideHeader:!0},l.default.createElement("div",{className:c.default.title},f?l.default.createElement(o.Icon,{name:f,size:20}):l.default.createElement(o.Icon,{name:"information",size:20,className:c.default.icon}),r),l.default.createElement("p",{className:c.default.desc},i))};a.default=s},function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_QUERY_CONFIG=t.ALL_SUMMARY_CONFIG=t.ALL_MESSAGE_CONFIG=t.ALL_METRICS_CONFIG=t.RESOURCE_METRICS_CONFIG=void 0,a(12),a(11),a(6),a(28),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var n,l=r(a(30)),o=a(815),u=r(a(2281)),c=r(a(2282)),s=r(a(2283)),i=r(a(2284)),f=r(a(2285)),d=r(a(2286)),p=r(a(2287)),m=r(a(2288));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=(n={},(0,l.default)(n,o.RadonDBAppId.MySQL,u.default.Metric),(0,l.default)(n,o.RadonDBAppId.PostgreSQL,c.default.Metric),(0,l.default)(n,o.RadonDBAppId.ClickHouse,s.default.Metric),(0,l.default)(n,o.RadonDBAppId.MongoDB,i.default.Metric),(0,l.default)(n,o.RadonDBAppId.RedisCluster,f.default.Metric),(0,l.default)(n,o.RadonDBAppId.RedisSentinel,f.default.Metric),(0,l.default)(n,o.RadonDBAppId.Elasticsearch,d.default.Metric),(0,l.default)(n,o.RadonDBAppId.Kafka,p.default.Metric),(0,l.default)(n,o.RadonDBAppId.OpenSearch,m.default.Metric),n);t.RESOURCE_METRICS_CONFIG=E;var y=h(h(h(h(h(h(h(h({},u.default.Metric),c.default.Metric),s.default.Metric),i.default.Metric),f.default.Metric),d.default.Metric),p.default.Metric),m.default.Metric);t.ALL_METRICS_CONFIG=y;var g=h(h(h(h(h(h(h(h({},u.default.Message),c.default.Message),s.default.Message),i.default.Message),f.default.Message),d.default.Message),p.default.Message),m.default.Message);t.ALL_MESSAGE_CONFIG=g;var b=h(h(h(h(h(h(h(h({},u.default.Summary),c.default.Summary),s.default.Summary),i.default.Summary),f.default.Summary),d.default.Summary),p.default.Summary),m.default.Summary);t.ALL_SUMMARY_CONFIG=b;var S=h(h(h(h(h(h(h(h({},u.default.Query),c.default.Query),s.default.Query),i.default.Query),f.default.Query),d.default.Query),p.default.Query),m.default.Query);t.ALL_QUERY_CONFIG=S},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(31),r(6),r(84),r(86),r(18),r(87),r(192),r(16),r(9),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.Component=a.default=void 0,r(45),r(11),r(31),r(6),r(84),r(86),r(18),r(28),r(87),r(192),r(42),r(16),r(9),r(4),r(23),r(57),r(17),r(85),r(7);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(49)),d=n(r(26)),p=n(r(74)),m=n(r(63)),v=n(r(189)),h=n(r(135)),E=n(r(0)),y=r(14),g=r(239),b=r(186),S=r(52),_=r(72),O=n(r(851)),C=n(r(443)),T=n(r(437)),R=n(r(2601)),D=n(r(2603));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=(l=function(e){(0,c.default)(r,e);var a=N(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).showRule=function(e){n.setState({showRule:!0,selectRuleIndex:e,operation:"add"})},n.closeModal=function(){n.setState({showRule:!1,selectRuleIndex:-1,operation:""})},n.closeEditModal=function(){if("edit"===n.state.operation){var e=n.state.oldTemplate;(0,p.default)(n.fedFormTemplate,"spec",e.spec),n.props.isFederated&&n.updateOverrides()}n.closeModal()},n.showEdit=function(e){n.setState({showRule:!0,selectRuleIndex:e,operation:"edit",oldTemplate:(0,h.default)((0,y.toJS)(n.fedFormTemplate))})},n.handleRule=function(e){var t=n.props.isFederated,a=n.state.selectRuleIndex,r=n.fedFormTemplate,l=(0,d.default)(r,"spec.rules",[]);a>=0?l[a]=e:l.push(e),(0,p.default)(r,"spec.rules",l),n.updateTLS(r),t&&n.updateOverrides(),n.closeModal()},n.handleDelete=function(e){var t=n.props.isFederated,a=n.fedFormTemplate,r=(0,d.default)(a,"spec.rules",[]);r.splice(e,1),(0,p.default)(a,"spec.rules",r),n.updateTLS(a),t&&n.updateOverrides(),n.closeModal()},n.rulesValidator=function(e,a,r){if((0,m.default)(a))return r({message:t("ROUTING_RULE_EMPTY_DESC")});r()},n.state={showRule:!1,selectRuleIndex:-1,gateway:{},oldTemplate:{},isLoading:!1,operation:""},n.secretStore=new O.default,n.serviceStore=new C.default,e.isFederated&&(n.secretStore=new T.default({module:n.secretStore.module}),n.serviceStore=new T.default({module:n.serviceStore.module})),n}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.secretStore.fetchList({namespace:this.namespace,cluster:this.cluster,limit:-1}),this.serviceStore.fetchList({namespace:this.namespace,cluster:this.cluster,limit:-1,labelSelector:(0,S.joinSelector)(this.props.selector)})}},{key:"updateTLS",value:function(e){var t=(0,d.default)(e,"spec.rules",[]).filter((function(e){return"https"===e.protocol&&e.secretName})).reduce((function(e,t){var a=t.secretName,r=t.host,n=t.clusters,l=e.find((function(e){return e.secretName===a}));return l?(l.hosts=l.hosts||[],-1===l.hosts.indexOf(r)&&l.hosts.push(r)):e.push({hosts:[r],secretName:a,clusters:n}),e}),[]);(0,p.default)(e,"spec.tls",t)}},{key:"updateOverrides",value:function(){var e=[],t=(0,d.default)(this.fedFormTemplate,"spec.rules",[]),a=(0,d.default)(this.fedFormTemplate,"spec.tls",[]);(0,d.default)(this.props.projectDetail,"clusters",[]).forEach((function(r){var n=function(e){return e.filter((function(e){return e.clusters.includes(r.name)})).map((function(e){return(0,v.default)(e,"clusters")}))};e.push({clusterName:r.name,clusterOverrides:[{path:"/spec/rules",value:n(t)},{path:"/spec/tls",value:n(a)}]})})),(0,p.default)(this.formTemplate,"spec.overrides",e)}},{key:"renderRuleForm",value:function(e){var t=this.props,a=t.isFederated,r=t.projectDetail,n=t.namespace,l=t.formTemplate,o=t.detail,u=(0,y.toJS)(this.services),c=(0,y.toJS)(this.secretStore.list).data,s=(0,d.default)(this.fedFormTemplate,"spec.rules[".concat(e,"]"),{});return E.default.createElement(D.default,{data:s,gateway:this.state.gateway,secrets:c,services:u,isFederated:a,projectDetail:r,cluster:this.cluster,detail:o,namespace:n,validData:(0,h.default)((null==l?void 0:l.ingress)||(null==l?void 0:l.Ingress)),onSave:this.handleRule,onCancel:this.closeEditModal})}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.isFederated,r=e.projectDetail,n=this.state,l=n.showRule,o=n.selectRuleIndex,u=n.gateway,c=n.isLoading;if(l)return this.renderRuleForm(o);var s=(0,m.default)(u)&&!c;return E.default.createElement(b.Form,{data:this.fedFormTemplate,ref:t},E.default.createElement(b.Form.Item,{rules:[{validator:this.rulesValidator}]},E.default.createElement(R.default,{name:"spec.rules",onShow:this.showRule,onEdit:this.showEdit,onDelete:this.handleDelete,disabled:s,isFederated:a,projectDetail:r})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,_.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"services",get:function(){return this.serviceStore.list.data}}]),r}(E.default.Component),(0,f.default)(l.prototype,"services",[y.computed],Object.getOwnPropertyDescriptor(l.prototype,"services"),l.prototype),l),I=(0,g.observer)(k);a.default=I;var P=k;a.Component=P},,,,,,,,,,,,,,function(e,t,a){"use strict";a(15),Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_PLUGIN_ICONS=t.NETWORK_PLUGIN_ICONS=t.NEW_CLUSTER_SPEC=t.IMPORT_EDGE_CLUSTER_SPEC=t.CREATE_EDGE_CLUSTER_SPEC=t.IMPORT_CLUSTER_SPEC=t.DEFAULT_CLUSTER_CONFIG=void 0;t.DEFAULT_CLUSTER_CONFIG={global:{imageRegistry:"registry.cn-beijing.aliyuncs.com"}};t.IMPORT_CLUSTER_SPEC={apiVersion:"cluster.kubesphere.io/v1alpha1",kind:"Cluster",spec:{provider:"",connection:{type:"direct",kubeconfig:""},joinFederation:!0}};t.CREATE_EDGE_CLUSTER_SPEC={apiVersion:"infra.edgewize.io/v1alpha1",kind:"EdgeCluster",spec:{namespace:"",hostCluster:"",advertiseAddress:[],type:"auto",kubeConfig:""},metadata:{name:""}};t.IMPORT_EDGE_CLUSTER_SPEC={apiVersion:"infra.edgewize.io/v1alpha1",kind:"Cluster",spec:{provider:"edgewize",type:"auto",kubeconfig:"",joinFederation:!1}};t.NEW_CLUSTER_SPEC={apiVersion:"kubekey.kubesphere.io/v1alpha1",kind:"Cluster",metadata:{},spec:{hosts:[],roleGroups:{},controlPlaneEndpoint:{domain:"lb.kubesphere.local",address:"",port:6443},kubernetes:{clusterName:"cluster.local",maxPods:110,etcdBackupDir:"/var/backups/kube_etcd",etcdBackupPeriod:30,keepBackupNumber:5},network:{plugin:"calico",kubePodsCIDR:"10.233.64.0/18",kubeServiceCIDR:"10.233.0.0/18",ipipMode:"Always",vxlanMode:"Never",vethMTU:1440},registry:{privateRegistry:""},addons:[{},{}]}};t.NETWORK_PLUGIN_ICONS={calico:"",flannel:"",cilium:""};t.STORAGE_PLUGIN_ICONS={nfs:"vsan"}},,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.preview,a=e.sidebar,r=e.main;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.preview},t," "),n.default.createElement("div",{className:l.default.form},n.default.createElement("div",{className:l.default.sidebar},a),n.default.createElement("div",{className:l.default.resource},r)))};var n=r(a(0)),l=r(a(2828))},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GraphTextInput",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ThemeSelector",{enumerable:!0,get:function(){return l.default}});var n=r(a(2829)),l=r(a(2831))},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(29),a(73),a(18),a(87),a(98),a(9),a(13),a(10),a(4),a(22),a(24),a(38),a(64),a(7),a(32),a(110),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MONITOR_PANEL_TYPE=void 0;var n=r(a(43));a(41);var l=r(a(44)),o=r(a(30)),u=r(a(65)),c=r(a(36)),s=r(a(37)),i=r(a(49));r(a(66));a(12),a(249),a(45),a(5),a(11),a(6),a(29),a(73),a(18),a(28),a(87),a(191),a(159),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(319),a(22),a(24),a(38),a(64),a(7),a(32),a(110);var f,d,p,m,v,h,E=r(a(96)),y=r(a(58)),g=a(14),b=r(a(26)),S=r(a(195));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.MONITOR_PANEL_TYPE={TEXT:"singlestat",ROW:"row",GRAPH:"graph"};var C=(f=function(){function e(t){var a=this;(0,c.default)(this,e),this.belongTo=null,(0,u.default)(this,"errorMessage",d,this),(0,u.default)(this,"config",p,this),(0,u.default)(this,"metrics",m,this),(0,u.default)(this,"timeRange",v,this),this.monitoring=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.template;a.isObserving||(a.isObserving=!0,a.pollingController=R((function(){var t=e.getTimeRange(),r=t.from,n=t.to;a.fetchMetrics({start:r.valueOf(),end:n.valueOf()})}),{interval:e.refreshMs}),a.disposer=(0,g.reaction)((function(){return{time:e.timeRange,refresh:e.refreshMs,exprs:a.config.targets.map((function(e){return e.expr})),steps:a.config.targets.map((function(e){return e.step}))}}),(function(t){var r=t.refresh;a.metrics=a.metrics.map((function(e){return O(O({},e),{},{values:[]})})),a.pollingController&&a.pollingController.stopPolling(),a.pollingController=R((function(){var t=e.getTimeRange(),r=t.from,n=t.to;a.fetchMetrics({start:r.valueOf(),end:n.valueOf()})}),{interval:r})})))},(0,u.default)(this,"fetchMetrics",h,this),this.fetchMetric=function(){var e=(0,l.default)(n.default.mark((function e(t){var r,l,o,u,c,s,i;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.expr,l=t.step,o=t.start,u=t.end,c=t.cluster,s=t.namespace,r){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,request.get("".concat(a.apiVersion,"/targets/query"),{cluster:c,namespace:s,expr:r,step:l,start:o,end:u},null,(function(e,t){throw new Error(t.message)}));case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:return i=e.t0,e.abrupt("return",(0,b.default)(i,"data.result",[]));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopMonitoring=function(){a.isObserving=!1,a.pollingController&&a.pollingController.stopPolling(),a.disposer&&a.disposer()},this.belong=function(e){return a.belongTo=e,a},this.config=t,this.requestID=0}return(0,s.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/clusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"apiVersion",get:function(){return"kapis/monitoring.kubesphere.io/v1beta1"}},{key:"type",get:function(){return this.config.type}},{key:"targets",get:function(){return this.config.targets||[]}},{key:"id",get:function(){return this.config.id}}]),(0,s.default)(e,[{key:"clearMonitorMetrics",value:function(){this.metrics=[]}},{key:"clone",value:function(){return new this.constructor((0,g.toJS)(this.config))}},{key:"formattedMetrics",get:function(){return this.metrics.map((function(e){var t=e.target,a=e.metric,r=e.responseMetricID,n=(0,y.default)(e,["target","metric","responseMetricID"]),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,S.default)(e))return e.replace(/\{\{(.*?)\}\}/g,(function(e,a){return t[a]}))}(t.legendFormat,a)||r;return O(O({},n),{},{name:l})}))}}]),e}(),d=(0,i.default)(f.prototype,"errorMessage",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=(0,i.default)(f.prototype,"config",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),m=(0,i.default)(f.prototype,"metrics",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=(0,i.default)(f.prototype,"timeRange",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{start:0,end:0}}}),(0,i.default)(f.prototype,"type",[g.computed],Object.getOwnPropertyDescriptor(f.prototype,"type"),f.prototype),(0,i.default)(f.prototype,"targets",[g.computed],Object.getOwnPropertyDescriptor(f.prototype,"targets"),f.prototype),(0,i.default)(f.prototype,"clearMonitorMetrics",[g.action],Object.getOwnPropertyDescriptor(f.prototype,"clearMonitorMetrics"),f.prototype),h=(0,i.default)(f.prototype,"fetchMetrics",[g.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,l.default)(n.default.mark((function t(a){var r,o,u,c,s,i,f,d,p;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.start,o=a.end,u=e.config,c=u.targets,s=void 0===c?[]:c,i=u.cluster,f=u.namespace,e.timeRange={start:r,end:o},d={ID:++e.requestID,errorMessage:"",metrics:[]},t.prev=4,t.next=7,Promise.all(s.map(function(){var t=(0,l.default)(n.default.mark((function t(a){var l,u,c;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=a.expr,u=a.step,t.next=3,e.fetchMetric({cluster:i,namespace:f,expr:l,step:u,start:parseInt(r/1e3,10),end:parseInt(o/1e3,10)});case 3:return c=t.sent,t.abrupt("return",{data:c,target:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 7:p=t.sent,d.metrics=p.reduce((function(e,t){var a=t.data,r=void 0===a?[]:a,n=t.target,l=void 0===n?{}:n,o=l.expr,u=l.refId,c=r.map((function(e){var t=e.values,a=void 0===t?[]:t,r=e.metric,n=void 0===r?{}:r,c=T(n)||o,s="".concat(u,".").concat(c);return{values:a,metric:n,target:l,id:s,responseMetricID:c}}));return e.concat(c)}),[]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),d.errorMessage=t.t0.message;case 14:return t.prev=14,d.ID===e.requestID&&(e.metrics=d.metrics,e.errorMessage=d.errorMessage),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[4,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()}}),(0,i.default)(f.prototype,"formattedMetrics",[g.computed],Object.getOwnPropertyDescriptor(f.prototype,"formattedMetrics"),f.prototype),f);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.__name__,a=(0,y.default)(e,["__name__"]);if(!t)return JSON.stringify(a||{});var r=Object.entries(a||{}).map((function(e){var t=(0,E.default)(e,2),a=t[0],r=t[1];return"".concat(a,'="').concat(r,'"')})),n=r.length?"{".concat(r.join(","),"}"):"";return"".concat(t).concat(n)}function R(e,t){var a={timer:null,stopPolling:function(){clearTimeout(a.timer)}};e();return function r(){t.interval&&(a.timer=setTimeout((function(){e(),r()}),t.interval))}(),a}t.default=C},,,,,function(e,t,a){e.exports={wrapper:"_2txp4-htvICs4f6c3rqsX6",contentWrapper:"_1ccZoq2QaWbCEWk-OZo1mE",hidden:"_1ZsdcL3CHNMzvcbO79RwNl"}},function(e,t,a){e.exports={wrapper:"wXHKYRcPKuXFRfyupNjOu",content:"_1GXH8tzUyU5FHWVbgQC2yC",search:"fIGMiznH-KyaGoj2YiJny",cardList:"_1CuokVurLCjDnq4oP4oGRR",emptyText:"_28JJz3Xe4z4rL7-NGN6z_5",emptyTipIcon:"pGMtYHHqbFWHUy30mrUf0",action:"K0VfnE3ZVeXqSI5P0ICCJ",card:"Fe47hou2kTN8vkdsVYJKD"}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(830)),m=r(186),v=n(r(787)),h=r(72);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,d.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";r(e),u&&o.setSelectRowKeys(c)},t.state={formData:(0,p.default)((0,d.toJS)(e.detail._originData||e.detail))},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.hideAlias,o=this.state.formData;return i.default.createElement(v.default.Form,{data:o,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},i.default.createElement(m.Form.Item,{label:t("NAME")},i.default.createElement(m.Input,{name:"metadata.name",disabled:!0})),!l&&i.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:h.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},i.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),i.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}}]),r}(i.default.Component);a.default=y,y.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},,,,,,,,,,,,function(e,t,a){e.exports={body:"_1dBSaRblPfBn-mqT_KKE3S",formItem:"iH3qOy_HN_GKp2DHh14E",urlInput:"_2B1OdPUOkMfYykX5QmiCr5",label:"_2qOEiddhpXtxUvsrjH18Jw",desc:"L_NsnJWzaluWmh8TdlMsc",field:"_7hAGFIYgADWKFn3WK0tWD",fieldInput:"_2aknEdLUnkxDuraw2Zn01J",protocol:"_2tM1lMWiP_tnelAVYCnDOu",url:"_3tjuojCcgCMNlIeVz-XkLP",validated:"_1laKRGeL96H0Mm_frK-cu8",validStatus:"d9NK4MMS7VQlOHlThM-P1",access:"_3qhTvuFZpMBckEcXWQT5bi",accessItem:"_22lD7uAdTjGbgCQUZCuEzO",verifyBtn:"yAN3vK16N0HKawleIBS-g",timeInput:"xOQCUWADs79nVpq1YymkB",input:"_2gp7EWD023VrljWknkh8ML",select:"_2XaWi99BOi61P7Hqiyr7ic"}},,function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(30)),p=n(r(26)),m=n(r(189)),v=n(r(158)),h=n(r(194)),E=n(r(0)),y=n(r(106)),g=n(r(1264)),b=r(239),S=n(r(1)),_=n(r(3)),O=r(186),C=n(r(836)),T=n(r(790)),R=n(r(3224));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}g.default.defaultStyles.overlay=k(k({},g.default.defaultStyles.overlay),{},{padding:0,minWidth:500,backgroundColor:"rgba(35, 45, 65, 0.7)",zIndex:2e3,overflow:"auto"}),g.default.defaultStyles.content=k(k({},(0,m.default)(g.default.defaultStyles.content,["top","left","right","bottom","padding"])),{},{width:744,position:"relative",margin:"0 auto"});var I=function(e){(0,s.default)(r,e);var a=D(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"renderTitle",value:function(){var e=this.props,t=e.icon,a=e.imageIcon,r=e.title,n=e.description,l=e.rightScreen?48:(0,v.default)(n)?20:40;return E.default.createElement("div",{className:R.default.title},a?E.default.createElement("label",{className:R.default.image},E.default.createElement(C.default,{src:a,iconLetter:a,iconSize:l})):t&&E.default.createElement(O.Icon,{name:t,size:l}),E.default.createElement(T.default,{title:r,description:n}))}},{key:"render",value:function(){var e,a=this.props,r=a.className,n=a.width,u=a.visible,c=a.children,s=a.hideFooter,i=a.onOk,f=a.onCancel,p=a.onPrev,m=a.okText,v=a.cancelText,h=a.okButtonType,y=a.cancelButtonType,b=a.closable,S=a.operations,T=a.headerClassName,D=a.bodyClassName,N=a.footerClassName,k=a.fullScreen,I=a.rightScreen,P=a.maskClosable,A=a.isSubmitting,w=a.icon,M=a.imageIcon,L=a.disableSubmit,j=a.customTitle,x=a.okTooltip,U=(0,o.default)(a,["className","width","visible","children","hideFooter","onOk","onCancel","onPrev","okText","cancelText","okButtonType","cancelButtonType","closable","operations","headerClassName","bodyClassName","footerClassName","fullScreen","rightScreen","maskClosable","isSubmitting","icon","imageIcon","disableSubmit","customTitle","okTooltip"]),F={content:{}},V=(w||M)&&I;k||I||(F.content.width=n);var G=j||E.default.createElement(E.default.Fragment,null,this.renderTitle(),V&&E.default.createElement("div",{className:R.default.iconBg},M?E.default.createElement(C.default,{src:M,iconLetter:M,iconSize:200}):E.default.createElement(O.Icon,{name:w,size:200}))),B=E.default.createElement(O.Button,{type:h,loading:A,disabled:L||A,onClick:i,"data-test":"modal-ok"},m||t("OK"));return E.default.createElement(g.default,(0,l.default)({className:(0,_.default)(R.default.modal,r,(e={},(0,d.default)(e,R.default.fullscreen,k),(0,d.default)(e,R.default.rightScreen,I),e)),style:F,isOpen:u,onRequestClose:f,ariaHideApp:!1,closeTimeoutMS:0,shouldCloseOnOverlayClick:P},U),E.default.createElement("div",{className:(0,_.default)(R.default.header,T)},G,S,b&&E.default.createElement(O.Button,{className:R.default.close,icon:"close",iconType:"light",type:"control",onClick:f,"data-test":"modal-close"})),E.default.createElement("div",{className:(0,_.default)(R.default.body,D,(0,d.default)({},R.default.hideFooter,s))},c),!s&&E.default.createElement("div",{className:(0,_.default)(R.default.footer,N)},p?E.default.createElement(O.Button,{type:y,onClick:p,"data-test":"modal-cancel"},t("PREVIOUS")):f&&E.default.createElement(O.Button,{type:y,onClick:f,"data-test":"modal-cancel"},v||t("CANCEL")),i&&(x?E.default.createElement(O.Tooltip,{content:E.default.createElement("div",null,x)},E.default.createElement("span",{style:{display:"inline-block",marginLeft:"10px"}},B)):B)))}}]),r}(E.default.Component);a.default=I,I.propTypes={className:S.default.string,headerClassName:S.default.string,bodyClassName:S.default.string,footerClassName:S.default.string,icon:S.default.string,title:S.default.oneOfType([S.default.node,S.default.string]),description:S.default.oneOfType([S.default.node,S.default.string]),width:S.default.oneOfType([S.default.number,S.default.string]),visible:S.default.bool,okText:S.default.string,cancelText:S.default.string,okButtonType:S.default.string,cancelButtonType:S.default.string,onOk:S.default.func,onCancel:S.default.func,renderFooter:S.default.func,children:S.default.any,hideFooter:S.default.bool,closable:S.default.bool,maskClosable:S.default.bool,fullScreen:S.default.bool,rightScreen:S.default.bool,disableSubmit:S.default.bool,customTitle:S.default.node,onPrev:S.default.func},I.defaultProps={className:"",width:600,visible:!1,hideFooter:!1,closable:!0,maskClosable:!1,fullScreen:!1,rightScreen:!1,isSubmitting:!1,okButtonType:"control",cancelButtonType:"default",disableSubmit:!1},I.open=function(e){var t=document.createElement("div");document.body.appendChild(t),document.activeElement.blur();var a=function(){(0,h.default)(e.onCancel)&&e.onCancel(),I.close(t)},r=e.modal,n=(0,b.observer)((function(){return E.default.createElement(r,(0,l.default)({},(0,m.default)(e,"modal","onCancel"),{isSubmitting:(0,p.default)(e,"store.isSubmitting"),onCancel:a,visible:!0}))}));return y.default.render(E.default.createElement(n,null),t),t},I.close=function(e){y.default.unmountComponentAtNode(e)&&e.parentNode&&e.parentNode.removeChild(e)}},,,function(e,t,a){e.exports={templateParams:"_3OaPsWjDseZlyvzVyh4shI",container:"VCeY3AOEqowO64dK4tCg9",params:"_1ymcUpjfqsH5vqVTE3bgK",params_container:"_6gdEyFwcAl-pF3FJDq_0C",itemWrapper:"_2lQsvf23MK44IzuZh9-U2X",content:"_1hjO3TCR42KV3THqO7IDRX",empty:"_1aRxE-OINWHNU21zvG5fJG",icon:"_2DOKE0E0jHLnIbDlIwsSrX",timeOut:"_3qtruIMglpuM_KTjmlcWgO"}},,function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(24),a(136),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STORAGE_CLASS_VOLUME_CLAIMS=t.STORAGE_CLASS_STORAGE=void 0,a(12),a(11),a(6),a(28),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var l=n(a(30)),o=n(a(96)),u=n(a(58)),c=r(a(0)),s=n(a(447)),i=n(a(26)),f=n(a(855)),d=n(a(3344));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.STORAGE_CLASS_STORAGE="storageclass.storage.k8s.io/requests.storage";t.STORAGE_CLASS_VOLUME_CLAIMS="storageclass.storage.k8s.io/persistentvolumeclaims";var v=function(e){var t,a,r=e.quota,n=e.allStorageClass,l=e.renderOutOfLimitTip,p=void 0!==l&&l,v=e.totalStorageError,h=void 0!==v&&v,E=e.totalVolumeClaimsError,y=void 0!==E&&E,g=e.currentRelatedStorageTotal,b=void 0===g?0:g,S=e.currentRelatedVolumeClaimsTotal,_=void 0===S?0:S,O=e.addedItems,C=void 0===O?[]:O,T=(0,u.default)(e,["quota","allStorageClass","renderOutOfLimitTip","totalStorageError","totalVolumeClaimsError","currentRelatedStorageTotal","currentRelatedVolumeClaimsTotal","addedItems"]),R=(0,c.useState)({"requests.storage":"InfinityGi",persistentvolumeclaims:""}),D=(0,o.default)(R,2),N=D[0],k=D[1],I=(0,c.useState)([]),P=(0,o.default)(I,2),A=P[0],w=P[1];(0,c.useEffect)((function(){k(r)}),[r]),(0,c.useEffect)((function(){var e=[],t=[];Object.keys(r).forEach((function(e){((0,s.default)(e,"storageclass.storage.k8s.io/requests.storage")||(0,s.default)(e,"storageclass.storage.k8s.io/persistentvolumeclaims"))&&t.push({key:e,value:r[e]})})),t.length>0&&(e=(0,f.default)(t,(function(e){return e.key.split(".")[0]}))),w(e)}),[r]);var M=(0,c.useCallback)((function(e){var t={"requests.storage":(0,i.default)(e,["requests.storage"],""),persistentvolumeclaims:(0,i.default)(e,"persistentvolumeclaims","")};T.onChange({actionType:"add",data:m({},t)})})),L=(0,c.useCallback)((function(e){T.onChange(e)}));return c.default.createElement(d.default,{namespace:T.namespace,allStorageClass:n,isWorkspace:(0,i.default)(T,"isWorkspace",!0),availableQuota:T.availableQuota,wsAvailableRequest:null!==(t=T.wsAvailableRequest)&&void 0!==t?t:{},relatedStoragesLimit:null!==(a=T.relatedStoragesLimit)&&void 0!==a?a:[],storageLimitSpec:N,namespaceStorageClass:A,handleWsLimitChange:M,handleRelateVolumeChange:L,renderOutOfLimitTip:p,totalStorageError:h,totalVolumeClaimsError:y,currentRelatedStorageTotal:b,currentRelatedVolumeClaimsTotal:_,addedItems:C})};t.default=v},,function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(22),a(23),a(57),a(17);var l=n(a(315)),o=n(a(58)),u=n(a(43));a(41);var c=n(a(44)),s=n(a(36)),i=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=r(a(0)),v=a(186),h=a(903),E=n(a(1751)),y=n(a(3422));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var b=function(e){(0,f.default)(a,e);var t=g(a);function a(e){var r;return(0,s.default)(this,a),(r=t.call(this,e)).icon="pen",r.handleOk=function(){var e=r.props,t=e.formTemplate,a=e.onOk;r.formRef.current.validate((0,c.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(t);case 1:case"end":return e.stop()}}),e)}))))},r.component=E.default,r.formRef=m.createRef(),r}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.formTemplate,r=e.store,n=(0,o.default)(e,["title","formTemplate","store"]),u=this.component;return m.createElement(h.Modal,(0,l.default)({width:960},n,{onOk:this.handleOk,title:m.createElement("div",{className:y.default.title},m.createElement(v.Icon,{name:this.icon,className:"margin-r8"}),m.createElement("div",null,t))}),m.createElement("div",{className:y.default.wrapper},m.createElement(u,{formTemplate:a,formRef:this.formRef,isEdit:!0,store:r})))}}]),a}(m.Component);t.default=b},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(18),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(18),r(48),r(42),r(4),r(23),r(57),r(24),r(193),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(787)),d=r(832),p=n(r(830)),m=r(14),v=n(r(1)),h=n(r(0)),E=r(72),y=n(r(1081)),g=n(r(2123));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(e){var t=n.props,a=t.onOk,r=t.store,l=t.detail,o=r.list,u=(0,m.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";a(e),u&&o.setSelectRowKeys(c)},n.timeValidator=function(e,a,r){var n=a.slice(0,-1);if(!/^[0-9]*$/.test(n))return r({message:t("INVALID_TIME_DESC")});r()},n.state={formData:(0,p.default)((0,m.toJS)(e.detail._originData||e.detail))},n}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,m.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return h.default.createElement(f.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},h.default.createElement(i.Form.Item,{label:t("NAME")},h.default.createElement(i.Input,{name:"metadata.name",disabled:!0})),h.default.createElement(i.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:E.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},h.default.createElement(i.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),h.default.createElement(i.Form.Item,{label:t("CHECK_INTERVAL"),desc:t("ALERTING_POLICY_CHECK_INTERVAL_DESC"),rules:[{validator:this.timeValidator}]},h.default.createElement(y.default,{className:g.default.duration,name:"spec.interval",unitOptions:this.durationUnitOptions,defaultValue:this.durationUnitOptions[1].value})),h.default.createElement(i.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},h.default.createElement(i.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}},{key:"durationUnitOptions",get:function(){return[{label:t("SECONDS"),value:"s"},{label:t("MINUTES"),value:"m"},{label:t("HOURS"),value:"h"}]}},{key:"severities",get:function(){return d.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(h.default.Component);a.default=S,S.propTypes={detail:v.default.object,visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func,isSubmitting:v.default.bool},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(27),r(190),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(191),r(42),r(16),r(159),r(27),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(22),r(23),r(57),r(17),r(7),r(110);var l=n(r(43)),o=n(r(30));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(186),v=n(r(787)),h=n(r(26)),E=n(r(189)),y=n(r(63)),g=r(798),b=n(r(949)),S=r(845),_=r(923),O=r(794),C=n(r(2240));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=D(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={metrics:[],currentMetric:[],step:"30s",times:60,isLoading:!0,autoFetch:!1},e.timer=null,e.transformValue=function(t){if("Custom"===e.ruleType)return t;var a=e.ruleConfig,r=a.reverser,n=a.unit,l=parseFloat(r(Number(t))).toFixed(2);return n?"".concat(l).concat(n):l},e.fetchMetrics=function(){var t=(0,u.default)(l.default.mark((function t(a){var r,n,o,u,c,s,i,f,d,p;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.cluster,o=r.namespace,u=e.state,c=u.step,s=u.times,e.setState({isLoading:!0}),i=(0,S.getTimeRange)({step:c,times:s}),f=i.start,d=i.end,t.next=6,e.props.store.fetchMetric(R({expr:e.expr,end:d,start:f,step:c,cluster:n,namespace:o},a));case 6:p=t.sent,e.setState({metrics:p,times:s,step:c,isLoading:!1,timer:null});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.autoFetch=function(){e.timer=setInterval((function(){e.fetchMetrics(),e.fetchCurrentMetic()}),5e3)},e.handleAutoFetch=function(){e.setState((function(e){return{autoFetch:!e.autoFetch}}),(function(){e.autoFetch()}))},e.stopAutoFetch=function(){var t=e.state.autoFetch;clearInterval(e.timer),e.timer=null,e.setState({autoFetch:!t})},e.fetchCurrentMetic=(0,u.default)(l.default.mark((function t(){var a,r,n,o,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,r=a.cluster,n=a.namespace,t.next=3,e.props.store.fetchMetric({expr:e.expr,cluster:r,namespace:n});case 3:o=t.sent,u=o.map((function(e){var t=(0,h.default)(e,"value",["",""]),a=(0,h.default)(e,"metric",{});return{time:(0,O.getFormatTime)(1e3*t[0],!0),value:t[1],metric:JSON.stringify(a)}})),e.setState({currentMetric:u});case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.step,r=t.times;e.timer&&(clearInterval(e.timer),e.timer=null),e.setState({step:(0,S.getMinuteValue)(a),times:r,autoFetch:!1},(function(){e.fetchMetrics(),e.fetchCurrentMetic()}))},e.handleRefresh=function(){e.setState({autoFetch:!1},(function(){e.timer&&(clearInterval(e.timer),e.timer=null),e.fetchMetrics(),e.fetchCurrentMetic()}))},e.renderOperations=function(){var t=e.state,a=t.step,r=t.times,n=t.autoFetch;return p.default.createElement("div",{className:C.default.opts},p.default.createElement("div",{className:C.default.time},p.default.createElement(b.default,{step:a,times:r,onChange:e.handleChange})),p.default.createElement(m.Button,{className:C.default.refresh,type:"control",icon:n?"pause":"start",iconType:"light",onClick:n?e.stopAutoFetch:e.handleAutoFetch}),p.default.createElement(m.Button,{className:C.default.refresh,type:"control",icon:"refresh",iconType:"light",onClick:e.handleRefresh}))},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchMetrics(),this.fetchCurrentMetic()}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.isSubmitting,l=a.onCancel,o=this.state,u=o.isLoading,c=o.metrics,s=o.currentMetric,i=(0,O.getAreaChartOps)({height:396,title:this.chartTitle,unit:this.chartTitleUnit,tailText:this.tailText,data:c,legend:c.map((function(e){return e.metric?JSON.stringify((0,E.default)(e.metric,"__name__")):""}))});return p.default.createElement(v.default,{headerClassName:C.default.header,bodyClassName:C.default.body,visible:r,isSubmitting:n,onCancel:l,imageIcon:"/assets/monitor.svg",title:t("VIEW_METRIC_DATA_TCAP"),operations:this.renderOperations(),hideFooter:!0,fullScreen:!0},p.default.createElement(m.Loading,{spinning:u},c.length<1?p.default.createElement("div",{className:C.default.metricEmpty},t("NO_MONITOR_METRIC")):p.default.createElement(g.MultiArea,i)),p.default.createElement("div",{className:C.default.current},p.default.createElement("div",{className:C.default.main},p.default.createElement("div",{className:C.default.title},p.default.createElement("span",{className:C.default.time},t("TIME")),p.default.createElement("span",{className:C.default.value},t("VALUE")),p.default.createElement("span",{className:C.default.metric},t("MONITORING_TARGETS"))),p.default.createElement("div",{className:C.default.body},s.map((function(t,a){return p.default.createElement("div",{key:a,className:C.default.line},p.default.createElement("span",{className:C.default.time},t.time),p.default.createElement("span",{className:C.default.value},e.transformValue(t.value)),p.default.createElement("span",{className:C.default.metric},t.metric))}))))))}},{key:"resourceType",get:function(){var e=this.props.rule;return Object.keys(e.exprBuilder)[0]}},{key:"exprBuilder",get:function(){var e=this.props.rule;return(0,h.default)(e,"exprBuilder",{})}},{key:"ruleType",get:function(){return(0,y.default)(this.exprBuilder)?"Custom":"Template"}},{key:"thresholdType",get:function(){var e=(0,h.default)(this.exprBuilder,"".concat([this.resourceType],".metricThreshold"),{}),t=Object.keys(this.exprBuilder)[0],a=Object.keys(e)[0],r=Object.keys(e[a])[0],n="".concat(a,":").concat(r);return _.RESOURCE_METRICS_CONFIG[t][n]}},{key:"threshold",get:function(){if("Template"===this.ruleType){var e=(0,h.default)(this.exprBuilder,"".concat([this.resourceType],".metricThreshold"),{}),t=Object.keys(e)[0];return Object.values(e[t])[0]}return""}},{key:"ruleConfig",get:function(){return this.thresholdType.ruleConfig.filter((function(e){return"thresholds"===e.name}))[0]}},{key:"chartTitleUnit",get:function(){if("Custom"===this.ruleType)return null;var e=this.ruleConfig.unit;return""!==e?e:null}},{key:"chartTitle",get:function(){return"Custom"===this.ruleType?"CUSTOM_RULE":this.thresholdType.tcapLabel}},{key:"tailText",get:function(){return"Custom"===this.ruleType?null:t("THRESHOLD_VALUE",{value:this.threshold})}},{key:"tableColumns",get:function(){return[{title:t("TIME"),dataIndex:"time",width:"21.1%",render:function(e){return p.default.createElement("div",null,e)}},{title:t("VALUE"),dataIndex:"value",width:"21.1%",render:function(e){return p.default.createElement("div",null,e)}},{title:t("MONITORING_TARGETS"),dataIndex:"metric",render:function(e){return p.default.createElement("div",null,e)}}]}},{key:"expr",get:function(){var e=this.props,t=e.ruleStatus,a=e.expr,r=(0,h.default)(t,"expr","");return""!==r?r:a}}]),r}(p.default.Component);a.default=N},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(48),r(42),r(4),r(23),r(57),r(24),r(193),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=r(832),p=r(239),m=n(r(0)),v=r(72),h=n(r(1081));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.timeValidator=function(e,a,r){var n=a.slice(0,-1);if(!/^[0-9]*$/.test(n))return r({message:t("INVALID_TIME_DESC")});r()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.isEdit,r=e.formRef,n=e.formTemplate,l=a?[]:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:v.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}];return m.default.createElement(f.Form,{data:n,ref:r},m.default.createElement(f.Columns,null,m.default.createElement(f.Column,null,m.default.createElement(f.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:l},m.default.createElement(f.Input,{name:"metadata.name",onChange:this.handleNameChange,maxLength:63,readOnly:a}))),m.default.createElement(f.Column,null,m.default.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:v.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},m.default.createElement(f.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),m.default.createElement(f.Columns,null,m.default.createElement(f.Column,null,m.default.createElement(f.Form.Item,{label:t("CHECK_INTERVAL"),desc:t("ALERTING_POLICY_CHECK_INTERVAL_DESC"),rules:[{validator:this.timeValidator}]},m.default.createElement(h.default,{name:"spec.interval",unitOptions:this.durationUnitOptions,defaultValue:this.durationUnitOptions[1].value}))),m.default.createElement(f.Column,null,m.default.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(f.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))}},{key:"namespace",get:function(){return this.props.namespace}},{key:"durationUnitOptions",get:function(){return[{label:t("SECONDS"),value:"s"},{label:t("MINUTES"),value:"m"},{label:t("HOURS"),value:"h"}]}},{key:"severities",get:function(){return d.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(m.default.Component))||l;a.default=y},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(11),a(6),a(192),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(11),a(6),a(28),a(192),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var l=n(a(315)),o=n(a(30)),u=n(a(96)),c=r(a(0)),s=n(a(26)),i=n(a(135)),f=n(a(63)),d=n(a(74)),p=a(186),m=n(a(2244)),v=n(a(2248));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){var t=(0,c.useState)(!1),a=(0,u.default)(t,2),r=a[0],n=a[1],o=(0,c.useState)((0,s.default)(e,"formTemplate")),h=(0,u.default)(o,2),y=h[0],g=h[1],b=(0,c.useState)(null),S=(0,u.default)(b,2),_=S[0],O=S[1],C=(0,c.useState)({}),T=(0,u.default)(C,2),R=T[0],D=T[1],N=function(){O(null),D({})};return c.default.createElement(c.default.Fragment,null,c.default.createElement(p.Form,{data:y,ref:e.formRef}),c.default.createElement("div",null,r?c.default.createElement(v.default,(0,l.default)({},e,{formTemplate:y,onCancel:function(){n(!1),N()},onSave:function(e){var t=(0,s.default)(y,"spec.rules",[]);if((0,f.default)(R))t.push(e);else{var a=E(E({},(0,i.default)(t[_])),e);t.splice(_,1,a)}g(E(E({},y),{},{spec:E(E({},y.spec),{},{rules:t})})),n(!1),N()},editRule:R})):c.default.createElement(m.default,{formTemplate:y,AddRuleClick:function(){return n(!0)},handleEdit:function(e,t){n(!0),D((0,i.default)(t)),O(e)},handleDisable:function(e,t){var a=(0,s.default)(y,"spec.rules",[]);(0,d.default)(a[e],"disable",t),g(E(E({},y),{},{spec:E(E({},y.spec),{},{rules:a})}))},handleDelete:function(e){var t=(0,s.default)(y,"spec.rules",[]);t.splice(e,1),g(E(E({},y),{},{spec:E(E({},y.spec),{},{rules:t})}))},onEdit:e.onEdit,index:"ruleList",builtInRule:"builtin"===(0,s.default)(e,"type","custom")})))};t.default=y},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(18),r(16),r(27),r(98),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(136),r(75),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(96)),o=n(r(315)),u=n(r(58)),c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51));r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(27),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(75),r(7);var m=n(r(0)),v=n(r(1)),h=n(r(3)),E=n(r(76)),y=n(r(26)),g=n(r(135)),b=n(r(63)),S=n(r(447)),_=r(186),O=n(r(799)),C=r(923),T=n(r(1028)),R=r(993),D=n(r(2252));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var P=[1,5,15,30,60].map((function(e){return{label:t.html("LASTING_MINUTES",{minutes:e}),value:"".concat(e,"m")}})),A=R.severityOptions.map((function(e){return{label:e.label,value:e.value}})),w=function(e){(0,f.default)(r,e);var a=I(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getMetricType=function(e){var t=(0,y.default)(e.value,"metricThreshold",{});if((0,b.default)(t))return n.metricConfig[0].value;var a=Object.keys(t)[0];return"".concat(a,":").concat(Object.keys(t[a])[0])},n.getStateFromProps=function(e){var t=e.value,a=(0,y.default)(t,"metricThreshold",{}),r=n.metricConfig[0].value.split(":"),l=r[0],o=r[1];if(!(0,b.default)(a)){var u=Object.keys(a)[0];l=u,o=Object.keys(a[u])[0]}var c=(0,y.default)(t,"for",""),s=(0,y.default)(t,"severity","");return{nodeResourceType:l,monitorType:o,comparator:(0,y.default)(t,"comparator",""),duration:""!==c?c:P[0].value,severity:""!==s?s:A[0].value}},n.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var a=e.prefixIcon,r=e.color,n=e.type,l=e.label,o=e.value,u=e.disabled,c={label:t(l,{value:o}),value:o};return a&&(c.label=m.default.createElement("div",{className:(0,h.default)(D.default.optionLabel,D.default[n])},m.default.createElement(_.Icon,{name:a,size:20,color:r}),c.label)),u&&(c.disabled=u),c}))},n.handleMetricTypeChange=function(e){var t=e.split(":")[0],a=e.split(":")[1],r=n.state,l=r.comparator,o=r.severity,u=r.duration;n.setState({metricType:e,nodeResourceType:t,monitorType:a,thresholds:""},(function(){n.props.onChange({names:n.props.value.names,kind:n.props.value.kind,metricThreshold:(0,c.default)({},t,(0,c.default)({},a,"")),comparator:l,for:u,severity:o})}))},n.handleItemChange=function(e,t){return function(a,r){var l=n.props.onChange,o=(0,E.default)(r)||!r?a:r;"thresholds"===e&&(o=""!==(o=String(o).replace(/([a-zA-Z%/])+$/g,""))?(0,S.default)(o,".")?o:t(Number(o)):""),n.setState((0,c.default)({},e,o),(function(){var t=n.state,a=t.nodeResourceType,r=t.monitorType,u=t.comparator,s=t.duration,i=t.severity,f=(0,y.default)(n.props.value,"metricThreshold.".concat(a,".").concat(r));l({names:n.props.value.names,kind:n.props.value.kind,metricThreshold:(0,c.default)({},a,(0,c.default)({},r,"comparator"===e?f:o)),comparator:"comparator"===e?o:u,for:s,severity:i})}))}},n.handleDurationChange=function(e){var t=n.state,a=t.severity,r=t.nodeResourceType,l=t.monitorType,o=t.comparator,u=(0,y.default)(n.props.value,"metricThreshold.".concat(r,".").concat(l));n.setState({duration:e},(function(){n.props.onChange({names:n.props.value.names,kind:n.props.value.kind,metricThreshold:(0,c.default)({},r,(0,c.default)({},l,u)),for:e,severity:a,comparator:o})}))},n.handleSeverityChange=function(e){var t=n.state,a=t.duration,r=t.nodeResourceType,l=t.monitorType,o=t.comparator,u=(0,y.default)(n.props.value,"metricThreshold.".concat(r,".").concat(l));n.setState({severity:e},(function(){n.props.onChange({names:n.props.value.names,kind:n.props.value.kind,metricThreshold:(0,c.default)({},r,(0,c.default)({},l,u)),for:a,comparator:o,severity:e})}))},n.renderConfigItem=function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.props.value,l=n.state,c=l.nodeResourceType,s=l.monitorType,i=a.type,f=a.name,d=a.placeholder,p=a.options,v=void 0===p?[]:p,h=a.converter,E=a.reverser,g=(0,u.default)(a,["type","name","placeholder","options","converter","reverser"]);if(E){var b=(0,y.default)(r,"metricThreshold.".concat(c,".").concat(s),"");e=""!==b?(0,S.default)(b,".")?b:E(Number(b)):""}var C={key:f,className:D.default[f],placeholder:t(d),value:"comparator"===f?n.state.comparator:e,onChange:n.handleItemChange(f,h)};switch(i){default:case"select":var T=n.getSelectOptions(v);return m.default.createElement(_.Select,(0,o.default)({options:T},C,g));case"number":return m.default.createElement(O.default,(0,o.default)({showUnit:!0},C,g))}},n.state=k({metricType:n.getMetricType(e)},n.getStateFromProps(e)),n.metricOps=n.getSelectOptions(n.metricConfig),n}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state,a=e.metricType,r=e.duration,n=e.severity,l=this.ruleConfig;return m.default.createElement("div",{className:D.default.inputs},m.default.createElement("div",{className:D.default.type},m.default.createElement(_.Select,{options:this.metricOps,value:a,onChange:this.handleMetricTypeChange})),l.map(this.renderConfigItem),m.default.createElement(_.Select,{className:D.default.normalSelect,value:r,options:P,onChange:this.handleDurationChange,placeholder:t("DURATION")}),m.default.createElement(T.default,{className:D.default.normalSelect,value:n,options:A,onChange:this.handleSeverityChange,placeholder:t("SEVERITY")}))}},{key:"resourceMetricsConfig",get:function(){var e=this.props.resourceType;return(0,g.default)(C.RESOURCE_METRICS_CONFIG[e||"node"])||{}}},{key:"metricConfig",get:function(){var e=this.props,t=e.isEdge,a=e.resourceType,r=this.resourceMetricsConfig;return Object.entries(r).map((function(e){var t=(0,l.default)(e,2);return k({value:t[0]},t[1])})).filter((function(e){var r=e.value;return!t||"node"!==a||!r.startsWith("disk:")}))}},{key:"selectMetricConfig",get:function(){var e=this.state.metricType;return this.metricConfig.find((function(t){return t.value===e}))}},{key:"ruleConfig",get:function(){return(0,y.default)(this.selectMetricConfig,"ruleConfig")||[]}}]),r}(m.default.Component);w.propTypes={metricConfig:v.default.array,value:v.default.object,isEdge:v.default.bool,onChange:v.default.func},w.defaultProps={metricConfig:[],value:{},onChange:function(){}};var M=w;a.default=M},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(241)),m=r(186),v=l(r(2254));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=y(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).selectRef=d.default.createRef(),e.handleNamesChange=function(t){var a=e.props,r=a.value;(0,a.onChange)(E(E({},r),{},{names:t}))},e.handlekindChange=function(t){e.props.onChange(E(E({},e.props.value),{},{kind:t,names:[]})),e.props.fetchWorkloads(t,{}),e.selectRef.current.state.value=[]},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.value,r=e.workloads,n=e.fetchWorkloads,l=e.isLoading;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",null,d.default.createElement(m.Select,{value:a.kind,options:[{label:t("DEPLOYMENT"),value:"Deployment"},{label:t("STATEFULSET"),value:"StatefulSet"},{label:t("DAEMONSET"),value:"DaemonSet"}],onChange:this.handlekindChange})),d.default.createElement("div",null,d.default.createElement("label",{className:v.default.alertRule},t("MONITORING_TARGETS")),d.default.createElement(m.Select,{value:a.names,ref:this.selectRef,options:r,pagination:this.pagination,isLoading:l,onFetch:function(e){return n(a.kind,e)},onChange:this.handleNamesChange,searchable:!0,multi:!0,placeholder:t("WORKLOAD")})))}},{key:"pagination",get:function(){var e=this.props,t=e.stores,a=e.value;return(0,p.default)(t[a.kind].list,["page","limit","total"])}}]),r}(d.Component);a.default=g},function(e,t,a){e.exports={label:"_3N0hD89apn-au9VwkWOsLH",contentGroup:"_2cBNFxxs4dV56YhfT2DlkZ",message:"_5C0rQ50OG-WwQSQZEC7Ok",inputs:"_3sptfKWD6lFkuuKyi5NyZH"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(974)),l=r(a(1329)),o=r(a(2609)),u=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"ROUTING_RULES",icon:"cdn",component:l.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.default=u},,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(31),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=l(r(0)),m=n(r(135)),v=n(r(26)),h=n(r(74)),E=r(14),y=r(239),g=r(186),b=n(r(787)),S=n(r(829)),_=n(r(799)),O=r(52),C=n(r(851)),T=n(r(933)),R=n(r(2676)),D=n(r(2681));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=(0,y.observer)(o=function(e){(0,i.default)(r,e);var a=I(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=e.props.store,e.secretStore=e.props.isEdgeWize?new T.default:new C.default,e.state={formTemplate:(0,m.default)(e.props.formTemplate)},e.updateFormTemplate=function(){var t=e.props.detail;if(e.store.list.data.length>0){var a=e.store.list.data.find((function(e){return e.name===t.name}))||e.store.list.data[0],r=(0,E.toJS)(a._originData),n=(0,v.default)(r,"spec.endpoints",[]);n.length>0&&(n.forEach((function(e){e.tlsConfig?e.authType="tlsConfig":e.bearerTokenSecret?e.authType="bearerTokenSecret":e.basicAuth?e.authType="basicAuth":e.authType=""})),r.spec.interval=(0,v.default)(n,"[0].interval"),r.spec.scrapeTimeout=(0,v.default)(n,"[0].scrapeTimeout")),e.setState({formTemplate:r})}},e.handleOk=function(t){var a=e.props,r=a.onOk,n=a.detail,l=(0,v.default)(t,"spec.interval"),o=(0,v.default)(t,"spec.scrapeTimeout");(0,v.default)(t,"spec.endpoints",[]).forEach((function(e){e.interval=l,e.scrapeTimeout=o})),(0,h.default)(t,"spec.selector.matchLabels",n.labels),(0,h.default)(t,"metadata.labels",k(k({},n.labels||{}),{},{"app.kubernetes.io/vendor":"kubesphere"})),r(t)},e.checkItemValid=function(e){return e.port&&e.path&&e.scheme},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cluster,r=t.namespace,n=t.detail;this.store.fetchListByK8s({cluster:a,namespace:r,labelSelector:(0,O.joinSelector)(n.labels)}).then((function(){return e.updateFormTemplate()})),this.secretStore.fetchListByK8s({cluster:a,namespace:r})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.workspace,n=e.namespace,l=e.cluster,o=e.detail,u=e.isSubmitting,c=e.onCancel,s=this.state.formTemplate;return p.default.createElement(b.default.Form,{icon:"linechart",title:t("EDIT_MONITORING_EXPORTER"),width:960,data:s,visible:a,onOk:this.handleOk,onCancel:c,isSubmitting:u},p.default.createElement("div",{className:D.default.wrapper},p.default.createElement(g.Form.Item,{label:t("PATH_PL")},p.default.createElement(S.default,{className:D.default.endpoints,name:"spec.endpoints",defaultValue:this.defaultEndpoints,checkItemValid:this.checkItemValid,itemType:"object",addText:t("ADD")},p.default.createElement(R.default,{detail:o,secretStore:this.secretStore,cluster:l,namespace:n,workspace:r}))),p.default.createElement("div",{className:D.default.timeout},p.default.createElement(g.Columns,null,p.default.createElement(g.Column,null,p.default.createElement(g.Form.Item,{label:t("COLLECTION_INTERVAL_MIN"),desc:t("COLLECTION_INTERVAL_MIN_DESC")},p.default.createElement(_.default,{name:"spec.interval",defaultValue:"1m",min:0,unit:"m",integer:!0}))),p.default.createElement(g.Column,null,p.default.createElement(g.Form.Item,{label:t("TIMEOUT_PERIOD_S"),desc:t("COLLECTION_TIMEOUT_DESC")},p.default.createElement(_.default,{name:"spec.scrapeTimeout",defaultValue:"10s",min:0,unit:"s",integer:!0})))))))}},{key:"defaultEndpoints",get:function(){return[{scheme:"http",path:"/metrics",authType:""}]}}]),r}(p.Component))||o;a.default=P},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(3)),m=n(r(455)),v=r(433),h=n(r(2687)),E=r(244),y=n(r(2690));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderApps",value:function(){var e=this.props,a=e.workspace,r=e.cluster,n=e.namespace,l=e.apps,o=e.iconName,u=e.showCreateVendor,c=e.isLoading,s=e.itemCls,f=e.disableLink,d=e.onClickAppItem;if(0===l.length&&!c)return i.default.createElement("div",{className:y.default.noApp},i.default.createElement("img",{src:"/assets/empty-card.svg",alt:""}),i.default.createElement("p",null,t("NO_RESOURCE_FOUND")));var m=(0,E.stringify)({workspace:a,cluster:r,namespace:n});return i.default.createElement(i.default.Fragment,null,l.map((function(e){var t="/apps/".concat(e.app_id,"?").concat(m);return f&&d?i.default.createElement("div",{key:e.app_id,className:(0,p.default)(y.default.appItem,s),onClick:function(){return d(e)}},i.default.createElement(h.default,{app:e,showCreateVendor:u,iconName:o})):i.default.createElement(v.Link,{key:e.app_id,className:(0,p.default)(y.default.appItem,s),to:t},i.default.createElement(h.default,{app:e,showCreateVendor:u,iconName:o}))})))}},{key:"render",value:function(){var e=this.props,a=e.apps,r=e.isLoading,n=e.total,l=e.onFetchMore,o=e.title,u=e.className,c=e.appRef;return i.default.createElement("div",{className:(0,p.default)(y.default.appList,u),ref:c},o&&i.default.createElement("p",{className:"apps-title"},o),this.renderApps(),r&&i.default.createElement("div",{className:y.default.loading},i.default.createElement(d.Loading,null)),!r&&a.length<n&&i.default.createElement("a",{className:y.default.loadMore,onClick:l},i.default.createElement("span",null,t("VIEW_MORE"))))}}]),r}(i.default.PureComponent);a.default=b,b.propTypes={apps:f.default.array,isLoading:f.default.bool,total:f.default.number,onFetchMore:f.default.func,itemCls:f.default.string,title:f.default.string,disableLink:f.default.bool,onClickAppItem:f.default.func,iconName:f.default.string,showCreateVendor:f.default.bool},b.defaultProps={apps:[],isLoading:!1,total:0,onFetchMore:m.default,disableLink:!1,showCreateVendor:!1}},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.app,r=e.iconSize,n=void 0===r?20:r,s=e.isShowTip,i=void 0===s||s,f=(0,u.isAppIsRadonDBAndAuthorized)(a),d=f.isRadondb,p=f.isSupport;if(d){var m=p?{primary:"#fff",secondary:"#55BC8A"}:{primary:"#fff",secondary:"#CCD3DB"};return l.default.createElement("div",{className:c.default.content},l.default.createElement(o.Tooltip,{content:i?p?l.default.createElement("div",{className:c.default.authorizedTip},l.default.createElement("div",{className:c.default.authorizedTipTitle},l.default.createElement(o.Icon,{name:"success",color:{primary:"#fff",secondary:"#55BC8A"}}),l.default.createElement("span",null,t("APP_AUTHORIZED")))):l.default.createElement("div",{className:c.default.authorizedTip},l.default.createElement("div",{className:c.default.authorizedTipTitle},l.default.createElement(o.Icon,{name:"information",color:{primary:"#fff",secondary:"#F5A623"}}),l.default.createElement("span",null,t("APP_UNAUTHORIZED")))):""},l.default.createElement(o.Icon,{name:"certification",size:n,color:m})))}return null};var l=n(r(0)),o=r(186),u=r(52),c=n(r(2688))},function(e,t,a){e.exports={wrapper:"_2WM8RaHnX302GtVMQoockj",wrapper_item_com:"KbHgVKqkYN8OupMTkbuFy",columns:"_1yKeq_LeyKarIIzY73TOgp",column:"_1YPZVH0-nIPRRoaimprUFZ",checkbox_item:"_3WSjc9REBmpf1Sx1-QYZ5x",checkbox_item_info:"_3JHpRYGlKl_mW0VdmtimLO",array_checkbox_item:"_25-qgVfpNBo6V8u3KmIz6t",align_center:"_1tpx4OfFomxsv7vQk0ZogN"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_CLUSTER=t.IMPORT_EDGEWIZE_CLUSTER=t.IMPORT_CLUSTER=void 0;var n=r(a(2715)),l=r(a(2718)),o=r(a(2724)),u=r(a(2726)),c=r(a(2728)),s=r(a(2737)),i=r(a(2740)),f=r(a(1633)),d=r(a(2748)),p=[{title:"BASIC_INFORMATION",component:l.default,required:!0},{title:"CONNECTION_SETTINGS",component:o.default,required:!0,isForm:!1},{title:"CLUSTER_CONFIG",component:u.default,required:!1,isForm:!1}];t.IMPORT_CLUSTER=p;var m=[{title:"BASIC_INFORMATION",component:f.default,required:!0},{title:"CLUSTER_SETTINGS",component:d.default,required:!0}];t.IMPORT_EDGEWIZE_CLUSTER=m;var v=[{title:"HOW_TO_ADD",component:n.default,required:!0},{title:"BASIC_INFORMATION",component:l.default,required:!0},{title:"CONNECTION_SETTINGS",component:c.default,required:!0},{title:"SYSTEM_COMPONENT_PL",component:i.default,required:!0},{title:"ADVANCED_SETTINGS",component:s.default,required:!0}];t.NEW_CLUSTER=v},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=l(r(135)),p=l(r(26)),m=l(r(3)),v=r(186),h=l(r(787)),E=l(r(799)),y=r(52),g=r(72),b=l(r(1632));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={formData:(0,d.default)(e.props.data||{}),authMode:(0,p.default)(e.props.data,"privateKey")?"secret":"password"},e.handleAuthModeChange=function(t){e.setState({authMode:t})},e}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.setState({formData:(0,d.default)(this.props.data||{})})}},{key:"renderAuthentication",value:function(){return"password"===this.state.authMode?f.default.createElement(f.default.Fragment,null,f.default.createElement(v.Form.Item,{label:t("USERNAME"),desc:t("NODE_USERNAME_DESC")},f.default.createElement(v.Input,{name:"user",defaultValue:"root",autoComplete:"off"})),f.default.createElement(v.Form.Item,{label:t("PASSWORD"),desc:t("NODE_PASSWORD_DESC")},f.default.createElement(v.InputPassword,{name:"password",autoComplete:"off"}))):f.default.createElement(f.default.Fragment,null,f.default.createElement(v.Form.Item,{label:t("SSH_KEY_TCAP")},f.default.createElement(v.TextArea,{name:"privateKey",autoResize:!0})))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel,l=e.addAfterCreate,o=this.state,u=o.authMode,c=o.formData,s=l?["worker"]:void 0;return f.default.createElement(h.default.Form,{icon:"add",title:t("ADD_NODE"),width:600,data:c,visible:a,onOk:r,onCancel:n},f.default.createElement(v.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NODE_NAME_EMPTY_DESC")}]},f.default.createElement(v.Input,{name:"name",defaultValue:"node-".concat((0,y.generateId)(4))})),f.default.createElement(v.Form.Item,{label:t("ROLE"),desc:t("NODE_ROLE_DESC"),rules:[{required:!0,message:t("NODE_ROLE_EMPTY_DESC")}]},f.default.createElement(v.Select,{name:"roles",options:this.nodeRoles,closeOnSelect:!1,defaultValue:s,multi:!0})),f.default.createElement(v.Form.Item,{label:t("INTERNAL_IP_ADDRESS"),desc:t("NODE_INTERNAL_IP_DESC"),rules:[{required:!0,message:t("NODE_INTERNAL_IP_EMPTY_DESC")},{pattern:g.PATTERN_IP,message:t("INVALID_IP_DESC")}]},f.default.createElement(v.Input,{name:"internalAddress",placeholder:"0.0.0.0",autoComplete:"off"})),f.default.createElement(v.Columns,{className:(0,m.default)("is-1",b.default.ssh)},f.default.createElement(v.Column,null,f.default.createElement(v.Form.Item,{label:t("EXTERNAL_IP"),desc:t("NODE_EXTERNAL_IP_DESC"),rules:[{required:!0,message:t("NODE_EXTERNAL_IP_EMPTY_DESC")},{pattern:g.PATTERN_IP,message:t("INVALID_IP_DESC")}]},f.default.createElement(v.Input,{name:"address",placeholder:"0.0.0.0",autoComplete:"off"}))),f.default.createElement(v.Column,{className:"is-narrow"},f.default.createElement(v.Form.Item,{className:b.default.port,label:t("PORT")},f.default.createElement(E.default,{name:"port",defaultValue:22,max:65535,min:0,integer:!0})))),f.default.createElement(v.Form.Item,{label:t("SSH_AUTH_MODE"),desc:t("SSH_AUTH_MODE_DESC")},f.default.createElement(v.Select,{value:u,options:this.authModes,onChange:this.handleAuthModeChange})),this.renderAuthentication())}},{key:"authModes",get:function(){return[{label:t("USERNAME_AND_PASSWORD"),value:"password"},{label:t("SSH_KEY_SCAP"),value:"secret"}]}},{key:"nodeRoles",get:function(){return this.props.addAfterCreate?[{label:t("WORKER"),value:"worker"}]:[{label:t("CONTROL_PLANE"),value:"master"},{label:t("WORKER"),value:"worker"}]}}]),r}(f.Component);a.default=_},function(e,t,a){e.exports={wrapper:"_2Lqd91xpnojlUPUV9ctSeb",limits:"PSykLg06vAq1JTXkFmeFG",limit:"_2Lz4hSqqVH5vHSuGLXd3d1",ssh:"_1UBN3MNiZ33uaQH0qUUoY-",port:"_1Kt3RHCGg3eTgBC56yJKrH"}},,function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(73),a(24),a(136),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.value,a=e.onChange,r=e.simpleInput,n=e.isMultiMode,s=(0,o.default)(e,["value","onChange","simpleInput","isMultiMode"]),i=(0,u.useMemo)((function(){return n?null==t?void 0:t.join(","):null==t?void 0:t[0]}),[t,n]);return u.default.createElement(u.default.Fragment,null,n&&!r?u.default.createElement(c.TextArea,(0,l.default)({},s,{className:"ips",name:"edgeIpList",defaultValue:i,onChange:function(e){null==a||a(e.split(","))},maxLength:256})):u.default.createElement(c.Input,(0,l.default)({},s,{defaultValue:i,onChange:function(e){var t=e.target;null==a||a([t.value])}})))},a(73);var l=n(a(315)),o=n(a(58)),u=r(a(0)),c=a(186)},,function(e,t,a){e.exports={tagAddTitle:"_2AoqIskVk90cT_-DU6idIj",tagItem:"_1w1aaZzYfSihEk_pyyFs8b",tagItemUpdate:"_3oQ1Q0ko0NvYhoh4Vb_x06",alert:"_2hRtVfJZtkM36YkFqUhBKR"}},function(e,t,a){e.exports={wrapper:"_1mXUGC3QLcMvh_WRGOMWlG",item:"_1mI0Vx1Zbj3RQs1NbfwfQs",delete:"_2vE10WwlHhPJrj7Mvxh3dh",add:"_2HBElUzvwbSytJoKWc8k1a",desc:"_3MWZHeTqugN1hKIYTD6XOM"}},function(e,t,a){e.exports={wrapper:"_2CAwl5k2oIda9YcGXDwM47",empty:"_3C9m_Ocvi6i3FCZFQiyvBo",formWrapper:"_1jC1_JGlPNjzoMoHEuIG7b",contentWrapper:"_3JvS-OEcBUyHzzrjUgyD7y",repoTypes:"_33Emj6yHpbs8UNlQpSvS1c",selectType:"_2LA7h2xfYPhnWXS4cXQMv8",gitIcon:"_1rzx7uWPAi4m6DkTVIZE42",light:"_2PM3xrM_mfV8Y7SzcKac3z",dark:"_2Cs9GTPWGQkHlPwuBJL_zq",branch:"_2i7wzfSnXXny7hXWwWF_VU",action:"_1q1nBwyG-e01cNjPngSVyL",icon:"G4yuPTBjFVlQK_43eBXWg",info:"_1IE8Wqz9EbuS8uyK2uvvW2",name:"_2s59L_OotKhaMchVqNIcPK",desc:"_2_Av3lQmokJgJ9tWlA3Vbz",branch__show:"_1X_Zvts1SpLSCmF6cm-nQ7",deleteRepoBtn:"_1ACD7-Hng8w7KKOYn0JT7H",disabled:"_3YX-W9JYPf64LAZKgJRIYs"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(75),r(818),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(75),r(818),r(7);var l=n(r(43));r(41);var o,u,c,s,i,f,d,p=n(r(44)),m=n(r(30)),v=n(r(65)),h=n(r(36)),E=n(r(37)),y=n(r(88)),g=n(r(55)),b=n(r(56)),S=n(r(51)),_=n(r(49)),O=(n(r(66)),n(r(0))),C=n(r(1)),T=n(r(3)),R=r(14),D=r(239),N=n(r(26)),k=n(r(198)),I=n(r(63)),P=n(r(457)),A=n(r(74)),w=r(186),M=n(r(1640)),L=r(72),j=r(881),x=n(r(1182)),U=n(r(2778)),F=n(r(1641)),V=n(r(2781)),G=n(r(2783)),B=n(r(1638)),Y=n(r(2785)),z=r(52);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var K=(0,D.observer)((d=f=function(e){(0,g.default)(r,e);var a=q(r);function r(e){var t;return(0,h.default)(this,r),t=a.call(this,e),(0,v.default)(t,"source_type",c,(0,y.default)(t)),(0,v.default)(t,"credentialFormData",s,(0,y.default)(t)),(0,v.default)(t,"showCredential",i,(0,y.default)(t)),t.restoreSourceData=function(){var e=t.props.sourceData,a=e.source_type;t.store.formData=(0,m.default)({},L.REPO_KEY_MAP[a],(0,P.default)(e[L.REPO_KEY_MAP[a]],(function(e,t){return t&&t.startsWith("discover")&&(0,I.default)(e)}))),(0,k.default)(e,"credentialId")&&("github"===a&&(t.store.tokenFormData={credentialId:e.credentialId}),"git"===a&&(0,A.default)(t.store.formData,"".concat(L.REPO_KEY_MAP[a],".credential_id"),e.credentialId),"gitlab"===a&&(0,A.default)(t.store.formData,"".concat(L.REPO_KEY_MAP[a]),{})),"single_svn"===a&&(t.store.formData={svn_source:W({type:"single_svn"},t.store.formData.single_svn_source)})},t.setCredentialsFormData=function(e){(0,k.default)(e,"type")&&(t.credentialFormData=W({},e))},t.showCreateCredential=function(){t.showCredential=!0},t.hideCreateCredential=(0,p.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.showCredential=!1;case 1:case"end":return e.stop()}}),e)}))),t.handleCreateCredential=function(){var e=(0,p.default)(l.default.mark((function e(a,r){var n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.devops,u=n.cluster,e.next=3,t.store.createCredential(a,{devops:o,cluster:u});case 3:return e.next=5,t.store.getCredentials({devops:o,cluster:u});case 5:r(),t.hideCreateCredential();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){var a=t.props.onSave,r=t.context.resetSubRoute,n=t.store.formData;if(["github","bitbucket_server"].includes(t.source_type)){if((0,I.default)(e))return;return a(t.source_type,e),void(r&&r())}t.formRef.current&&t.formRef.current.validate((function(){if("git"===t.source_type&&a("git",{git_source:W(W({},n.git_source),{},{discover_branches:!0})}),"gitlab"===t.source_type&&a("gitlab",{gitlab_source:W(W({},n.gitlab_source),{},{discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0})}),["svn","single_svn"].includes(t.source_type)){var e=(0,N.default)(n,"svn_source.type","svn");a(e,(0,m.default)({},L.REPO_KEY_MAP[e],W(W({},n.svn_source),{},{remote:(0,N.default)(n,"svn_source.remote","").trim()})))}r&&r()}))},t.handleTypeChange=function(e){var a=t.props.sourceData,r=e.currentTarget.dataset.type;t.source_type=r,t.credentialFormData={type:"username_password"},t.store.resetStore(),(0,I.default)(a)||a.source_type!==r||t.restoreSourceData()},t.formRef=O.default.createRef(),t.tokenFormRef=O.default.createRef(),t.store=new M.default,t}return(0,E.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onCancel,a=e.devops,r=e.name,n=e.cluster,l=this.context.registerSubRoute,o=this.props.sourceData;l&&l(this.handleSubmit,t),this.store.getCredentials({devops:a,cluster:n}),this.store.name=r,(0,I.default)(o)||(this.source_type=o.source_type,this.restoreSourceData())}},{key:"renderTypes",value:function(){var e=this,t=this.props,a=t.enableTypeChange,r=t.cluster,n=t.noSVN,l="single_svn"===this.source_type?"svn":this.source_type,o=globals.app.isMultiCluster?(0,N.default)(globals,"clusterConfig.".concat(r,".ksVersion")):(0,N.default)(globals,"ksConfig.ksVersion"),u=(0,z.compareVersion)(o,"3.1.0");return O.default.createElement("ul",{className:B.default.repoTypes},L.REPO_TYPES.map((function(t){var r;return!(u<0&&"gitlab"===t.value)&&((!n||"svn"!==t.value)&&O.default.createElement("li",{className:(0,T.default)((r={},(0,m.default)(r,B.default.selectType,t.value===l),(0,m.default)(r,B.default.disabled,!a&&l!==t.value),r)),key:t.value,"data-type":t.value,onClick:e.handleTypeChange},O.default.createElement(w.Icon,{name:t.icon,type:t.value===l?"light":"dark",size:32}),O.default.createElement("span",null,t.name)))})))}},{key:"renderForm",value:function(){var e=this.props,t=e.devops,a=e.enableTypeChange,r=e.cluster,n=e.noJenkins,l=void 0!==n&&n;return"github"===this.source_type?O.default.createElement(F.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,showCredential:this.showCreateCredential,setCredentialsFormData:this.setCredentialsFormData,cluster:r,devops:t}):["svn","single_svn"].includes(this.source_type)?O.default.createElement(V.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,devops:t,showCredential:this.showCreateCredential,enableTypeChange:a,cluster:r}):"bitbucket_server"===this.source_type?O.default.createElement(G.default,{store:this.store,formRef:this.formRef,showCredential:this.showCreateCredential,handleSubmit:this.handleSubmit,cluster:r,devops:t}):"gitlab"===this.source_type?O.default.createElement(Y.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,cluster:r,devops:t,showCredential:this.showCreateCredential}):O.default.createElement(U.default,{store:this.store,formRef:this.formRef,handleSubmit:this.handleSubmit,devops:t,cluster:r,showCredential:this.showCreateCredential,noJenkins:l})}},{key:"render",value:function(){var e=this.props,a=e.devops,r=e.cluster,n=e.type;return O.default.createElement("div",{className:B.default.formWrapper},"import"!==n?O.default.createElement("div",{className:"h4"},O.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},O.default.createElement(j.ReactComponent,null)),t("SELECT_CODE_REPOSITORY")):null,O.default.createElement("div",{className:B.default.contentWrapper},this.renderTypes(),this.renderForm()),O.default.createElement(x.default,{visible:this.showCredential,onOk:this.handleCreateCredential,onCancel:this.hideCreateCredential,devops:a,cluster:r,formTemplate:(0,R.toJS)(this.credentialFormData),sourceType:this.source_type}))}}]),r}(O.default.Component),f.propTypes={onSave:C.default.func,onCancel:C.default.func,sourceData:C.default.object,enableTypeChange:C.default.bool},f.defaultProps={onSave:function(){},onCancel:function(){},sourceData:{},enableTypeChange:!0},f.contextTypes={registerSubRoute:C.default.func,resetSubRoute:C.default.func},u=d,c=(0,_.default)(u.prototype,"source_type",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"github"}}),s=(0,_.default)(u.prototype,"credentialFormData",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{type:"username_password"}}}),i=(0,_.default)(u.prototype,"showCredential",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=u))||o;a.default=K},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(87),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(87),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(193),r(17),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(58)),c=n(r(43));r(41);var s,i,f,d,p,m,v,h,E,y,g,b,S,_,O,C,T=n(r(44)),R=n(r(65)),D=n(r(36)),N=n(r(37)),k=n(r(88)),I=n(r(55)),P=n(r(56)),A=n(r(51)),w=n(r(49)),M=(n(r(66)),r(14)),L=n(r(60)),j=n(r(63)),x=n(r(26)),U=r(52),F=n(r(244)),V=n(r(323)),G=n(r(1111));function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,A.default)(e);if(t){var n=(0,A.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,P.default)(this,a)}}var H=(s=function(e){(0,I.default)(P,e);var a,r,n,o,s=z(P);function P(e){var a;return(0,D.default)(this,P),a=s.call(this,e),(0,R.default)(a,"isAccessTokenWrong",i,(0,k.default)(a)),(0,R.default)(a,"credentials",f,(0,k.default)(a)),(0,R.default)(a,"orgList",d,(0,k.default)(a)),(0,R.default)(a,"repoList",p,(0,k.default)(a)),(0,R.default)(a,"activeRepoIndex",m,(0,k.default)(a)),(0,R.default)(a,"formData",v,(0,k.default)(a)),(0,R.default)(a,"creatBitBucketServersError",h,(0,k.default)(a)),(0,R.default)(a,"orgParams",E,(0,k.default)(a)),a.getClusterVersion=function(e){return a.isMultiCluster?(0,x.default)(window,"parent.globals.clusterConfig.".concat(e,".ksVersion")):(0,x.default)(window,"parent.globals.ksConfig.ksVersion")},a.isNeedUpdate=function(e){return(0,U.compareVersion)(a.getClusterVersion(e),"3.3.0")<0},(0,R.default)(a,"getCredentials",y,(0,k.default)(a)),a.getCredentialDetail=function(){var e=(0,T.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.credentialStore.fetchDetail(t);case 2:return e.abrupt("return",a.credentialStore.detail);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.createCredential=function(){var e=(0,T.default)(c.default.mark((function e(t,r){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.credentialStore.handleCreate(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),(0,R.default)(a,"creatBitBucketServers",g,(0,k.default)(a)),(0,R.default)(a,"clearBitbucketErrors",b,(0,k.default)(a)),a.getBitbucketList=function(){var e=(0,T.default)(c.default.mark((function e(t){var r,n,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cluster,e.next=3,request.get("".concat(a.getDevopsUrlV2({cluster:r}),"scms/bitbucket-server/servers"));case 3:return n=e.sent,l=[],l=!(0,j.default)(n)&&(0,L.default)(n)?n.map((function(e){return{label:e.apiUrl,value:e.apiUrl}})):[{label:"https://bitbucket.org",value:"https://bitbucket.org"}],e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,R.default)(a,"resetStore",S,(0,k.default)(a)),(0,R.default)(a,"checkCronScript",_,(0,k.default)(a)),(0,R.default)(a,"fetchGitLabServerList",O,(0,k.default)(a)),(0,R.default)(a,"fetchGitLabProjectList",C,(0,k.default)(a)),a.credentialStore=new G.default,a.verifyAccessErrorHandle={github:function(e,t){var r=t.headers?e:t;return 428===t.code?(a.isAccessTokenWrong=!0,void(a.orgList.isLoading=!1)):(window.onunhandledrejection&&window.onunhandledrejection(r),Promise.reject(r))},"bitbucket-server":function(e,r){var n=r.headers?e:r;if(428!==n.code){if(!(0,L.default)(n.errors)||(0,j.default)(n.errors))return a.creatBitBucketServersError={all:n.message},window.onunhandledrejection&&window.onunhandledrejection(n),Promise.reject(n);a.creatBitBucketServersError=n.errors.reduce((function(e,t){return e[t.field]={message:t.message},e}),{})}else a.creatBitBucketServersError={password:{message:t("INCORRECT_USERNAME_OR_PASSWORD")}}}},a}return(0,N.default)(P,[{key:"getOrganizationList",value:(o=(0,T.default)(c.default.mark((function e(t,a,r){var n,o,s,i,f,d,p,m,v,h,E;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageNumber,o=void 0===n?1:n,s=t.pageSize,i=void 0===s?100:s,f=t.more,d=void 0!==f&&f,p=t.credentialId,m=(0,u.default)(t,["pageNumber","pageSize","more","credentialId"]),this.orgList.isLoading=!0,this.scmType=a,this.orgParams=m,v="".concat(this.getDevopsUrlV3({cluster:r}),"scms/").concat(a||"github","/organizations?").concat((0,U.getQueryString)(Y({pageNumber:o,pageSize:i},m),!1)),h="".concat(this.getDevopsUrlV2({cluster:r}),"scms/").concat(a||"github","/organizations/?").concat((0,U.getQueryString)(Y(Y({},m),{},{credentialId:p}),!1)),e.next=8,request.get(this.isNeedUpdate(r)?h:v).catch((function(){return[]}));case 8:return E=e.sent,(0,L.default)(E)&&(this.orgList.data=d?[].concat((0,l.default)(this.orgList.data),(0,l.default)(E)):E),this.orgList.isLoading=!1,this.orgList.isEnd=E.length<i,this.orgList.pagination={pageSize:i,pageNumber:o},e.abrupt("return",this.orgList);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return o.apply(this,arguments)})},{key:"handleChangeActiveRepoIndex",value:function(e){this.activeRepoIndex=e}},{key:"handleChangeAccessTokenWrong",value:function(){this.isAccessTokenWrong=!1}},{key:"getRepoList",value:(n=(0,T.default)(c.default.mark((function e(t){var a,r,n,o,u,s,i,f,d,p,m,v,h,E=this;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cluster,r=t.activeRepoIndex,n=t.pageNumber,o=void 0===n?1:n,u=t.pageSize,s=void 0===u?100:u,i=t.more,f=void 0!==i&&i,d=void 0!==r?r:""===this.activeRepoIndex?0:this.activeRepoIndex,p=this.scmType||"github",m=this.isNeedUpdate(a)&&"bitbucket-server"===p?this.orgList.data[d].key:this.orgList.data[d].name,this.repoList.isLoading=!0,v="".concat(this.isNeedUpdate(a)?this.getDevopsUrlV2({cluster:a}):this.getDevopsUrlV3({cluster:a}),"scms/").concat(p,"/organizations/").concat(m,"/repositories?").concat((0,U.getQueryString)(Y(Y({},this.orgParams),{},{pageNumber:o,pageSize:s}),!1)),e.next=8,request.get(v,{},null,(function(e,t){return E.repoList.isLoading=!1,E.repoList.data=[],window.onunhandledrejection&&window.onunhandledrejection(t),Promise.reject(t)}));case 8:return(h=e.sent).repositories&&((0,L.default)((0,M.toJS)(this.repoList.data))?(this.repoList.data=f?[].concat((0,l.default)(this.repoList.data),(0,l.default)(h.repositories.items)):(0,l.default)(h.repositories.items),this.repoList.isEnd=h.repositories.items.length<s,this.repoList.pagination={pageSize:s,pageNumber:o}):this.repoList.data=h.repositories),this.repoList.isLoading=!1,e.abrupt("return",this.repoList);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"putAccessName",value:(r=(0,T.default)(c.default.mark((function e(t){var a,r,n,l,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.secretName,r=t.secretNamespace,n=t.cluster,l=t.token,this.isAccessTokenWrong=!1,e.next=4,this.verifySecretForRepo({secret:a,secretNamespace:r},{scmType:"github",cluster:n,accessToken:l});case 4:if(!(o=e.sent)||!o.credentialId){e.next=8;break}return e.next=8,this.getOrganizationList({secret:a,secretNamespace:r,includeUser:!0,credentialId:o.credentialId},"github",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"verifySecretForRepo",value:(a=(0,T.default)(c.default.mark((function e(t,a){var r,n,l,o,s,i,f;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.scmType,n=a.cluster,a.devops,l=a.accessToken,o=(0,u.default)(a,["scmType","cluster","devops","accessToken"]),s=r,/https:\/\/bitbucket.org\/?/gm.test("".concat(o.apiUrl))&&(s="bitbucket_cloud"),i="".concat(this.getDevopsUrlV2({cluster:n}),"scms/").concat(s,"/verify/"),f="".concat(this.getDevopsUrlV3({cluster:n}),"scms/").concat(s,"/verify?").concat((0,U.getQueryString)(t,!1)),e.next=7,request.post(this.isNeedUpdate(n)?i:f,this.isNeedUpdate(n)?Y(Y({},o),{},{accessToken:l}):o,null,this.verifyAccessErrorHandle[r]);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"isMultiCluster",get:function(){var e;return null===(e=window.parent)||void 0===e?void 0:e.globals.ksConfig.multicluster}}]),P}(V.default),i=(0,w.default)(s.prototype,"isAccessTokenWrong",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,w.default)(s.prototype,"credentials",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[]}}}),d=(0,w.default)(s.prototype,"orgList",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[],isEnd:!1,pagination:{pageNumber:1,pageSize:100}}}}),p=(0,w.default)(s.prototype,"repoList",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,data:[],isEnd:!1,pagination:{pageNumber:1,pageSize:100}}}}),m=(0,w.default)(s.prototype,"activeRepoIndex",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=(0,w.default)(s.prototype,"formData",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=(0,w.default)(s.prototype,"creatBitBucketServersError",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),E=(0,w.default)(s.prototype,"orgParams",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,w.default)(s.prototype,"getOrganizationList",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"getOrganizationList"),s.prototype),(0,w.default)(s.prototype,"handleChangeActiveRepoIndex",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"handleChangeActiveRepoIndex"),s.prototype),(0,w.default)(s.prototype,"handleChangeAccessTokenWrong",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"handleChangeAccessTokenWrong"),s.prototype),(0,w.default)(s.prototype,"getRepoList",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"getRepoList"),s.prototype),y=(0,w.default)(s.prototype,"getCredentials",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(c.default.mark((function t(a){return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.credentials.loading=!0,t.next=3,e.credentialStore.fetchList(Y({},a));case 3:e.credentials=e.credentialStore.list,e.credentials.loading=!1;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g=(0,w.default)(s.prototype,"creatBitBucketServers",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var a=(0,T.default)(c.default.mark((function a(r){var n,l,o,u,s,i,f,d,p;return c.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=r.apiUrl,l=r.cluster,o=r.secretName,u=r.secretNamespace,s=r.username,i=r.password,e.creatBitBucketServersError={},e.tokenFormData={username:s,password:i,apiUrl:n,credentialId:o},!(0,j.default)((0,U.parseUrl)(n))){a.next=6;break}return e.creatBitBucketServersError={apiUrl:{message:(0,j.default)(n)?t("BITBUCKET_ADDRESS_EMPTY_TIP"):t("BITBUCKET_ADDRESS_INVALID_TIP")}},a.abrupt("return");case 6:if(!e.isNeedUpdate(l)){a.next=20;break}if(f={id:(0,U.generateId)(4)},/https:\/\/bitbucket.org\/?/gm.test("".concat(n))){a.next=12;break}return a.next=11,request.post("".concat(e.getDevopsUrlV2({cluster:l}),"scms/bitbucket-server/servers"),{apiUrl:n,name:o},null,e.verifyAccessErrorHandle["bitbucket-server"]);case 11:f=a.sent;case 12:if(f&&f.id){a.next=14;break}return a.abrupt("return");case 14:return a.next=16,e.verifySecretForRepo({},{apiUrl:n,scmType:"bitbucket-server",cluster:l,userName:s,password:i});case 16:(d=a.sent)&&d.credentialId&&(e.orgList.isLoading=!1,e.getOrganizationList({credentialId:d.credentialId,apiUrl:n},d.credentialId,l)),a.next=30;break;case 20:return a.next=22,e.verifySecretForRepo({secret:o,secretNamespace:u,server:n},{scmType:"bitbucket-server",cluster:l,apiUrl:n});case 22:if(!(p=a.sent)||0!==p.code){a.next=29;break}return e.orgList.isLoading=!1,a.next=27,e.getOrganizationList({secret:o,secretNamespace:u,server:n},"bitbucket-server",l);case 27:a.next=30;break;case 29:p&&0!==p.code&&(e.creatBitBucketServersError={apiUrl:{message:p.message}});case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}),b=(0,w.default)(s.prototype,"clearBitbucketErrors",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.creatBitBucketServersError={}}}}),S=(0,w.default)(s.prototype,"resetStore",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.orgList={isLoading:!1,data:[]},e.activeRepoIndex="",e.isAccessTokenWrong=!1,e.formData={},e.tokenFormData={},e.creatBitBucketServersError={}}}}),_=(0,w.default)(s.prototype,"checkCronScript",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.devops,r=t.script,n=t.pipeline,l=t.cluster;return request.post("".concat(e.getDevopsUrlV2({cluster:l,devops:a}),"checkCron"),{cron:r,name:n})}}}),O=(0,w.default)(s.prototype,"fetchGitLabServerList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(c.default.mark((function t(a){var r,n,l,o,u;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.devops,l="".concat(e.getDevopsUrlV2({cluster:r,devops:n}),"jenkins/gitlab/serverList"),t.next=4,request.post(l,{},{},(function(){return[]}));case 4:return o=t.sent,u=[],"ok"===o.status&&(0,L.default)(o.data)&&(u=o.data.map((function(e){return{label:e.name,value:e.name}}))),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),C=(0,w.default)(s.prototype,"fetchGitLabProjectList",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,T.default)(c.default.mark((function t(a){var r,n,l,o,u,s,i;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.cluster,n=a.devops,l=a.server,o=a.owner,u="".concat(e.getDevopsUrlV2({cluster:r,devops:n}),"jenkins/gitlab/projectList"),u+="?".concat(F.default.stringify({server:l,owner:o})),t.next=5,request.post(u,{},{},(function(){return[]}));case 5:return s=t.sent,i=[],"ok"===s.status&&(0,L.default)(s.data)&&(i=s.data.map((function(e){return{label:e,value:e.split("/").pop()}}))),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s);a.default=H},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(31),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(196),r(23),r(24),r(17),r(85),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(319),r(22),r(196),r(23),r(57),r(24),r(17),r(85),r(188),r(7);var l=n(r(61)),o=n(r(43));r(41);var u,c,s,i,f,d=n(r(44)),p=n(r(30)),m=n(r(65)),v=n(r(36)),h=n(r(37)),E=n(r(88)),y=n(r(55)),g=n(r(56)),b=n(r(51)),S=n(r(49)),_=(n(r(66)),n(r(0))),O=n(r(3)),C=r(14),T=r(239),R=n(r(26)),D=n(r(63)),N=n(r(241)),k=n(r(863)),I=r(440),P=r(186),A=r(72),w=n(r(833)),M=n(r(2780));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var U=(0,T.observer)((c=function(e){(0,y.default)(r,e);var a=x(r);function r(){var e;(0,v.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).tokenFormRef=_.default.createRef(),e.state={isLoading:!1,searchValue:""},(0,m.default)(e,"repoListData",s,(0,E.default)(e)),e.handleFormChange=function(){e.props.store.isAccessTokenWrong&&e.props.store.handleChangeAccessTokenWrong()},(0,m.default)(e,"handleActiveOrgChange",i,(0,E.default)(e)),e.handleSubmit=function(t){var a=(0,p.default)({},A.REPO_KEY_MAP[e.scmType],{repo:(0,R.default)(e.repoListData,"".concat(t,".name")),credential_id:e.credentialId,owner:(0,R.default)((0,C.toJS)(e.orgList),"data[".concat(e.activeRepoIndex,"].name")),discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0,description:(0,R.default)(e.repoListData,"".concat(t,".description"))});e.props.handleSubmit(a)},(0,m.default)(e,"handlePasswordConfirm",f,(0,E.default)(e)),e.getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(j({devops:r,cluster:n},t))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return _.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",_.default.createElement(P.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e.handleUpdateOrgList=function(){var t=(0,d.default)(o.default.mark((function t(a){var r,n,l;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e.orgList.pagination,t.next=3,e.props.store.getOrganizationList(j({pageNumber:null!==(r=null==a?void 0:a.page)&&void 0!==r?r:1,pageSize:l.pageSize,more:null!==(n=null==a?void 0:a.more)&&void 0!==n&&n},e.props.store.orgParams),e.scmType,e.props.cluster);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleUpdateRepoList=function(){var t=(0,d.default)(o.default.mark((function t(a){var r,n,u,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=e.repoList.pagination,t.next=3,e.props.store.getRepoList({activeRepoIndex:e.activeRepoIndex,cluster:e.props.cluster,pageNumber:null!==(r=null==a?void 0:a.page)&&void 0!==r?r:1,pageSize:u.pageSize,more:null!==(n=null==a?void 0:a.more)&&void 0!==n&&n});case 3:c=t.sent,e.repoListData=(0,l.default)(c.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderSearch=function(){return _.default.createElement("div",{className:M.default.search},_.default.createElement(P.InputSearch,{value:e.state.searchValue,onSearch:e.filterResource,placeholder:t("SEARCH_BY_NAME")}))},e.filterResource=function(t){(0,D.default)(t)?e.repoListData=(0,l.default)(e.repoList.data):e.repoListData=e.repoList.data.filter((function(e){return e.name.includes(t)})),e.setState({searchValue:t})},e.renderEmpty=function(a){return _.default.createElement("div",{className:M.default.tabContent},a.isLoading?_.default.createElement(P.Loading,null,_.default.createElement("div",{className:M.default.orgList})):_.default.createElement("div",{className:M.default.orgList},e.renderAccessTokenForm()),_.default.createElement("div",{className:M.default.emptyRepoList},_.default.createElement("div",{className:M.default.placeHolder},_.default.createElement("img",{src:"/assets/empty-card.svg",alt:""}),_.default.createElement("p",{className:M.default.title},t("".concat(e.scmType.toUpperCase(),"_CREDENTIAL_EMPTY"))))))},e}return(0,h.default)(r,[{key:"renderAccessTokenForm",value:function(){var e=this,a=this.props.store,r=a.tokenFormData,n=a.credentials,l=a.isAccessTokenWrong;return _.default.createElement("div",{className:M.default.card},_.default.createElement(P.Form,{data:r,onSubmit:this.handlePasswordConfirm,onChange:this.handleFormChange,ref:this.tokenFormRef},_.default.createElement(P.Form.Item,{label:t("CREDENTIAL"),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}],error:l?{message:{message:t.html("INCORRECT_GITHUB_TOKEN_DESC")}}:void 0,desc:_.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),_.default.createElement("span",{className:M.default.clickable,onClick:function(){e.props.showCredential(),e.props.setCredentialsFormData({type:"username_password",data:{username:"admin"}})}},t("CREATE_CREDENTIAL")))},_.default.createElement(P.Select,{name:"credentialId",options:this.credentialsList,pagination:(0,N.default)(n,["page","limit","total"]),isLoading:n.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0,onChange:function(t){e.props.store.tokenFormData={credentialId:t}}})),_.default.createElement(P.Button,{className:M.default.confirmButton,loading:this.state.isLoading,onClick:this.handlePasswordConfirm},t("OK"))))}},{key:"renderOrgList",value:function(){var e=this,t=this.orgList,a=t.data,r=t.isEnd,n=t.pagination,l=void 0===n?{}:n,o=t.isLoading;return _.default.createElement(k.default,{data:(0,C.toJS)(a),isEnd:r,page:l.pageNumber||1,loading:o,onFetch:this.handleUpdateOrgList,noMount:!0},!(0,D.default)(a)&&a.map((function(t,a){return _.default.createElement("div",{key:t.name,className:(0,O.default)(M.default.repo,(0,p.default)({},M.default["repo-active"],e.activeRepoIndex===a)),onClick:function(){return e.handleActiveOrgChange(a)}},_.default.createElement("div",{className:M.default.avatar},_.default.createElement("img",{src:t.avatar,alt:t.name})),_.default.createElement("div",{className:M.default.name},t.name))})))}},{key:"renderRepoList",value:function(){var e=this,a=this.repoList,r=a.isEnd,n=a.pagination,l=void 0===n?{}:n,o=a.isLoading;return(0,D.default)(this.repoListData)?_.default.createElement(P.Loading,{spinning:o},_.default.createElement(w.default,{className:M.default.empty,icon:"exclamation",title:t("NO_DATA"),desc:t("NO_REPO_FOUND_DESC")})):_.default.createElement(k.default,{data:(0,C.toJS)(this.repoListData),isEnd:r,page:l.pageNumber||1,loading:o,onFetch:this.handleUpdateRepoList,wrapperClassName:M.default.repoListBox,noMount:!0},this.repoListData.map((function(a,r){return _.default.createElement("div",{className:M.default.repo,key:"".concat(a.name,"-").concat(r)},_.default.createElement("div",{className:M.default.icon},_.default.createElement(P.Icon,{name:"bitbucket_server"===e.scmType?"bitbucket":e.scmType,size:40})),_.default.createElement("div",{className:M.default.info},_.default.createElement("div",{className:M.default.name},a.name),_.default.createElement("div",{className:M.default.desc},a.description)),_.default.createElement("div",{className:M.default.action,onClick:function(){return e.handleSubmit(r)},"data-repo-index":r},_.default.createElement(P.Button,{type:"control"},t("SELECT"))))})))}},{key:"render",value:function(){return!this.orgList.isLoading&&(0,D.default)((0,C.toJS)(this.orgList.data))?this.renderEmpty(this.orgList.data):_.default.createElement("div",{className:M.default.tabContent},_.default.createElement("div",{className:M.default.orgList},this.renderOrgList()),_.default.createElement("div",{className:M.default.repoListContainer},_.default.createElement(_.default.Fragment,null,this.renderSearch()),_.default.createElement("div",{className:M.default.repoList},this.renderRepoList())))}},{key:"orgList",get:function(){return this.props.store.orgList}},{key:"activeRepoIndex",get:function(){return this.props.store.activeRepoIndex}},{key:"repoList",get:function(){return this.props.store.repoList}},{key:"scmType",get:function(){return"github"}},{key:"credentialsList",get:function(){return(0,l.default)(this.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type,namespace:e.namespace,token:(0,R.default)(e,"_originData.data.password")}})).filter((function(e){return"username_password"===e.type})))}}]),r}(_.default.Component),s=(0,S.default)(c.prototype,"repoListData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,S.default)(c.prototype,"handleActiveOrgChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.store.handleChangeActiveRepoIndex(parseInt(a,10)),t.next=3,e.props.store.getRepoList({activeRepoIndex:parseInt(a,10),cluster:e.props.cluster,more:!1});case 3:r=t.sent,e.repoListData=(0,l.default)(r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),f=(0,S.default)(c.prototype,"handlePasswordConfirm",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(o.default.mark((function t(){var a,r,n,l,u,c,s,i;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.devops,l=e.tokenFormRef.current.getData(),e.credentialId=l.credentialId,e.credentialId){t.next=5;break}return t.abrupt("return",!1);case 5:if(e.setState({isLoading:!0}),u=e.credentialsList.find((function(t){return t.value===e.credentialId})),(0,D.default)(u)){t.next=15;break}return c=(0,R.default)(u,"value"),s=(0,R.default)(u,"namespace"),i=(0,I.safeAtob)((0,R.default)(u,"token")),t.next=13,e.props.store.putAccessName({secretName:c,secretNamespace:s,cluster:r,devops:n,token:i}).finally((function(){e.setState({isLoading:!1})}));case 13:t.next=16;break;case 15:e.setState({isLoading:!1});case 16:case"end":return t.stop()}}),t)})))}}),u=c))||u;a.default=U},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(74)),m=r(72),v=r(186),h=n(r(2790)),E=n(r(2792));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={state:"",selectDataKey:""},e.handleData=function(t){var a=e.state.selectDataKey,r=(0,d.default)(e.fedFormTemplate,"data",{});a&&delete r[a],(0,p.default)(e.fedFormTemplate,"data",g(g({},r),t)),e.hideDataForm()},e.showDataForm=function(){e.setState({state:"data",selectDataKey:""})},e.hideDataForm=function(){e.setState({state:"",selectDataKey:""})},e.handleDataItemEdit=function(t){e.setState({state:"data",selectDataKey:t})},e}return(0,u.default)(r,[{key:"renderDataForm",value:function(){var e=this.state.selectDataKey,t=(0,d.default)(this.fedFormTemplate,"data",{});return f.default.createElement(E.default,{detail:t,selectKey:e,onOk:this.handleData,onCancel:this.hideDataForm})}},{key:"render",value:function(){var e=this.props.formRef;return"data"===this.state.state?this.renderDataForm():f.default.createElement(v.Form,{data:this.fedFormTemplate,ref:e},f.default.createElement(v.Form.Item,{label:t("DATA")},f.default.createElement(h.default,{name:"data",onEdit:this.handleDataItemEdit,onAdd:this.showDataForm})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(f.default.Component);a.default=S},,function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n,l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(239),d=r(a(2804)),p=r(a(2805)),m=r(a(2807)),v=r(a(2810)),h=r(a(2813)),E=r(a(2819)),y=r(a(2824)),g=r(a(2869)),b=r(a(2893)),S=r(a(2894)),_=r(a(2895)),O=r(a(2899)),C=r(a(2901));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var R=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=T(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).store=e.props.store,e.modalStore=new C.default,e.labelStore=new d.default,e.subForm=i.default.createRef(),e.handleSave=function(t){var a=e.props.onOk;e.subForm&&e.subForm.current&&e.subForm.current.handleSubmit(),a(t)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.readOnly,a=e.onCancel,r=e.isSubmitting,n=this.modalStore.selectedMonitor,l=this.store.isEditing,o=n&&l;return i.default.createElement(f.Provider,{monitoringStore:this.store,labelStore:this.labelStore,modalStore:this.modalStore},i.default.createElement(_.default,{theme:this.modalStore.theme,onCancel:a,title:i.default.createElement(m.default,null),description:i.default.createElement(S.default,null),operations:i.default.createElement(i.default.Fragment,null,i.default.createElement(b.default,null),i.default.createElement(h.default,null),i.default.createElement(v.default,null),!t&&i.default.createElement(p.default,{onSaveClick:this.handleSave,isSubmitting:r}))},i.default.createElement(O.default,{sidebar:i.default.createElement(E.default,null),content:o?i.default.createElement(y.default,{ref:this.subForm}):i.default.createElement(g.default,null)})))}}]),a}(i.default.Component))||n;t.default=R},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(c.Button,(0,n.default)({className:(0,u.default)(s.default.wrapper,(0,l.default)({},s.default.danger,"danger"===e.type))},e))};var n=r(a(315)),l=r(a(30)),o=r(a(0)),u=r(a(3)),c=a(186),s=r(a(2806))},function(e,t,a){"use strict";a(15),Object.defineProperty(t,"__esModule",{value:!0}),t.recentTimeRange=t.refreshInterval=void 0;t.refreshInterval=["","3s","5s","10s","30s"];t.recentTimeRange=["30m","1h","5h","12h","24h","7d"]},,function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(827),a(18),a(87),a(16),a(27),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(246)),l=r(a(96)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(30));a(45),a(5),a(827),a(18),a(87),a(442),a(42),a(16),a(27),a(4),a(319),a(23),a(57),a(17);var d,p=r(a(0)),m=r(a(26)),v=r(a(243)),h=r(a(3)),E=r(a(1033)),y=r(a(900)),g=r(a(869)),b=r(a(912)),S=r(a(929)),_=r(a(870)),O=r(a(871)),C=r(a(2841)),T=r(a(2844));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var D=function(e){var t=e.from,a=e.to,r=e.count,n=parseInt((a-t)/(r+1),10);return Array(r).fill({}).reduce((function(e,a,r){return e.concat(t+n*(r+1))}),[])},N=(d={},(0,f.default)(d,6e4,"mm:ss"),(0,f.default)(d,36e5,"HH:mm"),(0,f.default)(d,864e5,"ddd HH:mm"),(0,f.default)(d,1296e6,"MMM Do"),(0,f.default)(d,"Infinity","MMM YYYY"),d);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return(0,v.default)(e).format("YYYY-MM-DD HH:mm:ss")}var I=function(e){(0,c.default)(a,e);var t=R(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).ref=p.default.createRef(),e}return(0,u.default)(a,[{key:"getTickCount",value:function(){var e=(0,m.default)(this.ref,"current.offsetWidth");return e?Math.floor(e/75):5}},{key:"getXAxisExpand",value:function(){var e=this.props,t=e.data,a=e.timeRange,r=e.bar,n=t.length,l=a.end-a.start;return n>1&&r?l/(2*n-2):0}},{key:"getTicks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=this.getDomain(),a=(0,l.default)(t,2),r=a[0],n=a[1];return D({from:r,to:n,count:e})}},{key:"getDomain",value:function(){var e=this.props.timeRange,t=e.start,a=e.end,r=this.getXAxisExpand();return[t-r,a+r]}},{key:"getTickFormatter",value:function(e){var t=this.getDomain(),a=(0,l.default)(t,2),r=a[0],o=(a[1]-r)/e;for(var u in N)if(o<=Number(u)){var c=function(){var e=N[u];return{v:function(t){return(0,v.default)(t).format(e)}}}();if("object"===(0,n.default)(c))return c.v}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,r=t.legends,n=t.line,l=t.bar,o=t.cartesianGrid,u=void 0===o||o,c=t.stacked,s=void 0!==c&&c,i=t.yAxis,f=void 0===i||i,d=t.className,m=t.valueFormatter;return p.default.createElement("div",{style:{height:"300px"},className:(0,h.default)(T.default.wrapper,d),ref:this.ref},p.default.createElement(O.default,{debounce:100},p.default.createElement(C.default,{data:a},u&&p.default.createElement(S.default,{vertical:!1}),this.renderTimeXAxis(),f&&p.default.createElement(b.default,{tickFormatter:m,tickLine:null,axisLine:null}),l&&r.map((function(t){return p.default.createElement(E.default,{isAnimationActive:!1,connectNulls:!0,key:"".concat(t.ID," - bar"),name:t.name,dataKey:t.ID,fill:t.color,stroke:t.color,stackId:s?"A":void 0,fillOpacity:t.opacity||1,barSize:e.singleBarSize})})),n&&r.map((function(e){return p.default.createElement(y.default,{isAnimationActive:!1,connectNulls:!0,key:"".concat(e.ID," - area"),name:e.name,dataKey:e.ID,fill:e.color,stroke:e.color,stackId:s?"A":void 0,fillOpacity:e.opacity||.4})})),p.default.createElement(g.default,{wrapperStyle:{zIndex:1e3},formatter:m,labelFormatter:k}))))}},{key:"renderTimeXAxis",value:function(){var e=this.props.xAxis,t=void 0===e||e,a=this.getDomain(),r=this.getTickCount(),n=this.getTicks(r),l=this.getTickFormatter(r),o=this.XAxisShouldPadding?30:0;return p.default.createElement(_.default,{hide:!t,type:"number",dataKey:"time",scale:"time",interval:0,tickLine:null,domain:a,ticks:n,tickFormatter:l,allowDataOverflow:"false",padding:{left:o,right:o}})}},{key:"singleBarSize",get:function(){var e=this.props.legends;return this.XAxisShouldPadding?Math.floor(60/e.length):void 0}},{key:"XAxisShouldPadding",get:function(){var e=this.props,t=e.data,a=e.timeRange,r="YYYY-MM-DD HH:mm:ss";if(1===t.length){var n=(0,v.default)(a.start).format(r),l=(0,v.default)(a.end).format(r),o=(0,v.default)(t[0].time).format(r);return o===n||o===l}return!1}}]),a}(p.default.PureComponent);t.default=I,I.defaultProps={valueFormatter:function(e){return e}}},,function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(18),a(192),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(192),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(61)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(14),d=r(a(135));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).onAdd=function(){var t=e.props,a=t.onChange,r=t.value,l=void 0===r?[]:r,o=t.defaultItemValue;a([].concat((0,n.default)(l),[o]))},e.add=function(t){var a=e.props,r=a.onChange,l=a.value;r([].concat((0,n.default)(l),[t]))},e}return(0,o.default)(a,[{key:"onDelete",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r));l.splice(e,1),n(l)}}},{key:"onUpClick",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r)),o=l[e],u=(e-1+l.length)%l.length;l[e]=l[u],l[u]=o,n(l)}}},{key:"onDownClick",value:function(e){var t=this;return function(){var a=t.props,r=a.value,n=a.onChange,l=(0,d.default)((0,f.toJS)(r)),o=l[e],u=(e+1+l.length)%l.length;l[e]=l[u],l[u]=o,n(l)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.header,n=t.children,l=t.name;return i.default.createElement("div",null,r&&r({onAdd:this.onAdd,value:a,add:this.add}),i.default.createElement("div",null,a.map((function(t,a){return n({index:a,value:t,formItemName:"".concat(l,"[").concat(a,"]"),onDelete:e.onDelete(a),onUpClick:e.onUpClick(a),onDownClick:e.onDownClick(a)})}))))}}]),a}(i.default.Component);t.default=m,m.defaultProps={defaultItemValue:{},value:[]}},function(e,a,r){"use strict";r(15);var n=r(20);r(320),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.prefix,r=e.onUpClick,n=e.onDownClick,p=e.onDelete,m=(0,o.default)(e,["prefix","onUpClick","onDownClick","onDelete"]);return u.default.createElement("div",{className:d.default.wrapper},u.default.createElement("div",{className:d.default.sort},u.default.createElement(c.Icon,{name:"sort-ascending",onClick:r}),u.default.createElement(c.Icon,{name:"sort-descending",onClick:n})),u.default.createElement("div",{className:d.default.form},u.default.createElement("div",{className:d.default.firstLine},u.default.createElement("div",null,u.default.createElement(c.Form.Item,{className:d.default.name},u.default.createElement(s.default,{name:"".concat(a,".legendFormat"),debounce:800},(function(e){var a=e.onChange,r=e.value;return u.default.createElement("div",null,u.default.createElement(i.default,{label:t("METRIC_NAME"),tips:""},u.default.createElement(c.Input,{className:d.default.input,value:r,onChange:a})))}))),u.default.createElement(c.Form.Item,{className:d.default.interval},u.default.createElement(s.default,{name:"".concat(a,".step"),debounce:500},(function(e){var a=e.onChange,r=e.value;return u.default.createElement("div",null,u.default.createElement(i.default,{label:t("INTERVAL"),tips:""},u.default.createElement(c.Input,{className:d.default.input,value:r,onChange:a})))})))),u.default.createElement(c.Icon,{name:"trash",onClick:p})),u.default.createElement("div",{className:d.default.exprInput},u.default.createElement(c.Form.Item,null,u.default.createElement(s.default,{name:"".concat(a,".expr"),debounce:500},(function(e){var t=e.onChange,a=e.value;return u.default.createElement(f.default,(0,l.default)({value:a,onChange:t},m))}))))))},r(320),r(16);var l=n(r(315)),o=n(r(58)),u=n(r(0)),c=r(186),s=n(r(1054)),i=n(r(1113)),f=n(r(1270)),d=n(r(2848))},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.left,a=e.right;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,t),a)};var n=r(a(0)),l=r(a(2849))},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(109),a(5),a(11),a(6),a(18),a(87),a(48),a(16),a(137),a(9),a(13),a(10),a(24),a(62),a(64),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(5),a(11),a(6),a(18),a(28),a(87),a(48),a(442),a(42),a(16),a(137),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(24),a(62),a(64),a(7);var l=r(a(43));a(41);var o,u,c,s,i,f,d,p,m,v=r(a(44)),h=r(a(61)),E=r(a(1272)),y=r(a(30)),g=r(a(65)),b=r(a(36)),S=r(a(37)),_=r(a(49)),O=(r(a(66)),r(a(26))),C=r(a(74)),T=r(a(189)),R=a(14),D=r(a(243)),N=a(794),k=a(467),I=a(72),P=n(a(1362)),A=r(a(2902)),w=r(a(2903)),M=r(a(2904));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={from:"now-30m",to:"now"},U={graph:w.default,signlestat:A.default},F=(o=function(){function e(t){var a=t.title,r=void 0===a?"":a,n=t.cluster,l=void 0===n?"":n,o=t.namespace,v=void 0===o?"":o,h=t.datasource,E=void 0===h?"prometheus":h,y=t.description,S=void 0===y?"":y,_=t.panels,O=void 0===_?[]:_,C=t.templatings,T=void 0===C?[]:C,R=t.time,D=void 0===R?x:R,k=t.isEditing,I=void 0!==k&&k,P=t.refresh,A=void 0===P?"":P,w=t.name,L=void 0===w?"":w,j=t.formTemplate;(0,b.default)(this,e),(0,g.default)(this,"title",u,this),(0,g.default)(this,"refresh",c,this),(0,g.default)(this,"time",s,this),(0,g.default)(this,"isEditing",i,this),(0,g.default)(this,"textMonitors",f,this),this.unNameGraphRow=new M.default({config:{id:0}}),(0,g.default)(this,"graphMonitorRows",d,this),(0,g.default)(this,"targetsMetadata",p,this),(0,g.default)(this,"changeTitle",m,this),this.title=r,this.cluster=l,this.namespace=v,this.datasource=E,this.description=S,this.panels=O,this.templatings=T,this.time=D,this.refresh=A,this.name=L,this.formTemplate=j,this.isEditing=I,this.generateMonitorList(),this.uidFactory=(0,N.CreateUidFactory)(this.panels.map((function(e){return e.id})))}var t;return(0,S.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/clusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"getTimeRange",value:function(){var e=this.time,t=e.from,a=e.to;return{from:(0,D.default)(this.parseGrafanaTime(t)),to:(0,D.default)(this.parseGrafanaTime(a))}}},{key:"refreshMs",get:function(){return this.refresh?(0,k.getMsFromTimeAlias)(this.refresh):0}},{key:"timeRange",get:function(){var e=this.time,t=e.from,a=e.to;return{from:(0,D.default)(this.parseGrafanaTime(t)),to:(0,D.default)(this.parseGrafanaTime(a))}}}]),(0,S.default)(e,[{key:"changeRefreshInterval",value:function(e){this.refresh=e}},{key:"changeTimeRange",value:function(e){var t=e.from,a=e.to;this.time.from=t,this.time.to=a}},{key:"switchEditingMode",value:function(e){this.isEditing=e}},{key:"changeModeToEditing",value:function(){return this.switchEditingMode(!0),this}},{key:"generateMonitorList",value:function(){var e=this.panels.reduce((function(e,t){return e[t.type===P.MONITOR_PANEL_TYPE.TEXT?"textPanels":"otherPanels"].push(t),e}),{textPanels:[],otherPanels:[]}),t=e.textPanels,a=e.otherPanels;this.textMonitors=this.generateTextMonitors(t);var r=this.gennerateGraphMonitorRows(a),n=r.unNameGraphRow,l=r.graphRows;this.unNameGraphRow=n,this.graphMonitorRows=l}},{key:"generateTextMonitors",value:function(e){var t=this,a=e.map((function(e){return new A.default(j(j({},e),{},{namespace:t.namespace,cluster:t.cluster}))}));return new M.default({monitors:a})}},{key:"gennerateGraphMonitorRows",value:function(e){var t=this,a=e.reduce((function(e,a){if(a.type===P.MONITOR_PANEL_TYPE.ROW)return[].concat((0,h.default)(e),[new M.default({config:a})]);var r=new(U[a.type]||P.default)(j(j({},a),{},{namespace:t.namespace,cluster:t.cluster})),n=e.pop();return n.push(r),[].concat((0,h.default)(e),[n])}),[this.unNameGraphRow]),r=(0,E.default)(a);return{unNameGraphRow:r[0],graphRows:r.slice(1)}}},{key:"addNewRow",value:function(){this.graphMonitorRows.push(new M.default({config:{id:this.uidFactory.generateUID(),title:"New Row",type:"row"}}))}},{key:"generateNewTextMonitor",value:function(){var e=new A.default({id:this.uidFactory.generateUID(),title:"",format:"none",type:"singlestat",decimals:0,namespace:this.namespace,cluster:this.cluster,valueName:"last",targets:[{expr:""}]});return e.belong(this.textMonitors),e}},{key:"generatGraphMonitor",value:function(e){var t=e.bars,a=e.lines,r=new w.default({id:this.uidFactory.generateUID(),type:"graph",title:"",lines:a,bars:t,description:"",namespace:this.namespace,cluster:this.cluster,stack:!1,targets:[{expr:"",legendFormat:"",step:"1m",refId:1}],yaxes:[{format:"none",decimals:0}],colors:I.MONITOR_GRAPH_COLORS[0].colors});return r.belong(this.unNameGraphRow),r}},{key:"generatTableMonitor",value:function(){var e=new P.default({id:this.uidFactory.generateUID(),title:"",format:"none",type:"graph",decimals:0,namespaces:this.namespace,cluster:this.cluster,targets:[{expr:""}]});return e.belong(this.unNameGraphRow),e}},{key:"parseGrafanaTime",value:function(e){if(this.isGrafanaTimeFormat(e)){var t=e.replace(/now-?/,""),a=(0,k.getMsFromTimeAlias)(t);return Date.now()-a}return new Date(e).valueOf()}},{key:"isGrafanaTimeFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^now$|^now-(\d+[smhd])$/)}},{key:"fetchMetadata",value:(t=(0,v.default)(l.default.mark((function e(){var t,a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request.get("kapis/monitoring.kubesphere.io/v1beta1/targets/metadata",{cluster:this.cluster,namespace:this.namespace});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={data:[]};case 5:t=e.t0,a=t.data,this.targetsMetadata=a||[];case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"toJS",value:function(){var e=this.textMonitors,t=this.unNameGraphRow,a=this.graphMonitorRows,r=[].concat((0,h.default)(t.monitors),(0,h.default)(e.monitors)).map((function(e){return(0,T.default)((0,R.toJS)(e.config),["cluster","namespace"])})),n=a.reduce((function(e,t){var a=t.monitors.map((function(e){return(0,T.default)((0,R.toJS)(e.config),["cluster","namespace"])}));return e.concat(t.config,a)}),[]);return(0,C.default)(this.formTemplate,"spec",Object.assign((0,O.default)(this.formTemplate,"spec",{}),{title:this.title,templatings:this.templatings,refresh:this.refresh,time:(0,R.toJS)(this.time),panels:[].concat((0,h.default)(r),(0,h.default)(n))})),this.formTemplate}}]),e}(),u=(0,_.default)(o.prototype,"title",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=(0,_.default)(o.prototype,"refresh",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,_.default)(o.prototype,"time",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{from:"now",to:"now"}}}),(0,_.default)(o.prototype,"refreshMs",[R.computed],Object.getOwnPropertyDescriptor(o.prototype,"refreshMs"),o.prototype),(0,_.default)(o.prototype,"timeRange",[R.computed],Object.getOwnPropertyDescriptor(o.prototype,"timeRange"),o.prototype),i=(0,_.default)(o.prototype,"isEditing",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=(0,_.default)(o.prototype,"textMonitors",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d=(0,_.default)(o.prototype,"graphMonitorRows",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=(0,_.default)(o.prototype,"targetsMetadata",[R.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=(0,_.default)(o.prototype,"changeTitle",[R.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.title=t}}}),(0,_.default)(o.prototype,"changeRefreshInterval",[R.action],Object.getOwnPropertyDescriptor(o.prototype,"changeRefreshInterval"),o.prototype),(0,_.default)(o.prototype,"changeTimeRange",[R.action],Object.getOwnPropertyDescriptor(o.prototype,"changeTimeRange"),o.prototype),(0,_.default)(o.prototype,"switchEditingMode",[R.action],Object.getOwnPropertyDescriptor(o.prototype,"switchEditingMode"),o.prototype),(0,_.default)(o.prototype,"generateMonitorList",[R.action],Object.getOwnPropertyDescriptor(o.prototype,"generateMonitorList"),o.prototype),o);t.default=F},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(12),a(109),a(5),a(11),a(84),a(18),a(4),a(23),a(17),a(85),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(5),a(11),a(84),a(18),a(42),a(4),a(23),a(57),a(17),a(85);var l=n(a(30)),o=n(a(61)),u=n(a(36)),c=n(a(37)),s=n(a(55)),i=n(a(56)),f=n(a(51)),d=r(a(0)),p=n(a(3)),m=n(a(1)),v=a(186),h=n(a(60)),E=n(a(2913));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={value:e.props.value},e.handleClick=function(t){var a=t,r=e.state.value,n=e.props.onChange;(0,h.default)(r)?r.includes(a)?e.setState({value:r.filter((function(e){return e!==a}))},(function(){n(r.filter((function(e){return e!==a})))})):e.setState({value:[].concat((0,o.default)(r),[a])},(function(){n([].concat((0,o.default)(r),[a]))})):e.setState({value:a},(function(){n(a)}))},e.selectedCheck=function(t){var a=e.state.value;return(0,h.default)(a)?a.includes(t):t===a},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.options,n=t.selectedClassName;return d.default.createElement("ul",{className:(0,p.default)(E.default.container,a)},r.map((function(t){var a=t.icon,r=void 0===a?"picture":a,o=t.image,u=t.label,c=t.value,s=t.description;return d.default.createElement("li",{key:c,"data-value":c,onClick:function(){return e.handleClick(c)},className:(0,p.default)((0,l.default)({},n,e.selectedCheck(c))),style:{paddingTop:s?"12px":"18px"}},d.default.createElement("figure",null,o?d.default.createElement("img",{src:o}):d.default.createElement(v.Icon,{name:r})),d.default.createElement("h3",null,u),s&&d.default.createElement("p",null,s))})))}}]),a}(d.Component);t.default=g,g.propTypes={options:m.default.array,value:m.default.oneOfType([m.default.array,m.default.string]),selectedClassName:m.default.string,iconSize:m.default.oneOfType([m.default.number,m.default.string])},g.defaultProps={selectedClassName:E.default.selected}},function(e){e.exports=JSON.parse('{"Elasticsearch Overview":{"settings":{"datasource":"prometheus","panels":[{"decimals":0,"format":"none","id":11,"targets":[{"expr":"sum by(cluster) (elasticsearch_cluster_health_status{color=\\"red\\"})"}],"title":"Red Clusters","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":12,"targets":[{"expr":"sum by(cluster) (elasticsearch_cluster_health_status{color=\\"yellow\\"})"}],"title":"Yellow Clusters","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":14,"targets":[{"expr":"elasticsearch_cluster_health_number_of_nodes"}],"title":"Number of Nodes","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":16,"targets":[{"expr":"elasticsearch_cluster_health_number_of_data_nodes"}],"title":"Number of Data Nodes","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":17,"targets":[{"expr":"elasticsearch_cluster_health_number_of_pending_tasks"}],"title":"Pending Tasks","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":21,"targets":[{"expr":"sum (elasticsearch_process_open_files_count)"}],"title":"Open File Descriptors","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":22,"targets":[{"expr":"elasticsearch_cluster_health_active_primary_shards"}],"title":"Active primary shards","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":25,"targets":[{"expr":"elasticsearch_cluster_health_active_shards"}],"title":"Active shards","type":"singlestat","valueName":"last"},{"id":37,"title":"JVM","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":15,"lines":true,"stack":false,"targets":[{"expr":"sum by(name) (elasticsearch_jvm_memory_used_bytes) / sum by(name) (elasticsearch_jvm_memory_max_bytes)","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"JVM Memory Used","type":"graph","yaxes":[{"decimals":2,"format":"percent (0.0-1.0)"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":30,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_jvm_memory_committed_bytes","legendFormat":"{{name}} committed: {{area}}","refId":1,"step":"1m"},{"expr":"elasticsearch_jvm_memory_max_bytes","legendFormat":"{{name}} max: {{area}}","refId":2,"step":"1m"}],"title":"JVM Memory Committed","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":27,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_jvm_gc_collection_seconds_count[3m])","legendFormat":"{{name}} {{gc}}","refId":1,"step":"1m"}],"title":"GC Count","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":28,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_jvm_gc_collection_seconds_sum[3m])","legendFormat":"{{name}} {{gc}}","refId":1,"step":"1m"}],"title":"GC Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"id":38,"title":"Resource Consumption","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":29,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_os_load1","legendFormat":"load1: {{name}}","refId":1,"step":"1m"},{"expr":"elasticsearch_os_load5","legendFormat":"load5: {{name}}","refId":2,"step":"1m"},{"expr":"elasticsearch_os_load15","legendFormat":"load15: {{name}}","refId":3,"step":"1m"}],"title":"Load Average","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":32,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_filesystem_data_available_bytes","legendFormat":"{{name}}: {{path}}","refId":1,"step":"1m"}],"title":"Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":33,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_transport_tx_size_bytes_total[3m])","legendFormat":"{{name}}: sent","refId":1,"step":"1m"},{"expr":"irate(elasticsearch_transport_rx_size_bytes_total[3m])","legendFormat":"{{name}}: received","refId":2,"step":"1m"}],"title":"Network Usage","type":"graph","yaxes":[{"decimals":2,"format":"Byte"}]},{"id":39,"title":"Documents and Indices","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":34,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_docs","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Documents Count on Node","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":26,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_cluster_health_initializing_shards","legendFormat":"Initializing Shards","refId":1,"step":"1m"},{"expr":"elasticsearch_cluster_health_relocating_shards","legendFormat":"Relocating Shards","refId":2,"step":"1m"},{"expr":"elasticsearch_cluster_health_active_shards","legendFormat":"Active Shards","refId":3,"step":"1m"},{"expr":"elasticsearch_cluster_health_active_primary_shards","legendFormat":"Active Primary Shards","refId":4,"step":"1m"},{"expr":"elasticsearch_cluster_health_unassigned_shards","legendFormat":"Unassigned Shards","refId":5,"step":"1m"},{"expr":"elasticsearch_cluster_health_delayed_unassigned_shards","legendFormat":"Delayed Unassigned Shards","refId":6,"step":"1m"}],"title":"Shards","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":35,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_indices_search_query_time_seconds[3m]) ","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Query Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":42,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_query_cache_memory_size_bytes","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Query Cache Size","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":36,"lines":true,"stack":false,"targets":[{"expr":"irate(elasticsearch_indices_indexing_index_time_seconds_total[5m])","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Indexing Time","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":43,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_segments_count","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Count of Index Segments","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":44,"lines":true,"stack":false,"targets":[{"expr":"elasticsearch_indices_segments_memory_bytes","legendFormat":"{{name}}","refId":1,"step":"1m"}],"title":"Current Memory of Segments","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Total size of stored index data in bytes with all shards on all nodes","id":45,"lines":true,"stack":false,"targets":[{"expr":"sum by(index) (elasticsearch_indices_store_size_bytes_total)","legendFormat":"{{index}}","refId":1,"step":"1m"}],"title":"Total Size Stored Index Data","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]}],"title":"Elasticsearch Overview"},"name":"Elasticsearch","logo":"/assets/elasticsearch-das.svg"},"MySQL Overview":{"settings":{"datasource":"prometheus","panels":[{"decimals":2,"format":"none","id":2,"targets":[{"expr":"mysql_global_status_uptime / (3600*24)"}],"title":"MySQL Uptime (days)","type":"singlestat","valueName":"last"},{"decimals":2,"format":"none","id":3,"targets":[{"expr":"rate(mysql_global_status_queries[5m]) or irate(mysql_global_status_queries[5m])"}],"title":"Current QPS","type":"singlestat","valueName":"last"},{"decimals":0,"format":"Byte","id":6,"targets":[{"expr":"mysql_global_variables_innodb_buffer_pool_size"}],"title":"InnoDB Buffer Pool Size","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":9,"targets":[{"expr":"mysql_global_variables_max_connections"}],"title":"Max Permitted Connections","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":12,"targets":[{"expr":"mysql_global_variables_thread_cache_size"}],"title":"Thread Cache Size","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":21,"targets":[{"expr":"mysql_global_variables_long_query_time"}],"title":"Long Query Time (second)","type":"singlestat","valueName":"last"},{"id":4,"title":"Connections and Threads","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The maximum number of connections that have been in use simultaneously since the server started.","id":8,"lines":true,"stack":false,"targets":[{"expr":"mysql_global_status_max_used_connections","legendFormat":"Max Used Connections","refId":1,"step":"1m"}],"title":"Connections","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Threads Cached: The number of threads in the thread cache. Threads Connected: The number of currently open connections. Threads Created: The number of threads created to handle connections. Threads Running: The number of threads that are not sleeping.","id":5,"lines":true,"stack":false,"targets":[{"expr":"mysql_global_status_threads_connected","legendFormat":"Threads Connected","refId":1,"step":"1m"},{"expr":"mysql_global_status_threads_created","legendFormat":"Threads Created","refId":2,"step":"1m"},{"expr":"mysql_global_status_threads_running","legendFormat":"Threads Running","refId":3,"step":"1m"},{"expr":"mysql_global_status_threads_cached","legendFormat":"Threads Cached","refId":4,"step":"1m"}],"title":"Threads","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Aborted_clients: The number of connections that were aborted because the client died without closing the connection properly. Aborted_connects: The number of failed attempts to connect to the MySQL server.","id":22,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_aborted_connects[5m]) or irate(mysql_global_status_aborted_connects[5m])","legendFormat":"Aborted Connects (attempts)","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_aborted_clients[5m]) or irate(mysql_global_status_aborted_clients[5m])","legendFormat":"Aborted Clients (timeout)","refId":2,"step":"1m"}],"title":"Aborted Connections","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":10,"title":"Queries and Questions","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of statements executed by the server. This includes only statements sent to the server by clients and not statements executed within stored programs, unlike the Queries variable.","id":13,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_questions[5m]) or irate(mysql_global_status_questions[5m])","legendFormat":"Questions","refId":1,"step":"1m"}],"title":"Questions","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":18,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_select_full_join[5m]) or irate(mysql_global_status_select_full_join[5m])","legendFormat":"Full Join","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_select_full_range_join[5m]) or irate(mysql_global_status_select_full_range_join[5m])","legendFormat":"Full Range Join","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_select_scan[5m]) or irate(mysql_global_status_select_scan[5m])","legendFormat":"Scan","refId":3,"step":"1m"},{"expr":"rate(mysql_global_status_select_range[5m]) or irate(mysql_global_status_select_range[5m])","legendFormat":"Range","refId":4,"step":"1m"},{"expr":"rate(mysql_global_status_select_range_check[5m]) or irate(mysql_global_status_select_range_check[5m])","legendFormat":"Range Check","refId":5,"step":"1m"}],"title":"Select By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":19,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_sort_rows[5m]) or irate(mysql_global_status_sort_rows[5m])","legendFormat":"Rows","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_sort_range[5m]) or irate(mysql_global_status_sort_range[5m])","legendFormat":"Range","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_sort_merge_passes[5m]) or irate(mysql_global_status_sort_merge_passes[5m])","legendFormat":"Merge Passes","refId":3,"step":"1m"},{"expr":"rate(mysql_global_status_sort_scan[5m]) or irate(mysql_global_status_sort_scan[5m])","legendFormat":"Scan","refId":4,"step":"1m"}],"title":"Sort By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of queries that have taken more than long_query_time seconds. This counter increments regardless of whether the slow query log is enabled.","id":20,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_slow_queries[5m]) or irate(mysql_global_status_slow_queries[5m])","legendFormat":"Slow Queries","refId":1,"step":"1m"}],"title":"Slow Queries","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":15,"title":"Temporary Objects","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":16,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_created_tmp_tables[5m]) or irate(mysql_global_status_created_tmp_tables[5m])","legendFormat":"Created Tmp Tables","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_created_tmp_disk_tables[5m]) or irate(mysql_global_status_created_tmp_disk_tables[5m])","legendFormat":"Created Tmp Disk Tables","refId":2,"step":"1m"},{"expr":"rate(mysql_global_status_created_tmp_files[5m]) or irate(mysql_global_status_created_tmp_files[5m])","legendFormat":"Created Tmp Files","refId":3,"step":"1m"}],"title":"Tmp Tables and Files","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":23,"title":"Table Locks","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"The number of times that a request for a table lock could be granted immediately, or could not be granted immediately and a wait was needed. ","id":24,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_table_locks_immediate[5m]) or irate(mysql_global_status_table_locks_immediate[5m])","legendFormat":"Table Locks Immediate","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_table_locks_waited[5m]) or irate(mysql_global_status_table_locks_waited[5m])","legendFormat":"Table Locks Waited","refId":2,"step":"1m"}],"title":"Locks By Types","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"id":25,"title":"Network Traffic","type":"row"},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":26,"lines":true,"stack":false,"targets":[{"expr":"rate(mysql_global_status_bytes_received[5m]) or irate(mysql_global_status_bytes_received[5m])","legendFormat":"Inbound","refId":1,"step":"1m"},{"expr":"rate(mysql_global_status_bytes_sent[5m]) or irate(mysql_global_status_bytes_sent[5m])","legendFormat":"Outbound","refId":2,"step":"1m"}],"title":"Inbound vs Outbound","type":"graph","yaxes":[{"decimals":0,"format":"Byte/s"}]}],"title":"MySQL Overview"},"name":"MySQL","logo":"/assets/mysql.svg"},"Redis Overview":{"settings":{"datasource":"prometheus","panels":[{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":6,"lines":true,"stack":false,"targets":[{"expr":"irate(redis_keyspace_hits_total[5m])","legendFormat":"Hits","refId":1,"step":"1m"},{"expr":"irate(redis_keyspace_misses_total[5m])","legendFormat":"Misses","refId":2,"step":"1m"}],"title":"Hits / Misses per Sec","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":7,"lines":true,"stack":false,"targets":[{"expr":"rate(redis_net_input_bytes_total[5m])","legendFormat":"Input","refId":1,"step":"1m"},{"expr":"rate(redis_net_output_bytes_total[5m])","legendFormat":"Output","refId":2,"step":"1m"}],"title":"Network I/O","type":"graph","yaxes":[{"decimals":2,"format":"Byte/s"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":8,"lines":true,"stack":false,"targets":[{"expr":"sum (redis_db_keys) by (db)","legendFormat":"{{db}}","refId":1,"step":"1m"}],"title":"Total Items per DB","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":9,"lines":true,"stack":false,"targets":[{"expr":"sum (redis_db_keys) - sum (redis_db_keys_expiring) ","legendFormat":"Not Expiring","refId":1,"step":"1m"},{"expr":"sum (redis_db_keys_expiring) ","legendFormat":"Expiring","refId":2,"step":"1m"}],"title":"Expiring vs Not-Expiring Keys","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":10,"lines":true,"stack":false,"targets":[{"expr":"sum(rate(redis_expired_keys_total[5m])) by (instance)","legendFormat":"Expired","refId":1,"step":"1m"},{"expr":"sum(rate(redis_evicted_keys_total[5m])) by (instance)","legendFormat":"Evicted","refId":2,"step":"1m"}],"title":"Expired / Evicted","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":11,"lines":true,"stack":false,"targets":[{"expr":"topk(5, irate(redis_commands_total[3m]))","legendFormat":"{{cmd}}","refId":1,"step":"1m"}],"title":"Command Calls / sec","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"bars":false,"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"","id":12,"lines":true,"stack":false,"targets":[{"expr":"redis_connected_clients","legendFormat":"total","refId":1,"step":"1m"}],"title":"Redis connected clients","type":"graph","yaxes":[{"decimals":0,"format":"none"}]},{"decimals":2,"format":"none","id":1,"targets":[{"expr":"redis_uptime_in_seconds / (3600 * 24)"}],"title":"Uptime (days)","type":"singlestat","valueName":"last"},{"decimals":0,"format":"none","id":3,"targets":[{"expr":"redis_connected_clients"}],"title":"Clients","type":"singlestat","valueName":"last"},{"decimals":2,"format":"percent (0-100)","id":4,"targets":[{"expr":"redis_memory_used_bytes  / redis_memory_max_bytes"}],"title":"Memory Usage","type":"singlestat","valueName":"last"},{"decimals":2,"format":"none","id":5,"targets":[{"expr":"rate(redis_commands_processed_total[2m])"}],"title":"Commands Executed / sec","type":"singlestat","valueName":"last"}],"title":"Redis Overview"},"name":"Redis","logo":"/assets/redis-das.svg"},"Jenkins Overview":{"settings":{"datasource":"prometheus","panels":[{"format":"none","id":56,"targets":[{"expr":"process_open_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Open File Descriptors","type":"singlestat"},{"decimals":0,"format":"none","id":57,"targets":[{"expr":"jenkins_queue_blocked_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Queue Blocked","type":"singlestat"},{"decimals":0,"format":"none","id":58,"targets":[{"expr":"jenkins_executor_in_use_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Executors in Use","type":"singlestat"},{"decimals":0,"format":"none","id":59,"targets":[{"expr":"jenkins_queue_buildable_value{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}"}],"title":"Queue Buildable","type":"singlestat"},{"decimals":0,"format":"none","id":60,"targets":[{"expr":"jenkins_runs_total_total{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}\\n"}],"title":"Total Run","type":"singlestat"},{"id":35,"title":"JVM","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":37,"lines":true,"targets":[{"expr":"sum by(namespace, container, instance) (jvm_memory_bytes_used) / sum by(namespace, container, instance) (jvm_memory_bytes_max)","legendFormat":"{{container}}-{{instance}}","refId":1,"step":"1m"}],"title":"JVM Memory Used","type":"graph","yaxes":[{"decimals":2,"format":"percent (0.0-1.0)"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":38,"lines":true,"targets":[{"expr":"jvm_memory_bytes_committed","legendFormat":"{{container}}-{{instance}} committed: {{area}}","refId":1,"step":"1m"},{"expr":"jvm_memory_bytes_max","legendFormat":"{{container}}-{{instance}} max: {{area}}","refId":2,"step":"1m"}],"title":"JVM Memory Committed","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":39,"lines":true,"targets":[{"expr":"irate(jvm_gc_collection_seconds_count[3m])","legendFormat":"{{container}}-{{instance}}: {{gc}}","refId":1,"step":"1m"}],"title":"GC Count","type":"graph","yaxes":[{"decimals":2,"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":40,"lines":true,"targets":[{"expr":"irate(jvm_gc_collection_seconds_sum[3m])\\n","legendFormat":"{{container}}-{{instance}}: {{gc}}","refId":1,"step":"1m"}],"title":"GC Time","type":"graph","yaxes":[{"decimals":3,"format":"seconds"}]},{"id":42,"title":"Resource Consumption","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":43,"lines":true,"targets":[{"expr":"vm_cpu_load_x100_history{quantile=\\"0.999\\"} / 100\\n","legendFormat":"load1: {{container}}-{{instance}}","refId":1,"step":"1m"},{"expr":"vm_cpu_load_x100_window_5m{quantile=\\"0.999\\"} / 100","legendFormat":"load5: {{container}}-{{instance}}","refId":2,"step":"1m"},{"expr":"vm_cpu_load_x100_window_15m{quantile=\\"0.999\\"} / 100","legendFormat":"load15: {{container}}-{{instance}}","refId":3,"step":"1m"}],"title":"Load Average","type":"graph","yaxes":[{"decimals":3,"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":44,"lines":true,"targets":[{"expr":"default_jenkins_disk_usage_bytes{container=\\"ks-jenkins\\", namespace=\\"kubesphere-devops-system\\", job=\\"ks-jenkins\\"}","legendFormat":"{{container}}-{{instance}}: {{directory}}","refId":1,"step":"1m"}],"title":"Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":55,"lines":true,"targets":[{"expr":"process_open_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"open fds","refId":1,"step":"1m"},{"expr":"process_max_fds{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"max fds","refId":2,"step":"1m"}],"title":"File Descriptor","type":"graph","yaxes":[{"format":"none"}]},{"id":46,"title":"Job","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":47,"lines":true,"targets":[{"expr":"jenkins_runs_total_total","legendFormat":"total jobs","refId":1,"step":"1m"},{"expr":"jenkins_runs_success_total\\n\\n","legendFormat":"successful jobs","refId":2,"step":"1m"},{"expr":"jenkins_runs_failure_total","legendFormat":"failure jobs","refId":3,"step":"1m"},{"expr":"jenkins_runs_aborted_total","legendFormat":"aborted jobs","refId":4,"step":"1m"}],"title":"Job Statistics","type":"graph","yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":48,"lines":true,"targets":[{"expr":"jenkins_queue_stuck_history{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\", quantile=\\"0.999\\"}","legendFormat":"{{container}}-{{instance}}","refId":1,"step":"1m"}],"title":"Stuck Job History","type":"graph","yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"description":"Amount of disk usage (bytes) for each job in Jenkins","id":49,"lines":true,"targets":[{"expr":"default_jenkins_job_usage_bytes","legendFormat":"{{url}}","refId":1,"step":"1m"}],"title":"Job Disk Usage","type":"graph","yaxes":[{"decimals":3,"format":"Byte"}]},{"id":51,"title":"Status","type":"row"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"id":53,"lines":true,"targets":[{"expr":"jenkins_health_check_score{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}\\n","legendFormat":"{{container}}-{{instance}}-health-score","refId":1,"step":"1m"},{"expr":"default_jenkins_up{namespace=\\"kubesphere-devops-system\\", container=\\"ks-jenkins\\", job=\\"ks-jenkins\\"}","legendFormat":"{{container}}-{{instance}}-up","refId":2,"step":"1m"}],"title":"Jenkins Health","type":"graph","yaxes":[{"decimals":2,"format":"none"}]}],"title":"Jenkins Overview"},"name":"Jenkins","logo":"/assets/jenkins.svg"},"GPU Overview":{"settings":{"datasource":"prometheus","panels":[{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":12,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"DCGM_FI_DEV_GPU_TEMP","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Temperature","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"datasource":"${DS_PROMETHEUS}","id":14,"format":"none","targets":[{"expr":"avg(DCGM_FI_DEV_GPU_TEMP)","refId":1,"step":"1m"}],"title":"GPU Avg. Temp","type":"singlestat"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":10,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_POWER_USAGE * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Power Usage","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"datasource":"${DS_PROMETHEUS}","id":16,"format":"none","targets":[{"expr":"sum(DCGM_FI_DEV_POWER_USAGE)","step":"1m"}],"title":"GPU Power Total","type":"singlestat"},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":2,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_SM_CLOCK * on(pod,namespace) group_left(node) kube_pod_info) * 1000000","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU SM Clocks","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":6,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_GPU_UTIL * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Utilization","type":"graph","xaxis":{},"yaxes":[{"format":"percent (0.0-1.0)"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":18,"legend":["to_the_right","max","avg"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_DEV_FB_USED * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"GPU Framebuffer Mem Used","type":"graph","xaxis":{},"yaxes":[{"format":"none"}]},{"colors":["#60acfc","#23c2db","#64d5b2","#d5ec5a","#ffb64e","#fb816d","#d15c7f"],"datasource":"${DS_PROMETHEUS}","id":4,"legend":["as_table","to_the_right","max","avg","current"],"lines":true,"targets":[{"expr":"sum without(Hostname, UUID, service, endpoint, container, job, pod, instance, namespace) (DCGM_FI_PROF_PIPE_TENSOR_ACTIVE * on(pod,namespace) group_left(node) kube_pod_info)","legendFormat":"Host {{node}} / Device {{device}} / GPU {{gpu}}","refId":1,"step":"1m"}],"title":"Tensor Core Utilization","type":"graph","xaxis":{},"yaxes":[{"format":"percent (0.0-1.0)"}]}],"title":"GPU Overview"},"description":" ","name":"GPU","logo":"/assets/GPU.svg"},"Grafana":{"settings":{"datasource":"prometheus","panels":[],"title":"Grafana"},"name":"Grafana","description":" ","logo":"/assets/grafana.svg"},"Custom Monitoring":{"settings":{"datasource":"prometheus","panels":[],"title":"Custom Monitoring"},"name":"Custom","description":" ","logo":"/assets/prometheus.svg"}}')},function(e,a,r){"use strict";r(15);var n=r(20);r(97),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(28),r(97),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(1099)),d=r(1193),p=n(r(951)),m=n(r(135)),v=n(r(26)),h=n(r(74)),E=n(r(242)),y=n(r(0)),g=n(r(2937)),b=n(r(2938)),S=n(r(2942)),_=n(r(2946));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var C=function(e){(0,u.default)(r,e);var a=O(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).minCountRef=y.default.createRef(),n.onShowAddTrigger=function(){n.setState({visible:!0,currentTrigger:{},currentTriggerIndex:void 0})},n.onShowEdit=function(e,t){n.setState({visible:!0,currentTrigger:e,currentTriggerIndex:t})},n.resetState=function(){n.setState({visible:!1,currentTrigger:{},currentTriggerIndex:void 0})},n.handleFallback=function(e){if(e){(0,h.default)(n.props.formTemplate,"spec.fallback",{failureThreshold:3,replicas:6})}else(0,E.default)(n.props.formTemplate,"spec.fallback");n.setState({fallback:e})},n.onSave=function(e){var t=n.state.currentTriggerIndex,a=(0,v.default)(n.props.formTemplate,"spec.triggers",[]);void 0!==t?a[t]=e:a.push(e),(0,h.default)(n.props.formTemplate,"spec.triggers",a),n.setState({visible:!1,currentTrigger:{},currentTriggerIndex:void 0,shouldValidate:n.state.shouldValidate+1})},n.validator=function(e,a,r){a||!(0,v.default)(n.props.formTemplate,"spec.triggers",[]).some((function(e){return"prometheus"===e.type}))?(a&&a>(0,v.default)(n.props.formTemplate,"spec.maxReplicaCount",0)&&r(t("MIN_REPLICA_COUNT_LESS_THAN_MAX")),r()):r(t("PROMETHEUS_MIN_REPLICA_COUNT_DESC"))},n.state={visible:!1,currentTriggerIndex:void 0,currentTrigger:{},fallback:!!(0,v.default)(e.formTemplate,"spec.fallback"),shouldValidate:0},n}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e,t){var a;t.shouldValidate!==this.state.shouldValidate&&(null===(a=this.minCountRef.current)||void 0===a||a.validate({"spec.minReplicaCount":(0,v.default)(this.props.formTemplate,"spec.minReplicaCount")}))}},{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.formTemplate,l=this.state,o=l.visible,u=l.currentTrigger;return o?y.default.createElement(S.default,{trigger:(0,m.default)(u),onCancel:this.resetState,onSave:this.onSave}):y.default.createElement(i.Form,{data:n,ref:r},y.default.createElement(i.Columns,null,y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{ref:this.minCountRef,label:t("MINIMUM_REPLICAS"),desc:t("SCALE_MINIMUM_REPLICAS_DESC"),rules:[{validator:this.validator}]},y.default.createElement(d.NumberInput,{name:"spec.minReplicaCount",integer:!0,min:0}))),y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{label:t("MAXIMUM_REPLICAS"),desc:t("SCALE_MAXIMUM_REPLICAS_DESC")},y.default.createElement(d.NumberInput,{name:"spec.maxReplicaCount",integer:!0,min:0})))),y.default.createElement(i.Columns,null,y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{label:t("POLLING_INTERVAL"),desc:t("POLLING_INTERVAL_DESC")},y.default.createElement(d.TimeUnitInput,{name:"spec.pollingInterval",integer:!0,min:0}))),y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{label:t("WAITING_TIME"),desc:t("WAITING_TIME_DESC")},y.default.createElement(d.TimeUnitInput,{name:"spec.cooldownPeriod",integer:!0,min:0})))),y.default.createElement(i.Form.Group,{label:t("ROLL_BACK"),desc:t("SCALE_ROLL_BACK_DESC"),checkable:!0,onChange:this.handleFallback,key:this.state.fallback},y.default.createElement("div",{className:"padding-12"},y.default.createElement(i.Columns,null,y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{label:t("FAILURE_THRESHOLD"),desc:t("SCALE_FAILURE_THRESHOLD_DESC"),rules:[{required:this.state.fallback,message:t("EMPTY_FAILURE_THRESHOLD")}]},y.default.createElement(d.NumberInput,{name:"spec.fallback.failureThreshold",integer:!0,min:0}))),y.default.createElement(i.Column,null,y.default.createElement(i.Form.Item,{label:t("FALLBACK_NUMBER"),desc:t("FALLBACK_NUMBER_DESC"),rules:[{required:this.state.fallback,message:t("EMPTY_FALLBACK_NUMBER_DESC")}]},y.default.createElement(d.NumberInput,{name:"spec.fallback.replicas",integer:!0,min:0})))))),y.default.createElement("div",{className:g.default.triggerWrapper},y.default.createElement("div",{className:g.default.title},t("TRIGGER_SETTING")),y.default.createElement("div",{className:g.default.desc},t("TRIGGER_SETTING_DESC")),y.default.createElement(i.Form.Item,null,y.default.createElement(_.default,{name:"spec.triggers",onShowTrigger:this.onShowAddTrigger,onShowEdit:this.onShowEdit,onCancel:this.resetState,onChange:function(t){(0,h.default)(n,"spec.triggers",t),e.setState({shouldValidate:e.state.shouldValidate+1})}}))),y.default.createElement(p.default,{className:g.default.advanced},y.default.createElement("div",{className:g.default.checkableText},y.default.createElement(i.Form.Item,null,y.default.createElement(f.default,{name:"spec.advanced.restoreToOriginalReplicaCount",title:t("RESTORE_TO_ORIGINAL_REPLICA_COUNT"),description:t("RESTORE_TO_ORIGINAL_REPLICA_COUNT_DESC")}))),y.default.createElement(i.Form.Group,{label:t("SCALE_BEHAVIOR"),desc:t("SCALE_BEHAVIOR_DESC"),keepDataWhenUnCheck:!0,checkable:!0},y.default.createElement(b.default,{type:"scaleUp",prefix:"spec.advanced.horizontalPodAutoscalerConfig.behavior.scaleUp"}),y.default.createElement(b.default,{type:"scaleDown",prefix:"spec.advanced.horizontalPodAutoscalerConfig.behavior.scaleDown"}))))}}]),r}(y.default.Component);a.default=C},,,,,,function(e,t,a){e.exports={card:"_2OMNiqGgcmhtrdbU8imCvj",action:"_2_wMN8F5TCW7GW6joHCSz_"}},function(e,t,a){e.exports={option:"_37Sc6Br1RJMiXP59t5p3P0"}},,function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(186),d=r(a(1542));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formTemplate,a=e.formRef,r=e.formProps,l=e.module,o=e.cluster,u=e.namespace;return i.default.createElement("div",{className:"margin-t12"},i.default.createElement(f.Form,(0,n.default)({data:t,ref:a},r),i.default.createElement(d.default,{formProps:r,data:t,module:l,cluster:o,namespace:u})))}}]),a}(i.default.Component);t.default=m},function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(315)),l=r(a(30)),o=r(a(36)),u=r(a(37)),c=r(a(88)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(0)),p=r(a(26)),m=r(a(63)),v=r(a(189)),h=a(186),E=r(a(932));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(a,e);var t=b(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleContainer=function(t){var a=e.props.formProps;E.default.prototype.handleContainer.call((0,c.default)(e),t),a.onChange()},e}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps,r=e.isFederated,l=e.isEdit,o=this.state,u=o.showContainer,c=o.selectContainer,s=r&&l?this.fedFormTemplate:this.formTemplate,i=JSON.parse((0,p.default)(s,'spec.template.metadata.annotations["kubesphere.io/imagepullsecrets"]',"{}"));return u?this.renderContainerForm(g(g({},c),{},{annotationOfImagePullSecrets:i})):((0,p.default)(s,"spec.template.spec.containers",[]).forEach((function(e){var t=g({},e),a=(0,p.default)(t,"resources.requests"),r=(0,m.default)(a)?null:(0,v.default)(a,["cpu","memory"]);if(!(0,m.default)(r)){var n=Object.keys(r)[0],l={type:n,value:r[n]};e.resources.gpu=l}})),d.default.createElement(h.Form,(0,n.default)({data:s,ref:t},a),this.renderContainerList()))}},{key:"formTemplate",get:function(){return this.props.formTemplate}}]),a}(E.default);t.default=S},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(186),d=r(a(1308));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.formTemplate,a=e.formRef,r=e.formProps,l=e.module,o=e.isFederated,u=e.isEdit;return i.default.createElement("div",{className:"margin-t12"},i.default.createElement(f.Form,(0,n.default)({data:t,ref:a},r),i.default.createElement(d.default,{module:l,data:t,isFederated:o,isEdit:u})))}}]),a}(i.default.Component);t.default=m},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(88)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=a(971);function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var f=function(e){(0,o.default)(a,e);var t=i(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).handleVolume=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s.Component.prototype.handleVolume.apply((0,l.default)(e),a),e.props.formProps.onChange()},e.handleVolumeTemplate=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];s.Component.prototype.handleVolumeTemplate.apply((0,l.default)(e),a),e.props.formProps.onChange()},e.handleLogToggle=function(){s.Component.prototype.handleLogToggle.apply((0,l.default)(e)),e.props.formProps.onChange()},e}return a}(s.Component);t.default=f},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(186),p=n(r(1554));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.formRef,n=e.formProps,o=e.isFederated;return f.default.createElement("div",{className:"margin-t12"},f.default.createElement(d.Form,(0,l.default)({data:a,ref:r},n),f.default.createElement(d.Form.Group,{label:t("POD_GRACE_PERIOD"),desc:t("POD_GRACE_PERIOD_DESC"),keepDataWhenUnCheck:!0,checkable:!0},f.default.createElement(p.default,{isFederated:o}))))}}]),r}(f.default.Component);a.default=v},,function(e,t,a){e.exports={modalBody:"_3ooh-L6FH1heTE2W25ptXy",body:"_1baKVvR8wM2DfwvvD-CQS-",title:"_3EXz6wxYbQX9UTIbuE8ZWX",content:"_2RPgGxlrT4c_RbdEQcp480",results:"_3DvL6vqwfNBXYrsp_WXO7-",footer:"_2p963RzqYeHJquBZuiurFu",item:"_3mQ04Ri3duB-7QNjJrTMpb",menu:"iskifxbBA3n3yoiQmXRq2",avatar:"_1fNpt_vmHQYqlACN4TYie8"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(26)),m=n(r(0)),v=n(r(1)),h=r(239),E=r(186),y=n(r(787)),g=n(r(3020));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).handleOk=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props.onOk,r=t.role;a(r)},e.getRoleOptions=function(){return e.props.roles.map((function(e){var a=(0,p.default)(e,"description");return{label:e.name,value:e.name,desc:t(a)}}))},e.optionRenderer=function(e){return m.default.createElement("div",{className:g.default.option},m.default.createElement("div",null,e.label),m.default.createElement("p",null,e.desc))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=e.role;return m.default.createElement(y.default.Form,{width:691,title:t("CHANGE_ROLE"),icon:"role",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},m.default.createElement(E.Form.Item,{label:t("ROLE"),rules:[{required:!0,message:t("SELECT_ROLE_TIP")}]},m.default.createElement(E.Select,{name:"role",optionRenderer:this.optionRenderer,options:this.getRoleOptions(),defaultValue:l})))}}]),r}(m.default.Component),o.propTypes={role:v.default.string,roles:v.default.array,visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func,isSubmitting:v.default.bool},o.defaultProps={role:"",roles:[],visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=S},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(974)),l=r(a(932)),o=r(a(971)),u=r(a(1043)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:l.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=c},,,function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(87),r(97),r(16),r(9),r(13),r(10),r(4),r(24),r(64),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(5),r(11),r(6),r(84),r(160),r(29),r(73),r(18),r(28),r(87),r(97),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(24),r(64),r(7),r(32);var o=l(r(43));r(41);var u=l(r(58)),c=l(r(30)),s=l(r(44)),i=l(r(61)),f=l(r(96)),d=n(r(0)),p=r(186),m=l(r(3)),v=l(r(799)),h=l(r(829)),E=l(r(850)),y=l(r(884)),g=l(r(241)),b=l(r(74)),S=l(r(3033)),_=l(r(26)),O=l(r(445)),C=l(r(439)),T=r(52),R=r(72),D=l(r(3034)),N=l(r(3036)),k=l(r(1322));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=p.Tabs.TabPanel,w="__ALL__",M=function(e){var a=e.formRef,r=e.formTemplate,n=e.goBack,l=e.isOutdated,c=e.onFormChange,I=e.isEdge,M=e.hideWorkspace,L=void 0!==M&&M,j="node_range";r.nodeSelectorLable&&(j="label_select"),r.nodeSelectorText&&(j="custom");var x=d.default.useState(!0),U=(0,f.default)(x,2),F=U[0],V=U[1],G=d.default.useState(j),B=(0,f.default)(G,2),Y=B[0],z=B[1],H=d.default.useState(!1),W=(0,f.default)(H,2),q=W[0],K=W[1],Q=d.default.createRef(),J=d.default.useRef(new O.default),X=(0,d.useRef)(new C.default),Z=d.default.useState(!0),$=(0,f.default)(Z,2),ee=$[0],te=$[1],ae=I?X.current.list:J.current.list,re=[{label:t("ALL"),value:w}].concat((0,i.default)(ae.data.map((function(e){return{label:(0,T.showNameAndAlias)(e),value:e.name}})))),ne=function(e){return d.default.createElement("div",{className:k.default.option},d.default.createElement("p",{className:k.default.label},e.label),d.default.createElement("p",{className:k.default.description},e.description||"-"))};function le(){return oe.apply(this,arguments)}function oe(){return(oe=(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(te(!0),!I){t.next=4;break}t.next=6;break;case 4:return t.next=6,J.current.fetchList({cluster:e.cluster});case 6:te(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ue=function(e){(0,S.default)(e.spec,(function(e,t){(0,b.default)(r,t,e)})),(0,b.default)(r,"aliasName",(0,_.default)(e,'metadata.annotations["kubesphere.io/alias-name"]',"")),(0,b.default)(r,"description",(0,_.default)(e,'metadata.annotations["kubesphere.io/description"]',""))};(0,d.useEffect)((function(){le()}),[]);var ce=function(e){var t=e.name,a=e.aliasName,r=e.description;e.key;return{apiVersion:"crd.projectcalico.org/v1",kind:"IPPool",metadata:{name:t,annotations:{"kubesphere.io/description":r||"","kubesphere.io/alias-name":a||""}},spec:P({},(0,u.default)(e,["name","aliasName","description","key"]))}},se=function(){var e,t,a;q?(r.nodeSelectorText=r.nodeSelector,r.nodeSelector="all()",r.natOutgoing=Boolean(r.natOutgoing),z("custom")):(r.nodeSelectorLable&&(r.nodeSelector=(t=r.nodeSelectorLable,a="",t.forEach((function(e){var t="",r="";switch(e.operator){case"NotIn":r=e.values.map((function(e){return'"'.concat(e,'"')})).join(","),t="".concat(e.key," not in {").concat(r,"}");break;case"In":r=e.values.map((function(e){return'"'.concat(e,'"')})).join(","),t="".concat(e.key," in {").concat(r,"}");break;case"Exists":t="has(".concat(e.key,")");break;case"DoesNotExist":t="!has(".concat(e.key,")")}a=a?"".concat(a," && ").concat(t):t})),a),delete r.nodeSelectorLable),r.nodeSelectorText&&(r.nodeSelector=r.nodeSelectorText.replace(/'/g,'"'),delete r.nodeSelectorText),V({obj:ce((e=r,Array.isArray(e)?e.reduce((function(e,t){return P(P({},e),t)}),{}):e))})),K(!q)},ie=function(e){"node_range"===e&&(delete r.nodeSelectorLable,delete r.nodeSelectorText),"label_select"===e&&delete r.nodeSelectorText,"custom"===e&&delete r.nodeSelectorLable,z(e)},fe=function(e){var t=e.key&&e.operator;return t&&["In","NotIn"].includes(e.operator)&&(t=t&&e.values.length>0),"Match"===e.operator&&(t=t&&e.regexValue),t},de=function(e,a,r){return a?a.some((function(e){return!fe(e)}))?r({message:t("INVALID_NOTIFICATION_CONDITION")}):void r():r()};return d.default.createElement(p.Form,{ref:a,data:r,onChange:c,className:k.default.editForm},d.default.createElement(E.default,{className:k.default.switch,text:t("EDIT_YAML"),onChange:se,checked:q}),d.default.createElement("div",{className:k.default.editContainer},d.default.createElement("div",null,d.default.createElement(p.Icon,{name:"return",size:20,className:"margin-r4",clickable:!!n,onClick:n}),d.default.createElement("span",{className:k.default.title},t("EDIT_POD_IP_POOL"))),q?d.default.createElement("div",{className:k.default.codeWrapper},d.default.createElement(y.default,{ref:Q,value:F,returnType:"obj",onChange:ue})):d.default.createElement("div",{className:k.default.container},d.default.createElement("div",{style:{display:"none"}},d.default.createElement(p.Form.Item,null,d.default.createElement(p.Input,{name:"isEdge",value:I}))),d.default.createElement("div",{className:(0,m.default)(k.default.card,k.default.editRow)},d.default.createElement(p.Form.Item,{label:t("NETWORK_SEGMENT"),rules:[{required:!0,message:t("ENTER_NETWORK_SEGMENT")}],desc:t("POD_IP_POOL_IP_RANGE")},d.default.createElement(p.Input,{name:"cidr"})),d.default.createElement(p.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:R.PATTERN_NAME,message:t("POD_IP_POOL_NAME_DESC")}],desc:t("POD_IP_POOL_NAME_DESC")},d.default.createElement(p.Input,{name:"name",maxLength:63})),d.default.createElement(p.Form.Item,{label:t("IPPOOL_BLOCK_SIZE"),desc:t("IP_POOL_BLOCK_SIZE_DESC")},d.default.createElement(v.default,{name:"blockSize",min:0,max:32})),(!L||I)&&d.default.createElement(p.Form.Item,{label:t(I?"PROJECT_PL":"WORKSPACE"),desc:t(I?"IPPOOL_ASSIGN_PROJECT_DESC":"IPPOOL_ASSIGN_WORKSPACE_DESC")},d.default.createElement(p.Select,{name:"workspace",options:re,pagination:(0,g.default)(ae,["page","total","limit"]),isLoading:ee,onFetch:le,searchable:!0,clearable:!0,placeholder:" "})),d.default.createElement(p.Form.Item,{label:t("NAT outgoing"),desc:t("NAT_OUTGOING_DESC")},d.default.createElement(p.Select,{options:[{label:t("OPEN"),value:!0},{label:t("CLOSE"),value:!1}],name:"natOutgoing",onChange:function(e){(0,b.default)(r,"natOutgoing",e)}})),d.default.createElement(p.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:R.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},d.default.createElement(p.Input,{maxLength:63,name:"aliasName"})),d.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},d.default.createElement(p.TextArea,{maxLength:256,name:"description"}))),d.default.createElement(p.Form.Group,{label:t("SELECT_NODES"),desc:t("SELECT_NODE_DES"),keepDataWhenUnCheck:!0,checkable:!0},d.default.createElement(p.Tabs,{type:"button",activeName:Y,onChange:ie},d.default.createElement(A,{label:t("NODE_RANGE"),name:"node_range"},d.default.createElement(p.Form.Item,null,d.default.createElement(p.Select,{options:[{label:t("ALL"),value:"all()",description:t("SELECT_LABEL_ALL_RESOUCE")},{label:t("ALL_DISABLED"),value:"!all()",description:t("DISABLE_SELECT_NODE")}],name:"nodeSelector",optionRenderer:ne,className:k.default.tabPanel}))),d.default.createElement(A,{label:t("LABEL_SELECT"),name:"label_select"},d.default.createElement(p.Form.Item,{label:t("LABEL"),rules:[{validator:de,checkOnSubmit:!0}]},d.default.createElement(h.default,{name:"nodeSelectorLable",itemType:"object",addText:t("ADD"),checkItemValid:fe,desc:d.default.createElement("div",{className:k.default.annotation},d.default.createElement(p.Icon,{name:"question"}),d.default.createElement("p",{className:k.default.desc},t.html("NOTIFICATION_CONDITION_SETTING_TIP")))},d.default.createElement(N.default,null)))),d.default.createElement(A,{label:t("CUSTOM"),name:"custom"},d.default.createElement(p.Form.Item,{label:t("EXPRESSION")},d.default.createElement(p.TextArea,{className:k.default.tabPanel,name:"nodeSelectorText",placeholder:'a in {"A", "B"} || a not in {"A", "B"} || has(A) || !has(A)'}))))),!l&&d.default.createElement(D.default,{value:(0,g.default)(r,["ipipMode","vxlanMode"]),onChange:function(e){var t=e.ipipMode,a=e.vxlanMode;(0,b.default)(r,"ipipMode",t),(0,b.default)(r,"vxlanMode",a)}}))))};a.default=M},function(e,t,a){e.exports={panel_p:"Yqh06RmBoRyo4EPMas8bQ",panel_s:"dcZ_PAxGuga9-dQ_R2F21",list:"_2y3_DkkZyu00IzO_2f7K0T",sheader:"_3AiwhP8qwgUhqH8LPnE7h1",sbody:"_3IhxAI3DyVi9gF9OH56ieB",cidr:"_1i1AudKOZMc9YALrUQQS_w",cidr_desc:"_2Y96COk5j42afC8WBhITrx",rulerow:"_1n385-u3bi3R_AxmEjXF5f",copy:"GRzd1aYlLJjc7ladECAGF",cidrrow:"_2F6Vl_l7l7oBHC3-FteUB6",error:"_2Rv2uP_LWQnnpK8_zqJ6Q7",errColor:"_2hhhSXsdc04b-WXptqNUWF",addBtn:"k2fG1ygGy-TCFEvSpdn5L",title:"_3qqAkQa-lFclxQniJas3A6",disp:"_28E97ro-MMoMS8FI6jmtFg",dirCheck:"_1INyMtM5lz6S-84-U9Lo8i"}},,,,function(e,t,a){e.exports={modalBody:"_3LmKosR2NgW3SYNGGl5Ja1",body:"_3wmbVDcnvlmKWa7E4MqW3a",title:"_38E3OlJ-EcA4JJwdzhaKjj",content:"_26R0JbcTWq68y4ODw0Tsn5",results:"_13KNhx0UTfuYSgYn-RW962",footer:"_1dt9c7vduVK9_f8YNvbXbr",item:"ShwjIjDUZ2tjNM5OLr4Ab",menu:"_3At_gmqtujAVgKiHEB0s6b",avatar:"_3WFnFWXC3vFQtXy_C5EtN9"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(11),r(197),r(84),r(18),r(87),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(11),r(197),r(84),r(18),r(87),r(42),r(448),r(4),r(23),r(57),r(17),r(85);var l=n(r(30)),o=n(r(61)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=n(r(3)),v=n(r(26)),h=n(r(63)),E=n(r(158)),y=n(r(247)),g=r(186),b=n(r(3083)),S=n(r(1709));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(r,e);var a=_(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).showKeyError=function(e){var t=e.index,a=e.message,r=(0,y.default)([].concat((0,o.default)(n.state.errorKeys),[t]));n.setState({errorKeys:r,errorMsg:a})},n.hideKeyError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,a=t?n.state.errorKeys.filter((function(e){return e!==t})):[];n.setState({errorKeys:a,errorMsg:""})},n.handleAdd=function(){var e=n.props,t=e.value;(0,e.onChange)([].concat((0,o.default)(t),[n.defaultValue]),n.defaultValue)},n.handleChange=function(e,a){var r=n.props,l=r.value,u=r.onChange,c=(0,v.default)(a,"currentTarget.value",a),s=l.findIndex((function(e){return(0,h.default)(e.key)}));if(-1!==s)return n.showKeyError({index:s,message:t("EMPTY_KEY")}),!1;var i=n.commonKeys.includes(c.key);if(l.reduce((function(e,t){return e.key===t.key&&(i=!0),t})),i)return n.showKeyError({index:e,message:t("DUPLICATE_KEYS")}),!1;var f=[];(0,E.default)(l[e])?(f=(0,o.default)(l))[e]=c:f=l.map((function(t,a){return a===e?c:t})),n.hideKeyError({index:e}),u(f)},n.handleSelect=function(e){var t=n.props,a=t.value;(0,t.onSelect)(a[e],e)},n.handleDelete=function(e){var t=n.props,a=t.value,r=t.onChange;n.state.errorKeys.includes(e)&&n.hideKeyError({index:e}),r(a.filter((function(t,a){return a!==e})),a[e])},n.state={errorKeys:[],errorMsg:""},n}return(0,c.default)(r,[{key:"isAddEnable",value:function(){var e=this.props,t=e.value,a=e.checkItemValid,r=this.state.errorKeys;return a?t.every(a):(0,h.default)(r)&&t.every((function(e){return!(0,h.default)(e)}))}},{key:"renderItems",value:function(){var e=this,t=this.props,a=t.value,r=t.onSelect,n=this.state,o=n.errorKeys,u=n.errorMsg;return a.map((function(t,a){return d.default.createElement("div",{key:a,className:(0,m.default)(S.default.inputItem,(0,l.default)({},S.default.errorItem,o.includes(a)))},d.default.createElement(b.default,{value:t||e.defaultValue,disabled:!e.isAddEnable(),onChange:e.handleChange.bind(e,a),onSelect:r&&e.handleSelect.bind(e,a),onDelete:e.handleDelete.bind(e,a)}),d.default.createElement("div",{className:S.default.error},u))}))}},{key:"render",value:function(){var e=this.props.className;return d.default.createElement("div",{className:(0,m.default)(S.default.wrapper,e)},this.renderItems(),d.default.createElement("div",{className:"text-right"},d.default.createElement(g.Button,{className:S.default.add,onClick:this.handleAdd,disabled:!this.isAddEnable()},t("ADD"))))}},{key:"defaultValue",get:function(){return{}}},{key:"commonKeys",get:function(){return this.props.common.map((function(e){return e.key})).filter((function(e){return e}))}}]),r}(d.default.Component);a.default=O,O.propTypes={name:p.default.string,common:p.default.array,value:p.default.array,onChange:p.default.func,checkItemValid:p.default.func},O.defaultProps={name:"",common:[],value:[""],onChange:function(){}}},function(e,t,a){e.exports={wrapper:"_2hrn5wbxI2jsY7exfmVzFH",errorItem:"_31W58zIFRX1O9saFOI6x4I",error:"_30Sh5N4eWp_n22gaC2P3FM",inputItem:"_1yjzijgTlKOp64WGBuvfOo",item:"_3sooMgh3beAV1uQaOpmOxt",inputs:"_1JgwJ_WoRTYC6bT-3V58mE",tips:"_1F6_WzB42ymqfDdQg6zo6R",actions:"_1vi3GhIAi_AW1pstmvuD4z",add:"_26Yju3vipEPXQJKW_DGxxk"}},function(e,t,a){e.exports={body:"_3RwgPGeCeOOduMFEd44ASI",wrapper:"_1JCx9E2tplQfD8l57CrHIk",title:"_1KEovvXekDcG9tkMjMIWmy",subTitle:"_334hw3UpGJoftYa6r6Wb2g",content:"tre555QRya-kDb6XM4o21"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(30)),o=n(r(61));r(12),r(5),r(11),r(6),r(84),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(85),r(7);var u=n(r(0)),c=n(r(247)),s=n(r(1)),i=r(186),f=n(r(828)),d=n(r(3108));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=function(e){var a=e.type,r=e.containers,n=e.containerKey,l=e.onCancel,s=e.onConfirm,p={uninstall:t("UNINSTALL_SOFT_TIPS",{name:n}),restart:t("RESTART_SOFT_TIPS",{name:n,type:t("CONTAINER_ENGINE")}),stop:t("STOP_SOFT_TIPS",{name:n})};return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:d.default.contentWrapper},u.default.createElement("div",{className:d.default.content},u.default.createElement("div",{className:d.default.title},["uninstall","stop"].includes(a)?u.default.createElement(i.Icon,{name:"close",type:"light",className:d.default.icon}):u.default.createElement(i.Icon,{name:"information",size:20,color:{primary:"#ffffff",secondary:"#329DCE"}}),u.default.createElement("span",null,t("".concat(a.toUpperCase(),"_SOFT"),{name:n}))),p[a]&&u.default.createElement(i.Alert,{message:p[a]}))),u.default.createElement(f.default,{className:d.default.confirm,onOk:function(){var e=r.map((function(e){var t=e.name,r=e.todoTasks,l=void 0===r?[]:r,u="".concat(t,"_").concat(a);if(t===n){var s=(0,c.default)([].concat((0,o.default)(l.filter((function(e){return["start","stop"].includes(a)?!["".concat(t,"_start"),"".concat(t,"_stop")].includes(e):["install","uninstall"].includes(a)?!["".concat(t,"_install"),"".concat(t,"_uninstall")].includes(e):e}))),[u]));return m(m({},e),{},{todoTasks:s})}return e}));s(e)},onCancel:l}))};v.propTypes={type:s.default.string,onConfirm:s.default.func,onCancel:s.default.func};var h=v;a.default=h},,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(73),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(3)),p=n(r(26)),m=n(r(63)),v=n(r(243)),h=r(52),E=r(916),y=n(r(3145));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=g(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.className,r=e.app,n=(0,h.safeParseJSON)((0,p.default)(r,"latest_app_version.maintainers",[]),[]).map((function(e){return e.name})),l=(0,h.safeParseJSON)((0,p.default)(r,"latest_app_version.sources",[]),[]);return i.default.createElement("div",{className:(0,d.default)(y.default.appBase,a)},i.default.createElement("h3",null,t("BASIC_INFORMATION")),i.default.createElement("dl",null,i.default.createElement("dt",null,t("CATEGORY_COLON")),i.default.createElement("dd",null,(0,E.getAppCategoryNames)((0,p.default)(r,"category_set",[]))),i.default.createElement("dt",null,t("HOMEPAGE_COLON")),i.default.createElement("dd",null,r.home||"-"),i.default.createElement("dt",null,t("RELEASE_DATE_COLON")),i.default.createElement("dd",null,(0,v.default)(r.status_time).format("YYYY-MM-DD")),i.default.createElement("dt",null,t("APP_ID_COLON")),i.default.createElement("dd",null,r.app_id||"-"),!(0,m.default)(n)&&i.default.createElement(i.default.Fragment,null,i.default.createElement("dt",null,t("MAINTAINER_COLON")),i.default.createElement("dd",null,n.join("、"))),!(0,m.default)(l)&&i.default.createElement(i.default.Fragment,null,i.default.createElement("dt",null,t("SOURCE_CODE_ADDRESS_COLON")),i.default.createElement("dd",null,l.map((function(e){return i.default.createElement("p",null,e)}))))))}}]),r}(i.default.PureComponent);a.default=b,b.propTypes={className:f.default.string,app:f.default.object.isRequired},b.defaultProps={app:{}}},,,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(320),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(320),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(7);var l=n(r(315)),o=n(r(43)),u=n(r(30));r(41);var c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(49)),E=r(186),y=n(r(790)),g=r(815),b=n(r(26)),S=n(r(241)),_=r(14),O=r(239),C=n(r(0)),T=r(52),R=r(916),D=r(72),N=n(r(3188)),k=n(r(3189));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,O.observer)((s=function(e){(0,p.default)(r,e);var a=A(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).versionOptionRender=function(a){var r=a.label,n=a.value;return C.default.createElement("span",{style:{display:"flex",alignItem:"center"}},r,"  ",n===e.latestVersion&&C.default.createElement(E.Tag,{type:"warning"},t("LATEST_VERSION_SCAP")))},e.fetchVersions=(0,i.default)(o.default.mark((function t(){var a,r,n,l,u,c=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:{},r=e.props,n=r.appId,l=r.versionStore,u=r.fromStore,t.abrupt("return",l.fetchList(P(P({},a),{},{app_id:n,status:u?"active":void 0})));case 3:case"end":return t.stop()}}),t)}))),e.handleVersionChange=function(t){e.props.fileStore.fetch({version_id:t})},e}return(0,d.default)(r,[{key:"renderStaticPlacement",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.workspace;return C.default.createElement("div",{className:N.default.placementWrapper},C.default.createElement("div",{className:N.default.placementContent},C.default.createElement(y.default,{title:(0,T.showNameAndAlias)(n,"workspace"),description:t("WORKSPACE")}),C.default.createElement(y.default,{title:(0,T.showNameAndAlias)(a,"cluster"),description:t("CLUSTER")}),C.default.createElement(y.default,{icon:"project",title:(0,T.showNameAndAlias)(r,"project"),description:t("PROJECT")})))}},{key:"render",value:function(){var e=this.props,a=e.formData,r=e.formRef,n=e.namespace,o=e.versionStore;return C.default.createElement("div",{className:N.default.wrapper},C.default.createElement(E.Form,{data:a,ref:r},C.default.createElement("div",{className:N.default.title},t("BASIC_INFORMATION")),C.default.createElement(E.Columns,null,C.default.createElement(E.Column,null,C.default.createElement(E.Form.Item,{label:t("NAME"),desc:t("CLUSTER_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:D.PATTERN_SERVICE_NAME,message:t("CLUSTER_NAME_DESC")}]},C.default.createElement(E.Input,{name:"name",maxLength:32}))),C.default.createElement(E.Column,null,C.default.createElement(E.Form.Item,{label:t("VERSION"),rules:[{required:!0,message:t("VERSION_EMPTY_DESC")}]},C.default.createElement(E.Select,{name:"version_id",options:this.sortedVersions,placeholder:" ",pagination:(0,S.default)(o.list,["page","limit","total"]),isLoading:o.list.isLoading,onFetch:this.fetchVersions,onChange:this.handleVersionChange,optionRenderer:this.versionOptionRender,valueRenderer:this.versionOptionRender})))),C.default.createElement(E.Columns,null,C.default.createElement(E.Column,null,C.default.createElement(E.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},C.default.createElement(E.TextArea,{name:"description",maxLength:256}))),C.default.createElement(E.Column,null)),C.default.createElement("br",null),C.default.createElement("div",{className:N.default.title},t("LOCATION")),C.default.createElement("div",{className:N.default.placement},n?this.renderStaticPlacement():C.default.createElement(E.Form.Item,{rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},C.default.createElement(k.default,(0,l.default)({name:"namespace"},this.props))))))}},{key:"sortedVersions",get:function(){var e=this.props.appId,t=g.RadonDBAppIds.includes(e);return this.props.versionStore.list.data.map((function(e){return{label:e.name,value:t?e.name:e.version_id}})).sort((function(e,t){return(0,R.compareVersion)(t.name,e.name)}))}},{key:"latestVersion",get:function(){return(0,b.default)(this.sortedVersions,"[0].value","")}}]),r}(C.default.Component),(0,h.default)(s.prototype,"sortedVersions",[_.computed],Object.getOwnPropertyDescriptor(s.prototype,"sortedVersions"),s.prototype),(0,h.default)(s.prototype,"latestVersion",[_.computed],Object.getOwnPropertyDescriptor(s.prototype,"latestVersion"),s.prototype),c=s))||c;a.default=w},,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(84),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var l=n(r(43));r(41);var o,u,c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=r(186),h=n(r(799)),E=n(r(26)),y=n(r(63)),g=n(r(74)),b=r(239),S=n(r(0)),_=n(r(960)),O=n(r(1640)),C=r(52),T=r(72),R=n(r(3260)),D=n(r(3262)),N=n(r(3264));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var I=(0,b.observer)((c=u=function(e){(0,d.default)(r,e);var a=k(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).handleChange=function(e){return function(t){var a=n.props.formTemplate;(0,g.default)(a,e,t),n.forceUpdate()}},n.removeCronError=function(){n.state.cronMessage&&n.setState({cronMessage:{}})},n.checkCronScript=function(){var e=(0,s.default)(l.default.mark((function e(a,r,o){var u,c,s,i,f,d,p,m,v;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.props,c=u.formTemplate,s=u.type,i=c.name,f=c.cluster,d=c.devops,p=r,e.next=5,n.scmStore.checkCronScript({devops:d,script:p,cluster:f,pipeline:"create"===s?void 0:i});case 5:if("error"!==(m=e.sent).result){e.next=10;break}return n.setState({cronMessage:{error:m.message}},(function(){})),o(m.message),e.abrupt("return");case 10:"ok"===m.result&&(v=t("PIPELINE_CRON_DESC",{nextTime:(0,C.getLocalTime)(m.nextTime).format("YYYY-MM-DD HH:mm:ss")}),n.setState({cronMessage:{message:v}}),o());case 11:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.handleScrollToBottom=function(){var e=n.props.formTemplate,t=e.devopsName,a=e.cluster,r=e.devops,l=n.pipelineStore.list,o=l.total,u=l.page;o<=l.limit*u||n.pipelineStore.fetchList({devopsName:t,cluster:a,devops:r,filter:"no-folders",page:u+1})},n.renderDisCarder=function(){var e=n.props.formTemplate,a=(0,E.default)(e,"multi_branch_pipeline");if(e.enable_discarder)return(0,y.default)(a)?S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Columns,null,S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("BUILD_RECORD_RETENTION_PERIOD_DAYS"),desc:t("BUILD_RECORD_RETENTION_PERIOD_DAYS_DESC"),rules:[{pattern:/^(?!0)\d+$/,message:t("BUILD_RECORD_RETENTION_PERIOD_DAYS_INVALID_TIP")}]},S.default.createElement(v.Input,{name:"".concat(n.prefix,".discarder.days_to_keep"),defaultValue:"7"}))),S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("MAXIMUM_BUILD_RECORDS"),desc:t("MAXIMUM_BUILD_RECORDS_DESC"),rules:[{pattern:/^(?!0)\d+$/,message:t("MAXIMUM_BUILD_RECORDS_INVALID_TIP")}]},S.default.createElement(v.Input,{name:"".concat(n.prefix,".discarder.num_to_keep"),defaultValue:"10"}))))):S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Columns,null,S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("BRANCH_RETENTION_PERIOD_DAYS"),desc:t("BRANCH_RETENTION_PERIOD_DAYS_DESC"),rules:[{pattern:/^(?!0)\d+$/,message:t("BUILD_RECORD_RETENTION_PERIOD_DAYS_INVALID_TIP")}]},S.default.createElement(v.Input,{name:"".concat(n.prefix,".discarder.days_to_keep"),defaultValue:"7"}))),S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("MAXIMUM_BRANCHES"),desc:t("MAXIMUM_BRANCHES_DESC"),rules:[{pattern:/^(?!0)\d+$/,message:t("MAXIMUM_BUILD_RECORDS_INVALID_TIP")}]},S.default.createElement(v.Input,{name:"".concat(n.prefix,".discarder.num_to_keep"),defaultValue:"5"})))))},n.scmStore=new O.default,n.pipelineStore=new _.default,n.state={cronMessage:{}},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.formTemplate,t=e.devopsName,a=e.cluster,r=e.devops;this.pipelineStore.fetchList({devopsName:t,devops:r,cluster:a,filter:"no-folders"})}},{key:"renderTip",value:function(e){return S.default.createElement(v.Tooltip,{content:e,placement:"right"},S.default.createElement(v.Icon,{name:"question",className:"margin-l12"}))}},{key:"renderNoSource",value:function(){var e=this.props.formTemplate,a=(0,E.default)(e,"enable_timer_trigger"),r=t.html("PIPELINE_SCHEDULE_DESC");return S.default.createElement("div",null,S.default.createElement(v.Form.Item,{desc:t("NO_CONCURRENT_BUILD_DESC")},S.default.createElement(v.Checkbox,{name:"".concat(this.prefix,".disable_concurrent"),checked:(0,E.default)(e,"".concat(this.prefix,".disable_concurrent")),onChange:this.handleChange("".concat(this.prefix,".disable_concurrent"))},t("NO_CONCURRENT_BUILDS"))),S.default.createElement("div",{className:"h6"},S.default.createElement(S.default.Fragment,null,t("BUILD_PARAMETERS"),this.renderTip(t("BUILD_PARAMETERS_TIP")))),S.default.createElement(D.default,{name:"".concat(this.prefix,".parameters"),formTemplate:this.props.formTemplate}),S.default.createElement("div",{className:"h6"},t("BUILD_TRIGGER")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{name:"enable_timer_trigger",checked:a,onChange:this.handleChange("enable_timer_trigger")},t("BUILD_PERIODICALLY"),this.renderTip(t("BUILD_PERIODICALLY_TIP")))),a&&S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Columns,null,S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("SCHEDULE"),desc:this.state.cronMessage.message||(0,C.learnMoreTip)(r),tip:t("tips_timer_trigger"),rules:[{validator:this.checkCronScript}]},S.default.createElement(v.Input,{name:"".concat(this.prefix,".timer_trigger.cron"),placeholder:" ",onChange:this.removeCronError}))))))}},{key:"renderGitOptions",value:function(){var e=this.props.formTemplate,a="".concat(this.scmPrefix,".git_clone_option.shallow"),r=(0,E.default)(e,a);return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"h6"},t("CLONE_SETTINGS")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{checked:r,name:a,onChange:this.handleChange(a)},t("ENABLE_SHALLOW_CLONE"))),r&&S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Columns,null,S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("CLONE_DEPTH")},S.default.createElement(h.default,{name:"".concat(this.scmPrefix,".git_clone_option.depth"),defaultValue:1}))),S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("CLONE_TIMEOUT_PERIOD")},S.default.createElement(h.default,{name:"".concat(this.scmPrefix,".git_clone_option.timeout"),defaultValue:20}))))),S.default.createElement("div",{className:"h6"},"Webhook"),S.default.createElement(v.Form.Item,{label:t("WEBHOOK_PUSH_URL"),desc:t("WEBHOOK_PUSH_DESC")},S.default.createElement("div",{className:"disabled-input"},this.webhookUrl)))}},{key:"renderRegFilter",value:function(){var e=this.props.formTemplate.enable_regex_filter;return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"h6"},t("FILTER_BY_REGEX")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{checked:e,name:"enable_regex_filter",onChange:this.handleChange("enable_regex_filter")},t("FILTER_BY_REGEX_DESC"))),e&&S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Form.Item,{label:t("REGEX")},S.default.createElement(v.Input,{name:"".concat(this.scmPrefix,".regex_filter"),defaultValue:".*"}))))}},{key:"renderWithSource",value:function(){var e=this.props.formTemplate,a=(0,E.default)(e,"multi_branch_pipeline.source_type",""),r=e.enable_timer_trigger,n=e.enable_multibranch_job_trigger,l=this.pipelineStore.list.isLoading,o=["git","github","bitbucket_server"].includes(a),u=["git","github","bitbucket_server","gitlab"].includes(a);return S.default.createElement("div",null,"git"!==a&&"svn"!==a?S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"h6"},t("STRATEGY_SETTINGS")),S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Form.Item,null,S.default.createElement(R.default,{sourceType:a,name:"multi_branch_pipeline.".concat(a,"_source")})))):null,u?this.renderRegFilter():null,S.default.createElement("div",{className:"h6"},t("SCRIPT_PATH")),S.default.createElement(v.Form.Item,{label:t("PATH"),desc:t("SCRIPT_PATH_DESC")},S.default.createElement(v.Input,{name:"".concat(this.prefix,".script_path"),defaultValue:"Jenkinsfile"})),S.default.createElement("div",{className:"h6"},t("SCAN_TRIGGER")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{checked:r,name:"enable_timer_trigger",onChange:this.handleChange("enable_timer_trigger")},t("SCAN_PERIODICALLY"),this.renderTip(t("TIME_TRIGGER_DESC")))),r&&S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Form.Item,{label:t("SCAN_INTERVAL")},S.default.createElement(v.Select,{name:"".concat(this.prefix,".timer_trigger.interval"),options:T.TIMETRIGGERINTERVALS,defaultValue:"svn"===a||"single_svn"===a?"600000":"3600000"}))),S.default.createElement("div",{className:"h6"},t("BUILD_TRIGGER")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{checked:n,name:"enable_multibranch_job_trigger",onChange:this.handleChange("enable_multibranch_job_trigger")},t("PIPELINE_EVENT_TRIGGER"))),n&&S.default.createElement("div",{className:N.default.wrapper},S.default.createElement(v.Columns,null,S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("WHEN_CREATE_PIPELINE"),desc:t("WHEN_CREATE_PIPELINE_DESC")},S.default.createElement(v.Select,{name:"".concat(this.prefix,".multibranch_job_trigger.create_action_job_to_trigger"),isLoading:l,isLoadingAtBottom:!0,onMenuScrollToBottom:this.handleScrollToBottom,options:this.pipelineLists,placeholder:t("SELECT_PIPELINE_SCAP")}))),S.default.createElement(v.Column,null,S.default.createElement(v.Form.Item,{label:t("WHEN_DELETE_PIPELINE"),desc:t("WHEN_DELETE_PIPELINE_DESC")},S.default.createElement(v.Select,{name:"".concat(this.prefix,".multibranch_job_trigger.delete_action_job_to_trigger"),isLoading:l,isLoadingAtBottom:!0,onMenuScrollToBottom:this.handleScrollToBottom,options:this.pipelineLists,placeholder:t("SELECT_PIPELINE_SCAP")}))))),o?this.renderGitOptions():null)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=(0,E.default)(r,"multi_branch_pipeline");return S.default.createElement("div",{className:N.default.advance},S.default.createElement(v.Form,{data:r,ref:a},S.default.createElement("div",{className:"h6"},(0,y.default)(n)?t("BUILD_SETTINGS"):t("BRANCH_SETTINGS")),S.default.createElement(v.Form.Item,null,S.default.createElement(v.Checkbox,{checked:r.enable_discarder,name:"enable_discarder",onChange:this.handleChange("enable_discarder")},(0,y.default)(n)?t("DELETE_OUTDATED_BUILD_RECORDS"):t("DELETE_OUTDATED_BRANCHES"),this.renderTip((0,y.default)(n)?t("DELETE_OUTDATED_BUILD_RECORDS_TIP"):t("DELETE_OUTDATED_BRANCHES_TIP")))),this.renderDisCarder(),(0,y.default)(n)?this.renderNoSource():this.renderWithSource()))}},{key:"sourceType",get:function(){var e=this.props.formTemplate;return(0,E.default)(e,"multi_branch_pipeline.source_type","")}},{key:"prefix",get:function(){return this.sourceType?"multi_branch_pipeline":"pipeline"}},{key:"scmPrefix",get:function(){return"multi_branch_pipeline.".concat(T.REPO_KEY_MAP[this.sourceType])}},{key:"webhookUrl",get:function(){var e=this.props.formTemplate,t=(0,E.default)(e,"".concat(this.scmPrefix,".url"),""),a=(0,E.default)(e,"".concat(this.scmPrefix,".api_uri"),""),r=(0,E.default)(e,"".concat(this.scmPrefix,".owner"),""),n=(0,E.default)(e,"".concat(this.scmPrefix,".repo"),""),l="".concat(a,"/scm/").concat(r,"/").concat(n,".git");switch(this.sourceType){case"bitbucket_server":return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/git/?url=").concat(l);case"github":return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/").concat(this.sourceType,"/");default:return"".concat(window.location.protocol,"//").concat(window.location.host,"/devops_webhook/git/?url=").concat(t)}}},{key:"pipelineLists",get:function(){return this.pipelineStore.list.data.map((function(e){return{label:e.name,value:e.fullName}}))}}]),r}(S.default.Component),u.defaultProps={type:"create"},o=c))||o;a.default=I},function(e,t,a){e.exports={wrapper:"_9Yk0qNR2FCG_MPOHVb5JL",header:"_2yTyFqoCxQzx3hRKBg6rRu",content:"T-SCFAAauUJ-x1ldEYntT",itemWrapper:"_1_HVr5DcfYh3ao-5xi6WZV",itemTitle:"_17CzlSkNwriw1ibCqf5Bty",delete:"_26CIQvJti4RrsEj55MYDZc"}},function(e,t,a){e.exports={wrapper:"_28_VGcUL3ubpH0qmzQAKfV",header:"_3-qLqDcljl_m43YCxIxJZ3",content:"_12apY-AeTVbwQd6ffG8WxD",itemWrapper:"_1LRPWkPDcmmt4VdZRlrFLS",itemTitle:"_1LBhdFwEbnrlSDmT97sxs-",delete:"_5TmTBPrXcOuz8pGbj7JH2"}},,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.option;function r(){var e;return l.default.createElement(o.Form.Item,{label:a.name,desc:a.description,rules:[{required:null!==(e=a.required)&&void 0!==e&&e,message:t("PARAM_REQUIRED")}]},l.default.createElement(o.Input,{name:"paramsForm.".concat(a.name),defaultValue:a.default||""}))}return l.default.createElement("div",{className:u.default.itemWrapper},function(e){var t=null;switch(e){case"string":t=r();break;case"bool":t=l.default.createElement(o.Form.Item,{label:a.name},l.default.createElement(o.RadioGroup,{name:"paramsForm.".concat(a.name),defaultValue:a.default||!1},l.default.createElement(o.Radio,{value:!0},"True"),l.default.createElement(o.Radio,{value:!1},"False")));break;default:t=r()}return t}(a.type))},r(12),r(109),r(16);var l=n(r(0)),o=r(186),u=n(r(1386))},,,function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(315)),o=n(a(96)),u=n(a(58)),c=r(a(0)),s=n(a(1040)),i=n(a(1304)),f=function(e){return(0,s.default)(e)?e:""},d=function(e){var t=e.onChange,a=e.value,r=(0,u.default)(e,["onChange","value"]),n=(0,c.useState)(f(a)),s=(0,o.default)(n,2),d=s[0],p=s[1];(0,c.useEffect)((function(){p(f(a))}),[a]);return c.default.createElement(i.default,(0,l.default)({},r,{value:d,onChange:function(e){p(e),t(e)}}))};t.default=d},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(87),r(27),r(1201),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(87),r(42),r(1201),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(837)),p=n(r(1040)),m=r(186),v=n(r(3346));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).triggerChange=function(e){var a=e.right,r=t.props,n=r.marks;(0,r.onChange)(t.getValueFromPercent(n,a))},t.handleResize=function(){t.rect=t.ref.current.getBoundingClientRect()},t.handleMouseDown=function(e){if(document.addEventListener("mouseup",t.handleMouseUp),"slider"===e.target.getAttribute("role"))document.addEventListener("mousemove",t.handleMouseMove),t.type=e.target.dataset.type;else if(t.ref.current.contains(e.target)){var a=(e.x-t.rect.x)/t.rect.width*100;a>t.endPercent&&(a=100),t.triggerChange({right:a})}},t.handleMouseMove=function(e){var a=100*(e.x-t.rect.x)/t.rect.width;return a>t.endPercent&&(a=100),a<0&&(a=0),t.triggerChange({right:a})},t.handleMouseUp=function(){document.removeEventListener("mousemove",t.handleMouseMove)},t.totalWeight=e.marks.reduce((function(e,t){return e+(t.weight||1)}),0)-1,t.endPercent=100*t.totalWeight/(t.totalWeight+1),t.state=t.getStateFromProps(e),t.ref=i.default.createRef(),t}return(0,o.default)(r,[{key:"getValuePercent",value:function(e,t){for(var a=0,r=0;r<e.length-1;r++){var n=e[r].weight||1;if(t>=e[r+1].value)a+=n/this.totalWeight;else if(t>=e[r].value&&t<e[r+1].value){a+=n*((t-e[r].value)/(e[r+1].value-e[r].value))/this.totalWeight}}return a}},{key:"getValueFromPercent",value:function(e,t){for(var a=this.props.valueFormatter,r=this.totalWeight*t/100,n=0,l=0,o=0;o<e.length-1;o++){var u=e[o].weight||1;if((l+=u)>=r&&l<u+r){var c=(r+u-l)/u;n=(e[o+1].value-e[o].value)*c+e[o].value}}return a?Number.parseInt(a(n),10):Number.parseInt(n,10)}},{key:"getStateFromProps",value:function(e){var t=e.marks,a=e.value;return{right:100*this.getValuePercent(t,a)}}},{key:"componentDidUpdate",value:function(e){if(!(0,d.default)(e.value,this.props.value)){var t=this.getStateFromProps(this.props).right;this.setState({right:t})}}},{key:"componentDidMount",value:function(){this.ref&&this.ref.current&&(this.ref.current.addEventListener("mousedown",this.handleMouseDown),this.rect=this.ref.current.getBoundingClientRect(),window.addEventListener("resize",this.handleResize))}},{key:"componentWillUnmount",value:function(){this.ref&&this.ref.current&&(this.ref.current.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("resize",this.handleResize))}},{key:"render",value:function(){var e=this,a=this.state.right,r=this.props,n=r.value,l=r.unit,o=r.marks,u=0;return i.default.createElement("div",{className:v.default.slider,ref:this.ref},i.default.createElement("div",{className:v.default.rail}),i.default.createElement("div",{className:v.default.track,role:"track",style:{left:"0%",width:"".concat(a,"%")}}),i.default.createElement(m.Tooltip,{content:i.default.createElement("span",null,(0,p.default)(n)?"".concat(n," ").concat(l):t("NO_LIMIT"))},i.default.createElement("div",{className:v.default.handler,role:"slider","data-type":"right",style:{left:"calc(".concat(a,"% - 10px)")}})),i.default.createElement("div",{className:v.default.mark},o.map((function(t){var a=t.weight||1,r=100*((u+=a)-a)/e.totalWeight;return i.default.createElement("span",{key:t.value,style:{left:"".concat(r,"%")}},t.label)}))))}}]),r}(i.default.Component);a.default=E,E.propTypes={marks:f.default.array,value:f.default.number,defaultValue:f.default.array,unit:f.default.string,onChange:f.default.func,valueFormatter:f.default.func},E.defaultProps={marks:[],value:0,unit:"",onChange:function(){}}},function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(87),a(16),a(98),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.FEDERATED_PROJECT_UNSOPPORT_QUOTA=t.QUOTAS_KEY_MODULE_MAP=t.RESERVED_MODULES=void 0;var n=r(a(30));a(12),a(11),a(6),a(28),a(87),a(16),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(7);var l=a(72);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.RESERVED_MODULES=["limits.cpu","requests.cpu","limits.memory","requests.memory"];var c=Object.entries(l.QUOTAS_MAP).reduce((function(e,t){return u(u({},e),{},(0,n.default)({},t[1].name,t[0]))}),{});t.QUOTAS_KEY_MODULE_MAP=c;t.FEDERATED_PROJECT_UNSOPPORT_QUOTA=["daemonsets","jobs","cronjobs"]},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(84),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var l,o,u,c=n(r(30)),s=n(r(61)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(26)),h=n(r(321)),E=n(r(855)),y=n(r(446)),g=n(r(247)),b=n(r(0)),S=n(r(3)),_=r(239),O=n(r(1)),C=n(r(787)),T=n(r(790)),R=n(r(839)),D=r(52),N=n(r(3367)),k=r(3368),I=n(r(1744));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var M=(0,_.observer)((u=o=function(e){(0,d.default)(r,e);var a=w(r);function r(e){var t,n,l;(0,i.default)(this,r),(l=a.call(this,e)).handleOk=function(){var e=l.props.basicRoleTemplates,t=e?e.map((function(e){return e.name})):[];l.props.onOk((0,g.default)([].concat((0,s.default)(l.state.roleTemplates),(0,s.default)(t))))},l.handleTabChange=function(e){var t=e.currentTarget.dataset.module;l.setState({currentModule:t})},l.handleCheckChange=function(e){var t=l.state,a=t.currentModule,r=t.roleModules,n=t.groupedTemplates,o=r.find((function(e){return e.name===a}));o&&(o.state=n[a].some((function(t){return e.includes(t.name)}))?"ENABLED":"NOT_ENABLED"),l.setState({roleTemplates:e})};var o=(0,h.default)(l.props.roleTemplates,"name"),u=(0,v.default)(l.props.formTemplate,"aggregationRoleTemplates.templateNames",[]),c=(0,E.default)(l.props.roleTemplates,'labels["iam.kubesphere.io/category"]'),f=null===(t=l.props.roleModules)||void 0===t||null===(n=t.map((function(e){return A(A({},e),{},{icon:k.ROLE_MODULES_ICON[e.name]||"templet",state:u.some((function(t){return(0,v.default)(o[t],'labels["iam.kubesphere.io/category"]')===e.name}))?"ENABLED":"NOT_ENABLED"})})))||void 0===n?void 0:n.filter((function(t){if(e.isEdge)return!["DevOps Management","Apps Management"].includes(t.name);var a=c[t.name];return a&&a.length>0}));return l.state={roleTemplates:u,roleModules:f,roleTemplatesMap:o,currentModule:f&&f.length>0?f[0].name:"",groupedTemplates:c},l}return(0,f.default)(r,[{key:"renderTabs",value:function(){var e=this,a=this.state,r=a.roleModules,n=void 0===r?[]:r,l=a.currentModule,o=(0,v.default)(globals.user,"lang")||(0,D.getBrowserLang)();return b.default.createElement("div",{className:I.default.tabs},b.default.createElement("div",{className:I.default.title},t("CATEGORIES")),b.default.createElement("div",{className:I.default.tabsWrapper},n.map((function(a){return b.default.createElement("div",{key:a.name,className:(0,S.default)(I.default.tab,(0,c.default)({},I.default.enabled,l===a.name)),onClick:e.handleTabChange,"data-module":a.name},b.default.createElement(T.default,{icon:a.icon,title:a.displayName[o]||a.displayName.en,description:l===a.name?t("CURRENT"):"ENABLED"===a.state?t("AUTHORIZED"):t("UNAUTHORIZED")}),b.default.createElement(R.default,{className:I.default.indicator,type:"ENABLED"===a.state?"running":"disabled"}))}))))}},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.groupedTemplates,n=a.roleTemplates,l=a.roleTemplatesMap,o=a.currentModule,u=(0,y.default)(r[o]||[],"name");return b.default.createElement("div",{className:I.default.content},b.default.createElement("div",{className:I.default.title},t("PERMISSION_PL")),b.default.createElement("div",{className:I.default.contentWrapper},u.map((function(t){return b.default.createElement(N.default,{key:t.name,data:t,roleTemplates:n,roleTemplatesMap:l,onChange:e.handleCheckChange})}))))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.isSubmitting;return b.default.createElement(C.default,{title:a||t("EDIT_PERMISSIONS"),icon:"role",onCancel:n,onOk:this.handleOk,visible:r,isSubmitting:l,fullScreen:!0},b.default.createElement("div",{className:I.default.wrapper},this.renderTabs(),this.renderContent()))}}]),r}(b.default.Component),o.propTypes={roleTemplates:O.default.array,formTemplate:O.default.object,visible:O.default.bool,onOk:O.default.func,onCancel:O.default.func,isSubmitting:O.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=M},function(e,t,a){e.exports={wrapper:"_1zXt7JS-5wTeq2O3Yyq-JL",title:"_2R6_3gQaWfGc-54ApbjvK6",tabs:"_1sRMn6-7VQwsP-i502ZCQI",tabsWrapper:"_13UODiQ-dkFqD1c7buDIbo",tab:"_13nyoRlsA_NwzkmCiVg_cF",enabled:"_1l3zLl936dTPcn3AIOkq-x",indicator:"_1DujT8XDf3EuRJJ2LydBom",content:"_1tK-XesSh-xcD5WpN9xJnR",contentWrapper:"_29j0loE5wpYw0YS-LWiFTg",checkItem:"_3rhvJqZScieMGWwx8WyyK4",extra:"_1lZdigIdMb29HKGS7xLlDe",tag:"LujNwnnNKKpJOW-0bi7Yj"}},,,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(97),r(16),r(98),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(28),r(97),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(96)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(26)),p=n(r(74)),m=n(r(158)),v=n(r(242)),h=n(r(0)),E=r(186),y=r(52),g=r(72),b=n(r(3381)),S=n(r(3383)),_=n(r(3385)),O=n(r(3386));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var D=["Opaque","kubernetes.io/tls","kubernetes.io/dockerconfigjson","kubernetes.io/basic-auth"],N=function(e){(0,s.default)(r,e);var a=R(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={type:(0,d.default)(e.fedFormTemplate,"type",""),state:"",selectDataKey:"",isSkipVerify:"true"===(0,d.default)(e.formTemplate,'metadata.annotations["secret.kubesphere.io/force-insecure"]',"false")},e.imageRegistryRef=h.default.createRef(),e.getTypeOptions=function(){return[{label:t("DEFAULT"),value:"Opaque"},{label:t("TLS_INFORMATION"),value:"kubernetes.io/tls"},{label:t("IMAGE_REGISTRY_INFORMATION"),value:"kubernetes.io/dockerconfigjson"},{label:t("USERNAME_PASSWORD"),value:"kubernetes.io/basic-auth"}]},e.handleTypeChange=function(t){t&&!D.includes(t)||(0,p.default)(e.fedFormTemplate,"data",{});"kubernetes.io/dockerconfigjson"===t?((0,p.default)(e.fedFormTemplate,"metadata.annotations['secret.kubesphere.io/force-insecure']","true"),e.setState({isSkipVerify:!0})):(e.setState({isSkipVerify:!1}),(0,v.default)(e.fedFormTemplate,"metadata.annotations['secret.kubesphere.io/force-insecure']")),e.setState({type:t})},e.dataValidator=function(e,a,r){return(0,m.default)(a)?r():Object.entries(a).some((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return(0,y.hasChinese)(a)||(0,y.hasChinese)(r)}))?r({message:t("SECRET_NO_CHINESE_CODE_DESC")}):void r()},e.imageValidator=function(t,a,r){if(e.imageRegistryRef.current.validate())return r()},e.handleData=function(t){var a=e.state.selectDataKey,r=(0,d.default)(e.fedFormTemplate,"data",{});a&&delete r[a],(0,p.default)(e.fedFormTemplate,"data",T(T({},r),t)),e.hideDataForm()},e.showDataForm=function(){e.setState({state:"data",selectDataKey:""})},e.hideDataForm=function(){e.setState({state:"",selectDataKey:""})},e.handleDataItemEdit=function(t){e.setState({state:"data",selectDataKey:t})},e.handleChangeSkipVerify=function(t){(0,p.default)(e.fedFormTemplate,'metadata.annotations["secret.kubesphere.io/force-insecure"]',t?"true":"false"),e.setState({isSkipVerify:t})},e}return(0,c.default)(r,[{key:"renderDataForm",value:function(){var e=this.state.selectDataKey,t=(0,d.default)(this.fedFormTemplate,"data",{});return h.default.createElement(S.default,{detail:t,selectKey:e,onOk:this.handleData,onCancel:this.hideDataForm})}},{key:"renderDefault",value:function(){return h.default.createElement(E.Form.Item,{label:t("DATA"),rules:[{required:!0,message:t("ENTER_DATA_DESC")},{validator:this.dataValidator}]},h.default.createElement(b.default,{name:"data",onEdit:this.handleDataItemEdit,onAdd:this.showDataForm}))}},{key:"renderTLS",value:function(){return h.default.createElement("div",{key:"tls",className:"margin-t8"},h.default.createElement(E.Form.Item,{label:t("CERTIFICATE"),rules:[{required:!0,message:t("CREDENTIAL_NAME_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data['tls.crt']"},h.default.createElement(E.TextArea,{rows:"6",resize:!0}))),h.default.createElement(E.Form.Item,{label:t("PRIVATE_KEY_TCAP"),rules:[{required:!0,message:t("ENTER_PRIVATE_KEY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data['tls.key']"},h.default.createElement(E.TextArea,{rows:"6",resize:!0}))))}},{key:"renderImage",value:function(){var e=this,t=this.props,a=t.cluster,r=t.isFederated,n=t.isEdgeWize,l=(0,d.default)(this.formTemplate,"metadata"),o=l.name,u=l.namespace;return h.default.createElement("div",{key:"image",className:"margin-t8"},h.default.createElement(E.Form.Item,{rules:[{validator:this.imageValidator}]},h.default.createElement(_.default,{name:"data['.dockerconfigjson']"},h.default.createElement(O.default,{fedFormTemplate:this.fedFormTemplate,cluster:a,isDefault:this.isDefault,onChangeDefault:function(t){return(0,p.default)(e.fedFormTemplate,'metadata.annotations["secret.kubesphere.io/is-default-class"]',t?"true":"false")},onChangeState:function(t){e.setState({changeData:t})},isSkipVerify:this.state.isSkipVerify,onChangeSkipVerify:this.handleChangeSkipVerify,isEdgeWize:n,namespace:u,isFederated:r,screatName:o,ref:this.imageRegistryRef}))),h.default.createElement(E.Form.Item,null,this.renderDefault()))}},{key:"renderBasicAuth",value:function(){return h.default.createElement("div",{key:"basic",className:"margin-t8"},h.default.createElement(E.Form.Item,{label:t("USERNAME"),rules:[{required:!0,message:t("USERNAME_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data.username"},h.default.createElement(E.Input,{autoComplete:"nope"}))),h.default.createElement(E.Form.Item,{label:t("PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{validator:this.dataValidator}]},h.default.createElement(_.default,{name:"data.password"},h.default.createElement(E.InputPassword,{type:"password",autoComplete:"new-password"}))))}},{key:"renderContent",value:function(){var e=null;switch(this.state.type){case"Opaque":e=this.renderDefault();break;case"kubernetes.io/tls":e=this.renderTLS();break;case"kubernetes.io/dockerconfigjson":e=this.renderImage();break;case"kubernetes.io/basic-auth":e=this.renderBasicAuth();break;default:e=this.renderDefault()}return e}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.disableSelect;return"data"===this.state.state?this.renderDataForm():h.default.createElement(E.Form,{data:this.fedFormTemplate,ref:a},h.default.createElement(E.Form.Item,{label:t("TYPE"),desc:r?"":t("SECRET_TYPE_DESC")},h.default.createElement(E.Select,{name:"type",options:this.getTypeOptions(),onChange:this.handleTypeChange,placeholder:" ",disabled:r,searchable:!1})),this.renderContent())}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,g.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"isDefault",get:function(){return"true"===(0,d.default)(this.formTemplate,'metadata.annotations["secret.kubesphere.io/is-default-class"]',"false")}}]),r}(h.default.Component);a.default=N},function(e,t,a){e.exports={wrapper:"_3q9ZPljm8JK-39rDuXZgdr",label:"_2PJR1P70-qnZ16hFmDUchO",control:"E8wY6oMs417J6WSOmAX2U",desc:"Ds9TCkSEvwwDt_0FrmqoE",requiredIcon:"_2Qu1AVZafJ8A1J4T7WmNMt",tip:"_2PrZvRpUWImjuzMe8HfkOE",password:"_3M7PW0eiW35GKVm_PzsTGI",defaultContainer:"_27a4IDiJ2eA4Wodlaf-kXo",title:"_2dxoduAZQV0i1cswbu5FSg",disc:"_5Jn-MRyPjp-UN9PVyq27G",skip_verify:"_3i5x-DxzaVvWrOZ4Vch20L"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(97),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(97),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=n(r(74)),p=r(186),m=n(r(799)),v=n(r(829)),h=r(72),E=n(r(3412));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).itemValidator=function(e,a,r){return a?a.some((function(e){return!e}))?r({message:t("EMPTY_KEY")}):void r():r()},e.handleOk=function(){var t=e.props,a=t.onOk,r=t.formTemplate;e.form.current.validator((function(){var e=(0,f.default)(r,"metadata.name");(0,d.default)(r,"spec.routes[0].id",e),a(r)}))},e.nameValidator=function(a,r,n){if(!r||e.props.isEditMode)return n();e.props.store.checkName({name:r,namespace:e.props.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.detail;return i.default.createElement(p.Form,{ref:a,data:r},i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:h.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")},{validator:this.nameValidator}]},i.default.createElement(p.Input,{name:"metadata.name",autoFocus:!0,maxLength:63,disabled:!!n}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("GATEWAY")},i.default.createElement(p.Input,{disabled:!0,name:"spec.gateway"})))),i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("MICROSERVICE_ORDER"),desc:t("MICROSERVICE_ORDER_DESC")},i.default.createElement(m.default,{name:"spec.routes[0].order",integer:!0,min:0}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("URL"),desc:t("MICROSERVICE_ROUTE_URL_DESC")},i.default.createElement(p.Input,{name:"spec.routes[0].uri"})))),i.default.createElement(p.Form.Item,{label:t("PREDICATE"),rules:[{validator:this.itemValidator,checkOnSubmit:!0}]},i.default.createElement(v.default,{name:"spec.routes[0].predicates",addText:t("ADD")},i.default.createElement(E.default,{options:h.SERVICE_ROUTING_PREDICATES}))),i.default.createElement(p.Form.Item,{label:t("MICROSERVICE_ROUTE_FILTER"),rules:[{validator:this.itemValidator,checkOnSubmit:!0}]},i.default.createElement(v.default,{name:"spec.routes[0].filters",addText:t("ADD")},i.default.createElement(E.default,{options:h.SERVICE_ROUTING_FILTERS}))))}}]),r}(i.default.Component);a.default=g},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(6),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(23),r(57),r(17),r(7);var o,u=n(r(61)),c=n(r(30)),s=n(r(96)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=l(r(0)),h=r(239),E=n(r(857)),y=n(r(74)),g=r(186),b=r(72),S=r(479),_=n(r(3417)),O=n(r(3418)),C=n(r(3420)),T=n(r(1372));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=[{label:t("SILENCE_EVERY_DAY"),value:1},{label:t("SILENCE_EVERY_WEEK"),value:2},{label:t("SILENCE_EVERY_MONTH"),value:3}],I={hour:void 0,minute:Boolean,second:Boolean},P={hour:void 0,minute:function(e){return e<59},second:function(e){return e<59}},A=(0,h.observer)(o=function(e){(0,d.default)(r,e);var a=N(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).types=Object.values(b.silentPolicyTypes).map((function(e){return{label:t(e.name),value:e.value}})),e.validateCron=function(e,a,r){if(!a)return r();try{(0,S.parseExpression)(a)}catch(e){return r(t("CRON_EXPRESSION_ERROR_DESC"))}r()},e.renderCron=function(){return v.createElement(g.Form.Item,{label:t("CRON_EXPRESSION"),desc:t("CRON_EXPRESSION_DESC"),rules:[{validator:e.validateCron},{required:!0,message:t("CRON_EXPRESSION_REQUIRE_DESC")}]},v.createElement(g.Input,{name:"cron"}))},e.validateDateRange=function(e){return function(a,r,n){var l=(0,s.default)(r,2),o=l[0],u=l[1];return(0,E.default)(o)||(0,E.default)(u)?n(t("SILENCE_TIME_RANGE_EMPTY_DESC")):(e?new Date(o).getTime()>=new Date(u).getTime():o>=u)?n(t("TIMERANGE_SELECTOR_MSG")):n()}},e.renderSpecific=function(){return v.createElement(g.Form.Item,{label:t("TIME_RANGE"),desc:t("SELECT_START_TIME_AND_END_TIME"),rules:[{required:!0,message:t("SILENCE_TIME_RANGE_EMPTY_DESC")},{validator:e.validateDateRange(!0)}]},v.createElement(C.default,{type:"date",name:"dateRange"}))},e.renderSilentTime=function(){return v.createElement(g.Form.Item,{label:t("TIME_RANGE"),desc:t("SELECT_START_TIME_AND_END_TIME"),rules:[{required:!0,message:t("SILENCE_TIME_RANGE_EMPTY_DESC")},{validator:e.validateDateRange(!1)}]},v.createElement(C.default,{type:"time",name:"timeRange",disabled:[I,P],minuteStep:59,secondStep:59}))},e.renderDays=function(e){return v.createElement(g.Form.Item,{rules:[{required:!0,message:t("SELECT_DATE")}]},v.createElement(O.default,e))},e.renderWeek=function(){var t,a=e.props.formTemplate;return e.renderDays({name:"week",type:"week",defaultValue:null!==(t=a.week)&&void 0!==t?t:[],multi:!0})},e.renderMonth=function(){var t,a=e.props.formTemplate;return e.renderDays({name:"month",type:"month",defaultValue:null!==(t=a.month)&&void 0!==t?t:[],multi:!0})},e.renderSilentPeriod=function(){return v.createElement(g.Form.Item,{label:t("SILENCE_DATE")},v.createElement(g.Select,{name:"timeType",options:k,defaultValue:e.props.formTemplate.timeType,onChange:function(t){e.handleChange(D({timeType:t},{week:[],month:[]}))}}))},e.renderPeriodic=function(){var t=e.props.formTemplate.timeType;return v.createElement(v.Fragment,null,e.renderSilentPeriod(),2===t&&e.renderWeek(),3===t&&e.renderMonth(),e.renderSilentTime())},e.handleChange=function(t){Object.entries(t).forEach((function(t){y.default.apply(void 0,[e.props.formTemplate].concat((0,u.default)(t)))})),e.forceUpdate()},e.renderSilent=function(){var a=e.props.formTemplate.type;return v.createElement(v.Fragment,null,v.createElement(g.Form.Item,{label:t("TYPE"),desc:t("SILENCE_TIME_TYPE_DESC")},v.createElement(g.Select,{name:"type",options:e.unCustomTypes,defaultValue:a,onChange:function(t){e.handleChange({type:t,duration:null})}})),2===a&&e.renderSpecific(),3===a&&e.renderPeriodic())},e}return(0,f.default)(r,[{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formTemplate;return v.createElement("div",null,a.isDefaultCron&&v.createElement(T.default,this.tabs),v.createElement("div",{className:_.default.formContainer},v.createElement("div",null,a.isCron?v.createElement(g.Form,{key:a.isCron.toString(),ref:t,data:a},this.renderCron()):v.createElement(g.Form,{ref:t,data:a},this.renderSilent()))))}},{key:"unCustomTypes",get:function(){return this.types.filter((function(e){return 4!==e.value}))}},{key:"tabs",get:function(){var e=this;return{value:this.props.formTemplate.isCron,onChange:function(t){return e.handleChange({isCron:t})},options:[{value:!1,label:t("SILENT_TEMPLATE")},{value:!0,label:t("SILENT_CRON")}]}}}]),r}(v.Component))||o;a.default=A},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=r(186),d=n(r(0)),p=r(72);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=m(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).nameValidator=function(a,r,n){if(!r||e.props.isEdit)return n();e.props.store.checkName({name:r,namespace:e.props.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.isEdit,l=void 0!==n&&n;return d.createElement(f.Form,{ref:a,data:r},d.createElement(f.Columns,null,d.createElement(f.Column,null,d.createElement(f.Form.Item,{label:t("NAME"),desc:t("PROJECT_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:p.PATTERN_SERVICE_NAME,message:t("PROJECT_NAME_INVALID_DESC")},{validator:this.nameValidator}]},d.createElement(f.Input,{name:"name",autoFocus:!0,maxLength:63,disabled:l}))),d.createElement(f.Column,null,d.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:p.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},d.createElement(f.Input,{name:"aliasName",maxLength:63})))),d.createElement(f.Columns,null,d.createElement(f.Column,null,d.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},d.createElement(f.TextArea,{name:"desc",maxLength:256}))),d.createElement(f.Column,null)))}}]),r}(d.Component);a.default=v},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(84),r(29),r(97),r(4),r(23),r(17),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(29),r(97),r(42),r(4),r(23),r(57),r(17),r(32);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(74)),m=r(903),v=r(1193),h=l(r(1377)),E=l(r(3424));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=[{label:t("ALL_SILENT_NOTIFICATIONS_TCAP"),description:t("ALL_SILENT_NOTIFICATIONS_DESC"),icon:"timed-task",value:1},{label:t("CUSTOM_SILENT_NOTIFICATIONS_TCAP"),description:t("CUSTOM_SILENT_NOTIFICATIONS_DESC"),icon:"timed-task",value:2}],b=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleChange=function(t){var a=e.props.formTemplate;(0,p.default)(a,"condition",t),1===t?(0,p.default)(a,"matchExpressions",[]):(0,p.default)(a,"matchExpressions",[{}]),e.forceUpdate()},e.checkItemValid=function(e){var t=e.key&&e.operator;return t&&["In","NotIn"].includes(e.operator)&&(t=t&&e.values.length>0),"Match"===e.operator&&(t=t&&e.regexValue),t},e.itemValidator=function(a,r,n){return r?r.some((function(t){return!e.checkItemValid(t)}))?n({message:t("INVALID_SILENCE_CONDITION")}):void n():n()},e}return(0,u.default)(r,[{key:"renderControlAnnotation",value:function(){return f.createElement("div",{className:E.default.annotation},f.createElement(d.Icon,{name:"question"}),f.createElement("p",{className:E.default.desc},t.html("NOTIFICATION_CONDITION_SETTING_TIP")))}},{key:"renderControlSetting",value:function(){return f.createElement("div",{className:E.default.conditionContainer},f.createElement(d.Form.Item,{rules:[{validator:this.itemValidator,checkOnSubmit:!0}]},f.createElement(v.ArrayInput,{name:"matchExpressions",itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid,desc:this.renderControlAnnotation()},f.createElement(h.default,null))))}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formTemplate;return f.createElement(d.Form,{ref:t,data:a},f.createElement(d.Form.Item,null,f.createElement(m.TypeSelect,{name:"condition",defaultValue:1,options:g,onChange:this.handleChange})),2===a.condition&&this.renderControlSetting())}}]),r}(f.Component);a.default=b},,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(73),r(18),r(87),r(48),r(98),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(111),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(96)),o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51));r(12),r(45),r(5),r(11),r(6),r(73),r(18),r(28),r(87),r(48),r(191),r(42),r(159),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(319),r(23),r(57),r(24),r(193),r(17),r(111),r(7);var d,p,m,v=n(r(0)),h=n(r(1)),E=r(186),y=n(r(787)),g=n(r(790)),b=n(r(850)),S=n(r(799)),_=r(239),O=n(r(26)),C=n(r(1753)),T=n(r(1084)),R=n(r(74)),D=n(r(972)),N=n(r(447)),k=n(r(3429)),I=n(r(3431)),P=n(r(3433));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var L=function(e,t,a,r){return(0,O.default)(e.formData,"metadata.annotations['".concat(t,".kubesphere.io/").concat(a,"']"),r)},j=1e4,x=0,U="Gi",F=(0,_.observer)((m=p=function(e){(0,s.default)(r,e);var a=M(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).enable=function(){var e=n.state.resize;n.setState({resize:w(w({},e),{},{enabled:!e.enabled})})},n.NumberEndDot=function(e){var t,a=null!==(t=/^[0-9]+(\.[0-9]{0,})?/g.exec(e))&&void 0!==t?t:[];return(0,N.default)(a[0],".")?e.split(".").join(""):e},n.handleOk=function(){n.formRef.current.validate((function(){var e=n.state,t=e.resize,a=e.restart,r={resize:t,restart:a},o=Object.entries(r).map((function(e){var t=(0,l.default)(e,2),a=t[0],r=t[1],o={};return Object.entries(r).forEach((function(e){var t=(0,l.default)(e,2),r=t[0],u=t[1],c=(0,C.default)(u)?JSON.stringify(u):n.NumberEndDot(u);(0,R.default)(o,"annotations['".concat(a,".kubesphere.io/").concat(r,"']"),c)})),o.annotations}));n.props.onOk(w(w(w({},o[0]),o[1]),{},{"restart.kubesphere.io/online-expansion-support":"".concat(!a.enabled)}))}))},n.handleLimitChange=function(e){var t=n.state.resize,a=U,r=/^[0-9]+(\.[0-9]{0,})?/g.test(e)?"".concat((0,D.default)(e)).concat(a):"10000Gi";n.setState({resize:w(w({},t),{},{"storage-limit":r}),fakeLimit:e})},n.handleThreshold=function(e){var t=n.state.resize,a="%"===e?"10%":e;n.setState({resize:w(w({},t),{},{threshold:a}),fakeThreshold:e})},n.handleIncrease=function(e){var t=n.state.resize,a="Gi"===e?"10Gi":e;n.setState({resize:w(w({},t),{},{increase:a}),fakeIncrease:e})},n.handleMaxTime=function(e){var t=n.state.restart;/^[0-9]*$/g.test(e)&&n.setState({restart:w(w({},t),{},{"max-time":""===e?"300":"".concat((0,D.default)(e))}),fakeMaxTime:(0,D.default)(e)})},n.restartEnable=function(){var e=n.state.restart;n.setState({restart:w(w({},e),{},{enabled:!e.enabled})})},n.renderMaxTime=function(){var e=n.state.fakeMaxTime;return v.default.createElement(v.default.Fragment,null,v.default.createElement(E.Alert,{type:"warning",message:t("RESTART_WORKLOAD_AUTOMATICALLY_TIP")}),v.default.createElement("div",{className:P.default.settings},v.default.createElement(E.Form.Item,{label:t("TIMEOUT_PERIOD_S")},v.default.createElement(S.default,{onChange:n.handleMaxTime,value:e,min:0}))))},n.formRef=v.default.createRef(),n.state={resize:{enabled:JSON.parse(L(e,"resize","enabled",!1)),increase:L(e,"resize","increase","10Gi"),"storage-limit":L(e,"resize","storage-limit","10000Gi"),threshold:L(e,"resize","threshold","10%")},restart:{enabled:JSON.parse(L(e,"restart","enabled",!1)),"max-time":L(e,"restart","max-time","300")},fakeIncrease:L(e,"resize","increase","10Gi"),fakeThreshold:L(e,"resize","threshold","10%"),fakeLimit:L(e,"resize","storage-limit","10000Gi"),fakeMaxTime:L(e,"restart","max-time","300")},n}return(0,c.default)(r,[{key:"getMarks",value:function(){var e=j,t=U;return(0,T.default)(6).reduce((function(a,r){var n=e*r/5,l=0===n?"0":"".concat(Math.floor(n)).concat(t);return w(w({},a),{},(0,o.default)({},n,l))}),{})}},{key:"render",value:function(){var e,a=this.props,r=a.visible,n=a.onCancel,l=a.formData,o=a.isSubmitting,u=this.state,c=u.resize,s=u.restart,i=u.fakeThreshold,f=u.fakeIncrease,d=u.fakeLimit,p=c.enabled,m=s.enabled,h=this.getMarks(),S=null===(e=/[0-9]+/g.exec(d))||void 0===e?void 0:e[0],_=S?parseInt(S,10):"",O=/[0-9]+/g.test(f)?f.endsWith("%")?f.slice(0,-1):f.slice(0,-2):"",C=""!==f?i.slice(0,-1):f;return v.default.createElement(y.default,{width:960,onOk:this.handleOk,onCancel:n,visible:r,title:t("SET_AUTO_EXPANSION"),okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:o},v.default.createElement(E.Form,{formData:l,ref:this.formRef},v.default.createElement(E.Form.Item,null,v.default.createElement("div",{className:P.default.wrapper},v.default.createElement(g.default,{className:P.default.text,icon:function(){return v.default.createElement("img",{src:"/assets/autoscaling.svg",style:{width:"32px",marginRight:"16px"}})},title:t("AUTO_EXPANSION"),description:t("AUTO_EXPANSION_DESC")}),v.default.createElement(b.default,{className:P.default.switch,text:p?t("ENABLED"):t("DISABLED"),checked:p,onChange:this.enable}))),v.default.createElement("div",{className:P.default.settings},v.default.createElement("div",{className:P.default.title},t("AUTO_EXPANSION_SETTINGS")),v.default.createElement("div",{className:P.default.container},v.default.createElement("div",{className:P.default.limit},v.default.createElement(E.Form.Item,{label:t("MAXIMUM_SIZE")},v.default.createElement(k.default,{size:_,max:j,min:x,marks:h,unit:U,onChange:this.handleLimitChange}))),v.default.createElement(E.Columns,null,v.default.createElement(E.Column,null,v.default.createElement(E.Form.Item,null,v.default.createElement(I.default,{title:t("THRESHOLD"),unit:"%",max:100,value:C,onChange:this.handleThreshold}))),v.default.createElement(E.Column,null,v.default.createElement(E.Form.Item,{desc:t("INCREMENT_DESC")},v.default.createElement(I.default,{title:t("INCREMENT"),value:O,unit:"Gi",onChange:this.handleIncrease}))))),v.default.createElement("div",{className:P.default.group},v.default.createElement("div",{className:P.default.container},v.default.createElement("div",{className:P.default.checkItem},v.default.createElement(E.Checkbox,{checked:m,onChange:this.restartEnable}),v.default.createElement("div",{className:P.default.text},v.default.createElement("span",{className:P.default.title},t("RESTART_WORKLOAD_AUTOMATICALLY")),v.default.createElement("span",{className:P.default.des},t("RESTART_WORKLOAD_AUTOMATICALLY_DESC")))),m&&this.renderMaxTime())))))}},{key:"increaseOptions",get:function(){return[{label:"GiB",value:"Gi"},{label:"%",value:"%"}]}},{key:"increaseUnit",get:function(){var e,t=this.state.fakeIncrease;return null!==(e=this.increaseOptions.filter((function(e){return t.endsWith(e.value)}))[0].value)&&void 0!==e?e:"%"}}]),r}(v.default.Component),p.propTypes={visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func,isSubmitting:h.default.bool},d=m))||d;a.default=F},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=r(186),d=l(r(26)),p=n(r(0)),m=r(72);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return p.createElement("div",null,p.createElement(f.Form,{data:this.formTemplate,ref:e},p.createElement(f.Columns,null,p.createElement(f.Column,null,p.createElement(f.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},p.createElement(f.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),p.createElement(f.Column,null,p.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:m.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},p.createElement(f.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.createElement(f.Columns,null,p.createElement(f.Column,null,p.createElement(f.Form.Item,{label:t("storageclasses")},p.createElement(f.Select,{name:'metadata.labels["storage.kubesphere.io/storagetype"]',options:this.options,clearable:!0}))),p.createElement(f.Column,null,p.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.createElement(f.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"options",get:function(){return[{value:"BlockStorage",label:t("BLOCK_STORAGE")},{value:"ObjectStorage",label:t("OBJECT_STORAGE")},{value:"FileStorage",label:t("FILE_STORAGE")}]}}]),r}(p.Component);a.default=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(321)),m=r(72),v=r(186),h=n(r(1333)),E=n(r(3605));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.projectDetail,o=a.editModalTitle,u=a.title,c=a.formProps,s=(0,p.default)(n.clusters,"name");return f.default.createElement(v.Form,(0,l.default)({data:this.formTemplate.spec,ref:r},c),f.default.createElement(v.Form.Group,{label:t("STORAGE_SETTINGS"),desc:t("CLUSTER_VOLUME_DIFF_DESC"),checkable:!0},f.default.createElement(h.default,{clusters:this.clusters,clustersDetail:s,namespace:this.namespace},(function(t){return f.default.createElement(E.default,(0,l.default)({},t,{formTemplate:e.formTemplate,editModalTitle:o,title:u},c))}))))}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,m.MODULE_KIND_MAP[a],t)}},{key:"clusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[])}}]),r}(f.default.Component);a.default=g},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(31),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(43));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(30));r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var m,v,h,E=l(r(0)),y=n(r(26)),g=n(r(74)),b=n(r(863)),S=r(14),_=r(239),O=n(r(1363)),C=n(r(3)),T=r(186),R=n(r(1)),D=n(r(914)),N=n(r(910)),k=n(r(831)),I=r(52),P=r(72),A=n(r(3612));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var j=(0,_.observer)((h=v=function(e){(0,i.default)(r,e);var a=L(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).snapshotStore=new D.default,e.snapshotClassStore=new N.default,e.volumeStore=new k.default,e.fetchSnapshots=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:10},a=e.props,r=a.namespace,n=a.cluster;e.snapshotStore.fetchList(M(M({},t),{},{namespace:r,cluster:n,status:"ready"})).then((function(){var t=e.snapshotStore.list.data,a=(0,y.default)(t,"[0].name");a&&((0,g.default)(e.context.formData,"spec.dataSource.name",a),e.handeSnapshotChange(a))}))},e.fetchStorageClassDetail=function(){e.storageClassName&&e.storageClassName!==e.snapshotClassStore.detail.name&&e.snapshotClassStore.fetchDetail({cluster:e.props.cluster,name:e.storageClassName})},e.getSnapshotSourceVolumeInfo=function(t){var a=e.props,r=a.namespace,n=a.cluster;return e.volumeStore.fetchDetail({name:t,namespace:r,cluster:n})},e.handeSnapshotChange=function(){var t=(0,u.default)(o.default.mark((function t(a){var r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.snapshotStore.list.data,n=(0,S.toJS)(r).find((function(e){return e.name===a}))||{},t.next=4,e.getSnapshotSourceVolumeInfo(n.snapshotSourceName);case 4:(0,g.default)(e.context.formData,"spec.resources.requests.storage",n.restoreSize),(0,g.default)(e.context.formData,"spec.storageClassName",e.volumeStore.detail.storageClassName),(0,g.default)(e.context.formData,"spec.dataSource.kind","VolumeSnapshot"),(0,g.default)(e.context.formData,"spec.dataSource.apiGroup","snapshot.storage.k8s.io"),e.fetchStorageClassDetail();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.storageClassName&&this.fetchStorageClassDetail()}},{key:"render",value:function(){var e=this.snapshotStore.list,a=e.data,r=e.total,n=e.page,l=e.isLoading,o=this.snapshotClassStore.isLoading,u=this.supportedAccessModes;return E.default.createElement(E.default.Fragment,null,E.default.createElement(T.Form.Item,{label:t("VOLUME_SNAPSHOT"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],className:A.default.snapshotContainer},E.default.createElement(x,{className:A.default.snapshots,name:"spec.dataSource.name",snapshots:(0,S.toJS)(a),total:r,page:n,loading:l,onChange:this.handeSnapshotChange,onFetch:this.fetchSnapshots})),this.storageClassName&&E.default.createElement(T.Loading,{spinning:o},E.default.createElement(T.Form.Item,{className:"margin-t12",label:t("ACCESS_MODE"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},E.default.createElement(O.default,{name:"spec.accessModes[0]",defaultValue:(0,y.default)(u,"[0]")||Object.keys(P.ACCESS_MODES)[0],supportedAccessModes:u}))))}},{key:"storageClassName",get:function(){return(0,y.default)(this.context.formData,"spec.storageClassName")}},{key:"supportedAccessModes",get:function(){return(0,I.safeParseJSON)((0,y.default)(this.snapshotClassStore.detail,'annotations["storageclass.kubesphere.io/supported-access-modes"]',""))}}]),r}(E.Component),v.contextTypes={formData:R.default.object},m=h))||m;function x(e){var a=e.onChange,r=e.snapshots,n=e.total,l=e.page,o=e.loading,u=e.onFetch,c=e.value,s=e.className;return E.default.createElement(b.default,{className:s,data:r,total:n,page:l,loading:o,onFetch:u},r.map((function(e){return E.default.createElement("div",{className:(0,C.default)((0,p.default)({},A.default.selected,e.name===c),A.default.snapshot),key:e.uid,onClick:function(){return a(e.name)}},E.default.createElement(T.Icon,{name:"snapshot",type:e.name===c?"light":"dark",size:40}),E.default.createElement("div",null,E.default.createElement("h3",null,e.name),E.default.createElement("p",null,e.snapshotClassName)),E.default.createElement("div",null,E.default.createElement("h3",null,e.restoreSize||0),E.default.createElement("p",null,t("CAPACITY"))),E.default.createElement("div",null,E.default.createElement("h3",null,e.createTime),E.default.createElement("p",null,t("CREATION_TIME_TCAP"))))})))}a.default=j},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(84),r(16),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(84),r(42),r(16),r(4),r(23),r(57),r(17),r(85);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(135)),d=n(r(26)),p=n(r(74)),m=n(r(242)),v=r(72),h=r(186),E=n(r(816)),y=n(r(1101)),g=n(r(1785)),b=n(r(3613)),S=n(r(3614));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=[{icon:"snapshot",value:"snapshot",get label(){return t("CREATE_VOLUME_BY_SNAPSHOT")},get description(){return t("SELECT_SNAPSHOT_TO_CREATE_VOLUME")}},{icon:"database",value:"storageClass",get label(){return t("CREATE_VOLUME_BY_STORAGE_CLASS")},get description(){return t("SELECT_STORAGE_CLASS_CREATE_VOLUME")}},{icon:"meta-data",value:"pv",get label(){return t("BIND_EXISTING_PVC")},get description(){return t("BIND_EXISTING_PVC_DESC")}}],C=function(e){return(0,d.default)(e,"spec.volumeName")?"pv":(0,d.default)(e,"spec.dataSource.name")?"snapshot":"storageClass"},T=function(e){(0,u.default)(r,e);var a=_(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={fromSnapshot:C(e.formTemplate)},e.isClusterAdmin=function(){return(0,d.default)(window,"globals.user.globalRules.clusters",[]).includes("manage")},e.handleChangePv=function(t,a){var r,n=null!==(r=a.find((function(e){return(null==e?void 0:e.name)===t})))&&void 0!==r?r:{};(0,p.default)(e.fedFormTemplate,"spec.accessModes",n.accessModes),(0,p.default)(e.fedFormTemplate,"spec.resources.requests.storage",n.capacity),(0,p.default)(e.fedFormTemplate,"spec.storageClassName",n.storageClassName),(0,p.default)(e.fedFormTemplate,"spec.volumeMode",n.volumeMode)},e.handleChange=function(t){t!==e.state.fromSnapshot&&((0,m.default)(e.fedFormTemplate,"spec.storageClassName"),(0,p.default)(e.fedFormTemplate,"spec.accessModes",[]),(0,p.default)(e.fedFormTemplate,"spec.dataSource",{}),(0,p.default)(e.fedFormTemplate,"spec.resources.requests.storage","0Gi"),e.setState({fromSnapshot:t}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.isFederated,n=e.cluster,l=this.state.fromSnapshot;return i.default.createElement(h.Form,{data:this.fedFormTemplate,ref:a,className:S.default.wrapper},!r&&i.default.createElement(h.Form.Item,{label:t("CREATION_METHOD")},i.default.createElement(E.default,{value:l,options:this.createTypeOption,onChange:this.handleChange})),"snapshot"===l&&i.default.createElement(g.default,{namespace:(0,d.default)(this.formTemplate,"metadata.namespace"),cluster:n}),"pv"===l&&i.default.createElement(h.Form.Item,{label:t("PERSISTENT_VOLUME"),rules:[{required:!0,message:t("PLEASE_SELECT_PERSISTENT_VOLUME")}],desc:this.isClusterAdmin()&&this.props.onAddPv?i.default.createElement("span",{className:S.default.action,onClick:this.props.onAddPv},t.html("ADMIN_CREATE_PV_DESC")):t("PV_EMPTY_DESC")},i.default.createElement(b.default,{name:"spec.volumeName",onChange:this.handleChangePv})),"snapshot"!==l&&"pv"!==l&&i.default.createElement(y.default,{cluster:n,isFederated:r}))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,v.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,d.default)(this.formTemplate,"spec.template"):this.formTemplate}},{key:"createTypeOption",get:function(){var e=(0,f.default)(O);return globals.app.hasKSModule("storage-utils")||e.shift(),e}}]),r}(i.default.Component);a.default=T},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=r(186),p=n(r(799)),m=r(72);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement(d.Form,{data:this.formTemplate,ref:e},i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("MAXIMUM_RETRIES"),desc:t("MAXIMUM_RETRIES_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"backoffLimit"),integer:!0})),i.default.createElement(d.Form.Item,{label:t("PARALLEL_PODS"),desc:t("PARALLEL_PODS_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"parallelism"),integer:!0}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("COMPLETE_PODS"),desc:t("COMPLETE_PODS_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"completions"),integer:!0})),i.default.createElement(d.Form.Item,{label:t("MAXIMUM_DURATION"),desc:t("MAXIMUM_DURATION_DESC")},i.default.createElement(p.default,{min:0,name:"".concat(this.prefix,"activeDeadlineSeconds"),integer:!0})))))}},{key:"prefix",get:function(){return this.props.prefix||"spec."}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,m.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=h},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(239),p=r(186),m=n(r(932));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"getRestartPolicyOptions",value:function(){return[{label:t("RESTART_POLICY_NEVER_DESC"),value:"Never"},{label:t("RESTART_POLICY_ONFAILURE_DESC"),value:"OnFailure"}]}},{key:"renderRestartPolicy",value:function(){return f.default.createElement(p.Form.Item,{label:t("RESTART_POLICY"),desc:t("RESTART_POLICY_DESC")},f.default.createElement(p.Select,{name:"".concat(this.prefix,"spec.restartPolicy"),options:this.getRestartPolicyOptions()}))}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.showContainer,r=t.selectContainer;return a?this.renderContainerForm(r):f.default.createElement(p.Form,{data:this.formTemplate,ref:e},this.renderRestartPolicy(),this.renderContainerList())}}]),r}(m.default))||l;a.default=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r={"./PV.js":2031,"./alarm.center.js":2065,"./alerting.js":2243,"./appedgetemplate.js":1296,"./application.js":2599,"./apptemplates.js":2682,"./batchappdeploy.js":2684,"./cd.js":2696,"./cluster.js":2708,"./clusterPod.js":2759,"./clusterTags.js":2762,"./codeRepo.js":2774,"./configmap.js":2788,"./configuration.js":2796,"./custom.monitoring.js":2802,"./customScaling.js":2915,"./devops.credential.js":2960,"./devops.js":2961,"./edgeNode.js":2968,"./federated.js":2969,"./gateways.js":2993,"./group.js":3e3,"./imagebuilder.js":3001,"./index.js":775,"./license.js":3007,"./log.collection.js":3010,"./member.js":3017,"./microservice.js":3021,"./microservicegateway.js":3023,"./network.js":3031,"./node.group.js":3055,"./node.js":3074,"./notification.js":3120,"./openpitrix.js":3137,"./pipeline.js":3257,"./platform.js":3337,"./project.js":3342,"./resource.delete.js":3360,"./resource.edit.js":3363,"./role.js":3365,"./router.js":3371,"./secret.js":3379,"./service.js":3392,"./serviceaccount.js":3405,"./servicerouting.js":3410,"./silentPolicy.js":3415,"./storageclass.js":3426,"./toolbox.js":3445,"./user.js":3587,"./volume.js":3599,"./whizard.js":3621,"./workload.js":3641,"./workspace.js":3658};function n(e){var t=l(e);return a(t)}function l(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=l,e.exports=n,n.id=2030},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(824)),d=n(r(825)),p=n(r(435)),m=n(r(26)),v=n(r(241)),h=n(r(2057));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={"pv.delete":{on:function(e){var a=e.store,r=e.detail,n=(e.type,e.rowKey,e.success),l=(0,c.default)(e,["store","detail","type","rowKey","success"]),o=i.default.open(y({onOk:function(){a.delete(r).then((function(){i.default.close(o),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()}))},store:a,modal:f.default,type:"PERSISTENT_VOLUME",resource:r.name},l))}},"pv.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,d=(0,c.default)(e,["store","success","rowKey"]),p=r.list,m=p.data,v=p.selectedRowKeys,h=m.filter((function(e){return v.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),E=h.map((function(e){return e.name})),g=i.default.open(y({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],m.forEach((function(e){h.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&a.push(r.delete(e))})),e.next=4,Promise.all(a);case 4:i.default.close(g),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:E.join(", "),type:"PERSISTENT_VOLUME",modal:f.default,store:r},d))}},"pv.create":{on:function(e){var a,r,n=e.store,l=e.success,o=(0,c.default)(e,["store","success"]),u={PersistentVolume:null!==(a=null===(r=p.default[n.module])||void 0===r?void 0:r.call(p.default))&&void 0!==a?a:{}},f=i.default.open(y({onOk:function(e){var a=(0,m.default)(e,"PersistentVolume");n.create((0,v.default)(o,["cluster","workspace","namespace"]),a).then((function(){i.default.close(f),s.default.success({content:t("CREATED_SUCCESSFULLY")}),l&&l()}))},name:"PERSISTENT_VOLUME",formTemplate:u,modal:d.default,module:n.module,steps:h.default,store:n},o))}}};a.default=g},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2058)),l=r(a(2059)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(157);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),o=r(186),u=r(72),c=function(e){var a=e.formRef,r=e.formTemplate;return l.createElement(o.Form,{ref:a,data:r.PersistentVolume},l.createElement(o.Columns,null,l.createElement(o.Column,null,l.createElement(o.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:u.PATTERN_NAME,message:t("LONG_NAME_DESC")}]},l.createElement(o.Input,{name:"metadata.name",maxLength:253}))),l.createElement(o.Column,null,l.createElement(o.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:u.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},l.createElement(o.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),l.createElement(o.Columns,null,l.createElement(o.Column,null,l.createElement(o.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},l.createElement(o.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))};a.default=c},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(31),r(6),r(18),r(48),r(16),r(27),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(18),r(28),r(48),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(319),r(24),r(193),r(7);var o=l(r(315)),u=l(r(30)),c=l(r(96)),s=r(186),i=l(r(966)),f=l(r(26)),d=l(r(63)),p=l(r(158)),m=l(r(241)),v=l(r(74)),h=l(r(242)),E=r(14),y=r(239),g=n(r(0)),b=l(r(866)),S=r(52),_=r(72),O=l(r(2060)),C=l(r(2064));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=(0,y.observer)((function(e){var a=e.formRef,r=e.formTemplate,n=(0,y.useLocalStore)((function(){return new b.default})),l=g.useState(!1),u=(0,c.default)(l,2),T=u[0],D=u[1],N=g.useState([]),k=(0,c.default)(N,2),I=k[0],P=k[1],A=g.useState({}),w=(0,c.default)(A,2),M=w[0],L=w[1],j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(!0);var a=e.formData,l=(0,f.default)(a,"spec.storageClassName");return n.fetchList(R(R({},t),{},{cluster:e.cluster})).then((function(){var e=(0,E.toJS)(n.list.data);P(e.map((function(e){return{label:e.name,value:e.name}})));var t=e.find((function(e){return l===e.name}))||e.find((function(e){return e.default}))||{};L(t),(0,d.default)(r.PersistentVolume,"spec.csi")||(0,f.default)(r.PersistentVolume,"spec.csi.driver")||!/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/.test(t.provisioner)||(0,v.default)(r.PersistentVolume,"spec.csi.driver",t.provisioner),D(!1)}))};(0,g.useEffect)((function(){j()}),[]);var x=n.list||{},U=g.useMemo((function(){var e,t=(e=null,M&&(e=(0,S.safeParseJSON)((0,f.default)(M,'annotations["storageclass.kubesphere.io/supported-access-modes"]',""))),(0,p.default)(e)?[]:e);return(0,d.default)(t)?Object.keys(_.ACCESS_MODES):t}),[M]),F=g.useMemo((function(){return U.map((function(e){return{value:e,label:e}}))}),[U]),V=g.useMemo((function(){return"ReadWriteOnce"in U?["ReadWriteOnce"]:U.slice(0,1)}),[U]);return g.createElement("div",{className:C.default.wrapper},g.createElement(s.Form,{ref:a,data:r.PersistentVolume},g.createElement(s.Columns,null,g.createElement(s.Column,null,g.createElement(s.Form.Item,{label:t("STORAGE_CLASS"),desc:t("VOLUME_STORAGE_CLASS_DESC"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},g.createElement(s.Select,{name:"spec.storageClassName",defaultValue:M.name,pagination:(0,m.default)(x,["page","limit","total"]),isLoading:x.isLoading,onChange:function(e){var t=n.list.data.find((function(t){return t.name===e}))||{};(0,h.default)(r.PersistentVolume,"spec.accessModes"),(0,f.default)(r.PersistentVolume,"spec.csi")&&(0,v.default)(r.PersistentVolume,"spec.csi.driver",t.provisioner),L(t)},options:I,onFetch:j,searchable:!0,clearable:!0}))),g.createElement(s.Column,null,g.createElement(s.Form.Item,{label:t("ACCESS_MODE"),rules:[{required:!0,message:t("PARAM_REQUIRED")}],desc:t("ACCESS_MODES_DESC")},g.createElement(s.Select,{name:"spec.accessModes",options:F,loading:T,defaultValue:V,multi:!0})))),g.createElement("div",{className:C.default.slider},g.createElement(s.Form.Item,{className:C.default.slider,label:t("VOLUME_CAPACITY"),rules:[{validator:function(e,a,r){return parseInt(a,10)<=0?r({message:t("VOLUME_SIZE_TIP"),field:e.field}):r()}}]},g.createElement(i.default,(0,o.default)({name:"spec.capacity.storage"},function(){var e={min:0,max:2048,defaultValue:"10Gi",step:1,unit:"Gi"},t=Number((0,f.default)(M,"parameters.minSize")),a=Number((0,f.default)(M,"parameters.maxSize")),r=Number((0,f.default)(M,"parameters.stepSize"));isNaN(t)||(e.min=t),isNaN(a)||(e.max=a),isNaN(r)||(e.step=r);for(var n=(e.max/e.step-e.min/e.step)/4,l={},o=0;o<4;o++){var u=Math.floor(n*o)*e.step+e.min;l[u]=0===u?"0":"".concat(u,"Gi")}return l[e.max]="".concat(e.max,"Gi"),e.marks=l,e}(),{withInput:!0})))),g.createElement(s.Columns,null,g.createElement(s.Column,null,g.createElement(s.Form.Item,{label:t("VOLUME_MODE")},g.createElement(s.Select,{name:"spec.volumeMode",options:[{label:t("VOLUME_MODE_FILESYSTEM"),value:"Filesystem"},{label:t("BLOCK"),value:"Block"}]}))),g.createElement(s.Column,null,g.createElement(s.Form.Item,{label:t("RECLAIM_POLICY")},g.createElement(s.Select,{name:"spec.persistentVolumeReclaimPolicy",options:[{label:"Retain",value:"Retain"},{label:"Delete",value:"Delete"}]})))),g.createElement(O.default,{formTemplate:r.PersistentVolume})))}));a.default=D},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(31),r(6),r(18),r(98),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(18),r(28),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(7);var o=l(r(30)),u=l(r(96)),c=r(186),s=l(r(135)),i=l(r(26)),f=l(r(63)),d=l(r(74)),p=l(r(242)),m=n(r(0)),v=l(r(842)),h=l(r(2063));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=[{label:"NODE_EXPAND_KEY",key:"nodeExpandSecretRef"},{label:"NODE_PUBLISH_KEY",key:"nodePublishSecretRef"},{label:"NODE_STAGING_KEY",key:"nodeStageSecretRef"},{label:"CONTROLLER_EXPAND_KEY",key:"controllerExpandSecretRef"},{label:"CONTROLLER_PUBLISH_KEY",key:"controllerPublishSecretRef"}],b=[{label:"ANY_PATH",value:""},{label:"DIRECTORY_OR_CREATE",value:"DirectoryOrCreate"},{label:"FILE_OR_CREATE",value:"FileOrCreate"},{label:"DIRECTORY_EXIST",value:"Directory"},{label:"FILE_EXIST",value:"File"},{label:"SOCKET_EXIST",value:"Socket"},{label:"CHARACTER_DEVICE_EXIST",value:"CharDevice"},{label:"BLOCK_DEVICE_EXIST",value:"BlockDevice"}],S={CSI:"spec.csi",HostPath:"spec.hostPath",NFS:"spec.nfs"},_=function(e){var a,r,n=e.formTemplate,l=m.useState(null!==(a=null===(r=Object.entries(S).find((function(e){var t=(0,u.default)(e,2)[1];return!(0,f.default)((0,i.default)(n,t))})))||void 0===r?void 0:r[0])&&void 0!==a?a:"CSI"),o=(0,u.default)(l,2),E=o[0],_=o[1],O=m.useState(!1),C=(0,u.default)(O,2),T=C[0],R=C[1],D=m.useRef((0,s.default)(n)),N=function(){R(!T)};return m.createElement("div",{className:h.default.wrapper},m.createElement("div",{className:h.default.title},t("VOLUME_TYPE")),m.createElement("div",{className:h.default.container},m.createElement("div",{className:h.default.radioGroup},m.createElement(c.RadioGroup,{value:E,onChange:function(e){(0,d.default)(D.current,S[E],(0,s.default)((0,i.default)(n,S[E]))),(0,p.default)(n,S[E]),(0,f.default)((0,i.default)(n,S[e]))&&!(0,f.default)((0,i.default)(D.current,S[e]))&&(0,d.default)(n,S[e],(0,i.default)(D.current,S[e])),_(e)}},["CSI","HostPath","NFS"].map((function(e){return m.createElement(c.RadioButton,{key:e,value:e},e)})))),m.createElement("div",{className:h.default.itemWrapper},"CSI"!==E?null:m.createElement("div",null,m.createElement("div",{className:h.default.itemGrid},m.createElement(c.Form.Item,{label:t("DRIVER"),rules:[{required:!0,message:t("DRIVER_REQUIRED")},{pattern:/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/,message:t("DRIVER_FORMAT_ERROR")}]},m.createElement(c.Input,{placeholder:t("DRIVER_PLACEHOLDER"),name:"spec.csi.driver"})),m.createElement(c.Form.Item,{label:t("FSTYPE")},m.createElement(c.Input,{placeholder:t("FSTYPE_PLACEHOLDER"),name:"spec.csi.fsType"})),m.createElement(c.Form.Item,{label:t("VOLUME_HANDLE"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.createElement(c.Input,{name:"spec.csi.volumeHandle"})),m.createElement(c.Form.Item,{label:t("READ_ONLY")},m.createElement(c.Select,{defaultValue:!1,name:"spec.csi.readOnly",options:[{label:t("TRUE"),value:!0},{label:t("FALSE"),value:!1}]}))),m.createElement(c.Form.Item,{label:t("VOLUME_ATTRIBUTES"),className:"margin-t12"},m.createElement(v.default,{name:"spec.csi.volumeAttributes",addText:t("ADD")})),m.createElement("div",{className:h.default.advanced,onClick:N},m.createElement("span",null,t("ADVANCED_SETTINGS")),m.createElement(c.Icon,{name:T?"chevron-up":"chevron-down",size:"20",color:{primary:"#329dce"}})),T&&m.createElement("div",{className:h.default.advancedContainer},g.map((function(e){return m.createElement("div",{className:h.default.advancedItem,key:e.key},m.createElement("span",{className:h.default.advancedItemTitle},t(e.label)),m.createElement(c.Form.Item,null,m.createElement(c.Input,{name:"spec.csi.".concat(e.key,".name"),placeholder:t("NAME")})),m.createElement(c.Form.Item,null,m.createElement(c.Input,{placeholder:t("PROJECT"),name:"spec.csi.".concat(e.key,".namespace")})))})))),"HostPath"!==E?null:m.createElement("div",{className:h.default.itemGrid},m.createElement(c.Form.Item,{label:t("HOST_PATH"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.createElement(c.Input,{name:"spec.hostPath.path"})),m.createElement(c.Form.Item,{label:t("PATH_TYPE")},m.createElement(c.Select,{name:"spec.hostPath.type",defaultValue:"",options:b.map((function(e){return y(y({},e),{},{label:t(e.label)})}))}))),"NFS"!==E?null:m.createElement("div",{className:h.default.itemGrid},m.createElement(c.Form.Item,{label:t("PATH"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.createElement(c.Input,{name:"spec.nfs.path"})),m.createElement(c.Form.Item,{label:t("SERVER_IP_ADDRESS"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},m.createElement(c.Input,{name:"spec.nfs.server"})),m.createElement(c.Form.Item,{label:t("READ_ONLY")},m.createElement(c.Select,{defaultValue:!1,name:"spec.nfs.readOnly",options:[{label:t("TRUE"),value:!0},{label:t("FALSE"),value:!1}]}))))))};a.default=_},,,function(e,t,a){e.exports={wrapper:"_3hU0gfsokxtJmojpZ7dno_",title:"_3lQt_YNhnKM35H-UFisN2D",container:"_3SRENc1cP-xe_SYvL2hkXj",itemWrapper:"jUX-oWNxLfbT_aMD_i3O_",itemGrid:"_3owrGQcJ9GedSfdqKm8pc4",radioGroup:"dWhyvTjqv55p87DIhQg2v",advanced:"SguGGr331-i5zEZhcPqKm",advancedItem:"_3lWqb1SrJ0OFHrRD3ncFUX",advancedItemTitle:"_2MSEwtb_WH_a_nMPRi1JCr"}},function(e,t,a){e.exports={wrapper:"_1lRAg4c9GRI767PP_ovCWl",slider:"vkbOgMKlSx5hi1gKBjf43"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(86),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(86),r(29),r(73),r(18),r(28),r(191),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(135)),i=n(r(26)),f=n(r(63)),d=n(r(74)),p=r(14),m=n(r(240)),v=n(r(1080)),h=n(r(787)),E=n(r(824)),y=n(r(825)),g=n(r(1151)),b=n(r(1495)),S=n(r(1496)),_=n(r(1293)),O=r(72),C=n(r(435)),T=n(r(901)),R=n(r(2242)),D=r(52);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={"alerting.multi.policy.create":{on:function(e){var a,r=e.store,n=e.cluster,u=e.namespace,p=e.module,v=e.success,E=e.detail,g=(0,c.default)(e,["store","cluster","namespace","module","success","detail"]),b=O.MODULE_KIND_MAP[p],S=E?(0,s.default)(E):C.default[p]({multi:!0}),_=h.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=(0,i.default)(a,"spec.rules",[])).length<1)){e.next=3;break}return e.abrupt("return",m.default.warning({content:t("RULES_LIST_EMPTY")}));case 3:if(o.forEach((function(e){var t=(0,i.default)(e,"exprBuilder",{}),a=(0,i.default)(e,"namespaceSelector.inValues",[]);if((0,f.default)(t)&&!(0,f.default)(a)){var r=a.map((function(e){return e.namespace}));e.namespaceSelector.inValues=r}if(!(0,f.default)(t)){if(t.workload){var n=e.exprBuilder.workload.kind;(0,d.default)(e,"exprBuilder.workload.kind",(0,D.capitalize)(n))}delete e.clusterSelector}})),!E){e.next=10;break}return e.next=7,r.update(E,a);case 7:m.default.success({content:t("UPDATE_SUCCESSFUL")}),e.next=13;break;case 10:return e.next=12,r.create(a,{name:a.metadata.name,cluster:n,namespace:u});case 12:m.default.success({content:t("CREATE_SUCCESSFUL")});case 13:h.default.close(_),v&&v(),T.default.delete("".concat(p,"_create_form"));case 16:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:p,cluster:n,namespace:u,name:b,formTemplate:S,modal:y.default,steps:R.default,noCodeEdit:!0,isEdit:!!E,okBtnText:E?t("OK"):t("CREATE"),store:r},g))}},"multi.alerting.baseInfo.edit":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=(0,c.default)(e,["type","store","detail","success"]),u=h.default.open(k({onOk:function(e){var o=(0,s.default)(e);(0,i.default)(o,"spec.interval").length<2&&(0,d.default)(o,"spec.interval",""),r.patch(k(k({},n),{},{type:a}),o).then((function(){h.default.close(u),m.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},detail:n,modal:b.default,store:r},o))}},"multi.alerting.yaml.edit":{on:function(e){var a=e.type,r=e.store,n=e.detail,u=e.success,s=(e.cluster,e.namespace,(0,c.default)(e,["type","store","detail","success","cluster","namespace"])),f="";"builtin"===a&&(f=(0,i.default)(n._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',""));var p,E=h.default.open(k({onOk:(p=(0,o.default)(l.default.mark((function e(o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"builtin"===a&&((0,d.default)(o,"apiVersion",r.yamlApiVersion),(0,d.default)(o,"kind","GlobalRuleGroup"),(0,d.default)(o,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',f)),e.next=3,r.update(k(k({},n),{},{type:a}),o);case 3:m.default.success({content:t("UPDATE_SUCCESSFUL")}),h.default.close(E),u&&u();case 6:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)}),detail:k(k({},n),{},{type:a}),store:r,type:a,modal:v.default},s))}},"multi.alerting.rule.edit":{on:function(e){var a=e.type,r=e.store,n=e.detail,u=e.success,s=e.cluster,p=e.namespace,v=(e.title,(0,c.default)(e,["type","store","detail","success","cluster","namespace","title"])),E="";"builtin"===a&&(E=(0,i.default)(n._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',""));var b,S=h.default.open(k({onOk:(b=(0,o.default)(l.default.mark((function e(o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===(0,i.default)(n,"_originData.apiVersion","")&&((0,d.default)(o,"apiVersion",r.yamlApiVersion),(0,d.default)(o,"kind","GlobalRuleGroup")),(0,i.default)(o,"spec.rules",[]).forEach((function(e){var t=(0,i.default)(e,"exprBuilder",{}),a=(0,i.default)(e,"namespaceSelector.inValues",[]);if((0,f.default)(t)&&!(0,f.default)(a)){var r=a.map((function(e){return e.namespace}));e.namespaceSelector.inValues=r}if(!(0,f.default)(t)){if(t.workload){var n=e.exprBuilder.workload.kind;(0,d.default)(e,"exprBuilder.workload.kind",(0,D.capitalize)(n))}delete e.clusterSelector}})),"builtin"===a&&(0,d.default)(o,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',E),e.next=6,r.update(k(k({},n),{},{type:a}),o);case 6:m.default.success({content:t("UPDATE_SUCCESSFUL")}),h.default.close(S),u&&u();case 9:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)}),store:r,resource:n.name,detail:n,title:t("EDIT_ALERT_RULES"),icon:"pen",modal:y.default,steps:[{title:"ALERTING_RULE",component:g.default,required:!0}],noCodeEdit:!0,okBtnText:t("OK"),formTemplate:n._originData,namespace:p,cluster:s,editMode:!0,type:a},v))}},"multi.enable.alarm.rule":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.cluster,u=void 0===o?"":o,c=e.namespace,s=void 0===c?"":c,f=e.batchMode,d=e.enabled,v=void 0!==d&&d,h=(0,i.default)((0,p.toJS)(r.list),"selectedRowKeys",[]);f?r.batchPatch(h,{cluster:u,namespace:s,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!v)}}}).then((function(){m.default.success({content:t("ENABLE_SUCCESSFUL")}),l&&l()})):r.patch({cluster:u,namespace:s,name:n.name,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!v)}}}).then((function(){m.default.success({content:t("ENABLE_SUCCESSFUL")}),l&&l()}))}},"multi.alarm.rule.update":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.cluster,u=void 0===o?"":o,s=e.namespace,f=void 0===s?"":s,d=e.title,v=e.batchMode,y=e.resourceName,g=e.enabled,b=void 0!==g&&g,S=(0,c.default)(e,["type","store","detail","success","cluster","namespace","title","batchMode","resourceName","enabled"]),_=(0,i.default)((0,p.toJS)(r.list),"selectedRowKeys",[]),O=v?_.join(","):n.name,C=h.default.open(k({onOk:function(){v?r.batchPatch(_,{cluster:u,namespace:f,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!b)}}}).then((function(){h.default.close(C),m.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()})):r.patch({cluster:u,namespace:f,name:n.name,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!b)}}}).then((function(){h.default.close(C),m.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},store:r,icon:"information",modal:E.default,type:y,resource:O,title:d},S))}},"multi.alerting.rule.delete":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.name,u=(0,c.default)(e,["type","store","detail","success","name"]),s=h.default.open(k({onOk:function(){r.delete(k(k({},n),{},{type:a})).then((function(){h.default.close(s),m.default.success({content:t("DELETED_SUCCESSFULLY")}),l&&l()}))},store:r,type:o,modal:E.default,resource:n.name},u))}},"multi.alerting.rule.monitor":{on:function(e){var t=e.store,a=e.expr,r=e.rule,n=(0,c.default)(e,["store","expr","rule"]),l=h.default.open(k({onOk:function(){h.default.close(l)},rule:r,expr:a,store:t,modal:S.default},n))}},"multi.alarm.rule.reset":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,c=e.type,s=(0,i.default)((0,p.toJS)(r.list),"data",[]),f=(0,i.default)((0,p.toJS)(r.list),"selectedRowKeys",[]),v=s.filter((function(e){return-1!==f.indexOf(e.name)})),E=h.default.open({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o,s,p;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.length>0)){e.next=7;break}return a=[],v.forEach((function(e){var t=(0,i.default)(e._originData,"metadata.annotations",""),n=(0,i.default)(e._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',"");if(""!==n){var l=JSON.parse(n),o=(0,d.default)(l,"metadata.annotations",t);a.push(r.update(k(k({},e),{},{type:c}),o))}})),e.next=5,Promise.all(a);case 5:e.next=14;break;case 7:if(""!==(o=(0,i.default)(n._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',""))){e.next=10;break}return e.abrupt("return");case 10:return s=JSON.parse(o),p=(0,d.default)(s,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',o),e.next=14,r.update(k(k({},n),{},{type:c}),p);case 14:m.default.success({content:t("RESET_SUCCESSFUL")}),h.default.close(E),u&&u();case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:t("RESET_ALERTING_POLICY"),desc:f.length>0?t.html("RESET_MULTIPLE_ALERTING_POLICIES_DESC",{name:f.join(",")}):t("RESET_ALERTING_POLICY_DESC"),modal:_.default})}}};a.default=I},function(e,t,a){e.exports={editor:"_3JQlRh-o6JuniWSRDk3cbe",readOnly:"_1-NRR0ZvVwGhsXzTyFruig"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={duration:"-SaLSCfbFV8IwEL3sGldL"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={body:"_2wR1cHcoTFPowct6lhS7sm",header:"_1jOqrejT-N_BHHdCQb-0Mn",opts:"iZMjxLb3Eo6Hq9DIXiv0b",time:"_1VVyg3AhHjMJpzBLLXWl5s",refresh:"qyYd8KZQc7CrY6RZPRGB",metricEmpty:"_2Bq7rWkA-A9qLWEUe0UDGi",current:"_2KeSgv26nHtSAyiv2ry3s6",main:"_3mYfaiozhmmBh1g4b3-36p",title:"_19Wuw4SPjjZLpELOQMdDMp",line:"_1uAPor3uobJmIoidRolK-y",value:"_1NNfBFfwOyu5pKlP62ABDz",metric:"_2QKdphcMV0-7S4aBy3GYSH"}},function(e,t,a){e.exports={icon:"_3zoeqnSkF53g0SBCoEq19K",title:"_3cXx0QrPrFQYMxrUWD2eD",desc:"_21s3yDXppxrTySFmLkEatQ"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1532)),l=r(a(1151)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0,icon:"cdn"},{title:"ALERTING_RULE",component:l.default,required:!0,icon:"bell"}];t.default=o},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(86),r(29),r(73),r(16),r(9),r(13),r(10),r(4),r(22),r(24),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(86),r(29),r(73),r(28),r(191),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(135)),i=n(r(26)),f=n(r(74)),d=r(14),p=n(r(240)),m=n(r(1080)),v=n(r(787)),h=n(r(824)),E=n(r(825)),y=n(r(1533)),g=n(r(1495)),b=n(r(1496)),S=n(r(1293)),_=r(72),O=n(r(435)),C=n(r(901)),T=n(r(2262)),R=n(r(2263));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){var t=e.namespace,a=e.type;return t?"RuleGroup":"builtin"===a?"GlobalRuleGroup":"ClusterRuleGroup"},I={"alerting.policy.create":{on:function(e){var a,r=e.store,n=e.cluster,u=e.namespace,f=e.module,d=e.success,m=e.detail,h=(0,c.default)(e,["store","cluster","namespace","module","success","detail"]),y=_.MODULE_KIND_MAP[f],g=m?(0,s.default)(m):O.default[f]({namespace:u}),b=v.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,i.default)(a,"spec.rules",[]).length<1)){e.next=3;break}return e.abrupt("return",p.default.warning({content:t("RULES_LIST_EMPTY")}));case 3:if(!m){e.next=9;break}return e.next=6,r.update(m,a);case 6:p.default.success({content:t("UPDATE_SUCCESSFUL")}),e.next=12;break;case 9:return e.next=11,r.create(a,N({name:a.metadata.name,cluster:n,namespace:u},h));case 11:p.default.success({content:t("CREATE_SUCCESSFUL")});case 12:v.default.close(b),d&&d(),C.default.delete("".concat(f,"_create_form"));case 15:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:f,cluster:n,namespace:u,name:y,formTemplate:g,modal:E.default,steps:h.app_id?R.default:T.default,noCodeEdit:!0,isEdit:!!m,okBtnText:m?t("OK"):t("CREATE"),store:r},h))}},"alerting.baseinfo.edit":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=(0,c.default)(e,["type","store","detail","success"]),u=v.default.open(N({onOk:function(e){var o=(0,s.default)(e);(0,i.default)(o,"spec.interval").length<2&&(0,f.default)(o,"spec.interval",""),r.patch(N(N({},n),{},{type:a}),o).then((function(){v.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},detail:n,modal:g.default,store:r},o))}},"alerting.yaml.edit":{on:function(e){var a=e.type,r=e.store,n=e.detail,u=e.success,s=(e.cluster,e.namespace),d=(0,c.default)(e,["type","store","detail","success","cluster","namespace"]),h="",E=k({namespace:s,type:a});"builtin"===a&&(h=(0,i.default)(n._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',""));var y,g=v.default.open(N({onOk:(y=(0,o.default)(l.default.mark((function e(o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"builtin"===a&&((0,f.default)(o,"apiVersion",r.yamlApiVersion),(0,f.default)(o,"kind",E),(0,f.default)(o,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',h)),e.next=3,r.update(N(N({},n),{},{type:a}),o);case 3:p.default.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(g),u&&u();case 6:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)}),detail:N(N({},n),{},{type:a}),store:r,type:a,modal:m.default},d))}},"alerting.rule.edit":{on:function(e){var a,r=e.type,n=e.store,u=e.detail,s=e.success,d=e.isEdgeWize,m=e.cluster,h=e.namespace,g=(e.title,(0,c.default)(e,["type","store","detail","success","isEdgeWize","cluster","namespace","title"])),b=k({namespace:h,type:r}),S=v.default.open(N({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"builtin"!==r&&a.Kind||((0,f.default)(a,"apiVersion",n.yamlApiVersion),(0,f.default)(a,"kind",b)),e.next=3,n.update(N(N({},u),{},{type:r}),a);case 3:p.default.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(S),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:n,resource:u.name,detail:u,title:t("EDIT_ALERT_RULES"),icon:"pen",modal:E.default,steps:(0,i.default)(u,"_originData.metadata.labels.openpitrix_app_id")?[R.default[1]]:[{title:"ALERTING_RULE",component:y.default,required:!0}],isEdgeWize:d,noCodeEdit:!0,okBtnText:t("OK"),formTemplate:u._originData,namespace:h,cluster:m,type:r},g))}},"enable.alerting.rule":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.cluster,u=void 0===o?"":o,c=e.namespace,s=void 0===c?"":c,f=e.batchMode,m=e.enabled,v=void 0!==m&&m,h=(0,i.default)((0,d.toJS)(r.list),"selectedRowKeys",[]);f?r.batchPatch(h,{cluster:u,namespace:s,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!v)}}}).then((function(){p.default.success({content:t("ENABLE_SUCCESSFUL")}),l&&l()})):r.patch({cluster:u,namespace:s,name:n.name,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!v)}}}).then((function(){p.default.success({content:t("ENABLE_SUCCESSFUL")}),l&&l()}))}},"alerting.rule.update":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.cluster,u=void 0===o?"":o,s=e.namespace,f=void 0===s?"":s,m=(e.title,e.batchMode),E=e.resourceName,y=e.enabled,g=void 0!==y&&y,b=(0,c.default)(e,["type","store","detail","success","cluster","namespace","title","batchMode","resourceName","enabled"]),S=(0,i.default)((0,d.toJS)(r.list),"selectedRowKeys",[]),_=m?S.join(", "):n.name,O=v.default.open(N({onOk:function(){m?r.batchPatch(S,{cluster:u,namespace:f,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!g)}}}).then((function(){v.default.close(O),p.default.success({content:t("DISABLE_SUCCESSFUL")}),l&&l()})):r.patch({cluster:u,namespace:f,name:n.name,type:a},{metadata:{labels:{"alerting.kubesphere.io/enable":JSON.stringify(!g)}}}).then((function(){v.default.close(O),p.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},store:r,icon:"information",modal:h.default,tip:g?t("DISABLE_ALARM_TIP"):"",type:E,title:1===_.split(", ").length?t("DISABLE_ALERTING_POLICY"):t("DISABLE_MULTIPLE_ALERTING_POLICIES"),resource:_},b))}},"alerting.rule.delete":{on:function(e){var a=e.type,r=e.store,n=e.detail,l=e.success,o=e.name,u=(0,c.default)(e,["type","store","detail","success","name"]),s=v.default.open(N({onOk:function(){r.delete(N(N({},n),{},{type:a})).then((function(){v.default.close(s),p.default.success({content:t("DELETED_SUCCESSFULLY")}),l&&l()}))},store:r,type:o,modal:h.default,resource:n.name},u))}},"alerting.rule.monitor":{on:function(e){var t=e.store,a=e.expr,r=e.rule,n=(0,c.default)(e,["store","expr","rule"]),l=v.default.open(N({onOk:function(){v.default.close(l)},rule:r,expr:a,store:t,modal:b.default},n))}},"alerting.rule.reset":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,c=e.type,s=(0,i.default)((0,d.toJS)(r.list),"data",[]),m=(0,i.default)((0,d.toJS)(r.list),"selectedRowKeys",[]),h=s.filter((function(e){return-1!==m.indexOf(e.name)})),E=v.default.open({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o,s,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.length>0)){e.next=7;break}return a=[],h.forEach((function(e){var t=(0,i.default)(e._originData,"metadata.annotations",""),n=(0,i.default)(e._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',"");if(""!==n){var l=JSON.parse(n),o=(0,f.default)(l,"metadata.annotations",t);a.push(r.update(N(N({},e),{},{type:c}),o))}})),e.next=5,Promise.all(a);case 5:e.next=14;break;case 7:if(""!==(o=(0,i.default)(n._originData,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',""))){e.next=10;break}return e.abrupt("return");case 10:return s=JSON.parse(o),d=(0,f.default)(s,'metadata.annotations["alerting.kubesphere.io/initial-configuration"]',o),e.next=14,r.update(N(N({},n),{},{type:c}),d);case 14:p.default.success({content:t("RESET_SUCCESSFUL")}),v.default.close(E),u&&u();case 17:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:m.length>0?t("RESET_MULTIPLE_ALERTING_POLICIES"):t("RESET_ALERTING_POLICY"),desc:m.length>0?t.html("RESET_MULTIPLE_ALERTING_POLICIES_DESC",{name:m.join(",")}):t("RESET_ALERTING_POLICY_DESC"),modal:S.default})}}};a.default=I},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var o=l(r(96)),u=n(r(0)),c=r(72),s=l(r(26)),i=l(r(2245)),f=l(r(2246)),d=function(e){var a=e.AddRuleClick,r=e.formTemplate,n=e.handleEdit,l=e.handleDisable,d=e.handleDelete,p=e.onEdit,m=(0,u.useState)((0,s.default)(r,"spec.rules",[])),v=(0,o.default)(m,1)[0],h=function(e,t){n(e,t),p&&p()};return u.default.createElement("div",{className:i.default.ruleContainer},v.map((function(t,a){return u.default.createElement(f.default,{rule:t,key:a,handleEdit:function(){return h(a,t)},handleDisable:function(e){return l(a,e)},handleDelete:function(){return d(a)},builtInRule:e.builtInRule})})),!e.builtInRule&&v.length<c.ALERT_GROUP_MAX_LIMIT&&u.default.createElement("div",{className:i.default.addRuleContainer,onClick:function(){a()}},u.default.createElement("span",null,t("ADD_ALERTING_RULE")),u.default.createElement("span",null,t("ADD_ALERTING_RULE_DESC"))))};a.default=d},function(e,t,a){e.exports={ruleContainer:"tNWaj6nnUr8V2gxRTMdBe",addRuleContainer:"_2JdpGFOLxOJlmRICU9K51_"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(11),r(73),r(48),r(16),r(27),r(10),r(316),r(24),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(30)),u=l(r(96));r(5),r(11),r(73),r(48),r(16),r(27),r(10),r(4),r(316),r(24),r(64);var c=n(r(0)),s=r(186),i=l(r(26)),f=l(r(63)),d=l(r(135)),p=l(r(3)),m=r(923),v=l(r(880)),h=l(r(2247)),E={cpu:"cpu",pod:"pod",memory:"memory",disk:"storage",network:"network"},y=function(e){var a,r,n,l,y,g,b,S,_,O,C,T,R,D,N,k=e.rule,I=e.handleEdit,P=(0,f.default)((0,i.default)(k,"exprBuilder",""))?"custom":"template",A=!(0,f.default)((0,i.default)(k,"exprBuilder",""))&&Object.keys(k.exprBuilder)[0],w=(0,c.useState)((0,i.default)(k,"disable",!1)),M=(0,u.default)(w,2),L=M[0],j=M[1],x=(0,d.default)(m.RESOURCE_METRICS_CONFIG[A||"node"])||{};return c.default.createElement("div",{className:h.default.container},c.default.createElement("div",{className:h.default.head},c.default.createElement("div",{className:h.default.title},(N=Object.keys((0,i.default)(k.exprBuilder,"".concat(A,".metricThreshold."),{}))[0]||"pod",c.default.createElement("div",{className:(0,p.default)(h.default.icon,(D={},(0,o.default)(D,h.default.iconDisabled,L),(0,o.default)(D,h.default.iconOn,!L),D))},"custom"===P?c.default.createElement(s.Icon,{name:"computing-setting",size:40}):c.default.createElement(s.Icon,{size:40,name:E[N]}))),c.default.createElement("div",{className:h.default.text},c.default.createElement("p",null,c.default.createElement("span",{className:h.default.ruleName},k.alert),c.default.createElement(v.default,{data:(0,i.default)(k,"severity")})),c.default.createElement("p",null,L?t("DISABLED"):t("ENABLED")))),c.default.createElement("div",{className:h.default.opt},!e.builtInRule&&c.default.createElement("div",{className:h.default.iconBg},c.default.createElement(s.Icon,{name:"trash",size:16,onClick:function(){e.handleDelete()}})),c.default.createElement("div",{className:h.default.iconBg},c.default.createElement(s.Icon,{name:"pen",size:16,onClick:function(){return I()}})),c.default.createElement("div",{className:h.default.sToggle},c.default.createElement("div",{className:h.default.tooltip},c.default.createElement("span",null,L?t("ENABLE_RULE"):t("DISABLE_RULE"))),c.default.createElement("div",{className:h.default.triangle}),c.default.createElement(s.Toggle,{checked:!L,onChange:function(){j(!L),e.handleDisable(!L)}})))),c.default.createElement("div",{className:h.default.desc},"template"===P?(a=(0,i.default)(k,"exprBuilder.".concat(A,".names"),[]),r=(0,i.default)(k,"exprBuilder.".concat(A,".metricThreshold")),n=Object.keys(r)[0],l=Object.keys(r[n])[0],y="".concat(n,":").concat(l),g=x[y],b=t("".concat(g.label)).replace(/[(（]%[)）]/g,"").replace(/\s$/,""),S=g.ruleConfig.filter((function(e){return"thresholds"===e.name}))[0].reverser,_=(0,i.default)(k,"exprBuilder.".concat(A,".comparator")),O=S(Number(Object.values(r[n])[0])),C="core"===g.ruleConfig[1].unit?1===O?t("CORE"):t("CORE_PL"):g.ruleConfig[1].unit,T=k.for.slice(0,-1),R=k.for.slice(-1),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:h.default.rule_inline},c.default.createElement("span",{className:h.default.title},t("MONITORING_TARGETS"),":"),c.default.createElement("span",{className:h.default.descText},a.join(", "))),c.default.createElement("div",{className:h.default.last_inline},c.default.createElement("span",{className:h.default.title},t("TRIGGER_CONDITION"),":"),c.default.createElement("span",{className:h.default.descText},"%"===C?t({s:"ALERT_RULE_TEXT_PERCENT_SECOND",m:"ALERT_RULE_TEXT_PERCENT_MINUTE",h:"ALERT_RULE_TEXT_PERCENT_HOUR"}[R],{alterTypeText:b,comparator:_,thresholds:O,durationValue:T}):t({s:"ALERT_RULE_TEXT_SECOND",m:"ALERT_RULE_TEXT_MINUTE",h:"ALERT_RULE_TEXT_HOUR"}[R],{alterTypeText:b,comparator:_,thresholds:O,unit:C,durationValue:T}))))):c.default.createElement("div",{className:h.default.customLine},c.default.createElement("span",{className:h.default.title},t("RULE_EXPRESSION"),":"),c.default.createElement("span",{className:h.default.exprText},k.expr))))};a.default=y},function(e,t,a){e.exports={container:"_2GzfKX80Eke0zPeLXxPfM2",head:"_2-pYgB5f9M6c_dxEp3V-OA",title:"R12JDPJT80No5oZ4FiztO",icon:"_3j4f6EuAn61hWKaSfklSE9",iconDisabled:"_1i1vhIIoULv2lNF3VDZoDF",iconOn:"_3QxA9rxWLkeRRxUH232AYp",text:"GV4iNVpiZNi5y1eYC-T14",ruleName:"_131xteJjdwC-YER3D9sImU",opt:"_2JQS0c3hgKIpWOK_ZBNqhl",sToggle:"_1aLV7CjsMuz2qfIYoR0vcH",tooltip:"_3LrHPXIR_8Kl77N3lioHBg",triangle:"_12XVt_fPIF8OcnHxmeqdTd",icon_margin:"_1A7yLbbzn3pUU69BIERrDK",iconBg:"_33fXsJOVt-jfqMbyD6aM_m",desc:"SwG1GXUV75i58LL77WMxT",descText:"_1Xua_Y5-zLL20dIy5AC2OM",customLine:"_3H0BkBDaPA0ijgEG-3WRcu",rule_inline:"_2WB2cLO-VflGOmsOCEihps",last_inline:"_2LpyqiHLn7uxoUZyOaGmi_"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18),r(10);var o=l(r(315)),u=l(r(61)),c=l(r(96)),s=n(r(0)),i=l(r(1)),f=r(186),d=l(r(63)),p=l(r(26)),m=l(r(74)),v=l(r(242)),h=r(52),E=l(r(2249)),y=l(r(2250)),g=l(r(2257)),b=[{label:t("RULE_TEMPLATE"),value:"ruleTemplate"},{label:t("CUSTOM_RULE"),value:"customRule"}],S=function(e,a){var r=e.editRule,n=e.namespace,l=(0,d.default)(r)?b[0].value:(0,d.default)((0,p.default)(r,"exprBuilder",{}))?b[1].value:b[0].value,i=(0,s.useState)(l),S=(0,c.default)(i,2),_=S[0],O=S[1],C=(0,s.useRef)(),T=function(t){var a=e.onSave,r=C.current.target;r&&r.validate((function(){var e=r.getData();if("ruleTemplate"===_){var l=Object.keys((0,p.default)(e,"exprBuilder"))[0],o=(0,p.default)(e,"exprBuilder.".concat(l,".for")),c=(0,p.default)(e,"exprBuilder.".concat(l,".severity"));(0,m.default)(e,"for",o),(0,m.default)(e,"severity",c),(0,m.default)(e,"expr",""),(0,v.default)(e,"exprBuilder.".concat(l,".for")),(0,v.default)(e,"exprBuilder.".concat(l,".severity")),n&&((0,m.default)(e,"exprBuilder.workload.kind",(0,h.capitalize)((0,p.default)(e,"exprBuilder.workloadKind.kind"))),(0,m.default)(e,"exprBuilder.workload.names",(0,u.default)((0,p.default)(e,"exprBuilder.workloadKind.names"))),(0,v.default)(e,"exprBuilder.workloadKind"))}a(e),t&&t()}))};return(0,s.useEffect)((function(){var t=a.registerSubRoute,r=e.onCancel;t&&t(T,r)}),[_]),s.default.createElement("div",{className:E.default.AddRuleContainer},s.default.createElement("div",{className:"h6",style:{display:"flex",alignItems:"center"}},s.default.createElement(f.Icon,{name:"return",size:20,onClick:function(){var t=a.resetSubRoute;t&&t(),e.onCancel()}}),s.default.createElement("span",null,t("ADD_ALERTING_RULE"))),s.default.createElement("div",{className:E.default.AddForm},s.default.createElement(f.RadioGroup,{buttonWidth:132,value:_,wrapClassName:"radio",onChange:function(e){return O(e)}},b.map((function(e){return s.default.createElement(f.RadioButton,{key:e.value,value:e.value},e.label)}))),"ruleTemplate"===_?s.default.createElement(y.default,(0,o.default)({ref:C},e)):s.default.createElement(g.default,(0,o.default)({ref:C},e))))};S.contextTypes={registerSubRoute:i.default.func,resetSubRoute:i.default.func};var _=S;a.default=_},function(e,t,a){e.exports={AddRuleContainer:"_2mxIeOmShBUCQjQDhW8eZr",AddForm:"_2h7QSnC2ng2eLW5rvXhNqm"}},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(315)),o=r(a(0)),u=n(a(2251)),c=n(a(2256)),s=function(e,t){var a=e.namespace,r=(0,o.useRef)(),n=(0,o.useRef)();return(0,o.useImperativeHandle)(t,(function(){return{target:a?n.current.target:r.current.target}})),a?o.default.createElement(c.default,(0,l.default)({ref:n},e)):o.default.createElement(u.default,(0,l.default)({ref:r},e))},i=(0,o.forwardRef)(s);t.default=i},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(10);var o=l(r(96)),u=n(r(0)),c=l(r(26)),s=l(r(63)),i=l(r(447)),f=l(r(158)),d=r(186),p=l(r(1534)),m=l(r(2253)),v=l(r(995)),h=l(r(1536)),E=function(e,a){var r=e.editRule,n=e.isEdgeWize,l=(0,u.useState)((function(){return{alert:(0,c.default)(r,"alert",""),annotations:{summary:(0,c.default)(r,"annotations.summary",""),message:(0,c.default)(r,"annotations.message","")},exprBuilder:{node:{names:(0,c.default)(r,"exprBuilder.node.names",[]),comparator:(0,c.default)(r,"exprBuilder.node.comparator",">"),metricThreshold:(0,c.default)(r,"exprBuilder.node.metricThreshold",{}),for:(0,c.default)(r,"for","1m"),severity:(0,c.default)(r,"severity","critical")}},disable:(0,c.default)(r,"disable",!1),labels:(0,c.default)(r,"labels")}})),E=(0,o.default)(l,1)[0],y=(0,u.useRef)();(0,u.useImperativeHandle)(a,(function(){return{target:y.current}}));return u.default.createElement(d.Form,{data:E,ref:y},u.default.createElement("div",{className:h.default.label},t("RULE_SETTINGS")),u.default.createElement("div",{className:h.default.contentGroup},u.default.createElement(d.Form.Item,{label:t("RULE_NAME"),desc:t("CUSTOM_RULE_NAME_DESC"),rules:[{required:!0,message:t("RULE_NAME_REQUIRED")}]},u.default.createElement(d.Input,{name:"alert",maxLength:63})),u.default.createElement(m.default,{isEdgeWize:e.isEdgeWize,resourceType:"node",targetName:"exprBuilder.node.names",namespace:e.namespace,cluster:e.cluster,formTemplate:E}),u.default.createElement(d.Form.Item,{label:t("TRIGGER_CONDITION"),rules:[{required:!0,message:t("SET_ACTIVATION_CONDITION_DESC")},{validator:function(e,a,r){if(!a)return r();if((0,s.default)(a.comparator))return r({message:t("OPERATOR_REQUIRED"),field:e.field});if((0,s.default)(a.metricThreshold))return r({message:t("THRESHOLD_REQUIRED"),field:e.field});var n=Object.keys(a.metricThreshold)[0],l=Object.keys(a.metricThreshold[n])[0],o=a.metricThreshold[n][l];return""===o||!o||(0,f.default)(o)?r({message:t("THRESHOLD_REQUIRED"),field:e.field}):(0,i.default)(o,".")?r({message:t("THRESHOLD_INVALID"),field:e.field}):void r()}}]},u.default.createElement(p.default,{resourceType:"node",name:"exprBuilder.node",isEdge:n}))),u.default.createElement(v.default,null),u.default.createElement("div",{className:h.default.label},t("MESSAGE_SETTINGS")),u.default.createElement("div",{className:h.default.contentGroup},u.default.createElement(d.Form.Item,{className:h.default.message,label:t("MESSAGE_SUMMARY"),desc:t("MESSAGE_SUMMARY_DESC"),rules:[{required:!0,message:t("MESSAGE_REQUIRED")}]},u.default.createElement(d.Input,{name:"annotations.summary",maxLength:63})),u.default.createElement(d.Form.Item,{className:h.default.message,label:t("MESSAGE_DETAILS"),desc:t("MESSAGE_DETAILS_DESC")},u.default.createElement(d.TextArea,{name:"annotations.message",maxLength:256}))))},y=(0,u.forwardRef)(E);a.default=y},function(e,t,a){e.exports={inputs:"_N1QK3FSwZyUhmC5jvOfQ",type:"_3O6Tj_XW8-2d_0gkNgidLZ",comparator:"_3BQEWdpKyP0mgOK1FmNQ8l",thresholds:"WhWgUkL7AhyqWObEY28sj",normalSelect:"_2H5F4jdmw4f72x69vMsbXf",optionLabel:"_1KeB3k29XzD3WLjiYFmIQS",slider:"_17HczGprJRLyJeH8J4rvWL",condition_type:"_2zLx0kVpfomH5fkfT6F4Io"}},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=r(a(1535)),f=r(a(2255));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=d(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){return this.props.namespace?s.default.createElement(i.default,this.props):s.default.createElement(f.default,this.props)}}]),a}(s.default.Component);t.default=p},function(e,t,a){e.exports={alertRule:"_316Veyextczp08TAHWy-rA"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(241)),m=r(186),v=l(r(856)),h=l(r(1039));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=e.props.isEdgeWize?new h.default:new v.default,e.state={node:[],isLoading:!1},e.fetchData=function(t){var a=e.props.cluster;e.setState({isLoading:!1}),e.store.fetchList(y({cluster:a},t)).then((function(){e.setState({nodes:e.store.list.data.map((function(e){return{label:e.name,value:e.name}})),isLoading:!1})}))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(this.props.isEdgeWize?{type:"edgenode"}:void 0)}},{key:"render",value:function(){var e=this.props.targetName,a=(0,p.default)(this.store.list,["page","limit","total"]);return d.default.createElement(m.Form.Item,{label:t("MONITORING_TARGETS"),rules:[{required:!0,message:t("SELECT_NODE_TIP")}]},d.default.createElement(m.Select,{name:e,options:this.state.nodes,pagination:a,isLoading:this.state.isLoading,onFetch:this.fetchData,searchable:!0,multi:!0,placeholder:t("NODE")}))}}]),r}(d.Component);a.default=b},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=l(r(30)),u=l(r(96)),c=n(r(0)),s=r(186),i=l(r(26)),f=l(r(63)),d=l(r(447)),p=l(r(158)),m=l(r(318)),v=l(r(858)),h=l(r(1534)),E=l(r(1535)),y=l(r(995)),g=l(r(1536));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var S={Deployment:"Deployment",Statefulset:"StatefulSet",Daemonset:"DaemonSet"},_=function(e,a){var r=e.editRule,n=e.isEdgeWize,l=(0,c.useState)((function(){return{alert:(0,i.default)(r,"alert",""),annotations:{summary:(0,i.default)(r,"annotations.summary",""),message:(0,i.default)(r,"annotations.message","")},exprBuilder:{workload:{comparator:(0,i.default)(r,"exprBuilder.workload.comparator",">"),metricThreshold:(0,i.default)(r,"exprBuilder.workload.metricThreshold",{}),for:(0,i.default)(r,"for","1m"),severity:(0,i.default)(r,"severity","critical")},workloadKind:{kind:S[(0,i.default)(r,"exprBuilder.workload.kind","Deployment")],names:(0,i.default)(r,"exprBuilder.workload.names",[])}},disable:(0,i.default)(r,"disable",!1),labels:(0,i.default)(r,"labels")}})),_=(0,u.default)(l,1)[0],O=(0,c.useState)(!1),C=(0,u.default)(O,2),T=C[0],R=C[1],D=(0,c.useState)([]),N=(0,u.default)(D,2),k=N[0],I=N[1],P=(0,c.useRef)({Deployment:n?new v.default("deployments"):new m.default("deployments"),StatefulSet:n?new v.default("statefulsets"):new m.default("statefulsets"),DaemonSet:n?new v.default("daemonsets"):new m.default("daemonsets")}),A=(0,c.useRef)();(0,c.useImperativeHandle)(a,(function(){return{target:A.current}}));var w=(0,c.useCallback)((function(t,a){var r=e.cluster,n=e.namespace,l=P.current[t];R(!0),l.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({cluster:r,namespace:n},a)).then((function(){I(l.list.data.map((function(e){return{label:e.name,value:e.name}}))),R(!1)}))}),[]);(0,c.useEffect)((function(){w("Deployment",{})}),[]);return c.default.createElement(s.Form,{data:_,ref:A},c.default.createElement("div",{className:g.default.label},t("RULE_SETTINGS")),c.default.createElement("div",{className:g.default.contentGroup},c.default.createElement(s.Form.Item,{label:t("RULE_NAME"),desc:t("CUSTOM_RULE_NAME_DESC"),rules:[{required:!0,message:t("RULE_NAME_REQUIRED")}]},c.default.createElement(s.Input,{name:"alert",maxLength:63})),c.default.createElement(s.Form.Item,{label:t("RESOURCE_TYPE"),rules:[{validator:function(e,a,r){return(0,f.default)(a.names)?r({message:t("MONITOR_TARGET_EMPTY")}):r()}}]},c.default.createElement(E.default,{name:"exprBuilder.workloadKind",namespace:e.namespace,cluster:e.cluster,workloads:k,fetchWorkloads:w,stores:P.current,isLoading:T})),c.default.createElement(s.Form.Item,{label:t("TRIGGER_CONDITION"),rules:[{required:!0,message:t("SET_ACTIVATION_CONDITION_DESC")},{validator:function(e,a,r){if(!a)return r();if((0,f.default)(a.comparator))return r({message:t("OPERATOR_REQUIRED"),field:e.field});if((0,f.default)(a.metricThreshold))return r({message:t("THRESHOLD_REQUIRED"),field:e.field});var n=Object.keys(a.metricThreshold)[0],l=Object.keys(a.metricThreshold[n])[0],o=a.metricThreshold[n][l];return""===o||!o||(0,p.default)(o)?r({message:t("THRESHOLD_REQUIRED"),field:e.field}):(0,d.default)(o,".")?r({message:t("THRESHOLD_INVALID"),field:e.field}):void r()}}]},c.default.createElement(h.default,{name:"exprBuilder.workload",resourceType:"workload"}))),c.default.createElement(y.default,null),c.default.createElement("div",{className:g.default.label},t("MESSAGE_SETTINGS")),c.default.createElement("div",{className:g.default.contentGroup},c.default.createElement(s.Form.Item,{className:g.default.message,label:t("MESSAGE_SUMMARY"),desc:t("MESSAGE_SUMMARY_DESC"),rules:[{required:!0,message:t("MESSAGE_REQUIRED")}]},c.default.createElement(s.Input,{name:"annotations.summary",maxLength:63})),c.default.createElement(s.Form.Item,{className:g.default.message,label:t("MESSAGE_DETAILS"),desc:t("MESSAGE_DETAILS_DESC")},c.default.createElement(s.TextArea,{name:"annotations.message",maxLength:256}))))},O=(0,c.forwardRef)(_);a.default=O},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(48),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(48),r(24),r(193);var o=l(r(96)),u=n(r(0)),c=r(186),s=l(r(26)),i=r(52),f=r(993),d=l(r(1081)),p=l(r(2258)),m=l(r(995)),v=l(r(1028)),h=l(r(2261)),E=function(e,a){var r=e.editRule,n=(0,u.useRef)();(0,u.useImperativeHandle)(a,(function(){return{target:n.current}}));var l=(0,u.useState)({alert:(0,s.default)(r,"alert",""),annotations:{summary:(0,s.default)(r,"annotations.summary",""),message:(0,s.default)(r,"annotations.message","")},for:(0,s.default)(r,"for",""),expr:(0,s.default)(r,"expr",""),severity:(0,s.default)(r,"severity","critical"),disable:(0,s.default)(r,"disable",!1),labels:(0,s.default)(r,"labels")}),E=(0,o.default)(l,1)[0];return u.default.createElement(c.Form,{data:E,ref:n},u.default.createElement("div",{className:h.default.label},t("RULE_SETTINGS")),u.default.createElement("div",{className:h.default.contentGroup},u.default.createElement(c.Columns,null,u.default.createElement(c.Column,null,u.default.createElement(c.Form.Item,{label:t("RULE_NAME"),desc:t("CUSTOM_RULE_NAME_DESC"),rules:[{required:!0,message:t("RULE_NAME_REQUIRED")}]},u.default.createElement(c.Input,{name:"alert",maxLength:63}))),u.default.createElement(c.Column,null)),u.default.createElement(c.Columns,null,u.default.createElement(c.Column,null,u.default.createElement(c.Form.Item,{label:t("DURATION"),desc:t("ALERT_DURATION"),rules:[{validator:function(e,a,r){var n=a.slice(0,-1);if(!/^[0-9]*$/.test(n))return r({message:t("INVALID_TIME_DESC")});r()}}]},u.default.createElement(d.default,{name:"for",inputClassName:h.default.duration,unitOptions:f.durationUnitOptions,defaultValue:f.durationUnitOptions[1].value}))),u.default.createElement(c.Column,null,u.default.createElement(c.Form.Item,{label:t("SEVERITY"),rules:[{required:!0,message:t("SEVERITY_REQUIRED")}]},u.default.createElement(v.default,{name:"severity",defaultValue:"critical"})))),u.default.createElement(c.Form.Item,{label:t("RULE_EXPRESSION"),desc:(0,i.learnMoreTip)(t.html("ALERT_RULE_EXPRESSION_DESC")),rules:[{required:!0,message:t("ALERT_RULE_REQUIRED")}]},u.default.createElement(p.default,{name:"expr",store:e.store,cluster:e.cluster,namespace:e.namespace}))),u.default.createElement(m.default,null),u.default.createElement("div",{className:h.default.label},t("MESSAGE_SETTINGS")),u.default.createElement("div",{className:h.default.contentGroup},u.default.createElement(c.Form.Item,{className:h.default.message,label:t("MESSAGE_SUMMARY"),desc:t("MESSAGE_SUMMARY_DESC"),rules:[{required:!0,message:t("MESSAGE_REQUIRED")}]},u.default.createElement(c.Input,{name:"annotations.summary",maxLength:63})),u.default.createElement(c.Form.Item,{className:h.default.message,label:t("MESSAGE_DETAILS"),desc:t("MESSAGE_DETAILS_DESC")},u.default.createElement(c.TextArea,{name:"annotations.message",maxLength:256}))))},y=(0,u.forwardRef)(E);a.default=y},function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(18),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(9),a(4),a(23),a(57),a(17);var l,o,u=r(a(315)),c=r(a(36)),s=r(a(37)),i=r(a(55)),f=r(a(56)),d=r(a(51)),p=r(a(49)),m=n(a(0)),v=a(239),h=a(14),E=r(a(2259));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=(0,v.observer)((o=function(e){(0,i.default)(a,e);var t=y(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cluster,a=e.namespace;this.hasMonitoring&&this.props.store.fetchMetadata({cluster:t,namespace:a})}},{key:"render",value:function(){return m.default.createElement(E.default,(0,u.default)({},this.props,{supportMetrics:this.supportMetrics}))}},{key:"hasMonitoring",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}},{key:"supportMetrics",get:function(){return this.hasMonitoring?this.props.store.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}})):[]}}]),a}(m.Component),(0,p.default)(o.prototype,"supportMetrics",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"supportMetrics"),o.prototype),l=o))||l;t.default=g},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(11),r(18),r(16),r(9),r(4),r(23),r(24),r(17),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(18),r(42),r(16),r(9),r(4),r(23),r(57),r(24),r(193),r(17);var o,u,c=n(r(61)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(49)),v=l(r(0)),h=n(r(895)),E=n(r(855)),y=n(r(446)),g=r(14),b=r(239),S=n(r(3)),_=r(186),O=n(r(1486)),C=n(r(1488)),T=n(r(2260));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,b.observer)((u=function(e){(0,f.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleMetricSelect=function(t){e.props.onChange(t)},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.name,r=e.value,n=e.onChange,l=e.labelsets,o=e.onLabelSearch,u=e.supportMetrics,c=e.supportDebugButton,s=void 0!==c&&c,i=e.className;return v.default.createElement("div",{className:(0,S.default)(T.default.wrapper,i)},v.default.createElement(O.default,{options:this.groupedMetrics,onSelect:this.handleMetricSelect},v.default.createElement("span",{className:T.default.trigger},t("MONITOR_METRIC"),v.default.createElement(_.Icon,{type:"light",name:"caret-down"}))),v.default.createElement("div",{className:T.default.input},v.default.createElement(C.default,{name:a,value:r,onChange:n,metrics:u,labelsets:l,onLabelSearch:o})),s&&v.default.createElement("div",{onClick:this.props.onDebugClick,className:(0,S.default)(T.default.debug,T.default.btn)},v.default.createElement(_.Icon,{name:"terminal",type:"light"})," ",v.default.createElement("span",null,t("DEBUGB_DATA"))))}},{key:"groupedMetrics",get:function(){var e=/:\w+:/,t=(0,c.default)(this.props.supportMetrics);return t=t.filter((function(t){return!e.test(t.value)})),t=(0,E.default)(t,(function(e){return e.value.split("_")[0]})),t=(0,h.default)(t,(function(e,t){var a=1===e.length&&e[0]===t?[]:e.map((function(e){return{label:e.value,value:e.value,desc:e.desc}}));return{children:(0,y.default)(a,"label"),label:t,value:t}})),(0,y.default)(t,"label")}}]),r}(v.Component),(0,m.default)(u.prototype,"groupedMetrics",[g.computed],Object.getOwnPropertyDescriptor(u.prototype,"groupedMetrics"),u.prototype),o=u))||o;a.default=D},function(e,t,a){e.exports={wrapper:"_16Pt4wQ6HRvTCyF6zExdXE",trigger:"_19O6Dob9Y5t0xlUg0Cfy1D",input:"_15nLj_uwsZw-azdXehcyDi",debug:"_3rxaO3HkvVvkYP-Y4tRSGS"}},function(e,t,a){e.exports={label:"_2g32MT4YhUAiyoPaC_JbEj",contentGroup:"_2mbv2p5P2vAqJxbzEUvb94",message:"_1FdjkvGFoIHEmOzv2WLH__",duration:"_3R3dvfKDRUF1BTUUZHupBM",CustomExpr:"gpoBCKKdLW0lKPy2tOU4O"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1532)),l=r(a(1533)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0,icon:"cdn"},{title:"ALERTING_RULE",component:l.default,required:!0,icon:"bell"}];t.default=o},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2264)),l=r(a(2265)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0,icon:"cdn"},{title:"ALERTING_RULE",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(48),r(42),r(4),r(23),r(57),r(24),r(193),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=n(r(1081)),p=r(832),m=r(239),v=n(r(0)),h=r(72);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:"".concat(e.props.cluster_id,"-").concat(r),namespace:e.namespace,cluster:e.props.cluster}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.timeValidator=function(e,a,r){var n=a.slice(0,-1);if(!/^[0-9]*$/.test(n))return r({message:t("INVALID_TIME_DESC")});r()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.isEdit,r=e.formRef,n=e.formTemplate,l=a?[]:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}];return v.default.createElement(f.Form,{data:n,ref:r},v.default.createElement(f.Columns,null,v.default.createElement(f.Column,null,v.default.createElement(f.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:l},v.default.createElement(f.Input,{name:"metadata.name",onChange:this.handleNameChange,maxLength:63,readOnly:a}))),v.default.createElement(f.Column,null,v.default.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:h.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},v.default.createElement(f.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),v.default.createElement(f.Columns,null,v.default.createElement(f.Column,null,v.default.createElement(f.Form.Item,{label:t("CHECK_INTERVAL"),desc:t("ALERTING_POLICY_CHECK_INTERVAL_DESC"),rules:[{validator:this.timeValidator}]},v.default.createElement(d.default,{name:"spec.interval",unitOptions:this.durationUnitOptions,defaultValue:this.durationUnitOptions[1].value}))),v.default.createElement(f.Column,null,v.default.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(f.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))))}},{key:"namespace",get:function(){return this.props.namespace}},{key:"durationUnitOptions",get:function(){return[{label:t("SECONDS"),value:"s"},{label:t("MINUTES"),value:"m"},{label:t("HOURS"),value:"h"}]}},{key:"severities",get:function(){return p.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(v.default.Component))||l;a.default=y},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(11),a(6),a(192),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(11),a(6),a(28),a(192),a(191),a(159),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var l=n(a(315)),o=n(a(30)),u=n(a(58)),c=n(a(96)),s=r(a(0)),i=n(a(26)),f=n(a(135)),d=n(a(63)),p=n(a(74)),m=a(186),v=n(a(2266)),h=n(a(2270));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=function(e){var t=(0,s.useState)(!1),a=(0,c.default)(t,2),r=a[0],n=a[1],o=(0,s.useState)((0,i.default)(e,"formTemplate")),E=(0,c.default)(o,2),g=E[0],b=E[1],S=(0,s.useState)(null),_=(0,c.default)(S,2),O=_[0],C=_[1],T=(0,s.useState)({}),R=(0,c.default)(T,2),D=R[0],N=R[1],k=function(){C(null),N({})};(0,s.useEffect)((function(){e.cluster_id&&(0,p.default)(g,"metadata.labels.app_instance",e.cluster_id),e.app_id&&(0,p.default)(g,"metadata.labels.openpitrix_app_id",e.app_id)}),[]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Form,{data:g,ref:e.formRef}),s.default.createElement("div",null,r?s.default.createElement(h.default,(0,l.default)({},e,{formTemplate:g,onCancel:function(){n(!1),k()},onSave:function(e){var t=e.rule,a=(0,u.default)(e,["rule"]),r=(0,i.default)(g,"spec.rules",[]),l=JSON.parse((0,i.default)(g,"metadata.annotations.dmp_managed_field","[]"));(0,d.default)(D)?(r.push(a),l.push(t)):(r.splice(O,1,a),l.splice(O,1,t)),(0,p.default)(g,"metadata.annotations.dmp_managed_field",JSON.stringify(l)),b(y(y({},g),{},{spec:y(y({},g.spec),{},{rules:r})})),n(!1),k()},editRule:D})):s.default.createElement(v.default,{formTemplate:g,AddRuleClick:function(){return n(!0)},handleEdit:function(e,t){n(!0);var a=(0,i.default)(JSON.parse((0,i.default)(g,"metadata.annotations.dmp_managed_field","[]")),"[".concat(e,"]"));N(y(y({},(0,f.default)(t)),{},{exprBuilder:a})),C(e)},handleDisable:function(e,t){var a=(0,i.default)(g,"spec.rules",[]);(0,p.default)(a[e],"disable",t),b(y(y({},g),{},{spec:y(y({},g.spec),{},{rules:a})}))},handleDelete:function(e){var t=(0,i.default)(g,"spec.rules",[]);t.splice(e,1),b(y(y({},g),{},{spec:y(y({},g.spec),{},{rules:t})}))},onEdit:e.onEdit,index:"ruleList"})))};t.default=g},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var o=l(r(96)),u=n(r(0)),c=l(r(26)),s=l(r(2267)),i=l(r(2268)),f=function(e){var a=e.AddRuleClick,r=e.formTemplate,n=e.handleEdit,l=e.handleDisable,f=e.handleDelete,d=e.onEdit,p=(0,u.useState)((0,c.default)(r,"spec.rules",[])),m=(0,o.default)(p,1)[0],v=function(e,t){n(e,t),d&&d()};return u.default.createElement("div",{className:s.default.ruleContainer},m.map((function(e,t){return u.default.createElement(i.default,{rule:e,key:t,handleEdit:function(){return v(t,e)},handleDisable:function(e){return l(t,e)},handleDelete:function(){return f(t)}})})),u.default.createElement("div",{className:s.default.addRuleContainer,onClick:function(){a()}},u.default.createElement("span",null,t("ADD_ALERTING_RULE")),u.default.createElement("span",null,t("ADD_ALERTING_RULE_DESC"))))};a.default=f},function(e,t,a){e.exports={ruleContainer:"_2Tc8iph0naZ2K8oti1xUS5",addRuleContainer:"_3p9eZbjIvTe2c64CnnPTGI"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(30)),u=l(r(96));r(10);var c=n(r(0)),s=r(186),i=l(r(880)),f=l(r(26)),d=l(r(63)),p=l(r(3)),m=l(r(2269)),v={cpu:"cpu",pod:"pod",memory:"memory",disk:"storage",network:"network"},h=function(e){var a,r,n=e.rule,l=e.handleEdit,h=!(0,d.default)((0,f.default)(n,"exprBuilder",""))&&Object.keys(n.exprBuilder)[0],E=(0,c.useState)((0,f.default)(n,"disable",!1)),y=(0,u.default)(E,2),g=y[0],b=y[1];return c.default.createElement("div",{className:m.default.container},c.default.createElement("div",{className:m.default.head},c.default.createElement("div",{className:m.default.title},(r=Object.keys((0,f.default)(n.exprBuilder,"".concat(h,".thresholds."),{}))[0]||"pod",c.default.createElement("div",{className:(0,p.default)(m.default.icon,(a={},(0,o.default)(a,m.default.iconDisabled,g),(0,o.default)(a,m.default.iconOn,!g),a))},c.default.createElement(s.Icon,{size:40,name:v[r]}))),c.default.createElement("div",{className:m.default.text},c.default.createElement("p",null,c.default.createElement("span",null,n.alert),c.default.createElement(i.default,{data:(0,f.default)(n,"severity")})),c.default.createElement("p",null,g?t("DISABLED"):t("ENABLED")))),c.default.createElement("div",{className:m.default.opt},c.default.createElement(s.Icon,{name:"trash",size:16,onClick:function(){e.handleDelete()}}),c.default.createElement(s.Icon,{name:"pen",size:16,onClick:function(){return l()}}),c.default.createElement("div",{className:m.default.sToggle},c.default.createElement("div",{className:m.default.tooltip},g?t("DISABLED"):t("ENABLED")),c.default.createElement("div",{className:m.default.triangle}),c.default.createElement(s.Toggle,{checked:!g,onChange:function(){b(!g),e.handleDisable(!g)}})))),c.default.createElement("div",{className:m.default.desc},c.default.createElement("div",null,c.default.createElement("span",{className:m.default.title},"".concat(t("RULE_EXPRESSION"),":")),c.default.createElement("span",{className:m.default.descText},n.expr))))};a.default=h},function(e,t,a){e.exports={container:"_2ClEdhbYmUEQz1Ns3z2oBm",head:"JahgMrDpOJ7IeoQM6gjY8",title:"_2oWQ1UiDBVYOpSMoq36nDo",icon:"_8uv0_owFNgDTHY82HdguE",iconDisabled:"_7ZVf12G3z7bPwUA0kTaFe",iconOn:"_2c2QQSCxzhSwMb5qUtCMRF",text:"iJjVxOOjndl34TfCm6bKo",opt:"_2ORwrYMF6gq7YoM2vXssKg",sToggle:"_1nBYDpMnB1IS60TYL8GX4",tooltip:"_1XGDMRuyjU3okCY0sTVb90",triangle:"JYn0e1e3uiIQxqILkeBBY",desc:"_1SFrnr2CqgHgXHa0IPMAl4",descText:"_1JMIexA-OB-7psECMogEuN"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=l(r(315)),u=l(r(30)),c=l(r(58)),s=n(r(0)),i=l(r(26)),f=l(r(1)),d=r(881),p=l(r(2271)),m=l(r(2272)),v=r(930);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e,a){var r=(0,s.useRef)(),n=(0,i.default)(e.formTemplate,"metadata.labels.app_instance",e.cluster_id),l=function(t){var a=e.onSave,l=r.current.target;l&&r.current.target.validate((function(){var r=l.getData(),o=r.exprBuilder,u=(0,c.default)(r,["exprBuilder"]),s=(0,v.getDMPQuery)({rule:o,duration:u.for,cluster_id:n,namespace:e.namespace});a(E(E({},u),{},{expr:s,rule:o})),t&&t()}))};return(0,s.useEffect)((function(){var t=a.registerSubRoute,r=e.onCancel;t&&t(l,r)}),[]),s.default.createElement("div",{className:p.default.AddRuleContainer},s.default.createElement("div",{className:"h6"},s.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){var t=a.resetSubRoute;t&&t(),e.onCancel()}},s.default.createElement(d.ReactComponent,null),s.default.createElement("span",null,t("ADD_ALERTING_RULE")))),s.default.createElement("div",{className:p.default.AddForm},s.default.createElement(m.default,(0,o.default)({ref:r},e))))};y.contextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func};var g=y;a.default=g},function(e,t,a){e.exports={AddRuleContainer:"Md_cN9Ekv_uoIpHYWwRHm",AddForm:"_1RHUtXqsCI2SkvAwklsRyp"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(10),r(24),r(64),r(1092);var o=l(r(96)),u=n(r(0)),c=r(186),s=l(r(26)),i=l(r(135)),f=l(r(74)),d=l(r(63)),p=l(r(2273)),m=l(r(2274)),v=r(1294),h=l(r(995)),E=function(e,a){var r=e.editRule,n=(0,s.default)(e.formTemplate,"metadata.labels.app_instance",e.cluster_id),l=(0,s.default)(e.formTemplate,"metadata.labels.openpitrix_app_id",e.app_id),E=(0,u.useState)({alert:(0,s.default)(r,"alert",""),annotations:{summary:(0,s.default)(r,"annotations.summary",""),message:(0,s.default)(r,"annotations.message","")},exprBuilder:{metricType:(0,s.default)(r,"exprBuilder.metricType",""),comparator:(0,s.default)(r,"exprBuilder.comparator",""),thresholds:(0,s.default)(r,"exprBuilder.thresholds","")},for:(0,s.default)(r,"for","1m"),severity:(0,s.default)(r,"severity","warning"),disable:(0,s.default)(r,"disable",!1),labels:(0,s.default)(r,"labels")}),y=(0,o.default)(E,2),g=y[0],b=y[1],S=(0,u.useRef)();(0,u.useImperativeHandle)(a,(function(){return{target:S.current}}));return u.default.createElement(c.Form,{data:g,ref:S},u.default.createElement("div",{className:p.default.label},t("RULE_SETTINGS")),u.default.createElement("div",{className:p.default.contentGroup},u.default.createElement(c.Form.Item,{label:t("RULE_NAME"),desc:t("CUSTOM_RULE_NAME_DESC"),rules:[{required:!0,message:t("RULE_NAME_REQUIRED")}]},u.default.createElement(c.Input,{name:"alert",maxLength:63})),u.default.createElement(c.Form.Item,{label:t("TRIGGER_CONDITION"),rules:[{required:!0,message:t("SET_ACTIVATION_CONDITION_DESC")},{validator:function(e,a,r){if(!a)return r();if((0,d.default)(a.comparator))return r({message:t("OPERATOR_REQUIRED"),field:e.field});if(!(0,d.default)(a.thresholds)){var n=Object.keys(a.thresholds)[0],l=Object.keys(a.thresholds[n])[0];if(""===a.thresholds[n][l])return r({message:t("THRESHOLD_REQUIRED"),field:e.field})}r()}}]},u.default.createElement(m.default,{resourceType:l,name:"exprBuilder",metricType:(0,s.default)(g,"exprBuilder.metricType"),thresholds:(0,s.default)(g,"exprBuilder.thresholds"),comparator:(0,s.default)(g,"exprBuilder.comparator"),severity:(0,s.default)(g,"severity"),for:(0,s.default)(g,"for"),handleMetricChange:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{unit:""},l=a.unit,o=(0,i.default)(g);if((0,f.default)(o,"exprBuilder.thresholds",e.thresholds),(0,f.default)(o,"exprBuilder.comparator",e.comparator),t&&((0,f.default)(o,"exprBuilder.metricType",t),(0,d.default)(r))){var u=(0,s.default)(v.ALL_SUMMARY_CONFIG,t,"").replaceAll("$CLUSTERID",n).replaceAll("$THRESHOLD"," ").replaceAll("$UNIT",l),c=(0,s.default)(v.ALL_MESSAGE_CONFIG,t,"").replaceAll("$CLUSTERID",n).replaceAll("$THRESHOLD"," ").replaceAll("$UNIT",l);(0,f.default)(o,"annotations.summary",u),(0,f.default)(o,"annotations.message",c)}(0,f.default)(o,"for",e.duration),(0,f.default)(o,"severity",e.severity),b(o)}}))),u.default.createElement(h.default,null),u.default.createElement("div",{className:p.default.label},t("MESSAGE_SETTINGS")),u.default.createElement("div",{className:p.default.contentGroup},u.default.createElement(c.Form.Item,{label:t("MESSAGE_SUMMARY"),desc:t("MESSAGE_SUMMARY_DESC"),rules:[{required:!0,message:t("MESSAGE_REQUIRED")}]},u.default.createElement(c.Input,{name:"annotations.summary",maxLength:63})),u.default.createElement(c.Form.Item,{label:t("MESSAGE_DETAILS"),desc:t("MESSAGE_DETAILS_DESC")},u.default.createElement(c.TextArea,{name:"annotations.message",maxLength:256}))))},y=(0,u.forwardRef)(E);a.default=y},function(e,t,a){e.exports={label:"XS1LS4IFOQ8CNQ2AsfMJv",contentGroup:"j3tnwlodcDpj5qv8eo3k8",inputs:"_1iFffDJTXDmoJLjUhAqOwd"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(16),r(27),r(98),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(96)),o=n(r(315)),u=n(r(58)),c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(88)),d=n(r(55)),p=n(r(56)),m=n(r(51));r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(27),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(7);var v=n(r(0)),h=n(r(1)),E=n(r(3)),y=n(r(76)),g=n(r(26)),b=n(r(135)),S=r(52),_=r(186),O=n(r(799)),C=n(r(1028)),T=n(r(2275)),R=r(930),D=r(1294);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=[1,5,15,30,60].map((function(e){return{label:t.html("LASTING_MINUTES",{minutes:e}),value:"".concat(e,"m")}})),A=R.severityOptions.map((function(e){return{label:e.label,value:e.value}})),w=function(e){(0,d.default)(r,e);var a=I(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getStateFromProps=function(e){var t=e.thresholds;return{comparator:e.comparator,thresholds:""!==t?Number(t):t,duration:(0,g.default)(e,"for",P[0].value),severity:(0,g.default)(e,"severity",A[0].value)}},n.getSelectOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var a=e.prefixIcon,r=e.color,n=e.type,l=e.label,o=e.value,u=e.disabled,c={label:t(l,{value:o}),value:o};return a&&(c.label=v.default.createElement("div",{className:(0,E.default)(T.default.optionLabel,T.default[n])},v.default.createElement(_.Icon,{name:a,size:20,color:r}),c.label)),u&&(c.disabled=u),c}))},n.handleMetricTypeChange=function(e){var t=n.state,a=t.severity,r=t.duration,l=n.metricConfig.find((function(t){return t.value===e})),o=(0,g.default)(l,"ruleConfig[0].value","");n.setState({metricType:e,thresholds:"",comparator:o},(function(){n.props.handleMetricChange({thresholds:"",comparator:o,severity:a,duration:r},e,{unit:(0,g.default)(l,"ruleConfig[1].unit")})}))},n.handleItemChange=function(e){return(0,S.cacheFunc)(e,(function(t,a){var r=n.props.handleMetricChange,l=(0,y.default)(a)||!a?t:a;"thresholds"===e&&(l=String(l).replace(/([a-zA-Z%/])+$/g,"")),n.setState((0,c.default)({},e,l),(function(){var t=n.state,a=t.comparator,o=t.thresholds,u=t.duration,c=t.severity;r({thresholds:"thresholds"===e?Number(l):o,comparator:"comparator"===e?l:a,duration:u,severity:c})}))}),(0,f.default)(n))},n.handleDurationChange=function(e){var t=n.state,a=t.severity,r=t.thresholds,l=t.comparator;n.setState({duration:e},(function(){n.props.handleMetricChange({thresholds:r,duration:e,severity:a,comparator:l})}))},n.handleSeverityChange=function(e){var t=n.state,a=t.duration,r=t.thresholds,l=t.comparator;n.setState({severity:e},(function(){n.props.handleMetricChange({thresholds:r,duration:a,comparator:l,severity:e})}))},n.renderConfigItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.type,r=e.name,l=e.placeholder,c=e.options,s=void 0===c?[]:c,i=(e.converter,(0,u.default)(e,["type","name","placeholder","options","converter"])),f={key:r,className:T.default[r],placeholder:t(l),value:(0,g.default)(n.state,r),onChange:n.handleItemChange(r)};switch(a){default:case"select":var d=n.getSelectOptions(s);return v.default.createElement(_.Select,(0,o.default)({options:d},f,i));case"number":return v.default.createElement(O.default,(0,o.default)({showUnit:!0},f,i))}},n.state=k({metricType:e.metricType||n.metricConfig[0].value},n.getStateFromProps(e)),n.metricOps=n.getSelectOptions(n.metricConfig),n}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.metricType){var t=this.state,a=t.comparator,r=t.thresholds;this.setState({comparator:a||(0,g.default)(this.ruleConfig,"[0].value",a),thresholds:""!==r?Number(r):(0,g.default)(this.ruleConfig,"[1].value",r)},(function(){e.props.handleMetricChange({thresholds:e.state.thresholds,duration:e.state.duration,severity:e.state.severity,comparator:e.state.comparator},e.state.metricType,{unit:(0,g.default)(e.ruleConfig,"[1].unit")})}))}}},{key:"render",value:function(){var e=this.state,t=e.metricType,a=e.duration,r=e.severity,n=this.ruleConfig;return v.default.createElement("div",{className:T.default.inputs},v.default.createElement(_.Select,{className:T.default.type,options:this.metricOps,value:t,onChange:this.handleMetricTypeChange}),n.map(this.renderConfigItem),v.default.createElement(_.Select,{value:a,options:P,onChange:this.handleDurationChange}),v.default.createElement(C.default,{value:r,options:A,onChange:this.handleSeverityChange}))}},{key:"resourceMetricsConfig",get:function(){var e=this.props.resourceType;return(0,b.default)(D.RESOURCE_METRICS_CONFIG[e])||{}}},{key:"metricConfig",get:function(){var e=this.resourceMetricsConfig;return Object.entries(e).map((function(e){var t=(0,l.default)(e,2);return k({value:t[0]},t[1])}))}},{key:"selectMetricConfig",get:function(){var e=this.state.metricType;return this.metricConfig.find((function(t){return t.value===e}))}},{key:"ruleConfig",get:function(){return(0,g.default)(this.selectMetricConfig,"ruleConfig")||[]}}]),r}(v.default.Component);w.propTypes={value:h.default.object,onChange:h.default.func},w.defaultProps={metricConfig:[],value:{},onChange:function(){}};var M=w;a.default=M},function(e,t,a){e.exports={inputs:"_1ElkAbsvtdzOOkcnK66XzH",type:"_3cqi7bYJMHmrQClJeRoobj",optionLabel:"_2Rm48iWjjbNabO0sdXSIeT",slider:"UOTqYNeayjqXhLKY5L4Nt",condition_type:"_21FGEK2QjdUrcDOZPnqz3c"}},,,,,,function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(969),o=a(930),u=[{NameZh:"MySQL下线",NameEn:"MySQLIsDown",Expression:'mysql_up{namespace="$NAMESPACE",service="$CLUSTERID-metrics"} == 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"MySQL下线",Summary:"RadonDB MySQL 【$CLUSTERID】 MySQL下线",Message:"RadonDB MySQL: $CLUSTERID，MySQL下线。 当前值：{{ $value }}"},{NameZh:"主从复制延迟",NameEn:"MySQLSlaveBehindMaster",Expression:'rate(mysql_slave_status_seconds_behind_master{namespace="$NAMESPACE",service="$CLUSTERID-metrics"}[1m])',Operator:">",Unit:"s",ProposedDuration:"1m",Explain:"从库落后主库$THRESHOLD$UNIT ",Summary:"RadonDB MySQL 【$CLUSTERID】 从库落后主库$THRESHOLD$UNIT ",Message:"RadonDB MySQL: $CLUSTERID，从库落后主库$THRESHOLD$UNIT 。 当前值：{{ $value }}"},{NameZh:"CPU使用率",NameEn:"MySQLCPUUtilization",Expression:'(sum(irate(container_cpu_usage_seconds_total{namespace="$NAMESPACE",pod=~".*$CLUSTERID.*",container!="POD",container!=""}[3m])) by (pod)) / (sum(kube_pod_container_resource_limits{resource="cpu",namespace="$NAMESPACE",pod=~".*$CLUSTERID.*"}) by (pod)) * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"CPU使用率超过$THRESHOLD$UNIT",Summary:"RadonDB MySQL 【$CLUSTERID】 CPU使用率超过$THRESHOLD$UNIT",Message:"RadonDB MySQL: $CLUSTERID，CPU使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"内存使用率",NameEn:"MySQLMemUtilization",Expression:'(sum(container_memory_working_set_bytes{namespace="$NAMESPACE",pod=~".*$CLUSTERID.*",container!="POD",container!=""}) by (pod)) / (sum(kube_pod_container_resource_limits{resource="memory",namespace="$NAMESPACE",pod=~".*$CLUSTERID.*"}) by (pod)) * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"内存使用率超过$THRESHOLD$UNIT",Summary:"RadonDB MySQL 【$CLUSTERID】 内存使用率超过$THRESHOLD$UNIT",Message:"RadonDB MySQL: $CLUSTERID，内存使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"磁盘使用率",NameEn:"MySQLDisk",Expression:'(kubelet_volume_stats_used_bytes{persistentvolumeclaim=~".*$CLUSTERID.*"} / kubelet_volume_stats_capacity_bytes{persistentvolumeclaim=~".*$CLUSTERID.*"} * 100)',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"磁盘使用率超过$THRESHOLD$UNIT",Summary:"RadonDB MySQL 【$CLUSTERID】 磁盘使用率超过$THRESHOLD$UNIT",Message:"RadonDB MySQL: $CLUSTERID，磁盘使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"连接数利用率",NameEn:"MySQLTooManyConnections",Expression:'mysql_global_status_max_used_connections{namespace="$NAMESPACE",service="$CLUSTERID-metrics"} / mysql_global_variables_max_connections{namespace="$NAMESPACE",service="$CLUSTERID-metrics"} * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"连接数使用超过$THRESHOLD$UNIT",Summary:"RadonDB MySQL 【$CLUSTERID】 连接数使用超过$THRESHOLD$UNIT",Message:"RadonDB MySQL: $CLUSTERID，连接数使用超过$THRESHOLD$UNIT。 当前值：{{ $value }}"}],c={Metric:{MySQLIsDown:{label:"MySQLIsDown",autoComplete:!0,ruleConfig:l.disabledRuleConfig},MySQLSlaveBehindMaster:{label:"MySQLSlaveBehindMaster",ruleConfig:l.TIME_RULE_CONFIG},MySQLCPUUtilization:{label:"MySQLCPUUtilization",ruleConfig:l.PERCENT_RULE_CONFIG},MySQLMemUtilization:{label:"MySQLMemUtilization",ruleConfig:l.PERCENT_RULE_CONFIG},MySQLDisk:{label:"MySQLDisk",ruleConfig:l.PERCENT_RULE_CONFIG},MySQLTooManyConnections:{label:"MySQLTooManyConnections",ruleConfig:l.PERCENT_RULE_CONFIG}},Query:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(930),o=a(969),u=[{NameEn:"PGUnhealth",Expression:'pg_auto_failover_unhealth_count{namespace="$NAMESPACE",service="$CLUSTERID-autofailover"} != 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"PostgreSQL 节点不健康。",Message:"PostgreSQL 节点不健康。"},{NameEn:"PGAsync",Expression:'pg_auto_failover_async_count{namespace="$NAMESPACE",service="$CLUSTERID-autofailover"} != 0',Operator:">",Unit:"s",ProposedDuration:"1m",Summary:"PostgreSQL 节点出现异步模式。",Message:"PostgreSQL 节点出现异步模式。"},{NameEn:"PGNotRunning",Expression:'pg_auto_failover_not_running_count{namespace="$NAMESPACE",service="$CLUSTERID-autofailover"} != 0',Operator:">",Unit:"s",ProposedDuration:"1m",Summary:"PostgreSQL 未运行。",Message:"PostgreSQL 未运行。"},{NameEn:"PGInvalid",Expression:'pg_auto_failover_not_running_count{namespace="$NAMESPACE",service="$CLUSTERID-autofailover"} != 0 ',Operator:">",Unit:"s",ProposedDuration:"1m",Summary:"PostgreSQL 存在无效节点。",Message:"PostgreSQL 存在无效节点。"},{NameEn:"PGCPUUtilization",Expression:'(sum(irate(container_cpu_usage_seconds_total{namespace="$NAMESPACE",pod=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*",container="postgresql"}[3m])) by (pod)) / (sum(kube_pod_container_resource_limits{resource="cpu", container="postgresql", namespace="$NAMESPACE",pod=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*"}) by (pod)) * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 CPU使用率超过$THRESHOLD$UNIT。",Message:"RadonDB PostgreSQL: $CLUSTERID，CPU使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameEn:"PGMemUtilization",Expression:'(sum(container_memory_working_set_bytes{namespace="$NAMESPACE",pod=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*",container="postgresql"}) by (pod)) / (sum(kube_pod_container_resource_limits{resource="memory", container="postgresql", namespace="$NAMESPACE", pod=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*"}) by (pod)) * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 内存使用率超过$THRESHOLD$UNIT。",Message:"RadonDB PostgreSQL: $CLUSTERID，内存使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameEn:"PGDisk",Expression:'kubelet_volume_stats_used_bytes{persistentvolumeclaim=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*"} / kubelet_volume_stats_capacity_bytes{persistentvolumeclaim=~".*$CLUSTERID-readwriteinstance.*|.*$CLUSTERID-readonlyinstance.*"} * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 磁盘使用率超过$THRESHOLD$UNIT。",Message:"RadonDB PostgreSQL: $CLUSTERID，磁盘使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameEn:"PGConnPerc",Expression:'(sum(pg_stat_database_numbackends{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"}) by (pod) / sum(pg_settings_max_connections{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"}) by (pod)) * 100',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 连接数消耗已超过最大可用连接数的$THRESHOLD$UNIT",Message:"RadonDB PostgreSQL: $CLUSTERID，连接数消耗已超过最大可用连接数的$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameEn:"PGCacheHitRatio",Expression:'round(100*sum(pg_stat_database_blks_hit{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"}) by(pod) / (sum(pg_stat_database_blks_hit{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"}) by(pod) + sum(pg_stat_database_blks_read{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"}) by(pod)),0.1)',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 缓存命中率小于$THRESHOLD$UNIT。",Message:"RadonDB PostgreSQL: $CLUSTERID，缓存命中率小于$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameEn:"MaxTxDuration",Expression:'max(pg_stat_activity_max_tx_duration{namespace="$NAMESPACE",service=~"$CLUSTERID-readwrite|$CLUSTERID-standby-readonly"})',Operator:">",Unit:"%",ProposedDuration:"1m",Summary:"RadonDB PostgreSQL 【$CLUSTERID】 最大事务持续时间超过$THRESHOLD$UNIT。",Message:"RadonDB PostgreSQL: $CLUSTERID，最大事务持续时间超过$THRESHOLD$UNIT。 当前值：{{ $value }}"}],c={Metric:{PGUnhealth:{label:"PGUnhealth",autoComplete:!0,ruleConfig:o.disabledRuleConfig},PGAsync:{label:"PGAsync",ruleConfig:o.disabledRuleConfig},PGNotRunning:{label:"PGNotRunning",ruleConfig:o.disabledRuleConfig},PGInvalid:{label:"PGInvalid",ruleConfig:o.disabledRuleConfig},PGCPUUtilization:{label:"PGCPUUtilization",ruleConfig:o.PERCENT_RULE_CONFIG},PGMemUtilization:{label:"PGMemUtilization",ruleConfig:o.PERCENT_RULE_CONFIG},PGDisk:{label:"PGDisk",autoComplete:!0,ruleConfig:o.PERCENT_RULE_CONFIG},PGConnPerc:{label:"PGConnPerc",ruleConfig:o.PERCENT_RULE_CONFIG},PGCacheHitRatio:{label:"PGCacheHitRatio",ruleConfig:o.PERCENT_RULE_CONFIG},MaxTxDuration:{label:"MaxTxDuration",autoComplete:!0,ruleConfig:o.TIME_RULE_CONFIG}},Query:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(930),o=a(969),u=[{NameZh:"ClickHouse服务下线",NameEn:"ClickHouseServerDown",Expression:'chi_clickhouse_metric_fetch_errors{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID",fetch_type="system.metrics"} > 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"ClickHouse 无法提供数据库服务",Summary:"RadonDB ClickHouse 【$CLUSTERID】 ClickHouse 无法提供数据库服务",Message:"RadonDB ClickHouse: $CLUSTERID，ClickHouse 无法提供数据库服务。 当前值：{{ $value }}"},{NameZh:"ClickHouse服务重启",NameEn:"ClickHouseServerRestartRecently",Expression:'chi_clickhouse_metric_Uptime{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"} > 1 < 180',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"clickhouse server进程已在不到3分钟前启动",Summary:"RadonDB ClickHouse 【$CLUSTERID】 clickhouse server进程已在不到3分钟前启动",Message:"RadonDB ClickHouse: $CLUSTERID，clickhouse server进程已在不到3分钟前启动。查看之前的ClickHouse pod日志，以调查重启原因。 当前值：{{ $value }}"},{NameZh:"ClickHouse分布式表文件插入频繁",NameEn:"ClickHouseDistributedFilesToInsertHigh",Expression:'chi_clickhouse_metric_DistributedFilesToInsert{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"clickhouse服务器超过$THRESHOLD$UNIT分布式文件在做插入操作",Summary:"RadonDB ClickHouse 【$CLUSTERID】 clickhouse服务器超过$THRESHOLD$UNIT分布式文件在做插入操作",Message:"RadonDB ClickHouse: $CLUSTERID，clickhouse服务器超过$THRESHOLD$UNIT分布式文件在做插入操作。 当前值：{{ $value }}"},{NameZh:"ClickHouse分布式连接异常",NameEn:"ClickHouseDistributedConnectionExceptions",Expression:'increase(chi_clickhouse_event_DistributedConnectionFailTry{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) > 0 or increase(chi_clickhouse_event_DistributedConnectionFailAtAll{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) > 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"分布式连接发生异常",Summary:"RadonDB ClickHouse 【$CLUSTERID】 分布式连接发生异常",Message:"RadonDB ClickHouse: $CLUSTERID，分布式连接发生异常。 当前值：{{ $value }}"},{NameZh:"ClickHouse拒绝Insert操作",NameEn:"ClickHouseRejectedInsert",Expression:'increase(chi_clickhouse_event_RejectedInserts{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) > 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"出现拒绝插入异常",Summary:"RadonDB ClickHouse 【$CLUSTERID】 出现拒绝插入异常",Message:"RadonDB ClickHouse: $CLUSTERID，出现拒绝插入异常。 当前值：{{ $value }}"},{NameZh:"ClickHouse低插入元组数",NameEn:"ClickHouseLowInsertedRowsPerQuery",Expression:'increase(chi_clickhouse_event_InsertQuery{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) > 0 and (increase(chi_clickhouse_event_InsertedRows{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) / increase(chi_clickhouse_event_InsertQuery{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}[1m]) <= 1000)',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"建议增加每次Insert操作的插入元组数",Summary:"RadonDB ClickHouse 【$CLUSTERID】 建议增加每次Insert操作的插入元组数",Message:"RadonDB ClickHouse: $CLUSTERID，建议增加每次Insert操作的插入元组数。 当前值：{{ $value }}"},{NameZh:"ClickHouse慢查询",NameEn:"ClickHouseLongestRunningQuery",Expression:'chi_clickhouse_metric_LongestRunningQuery{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"} > 600',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"出现了长时间运行的慢查询",Summary:"RadonDB ClickHouse 【$CLUSTERID】 出现了长时间运行的慢查询",Message:"RadonDB ClickHouse: $CLUSTERID，出现了长时间运行的慢查询。 当前值：{{ $value }}"},{NameZh:"ClickHouse抢占查询",NameEn:"ClickHouseQueryPreempted",Expression:'chi_clickhouse_metric_QueryPreempted{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"} > 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"发生了抢占查询",Summary:"RadonDB ClickHouse 【$CLUSTERID】 发生了抢占查询",Message:"RadonDB ClickHouse: $CLUSTERID，发生了抢占查询。 当前值：{{ $value }}"},{NameZh:"ClickHouse太多连接数",NameEn:"ClickHouseTooManyConnections",Expression:'chi_clickhouse_metric_HTTPConnection{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"} + chi_clickhouse_metric_TCPConnection{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"} + chi_clickhouse_metric_MySQLConnection{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"总连接数超过了$THRESHOLD$UNIT",Summary:"RadonDB ClickHouse 【$CLUSTERID】 总连接数超过了$THRESHOLD$UNIT",Message:"RadonDB ClickHouse: $CLUSTERID，总连接数超过了$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"ClickHouse太多查询",NameEn:"ClickHouseTooManyRunningQueries",Expression:'chi_clickhouse_metric_Query{namespace="$NAMESPACE",service="clickhouse-$CLUSTERID"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"太多运行着的查询，超过了$THRESHOLD$UNIT",Summary:"RadonDB ClickHouse 【$CLUSTERID】 太多运行着的查询，超过了$THRESHOLD$UNIT",Message:"RadonDB ClickHouse: $CLUSTERID，太多运行着的查询，超过了$THRESHOLD$UNIT。 当前值：{{ $value }}"}],c={Metric:{ClickHouseServerDown:{label:"ClickHouseServerDown",autoComplete:!0,ruleConfig:o.disabledRuleConfig},ClickHouseServerRestartRecently:{label:"ClickHouseServerRestartRecently",autoComplete:!0,ruleConfig:o.disabledRuleConfig},ClickHouseDistributedFilesToInsertHigh:{label:"ClickHouseDistributedFilesToInsertHigh",ruleConfig:o.ITEM_RULE_CONFIG},ClickHouseLowInsertedRowsPerQuery:{label:"ClickHouseLowInsertedRowsPerQuery",autoComplete:!0,ruleConfig:o.disabledRuleConfig},ClickHouseLongestRunningQuery:{label:"ClickHouseLongestRunningQuery",autoComplete:!0,ruleConfig:o.disabledRuleConfig},ClickHouseQueryPreempted:{label:"ClickHouseQueryPreempted",autoComplete:!0,ruleConfig:o.disabledRuleConfig},ClickHouseTooManyConnections:{label:"ClickHouseTooManyConnections",ruleConfig:o.ITEM_RULE_CONFIG},ClickHouseTooManyRunningQueries:{label:"ClickHouseTooManyRunningQueries",ruleConfig:o.ITEM_RULE_CONFIG}},Query:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(930),o=a(969),u=[{NameZh:"当前连接数过多",NameEn:"MongodbTooManyConnections",Expression:'mongodb_connections_current{namespace="$NAMESPACE",cluster_name="$CLUSTERID"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"当前连接数超过$THRESHOLD$UNIT",Summary:"RadonDB MongoDB 【$CLUSTERID】 当前连接数超过$THRESHOLD$UNIT",Message:"RadonDB MongoDB: $CLUSTERID，当前连接数超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"当前游标打开数量过多",NameEn:"MongodbTooManyCursors",Expression:'mongodb_metrics_cursor_open_total{namespace="$NAMESPACE",cluster_name="$CLUSTERID"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"当前游标打开数量大于$THRESHOLD$UNIT",Summary:"RadonDB MongoDB 【$CLUSTERID】 当前游标打开数量大于$THRESHOLD$UNIT",Message:"RadonDB MongoDB: $CLUSTERID，当前游标打开数量大于$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"当前事务读并发已达到最大值",NameEn:"MongodbMaxTransactionConcurrentRead",Expression:'mongodb_wiredTiger_concurrentTransactions_read_out{namespace="$NAMESPACE",cluster_name="$CLUSTERID"} >= 128',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"当前事务读并发已达到最大值128",Summary:"RadonDB MongoDB 【$CLUSTERID】 当前事务读并发已达到最大值128",Message:"RadonDB MongoDB: $CLUSTERID，当前事务读并发已达到最大值128。 当前值：{{ $value }}"},{NameZh:"当前事务写并发已达到最大值",NameEn:"MongodbMaxTransactionConcurrentWrite",Expression:'mongodb_wiredTiger_concurrentTransactions_write_out{namespace="$NAMESPACE",cluster_name="$CLUSTERID"} >= 128',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"当前事务写并发已达到最大值128",Summary:"RadonDB MongoDB 【$CLUSTERID】 当前事务写并发已达到最大值128",Message:"RadonDB MongoDB: $CLUSTERID，当前事务写并发已达到最大值128。 当前值：{{ $value }}"},{NameZh:"WiredTiger 内存使用达到90%",NameEn:"MongoDBWiredTigerUsageEvition",Expression:'mongodb_wiredTiger_cache_bytes_currently_in_the_cache{namespace="$NAMESPACE",cluster_name="$CLUSTERID"}/mongodb_wiredTiger_cache_maximum_bytes_configured{namespace="$NAMESPACE",cluster_name="$CLUSTERID"} * 100 >= 90',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"WiredTiger 内存使用达到90%",Summary:"RadonDB MongoDB 【$CLUSTERID】 WiredTiger 内存使用达到90%",Message:"RadonDB MongoDB: $CLUSTERID，WiredTiger 内存使用达到90%。 当前值：{{ $value }}"},{NameZh:"WiredTiger 内存脏页达到20%",NameEn:"MongoDBWiredTigerDirtyEvition",Expression:'mongodb_wiredTiger_cache_tracked_dirty_bytes_in_the_cache{namespace="$NAMESPACE",cluster_name="$CLUSTERID"}/mongodb_wiredTiger_cache_maximum_bytes_configured{namespace="$NAMESPACE",cluster_name="$CLUSTERID"} * 100 >= 20',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"WiredTiger 内存脏页达到20%",Summary:"RadonDB MongoDB 【$CLUSTERID】 WiredTiger 内存脏页达到20%",Message:"RadonDB MongoDB: $CLUSTERID，WiredTiger 内存脏页达到20%。 当前值：{{ $value }}"}],c={Metric:{MongodbTooManyConnections:{label:"MongodbTooManyConnections",ruleConfig:o.ITEM_RULE_CONFIG},MongodbTooManyCursors:{label:"MongodbTooManyCursors",ruleConfig:o.ITEM_RULE_CONFIG},MongodbMaxTransactionConcurrentRead:{label:"MongodbMaxTransactionConcurrentRead",autoComplete:!0,ruleConfig:o.disabledRuleConfig},MongodbMaxTransactionConcurrentWrite:{label:"MongodbMaxTransactionConcurrentWrite",autoComplete:!0,ruleConfig:o.disabledRuleConfig},MongoDBWiredTigerUsageEvition:{label:"MongoDBWiredTigerUsageEvition",autoComplete:!0,ruleConfig:o.disabledRuleConfig},MongoDBWiredTigerDirtyEvition:{label:"MongoDBWiredTigerDirtyEvition",autoComplete:!0,ruleConfig:o.disabledRuleConfig}},Query:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,l.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(969),o=a(930),u=[{NameZh:"Redis连接数过多",NameEn:"Redis Client Usage",Expression:'redis_connected_clients{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}/redis_config_maxclients{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}*100',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"当前连接数使用超过$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 当前连接数使用超过$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，当前连接数使用超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"被拒绝的Key个数",NameEn:"Evicted Keys",Expression:'redis_evicted_keys_total{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"被拒绝的key的个数达到$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 被拒绝的key的个数达到$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，被拒绝的key的个数达到$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"内存使用率",NameEn:"Memory Usage",Expression:'redis_memory_used_bytes{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}/redis_memory_max_bytes{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}*100',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"当前内存使用率超过$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 当前内存使用率超过$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，当前内存使用率超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"阻塞的客户端数",NameEn:"Blocked Clients",Expression:'redis_blocked_clients{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}',Operator:">",Unit:"个",ProposedDuration:"1m",Explain:"阻塞客户端数超过$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 阻塞客户端数超过$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，阻塞客户端数超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"拒绝的连接数",NameEn:"Rejected Connections",Expression:'rate(redis_rejected_connections_total{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}[5m])',Operator:">",Unit:"%",ProposedDuration:"1m",Explain:"拒绝的连接数超过$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 拒绝的连接数超过$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，拒绝的连接数超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"已使用的rss字节数",NameEn:"Used RSS Bytes",Expression:'redis_memory_used_rss_bytes{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"}',Operator:">",Unit:"byte",ProposedDuration:"1m",Explain:"内存已经使用的内存大小超过$THRESHOLD$UNIT",Summary:"RadonDB Redis 【$CLUSTERID】 内存已经使用的内存大小超过$THRESHOLD$UNIT",Message:"RadonDB Redis: $CLUSTERID，内存已经使用的内存大小超过$THRESHOLD$UNIT。 当前值：{{ $value }}"},{NameZh:"内存碎片率",NameEn:"Memory Fragmentation Ratio",Expression:'redis_mem_fragmentation_ratio{namespace="$NAMESPACE",service=~".*$CLUSTERID.*"} > 1.5 ',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"内存碎片率过大，超过1.5",Summary:"RadonDB Redis 【$CLUSTERID】 内存碎片率过大，超过1.5",Message:"RadonDB Redis: $CLUSTERID，内存碎片率过大，超过1.5。 当前值：{{ $value }}"}],c={Metric:{"Redis Client Usage":{label:"Redis Client Usage",ruleConfig:l.PERCENT_RULE_CONFIG},"Evicted Keys":{label:"Evicted Keys",ruleConfig:l.ITEM_RULE_CONFIG},"Memory Usage":{label:"Memory Usage",ruleConfig:l.PERCENT_RULE_CONFIG},"Blocked Clients":{label:"Blocked Clients",ruleConfig:l.ITEM_RULE_CONFIG},"Rejected Connections":{label:"Rejected Connections",ruleConfig:l.PERCENT_RULE_CONFIG},"Used RSS Bytes":{label:"Used RSS Bytes",ruleConfig:l.BYTE_RULE_CONFIG},"Memory Fragmentation Ratio":{label:"Memory Fragmentation Ratio",autoComplete:!0,ruleConfig:l.disabledRuleConfig}},Query:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(969),o=a(930),u=[{NameZh:"集群健康状态为 yellow",NameEn:"ClusterHealthStatusYellow",Expression:'elasticsearch_cluster_health_status{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",color="yellow"} == 1',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Explain:"集群健康状态为 yellow",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 集群健康状态为 yellow",Message:"RadonDB Elasticsearch: $CLUSTERID，集群健康状态为 yellow。 当前值：{{ $value }}"},{NameZh:"集群健康状态为 red",NameEn:"ClusterHealthStatusRed",Expression:'elasticsearch_cluster_health_status{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",color="red"} == 1',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Explain:"集群健康状态为 red",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 集群健康状态为 red",Message:"RadonDB Elasticsearch: $CLUSTERID，集群健康状态为 red。 当前值：{{ $value }}"},{NameZh:"堆内存使用率超过85%",NameEn:"HeapMemTooHigh85%",Expression:'max(round(elasticsearch_jvm_memory_used_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",area="heap"}/elasticsearch_jvm_memory_max_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",area="heap"}*100,0.1)) > 85',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Explain:"堆内存使用率超过85%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 堆内存使用率超过85%",Message:"RadonDB Elasticsearch: $CLUSTERID，堆内存使用率超过85%。 当前值：{{ $value }}"},{NameZh:"堆内存使用率超过90%",NameEn:"HeapMemTooHigh90%",Expression:'max(round(elasticsearch_jvm_memory_used_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",area="heap"}/elasticsearch_jvm_memory_max_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE",area="heap"}*100,0.1)) > 90',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Explain:"堆内存使用率超过90%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 堆内存使用率超过90%",Message:"RadonDB Elasticsearch: $CLUSTERID，堆内存使用率超过90%。 当前值：{{ $value }}"},{NameZh:"CPU使用率超过90%",NameEn:"CPUUsageOver90%",Expression:'max(elasticsearch_os_cpu_percent{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}) > 90',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Explain:"CPU使用率超过90%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 CPU使用率超过90%",Message:"RadonDB Elasticsearch: $CLUSTERID，CPU使用率超过90%。 当前值：{{ $value }}"},{NameZh:"磁盘可用百分比小于15%",NameEn:"AvailableDiskLessThan15%",Expression:'min(round(elasticsearch_filesystem_data_free_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}/elasticsearch_filesystem_data_size_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}*100,0.1)) < 15',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"磁盘可用百分比小于15%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 磁盘可用百分比小于15%",Message:"RadonDB Elasticsearch: $CLUSTERID，磁盘可用百分比小于15%。 当前值：{{ $value }}"},{NameZh:"磁盘可用百分比小于10%",NameEn:"AvailableDiskLessThan10%",Expression:'min(round(elasticsearch_filesystem_data_free_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}/elasticsearch_filesystem_data_size_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}*100,0.1)) < 10',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"磁盘可用百分比小于10%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 磁盘可用百分比小于10%",Message:"RadonDB Elasticsearch: $CLUSTERID，磁盘可用百分比小于10%。 当前值：{{ $value }}"},{NameZh:"磁盘可用百分比小于5%",NameEn:"AvailableDiskLessThan5%",Expression:'min(round(elasticsearch_filesystem_data_free_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}/elasticsearch_filesystem_data_size_bytes{service="$CLUSTERID-es-elasticsearch-exporter",namespace="$NAMESPACE"}*100,0.1)) < 5',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Explain:"磁盘可用百分比小于5%",Summary:"RadonDB Elasticsearch 【$CLUSTERID】 磁盘可用百分比小于5%",Message:"RadonDB Elasticsearch: $CLUSTERID，磁盘可用百分比小于5%。 当前值：{{ $value }}"}],c={Metric:{ClusterHealthStatusYellow:{label:"ClusterHealthStatusYellow",autoComplete:!0,ruleConfig:l.disabledRuleConfig},ClusterHealthStatusRed:{label:"ClusterHealthStatusRed",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"HeapMemTooHigh85%":{label:"HeapMemTooHigh85%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"HeapMemTooHigh90%":{label:"HeapMemTooHigh90%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"CPUUsageOver90%":{label:"CPUUsageOver90%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"AvailableDiskLessThan15%":{label:"AvailableDiskLessThan15%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"AvailableDiskLessThan10%":{label:"AvailableDiskLessThan10%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"AvailableDiskLessThan5%":{label:"AvailableDiskLessThan5%",autoComplete:!0,ruleConfig:l.disabledRuleConfig}},Query:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(969),o=a(930),u=[{NameZh:"存在不可用的 partitions",NameEn:"ExistOfflinePartitions",Expression:'sum(kafka_controller_kafkacontroller_offlinepartitionscount{namespace="$NAMESPACE",strimzi_io_cluster="$CLUSTERID"}) > 0',Operator:"N/A",Unit:"N/A",Summary:"存在不可用的partitions。",Message:""},{NameZh:"存在ISR数目小于最小ISR的partitions",NameEn:"ExistPartitionsUnderMinimumISR",Expression:'sum(kafka_cluster_partition_underminisr{namespace="$NAMESPACE",strimzi_io_cluster="$CLUSTERID"}) > 0',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"存在ISR数目小于最小ISR的partitions。",Message:""},{NameZh:"堆内存使用率超过85%",NameEn:"KafkaHeapMemTooHigh85%",Expression:'round(sum(jvm_memory_bytes_used{namespace="$NAMESPACE",strimzi_io_name="$CLUSTERID-kafka"})/sum(jvm_memory_bytes_max{namespace="$NAMESPACE",strimzi_io_name="$CLUSTERID-kafka"})*100,0.1) > 85',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"堆内存使用率超过85%。",Message:""},{NameZh:"磁盘可用百分比小于15%",NameEn:"KafkaAvailableDiskLessThan15%",Expression:'round(sum(kubelet_volume_stats_available_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})/sum(kubelet_volume_stats_capacity_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})*100,0.1) < 15',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"磁盘可用百分比小于15%。",Message:""},{NameZh:"磁盘可用百分比小于10%",NameEn:"KafkaAvailableDiskLessThan10%",Expression:'round(sum(kubelet_volume_stats_available_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})/sum(kubelet_volume_stats_capacity_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})*100,0.1) < 10',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"磁盘可用百分比小于10%。",Message:""},{NameZh:"磁盘可用百分比小于5%",NameEn:"KafkaAvailableDiskLessThan5%",Expression:'round(sum(kubelet_volume_stats_available_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})/sum(kubelet_volume_stats_capacity_bytes{namespace="$NAMESPACE",persistentvolumeclaim=~"data-0-$CLUSTERID-kafka.*"})*100,0.1) < 5',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"磁盘可用百分比小于5%。",Message:""},{NameZh:"平均响应时间超过1000ms",NameEn:"RequestLatencyAverage1s",Expression:'zookeeper_avgrequestlatency{namespace="$NAMESPACE",kubernetes_pod_name=~"$CLUSTERID-zookeeper.*"} > 1000',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"平均响应时间超过1000ms。",Message:""}],c={Metric:{ExistOfflinePartitions:{label:"ExistOfflinePartitions",autoComplete:!0,ruleConfig:l.disabledRuleConfig},ExistPartitionsUnderMinimumISR:{label:"ExistPartitionsUnderMinimumISR",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"KafkaHeapMemTooHigh85%":{label:"HeapMemTooHigh85%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"KafkaAvailableDiskLessThan15%":{label:"AvailableDiskLessThan15%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"KafkaAvailableDiskLessThan10%":{label:"AvailableDiskLessThan10%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"KafkaAvailableDiskLessThan5%":{label:"AvailableDiskLessThan5%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},RequestLatencyAverage1s:{label:"RequestLatencyAverage1s",autoComplete:!0,ruleConfig:l.disabledRuleConfig}},Query:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(30));a(18);var l=a(969),o=a(930),u=[{NameEn:"OpenSearchClusterHealthStatusYellow",Expression:'max(opensearch_cluster_status{service="$CLUSTERID",namespace="$NAMESPACE"})==1',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 集群健康状态为 yellow",Message:"RadonDB OpenSearch: $CLUSTERID，集群健康状态为 yellow。 当前值：{{ $value }}"},{NameEn:"OpenSearchClusterHealthStatusRed",Expression:'max(opensearch_cluster_status{service="$CLUSTERID",namespace="$NAMESPACE"})==2',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 集群健康状态为 red",Message:"RadonDB OpenSearch: $CLUSTERID，集群健康状态为 red。 当前值：{{ $value }}"},{NameEn:"OpenSearchHeapMemTooHigh85%",Expression:'max(opensearch_jvm_mem_heap_used_percent{service="$CLUSTERID",namespace="$NAMESPACE"})>85',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 堆内存使用率超过85%",Message:"RadonDB OpenSearch: $CLUSTERID，堆内存使用率超过85%。 当前值：{{ $value }}"},{NameEn:"OpenSearchHeapMemTooHigh90%",Expression:'max(opensearch_jvm_mem_heap_used_percent{service="$CLUSTERID",namespace="$NAMESPACE"})>90',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 堆内存使用率超过90%",Message:"RadonDB OpenSearch: $CLUSTERID，堆内存使用率超过90%。 当前值：{{ $value }}"},{NameEn:"OpenSearchCPUUsageOver90%",Expression:'max(opensearch_os_cpu_percent{service="$CLUSTERID",namespace="$NAMESPACE"})>90',Operator:"N/A",Unit:"N/A",ProposedDuration:"3m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 CPU使用率超过90%",Message:"RadonDB OpenSearch: $CLUSTERID，CPU使用率超过90%。 当前值：{{ $value }}"},{NameEn:"OpenSearchAvailableDiskLessThan15%",Expression:'min(round(opensearch_fs_total_available_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}/opensearch_fs_total_total_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}*100,0.1))<15',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 磁盘可用百分比小于15%",Message:"RadonDB OpenSearch: $CLUSTERID，磁盘可用百分比小于15%。 当前值：{{ $value }}"},{NameEn:"OpenSearchAvailableDiskLessThan10%",Expression:'min(round(opensearch_fs_total_available_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}/opensearch_fs_total_total_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}*100,0.1))<10',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 磁盘可用百分比小于10%",Message:"RadonDB OpenSearch: $CLUSTERID，磁盘可用百分比小于10%。 当前值：{{ $value }}"},{NameEn:"OpenSearchAvailableDiskLessThan5%",Expression:'min(round(opensearch_fs_total_available_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}/opensearch_fs_total_total_bytes{service="$CLUSTERID",namespace="$NAMESPACE"}*100,0.1))<5',Operator:"N/A",Unit:"N/A",ProposedDuration:"1m",Summary:"RadonDB OpenSearch 【$CLUSTERID】 磁盘可用百分比小于5%",Message:"RadonDB OpenSearch: $CLUSTERID，磁盘可用百分比小于5%。 当前值：{{ $value }}"}],c={Metric:{OpenSearchClusterHealthStatusYellow:{label:"ClusterHealthStatusYellow",autoComplete:!0,ruleConfig:l.disabledRuleConfig},OpenSearchClusterHealthStatusRed:{label:"ClusterHealthStatusRed",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchHeapMemTooHigh85%":{label:"HeapMemTooHigh85%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchHeapMemTooHigh90%":{label:"HeapMemTooHigh90%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchCPUUsageOver90%":{label:"CPUUsageOver90%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchAvailableDiskLessThan15%":{label:"AvailableDiskLessThan15%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchAvailableDiskLessThan10%":{label:"AvailableDiskLessThan10%",autoComplete:!0,ruleConfig:l.disabledRuleConfig},"OpenSearchAvailableDiskLessThan5%":{label:"AvailableDiskLessThan5%",autoComplete:!0,ruleConfig:l.disabledRuleConfig}},Query:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Expression)}))),Message:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Message)}))),Summary:(0,o.arrayToObject)(u.map((function(e){return(0,n.default)({},e.NameEn,e.Summary)})))};t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(74)),f=n(r(63)),d=n(r(189)),p=n(r(240)),m=n(r(787)),v=r(52),h=n(r(435)),E=r(72),y=n(r(1606)),g=n(r(825)),b=n(r(2612)),S=n(r(1609)),_=n(r(1610)),O=n(r(1625)),C=n(r(917)),T=n(r(1179));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={"app.deploy":{on:function(e){var t=e.store,a=(0,c.default)(e,["store"]),r=m.default.open(D({onOk:function(){m.default.close(r)},modal:b.default,store:t},a))}},"crd.app.create":{on:function(e){var t=e.store,a=e.cluster,r=e.namespace,n=(e.workspace,e.success),l=(0,c.default)(e,["store","cluster","namespace","workspace","success"]),o=m.default.open(D({onOk:function(e){var l=(0,d.default)(e,["application","ingress"]);Object.keys(l).forEach((function(t){e=(0,d.default)(e,(0,E.OMIT_TOTAL_REPLICAS)(t))})),t.create(e,{cluster:a,namespace:r}).then((function(){m.default.close(o),n&&n()}))},store:t,cluster:a,namespace:r,modal:S.default},l))}},"crd.app.addservice":{on:function(e){var a,r=e.store,n=e.detail,u=e.cluster,s=e.namespace,f=e.success,d=(0,c.default)(e,["store","detail","cluster","namespace","success"]),h=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.selector,c=String(n.serviceMeshEnable),E={service:a.Service,workload:a.Deployment||a.StatefulSet},(0,v.mergeLabels)(E.service,o),(0,v.mergeLabels)(E.workload,o),(0,i.default)(E.workload,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',c),(0,i.default)(E.service,'metadata.annotations["servicemesh.kubesphere.io/enabled"]',c),(0,i.default)(E.workload,'spec.template.metadata.annotations["sidecar.istio.io/inject"]',c),!d.isFederated){e.next=15;break}return(0,v.updateFederatedAnnotations)(E.workload),(0,v.updateFederatedAnnotations)(E.service),e.next=13,r.create(E,{namespace:s});case 13:e.next=17;break;case 15:return e.next=17,r.addComponent(E,{name:n.name,cluster:u,namespace:s});case 17:m.default.close(h),p.default.success({content:"".concat(t("SERVICE_ADDED_SUCCESSFULLY"))}),f&&f();case 20:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:u,namespace:s,modal:_.default},d))}},"crd.app.addroute":{on:function(e){e.store;var a,r=e.detail,n=e.cluster,f=e.namespace,d=e.success,b=(0,c.default)(e,["store","detail","cluster","namespace","success"]),S=new C.default,_=S.module,O=E.MODULE_KIND_MAP[_],T=(0,u.default)({},O,h.default[_]({namespace:f})),R=m.default.open(D(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,h,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.selector,u=r.serviceMeshEnable,c=a.Ingress||a,(0,v.mergeLabels)(c,o),u&&(h=b.isFederated?(0,s.default)(c,"spec.template"):c,(E=(0,s.default)(h,"spec.rules[0].http.paths[0].backend.serviceName"))&&(0,i.default)(h,'metadata.annotations["nginx.ingress.kubernetes.io/upstream-vhost"]',"".concat(E,".").concat(f,".svc.cluster.local"))),b.isFederated&&(0,v.updateFederatedAnnotations)(c),e.next=8,S.create(c,{cluster:n,namespace:f});case 8:m.default.close(R),p.default.success({content:t("ADD_ROUTE_SUCCESS")}),d&&d();case 11:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:n,namespace:f,formTemplate:T,module:_,store:S,steps:y.default,modal:g.default,okBtnText:t("CREATE"),selector:r.selector},b),{},{name:"Route"}))}},"app.service.monitor":{on:function(e){var t,a=e.store,r=e.cluster,n=e.namespace,u=e.success,i=(0,c.default)(e,["store","cluster","namespace","success"]),d=new T.default,p=h.default.servicemonitors({name:"",namespace:n}),v=m.default.open(D({onOk:(t=(0,o.default)(l.default.mark((function e(t){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,s.default)(t,"metadata.name"),e.next=3,d.checkName({name:a,cluster:r,namespace:n});case 3:if(e.sent.exist){e.next=9;break}return e.next=7,d.create(t,{cluster:r,namespace:n});case 7:e.next=16;break;case 9:if(!(0,f.default)((0,s.default)(t,"spec.endpoints"))){e.next=14;break}return e.next=12,d.delete({name:a,cluster:r,namespace:n});case 12:e.next=16;break;case 14:return e.next=16,d.update({name:a,cluster:r,namespace:n},t);case 16:m.default.close(v),u&&u();case 18:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),cluster:r,namespace:n,formTemplate:p,app:a.detail,store:d,modal:O.default},i))}}};a.default=N},,function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(18),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(26)),f=n(r(0)),d=n(r(1)),p=n(r(790)),m=n(r(1607)),v=n(r(1608));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderContent",value:function(){var e=this.props,a=e.value,r=e.onShow,n=e.onEdit,l=e.onDelete,o=e.projectDetail,u=(0,i.default)(this.context.formData,"spec.tls",[]);return f.default.createElement("ul",null,a.filter((function(e){return e&&e.host})).map((function(e,t){return f.default.createElement(m.default,{rule:e,tls:u,key:t,index:t,onEdit:n,onDelete:l,projectDetail:o})})),f.default.createElement("div",{className:v.default.add,onClick:r},f.default.createElement(p.default,{title:t("ADD_ROUTING_RULE"),description:t("ADD_ROUTING_RULE_DESC")})))}},{key:"render",value:function(){return f.default.createElement("div",{className:v.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=E,E.propTypes={name:d.default.string,value:d.default.array,onDelete:d.default.func,onShow:d.default.func},E.defaultProps={name:"",value:[],onDelete:function(){},onShow:function(){}},E.contextTypes={formData:d.default.object}},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(29),r(18),r(48),r(97),r(16),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(29),r(18),r(48),r(97),r(42),r(16),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(26)),f=n(r(74)),d=n(r(63)),p=n(r(2604)),m=n(r(0)),v=n(r(3)),h=n(r(1)),E=r(186),y=n(r(829)),g=n(r(1330)),b=r(881),S=n(r(917)),_=r(72),O=r(52),C=n(r(1331)),T=n(r(2608));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var D=function(e){(0,u.default)(r,e);var a=R(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).checkItemValid=function(e){return e.path&&e.backend&&e.backend.service&&e.backend.service.name&&e.backend.service.port&&e.backend.service.port.number},n.pathValidator=function(e,a,r){return a?a.some((function(e){return!n.checkItemValid(e)}))?r({message:t("INVALID_PATH_DESC"),field:e.field}):n.handlePathExistValidator(a)?r({message:t("PATH_EXIST"),field:e.field}):void r():r()},n.handlePathExistValidator=function(e){var t=e.map((function(e){return e.path})),a=!1;return t.forEach((function(e){for(var r=t.length,n=0,l=0;n<=r;){if(e===t[n]&&l++,l>1){a=!0;break}n++}})),a},n.handleGoBack=function(){var e=n.context.resetSubRoute;return e&&e(),n.props.onCancel(),!1},n.handleProtocolChange=function(e){n.setState({protocol:e})},n.handleSubmit=function(e){var t=n.props.onSave,a=n.formRef.current;a&&a.validate((function(){var r=a.getData();t(r),e&&e()}))},n.handleValidator=function(){var e=!1,t=n.formRef.current;return t&&t.validate((function(){e=!0})),e},n.domainValidator=function(e,a,r){var l,o=n.props,u=o.isFederated,c=o.data,s=o.validData,d=o.detail,m=(0,i.default)(d,"clusters",[]).map((function(e){return e.name})),v=!!(null==s||null===(l=s.metadata)||void 0===l?void 0:l.creationTimestamp)?"put":"post";if(!a)return r();var h=n.props.cluster||n.defaultClusters,E=(0,i.default)(s,"metadata.namespace",""),y=(0,i.default)(s,"metadata.name","");u&&((0,f.default)(s,"apiVersion","networking.k8s.io/v1"),(0,f.default)(s,"kind","Ingress"),(0,f.default)(s,"spec",{})),(0,f.default)(s,"spec.rules",[{host:a}]),(null==c?void 0:c.clusters)?Promise.all(c.clusters.map((function(e){return-1===(0,p.default)(m,e)&&(v="post"),n.ingressStore.checkValidDomain({cluster:e,namespace:E,name:y},s,v).then((function(e){return e.exist}))}))).then((function(a){if(a.some((function(e){return e})))return r({message:t("EXIT_DOMAIN_DESC"),field:e.field});r()})):(h=u?"":h,n.ingressStore.checkValidDomain({cluster:h,namespace:E,name:y},s,v).then((function(a){if(a.exist)return r({message:t("EXIT_DOMAIN_DESC"),field:e.field});r()})))},n.state={service:"",protocol:(0,i.default)(e,"data.protocol","http")},n.formRef=m.default.createRef(),n.ingressStore=new S.default,n}return(0,o.default)(r,[{key:"componentDidMount",value:function(){var e=this.context.registerSubRoute;e&&e(this.handleSubmit,this.handleGoBack)}},{key:"getType",value:function(e){var t=(0,i.default)(e,"host");if(!t)return"auto";var a=this.props,r=a.gateway,n=a.projectDetail,l=a.namespace,o=(0,i.default)(e,"http.paths[0].backend.service.name"),u=(0,i.default)(n,'_originData.metadata.labels["kubesphere.io/namespace"]')||l;return t===(r.isHostName?r.defaultIngress:"".concat((0,O.withDot)(o)).concat((0,O.withDot)(u)).concat((0,O.withDot)(r.defaultIngress),"nip.io"))?"auto":"specify"}},{key:"renderForm",value:function(){var e,a,r=this.state.protocol;return m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Form.Item,{label:t("DOMAIN_NAME_TCAP"),key:null===(e=this.props.data)||void 0===e||null===(a=e.clusters)||void 0===a?void 0:a.length,rules:[{required:!0,message:t("DOMAIN_NAME_EMPTY_DESC")},{pattern:_.PATTERN_HOST,message:t("INVALID_DOMAIN_DESC")},{validator:this.domainValidator}]},m.default.createElement(E.Input,{name:"host",autoFocus:!0})),m.default.createElement(E.Form.Item,{label:t("PROTOCOL")},m.default.createElement(E.Select,{name:"protocol",defaultValue:"http",onChange:this.handleProtocolChange,options:this.protocols})),"https"===r&&m.default.createElement(E.Form.Item,{label:t("SECRET")},m.default.createElement(E.Select,{name:"secretName",options:this.secrets,placeholder:" "})),m.default.createElement(E.Form.Item,{label:t("PATH_PL"),rules:[{required:!0,message:t("PATH_EMPTY_DESC")},{validator:this.pathValidator,checkOnSubmit:!0}]},m.default.createElement(y.default,{name:"http.paths",itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid},m.default.createElement(g.default,{services:this.props.services}))))}},{key:"render",value:function(){var e=this,a=this.props,r=a.data,n=a.className,l=a.isFederated;return m.default.createElement("div",{className:(0,v.default)(T.default.wrapper,n)},m.default.createElement("div",{className:"h4"},m.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},m.default.createElement(b.ReactComponent,null)),t("SET_ROUTING_RULES")),m.default.createElement("div",{className:T.default.formWrapper},m.default.createElement(E.Form,{ref:this.formRef,data:r},l&&m.default.createElement(E.Form.Group,{label:t("CLUSTER")},m.default.createElement(E.Form.Item,null,m.default.createElement(C.default,{name:"clusters",options:this.clusters,defaultValue:this.defaultClusters,onChange:function(){(0,f.default)(r,"host",""),e.forceUpdate()}}))),m.default.createElement(E.Form.Group,{noWrapper:!0},this.renderForm()))))}},{key:"protocols",get:function(){return[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}},{key:"secrets",get:function(){return this.props.secrets.map((function(e){return{label:e.name,value:e.name}}))}},{key:"clusters",get:function(){return(0,i.default)(this.props,"projectDetail.clusters",[]).slice()}},{key:"clusterNames",get:function(){var e;return null==this||null===(e=this.clusters)||void 0===e?void 0:e.map((function(e){return e.name}))}},{key:"defaultClusters",get:function(){return(0,i.default)(this.props,"projectDetail.clusters",[]).map((function(e){return e.name}))}},{key:"enableAutoGenerated",get:function(){var e=this.props,t=e.isFederated,a=e.gateway;return!t&&!(0,d.default)(a.defaultIngress)}}]),r}(m.default.Component);a.default=D,D.propTypes={data:h.default.object,secrets:h.default.array,services:h.default.array,gateway:h.default.object,onSave:h.default.func,onCancel:h.default.func},D.defaultProps={data:{},secrets:[],services:[],gateway:{},onSave:function(){},onCancel:function(){}},D.contextTypes={registerSubRoute:h.default.func,resetSubRoute:h.default.func}},,,,,function(e,t,a){e.exports={wrapper:"_3--VX5nESZHibBLwCNMfSL",advance:"_2EJlmbhXorbkEHtrN5QqEi",toggle:"_2S7NwpmHoQs9jxrplqTMLA",customFormItem:"_1u5SUDiQDf_eLXCZDmMJJO",formWrapper:"_2dDLG5BZ_t68ckVmZFy-RR",form:"_2YOPmzRJE1x018vTgrvqht"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(26)),m=n(r(63)),v=n(r(895)),h=n(r(74)),E=r(72),y=r(186),g=n(r(834)),b=n(r(2610));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(n,e);var a,r=S(n);function n(e){var t;return(0,u.default)(this,n),(t=r.call(this,e)).getGateway=(0,o.default)(l.default.mark((function e(){var a,r,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.isFederated){e.next=9;break}return a=function(){return t.gatewayStore.getGatewayByProject({namespace:t.namespace,cluster:t.cluster})},t.setState({isLoading:!0}),e.next=5,a();case 5:r=e.sent,(n=r[0]||r[1]||r[2]||{}).serviceMeshEnable&&(0,h.default)(t.formTemplate,'metadata.annotations["nginx.ingress.kubernetes.io/service-upstream"]',"true"),t.setState({gateway:n,isLoading:!1});case 9:case"end":return e.stop()}}),e)}))),t.gatewayStore=new g.default,t.state={ingressNameOption:[]},t}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.getIngressNameOptions()}},{key:"getIngressNameOptions",value:(a=(0,o.default)(l.default.mark((function e(){var t,a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gatewayStore.getNewGatewayByProject({cluster:this.cluster,namespace:this.namespace});case 2:(t=e.sent).length&&this.getGateway(),a=(0,v.default)(t,(function(e){return{label:"".concat(e.ingressClass,"(").concat(e.name,")"),value:e.ingressClass}})),this.setState({ingressNameOption:a});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.formRef,a=this.state.ingressNameOption;return d.default.createElement(y.Form,{data:this.formTemplate,ref:e},!(0,m.default)(a)&&d.default.createElement(y.Form.Item,{label:t("SELECT_INGRESSCLASSNAME")},d.default.createElement(y.Select,{name:"spec.ingressClassName",options:a})),d.default.createElement(y.Form.Group,{label:t("ADD_METADATA"),desc:t("ROUTE_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},d.default.createElement(b.default,null)))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,p.default)(t,E.MODULE_KIND_MAP[a],t)}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return this.props.namespace||(0,p.default)(this.formTemplate,"metadata.namespace")}}]),n}(d.default.Component);a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(1050)),p=n(r(842));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Form.Item,{label:t("ANNOTATION_PL")},i.default.createElement(d.default,{name:"metadata.annotations",addText:t("ADD"),hiddenKeys:globals.config.preservedAnnotations})),i.default.createElement(f.Form.Item,{label:t("LABEL_PL")},i.default.createElement(p.default,{name:"metadata.labels",addText:t("ADD")})))}}]),r}(i.default.Component);a.default=v},,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(58)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(30)),d=n(r(0)),p=n(r(1)),m=n(r(3)),v=r(186),h=n(r(787)),E=n(r(2613));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){var t=e.icon,a=e.image,r=e.title,n=e.desc,l=e.disabled,o=e.onEnter;return d.default.createElement("div",{className:(0,m.default)(E.default.item,(0,f.default)({},E.default.disable,l)),onClick:o},a?d.default.createElement("img",{src:a,alt:""}):d.default.createElement(v.Icon,{name:t,size:40}),d.default.createElement("div",{className:E.default.text},d.default.createElement("div",null,r),d.default.createElement("p",null,n)))},_=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleAppTemplate=function(){var t=e.props,a=t.namespace,r=t.cluster,n=t.workspace,l=t.routing;(0,t.onOk)(),l.push("/apps?workspace=".concat(n,"&cluster=").concat(r,"&namespace=").concat(a))},e.handleAppRepo=function(){var t=e.props,a=t.onOk,r=t.trigger,n=(0,l.default)(t,["onOk","trigger"]);a(),r("openpitrix.app.create",g({trigger:r},n))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return d.default.createElement(h.default,{width:600,style:{borderRadius:"8px"},onOk:this.handleOk,onCancel:r,visible:a,bodyClassName:E.default.body,hideHeader:!0},d.default.createElement("div",{className:E.default.header},d.default.createElement("div",{className:E.default.logo},d.default.createElement("img",{src:"/assets/application.svg",alt:""})),d.default.createElement("div",{className:E.default.text},d.default.createElement("h2",null,t("CREATE_APP")),d.default.createElement("p",null,t("CREATE_APP_DESC")))),d.default.createElement("div",{className:E.default.footer},globals.app.enableAppStore&&d.default.createElement(S,{icon:"templet",title:t("FROM_APP_STORE"),desc:t("FROM_APP_STORE_DESC"),onEnter:this.handleAppTemplate}),d.default.createElement(S,{icon:"catalog",title:t("FROM_APP_TEMPLATE"),desc:t("FROM_APP_TEMPLATE_DESC"),onEnter:this.handleAppRepo})))}}]),r}(d.default.Component);a.default=_,_.propTypes={visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"Gr8gQYgDKIMOsI5M37h3o",header:"_1yJrBlU6RwumAfyYPHmrRo",logo:"_22CAaRILPr5La-L4xixVEq",text:"h6bCnuvECDoNlWvtM5_1K",footer:"_7fnLunzyyoPWkN1GAVT7z",item:"izUJvf75kVcnxyQZVcShI",enterIcon:"_2ZrtakZD2Dd3fyBqPk6qNI",disable:"_3XkqeG1sF3XM-emDc0NiOz"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var l=n(a(315)),o=n(a(36)),u=n(a(37)),c=n(a(55)),s=n(a(56)),i=n(a(51)),f=r(a(0)),d=n(a(26)),p=n(a(189)),m=a(186),v=n(a(867)),h=n(a(2677)),E=n(a(2680));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(a,e);var t=y(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return f.default.createElement(v.default,this.props,f.default.createElement(m.Select,{className:E.default.schema,name:"scheme",options:this.protocols,defaultValue:"http"}),f.default.createElement(m.Select,{prefixIcon:f.default.createElement(m.Icon,{name:"network-card"}),name:"port",options:this.ports,placeholder:" "}),f.default.createElement(m.Input,{name:"path",defaultValue:"/metrics"}),f.default.createElement(h.default,(0,l.default)({name:"authType",formData:this.props.value},(0,p.default)(this.props,["value","onChange"]))))}},{key:"protocols",get:function(){return[{label:"HTTPS",value:"https"},{label:"HTTP",value:"http"}]}},{key:"ports",get:function(){return(0,d.default)(this.props,"detail.ports",[]).map((function(e){return{label:e.name?"".concat(e.name," (").concat(e.port,")"):e.port,value:e.name||e.port}}))}}]),a}(f.Component);t.default=g},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(31),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(48),r(42),r(4),r(23),r(57),r(17);var o,u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=l(r(0)),p=r(239),m=n(r(242)),v=r(186),h=n(r(790)),E=n(r(1626)),y=n(r(2679));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=(0,p.observer)(o=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={showForm:!1,authType:e.props.value||""},e.formRef=d.default.createRef(),e.refreshSecrets=function(){var t=e.props,a=t.cluster,r=t.namespace;e.props.secretStore.fetchListByK8s({cluster:a,namespace:r})},e.toggleForm=function(){e.setState((function(e){return{showForm:!e.showForm}}))},e.hideForm=function(){e.setState({showForm:!1})},e.handleTypeChange=function(t){e.setState({authType:t})},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.state.authType,a=e.props,r=a.value,n=a.formData,l=a.onChange;r&&r!==t&&(0,m.default)(n,r),l(t),e.hideForm()}))},e}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e,t){this.props.value&&this.props.value!==t.authType&&this.setState({authType:this.props.value||""})}},{key:"renderFormContent",value:function(){var e;switch(this.state.authType){case"":e=d.default.createElement(v.Alert,{type:"info",message:t("NO_AUTHENTICATION_TIP")});break;case"tlsConfig":e=d.default.createElement("div",null,d.default.createElement(v.Form.Item,{label:t("CERTIFICATE_AUTHORITY")},d.default.createElement(E.default,{name:"tlsConfig.ca.secret",secrets:this.secrets})),d.default.createElement(v.Form.Item,{label:t("CERTIFICATE")},d.default.createElement(E.default,{name:"tlsConfig.cert.secret",secrets:this.secrets})),d.default.createElement(v.Form.Item,{label:t("PRIVATE_KEY")},d.default.createElement(E.default,{name:"tlsConfig.keySecret",secrets:this.secrets})),d.default.createElement(v.Form.Item,{label:t("SERVER_NAME")},d.default.createElement(v.Input,{name:"tlsConfig.serverName"})),d.default.createElement(v.Form.Item,null,d.default.createElement(v.Checkbox,{name:"tlsConfig.insecretSkipVerify"},t("SKIP_TLS_VERFICATION"))));break;case"bearerTokenSecret":e=d.default.createElement("div",null,d.default.createElement(v.Form.Item,{label:t("TOKEN")},d.default.createElement(E.default,{name:"bearerTokenSecret",secrets:this.secrets})));break;case"basicAuth":e=d.default.createElement("div",null,d.default.createElement(v.Form.Item,{label:t("USERNAME")},d.default.createElement(E.default,{name:"basicAuth.username",secrets:this.secrets})),d.default.createElement(v.Form.Item,{label:t("PASSWORD")},d.default.createElement(E.default,{name:"basicAuth.password",secrets:this.secrets})))}return e}},{key:"renderFormFooter",value:function(){return d.default.createElement("div",{className:y.default.footer},d.default.createElement(v.Button,{onClick:this.hideForm},t("CANCEL")),d.default.createElement(v.Button,{type:"control",onClick:this.handleSubmit},t("OK")))}},{key:"renderForm",value:function(){var e=this.props.formData,a=this.state.authType;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:y.default.form},d.default.createElement(h.default,{className:"margin-b12",title:t("SELECT_AUTHENTICATION_METHOD"),description:t("SELECT_AUTHENTICATION_METHOD_DESC")}),d.default.createElement("div",{className:"margin-b12"},d.default.createElement(v.RadioGroup,{mode:"button",value:a,options:this.authTypes,onChange:this.handleTypeChange})),d.default.createElement(v.Form,{type:"inner",data:e,ref:this.formRef},a&&d.default.createElement(v.Alert,{type:"default",className:"margin-b12",message:d.default.createElement("div",{className:y.default.secrets},d.default.createElement("a",{href:this.secretLink,target:"_blank",rel:"noopener noreferrer"},t("CREATE_A_NEW_SECRET"))," ","or"," ",d.default.createElement("a",{onClick:this.refreshSecrets},t("REFRESH_SECRETS")))}),d.default.createElement("div",{className:y.default.formContent},this.renderFormContent()))),this.renderFormFooter())}},{key:"render",value:function(){var e=this.props.value,a=void 0===e?"":e,r=this.authTypes.find((function(e){return e.value===a}));return d.default.createElement("div",{className:y.default.wrapper},d.default.createElement("div",{className:y.default.value,onClick:this.toggleForm},d.default.createElement(v.Icon,{className:y.default.prefix,name:"ssh"}),d.default.createElement("div",{className:y.default.text},t(r.label))),this.state.showForm&&d.default.createElement("div",{className:y.default.dropdown},this.renderForm()))}},{key:"authTypes",get:function(){return[{label:t("NO_AUTHENTICATION_TCAP"),value:""},{label:t("TLS"),value:"tlsConfig"},{label:t("BEARER_TOKEN_TCAP"),value:"bearerTokenSecret"},{label:t("BASIC_AUTHENTICATION_TCAP"),value:"basicAuth"}]}},{key:"secrets",get:function(){return this.props.secretStore.list.data.slice()}},{key:"secretLink",get:function(){var e=this.props,t=e.workspace,a=e.cluster,r=e.namespace;return"/".concat(t,"/clusters/").concat(a,"/projects/").concat(r,"/secrets")}}]),r}(d.Component))||o;a.default=b},,function(e,t,a){e.exports={wrapper:"QFLj8UnuHwB8eUvkccuQO",value:"_1N3EbBmVGw449bdtrhZ9tA",active:"_2Nqy5ogxFN8C1LiYg5mwvj",text:"_3TeYR97weviqqH5XNXDNd0",prefix:"qk7WG_i0cGpwd6nhbE0B1",close:"_2tJdLwTubLfIfkXCaMogNv",dropdown:"_1ixGABFhWGnoUHB1rZ2edU",form:"_3DeozV-jza89lR4S6N5UMv",formContent:"_1yrx5rcOi0RSiXneA38jJl",footer:"_1IsQznBkKj9Aj3RhiKr9n",secrets:"_1_J1EL6cHSGETRmetccLEt"}},function(e,t,a){e.exports={schema:"vTyPh-gfAQzV7xLNRFuD6"}},function(e,t,a){e.exports={wrapper:"_3oru1UiNeJWJ7CnfkFN0qI",timeout:"_3aAyTK47_-9SBJRbv5ouVP",endpoints:"_3mSGWi2nNaTPXqvGwCMpCg"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(189)),f=n(r(74)),d=n(r(240)),p=n(r(787)),m=n(r(825)),v=n(r(2683)),h=n(r(435)),E=n(r(1342)),y=r(1588);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={"app.template.create":{on:function(e){var a,r=e.store,n=e.cluster,u=e.workspace,f=e.success,v=(0,c.default)(e,["store","cluster","workspace","success"]),g=h.default.apptemplates({workspace:u}),S=new E.default,_=p.default.open(b({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,m,v,E,y;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.default)(a,"metadata.name"),u=(0,i.default)(a,["spec","totalReplicas"]),c=(0,s.default)(a,"spec"),m=null==a?void 0:a.version,v=h.default.apptemplateversions({name:o,version:m}),E={version:m,deploymentSpec:c},y=b(b({},v),{},{spec:E}),e.next=9,S.create({cluster:n},y);case 9:return e.next=11,r.create({cluster:n},u);case 11:d.default.success({content:t("CREATE_SUCCESSFUL")}),f&&f(),p.default.close(_);case 14:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:"apptemplates",cluster:n,workspace:u,title:t("CREATE_EDGE_APP_TEMPLATE"),formTemplate:g,onlyDockerHub:!0,modal:m.default,steps:y.APP_TEMPLATES_FORM},v))}},"app.template.version.create":{on:function(e){var a,r=e.isEdit,n=e.cluster,u=e.formTemplate,g=e.templateName,S=(e.workspace,e.success),_=(0,c.default)(e,["isEdit","cluster","formTemplate","templateName","workspace","success"]),O="apptemplateversions",C=new E.default,T=u||h.default[O]({name:g}),R=p.default.open(b({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,m,v,h,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,s.default)(a,"spec"),c=(0,s.default)(a,"spec.version"),m="".concat(g,"-").concat(c),v=(0,i.default)(u,["version","deploymentSpec"]),h={version:c,deploymentSpec:v},(0,f.default)(a,"metadata.name",m),(0,f.default)(a,["metadata","labels","apps.edgewize.io/apptemplateversion"],c),E=b(b({},a),{},{spec:h}),e.next=10,null===(o=C[r?"patch":"create"])||void 0===o?void 0:o.call(C,{cluster:n},E);case 10:d.default.success({content:r?t("UPDATE_SUCCESSFUL"):t("CREATE_SUCCESSFUL")}),S&&S(),p.default.close(R);case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:C,module:O,cluster:n,title:t("CREATE_APP_TEMPLATE_VERSION"),formTemplate:T,onlyDockerHub:!0,modal:m.default,replicasExtraControl:v.default,steps:y.APP_TEMPLATE_VERSION_FORM,isEdit:r},_))}}};a.default=S},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),o=n(r(1325)),u=r(186),c=function(e){var a=e.isEdit;return l.default.createElement(u.Form.Item,{label:t("APP_TEMPLATE_VERSION"),desc:t("APP_TEMPLATE_VERSION_DESC"),rules:[{required:!0,message:t("APP_TEMPLATE_VERSION_EMPTY_DESC")},{validator:function(e,a,r){return a?o.default.isSemVer(a)?void r():r({message:t("INVALID_APP_TEMPLATE_VERSION_DESC",{message:t("APP_TEMPLATE_VERSION_DESC")}),field:e.field}):r()}}]},l.default.createElement(u.Input,{name:"spec.version",maxLength:63,disabled:a}))};a.default=c},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(73),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(73),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(824)),d=n(r(1557)),p=n(r(2685));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={"batch.deploy.app.create":{on:function(e){var a=e.store,r=e.module,n=(e.success,(0,c.default)(e,["store","module","success"])),l=i.default.open(v({onOk:function(){return i.default.close(l)},store:a,module:r,title:t("EDGE_APP_TEMPLATE_PL"),modal:p.default},n))}},"app.template.deploy":{on:function(e){var a,r=e.store,n=e.module,u=e.formTemplate,f=e.success,p=e.cluster,m=e.namespace,h=(0,c.default)(e,["store","module","formTemplate","success","cluster","namespace"]),E=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.create({namespace:m,cluster:p},a);case 2:s.default.success({content:t("CREATE_SUCCESSFUL")}),f&&f(),i.default.close(E);case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:n,namespace:m,formTemplate:u,modal:d.default,cluster:p},h))}},"app.deploy.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.onOk,d=e.selectedRowKeys,p=(0,c.default)(e,["store","success","onOk","selectedRowKeys"]),m=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:i.default.close(m),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),modal:f.default,resource:d.join(", "),title:t("DELETE_TITLE_PL",{type:t("EDGE_APPLICATION")}),store:r},p))}}};a.default=h},function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var l,o,u,c=r(a(315)),s=r(a(30)),i=r(a(58)),f=r(a(36)),d=r(a(37)),p=r(a(55)),m=r(a(56)),v=r(a(51)),h=n(a(0)),E=r(a(26)),y=r(a(189)),g=r(a(241)),b=r(a(74)),S=r(a(199)),_=r(a(1)),O=a(239),C=a(186),T=r(a(787)),R=r(a(435)),D=r(a(2686)),N=r(a(2692)),k=r(a(1541));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,O.observer)((u=o=function(e){(0,p.default)(a,e);var t=A(a);function a(e){var r;return(0,f.default)(this,a),(r=t.call(this,e)).setViewType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"appList",t=arguments.length>1?arguments[1]:void 0;r.setState({selectRepo:t,viewType:e})},r.handleClickApp=function(e){r.setState({viewType:"appDetail",selectApp:e})},r.handleDeploy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.containerDetail,a=(0,i.default)(e,["containerDetail"]),n=R.default.edgeappsets((0,g.default)(r.props,"namespace")),l=(0,E.default)(t,["metadata","labels","apps.edgewize.io/apptemplate"]),o=(0,E.default)(t,"spec"),u=(0,E.default)(o,"version"),c=(0,y.default)(o,"version");(0,b.default)(n,"spec.appTemplateName",l),(0,b.default)(n,"spec.version",u),(0,b.default)(n,"spec.deploymentTemplate.spec",c),(0,S.default)(n,{spec:{deploymentTemplate:{spec:{template:{spec:{deploymentTemplate:{spec:c}}}}}}}),r.props.trigger("app.template.deploy",P(P(P({},a),(0,g.default)(r.props,["cluster","workspace","namespace"])),{},{formTemplate:n,success:function(){r.props.onOk(),r.props.routing.query()}}))},r.state={selectRepo:"",viewType:"appList",selectApp:null},r}return(0,d.default)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.cluster,n=void 0===r?"":r,l=e.workspace,o=void 0===l?"":l,u=e.namespace,s=(e.onDeploy,(0,i.default)(e,["visible","onCancel","cluster","workspace","namespace","onDeploy"])),f=this.state,d=f.viewType,p=f.selectApp,m=f.selectRepo;return h.default.createElement(T.default,(0,c.default)({width:1070,className:k.default.modal,bodyClassName:k.default.body,visible:t,onCancel:a,rightScreen:!0,hideHeader:!0,hideFooter:!0},s),h.default.createElement(C.Button,{className:k.default.close,icon:"close",iconType:"light",type:"control",onClick:a}),"appList"===d&&h.default.createElement(D.default,{cluster:n,workspace:o,selectRepo:m,setType:this.setViewType,onClickApp:this.handleClickApp}),"appDetail"===d&&h.default.createElement(N.default,{setType:this.setViewType,app:p,cluster:n,workspace:o,namespace:u,onDeploy:this.handleDeploy}))}}]),a}(h.Component),o.propTypes={cluster:_.default.string,workspace:_.default.string,namespace:_.default.string,visible:_.default.bool,onOk:_.default.func,onCancel:_.default.func},o.defaultProps={workspace:"",visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;t.default=w},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(859),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(64),r(188),r(7);var o=n(r(43)),u=n(r(61)),c=n(r(30));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=l(r(0)),g=r(14),b=n(r(26)),S=n(r(455)),_=n(r(1)),O=r(239),C=r(186),T=n(r(1627)),R=n(r(1100)),D=r(327),N=n(r(2691));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var A=(0,O.observer)((f=i=function(e){(0,v.default)(r,e);var a=P(r);function r(e){var t;return(0,p.default)(this,r),(t=a.call(this,e)).fetchTemplates=(0,d.default)(o.default.mark((function e(){var a,r,n,l,c,s,i,f,d=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>0&&void 0!==d[0]?d[0]:{},r=!(d.length>1&&void 0!==d[1])||d[1],n=t.props,l=n.cluster,c=n.workspace,e.next=5,t.appTemplateStore.fetchList(I({page:1,limit:D.STORE_APP_LIMIT,cluster:l,workspace:c},a));case 5:s=t.appTemplateStore,i=s.allTemplates,f=s.list,r?(i.clear(),i.replace(f.data)):i.push.apply(i,(0,u.default)(f.data));case 7:case"end":return e.stop()}}),e)}))),t.formatTemplates=function(e){return e.map((function(e){var t=e.name,a=e.latestVersion;return I(I({},e),{},{app_id:t,latest_app_version:a})}))},t.fetchMoreTemplates=(0,d.default)(o.default.mark((function e(){var a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appTemplateStore.list.page,r=t.state.name,e.next=4,t.fetchTemplates({page:a+1,name:r},!1);case 4:case"end":return e.stop()}}),e)}))),t.handleSearch=function(e){t.setState({name:e}),t.fetchTemplates({name:e})},t.handleRefresh=function(){var e=t.state.name;t.fetchTemplates({name:e})},t.state={selectRepo:e.selectRepo,name:""},t.appTemplateStore=new R.default,t}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.fetchTemplates()}},{key:"renderHeader",value:function(){return y.default.createElement("div",{className:N.default.header},y.default.createElement("div",{className:N.default.logo},y.default.createElement("img",{src:"/assets/edge-application.svg",alt:""})),y.default.createElement("div",{className:N.default.text},y.default.createElement("h2",null,t("EDGE_APP_TEMPLATES_PL")),y.default.createElement("p",null,t("EDGE_APP_TEMPLATES_MODAL_DESC"))))}},{key:"renderToolbar",value:function(){return y.default.createElement("div",{className:N.default.toolbar},y.default.createElement(C.InputSearch,{onSearch:this.handleSearch,className:N.default.search,placeholder:t("SEARCH")}),y.default.createElement(C.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"render",value:function(){var e=this.appTemplateStore,t=e.allTemplates,a=e.list,r=a.isLoading,n=a.total;return y.default.createElement(y.default.Fragment,null,this.renderHeader(),this.renderToolbar(),y.default.createElement("div",{className:N.default.apps},y.default.createElement(T.default,{itemCls:N.default.appItem,iconName:"appcenter",showCreateVendor:!0,apps:this.formatTemplates((0,g.toJS)(t)),isLoading:r,total:n,onFetchMore:this.fetchMoreTemplates,onClickAppItem:this.props.onClickApp,disableLink:!0})))}},{key:"repoSelectOptions",get:function(){var e=this.repoStore.list.data.map((function(e){var t=e.name;return{value:e.repo_id,label:t}}));return e.unshift({value:null,label:t("CURRENT_WORKSPACE")}),e}},{key:"selectedRepo",get:function(){return this.state.selectRepo||(0,b.default)(this.repoSelectOptions,"[0].value")}}]),r}(y.Component),i.propTypes={workspace:_.default.string,store:_.default.object,onClickApp:_.default.func,fetchTemplates:_.default.func,selectRepo:_.default.string},i.defaultProps={workspace:"",store:{},onClickApp:S.default},s=f))||s;a.default=A},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=n(r(836)),p=r(52),m=n(r(1628)),v=r(186),h=n(r(2689));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderVendor",value:function(){var e=this.props,a=e.app;if(e.showCreateVendor)return t("CREATOR_VALUE",{value:a.creator||"-"});var r=(0,p.safeParseJSON)(a.latest_app_version.maintainers,[]).map((function(e){return e.name}));return t("MAINTAINER_VALUE",{value:r[0]||"-"})}},{key:"render",value:function(){var e=this.props,a=e.app,r=e.iconName,n=(0,f.default)(globals.user,"lang")||(0,p.getBrowserLang)(),l=(0,f.default)(a,"description_".concat(n),a.description);return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement("div",{className:h.default.title},i.default.createElement("span",{className:h.default.icon},r?i.default.createElement(v.Icon,{name:r,size:48}):i.default.createElement(d.default,{iconSize:48,src:a.icon,iconLetter:a.name,alt:""})),i.default.createElement("div",{className:h.default.text},i.default.createElement("div",null,i.default.createElement("strong",null,a.name||"-"),i.default.createElement(m.default,{app:a})),i.default.createElement("p",{className:h.default.desc,title:l||""},l||"-"))),i.default.createElement("div",{className:h.default.bottom},i.default.createElement("span",{className:h.default.vendor},this.renderVendor()),i.default.createElement("span",{className:h.default.version,title:a.latest_app_version.name},t("LATEST_VALUE",{value:a.latest_app_version.name||"-"}))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){e.exports={content:"_3K7XcF23Jr-6yl5gk0sUpA",authorizedTip:"_3wRwZh7wpRb0keKGmC6P9F",authorizedTipTitle:"_37-SrvFOHEgEEq2XbhamIN"}},function(e,t,a){e.exports={wrapper:"_1zF0xPww2LpgxDFbVDQtWc",title:"_2Nq0b4RJcpqibfUTxirGBM",icon:"BqQX23omFu9bVU3UdZO12",text:"SpkoXwVuepyl5mMB85r9s",desc:"_30UPhHVa7pOp-XEWz2eRz_",bottom:"_3ZaAkU1nl0bI9b6j2pMyzm",vendor:"fQ6ZLtTi2AjCEIgH1eLeM",version:"_--5xd3q0U7oxxx1TragFp"}},function(e,t,a){e.exports={appList:"_3e_tmkJx9nmHjU2sjIk5fC",appItem:"_2shYOeim1w7KZ_ArClfUd",noApp:"_2tfdcH8dm5pbWjj8uR2TlS",loading:"_2cilLcQtThJ_7F0QvkSkCB",loadMore:"_2zMYJZr8vU75-lyWEPh98A"}},function(e,t,a){e.exports={apps:"gHiKdb373zSHCpephDrk2",appItem:"_3t8NMH_YscCKdI5DBMf3Tn",header:"_3aBHx84uEw4eeVCnlEc-UL",logo:"_1yV_JzjwsYKqqnyrsKZ58H",text:"_2CmaLzwklz3onRSo8Or1P2",toolbar:"_2NUvpsg4SwNIniSC5FhIMy",search:"_2STk1Dy7lNhGu1RBcYNoFP"}},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(109),r(11),r(31),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43)),u=n(r(30));r(41);var c,s,i,f=n(r(44)),d=n(r(36)),p=n(r(37)),m=n(r(55)),v=n(r(56)),h=n(r(51)),E=l(r(0)),y=n(r(243)),g=n(r(63)),b=n(r(199)),S=n(r(1)),_=r(239),O=r(186),C=n(r(435)),T=r(248),R=n(r(816)),D=n(r(932)),N=n(r(483)),k=n(r(1100)),I=n(r(2693)),P=n(r(2695));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var L=(0,_.observer)((i=s=function(e){(0,m.default)(n,e);var a,r=M(n);function n(e){var t;return(0,d.default)(this,n),(t=r.call(this,e)).fetchVersions=(0,f.default)(o.default.mark((function e(){var a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,t.versionStore.fetchList(w(w({},a),{},{app_id:t.appId,noLimit:!0}));case 3:case"end":return e.stop()}}),e)}))),t.handleTabChange=function(e){t.setState({tab:e})},t.handleClickBack=function(){var e=t.props.app;t.props.setType("appList",e.repo_id)},t.showDeploy=function(){var e=t.props.app,a=e.name,r=e.description,n=t.containerFormRef.current;n&&n.validate((function(){t.props.onDeploy({title:a,description:r||"-",containerDetail:n.getData(),store:t.store})}))},t.handleChangeAppVersion=function(e){t.setState({selectedVersionKey:e})},t.state={tab:"versionInfo",selectedVersionKey:"",showDeploy:!1},t.store=new N.default,t.appTemplateStore=new k.default,t.containerFormRef=E.default.createRef(),t}return(0,p.default)(n,[{key:"componentDidMount",value:(a=(0,f.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.app.latestVersion.name,this.setState({selectedVersionKey:t});case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.setType()}},{key:"renderContainerGroupInfo",value:function(){var e=this.props,a=e.cluster,r=e.namespace;return E.default.createElement("div",{className:P.default.content},E.default.createElement("div",{className:P.default.title},t("VERSION")),E.default.createElement(R.default,{className:"margin-b12",value:this.state.selectedVersionKey,options:this.versionOptions,onChange:this.handleChangeAppVersion}),this.selectedVersion&&E.default.createElement(D.default,{formRef:this.containerFormRef,store:this.appTemplateStore,cluster:a,namespace:r,formTemplate:this.containerFormTemplate,onlyDockerHub:!0,isReadOnlyContainers:!0,isShowAddContainer:!1}))}},{key:"render",value:function(){var e=this.props.app,a=e.name,r=e.description;return E.default.createElement(E.default.Fragment,null,E.default.createElement(I.default,{onClickBack:this.handleClickBack,title:a,desc:r||"-"}),E.default.createElement("div",{className:P.default.bar},E.default.createElement("span",{className:"h6"},t("CONTAINER_GROUP_INFO")),E.default.createElement(O.Button,{type:"control",onClick:this.showDeploy,disabled:(0,g.default)(this.versionOptions)},t("DEPLOYMENT"))),this.renderContainerGroupInfo())}},{key:"appId",get:function(){return this.props.app.name}},{key:"tabs",get:function(){return[{label:t("APP_INFORMATION"),value:"versionInfo"},{label:t("CHART_FILES"),value:"chartFiles"}]}},{key:"versionOptions",get:function(){var e=this.props.app,a=e.versions,r=e.latestVersion;return a.map((function(e){var a=e.name,n=e.createTime;return{value:a,label:E.default.createElement(E.default.Fragment,null,a,a===r.name&&E.default.createElement(O.Tag,{type:"warning",className:P.default.latestTag},t("LATEST_VERSION_SCAP"))),description:(0,y.default)(n).format("YYYY-MM-DD")}}))}},{key:"selectedVersion",get:function(){var e=this.state.selectedVersionKey;return this.props.app.versions.find((function(t){return t.name===e}))}},{key:"containerFormTemplate",get:function(){var e=this.props.namespace,t=C.default.apptemplateversions({name:this.appId});return this.selectedVersion&&(t=(0,T.getVersionFormattedData)(this.selectedVersion)),t=(0,b.default)({metadata:{namespace:e}},t)}}]),n}(E.Component),s.propTypes={app:S.default.object,setType:S.default.func,cluster:S.default.string,workspace:S.default.string,namespace:S.default.string},s.defaultProps={app:{}},c=i))||c;a.default=L},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=l(r(1)),p=r(186),m=l(r(2694));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClickBack=function(){e.props.onClickBack?e.props.onClickBack():history.back()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.desc;return f.default.createElement("div",{className:m.default.banner},f.default.createElement("div",{className:m.default.back,onClick:this.handleClickBack},f.default.createElement(p.Icon,{name:"return",size:20}),f.default.createElement("span",null,t("BACK"))),f.default.createElement("div",{className:m.default.intro},f.default.createElement("span",{className:m.default.icon},f.default.createElement(p.Icon,{name:"appcenter",size:48})),f.default.createElement("div",{className:m.default.text},f.default.createElement("h3",null,a),f.default.createElement("p",null,r))),f.default.createElement("div",{className:m.default.rightIcon},f.default.createElement("span",{className:m.default.image},f.default.createElement(p.Icon,{name:"appcenter",size:200}))))}}]),r}(f.PureComponent);h.propTypes={title:d.default.string,desc:d.default.string,onClickBack:d.default.func};var E=h;a.default=E},function(e,t,a){e.exports={banner:"_2tllEKXCXvP03k6dqkqo9P",back:"_3DGxM1X0SHKlgbIDsVKp3X",intro:"vFkqD92isQmWhgOwkUdOu",icon:"_22C8eVyy7aqfPfEHHMHO_N",text:"jWGiG0zE4VlCTpXpXY2E5",rightIcon:"_2WQXajnxYUFQrG2p-NLsKX",image:"_2mPnncdG6GHXpplRwrQPWs"}},function(e,t,a){e.exports={bar:"BwiZ_ak3AYqdMysoDEWMe",content:"_3n91v2FSbzuf3PLY0oBC4a",loading:"_2sRqm106TEq9Tg-rn1q7oK",latestTag:"_1ZNgP7hTM6Et9xjH_SU5xg",title:"_1Xv4crrPW1_v5ePynOubVw",details:"_11mSEf_wjvkcmGwaLsIXgg"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(87),r(98),r(9),r(13),r(10),r(24),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(84),r(28),r(87),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(22),r(24),r(85),r(62),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(825)),i=r(2697),f=n(r(787)),d=n(r(2704)),p=n(r(240)),m=n(r(2706)),v=n(r(435)),h=n(r(74)),E=n(r(63)),y=n(r(135)),g=r(14);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={"cd.create":{on:function(e){var a,r=e.store,n=e.cluster,d=(e.workspace,e.module),m=e.success,y=(0,c.default)(e,["store","cluster","workspace","module","success"]),g=v.default[d](),b=f.default.open(S({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,s,i,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.syncPolicy.type,c="automated"===o?(0,u.default)({},o,{prune:a.syncPolicy.prune,selfHeal:a.syncPolicy.selfHeal}):(0,u.default)({},o,{}),s=S({repoURL:a.repoURL.match(/\(([\w\W]+)\)/)[1]},a.source),i=(0,E.default)(a.syncOptions)?void 0:Object.entries(a.syncOptions).reduce((function(e,t){var a="".concat(t[0],"=").concat(t[1]);return e.push(a),e}),[]),c.syncOptions=i,d={destination:a.destination,source:s,syncPolicy:c},(0,h.default)(g,"metadata",a.metadata),(0,h.default)(g,"spec.argoApp.spec",d),e.next=10,r.create({data:g,devops:y.devops,cluster:n});case 10:p.default.success({content:t("CREATE_SUCCESSFUL")}),m&&m(),f.default.close(b);case 13:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:d,cluster:n,formTemplate:{},modal:s.default,steps:i.CD_FORM},y))}},"cd.sync":{on:function(e){var a,r=e.store,n=e.cluster,u=(e.workspace,e.module),s=e.success,i=e.formTemplate,m=e.application,v=(0,c.default)(e,["store","cluster","workspace","module","success","formTemplate","application"]),g=f.default.open(S(S({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,y.default)(a),u=(0,E.default)(o.syncOptions)?void 0:Object.entries(o.syncOptions).reduce((function(e,t){var a="".concat(t[0],"=").concat(t[1]);return e.push(a),e}),[]),(0,h.default)(o,"syncOptions",u),(0,h.default)(o,"revision",a.repoSource.targetRevision),e.next=6,r.updateSync({data:o,devops:v.devops,cluster:n,application:m});case 6:p.default.success({content:t("SYNC_TRIGGERED")}),s&&s(),f.default.close(g);case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r},v),{},{module:u,cluster:n,formTemplate:i,modal:d.default},v))}},"cd.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(S({onOk:function(){f.default.close(o),p.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()},store:a,modal:m.default,resource:r},l))}},"cd.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=(0,c.default)(e,["store","success","rowKey"]),u=(0,g.toJS)(a.list),s=u.data,i=u.selectedRowKeys,d=s.filter((function(e){return i.includes(e[l])}));if(!(0,E.default)(d))var v=f.default.open(S({onOk:function(){f.default.close(v),p.default.success({content:t("DELETED_SUCCESSFULLY")}),r&&r()},modal:m.default,resource:d,store:a},o))}}};a.default=_},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.CD_FORM=void 0;var n=r(a(2698)),l=r(a(2701)),o=r(a(2703)),u=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"CODE_REPOSITORY_SETTINGS",component:l.default,required:!0,icon:"code"},{title:"SYNC_SETTINGS",component:o.default,required:!0,icon:"timed-task"}];t.CD_FORM=u},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(43)),u=n(r(30));r(41);var c=n(r(44)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=r(186),v=n(r(0)),h=n(r(1109)),E=r(72),y=n(r(1629)),g=n(r(2699));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,f.default)(r,e);var a=_(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).codeStore=new h.default,e.state={options:[]},e.getRepoList=function(){var t=(0,c.default)(o.default.mark((function t(a){var r,n,l,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.devops,l=r.cluster,t.next=3,e.codeStore.fetchList(S({devops:n,cluster:l},a));case 3:u=e.codeStore.list.data.map((function(e){return{label:e.name,value:"".concat(e.name,"(").concat(e.repoURL,")"),icon:"bitbucket_server"===e.provider?"bitbucket":e.provider}})),e.setState({options:u});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.repoOptionRenderer=function(e){return function(t){return v.default.createElement("span",{className:y.default.option},v.default.createElement(m.Icon,{name:e.icon,type:"value"===t?"dark":"light"}),v.default.createElement("span",null,e.value))}},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getRepoList()}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return v.default.createElement(m.Form,{ref:a,data:r},v.default.createElement(m.Columns,null,v.default.createElement(m.Column,null,v.default.createElement(m.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:E.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},v.default.createElement(m.Input,{name:"metadata.name",maxLength:63})),v.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),v.default.createElement(m.Column,null,v.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:E.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},v.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),v.default.createElement("div",{className:y.default.wrapper},v.default.createElement("h6",null,t("DEPLOY_LOCATION")),v.default.createElement("div",{className:y.default.wrapper_item},v.default.createElement(m.Form.Item,{rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},v.default.createElement(g.default,(0,l.default)({name:"destination",prefix:"destination",formData:r},this.props))))))}}]),r}(v.default.Component);a.default=O},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(31),r(6),r(18),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43)),u=n(r(30));r(41);var c,s,i,f,d=n(r(44)),p=n(r(65)),m=n(r(36)),v=n(r(37)),h=n(r(88)),E=n(r(55)),y=n(r(56)),g=n(r(51)),b=n(r(49)),S=(n(r(66)),r(186)),_=n(r(3)),O=n(r(790)),C=n(r(828)),T=n(r(135)),R=n(r(26)),D=n(r(241)),N=n(r(74)),k=r(14),I=r(239),P=l(r(0)),A=n(r(439)),w=r(52),M=n(r(2700));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var U=(0,I.observer)((s=function(e){(0,E.default)(l,e);var a,r,n=x(l);function l(){var e;(0,m.default)(this,l);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return(e=n.call.apply(n,[this].concat(r))).state={showForm:!1,initializing:!0,oldFormDate:{},name:""},(0,p.default)(e,"formData",i,(0,h.default)(e)),e.formRef=P.default.createRef(),e.cdStore=e.props.store,e.projectStore=new A.default,e.fetchNamespaces=(0,d.default)(o.default.mark((function t(){var a,r,n,l=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},r=(0,R.default)(e.formData,"".concat(e.prefix,".name"),""),n=(0,w.inCluster2Default)(r),t.next=5,e.projectStore.fetchList(j(j({},a),{},{cluster:n,type:"user"}));case 5:case"end":return t.stop()}}),t)}))),e.handleClusterChange=function(t){e.fetchNamespaces(),e.setState({name:t});var a=e.clusters.find((function(e){return e.value===t})).server;(0,N.default)(e.formData,"".concat(e.prefix,".server"),a),(0,N.default)(e.formData,"".concat(e.prefix,".namespace"),"")},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){Object.assign(e.props.formData,j({},e.formData)),e.setState({showForm:!1,oldFormDate:(0,k.toJS)(e.formData)})}))},e.showForm=function(){e.setState({showForm:!0})},(0,p.default)(e,"hideForm",f,(0,h.default)(e)),e.projectOptionRenderer=function(e){return P.default.createElement("span",{className:M.default.option},e.isFedManaged?P.default.createElement("img",{className:M.default.indicator,src:"/assets/cluster.svg"}):P.default.createElement(S.Icon,{name:"project"}),e.label,e.isFedManaged&&P.default.createElement(S.Tooltip,{content:t("FEDPROJECT_CANNOT_DEPLOY_APP_TIP")},P.default.createElement(S.Icon,{className:M.default.tip,name:"question"})))},e}return(0,v.default)(l,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(r=(0,d.default)(o.default.mark((function e(){var t,a,r,n,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({initializing:!0}),t=this.formData["".concat(this.prefix)]||{},a=t.cluster,r=t.server,n=t.namespace,e.next=4,this.fetchClusters();case 4:return a?!r&&a&&(l=this.clusters.find((function(e){return e.value===a})),(0,N.default)(this.formData,"".concat(this.prefix,".name"),(0,R.default)(this.clusters,l.value)),(0,N.default)(this.formData,"".concat(this.prefix,".server"),(0,R.default)(this.clusters,l.server))):((0,N.default)(this.formData,"".concat(this.prefix,".name"),(0,R.default)(this.clusters,"[0].value")),(0,N.default)(this.formData,"".concat(this.prefix,".server"),(0,R.default)(this.clusters,"[0].server"))),e.next=7,this.fetchNamespaces();case 7:n||(u=this.namespaces.find((function(e){return!e.disabled}))||{},(0,N.default)(this.formData,"".concat(this.prefix,".namespace"),u.value||"")),Object.assign(this.props.formData,this.formData),this.setState({initializing:!1,oldFormDate:(0,T.default)((0,k.toJS)(this.formData))});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchClusters",value:(a=(0,d.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.cluster,e.next=3,this.cdStore.getClustersList(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderPlacement",value:function(){var e=this.props.formData["".concat(this.prefix)]||{},a=(0,w.inCluster2Default)(e.name);return P.default.createElement("div",{className:M.default.placement},P.default.createElement(O.default,{icon:"cluster",title:(0,w.showNameAndAlias)(a,"cluster"),description:t("CLUSTER")}),P.default.createElement(O.default,{icon:"project",title:(0,w.showNameAndAlias)(e.namespace,"project",{cluster:a}),description:t("PROJECT")}),P.default.createElement(S.Icon,{className:M.default.icon,name:"chevron-down",size:20}))}},{key:"renderForm",value:function(){return P.default.createElement("div",{className:M.default.form},P.default.createElement(S.Form,{ref:this.formRef,type:"inner",data:this.formData},P.default.createElement(S.Columns,null,P.default.createElement(S.Column,null,P.default.createElement(S.Form.Item,{label:t("CLUSTER")},P.default.createElement(S.Select,{name:"".concat(this.prefix,".name"),key:this.state.name,placeholder:" ",options:this.clusters,onChange:this.handleClusterChange,prefixIcon:P.default.createElement(S.Icon,{name:"cluster",size:16}),disabled:!globals.app.isMultiCluster,showTip:!0}))),P.default.createElement(S.Column,null,P.default.createElement(S.Form.Item,{label:t("PROJECT"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},P.default.createElement(S.Select,{name:"".concat(this.prefix,".namespace"),placeholder:" ",options:this.namespaces,pagination:(0,D.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,searchable:!0,clearable:!0}))))),P.default.createElement(C.default,{className:M.default.confirm,onOk:this.handleSubmit,onCancel:this.hideForm}))}},{key:"render",value:function(){var e=this.state,a=e.showForm,r=e.initializing;if(a)return this.renderForm();var n=(0,R.default)(this.formData,"".concat(this.prefix,".namespace"),"");return P.default.createElement("div",{className:(0,_.default)(M.default.wrapper,(0,u.default)({},M.default.expand,a)),onClick:this.showForm},n?this.renderPlacement():P.default.createElement("div",{className:M.default.placeholder},r?P.default.createElement(S.Loading,{className:"text-center"}):t("PROJECT_NOT_SELECT_DESC")))}},{key:"prefix",get:function(){return"".concat(this.props.prefix)}},{key:"clusters",get:function(){return this.cdStore.clustersList.map((function(e){return{label:(0,w.showNameAndAlias)((0,w.inCluster2Default)(e.name),"cluster"),value:e.name,server:e.server}}))}},{key:"namespaces",get:function(){return this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:(0,w.showNameAndAlias)(e),value:e.name,disabled:e.isFedManaged||e.isFedHostNamespace,isFedManaged:e.isFedManaged||e.isFedHostNamespace}}))}}]),l}(P.Component),i=(0,b.default)(s.prototype,"formData",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,b.default)(s.prototype,"clusters",[k.computed],Object.getOwnPropertyDescriptor(s.prototype,"clusters"),s.prototype),(0,b.default)(s.prototype,"namespaces",[k.computed],Object.getOwnPropertyDescriptor(s.prototype,"namespaces"),s.prototype),f=(0,b.default)(s.prototype,"hideForm",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setState({showForm:!1},(function(){e.formData=e.state.oldFormDate,Object.assign(e.props.formData,j({},e.formData))}))}}}),c=s))||c;a.default=U},function(e,t,a){e.exports={wrapper:"_3z2Z9hMemOOjjGphBi-8sh",placeholder:"KK7SUBB92n4Wwek-F2DYR",form:"_3pVLZicpx-Rbr0egCKsLK",confirm:"DslrrnKn_QmqZZLCpJxuA",placement:"_2Q-2XDFS-FUOb9mjjlCrYc",icon:"_1HSRuvA-86V8m58eHsUJvR",option:"Dxyd1qFSZm73dPMUuSqdc",tip:"_3S0tzXh5APNgwIS8ONi0s1"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(43)),o=n(r(30));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(241)),v=r(186),h=n(r(1109)),E=n(r(2702));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).codeStore=new h.default,e.state={options:[]},e.getRepoList=function(){var t=(0,u.default)(l.default.mark((function t(a){var r,n,o,u;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.devops,o=r.cluster,t.next=3,e.codeStore.fetchList(g({devops:n,cluster:o},a));case 3:u=e.codeStore.list.data.map((function(e){return{label:e.name,value:"".concat(e.name,"(").concat(e.repoURL,")"),icon:"bitbucket_server"===e.provider?"bitbucket":e.provider}})),e.setState({options:u});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.repoOptionRenderer=function(e){return function(t){return p.default.createElement("span",{className:E.default.option},p.default.createElement(v.Icon,{name:e.icon,type:"value"===t?"dark":"light"}),p.default.createElement("span",null,e.value))}},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.getRepoList()}},{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.formTemplate;return p.default.createElement(v.Form,{data:n,ref:r},p.default.createElement(v.Form.Item,{label:t("CODE_REPOSITORY"),rules:[{required:!0,message:t("REPO_EMPTY_DESC")}]},p.default.createElement(v.Select,{name:"repoURL",options:this.state.options,valueRenderer:function(t){return e.repoOptionRenderer(t)("value")},optionRenderer:function(t){return e.repoOptionRenderer(t)("option")},pagination:(0,m.default)(this.codeStore.list,["page","limit","total"]),isLoading:this.codeStore.list.isLoading,onFetch:this.getRepoList,searchable:!0,clearable:!0})),p.default.createElement(v.Form.Item,null,p.default.createElement(v.Columns,null,p.default.createElement(v.Column,null,p.default.createElement(v.Form.Item,{label:t("REVISION"),desc:t("REVISIONS_DESC")},p.default.createElement(v.Input,{name:"source.targetRevision",defaultValue:"HEAD"}))),p.default.createElement(v.Column,null,p.default.createElement(v.Form.Item,{label:t("MANIFEST_FILE_PATH"),desc:t("MANIFEST_FILE_PATH_DESC")},p.default.createElement(v.Input,{name:"source.path",defaultValue:"."}))))))}}]),r}(p.default.Component);a.default=S},function(e,t,a){e.exports={option:"_15uAGEdI1ccU0Ut3vp8560"}},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(186),m=n(r(816)),v=r(72),h=n(r(26)),E=n(r(74)),y=n(r(1629));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=a.call.apply(a,[this].concat(c))).handleCheckboxChange=function(t){return function(a){var r=e.props.formTemplate;(0,E.default)(r,t,a),e.forceUpdate()}},e.handleChange=function(t){var a=e.props.formTemplate;(0,E.default)(a,"syncPolicy.type",t),e.forceUpdate()},e.handlePruneChange=function(t){var a=e.props.formTemplate;(0,E.default)(a,"syncOptions.PrunePropagationPolicy",t),e.forceUpdate()},e.handleReplace=function(t){var a=e.props.formTemplate;(0,E.default)(a,"syncOptions.Replace",t),e.forceUpdate()},e.renderCheckboxItem=function(a){var r=a.title,n=a.desc,u=a.name,c=a.displayTitle,s=a.displayDesc,i=(0,o.default)(a,["title","desc","name","displayTitle","displayDesc"]);return d.default.createElement(p.Form.Item,{key:u},d.default.createElement("div",{className:y.default.checkbox_item},d.default.createElement(p.Checkbox,(0,l.default)({name:u,checked:(0,h.default)(e.props.formTemplate,u,!1),onChange:e.handleCheckboxChange(u)},i)),d.default.createElement("div",{className:y.default.checkbox_item_info},d.default.createElement("p",null,null!=c?c:t(r)),d.default.createElement("span",null,null!=s?s:t(n)))))},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return d.default.createElement(p.Form,{data:r,ref:a},d.default.createElement("div",{className:y.default.wrapper},d.default.createElement("h6",null,t("SYNC_STRATEGY_TCAP")),d.default.createElement("div",{className:y.default.wrapper_item},d.default.createElement("div",{className:y.default.wrapper_item_com},d.default.createElement(p.Form.Item,null,d.default.createElement(m.default,{name:"syncPolicy.type",defaultValue:"manual",options:this.syncOptions,onChange:this.handleChange}))),"automated"===this.syncPolicyType&&d.default.createElement("div",{className:y.default.columns},this.syncPolicyTypeOptions.map(this.renderCheckboxItem)))),d.default.createElement("div",{className:y.default.wrapper},d.default.createElement("h6",null,t("SYNC_SETTINGS")),d.default.createElement("div",{className:y.default.wrapper_item},d.default.createElement("div",{className:"".concat(y.default.columns," ").concat(y.default.wrapper_item_com)},this.syncOptionsOptions.map(this.renderCheckboxItem)),d.default.createElement(p.Form.Item,{label:t("PRUNE_PROPAGATION_POLICY")},d.default.createElement(m.default,{name:"syncOptions.PrunePropagationPolicy",defaultValue:"foreground",options:this.prunePropagationPolicyOptions,onChange:this.handlePruneChange})),d.default.createElement(p.Form.Item,null,d.default.createElement("div",{className:y.default.checkbox_item},d.default.createElement(p.Checkbox,{name:"syncOptions.Replace",checked:this.getReplace,onChange:this.handleReplace}),d.default.createElement("div",{className:y.default.checkbox_item_info},d.default.createElement("p",null,t("REPLACE_RESOURCE")),d.default.createElement("span",null,t("REPLACE_RESOURCE_DESC"))))))))}},{key:"syncPolicyTypeOptions",get:function(){return[{title:"PRUNE_RESOURCES",desc:"PRUNE_RESOURCES_DESC",name:"syncPolicy.prune"},{title:"SELF_HEAL",desc:"SELF_HEAL_DESC",name:"syncPolicy.selfHeal"}]}},{key:"syncOptionsOptions",get:function(){return[{title:"SKIP_SCHEMA_VALIDATION",desc:"SKIP_SCHEMA_VALIDATION_DESC",name:"syncOptions.Validate"},{title:"AUTO_CREATE_PROJECT",desc:"AUTO_CREATE_PROJECT_DESC",name:"syncOptions.CreateNamespace"},{title:"PRUNE_LAST",desc:"PRUNE_LAST_DESC",name:"syncOptions.PruneLast"},{title:"APPLY_OUT_OF_SYNC_ONLY",desc:"APPLY_OUT_OF_SYNC_ONLY_DESC",name:"syncOptions.ApplyOutOfSyncOnly"}]}},{key:"prunePropagationPolicyOptions",get:function(){return[{label:"foreground",value:"foreground",description:t("FOREGROUND_DESC")},{label:"background",value:"background",description:t("BACKGROUND_DESC")},{label:"orphan",value:"orphan",description:t("ORPHAN_DESC")}]}},{key:"syncPolicyType",get:function(){var e,t,a=this.props.formTemplate;return null!==(e=null==a||null===(t=a.syncPolicy)||void 0===t?void 0:t.type)&&void 0!==e?e:"manual"}},{key:"syncOptions",get:function(){return v.SYNC_STRATEGY.map((function(e){var a=e.label,r=e.value,n=e.description;return{label:t(a),description:t(n),icon:"timed-task",value:r}}))}},{key:"getReplace",get:function(){var e=this.props.formTemplate;return(0,h.default)(e,"syncOptions.Replace",!1)}}]),r}(d.default.Component);a.default=b},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(239),v=n(r(1)),h=r(186),E=n(r(787)),y=n(r(26)),g=n(r(74)),b=r(72),S=n(r(2705));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,m.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).form=p.default.createRef(),e.handleSubmit=function(){(0,e.props.onOk)(e.form.current.getData())},e.handleCheckboxChange=function(t){return function(a){var r=e.props.formTemplate;(0,g.default)(r,t,a),e.forceUpdate()}},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.formTemplate;return p.default.createElement(E.default,{width:960,title:a||t("CREATE_ROLE"),onCancel:n,onOk:this.handleSubmit,visible:r},p.default.createElement(h.Form,{ref:this.form,data:l},p.default.createElement("div",{className:S.default.columns},p.default.createElement("div",{className:S.default.column},p.default.createElement(h.Form.Item,{label:t("CODE_REPOSITORY_URL")},p.default.createElement(h.Input,{name:"repoSource.repoURL",disabled:!0}))),p.default.createElement("div",{className:S.default.column},p.default.createElement(h.Form.Item,{label:t("REVISION"),desc:t("REVISION_DESC")},p.default.createElement(h.Input,{name:"repoSource.targetRevision"})))),p.default.createElement("div",{className:S.default.columns},p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"prune",checked:(0,y.default)(l,"prune",!1),onChange:this.handleCheckboxChange("prune")},t("PRUNE")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"dryRun",checked:(0,y.default)(l,"dryRun",!1),onChange:this.handleCheckboxChange("dryRun")},t("DRY_RUN")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"applyOnly",checked:(0,y.default)(l,"applyOnly",!1),onChange:this.handleCheckboxChange("applyOnly")},t("APPLY_ONLY")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"syncStrategy.apply.force",checked:(0,y.default)(l,"syncStrategy.apply.force",!1),onChange:this.handleCheckboxChange("syncStrategy.apply.force")},t("FORCE"))))),p.default.createElement("div",{className:S.default.wrapper},p.default.createElement("h6",null,t("SYNC_SETTINGS")),p.default.createElement("div",{className:S.default.wrapper_item},p.default.createElement("div",{className:"".concat(S.default.columns," ").concat(S.default.wrapper_item_com)},p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"syncOptions.Validate",checked:(0,y.default)(l,"syncOptions.Validate",!1),onChange:this.handleCheckboxChange("syncOptions.Validate")},t("SKIP_SCHEMA_VALIDATION")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"syncOptions.CreateNamespace",checked:(0,y.default)(l,"syncOptions.CreateNamespace",!1),onChange:this.handleCheckboxChange("syncOptions.CreateNamespace")},t("AUTO_CREATE_PROJECT")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"syncOptions.PruneLast",checked:(0,y.default)(l,"syncOptions.PruneLast",!1),onChange:this.handleCheckboxChange("syncOptions.PruneLast")},t("PRUNE_LAST")))),p.default.createElement("div",{className:"".concat(S.default.column," ").concat(S.default.column_card)},p.default.createElement(h.Form.Item,null,p.default.createElement(h.Checkbox,{name:"syncOptions.ApplyOutOfSyncOnly",checked:(0,y.default)(l,"syncOptions.ApplyOutOfSyncOnly",!1),onChange:this.handleCheckboxChange("syncOptions.ApplyOutOfSyncOnly")},t("APPLY_OUT_OF_SYNC_ONLY"))))),p.default.createElement(h.Form.Item,{label:t("PRUNE_PROPAGATION_POLICY")},p.default.createElement(h.Select,{name:"syncOptions.PrunePropagationPolicy",options:b.PRUNE_PROPAGATION_POLICY_OPTIONS})),p.default.createElement(h.Form.Item,null,p.default.createElement("div",{className:S.default.checkbox_item},p.default.createElement(h.Checkbox,{name:"syncOptions.Replace",checked:(0,y.default)(l,"syncOptions.Replace",!1),onChange:this.handleCheckboxChange("syncOptions.Replace")}),p.default.createElement("div",{className:S.default.checkbox_item_info},p.default.createElement("p",null,t("REPLACE_RESOURCE")),p.default.createElement("span",null,t("REPLACE_RESOURCE_DESC")))))))))}}]),r}(p.default.Component),o.propTypes={store:v.default.object,module:v.default.string,formTemplate:v.default.object,title:v.default.string,visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){e.exports={wrapper:"_1JWzJvszLMHMLyb-TeoMIz",wrapper_item:"jPIV0cqgpuJN1jf3JSDcW",wrapper_item_com:"_1g3AWoSQifeaTpuwYERL_V",columns:"_16FyP4wau96WlEXWJRsJ1R",column:"_20iJTIApnqzOwXgexIuLpL",column_card:"_1uqoIVdzmWb1Y5-WFbQxE2",checkbox_item:"eZ9DmMZilf8qIV78FSsGk",checkbox_item_info:"_2ODKbWRDaRBjg1GoWej9KM"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(85),r(38),r(7),r(32),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(38),r(7),r(32),r(110);var l=n(r(315)),o=n(r(58)),u=n(r(61)),c=n(r(43)),s=n(r(30));r(41);var i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=n(r(1)),y=n(r(3)),g=n(r(26)),b=n(r(60)),S=n(r(63)),_=r(186),O=r(52),C=n(r(787)),T=n(r(833)),R=n(r(2707));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var I=function(e){(0,p.default)(n,e);var a,r=k(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).stopPropagation=function(e){return e.stopPropagation()},t.handleOk=(0,i.default)(c.default.mark((function e(){var a,r,n,l,o,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.onOk,n=a.store,l=a.resource,o=t.state.selectedRelatedResourceIds,!(0,b.default)(l)){e.next=10;break}return u=[],l.forEach((function(e){u.push(n.delete(N(N({},e),{},{isRelated:o.includes(e.uid)})))})),e.next=7,Promise.all(u);case 7:n.list.setSelectRowKeys([]),e.next=12;break;case 10:return e.next=12,n.delete(N(N({},l),{},{isRelated:o.includes(l.uid)}));case 12:r();case 13:case"end":return e.stop()}}),e)}))),t.handleItemClick=function(e){var a=e.currentTarget.dataset.id;t.setState((function(e){var t=e.selectedRelatedResourceIds;return{selectedRelatedResourceIds:t.includes(a)?t.filter((function(e){return e!==a})):[].concat((0,u.default)(t),[a])}}))},t.state={enableConfirm:!1,selectedRelatedResourceIds:[],relatedResources:[],timer:3},t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.visible&&(this.fetchRelatedResources(this.props.resource),this.startTimer())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"startTimer",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.setState((function(e){var t=e.timer;return{timer:Math.max(t-1,0),enableConfirm:t<=1}}),(function(){e.state.enableConfirm&&e.timer&&clearInterval(e.timer)}))}),1e3)}},{key:"fetchRelatedResources",value:(a=(0,i.default)(c.default.mark((function e(t){var a;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0}),a=[],(0,b.default)(t)?a=t.filter((function(e){return(0,g.default)(e,"status.operationState.syncResult.resources")})):(0,g.default)(t,"status.operationState.syncResult.resources")&&a.push(t),this.setState({relatedResources:a,isLoading:!1});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.isLoading,n=a.relatedResources,l=void 0===n?[]:n,o=a.selectedRelatedResourceIds;return!1===r&&(0,S.default)(l)?h.default.createElement(T.default,{icon:"appcenter",className:R.default.empty,title:t("NO_RELATED_RESOURCE_FOUND"),desc:t("NO_CONTINUOUS_DEPLOYMENT_RELATED_RESOURCE_DESC")}):h.default.createElement("div",{className:R.default.resources},l.map((function(a){return h.default.createElement("div",{key:a.uid,"data-id":a.uid,className:(0,y.default)(R.default.resource,(0,s.default)({},R.default.selected,o.includes(a.uid))),onClick:e.handleItemClick},h.default.createElement(_.Checkbox,{checked:o.includes(a.uid),onClick:e.stopPropagation}),h.default.createElement("span",{className:R.default.resourceName},t("DELETE_CONTINUOUS_DEPLOYMENT_RELATE_DESC",{resourceName:(0,O.getDisplayName)(a)})))})))}},{key:"render",value:function(){var e=this.state,a=e.enableConfirm,r=e.timer,n=this.props,u=n.resource,c=(n.onOk,n.onCancel),s=n.isSubmitting,i=(0,o.default)(n,["resource","onOk","onCancel","isSubmitting"]),f=(0,b.default)(u)&&1!==u.length?t("DELETE_MULTIPLE_CONTINUOUS_DEPLOYMENT"):t("DELETE_CONTINUOUS_DEPLOYMENT"),d=(0,b.default)(u)&&1!==u.length?t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_PL",{resource:u.map((function(e){return e.name})).join(", ")}):(0,b.default)(u)?t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_SI",{resource:u.map((function(e){return e.name})).join(", ")}):t.html("DELETE_CONTINUOUS_DEPLOYMENT_DESC_SI",{resource:u.name});return h.default.createElement(C.default,(0,l.default)({width:520,icon:"question",title:f,description:d,closable:!1,headerClassName:R.default.modalHeader,bodyClassName:R.default.modalBody,hideFooter:!0},i),h.default.createElement("div",{className:R.default.body},this.renderContent()),h.default.createElement("div",{className:R.default.footer},h.default.createElement(_.Button,{onClick:c},t("CANCEL")),h.default.createElement(_.Button,{type:"danger",loading:s,disabled:!a||s,onClick:this.handleOk},t("OK"),!a&&"(".concat(r,"s)"))))}}]),n}(h.default.Component);a.default=I,I.propTypes={resource:E.default.any,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},I.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalHeader:"_2lUQSyRfiU4YeUhpf3zy-S",modalBody:"lqJikp16zKqK2K6UdEZRC",body:"_3fuZLbetwSCcB4MdawzMUz",resources:"_3fvP-ruxRguMGNneJS2MpF",resource:"_2CjGmdFLkb6HwhcdVWr2SY",selected:"ZkJD8LpYhq9rBgigtk_Gk",resourceName:"Z6J-Axt0vkY2P2lsm_aeD",resourceType:"_36zKd2MIRxtDYumA5aAV3C",footer:"TnEEvRuFYrOxJJQybpWrJ",empty:"_32qukyLlop_kvPys-weyK_"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(87),r(16),r(9),r(13),r(10),r(24),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58));r(12),r(249),r(45),r(5),r(11),r(6),r(28),r(87),r(191),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(24),r(64),r(7);var s=n(r(198)),i=n(r(26)),f=n(r(74)),d=n(r(242)),p=n(r(135)),m=n(r(189)),v=n(r(199)),h=n(r(240)),E=n(r(787)),y=n(r(2709)),g=r(1630),b=r(1343),S=n(r(1052)),_=r(52),O=n(r(2751)),C=n(r(2755)),T=n(r(2757)),R=r(440),D=r(894);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var a=e.value;if("string"!=typeof a){var r=new Error("insertCommentToClusterConfigGlobalImageRegistry: value must be a string");return console.error(r),""}return a.replace("imageRegistry: registry.cn-beijing.aliyuncs.com","# ".concat(t("CLUSTER_CONFIG_IMAGE_REGISTRY_TIP"),"\n  ").concat("imageRegistry: registry.cn-beijing.aliyuncs.com"))}var P={"cluster.add":{on:function(e){var a=e.store,r=e.module,n=e.success,s=(0,c.default)(e,["store","module","success"]);a.kubekey=new S.default;var d,m,_=(d=I({value:(0,D.getValue)(b.DEFAULT_CLUSTER_CONFIG)}),(0,v.default)({},b.IMPORT_CLUSTER_SPEC,{spec:{config:d}})),O=(0,p.default)(_),C=E.default.open(k({onOk:(m=(0,o.default)(l.default.mark((function e(r){var o,c,s,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(o=(0,i.default)(r,'metadata.annotations["kubesphere.io/way-to-add"]'),c=(0,i.default)(r,"metadata.name"),s=(0,i.default)(r,"tags",[]).reduce((function(e,t){return k(k({},e),{},(0,u.default)({},"label.cluster.kubesphere.io/".concat(t.name),""))}),{}),d=(0,i.default)(r,"metadata.labels",{}),(0,f.default)(r,"metadata.labels",k(k(k({},d),s),{},{"kubesphere.io/managed":"true"})),delete r.tags,"new"!==o){e.next=13;break}return e.next=11,w(a.kubekey,r);case 11:e.next=15;break;case 13:return e.next=15,A(a,r);case 15:E.default.close(C),h.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n("/clusters/".concat(c,"/overview"));case 18:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),module:r,formTemplate:O,title:t("ADD_CLUSTER"),steps:g.IMPORT_CLUSTER,modal:y.default,store:a},s))}},"cluster.unbind":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),i=E.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return e.next=3,M(r,n);case 3:r.delete(n).then((function(){E.default.close(i),h.default.success({content:t("REMOVE_SUCCESS")}),u&&u()}));case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:O.default,detail:n,title:t("REMOVE_CLUSTER"),resource:n.name,deleteCluster:!0},s))}},"cluster.updateKubeConfig":{on:function(e){var a,r=e.store,n=e.detail,u=(e.cluster,e.success),s=(0,c.default)(e,["store","detail","cluster","success"]),i=E.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,p.default)(a),(0,f.default)(o,"kubeconfig",(0,R.safeBtoa)(o.kubeconfig)),e.next=4,r.updateKubeConfig({cluster:n.name,data:o});case 4:E.default.close(i),h.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,title:t("UPDATE_KUBECONFIG"),formTemplate:{kubeconfig:{}},modal:C.default},s))}},"cluster.viewKubeConfig":{on:function(e){var a=e.store,r=e.detail,n=(e.cluster,e.success,(0,c.default)(e,["store","detail","cluster","success"])),l=E.default.open(k({onOk:function(){return E.default.close(l)},store:a,detail:r,title:t("VIEW_KUBECONFIG"),formTemplate:{kubeconfig:{}},modal:C.default,readOnly:!0},n))}},"cluster.editConfig":{on:function(e){var a,r=e.store,n=e.detail,u=(e.cluster,e.success),d=(0,c.default)(e,["store","detail","cluster","success"]),m=(0,R.safeAtob)((0,i.default)(n._originData,"spec.config","")),y=(0,D.getValueObj)(m),g=(0,s.default)(y,"global.imageRegistry"),S={spec:{config:function(){if(g)return m;var e=(0,v.default)({},b.DEFAULT_CLUSTER_CONFIG,y);return I({value:(0,D.getValue)(e)})}()}},_=E.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,p.default)(a),(0,f.default)(o,"spec.config",(0,R.safeBtoa)(o.spec.config)),e.next=4,r.patch(n,o);case 4:E.default.close(_),h.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,title:t("EDIT_CONFIG"),formTemplate:S,modal:T.default},d))}},"edge.cluster.add":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,s,d,v,S;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.module,u=e.success,s=(0,c.default)(e,["store","module","success"]),d=(0,p.default)(b.CREATE_EDGE_CLUSTER_SPEC),a.next=4,r.fetchKubeEdgeIp();case 4:v=a.sent,(0,f.default)(d,"spec.advertiseAddress",v),S=E.default.open(k({onOk:function(){var e=(0,o.default)(l.default.mark((function e(a){var n,o,c,s,d,v;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(n=(0,p.default)(a),o=(0,i.default)(n,"metadata.name"),c=(0,i.default)(n,"spec.type"),s=(0,i.default)(n,"spec.hostCluster"),"manual"!==c){e.next=19;break}return d=(0,p.default)(b.CREATE_EDGE_CLUSTER_SPEC),v=(0,R.safeBtoa)((0,i.default)(n,"spec.kubeconfig")),(0,f.default)(d,"metadata.name",o),(0,f.default)(d,'metadata.annotations["kubesphere.io/creator"]',globals.user.username),(0,f.default)(d,"spec.namespace",o),(0,f.default)(d,"spec.hostCluster",s),(0,f.default)(d,"spec.type",c),(0,f.default)(d,"spec.kubeConfig",v),e.next=17,r.createWithKubeConfig(d,{name:o});case 17:e.next=24;break;case 19:if("auto"!==c){e.next=24;break}if(s){e.next=22;break}return e.abrupt("return",h.default.error({content:t("HOSTED_IN_DESC")}));case 22:return e.next=24,r.create((0,m.default)(n,"spec.kubeConfig"),{name:o});case 24:E.default.close(S),h.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u("/v2/edgewize");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),module:n,formTemplate:d,title:t("ADD_CLUSTER"),steps:g.IMPORT_EDGEWIZE_CLUSTER,modal:y.default,isEdgeWize:!0,store:r},s));case 7:case"end":return a.stop()}}),a)})))()}}};a.default=P;var A=function(){var e=(0,o.default)(l.default.mark((function e(t,a){var r,n,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,p.default)(a),(0,i.default)(r,"spec.config")&&(n=(0,i.default)(r,"spec.config",""),(0,f.default)(r,"spec.config",(0,R.safeBtoa)(n))),"proxy"!==(0,i.default)(r,"spec.connection.type")){e.next=6;break}(0,d.default)(r,"spec.connection.kubeconfig"),e.next=10;break;case 6:return o=(0,i.default)(r,"spec.connection.kubeconfig",""),(0,f.default)(r,"spec.connection.kubeconfig",(0,R.safeBtoa)(o)),e.next=10,t.validate(r);case 10:return e.next=12,t.create(r);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e,t){var a=(0,i.default)(t,"spec.registry.privateRegistry","");a&&(a="".concat(a,"/").replace(/\/\/$/,"/"));var r=(0,_.safeParseJSON)(JSON.stringify(t).replace(/\$\{spec\.registry\.privateRegistry\}/g,a),{});return e.create(r)};function M(e,t){var a={};return(0,f.default)(a,'metadata.annotations["notification.kubesphere.io/cleanup"]',"true"),e.patch(t,a)}},function(e,a,r){"use strict";r(15);var n=r(20);r(73),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(160),r(73),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(88)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(26)),d=n(r(135)),p=n(r(194)),m=n(r(74)),v=n(r(0)),h=n(r(1)),E=r(186),y=n(r(787)),g=n(r(850)),b=r(72),S=n(r(2710)),_=n(r(2712)),O=n(r(2714));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=function(e){(0,c.default)(r,e);var a=C(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).setSteps=function(e){t.setState({steps:e})},t.setCurrentStep=function(e){t.setState({currentStep:e})},t.setFormData=function(e){t.setState({formTemplate:e})},t.handleOk=function(){var e;if(t.state.isCodeMode&&(0,p.default)((0,f.default)((0,o.default)(t),"codeRef.current.getData")))e=t.codeRef.current.getData();else{e=t.state.formTemplate;var a=Array.isArray(e.tags)&&e.tags.map((function(e){return e.name})).join(",");a&&(0,m.default)(e,["metadata","annotations","cluster.kubesphere.io/label-ids"],a)}t.props.onOk(e)},t.handlePrev=function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},t.handleNext=function(){var e=t.formRef.current,a=t.state.steps;e&&e.validate((function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.min(a.length-1,t+1)}}))}))},t.handleModeChange=function(){t.setState((function(e){var a=e.isCodeMode,r=e.formTemplate;return a&&(0,p.default)((0,f.default)((0,o.default)(t),"codeRef.current.getData"))&&(r=t.codeRef.current.getData()),{isCodeMode:!a,formTemplate:r}}))},t.state={currentStep:0,steps:e.steps,formTemplate:(0,d.default)(e.formTemplate)},t.formRef=v.default.createRef(),t.codeRef=v.default.createRef(),t}return(0,u.default)(r,[{key:"getChildContext",value:function(){return{setSteps:this.setSteps,setCurrentStep:this.setCurrentStep,setFormData:this.setFormData}}}]),(0,u.default)(r,[{key:"renderForm",value:function(){var e=this.props,t=e.store,a=e.tagsStore,r=e.onAddTags,n=e.hostedInOptions,l=this.state,o=l.formTemplate,u=l.steps[l.currentStep].component,c={hostedInOptions:n,store:t,formTemplate:o,formRef:this.formRef,tagsStore:a,onAddTags:r};return v.default.createElement("div",{className:O.default.wrapper},v.default.createElement("div",{className:O.default.form},v.default.createElement(u,c)))}},{key:"renderCode",value:function(){var e=this.state.formTemplate;return v.default.createElement(_.default,{ref:this.codeRef,formTemplate:e})}},{key:"renderHeader",value:function(){var e=this.props,a=e.module,r=e.title,n=e.onCancel,l=e.isEdgeWize,o=this.state,u=o.steps,c=o.currentStep,s=o.isCodeMode;return v.default.createElement("div",{className:O.default.header},v.default.createElement("div",{className:O.default.title},v.default.createElement(E.Icon,{name:"close",size:20,clickable:!0,onClick:n}),v.default.createElement("span",null),v.default.createElement(E.Icon,{name:l?"edge-cluster":b.ICON_TYPES[a],size:20}),v.default.createElement("span",null,r)),!s&&v.default.createElement("div",{className:O.default.steps},v.default.createElement("div",null),v.default.createElement(S.default,{steps:u,current:c})),v.default.createElement(g.default,{className:O.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:s}),v.default.createElement("div",{className:O.default.headerBottom}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.onCancel,r=e.isSubmitting,n=this.state,l=n.steps,o=n.currentStep;if(n.isCodeMode)return v.default.createElement("div",{className:O.default.footer},v.default.createElement("div",{className:O.default.wrapper},v.default.createElement("div",{className:"text-right"},v.default.createElement(E.Button,{onClick:a},t("CANCEL")),v.default.createElement(E.Button,{type:"control",onClick:this.handleOk,loading:r},t("CREATE")))));var u=l.length-1;return v.default.createElement("div",{className:O.default.footer},v.default.createElement("div",{className:O.default.wrapper},v.default.createElement("div",{className:"text-right"},v.default.createElement(E.Button,{onClick:a},t("CANCEL")),o>0&&v.default.createElement(E.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),o<u?v.default.createElement(E.Button,{type:"control",onClick:this.handleNext},t("NEXT")):v.default.createElement(E.Button,{type:"control",onClick:this.handleOk,loading:r},t("CREATE")))))}},{key:"render",value:function(){var e=this.props.visible,t=this.state.isCodeMode;return v.default.createElement(y.default,{className:O.default.modal,bodyClassName:O.default.body,visible:e,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),v.default.createElement("div",{className:O.default.content},t?this.renderCode():this.renderForm()),this.renderFooter())}}]),r}(v.default.Component);a.default=T,T.propTypes={formTemplate:h.default.object,steps:h.default.array,visible:h.default.bool,onOk:h.default.func,onCancel:h.default.func},T.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},T.childContextTypes={setSteps:h.default.func,setCurrentStep:h.default.func,setFormData:h.default.func}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(11),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(18),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(63)),m=l(r(2711));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.current;return(0,p.default)(this.formattedStep)?f.default.createElement(f.default.Fragment,null):f.default.createElement("div",{className:m.default.wrapper},this.formattedStep.map((function(a,r){return f.default.createElement("div",{key:a.title},e>=r?f.default.createElement(d.Icon,{name:"success",type:"coloured",size:12}):f.default.createElement(d.Icon,{name:"dot",type:"light",size:12}),f.default.createElement("span",null,t(a.title)))})))}},{key:"formattedStep",get:function(){return this.props.steps.filter((function(e){return!!e.title}))}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={wrapper:"VcopeKzgXdwSpnCTVNt0h"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(135)),p=r(186),m=n(r(884)),v=n(r(2713));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).data=(0,d.default)(e.formTemplate),t.editor=i.default.createRef(),t}return(0,o.default)(r,[{key:"getData",value:function(){return this.editor.current.getData()}},{key:"render",value:function(){return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement("div",{className:v.default.step},i.default.createElement("div",null,t("EDIT_YAML")),i.default.createElement("p",null,t("CREATE_BY_YAML_DESC"))),i.default.createElement("div",{className:v.default.codeWrapper},i.default.createElement("div",{className:v.default.pane},i.default.createElement("div",{className:v.default.title},i.default.createElement(p.Icon,{name:"coding",size:20}),i.default.createElement("span",null,t("EDIT_YAML"))),i.default.createElement(m.default,{ref:this.editor,className:v.default.editor,value:this.data}))))}}]),r}(i.default.Component);a.default=E,E.propTypes={formTemplate:f.default.object,onOk:f.default.func,isSubmitting:f.default.bool},E.defaultProps={onOk:function(){},isSubmitting:!1}},function(e,t,a){e.exports={wrapper:"_2bLRs43o7z2Z0l0OqV3S3l",step:"_3ABigQDpD_68K0K2-zPwo1",codeWrapper:"_35rMFFtZtEQsJ1XnlGrRIT",pane:"_1IXTMNwey-PU6zqsfimMcO",editor:"_2-LDXYPFV_Swq3SZk8_dTY",title:"_8xagm1IYbXzrlonLdlZLT"}},function(e,t,a){e.exports={modal:"_3udZ9JU41jkQT15SM6VQqy",body:"_3zIqgTb5iRnwYJult2OSjW",wrapper:"_1GY1dBmycuTqs5z5O4U5i1",steps:"_1j6BiFUqlNymOz_lSW28U7",header:"_1y3eAJkaBREv2CFp4dIBeY",headerBottom:"_3srgYWH6bHux51Zn3xQeOG",title:"_3sSfECiQrD_nXjhQGwbY6d",content:"_3_hijI-MOd78wmqLgMzBbx",footer:"_1nQdSbl4yf_TN2MYcxvNhu"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(135)),p=n(r(74)),m=r(186),v=r(1630),h=n(r(1180)),E=r(1343),y=n(r(2717));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=g(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).STEPS={new:v.NEW_CLUSTER,import:v.IMPORT_CLUSTER},e.SPECS={new:E.NEW_CLUSTER_SPEC,import:E.IMPORT_CLUSTER_SPEC},e.handleChange=function(t){e.context.setSteps(e.STEPS[t]);var a=(0,d.default)(e.SPECS[t]);(0,p.default)(a,"metadata.annotations['kubesphere.io/way-to-add']",t),e.context.setFormData(a)},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.props.store.kubekey.fetchParameters()}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",{className:y.default.wrapper},i.default.createElement(h.default,{title:t("SELECT_ADD_CLUSTER_METHOD"),description:t("SELECT_ADD_CLUSTER_METHOD_DESC")}),i.default.createElement(m.Form,{data:r,ref:a},i.default.createElement(m.Form.Item,{className:y.default.cards},i.default.createElement(m.RadioGroup,{name:"metadata.annotations['kubesphere.io/way-to-add']",onChange:this.handleChange,defaultValue:"new"},i.default.createElement(m.Radio,{value:"new"},i.default.createElement(m.Icon,{name:"kubernetes",size:48}),i.default.createElement("span",null,t("NEW_CLUSTER"))),i.default.createElement(m.Radio,{value:"import"},i.default.createElement(m.Icon,{name:"hammer",size:48}),i.default.createElement("span",null,t("IMPORT_CLUSTER")))))))}}]),r}(i.default.Component);a.default=b,b.contextTypes={setSteps:f.default.func,setFormData:f.default.func}},function(e,t,a){e.exports={text:"_3y0BRfqtNHZn6ztqSjBlZv"}},function(e,t,a){e.exports={wrapper:"_2rN8KkaFhFv7O2Ix_c84Ib",cards:"cBamJ--YMZwFF5HHxaU-E"}},function(e,a,r){"use strict";r(15);var n=r(20);r(73),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(73),r(28),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=n(r(26)),p=n(r(74)),m=r(239),v=n(r(0)),h=r(72),E=r(924),y=n(r(2719)),g=n(r(2721)),b=n(r(2723));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=S(r);function r(e){var n;(0,o.default)(this,r),(n=a.call(this,e)).groupOptionRenderer=function(e){return v.default.createElement(v.default.Fragment,null,v.default.createElement(f.Tag,{type:h.CLUSTER_GROUP_TAG_TYPE[e.value]},t("ENV_".concat(e.label.toUpperCase()))),"  ",e.label)},n.toggleAdvanced=function(){n.setState((function(e){return{toggleAdvanced:!e.toggleAdvanced}}))},n.providerOptionRenderer=function(e){return v.default.createElement(v.default.Fragment,null,v.default.createElement(f.Icon,{className:"margin-r8",name:e.icon,type:"light",size:20}),e.label)},n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.nodesValidator=function(e,a,r){if(!a)return r();var l=(0,d.default)(n.props.formTemplate,"spec.roleGroups.master.length",0),o=(0,d.default)(n.props.formTemplate,"spec.roleGroups.worker.length",0),u=[];if(1!==l&&3!==l&&u.push(t("MASTER_NODE_COUNT_TIP")),0===o&&u.push(t("WORKER_NODE_COUNT_TIP")),u.length>0)return r({message:u.join("; "),field:e.field});r()},n.handleTags=function(e){n.setState({tagsValue:e}),(0,p.default)(n.props.formTemplate,"tags",e)};var l=(0,d.default)(n.props.formTemplate,"tags",[]);return n.state={toggleAdvanced:!1,tagsValue:l},n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.tagsStore.tagsGroup,l=void 0===n?{}:n,o=e.onAddTags,u=this.method;return v.default.createElement("div",{className:b.default.wrapper},v.default.createElement(f.Form,{data:r,ref:a},v.default.createElement(f.Form.Item,{label:t("CLUSTER_NAME"),desc:t("NAME_DESC_LENGTH",{length:60}),rules:[{required:!0,message:t("CLUSTER_NAME_EMPTY")},{pattern:h.PATTERN_NAME,message:t("INVALID_NAME_DESC_LENGTH",{length:60})},{validator:this.nameValidator}]},v.default.createElement(f.Input,{name:"metadata.name",maxLength:60})),v.default.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:h.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},v.default.createElement(f.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),v.default.createElement(f.Form.Item,{label:v.default.createElement("div",{className:b.default.iconTooltip},v.default.createElement("span",null,t("CLUSTER_TAG")),v.default.createElement(f.Tooltip,{content:t("CLUSTER_TAG_TOOLTIP_CONTENT")},v.default.createElement(f.Icon,{name:"question",size:16})))},v.default.createElement("div",{className:b.default.clusterTags},v.default.createElement(E.ClusterTagAdd,{tagsGroup:l,defaultValue:[],value:this.state.tagsValue,name:"tags",onAddTags:o,onChange:this.handleTags}))),v.default.createElement(f.Form.Item,{label:t("PROVIDER"),desc:t("CLUSTER_PROVIDER_DESC")},v.default.createElement(f.Select,{name:"spec.provider",options:h.CLUSTER_PROVIDERS,placeholder:" ",optionRenderer:this.providerOptionRenderer,searchable:!0})),v.default.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(f.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})),"new"===u&&v.default.createElement(v.default.Fragment,null,v.default.createElement(g.default,{className:b.default.nodesTitle,title:t("NODE_SETTINGS"),description:t("CLUSTER_NODE_SETTINGS_DESC")}),v.default.createElement(f.Form.Item,{rules:[{required:!0,message:t("PLEASE_ADD_AT_LEAST_ONE_CLUSTER_NODE")},{validator:this.nodesValidator}]},v.default.createElement(y.default,{name:"spec.hosts",formTemplate:r}))),v.default.createElement("div",{className:b.default.advanced,onClick:this.toggleAdvanced},v.default.createElement("span",null,t("ADVANCED_SETTINGS")),v.default.createElement(f.Icon,{name:this.state.showAdvanced?"chevron-up":"chevron-down",size:"20"})),this.state.toggleAdvanced&&v.default.createElement(f.Form.Item,{label:v.default.createElement("div",{className:b.default.iconTooltip},v.default.createElement("span",null,t("CLUSTER_LABEL")),v.default.createElement(f.Tooltip,{content:t("CLUSTER_LABEL_TOOLTIP_CONTENT")},v.default.createElement(f.Icon,{name:"question",size:16}))),desc:t("CLUSTER_LABEL_DESC")},v.default.createElement(f.Select,{name:"metadata.labels['cluster.kubesphere.io/group']",options:h.CLUSTER_PRESET_GROUPS,placeholder:" ",optionRenderer:this.groupOptionRenderer,searchable:!0}))))}},{key:"method",get:function(){return(0,d.default)(this.props.formTemplate,"metadata.annotations['kubesphere.io/way-to-add']")}}]),r}(v.default.Component))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(6),r(18),r(16),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(74)),p=n(r(26)),m=n(r(3)),v=n(r(1)),h=n(r(812)),E=n(r(2720)),y=n(r(1631)),g=n(r(1632));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).state={showAdd:!1,selectIndex:-1},e.showAdd=function(){e.setState({showAdd:!0,selectIndex:-1})},e.hideAdd=function(){e.setState({showAdd:!1,selectIndex:-1})},e.showEdit=function(t){e.setState({showAdd:!0,selectIndex:t})},e.handleAdd=function(t){var a=e.props,r=a.value,n=a.onChange,o=e.state.selectIndex;o>=0?(r[o]=t,n(r)):n([].concat((0,l.default)(r),[t])),e.updateRoleGroups(),e.hideAdd()},e.updateRoleGroups=function(){var t=e.props.formTemplate,a=(0,p.default)(t,"spec.hosts",[]),r={};a.forEach((function(e){e.roles&&e.roles.forEach((function(t){r[t]=r[t]||[],r[t].push(e.name)}))})),r.etcd=r.master,(0,d.default)(t,"spec.roleGroups",r)},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)(r.filter((function(e){return e.name!==t.name}))),e.updateRoleGroups()},e}return(0,u.default)(r,[{key:"renderNodes",value:function(){var e=this;return this.props.value.map((function(t,a){return f.default.createElement(E.default,{node:t,key:t.name,index:a,onEdit:e.showEdit,onDelete:e.handleDelete})}))}},{key:"renderAdd",value:function(){return f.default.createElement(h.default.Add,{icon:"add",title:t("ADD_NODE"),description:t("ADD_NODE_TO_THE_CLUSTER"),onClick:this.showAdd})}},{key:"renderModal",value:function(){var e=this.props.value,t=this.state,a=t.showAdd,r=t.selectIndex,n=r>=0?e[r]:void 0;return f.default.createElement(y.default,{visible:a,data:n,onOk:this.handleAdd,onCancel:this.hideAdd})}},{key:"render",value:function(){var e=this.props.className;return f.default.createElement("div",{className:(0,m.default)(g.default.wrapper,e)},this.renderNodes(),this.renderAdd(),this.renderModal())}}]),r}(f.default.Component);a.default=S,S.propTypes={className:v.default.string,name:v.default.string,value:v.default.array,onChange:v.default.func,onDelete:v.default.func},S.defaultProps={className:"",name:"",value:[],readOnlyList:[],specTemplate:{},onChange:function(){}}},function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(16),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(18),a(16);var n=r(a(0)),l=r(a(1)),o=a(186),u=a(72),c=r(a(812)),s=function(e){var t=e.index,a=e.node,r=e.onDelete,l=e.onEdit,s=n.default.createElement("span",null,a.name,a.roles.map((function(e){return n.default.createElement(o.Tag,{key:e,className:"margin-l8",type:u.NODE_ROLE_TAG_TYPE[e]},e)})));return n.default.createElement(c.default.Item,{icon:"nodes",title:s,description:a.address,onDelete:function(){return r(a)},onEdit:function(){return l(t)}})};s.propTypes={node:l.default.object};var i=s;t.default=i},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,a=e.title,r=e.description;return n.default.createElement("div",{className:(0,l.default)(o.default.text,t)},n.default.createElement("div",null,a),n.default.createElement("p",null,r))},a(12),a(109);var n=r(a(0)),l=r(a(3)),o=r(a(2722))},function(e,t,a){e.exports={text:"_516bLC4y2eCDP-7u4_h68"}},function(e,t,a){e.exports={wrapper:"_1NNvsOKzvpG4TQpNcfk82r",nodesTitle:"gzd5RQSNJkEmTlh20fpt_",advanced:"_1LUGkOuBopYLmtimgyc8x_",formItem:"_2rS4-K0J9tTDyDPpPETUdF",iconTooltip:"_3wK3EWmKuNT8yWLM2kriP0",clusterTags:"FgjbT7Pql9uy5yeH4XtVg"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(28),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(790)),p=n(r(884)),m=n(r(26)),v=n(r(2725));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleTypeChange=function(e){t.setState({connectType:e})},t.state={connectType:(0,m.default)(e.formTemplate,"spec.connection.type","direct")},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=this.state.connectType;return i.default.createElement("div",null,i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement(f.Form.Item,{label:t("CONNECTION_MODE"),desc:t("CLUSTER_CONNECT_MODE_DESC")},i.default.createElement(f.Select,{name:"spec.connection.type",options:this.types,onChange:this.handleTypeChange})),"direct"===n&&i.default.createElement("div",{className:v.default.tip},t.html("CLUSTER_DIRECT_IMPORT_TIP")),"direct"===n?i.default.createElement("div",{className:v.default.editorWrapper},i.default.createElement("div",{className:v.default.editor},i.default.createElement("div",{className:v.default.editorTitle},i.default.createElement("div",null,i.default.createElement(f.Icon,{name:"kubernetes",size:20}),t("INPUT_KUBECONFIG"))),i.default.createElement(f.Form.Item,{rules:[{required:!0,message:t("INPUT_KUBECONFIG")}],unControl:!0},i.default.createElement(p.default,{mode:"yaml",name:"spec.connection.kubeconfig",options:this.editOptions})))):i.default.createElement("div",{className:v.default.tip},i.default.createElement(d.default,{title:t("CLUSTER_AGENT_TITLE"),description:t("CLUSTER_AGENT_DESC")}),i.default.createElement("div",{className:"margin-t12"},t.html("CLUSTER_AGENT_IMPORT_TIP")))))}},{key:"types",get:function(){var e=[{label:t("CONNTECT_DIRECT"),value:"direct"}];return globals.app.hasKSModule("tower")&&globals.app.isLicenseAuthorized("tower")&&e.push({label:t("CONNTECT_PROXY"),value:"proxy"}),e}},{key:"editOptions",get:function(){return{width:"100%",height:"100%"}}}]),r}(i.default.Component);a.default=E},function(e,t,a){e.exports={editorWrapper:"_1937BjcVyseLv9DIexIJWG",editor:"_3dm-s3IiWMzYT7kJAfs0sb",editorTitle:"_2xtWVxrXO_EaM9xO19pjBb",tip:"_3wGjRllnO483bHBWlTPvVH",link:"_2oSgKyuIsZA8PujoTg5SLU",banLink:"D8eXHyIVagn58_MMkRq5E"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(884)),p=n(r(2727));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",null,i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement("div",{className:p.default.editorWrapper},i.default.createElement("div",{className:p.default.editor},i.default.createElement(f.Form.Item,{label:t("CLUSTER_CONFIG"),unControl:!0},i.default.createElement(d.default,{mode:"yaml",name:"spec.config",options:this.editOptions}))))))}},{key:"editOptions",get:function(){return{width:"100%",height:"100%"}}}]),r}(i.default.Component);a.default=v},function(e,t,a){e.exports={editorWrapper:"Ma3yI7kh9cSs7I4H_Ksf5",editor:"_3HXgHZRwxXwP-AAfLOMo9v"}},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(31),r(6),r(18),r(16),r(9),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(31),r(6),r(18),r(42),r(16),r(9),r(4),r(23),r(57),r(17),r(7);var l,o,u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(49)),p=n(r(0)),m=n(r(26)),v=n(r(242)),h=n(r(74)),E=n(r(63)),y=r(14),g=r(239),b=r(186),S=n(r(816)),_=r(1343),O=n(r(2729)),C=n(r(1180)),T=n(r(2730)),R=n(r(2732)),D=n(r(2735));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var k=(0,g.observer)((o=function(e){(0,s.default)(r,e);var a=N(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleNetworkPluginChange=function(e){var a=t.networkPlugins.find((function(t){return t.value===e})),r=t.state.networkParams;t.setState({networkParams:(0,m.default)(a,"params",[])},(function(){var e=t.state.networkParams,a=t.props.formTemplate;r.forEach((function(e){(0,v.default)(a,"spec.network.".concat(e.name))})),e.forEach((function(e){"default"in e&&(0,h.default)(a,"spec.network.".concat(e.name),e.default)}))}))},t.handleStoragePluginChange=function(e){var a=t.storagePlugins.find((function(t){return t.value===e}));a&&(a.template=a.template||{},(0,h.default)(t.props.formTemplate,"spec.addons[0]",(0,y.toJS)(a.template)),t.setState({storageParams:(0,m.default)(a,"params",[])}))};var n=(0,m.default)(e.formTemplate,"spec.network.plugin"),l=t.networkPlugins.find((function(e){return e.value===n})),o=(0,m.default)(e.formTemplate,"spec.storagePlugin")||(0,m.default)(t.storagePlugins,"[0].value");(0,h.default)(e.formTemplate,"spec.storagePlugin",o);var c=t.storagePlugins.find((function(e){return e.value===o}));return c&&c.template&&(0,E.default)((0,m.default)(e.formTemplate,"spec.addons[0]"))&&(0,h.default)(e.formTemplate,"spec.addons[0]",(0,y.toJS)(c.template)),t.state={networkParams:(0,m.default)(l,"params",[]),storageParams:(0,m.default)(c,"params",[])},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=this.state,l=n.networkParams,o=n.storageParams;return p.default.createElement("div",{className:O.default.wrapper},p.default.createElement(C.default,{title:t("CLUSTER_SETTINGS"),description:t("K8S_CLUSTER_SETTINGS_DESC")}),p.default.createElement(b.Form,{className:O.default.form,data:r,ref:a},p.default.createElement(b.Form.Item,{label:t("KUBERNETES_VERSION")},p.default.createElement(S.default,{name:"spec.kubernetes.version",options:this.versions,defaultValue:(0,m.default)(this.versions,"0.value")})),p.default.createElement(b.Form.Item,null,p.default.createElement(T.default,{name:"spec.kubernetes"})),p.default.createElement(b.Form.Item,{label:t("NETWORK_PLUGIN")},p.default.createElement(S.default,{name:"spec.network.plugin",options:this.networkPlugins,onChange:this.handleNetworkPluginChange})),p.default.createElement(b.Form.Item,null,p.default.createElement(R.default,{name:"spec.network",params:l})),p.default.createElement(b.Form.Item,{label:t("DEFAULT_STORAGE_PLUGIN")},p.default.createElement(S.default,{name:"spec.storagePlugin",options:this.storagePlugins,onChange:this.handleStoragePluginChange})),p.default.createElement(b.Form.Item,null,p.default.createElement(D.default,{name:"spec.addons[0]",params:o}))))}},{key:"versions",get:function(){return(0,y.toJS)((0,m.default)(this.props.store.kubekey,"parameters.kubernetes.supportedVersions",[])).map((function(e){return{icon:"kubernetes",label:e,value:e,description:"-"}}))}},{key:"networkPlugins",get:function(){return(0,m.default)(this.props.store.kubekey,"parameters.kubernetes.supportedCNIs",[]).map((function(e){return{label:e.title,value:e.name,icon:_.NETWORK_PLUGIN_ICONS[e.name]||"network",description:t(e.description),params:e.parameters}}))}},{key:"storagePlugins",get:function(){return(0,m.default)(this.props.store.kubekey,"parameters.storagePlugins",[]).map((function(e){return{label:e.title,value:e.name,icon:_.STORAGE_PLUGIN_ICONS[e.name]||"network",description:t(e.description),params:e.parameters,template:e.template}}))}}]),r}(p.default.Component),(0,d.default)(o.prototype,"versions",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"versions"),o.prototype),(0,d.default)(o.prototype,"networkPlugins",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"networkPlugins"),o.prototype),(0,d.default)(o.prototype,"storagePlugins",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"storagePlugins"),o.prototype),l=o))||l;a.default=k},function(e,t,a){e.exports={wrapper:"_3IrA5oEEz7IbkJINUqCtMY",form:"_1ZT8fGgQwTzYmasVKaVuvJ"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=r(186),m=l(r(787)),v=l(r(799)),h=l(r(2731));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props.value;return d.default.createElement("div",{className:h.default.preview},d.default.createElement("div",{className:h.default.item},d.default.createElement("span",null,t("MAX_PODS"),": "),d.default.createElement("span",null,e.maxPods)),d.default.createElement("a",{className:h.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props.value;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:e,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},d.default.createElement(p.Form.Item,{label:t("MAX_PODS"),desc:t("CLUSTER_MAX_PODS_DESC")},d.default.createElement(v.default,{name:"maxPods",integer:!0,min:0})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=b},function(e,t,a){e.exports={preview:"_2io9fuI3YWAWSQXIo4HGzq",item:"_2ZfdnOOx1JzSRKNQUCHkeX",edit:"OgJYXUwcqOpUM366Z3SCU"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=r(186),m=l(r(787)),v=l(r(1181)),h=l(r(2734));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props.value;return d.default.createElement("div",{className:h.default.preview},d.default.createElement("div",{className:h.default.item},d.default.createElement("span",null,t("PODS_CIDR"),": "),d.default.createElement("span",null,e.kubePodsCIDR)),d.default.createElement("div",{className:h.default.item},d.default.createElement("span",null,t("SERVICE_CIDR"),": "),d.default.createElement("span",null,e.kubeServiceCIDR)),d.default.createElement("a",{className:h.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props,a=e.value,r=e.params;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:a,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},d.default.createElement(p.Form.Item,{label:t("PODS_CIDR"),desc:t("KUBE_PODS_CIDR_DESC")},d.default.createElement(p.Input,{name:"kubePodsCIDR"})),d.default.createElement(p.Form.Item,{label:t("SERVICE_CIDR"),desc:t("KUBE_SERVICE_CIDR_DESC")},d.default.createElement(p.Input,{name:"kubeServiceCIDR"})),r.map((function(e){return d.default.createElement(p.Form.Item,{key:e.name,label:t(e.title),desc:t(e.description)},d.default.createElement(v.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=b},function(e,t,a){e.exports={number:"_371DmavUkXjNjoWxz0hT90"}},function(e,t,a){e.exports={preview:"_1Oz0MD6qwzMKlxKwC4ffgb",item:"IFtL5Z2j_2RlCORNbeI2F",edit:"_1MVWtuYX83YbF3ui7k6txo"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(6),r(18),r(87),r(16),r(98),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(18),r(28),r(87),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(96)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(26)),v=l(r(63)),h=l(r(74)),E=r(186),y=l(r(787)),g=r(52),b=l(r(1181)),S=l(r(2736));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1,value:e.getFormData()},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value,n=a.onChange,l=(0,g.flattenObject)(t);e.setState({value:l,visible:!1}),(0,h.default)(r,"sources.chart.values",Object.entries(l).map((function(e){var t=(0,u.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)}))),n(O({},r))},e}return(0,s.default)(r,[{key:"getFormData",value:function(){var e=this.props.value;return(0,m.default)(e,"sources.chart.values",[]).reduce((function(e,t){var a=t.split("="),r=(0,u.default)(a,2),n=r[0],l=r[1];return O(O({},e),{},(0,o.default)({},n,l))}),{})}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.setState({value:this.getFormData()})}},{key:"renderPreview",value:function(){var e=this.props.params,a=this.state.value;return(0,v.default)(e)?null:p.default.createElement("div",{className:S.default.preview},e.map((function(e){return p.default.createElement("div",{key:e.name,className:S.default.item},p.default.createElement("span",null,e.title,": "),p.default.createElement("span",null,a[e.name]))})),p.default.createElement("a",{className:S.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.state,a=e.value,r=e.visible,n=this.props.params;return p.default.createElement(y.default.Form,{title:t("EDIT"),data:a,onOk:this.handleEdit,onCancel:this.hideEdit,visible:r},n.map((function(e){return p.default.createElement(E.Form.Item,{key:e.name,label:t(e.title),desc:t(e.description)},p.default.createElement(b.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(p.Component);a.default=T},function(e,t,a){e.exports={preview:"_2dYP91XQ9UZJxGes9Vx2Re",item:"_32Vtin5HujaEC_E3VveI4X",edit:"ugChWgWQ-Mjt46Gq2sa3n"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=r(186),p=n(r(799)),m=n(r(2738)),v=n(r(1180)),h=n(r(2739));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.store,r=e.formRef,n=e.formTemplate;return i.default.createElement("div",{className:m.default.wrapper},i.default.createElement(v.default,{title:t("ADVANCED_SETTINGS"),description:t("CLUSTER_ADVANCED_SETTINGS_DESC")}),i.default.createElement(d.Form,{className:m.default.form,data:n,ref:r},i.default.createElement(d.Form.Group,{label:t("KUBESPHERE_SETTINGS"),desc:t("CLUSTER_KUBESPHERE_SETTINGS_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,null,i.default.createElement(h.default,{name:"spec.addons[1].sources.chart.values",components:(0,f.default)(a.kubekey,"parameters.kubesphere.components",[])}))),i.default.createElement(d.Form.Group,{label:t("PRIVATE_REGISTRY_CONFIGURATION"),desc:t("CLUSTER_PRIVATE_REGISTRY_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("PRIVATE_REGISTRY")},i.default.createElement(d.Input,{name:"spec.registry.privateRegistry"}))),i.default.createElement(d.Form.Group,{label:t("CLUSTER_CONTROLPLANE_ENDPOINT"),desc:t("CLUSTER_CONTROLPLANE_ENDPOINT_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("DOMAIN")},i.default.createElement(d.Input,{name:"spec.controlPlaneEndpoint.domain"})),i.default.createElement(d.Form.Item,{label:t("ADDRESS")},i.default.createElement(d.Input,{name:"spec.controlPlaneEndpoint.address"})),i.default.createElement(d.Form.Item,{label:t("PORT")},i.default.createElement(p.default,{name:"spec.controlPlaneEndpoint.port",integer:!0,min:0,max:65535}))),i.default.createElement(d.Form.Group,{label:t("ETCD_BACKUP"),desc:t("CLUSTER_ETCD_BACKUP_DESC"),checkable:!0,keepDataWhenUnCheck:!0},i.default.createElement(d.Form.Item,{label:t("ETCD_BACKUP_DIR"),desc:t("CLUSTER_ETCD_BACKUP_DIR_DESC")},i.default.createElement(d.Input,{name:"spec.kubernetes.etcdBackupDir"})),i.default.createElement(d.Form.Item,{label:t("ETCD_BACKUP_PERIOD"),desc:t("CLUSTER_ETCD_BACKUP_PERIOD_DESC")},i.default.createElement(p.default,{name:"spec.kubernetes.etcdBackupPeriod",integer:!0,min:0})),i.default.createElement(d.Form.Item,{label:t("KEEP_BACKUP_NUMBER"),desc:t("CLUSTER_ETCD_BACKUP_NUMBER_DESC")},i.default.createElement(p.default,{name:"spec.kubernetes.keepBackupNumber",integer:!0,min:0})))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"_1dLQJIy0pH98ZJwhjTVk2n",form:"_10yrEpdtuvtNMsl-9L3bAY"}},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(109),a(5),a(187),a(11),a(6),a(18),a(87),a(16),a(98),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(136),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(5),a(187),a(11),a(6),a(18),a(28),a(87),a(42),a(16),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var l=n(a(61)),o=n(a(96)),u=n(a(30)),c=n(a(36)),s=n(a(37)),i=n(a(55)),f=n(a(56)),d=n(a(51)),p=r(a(0)),m=n(a(1181));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var y=function(e){(0,i.default)(a,e);var t=E(a);function a(e){var r;(0,c.default)(this,a),(r=t.call(this,e)).handleInputChange=function(e,t){var a=r.props.onChange;r.setState((function(a){var r=a.value;return r[t]=e,h({},r)}),(function(){a(Object.entries(r.state.value).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})))}))};var n=e.components.filter((function(e){return e.parameters&&e.parameters.every((function(e){return"enabled"!==e.name}))})).reduce((function(e,t){return[].concat((0,l.default)(e),(0,l.default)(t.parameters.map((function(e){return h(h({},e),{},{name:"".concat(t.name,".").concat(e.name)})}))))}),[]),s=e.value.reduce((function(e,t){var a=t.split("="),r=(0,o.default)(a,2),n=r[0],l=r[1];return h(h({},e),{},(0,u.default)({},n,l))}),{});return r.state={params:n,value:s},r}return(0,s.default)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.params,r=t.value;return a.map((function(t){return p.default.createElement("div",{key:t.name,className:"form-item"},p.default.createElement("label",{className:"form-label",htmlFor:name},t.title),p.default.createElement("div",{className:"form-control"},p.default.createElement(m.default,{name:t.name,value:r[t.name],param:t,onChange:e.handleInputChange}),p.default.createElement("div",{className:"form-desc"},t.description)))}))}}]),a}(p.Component);t.default=y},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(16),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(28),r(42),r(16),r(4),r(23),r(57),r(17),r(7);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=n(r(74)),p=r(14),m=r(186),v=n(r(2741)),h=n(r(2746)),E=n(r(1180));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).init(),t}return(0,o.default)(r,[{key:"init",value:function(){var e=this.props.formTemplate,t=(0,p.toJS)((0,f.default)(this.props.store.kubekey,"parameters.kubesphere",{})),a=t.template,r=t.components,n=void 0===r?[]:r;(0,d.default)(e,"spec.addons[1]",a);var l=(0,f.default)(e,"spec.addons[1].sources.chart.values",[]);n.forEach((function(e){e.parameters&&e.parameters.forEach((function(t){"default"in t&&l.push("".concat(e.name,".").concat(t.name,"=").concat(t.default))}))})),(0,d.default)(e,"spec.addons[1].sources.chart.values",l)}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement(E.default,{title:t("SYSTEM_COMPONENT_PL"),description:t("CLUSTER_COMPONENTS_DESC")}),i.default.createElement(m.Form,{className:h.default.form,data:r,ref:a},i.default.createElement(m.Form.Item,null,i.default.createElement(v.default,{name:"spec.addons[1].sources.chart.values",components:(0,f.default)(this.props.store.kubekey,"parameters.kubesphere.components",[])}))))}}]),r}(i.default.Component);a.default=g},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var l=n(a(36)),o=n(a(37)),u=n(a(55)),c=n(a(56)),s=n(a(51)),i=r(a(0)),f=n(a(2742));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(a,e);var t=d(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.components,r=e.onChange;return i.default.createElement("div",null,a.map((function(e){return i.default.createElement(f.default,{data:e,key:e.name,value:t,onChange:r})})))}}]),a}(i.Component);t.default=p},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(18),r(87),r(97),r(16),r(10),r(4),r(23),r(24),r(17),r(64),r(136),r(75),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(18),r(87),r(97),r(42),r(16),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(75);var o=l(r(30)),u=l(r(96)),c=l(r(61)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=n(r(0)),v=l(r(3)),h=l(r(74)),E=l(r(247)),y=l(r(63)),g=l(r(790)),b=l(r(850)),S=r(72),_=l(r(2743)),O=l(r(2745));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var T=function(e){(0,f.default)(r,e);var a=C(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSwitch=function(t){var a,r=e.props,n=r.data,l=r.value,o=r.onChange;if(t){var u=n.parameters.filter((function(e){return"default"in e&&"enabled"!==e.name})).map((function(e){return"".concat(n.name,".").concat(e.name,"=").concat(e.default)}));a=(0,E.default)([].concat((0,c.default)(l),["".concat(n.name,".enabled=true")],(0,c.default)(u)))}else a=l.filter((function(e){return!e.startsWith(n.name)}));o(a)},e.handleParamsChange=function(t){var a=e.props,r=a.value,n=a.onChange,l=e.props.data.name,o=Object.keys(t).reduce((function(e,a){return[].concat((0,c.default)(e),["".concat(l,".").concat(a,"=").concat(t[a])])}),[]);n((0,E.default)([].concat((0,c.default)(r.filter((function(e){return!e.startsWith(l)}))),(0,c.default)(o))))},e}return(0,i.default)(r,[{key:"renderParams",value:function(){var e=this.props,t=e.data,a=e.value,r=t.parameters.filter((function(e){return"enabled"!==e.name}));if((0,y.default)(r))return null;var n=a.filter((function(e){return e.startsWith(t.name)})).reduce((function(e,a){var r=a.split("="),n=(0,u.default)(r,2),l=n[0],o=n[1];return(0,h.default)(e,l.replace("".concat(t.name,"."),""),o),e}),{});return m.default.createElement("div",{className:"margin-b12"},m.default.createElement(_.default,{data:r,value:n,onChange:this.handleParamsChange}))}},{key:"render",value:function(){var e=this.props,a=e.data,r=e.value;if(!(a.parameters&&a.parameters.some((function(e){return"enabled"===e.name}))))return null;var n=r.some((function(e){return e==="".concat(a.name,".enabled=true")}));return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:(0,v.default)(O.default.item,(0,o.default)({},O.default.on,n||a.always))},m.default.createElement(g.default,{icon:S.COMPONENT_ICON_MAP[a.name]||"apps",title:t(a.title),description:t(a.description)}),m.default.createElement(b.default,{className:O.default.switch,text:n?t("ENABLED"):t("DISABLED"),onChange:this.handleSwitch,checked:n})),n&&this.renderParams())}}]),r}(m.Component);a.default=T},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=r(186),m=l(r(787)),v=l(r(1181)),h=l(r(2744));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={visible:!1},e.showEdit=function(){e.setState({visible:!0})},e.hideEdit=function(){e.setState({visible:!1})},e.handleEdit=function(t){var a=e.props,r=a.value;(0,a.onChange)(y(y({},r),t)),e.hideEdit()},e}return(0,c.default)(r,[{key:"renderPreview",value:function(){var e=this.props,a=e.data,r=e.value;return d.default.createElement("div",{className:h.default.preview},a.map((function(e){return d.default.createElement("div",{key:e.name,className:h.default.item},d.default.createElement("span",null,t(e.title)||e.name,": "),d.default.createElement("span",null,r[e.name]))})),d.default.createElement("a",{className:h.default.edit,onClick:this.showEdit},t("EDIT")))}},{key:"renderModal",value:function(){var e=this.props,a=e.data,r=e.value;return d.default.createElement(m.default.Form,{title:t("EDIT"),data:r,onOk:this.handleEdit,onCancel:this.hideEdit,visible:this.state.visible},a.map((function(e){return d.default.createElement(p.Form.Item,{key:e.name,label:t(e.title||e.name),desc:t(e.description)},d.default.createElement(v.default,{name:e.name,defaultValue:e.default,param:e}))})))}},{key:"render",value:function(){return d.default.createElement("div",null,this.renderPreview(),this.renderModal())}}]),r}(d.Component);a.default=b},function(e,t,a){e.exports={preview:"_2_vP7hbw0vWvPRoJ3CgBXR",item:"_24DFpoiC_T7CiYzwk41wlV",edit:"_1L1kquFZKnA3h2S4aYPijz"}},function(e,t,a){e.exports={item:"_1h8oTIRT-o4SN2jbQfhU6l",on:"_1kzfykTUroCIhZNvsNok7E",switch:"J049BIAtXjHOeN76eUO0S"}},function(e,t,a){e.exports={wrapper:"_35UinkaQtV5ns5CtdVPeYg",form:"_1EgJsj4-MPBd2pmWDQGAE_"}},,function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=r(239),m=r(186),v=n(r(884)),h=r(72),E=n(r(955)),y=n(r(1634)),g=n(r(2750));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).store=new E.default,t.state={formData:e.formTemplate},t}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props.formRef,r=this.state.formData,n=(0,d.default)(r,"spec.type");return f.default.createElement(m.Form,{data:r,ref:a,className:g.default.wrapper},f.default.createElement(m.Form.Item,{label:t("EDGE_WAY_TO_INSTALL"),desc:t("EDGE_WAY_TO_INSTALL_DESC")},f.default.createElement(m.Select,{name:"spec.type",onChange:function(t){return e.setState({clusterType:t})},options:this.clusterTypes})),"manual"===n?f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:g.default.tip},t.html("CLUSTER_DIRECT_IMPORT_TIP")),f.default.createElement("div",{className:g.default.editorWrapper},f.default.createElement("div",{className:g.default.editorHead},f.default.createElement("span",{className:g.default.title},f.default.createElement(m.Icon,{name:"kubernetes",size:20}),t("INPUT_EDGE_KUBECONFIG"))),f.default.createElement(m.Form.Item,{rules:[{required:!0,message:t("INPUT_KUBECONFIG")}],unControl:!0},f.default.createElement(v.default,{className:g.default.editor,mode:"yaml",name:"spec.kubeconfig",options:{width:"100%",height:"100%"}})))):f.default.createElement(f.default.Fragment,null,f.default.createElement(m.Form.Item,{label:t("HOSTED_IN"),desc:t("HOSTED_IN_DESC"),rules:[{required:!0,message:t("HOSTED_IN_DESC")}]},f.default.createElement(m.Select,{searchable:!0,placeholder:" ",name:"spec.hostCluster",options:this.clusterOptions})),f.default.createElement(m.Form.Item,{label:t("ADVERTISE_ADDRESS"),desc:t("ADVERTISE_ADDRESS_DESC"),rules:[{required:!0,message:t("HOSTED_IN_EMPTY")},{pattern:h.PATTERN_IP,message:t("INVALID_IP_DESC")}]},f.default.createElement(y.default,{name:"spec.advertiseAddress",simpleInput:!0,isMultiMode:!0,disabled:!0}))))}},{key:"clusterTypes",get:function(){return[{label:"自动安装",value:"auto"},{label:"手动安装",value:"manual"}]}},{key:"clusterOptions",get:function(){var e=this.props.hostedInOptions,t=(0,d.default)(this.state.formData,"metadata.name");return!globals.app.isMultiCluster&&t?[{label:t,value:t}]:e}}]),r}(f.default.Component))||l;a.default=S},,function(e,t,a){e.exports={wrapper:"_1cryNa8CfEjk5K7oyrLDOI",editorWrapper:"_3IbmjLdLB9hAdJ3usj5VFU",editor:"UCue-Qz9ywNx_bW6ltsF1",editorHead:"_3bAVIh8hwpNDT8yrHCf5Rf",title:"KUFnbybtq5ToYdN0OWvtH",tip:"_3J6SGj2SGDWDBDupNSXLB4"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(16);var o=l(r(96)),u=n(r(0)),c=r(14),s=r(186),i=l(r(787)),f=l(r(814)),d=r(52),p=r(924),m=l(r(2752)),v=l(r(2754)),h=function(e){var a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.onOk,h=e.title,E=e.isEdgeWize,y=(0,c.toJS)(e.detail),g=y.expiredDay,b=g&&g<0,S=(0,u.useState)(!1),_=(0,o.default)(S,2),O=_[0],C=_[1],T=(0,u.useState)(""),R=(0,o.default)(T,2),D=R[0],N=R[1];return u.default.createElement(i.default,{width:600,showIcon:!0,imageIcon:"/assets/unbindCluster.svg",headerClassName:v.default.header,bodyClassName:v.default.body,title:h,visible:a,isSubmitting:r,onCancel:n,hideFooter:!0},u.default.createElement("div",{style:{padding:"0px 20px"}},u.default.createElement("div",{className:v.default.tipBox},u.default.createElement("p",{className:v.default.title},t("RISK_WARNING")),u.default.createElement("ul",null,u.default.createElement("li",{className:v.default.des},E?t("REMOVE_EDGEWIZE_TIP_A"):t("REMOVE_CLUSTER_TIP_A")),u.default.createElement("li",{className:v.default.des},E?t("REMOVE_EDGEWIZE_TIP_B"):t("REMOVE_CLUSTER_TIP_C")))),u.default.createElement("div",{className:v.default.cluster},u.default.createElement("div",{className:v.default.header},u.default.createElement(f.default,{cluster:y,isExpired:b,isEdgeWize:E})),u.default.createElement("div",{className:v.default.info},u.default.createElement("div",{className:v.default.item},u.default.createElement("span",{className:v.default.label},t("NODE_COUNT"),":"),u.default.createElement("span",{className:v.default.value},y.nodeCount)),u.default.createElement("div",{className:v.default.item},u.default.createElement("span",{className:v.default.label},t("KUBERNETES_VERSION"),":"),u.default.createElement("span",{className:v.default.value},y.kubernetesVersion)),u.default.createElement("div",{className:v.default.item},u.default.createElement("span",{className:v.default.label},E?t("HOSTED_IN"):t("PROVIDER"),":"),u.default.createElement("span",{className:v.default.value},E?y.hostCluster:y.provider)),u.default.createElement("div",{className:v.default.item},u.default.createElement("span",{className:v.default.label},t("CREATION_TIME"),":"),u.default.createElement("span",{className:v.default.value},(0,d.getLocalTime)(y.createTime).format("YYYY-MM-DD HH:mm:ss"))),!E&&u.default.createElement("div",{className:v.default.row},u.default.createElement("span",{className:v.default.label},t("TAG"),":"),u.default.createElement("span",{className:v.default.value},u.default.createElement(p.ClusterTagGroup,{data:y.tags}))))),!O&&u.default.createElement("div",{style:{marginBottom:20}},u.default.createElement(m.default,{width:560,height:40,borderRadius:40,tipText:t("DELETE_CLUSTER_SWIPE_DESC"),handleSuccess:function(){C(!0)}})),O&&u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:v.default.confirmInput},u.default.createElement("p",null,t.html("ENTER_CLUSTER_NAME",{name:y.name})),u.default.createElement(s.Input,{placeholder:y.name,autoFocus:!0,onChange:function(e){N(e.target.value)}})))),O&&u.default.createElement("div",{className:v.default.footer},u.default.createElement(s.Button,{onClick:n},t("CANCEL")),u.default.createElement(s.Button,{type:"danger",loading:r,disabled:r||!!y&&D!==y.name,onClick:function(){l(!1)}},t("DROP"))))};a.default=h},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(5);var l=n(a(96)),o=r(a(0)),u=n(a(2753)),c=function(e){var t=e.width,a=void 0===t?560:t,r=e.height,n=void 0===r?40:r,c=e.borderRadius,s=void 0===c?40:c,i=e.tipText,f=e.handleSuccess,d=void 0===f?function(){}:f,p=(0,o.useRef)(!1),m=(0,o.useRef)(0),v=(0,o.useRef)(0),h=(0,o.useRef)(a-56),E=(0,o.useRef)(!1),y=(0,o.useState)(!1),g=(0,l.default)(y,2),b=g[0],S=g[1],_=(0,o.useState)(0),O=(0,l.default)(_,2),C=O[0],T=O[1],R=function(){E.current||(p.current=!1,S(!0),T(0))},D=function(e){if(p.current&&!E.current){e.preventDefault(),e.stopPropagation(),v.current=e.x;var t=v.current-m.current;if(t<0&&(t=0),t>=h.current)return t=h.current,T(t),E.current=!0,void(d&&d());T(t)}};(0,o.useEffect)((function(){return document.body.addEventListener("mouseup",R),document.body.addEventListener("mousemove",D),function(){document.body.removeEventListener("mouseup",R),document.body.removeEventListener("mousemove",D)}}),[]);var N={borderRadius:s,opacity:b&&C/h.current,width:56+C,transitionDuration:b&&p.current?"0s":".3s"},k={borderRadius:s,height:n-8,transitionDuration:b&&p.current?"0s":".3s",transform:"translateX(".concat(C,"px)")},I={color:"rgb(".concat(121+C/h.current*134,",\n    ").concat(135+C/h.current*120,",\n    ").concat(156+C/h.current*99,")")};return o.default.createElement("div",{className:u.default.content,style:{width:a}},o.default.createElement("div",{className:u.default.background,style:{borderRadius:s}},o.default.createElement("span",{style:I},i)),o.default.createElement("div",{className:u.default.sliderBox,style:N}),o.default.createElement("div",{style:k,className:u.default.slider,onMouseEnter:function(){E.current||p.current||(S(!0),T(0))},onMouseLeave:function(){E.current||p.current||S(!1)},onMouseDown:function(e){E.current||0!==e.button||(m.current=e.nativeEvent.x||e.touches[0].clientX,p.current=!0)},onMouseUp:R,onMouseMove:D},o.default.createElement("img",{className:u.default.icon,src:"/assets/ksLogo.svg"})))};t.default=c},function(e,t,a){e.exports={content:"_3ZGXa4C-gz0RDQXj2EmfRb",background:"_2Afm8HbEo9uoZgLe37Flrk",sliderBox:"FxlG-8w-UIpj5qcb3zmmc",slider:"_2gwZRUIcVJLKmsligzPF_4",icon:"_29rGCR-XxnuoLP6eEOxGz1"}},function(e,t,a){e.exports={header:"tmOOCtHbIrKeQ8xSIv2AW",body:"_3dos96Ex-qOKvh04j-PRSJ",tipBox:"_2KHHBfH6SnNFZSSDy5LW_P",title:"_21vopnnvetJvmePQAbmgFR",des:"_1lAfacHxGBPDt9NhCtFXMX",cluster:"_3Q_fFn8LLUmDCpOfK-E1Op",clusterTitle:"_3zlj5cSf3XzoPveDCPNMHQ",info:"_18tGPRwG9cadANDu3vQcLS",row:"_1xxy6fYDzBimEnXHK6FxMO",item:"_20q4gTYObZ3ANQ0QlgW0st",label:"_2U44bSqRrXu08gFCaUJqUV",value:"MRn9T8BlsTO7P1dEOthpV",confirmInput:"oWd2ADDZjJyfMRttMvVtm",footer:"_1QKfPS2L1dQ1O14549Kh-J"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(58)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=r(186),E=n(r(884)),y=n(r(814)),g=n(r(790)),b=n(r(787)),S=n(r(1)),_=r(239),O=n(r(63)),C=n(r(2756));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,_.observer)((u=o=function(e){(0,d.default)(r,e);var a=T(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).formRef=v.default.createRef(),e.configValidator=function(e,a,r){return a?(0,O.default)(a)?r({message:t("INPUT_KUBECONFIG"),field:e.field}):void r():r()},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.props,a=t.formTemplate;(0,t.onOk)(a)}))},e}return(0,f.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.formTemplate,n=e.visible,l=e.store,o=e.readOnly,u=e.isEdgeWize,i=(0,s.default)(e,["detail","formTemplate","visible","store","readOnly","isEdgeWize"]),f=a.expiredDay,d=f&&f<0;return v.default.createElement(b.default,(0,c.default)({width:960,visible:n},i,{onOk:this.handleSubmit,okText:t("UPDATE"),isSubmitting:l.isSubmitting,store:l,hideFooter:o}),v.default.createElement(h.Columns,null,v.default.createElement(h.Column,{className:"is-6"},v.default.createElement(y.default,{cluster:a,onClick:this.handleClick,isExpired:d})),v.default.createElement(h.Column,{className:"is-6"},v.default.createElement(g.default,{title:u?a.hostCluster:a.provider,description:t(u?"HOSTED_IN":"PROVIDER")}))),v.default.createElement(h.Form,{data:r,ref:this.formRef},v.default.createElement("div",{className:C.default.editor},v.default.createElement("div",{className:C.default.editorTitle},v.default.createElement(h.Icon,{name:"kubernetes",size:20}),v.default.createElement("span",null,t("INPUT_KUBECONFIG"))),v.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("INPUT_KUBECONFIG")},{validator:this.configValidator}],unControl:!0},v.default.createElement(E.default,{mode:"yaml",name:"kubeconfig",readOnly:o})))))}}]),r}(v.default.Component),o.propTypes={formTemplate:S.default.object,visible:S.default.bool,onOk:S.default.func,readOnly:S.default.bool,onCancel:S.default.func},o.defaultProps={formTemplate:{},visible:!1,readOnly:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=R},function(e,t,a){e.exports={editorTitle:"_3DMYLlAewAg7Yk43i5Zu59",editor:"_2hVhMe5kfVPZtx-aI4_B8Z",link:"_uoUc30jYg3tddfXLhIou"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(186),m=n(r(787)),v=r(14),h=n(r(830)),E=n(r(884)),y=n(r(1)),g=n(r(199)),b=n(r(2758));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).formRef=d.default.createRef(),t.handleSubmit=function(){var e=t.formRef.current,a=t.state.formData;e&&e.validate((function(){var e=t.props,r=e.formTemplate;(0,e.onOk)((0,g.default)({},a,r))}))},t.state={formData:(0,h.default)((0,v.toJS)(e.detail._originData||e.detail))},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.visible,n=e.readOnly,u=e.store,c=(e.onOk,(0,o.default)(e,["formTemplate","visible","readOnly","store","onOk"]));return d.default.createElement(m.default,(0,l.default)({width:960,visible:r},c,{onOk:this.handleSubmit,okText:t("OK"),isSubmitting:u.isSubmitting,store:u,hideFooter:n}),d.default.createElement(p.Form,{data:a,ref:this.formRef},d.default.createElement("div",{className:b.default.editor},d.default.createElement(p.Form.Item,{label:t("CLUSTER_CONFIG"),unControl:!0},d.default.createElement(E.default,{mode:"yaml",name:"spec.config",options:this.editOptions})))))}},{key:"editOptions",get:function(){return{width:"100%",height:"100%"}}}]),r}(d.default.Component);a.default=_,_.propTypes={formTemplate:y.default.object,visible:y.default.bool,onOk:y.default.func,readOnly:y.default.bool,onCancel:y.default.func},_.defaultProps={formTemplate:{},visible:!1,readOnly:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={editor:"_36_GyGwWMvnHoN-unWOC9G"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=r(903),c=n(r(2760));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var i={"pod.events":{on:function(e){var a=e.store,r=e.detail,n=e.success,i=(0,o.default)(e,["store","detail","success"]),f=u.Modal.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:function(){u.Modal.close(f),n&&n()},store:a,modal:c.default,title:t("REMOVE_CLUSTER"),resource:r.name,detail:r,hideFooter:!0},i))}}};a.default=i},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(137),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(245),r(42),r(137),r(4),r(22),r(23),r(57),r(17);var o=n(r(315)),u=n(r(43));r(41);var c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=l(r(0)),h=n(r(26)),E=n(r(1344)),y=r(239),g=r(186),b=n(r(1110)),S=n(r(1635)),_=r(903),O=r(52),C=n(r(2761));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,y.observer)(c=function(e){(0,d.default)(n,e);var a,r=T(n);function n(e){var a;return(0,i.default)(this,n),(a=r.call(this,e)).getColumns=function(){return[{title:t("TYPE"),dataIndex:"type",width:"10%",render:function(e){return v.createElement(_.Status,{type:e,name:t("EVENT_".concat(e.toUpperCase()))})}},{title:t("REASON"),dataIndex:"reason",width:"16%"},{title:t("EVENT_AGE"),dataIndex:"age",width:"16%",sorter:!0,sortOrder:a.state.reverse},{title:t("SOURCE"),dataIndex:"from",width:"18%"},{title:t("MESSAGE"),dataIndex:"message"}]},a.handleSort=function(e,t){a.setState({reverse:t.order})},a.state={reverse:"descend"},a.eventStore=e.isEdgeWize?new S.default:new b.default,a}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(a=(0,s.default)(u.default.mark((function e(){var t,a,r,n,l,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.detail,r=void 0===a?{}:a,n=t.cluster,l=(0,h.default)(r,"namespace",""),o={"involvedObject.name":(0,h.default)(r,"name",""),"involvedObject.namespace":l,"involvedObject.uid":(0,h.default)(r,"uid","")},this.eventStore.fetchList({namespace:l,cluster:n,fieldSelector:(0,O.joinSelector)(o)});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderList",value:function(){var e=this.eventStore.list,a=e.data,r=void 0===a?[]:a,n=e.isLoading,l=(0,E.default)(r,"lastTimestamp","descend"===this.state.reverse?"desc":"asc");return v.createElement(g.Table,{className:C.default.table,dataSource:l,columns:this.getColumns(),onChange:this.handleSort,loading:n,emptyText:v.createElement("div",{className:C.default.emptyText},v.createElement("span",{className:C.default.emptyTipIcon},v.createElement(g.Icon,{name:"exclamation",size:48})),v.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")))})}},{key:"render",value:function(){var e=Object.assign({},this.props);return v.createElement(_.Modal,(0,o.default)({},e,{width:1160}),this.renderList())}}]),n}(v.Component))||c;a.default=R},function(e,t,a){e.exports={table:"tOiaKatBjeSawrS1dQYnx",emptyText:"_39sGt_r6mkkkzM7UceM_fW",emptyTipIcon:"_1nh-INf1jINzuI-ko6Q3d-"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(73),r(18),r(16),r(9),r(13),r(10),r(24),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(73),r(18),r(28),r(448),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(63)),f=r(903),d=n(r(2763)),p=n(r(2766)),m=n(r(2767)),v=n(r(2772));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"cluster.tag.add":{on:function(e){var a,r=e.store,n=e.module,u=e.success,i=(0,c.default)(e,["store","module","success"]),p=f.Modal.open(E({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.create(a);case 4:f.Modal.close(p),s.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),okText:t("CREATE"),module:n,title:t("CREATE_TAGS"),modal:d.default,isAdd:!0,store:r},i))}},"cluster.tag.edit":{on:function(e){var a,r=e.store,n=e.module,u=e.success,i=(0,c.default)(e,["store","module","success"]),p=f.Modal.open(E({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g(r,a,i.name);case 4:f.Modal.close(p),s.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,title:t("EDIT_TAG"),modal:d.default,isAdd:!1,store:r},i))}},"cluster.tag.delete":{on:function(e){var a,r=e.store,n=e.module,u=e.detail,i=e.success,d=(0,c.default)(e,["store","module","detail","success"]),m=[].concat(u).map((function(e){return"".concat(e.label,":").concat(e.value)})).join(", "),v=f.Modal.open(E(E({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(r,u);case 2:f.Modal.close(v),s.default.success({content:t("DELETED_SUCCESSFULLY")}),i&&i();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),module:n,title:1===m.split(", ").length?t("DELETE_TAG"):t("DELETE_MULTIPLE_TAGS"),modal:p.default,store:r},d),{},{resource:m,desc:1===m.split(", ").length?t.html("DELETE_CLUSTER_TAG_CONFIRM_DESC",{resource:m}):t.html("DELETE_CLUSTER_TAGS_CONFIRM_DESC",{resource:m})}))}},"cluster.tag.bind":{on:function(e){var a,r=e.store,n=e.module,u=e.success,d=(0,c.default)(e,["store","module","success"]),p=f.Modal.open(E({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.default)(a)){e.next=3;break}return e.next=3,_(r,a,[d.detail]);case 3:f.Modal.close(p),s.default.success({content:t("ADD_TAG_SUCCESSFUL")}),u&&u();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("ADD_TAG_TO_CLUSTERS"),module:n,modal:m.default,hasBundled:!1,store:r},d))}},"cluster.tag.hasBundled":{on:function(e){var a,r=e.store,n=e.module,u=e.success,i=(0,c.default)(e,["store","module","success"]),d=f.Modal.open(E({onOk:function(e,t){f.Modal.close(d),u&&t&&u()},module:n,title:t("REMOVE_TAG_FROM_CLUSTERS"),modal:m.default,hasBundled:!0,onUnBind:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(r,a,i.detail.name);case 2:s.default.success({content:t("REMOVE_TAG_SUCCESSFUL")});case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r},i))}},"cluster.tag.clusterItemTags":{on:function(e){var a,r=e.store,n=e.module,u=e.success,s=(0,c.default)(e,["store","module","success"]),d=f.Modal.open(E({onOk:(a=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.default)(t)){e.next=3;break}return e.next=3,_(r,[].concat(s.detail),t);case 3:f.Modal.close(d),!(0,i.default)(t)&&u&&u();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("ADD_TAGS"),module:n,modal:v.default,isAdd:!1,store:r},s))}}};function g(e,t,a){return e.update(t[0],{name:a})}function b(e,t){return e.delete([].concat(t).map((function(e){return e.name})))}function S(e,t,a){return e.unBind({clusters:[t.name]},{name:a})}function _(e,t,a){return e.bind({labels:a.map((function(e){return e.name})),clusters:t.map((function(e){return e.name}))})}a.default=y},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(187),r(4),r(23),r(17),r(818),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(30)),c=l(r(58)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51));r(45),r(187),r(42),r(4),r(23),r(57),r(17),r(818);var m=n(r(0)),v=l(r(787)),h=r(186),E=l(r(3)),y=l(r(63)),g=l(r(158)),b=l(r(1636)),S=l(r(2764));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,f.default)(r,e);var a=_(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e,t=n.props.onOk,a=n.state.value;null===(e=n.ref.current)||void 0===e||e.validate((function(){t(a)}))},n.handleTagsInputError=function(e){if(null==e?void 0:e.message)return n.setState({notValidTags:!0});n.setState({notValidTags:!1})},n.labelsValidator=function(e,a,r){return(0,g.default)(a)?r():(0,y.default)(a)?r({message:t("CLUSTER_TAG_EMPTY_DESC")}):!!a.every((function(e){var t=e.key.trim(),a=e.value.trim();return t.length<=63&&a.length<=63&&""!==t&&""!==a}))||r({message:t("ENT_CLUSTER_TAG_DESC")})},n.state={value:e.detail,notValidTags:!1},n.ref=m.createRef(),n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){e.detail!==this.props.detail&&this.props.detail!==this.state.value&&this.setState({value:this.props.item})}},{key:"render",value:function(){var e=this.props,a=e.isAdd,r=void 0===a||a,n=(0,c.default)(e,["isAdd"]);return m.createElement(v.default.Form,(0,o.default)({width:960},n,{formRef:this.ref,data:this.state,onOk:this.handleOk,disableOk:this.state.notValidTags}),r&&m.createElement(m.Fragment,null,m.createElement(h.Alert,{type:"info",message:t("CREATE_TAGS_DESC")}),m.createElement("div",{className:(0,E.default)(b.default.tagAddTitle)},t("TAG_PL"))),m.createElement(h.Form.Item,{rules:[{required:!0,message:t("CLUSTER_TAG_EMPTY_DESC")},{validator:this.labelsValidator}]},m.createElement(S.default,{name:"value",addText:t("ADD"),onError:this.handleTagsInputError,className:(0,E.default)(b.default.tagItem,(0,u.default)({},b.default.tagItemUpdate,!r))})))}}]),r}(m.Component);a.default=O},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(11),r(6),r(18),r(97),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(11),r(6),r(18),r(97),r(42),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(61)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(3)),m=r(186),v=n(r(63)),h=n(r(135)),E=n(r(2765)),y=n(r(1637));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).handleAdd=function(){n.setState((function(e){var t=e.arrayValues;return{arrayValues:[].concat((0,o.default)(t),[{key:""}])}}))},n.triggerChange=function(e){var a=n.props.onChange;n.props.onError();var r=e.some((function(e){return(0,v.default)(e.key)})),l=!1,o=(0,h.default)(e);e.forEach((function(e,t){o[t]=void 0;var a=o.filter((function(t){return t&&t.key===e.key&&t.value===e.value}));(0,v.default)(a)||(l=!0)})),n.setState({arrayValues:e},(function(){r||a(e)})),r?n.props.onError({message:t("EMPTY_KEY")}):l?n.props.onError({message:t("DUPLICATE_LABELS")}):n.props.onError()},n.handleItemChange=function(e,t){var a=n.state.arrayValues;a[e]=t,n.triggerChange(a)},n.handleItemDelete=function(e){var t=n.state.arrayValues;n.triggerChange(t.filter((function(t,a){return a!==e})))},n.state={isValidValues:!0,arrayValues:e.value||[{key:"",value:""}]},n}return(0,c.default)(r,[{key:"isAddEnable",value:function(){return this.state.arrayValues.every((function(e){return!((0,v.default)(e)||!e.key&&!e.value)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.addText,n=t.itemProps,o=this.state.arrayValues;return d.default.createElement("div",{className:(0,p.default)(y.default.wrapper,a)},o.map((function(t,a){return d.default.createElement(E.default,(0,l.default)({key:"array-".concat(a),index:a,value:t||{},onChange:e.handleItemChange,onDelete:e.handleItemDelete},n))})),d.default.createElement("div",{className:"text-right"},d.default.createElement(m.Button,{className:y.default.add,onClick:this.handleAdd,disabled:!this.isAddEnable()},r)))}}]),r}(d.default.Component);a.default=b},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(186),m=n(r(867)),v=n(r(1637));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var E=function(e){(0,s.default)(r,e);var a=h(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.index;(0,a.onChange)(r,t)},e.handleDelete=function(){var t=e.props,a=t.index;(0,t.onDelete)(a)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.readOnly,r=(e.onDelete,e.onChange,e.keyProps),n=void 0===r?{}:r,u=e.valueProps,c=void 0===u?{}:u,s=(0,o.default)(e,["readOnly","onDelete","onChange","keyProps","valueProps"]),i=n.component,f=void 0===i?p.Input:i,h=(0,o.default)(n,["component"]),E=c.component,y=void 0===E?p.Input:E,g=(0,o.default)(c,["component"]);return d.default.createElement("div",{className:v.default.item},d.default.createElement(m.default,(0,l.default)({},s,{onChange:this.handleChange}),d.default.createElement(f,(0,l.default)({name:"key",placeholder:t("KEY"),readOnly:a},h)),d.default.createElement(y,(0,l.default)({name:"value",placeholder:t("VALUE"),readOnly:a},g))),!a&&d.default.createElement(p.Button,{type:"flat",icon:"trash",className:v.default.delete,onClick:this.handleDelete}))}}]),r}(d.default.Component);a.default=E},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(824)),m=l(r(1636));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).width=600,e}return(0,u.default)(r,[{key:"renderAlert",value:function(){return f.createElement(d.Alert,{className:m.default.alert,type:"warning",message:t("DELETE_CLUSTER_TAG_DESC")})}}]),r}(p.default);a.default=h},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(31),r(6),r(84),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(84),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var o,u=n(r(315)),c=n(r(58)),s=n(r(30)),i=n(r(61)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=r(186),E=n(r(3)),y=n(r(63)),g=n(r(189)),b=n(r(1161)),S=r(239),_=l(r(0)),O=n(r(945)),C=r(903),T=n(r(874)),R=n(r(915)),D=n(r(2768)),N=n(r(2769));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var A=(0,S.observer)(o=function(e){(0,p.default)(r,e);var a=P(r);function r(e){var n;return(0,f.default)(this,r),(n=a.call(this,e)).getParamsLabel=function(e){var t=e.group,a=e.tags,r=void 0===a?[]:a;return t&&(t="cluster.kubesphere.io/group=".concat(t)),r=r.map((function(e){return"label.cluster.kubesphere.io/".concat(e)})),[t].concat((0,i.default)(r)).filter(Boolean).join(",")},n.getList=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.props,r=a.hasBundled,l=a.detail.name,o=a.getList;(n.setState({loading:!0}),r)&&(t.tags=(null!==(e=t.tags)&&void 0!==e?e:[]).concat(l));var u=I(I({},(0,g.default)(t,"group","tags","__index")),{},{labelSelector:n.getParamsLabel(t)});o(u).then((function(e){n.setState({loading:!1,list:r?e:e.filter((function(e){return!e.tags.find((function(e){return e.name===l}))}))})}))},n.handleAdd=function(e){n.setState((function(t){var a=t.value;return{value:[].concat((0,i.default)(a),[e])}}))},n.handleDelete=function(e){n.setState((function(t){return{value:t.value.filter((function(t){return t.name!==e.name}))}}))},n.handleOk=function(){var e=n.props.onOk;e&&e(n.state.value,!!n.state.hasRemoved.length)},n.handleCancel=function(){var e=n.props,t=e.onCancel,a=e.onOk;n.state.hasRemoved.length?a&&a(n.state.value,!0):t&&t()},n.handleOnUnBind=function(e){var t=n.props.onUnBind;t&&t(e),n.setState({hasRemoved:[].concat((0,i.default)(n.state.hasRemoved),[e.name])})},n.handleReset=function(){n.getList(n.state.filters)},n.clearFilter=function(){n.setState({filters:{}}),n.getList()},n.renderEmpty=function(){var e=n.props.hasBundled;return _.createElement(T.default,{icon:"exclamation",title:t("NO_CLUSTER_FOUND"),desc:null,action:e?null:_.createElement("p",null,t("YOU_CAN_TRY_TO"),_.createElement("span",{className:D.default.action,onClick:n.handleReset,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),_.createElement("span",{className:D.default.action,onClick:n.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS")))})},n.state={list:[],filters:{},value:[],hasRemoved:[],loading:!1},n.tagsStore=new O.default,n}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.getList(),this.tagsStore.fetchGroupList()}},{key:"render",value:function(){var e=this,a=this.props,r=a.hasBundled,n=(a.onUnBind,a.detail),l=(0,c.default)(a,["hasBundled","onUnBind","detail"]),o=this.state,s=o.list,i=o.hasRemoved,f=o.loading,d=o.value,p=s.filter((function(e){return!i.includes(e.name)})),m=n&&"[".concat(n.label,":").concat(n.value,"]");return _.createElement(C.Modal,(0,u.default)({width:960},l,{title:r?_.createElement("span",null,t("REMOVE_TAG_FROM_CLUSTERS")," ",m):t("ADD_TAG_TO_CLUSTERS"),onOk:this.handleOk,onCancel:this.handleCancel,hideFooter:r}),_.createElement(h.Alert,{type:"warning",message:t("ADD_TAG_DESC")}),_.createElement("div",{className:D.default.title},t("CLUSTER_PL")),_.createElement("div",null,f&&_.createElement(h.Loading,{size:"large",className:D.default.loading}),_.createElement("div",{className:D.default.bindContainer},!r&&_.createElement(R.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.columns,onChange:function(t){e.setState({filters:t}),e.getList(t)},filters:this.state.filters}),p.map((function(t){var a=I(I({},t),{},{tags:t.tags.map((function(t){return e.tagsStore.tags.find((function(e){return e.name===t.name}))})).filter(Boolean)}),n=a.expiredDay,l=n&&n<0,o=(0,b.default)(d,{uid:a.uid});return _.createElement(N.default,{key:a.uid,data:a,hasBundled:r,isExpired:l,isChecked:o,onAdd:e.handleAdd,onDelete:e.handleDelete,onUnBind:e.handleOnUnBind})})),(0,y.default)(p)&&this.renderEmpty())))}},{key:"columns",get:function(){var e,a;return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS")},{dataIndex:"group",title:t("TYPE"),search:!0,filters:(null!==(e=this.tagsStore.group)&&void 0!==e?e:[]).map((function(e){return{text:e,value:e}})),renderSearch:function(e){return _.createElement("div",{className:"flex"},_.createElement("div",{className:(0,E.default)(D.default.clusterGroupTag,(0,s.default)({},D.default[e.key],!0))},t("ENV_".concat(e.label.toUpperCase()))),e.label)}},{dataIndex:"tags",title:t("TAG_PL"),filters:(null!==(a=this.tagsStore.tags)&&void 0!==a?a:[]).map((function(e){return{text:"".concat(e.label,":").concat(e.value),value:e.name}})),search:!0,multi:!0,renderSearch:function(e){return _.createElement("div",null,e.label)}}]}}]),r}(_.Component))||o;a.default=A},function(e,t,a){e.exports={bindContainer:"tNOa2EL27AfZiO2ZR8X2N",title:"_27U9qtKLZLLaVaV962NmSl",clusterGroupTag:"asBnEP-QmaK_c2rUi_em1",production:"_1oup3lUa7IHFoiyXgT3MTn",development:"_2vOI0ZGF4Kix3qif4cdDsq",testing:"_1pAhmfcRN1P3di10eJhrD-",demo:"_3BgkAEAOGO_uworLTWtfAQ",loading:"PBENJVDRQo4Ld4LJ4G6Ps",action:"_1cbBeiU9Q3bwhtrTCd8Vvi"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,u,c,s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=l(r(0)),h=n(r(1)),E=r(186),y=n(r(3)),g=n(r(814)),b=r(903),S=r(924),_=n(r(2770));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,n(r(936)).default)(["chain-off-duotone"])((c=u=function(e){(0,d.default)(r,e);var a=O(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).handleChange=function(e){var t=n.props,a=t.onAdd,r=t.onDelete,l=t.data;e?a&&a(l):r&&r(l)},n.renderPopconfirm=function(){var e=n.props,a=e.onUnBind,r=e.data;return v.createElement("div",null,v.createElement("div",{className:_.default.body},v.createElement("div",{className:_.default.header},v.createElement(E.Icon,{name:"information",type:"green",size:20}),v.createElement("span",null,t("REMOVE_TAG"))),v.createElement("div",{className:_.default.desc},t("REMOVE_TAG_DESC"))),v.createElement("div",{className:_.default.footer},v.createElement(E.Button,null,t("CANCEL")),v.createElement(E.Button,{type:"control",onClick:function(){return a(r)}},t("OK"))))},n.state={},n}return(0,f.default)(r,[{key:"render",value:function(){var e,a,r=this.props,n=r.data,l=r.isExpired,o=r.isChecked,u=r.hasBundled;return v.createElement("li",{className:(0,y.default)(_.default.wrapper,(e={},(0,s.default)(e,_.default.itemWithCheckbox,!u),(0,s.default)(e,_.default.itemWithButton,u),e)),"data-test":"cluster-item"},!u&&v.createElement("div",null,v.createElement(E.Checkbox,{checked:o,disabled:n.tags.length>=5,onChange:this.handleChange})),v.createElement(g.default,{cluster:n,isExpired:l}),v.createElement(b.Text,{title:v.createElement(S.ClusterTagGroup,{empty:"-",data:null!==(a=null==n?void 0:n.tags)&&void 0!==a?a:[]}),description:t("TAG_PL")}),u&&v.createElement("div",null,v.createElement(E.Dropdown,{className:_.default.popconfirm,content:this.renderPopconfirm(),placement:"left"},v.createElement(E.Button,{className:_.default.itemCloseButton},v.createElement(E.Icon,{name:"chain-off-duotone"}))),v.createElement("span",{className:_.default.itemCloseIcon},v.createElement(E.Icon,{name:"chain-off-duotone"}))))}}]),r}(v.Component),u.propTypes={data:h.default.object,isExpired:h.default.bool,isChecked:h.default.bool,hasBundled:h.default.bool,onAdd:h.default.func,onDelete:h.default.func,onUnBind:h.default.func},o=c))||o;a.default=C},function(e,t,a){e.exports={wrapper:"_3TrpZAZ3rgo39zOFZHy8xz",icon:"Zi3B5-Wsb-8T_s2aNJNQq",indicator:"_15a5i-zVfIE2ZvIsIlbMHx",itemWithButton:"_1ezmOe2ce-Ti0CMtdJM-yv",itemWithCheckbox:"EwrSmju5xej7jB6369Iie",itemCloseButton:"_3C8K2FArTgOSTqJcodaziA",itemCloseIcon:"_4puH2z6rvpiySiIfOO-2g",popconfirm:"oUkiKzGAnbQh8iG6baohw",body:"mHrc4zc9iyde_dCL2NmHL",header:"_1IEA6_50QyV57w4Qsr27Is",desc:"_2cNWy8q3JOj7RqEkTJZb3b",footer:"_3KkbOlGfceZx6Dql_Lrl5V"}},,function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(11),r(31),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(31),r(42),r(16),r(4),r(23),r(57),r(17);var o,u=n(r(315)),c=n(r(58)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=l(r(0)),v=r(186),h=r(239),E=r(14),y=r(903),g=r(924),b=n(r(2773));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,h.observer)(o=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({value:e})},t.handleOk=function(){var e=t.props,a=e.onOk,r=e.defaultValue,n=t.state.value;a((void 0===n?[]:n).filter((function(e){return!r.find((function(t){return t.name===e.name}))})))},t.state={list:e.list,value:e.value},t}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=(e.tagsGroup,e.tags),r=e.onAddTags,n=e.defaultValue,l=void 0===n?[]:n,o=(0,c.default)(e,["tagsGroup","tags","onAddTags","defaultValue"]),s=this.state.value;return m.createElement(y.Modal,(0,u.default)({width:600},o,{onOk:this.handleOk}),m.createElement("div",{className:b.default.wrapper},m.createElement(v.Alert,{type:"info",message:t("ADD_TAG_DESC")}),m.createElement("div",{className:b.default.title},t("ADD_TAGS")),m.createElement(g.ClusterTagAdd,{value:s,tagsGroup:(0,E.toJS)(this.props.store.tagsGroup),onChange:this.handleChange,defaultValue:l,onAddTags:r,tags:a})))}}]),r}(m.Component))||o;a.default=_},function(e,t,a){e.exports={wrapper:"FiDtjjOYi_dnAFmvmrS9j",title:"_1LaxNlg30y7jjTiSh0zwsn"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(58)),c=n(r(30)),s=n(r(787)),i=n(r(240)),f=n(r(824)),d=n(r(2775)),p=n(r(435)),m=n(r(135)),v=n(r(26)),h=n(r(74)),E=r(1183);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=function(e){var t,a=e.data,r=e.module,n=e.devops,l=p.default[r]({namespace:n}),o=a.sources.source_type,u=(0,v.default)(a,"sources.".concat(o,"_source"),{}),c={git:E.getGitSource,github:E.getGithubSource,bitbucket_server:E.getBitbucketSource,gitlab:E.getGitlabSource}[o],s=g({provider:a.sources.source_type,secret:{name:u.credential_id||a.sources.credentialId,namespace:n}},null!==(t=null==c?void 0:c(u))&&void 0!==t?t:{});return(0,h.default)(l,"metadata",a.metadata),(0,h.default)(l,"spec",s),l},S={"codeRepo.create":{on:function(e){var a,r=e.store,n=e.cluster,c=e.devops,f=e.module,p=e.success,m=(0,u.default)(e,["store","cluster","devops","module","success"]),v=s.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=b({data:a,module:f,devops:c}),e.next=3,r.create({data:o,devops:c,cluster:n});case 3:i.default.success({content:t("CREATE_SUCCESSFUL")}),p&&p(),s.default.close(v);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:f,cluster:n,devops:c,formTemplate:{},modal:d.default},m))}},"codeRepo.edit":{on:function(e){var a,r,n=e.store,f=e.cluster,p=e.devops,h=e.module,E=e.detail,y=e.success,S=(0,u.default)(e,["store","cluster","devops","module","detail","success"]),_=(0,m.default)(E),O=(0,v.default)(_,"_originData.metadata",{}),C="git"===_.provider?"url":"repo",T={metadata:O,sources:(a={source_type:_.provider},(0,c.default)(a,"".concat(_.provider,"_source"),(0,c.default)({},C,_.repoURL)),(0,c.default)(a,"credentialId",_.secret.name),a)},R=s.default.open(g({onOk:(r=(0,o.default)(l.default.mark((function e(a){var r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b({data:a,module:h,devops:p}),e.next=3,n.edit({data:r,devops:p,name:E.name,cluster:f});case 3:i.default.success({content:t("UPDATE_SUCCESSFUL")}),y&&y(),s.default.close(R);case 6:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),store:n,module:h,cluster:f,devops:p,formTemplate:T,modal:d.default,isEdit:!0},S))}},"codeRepo.delete":{on:function(e){var a,r=e.store,n=e.detail,c=e.devops,d=e.success,p=(0,u.default)(e,["store","detail","devops","success"]),m=s.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(g(g({},n),{},{devops:c,cluster:p.cluster}));case 2:s.default.close(m),i.default.success({content:t("DELETED_SUCCESSFULLY")}),d&&d();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r,modal:f.default,resource:n.name},p))}}};a.default=S},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=r(186),m=n(r(787)),v=n(r(828)),h=n(r(2776)),E=n(r(1639)),y=n(r(1)),g=n(r(0)),b=r(72),S=n(r(2787));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).resetSubRoute=function(){t.setState({subRoute:{}})},t.registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.showSelectRepo=function(){t.setState({showSelectRepo:!0})},t.hideSelectRepo=function(){t.setState({showSelectRepo:!1})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleRepoChange=function(e,a){t.setState({showSelectRepo:!1},(function(){t.scmRef.current.onChange(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({source_type:e},a))}))},t.handleDeleteSource=function(){t.scmRef.current.onChange()},t.submit=function(){var e=t.props,a=e.formTemplate,r=e.onOk;t.formRef.current.validate((function(){r(a)}))},t.state={showSelectRepo:!1},t.scmRef=g.default.createRef(),t.formRef=g.default.createRef(),t}return(0,s.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}},{key:"renderRepoSelectForm",value:function(){var e=this.props,t=e.formTemplate,a=e.devops,r=e.cluster,n=(0,o.default)(e,["formTemplate","devops","cluster"]),u=this.state.showSelectRepo;return g.default.createElement(m.default,(0,l.default)({width:970},n,{disableSubmit:u}),g.default.createElement("div",{className:S.default.wrapper},g.default.createElement(E.default,{sourceData:t.sources,devops:a,name:t.name,cluster:r,onSave:this.handleRepoChange,onCancel:this.hideSelectRepo,noSVN:!0,noJenkins:!0}),g.default.createElement(v.default,{className:S.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})))}},{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.isEdit,n=(0,o.default)(e,["formTemplate","isEdit"]);return this.state.showSelectRepo?this.renderRepoSelectForm():g.default.createElement(m.default,(0,l.default)({width:970},n,{onOk:this.submit}),g.default.createElement(p.Form,{ref:this.formRef,data:a},g.default.createElement(p.Columns,null,g.default.createElement(p.Column,null,g.default.createElement(p.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:b.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},g.default.createElement(p.Input,{name:"metadata.name",maxLength:63,disabled:r})),g.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},g.default.createElement(p.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),g.default.createElement(p.Column,null,g.default.createElement(p.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:b.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},g.default.createElement(p.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),g.default.createElement(p.Form.Item,{label:t("CODE_REPOSITORY"),rules:[{required:!0,message:t("REPO_EMPTY_DESC")}]},g.default.createElement(h.default,{name:"sources",ref:this.scmRef,onClick:this.showSelectRepo,handleDeleteSource:this.handleDeleteSource,devops:this.props.devops,type:"cd"}))))}}]),r}(g.default.Component);a.default=C,C.childContextTypes={registerSubRoute:y.default.func,resetSubRoute:y.default.func}},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(63)),f=n(r(26)),d=n(r(0)),p=n(r(3)),m=n(r(1)),v=r(186),h=r(72),E=n(r(1638));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).onChange=function(t){e.props.onChange(t)},e.handleDeleteSource=function(){e.props.handleDeleteSource()},e.getIconName=function(e){var t="";switch(e){case"single_svn":t="svn";break;case"bitbucket_server":t="bitbucket";break;default:t=e}return t},e}return(0,o.default)(r,[{key:"renderEmpty",value:function(){var e=this.props,a=e.onClick,r=e.type;return d.default.createElement("div",{className:E.default.empty,onClick:a},d.default.createElement("p",null,"cd"===r?t("CD_SELECT_CODE_REPO_DESC"):t("SELECT_CODE_REPO_DESC")))}},{key:"render",value:function(){var e=this.props.value;if((0,i.default)(e))return this.renderEmpty();var a=(0,f.default)(e,"".concat(h.REPO_KEY_MAP[e.source_type]),{}),r=this.getIconName(e.source_type);return d.default.createElement("div",{className:E.default.wrapper},d.default.createElement("div",{className:(0,p.default)(E.default.branch,E.default.branch__show)},d.default.createElement("div",{className:E.default.icon},d.default.createElement(v.Icon,{name:r,size:48})),d.default.createElement("div",{className:E.default.info},d.default.createElement("div",{className:E.default.name},a.repo||a.url||a.remote),d.default.createElement("div",{className:E.default.desc},a.description||"")),d.default.createElement("div",{className:E.default.action},d.default.createElement(v.Button,{onClick:this.props.onClick},t("RESELECT")),this.props.handleDeleteSource?d.default.createElement("span",{onClick:this.handleDeleteSource,className:E.default.deleteRepoBtn},d.default.createElement(v.Icon,{name:"trash"})):null)))}}]),r}(d.default.Component);a.default=g,g.propTypes={name:m.default.string,value:m.default.object,onClick:m.default.func},g.defaultProps={name:"",value:{},onClick:function(){}}},,function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(61)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(239),v=n(r(241)),h=r(186),E=n(r(2779));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(g({devops:r,cluster:n},t))},e.getCredentialsList=function(){return(0,o.default)(e.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return p.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",p.default.createElement(h.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props,l=n.formRef,o=n.noJenkins;return p.default.createElement("div",{className:E.default.card},p.default.createElement(h.Form,{data:a,ref:l},p.default.createElement(h.Form.Item,{label:t("CODE_REPOSITORY_ADDRESS"),desc:o?"":t("CODE_REPOSITORY_ADDRESS_DESC"),rules:[{required:!0,message:t("CODE_REPOSITORY_ADDRESS_EMPTY_TIP")}]},p.default.createElement(h.Input,{name:"git_source.url"})),p.default.createElement(h.Form.Item,{label:t("CREDENTIAL_SI"),desc:p.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),p.default.createElement("span",{className:E.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},p.default.createElement(h.Select,{name:"git_source.credential_id",options:this.getCredentialsList(),pagination:(0,v.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0}))))}}]),r}(p.default.Component))||l;a.default=S},function(e,t,a){e.exports={clickable:"_1gg18qWju-mAY-nQq_wdeZ",card:"Lfxi8U7_UunjUufMzWdBz"}},function(e,t,a){e.exports={repo:"_2p3YQU1s-Jm35rylroph5m",action:"_4hyWUFLHNlMCYVduuXirL",icon:"_3ExFuxeLW6lWai1lnNqxtQ",info:"_EMxlduMvguoNNIR0oevJ",name:"_6pmeCQT-XkYoRk9twIzRV",desc:"_2GvMjgDMVpyPEIYhLtLTkw",clickable:"_1VDCoIb7SHp8BlL0BnfLbk",orgList:"_3OjQ6FBtiYtMxF_WhVM8oF","repo-active":"_1aieEoEWdb7fCb6xaNNzt1",avatar:"_1rDnsFlzHVWKOZEtOF-Tz4",repoListContainer:"_3V7b_dRGTuudpdxU3LEU3-",search:"_3t0-vWM2-wlTI8801-_EkB",repoList:"_3WOIadWjprr42UyzPFB69o",repoListBox:"Xxk199TNV8RTQZcHu248B",placeHolder:"Tqy0wenhjpAlL1GshpcOJ",title:"_2JDeRQtou3Jh08bRyb9Eec",empty:"lhvh5kqnBPzEpJ0Q8tIVH",emptyRepoList:"kOa5BcMdFK_sDJw6vwaCH",tabContent:"uAwxIP0ixLgzm8ubNcemE",card:"_17o_ie-l9rkXfXzLUqIAGc",loadMore:"_2YUIaajHHx2tjO10XpPy2_",confirmButton:"uEDGotlFnf5vO86nHDgQi"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(61)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(241)),v=r(186),h=r(239),E=n(r(2782));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=(0,h.observer)(l=function(e){(0,i.default)(r,e);var a=g(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).handleTypeChange=function(e){n.setState({type:e})},n.getCredentialsListData=function(e){var t=n.props,a=t.devops,r=t.cluster;return n.props.store.getCredentials(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({devops:a,cluster:r},e))},n.getCredentialsList=function(){return(0,o.default)(n.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},n.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return p.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",p.default.createElement(v.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},n.state={type:"svn"},n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props,l=n.formRef,o=n.enableTypeChange;return p.default.createElement("div",{className:E.default.card},p.default.createElement(v.Form,{data:a,ref:l},p.default.createElement(v.Form.Item,{label:t("TYPE")},p.default.createElement(v.Select,{name:"svn_source.type",disabled:!1===o,onChange:this.handleTypeChange,options:[{label:t("SINGLE_SVN"),value:"single_svn"},{label:t("SVN"),value:"svn"}],defaultValue:"svn"})),p.default.createElement(v.Form.Item,{label:t("CODE_REPOSITORY_ADDRESS"),rules:[{required:!0,message:t("CODE_REPOSITORY_ADDRESS_EMPTY_TIP")}]},p.default.createElement(v.Input,{name:"svn_source.remote"})),p.default.createElement(v.Form.Item,{label:t("CREDENTIAL_SI"),desc:p.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),p.default.createElement("span",{className:E.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL"))),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}]},p.default.createElement(v.Select,{name:"svn_source.credential_id",options:this.getCredentialsList(),pagination:(0,m.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0})),"single_svn"!==this.state.type?p.default.createElement(p.default.Fragment,null,p.default.createElement(v.Form.Item,{label:t("BRANCH_INCLUDED")},p.default.createElement(v.Input,{name:"svn_source.includes",defaultValue:"trunk,branches/*,tags/*,sandbox/*"})),p.default.createElement(v.Form.Item,{label:t("BRANCH_EXCLUDED")},p.default.createElement(v.Input,{name:"svn_source.excludes"}))):null))}}]),r}(p.default.Component))||l;a.default=b},function(e,t,a){e.exports={clickable:"_3SXyP40oxP_JzSVCH3rffR",card:"_2czWZ1FvP3FEYMjudoFdDT"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(196),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(196),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(65)),c=n(r(43));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(88)),h=n(r(55)),E=n(r(56)),y=n(r(51)),g=n(r(49)),b=(n(r(66)),n(r(0))),S=r(14),_=r(239),O=n(r(63)),C=n(r(26)),T=n(r(241)),R=r(186),D=r(72),N=n(r(1641)),k=n(r(2784));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var w=(0,_.observer)((i=function(e){(0,h.default)(r,e);var a=A(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).getBitbucketList=(0,d.default)(c.default.mark((function e(){var t;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.store.getBitbucketList({cluster:n.props.cluster});case 2:t=e.sent,n.setState({bitbucketList:t});case 4:case"end":return e.stop()}}),e)}))),n.handleFormChange=function(){var e=n.props.store.creatBitBucketServersError,t=void 0===e?{}:e;(0,O.default)(t)||n.props.store.clearBitbucketErrors()},(0,u.default)(n,"handlePasswordConfirm",f,(0,v.default)(n)),n.handleSubmit=function(e){var t=n.props.store.tokenFormData,a=(0,o.default)({},D.REPO_KEY_MAP[n.scmType],{repo:(0,C.default)(n.repoListData,"".concat(e,".name")),credential_id:n.credentialId,owner:(0,C.default)(n.orgList[n.activeRepoIndex],"key")||(0,C.default)((0,S.toJS)(n.orgList),"data[".concat(n.activeRepoIndex,"].name")),api_uri:(0,C.default)(t,"apiUrl"),discover_branches:1,discover_pr_from_forks:{strategy:2,trust:2},discover_pr_from_origin:2,discover_tags:!0,description:(0,C.default)(n.repoListData,"".concat(e,".description"))});n.props.handleSubmit(a)},n.renderAccessTokenForm=function(){var e=n.props.store,a=e.tokenFormData,r=e.creatBitBucketServersError,l=void 0===r?{}:r,o=e.credentials,u=(0,S.toJS)(l);return b.default.createElement("div",{className:k.default.card},b.default.createElement(R.Form,{data:a,onChange:n.handleFormChange,onSubmit:n.handlePasswordConfirm,ref:n.tokenFormRef},b.default.createElement(R.Form.Item,{label:t("BITBUCKET_SERVER_ADDRESS"),error:u.apiUrl,rules:[{required:!0,message:t("BITBUCKET_SERVER_EMPTY_TIP")}]},b.default.createElement(R.Select,{name:"apiUrl",options:n.state.bitbucketList,placeholder:" ",searchable:!0})),b.default.createElement(R.Form.Item,{label:t("CREDENTIAL_SI"),rules:[{required:!0,message:t("PIPELINE_CREDENTIAL_EMPTY_TIP")}],error:u.username||u.password,desc:b.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),b.default.createElement("span",{className:k.default.clickable,onClick:n.props.showCredential},t("CREATE_CREDENTIAL")))},b.default.createElement(R.Select,{name:"credentialId",options:n.credentialsList,pagination:(0,T.default)(o,["page","limit","total"]),isLoading:o.isLoading,onFetch:n.getCredentialsListData,optionRenderer:n.optionRender,valueRenderer:n.optionRender,placeholder:" ",searchable:!0,clearable:!0})),u.all?b.default.createElement("p",{className:k.default.error},u.all):null,b.default.createElement(R.Button,{className:k.default.confirmButton,onClick:n.handlePasswordConfirm,loading:n.state.isLoading},t("OK"))))},n.state={isLoading:!1,bitbucketList:[]},n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.getBitbucketList()}},{key:"scmType",get:function(){return"bitbucket_server"}},{key:"credentialsList",get:function(){return(0,l.default)(this.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type,data:e.data}})))}}]),r}(N.default),f=(0,g.default)(i.prototype,"handlePasswordConfirm",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return(0,d.default)(c.default.mark((function t(){var a,r,n,l,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.devops,l=e.tokenFormRef.current.getData(),e.credentialId=l.credentialId,!(0,O.default)(l)&&e.credentialId){t.next=5;break}return t.abrupt("return",!1);case 5:return e.setState({isLoading:!0}),o=e.credentialsList.find((function(t){return t.value===e.credentialId})),t.next=9,e.props.store.creatBitBucketServers(P({cluster:r,devops:n,apiUrl:l.apiUrl,secretName:e.credentialId,secretNamespace:n},o.data)).finally((function(){e.setState({isLoading:!1})}));case 9:case"end":return t.stop()}}),t)})))}}),s=i))||s;a.default=w},function(e,t,a){e.exports={confirmButton:"_3WyVYo6dsKouGyudCKTfGh",card:"_3bXiGYjf3r8UN3JsehNubP",error:"_1aFTZO1gaDC0el8Y1x6-3s",clickable:"_2qLBXrEWfUzfXuLt7CVS_S"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(43));r(41);var c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=r(239),E=r(186),y=n(r(241)),g=n(r(26)),b=n(r(2786));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(0,h.observer)(c=function(e){(0,d.default)(n,e);var a,r=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).state={serverList:[],projectList:[]},e.getProjectListByOwner=function(){var t=(0,s.default)(u.default.mark((function t(a){var r,n,l,o,c,s,i;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.target.value,n=e.props,l=n.devops,o=n.cluster,c=e.props.store.formData,!(s=(0,g.default)(c,"gitlab_source.server_name"))){t.next=9;break}return t.next=7,e.props.store.fetchGitLabProjectList({devops:l,cluster:o,owner:r,server:s});case 7:i=t.sent,e.setState({projectList:i});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProjectListByServerName=function(){var t=(0,s.default)(u.default.mark((function t(a){var r,n,l,o,c,s;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.store.formData,n=e.props,l=n.devops,o=n.cluster,!(c=(0,g.default)(r,"gitlab_source.owner"))){t.next=8;break}return t.next=6,e.props.store.fetchGitLabProjectList({devops:l,cluster:o,owner:c,server:a});case 6:s=t.sent,e.setState({projectList:s});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCredentialsListData=function(t){var a=e.props,r=a.devops,n=a.cluster;return e.props.store.getCredentials(_({devops:r,cluster:n},t))},e.getCredentialsList=function(){return(0,l.default)(e.props.store.credentials.data.map((function(e){return{label:e.name,value:e.name,type:e.type}})))},e.optionRender=function(e){var a=e.label,r=e.type,n=e.disabled;return v.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",v.default.createElement(E.Tag,{type:n?"":"warning"},r&&t("CREDENTIAL_TYPE_".concat(r.toUpperCase()))))},e}return(0,f.default)(n,[{key:"componentDidMount",value:(a=(0,s.default)(u.default.mark((function e(){var t,a,r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.devops,r=t.cluster,e.next=3,this.props.store.fetchGitLabServerList({devops:a,cluster:r});case 3:n=e.sent,this.setState({serverList:n});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.store,a=e.formData,r=e.credentials,n=this.props.formRef,l=this.state,o=l.serverList,u=l.projectList;return v.default.createElement("div",{className:b.default.card},v.default.createElement(E.Form,{data:a,ref:n},v.default.createElement(E.Form.Item,{label:t("GITLAB_SERVER_ADDRESS"),rules:[{required:!0,message:t("GITLAB_SERVER_EMPTY_TIP")}]},v.default.createElement(E.Select,{name:"gitlab_source.server_name",options:o,onChange:this.getProjectListByServerName,placeholder:" "})),v.default.createElement(E.Form.Item,{label:t("PROJECT_GROUP_OWNER"),rules:[{required:!0,message:t("PROJECT_GROUP_OWNER_EMPTY_TIP")}]},v.default.createElement(E.Input,{name:"gitlab_source.owner",onBlur:this.getProjectListByOwner})),v.default.createElement(E.Form.Item,{label:t("CREDENTIAL_SI"),desc:v.default.createElement("p",null,t("SELECT_CREDENTIAL_DESC"),v.default.createElement("span",{className:b.default.clickable,onClick:this.props.showCredential},t("CREATE_CREDENTIAL")))},v.default.createElement(E.Select,{name:"gitlab_source.credential_id",options:this.getCredentialsList(),pagination:(0,y.default)(r,["page","limit","total"]),isLoading:r.isLoading,onFetch:this.getCredentialsListData,optionRenderer:this.optionRender,valueRenderer:this.optionRender,placeholder:" ",searchable:!0,clearable:!0})),v.default.createElement(E.Form.Item,{label:t("REPOSITORY_NAME"),rules:[{required:!0,message:t("REPOSITORY_NAME_EMPTY_TIP")}]},v.default.createElement(E.Select,{name:"gitlab_source.repo",options:u,placeholder:" ",clearable:!0}))))}}]),n}(v.default.Component))||c;a.default=C},function(e,t,a){e.exports={card:"_13oeDy1bgQEqiST5zgdTVo",clickable:"_3St1Q1uzn_3bzPUMmRXnAA"}},function(e,t,a){e.exports={wrapper:"_2Ci1IpapLDP0oCq47izo7Z",confirm:"_3cJ_baJ-iZer6sWsQZ64dG"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(26)),c=n(r(74)),s=n(r(240)),i=n(r(787)),f=n(r(825)),d=n(r(2789)),p=r(72),m=n(r(435)),v=n(r(901)),h=n(r(2795));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={"configmap.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,c=e.module,d=e.isFederated,E=e.success,g=(0,o.default)(e,["store","cluster","namespace","module","isFederated","success"]),b=p.MODULE_KIND_MAP[c],S=(0,l.default)({},b,m.default[c]({namespace:n}));d&&Object.keys(S).forEach((function(e){S[e]=m.default.federated({data:S[e],clusters:g.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var _=i.default.open(y({onOk:function(e){var l=(0,u.default)(e,b);l&&a.create(l,{cluster:r,namespace:n||(0,u.default)(l,"metadata.namespace")}).then((function(){i.default.close(_),s.default.success({content:t("CREATE_SUCCESSFUL")}),E&&E(l),v.default.delete("".concat(c,"_create_form"))}))},module:c,cluster:r,namespace:n,name:b,isFederated:d,formTemplate:S,steps:h.default,modal:f.default,store:a},g))}},"configmap.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(y({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),l.isFederated&&((0,c.default)(e,"apiVersion",a.version),(0,c.default)(e,"kind","FederatedConfigMap")),a.update(r,e).then((function(){i.default.close(u),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:d.default},l))}}};a.default=g},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(63)),m=n(r(787)),v=n(r(828)),h=n(r(1642)),E=n(r(2794));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleOk=function(){var e=t.props,a=e.onOk,r=e.store,n=e.detail,l=r.list,o=(0,d.toJS)(l.selectedRowKeys).filter((function(e){return e!==n.uid}));a(t.state.formTemplate),l.setSelectRowKeys(o)},t.state={formTemplate:(0,d.toJS)(e.detail._originData),subRoute:{}},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.detail,r=t.visible;a._originData!==e.detail._originData&&this.setState({formTemplate:(0,d.toJS)(a._originData)}),r&&r!==e.visible&&this.setState({subRoute:{}})}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,p.default)(e)?null:i.default.createElement(v.default,{className:E.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){var e=this.state,a=e.subRoute,r=e.formTemplate,n=this.props,l=n.visible,o=n.isSubmitting,u=n.onCancel,c=n.isFederated;return i.default.createElement(m.default,{width:960,title:t("EDIT_SETTINGS"),icon:"pen",bodyClassName:E.default.body,onOk:this.handleOk,okText:t("OK"),onCancel:u,visible:l,disableSubmit:!(0,p.default)(a),isSubmitting:o},i.default.createElement(h.default,{formTemplate:r,isFederated:c}),this.renderSaveBar())}}]),r}(i.default.Component);a.default=g,g.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},g.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(98),r(4),r(23),r(57),r(17);var l=n(r(96)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(189)),p=n(r(812)),m=n(r(2791));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){return function(){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))}},e.handleEdit=function(t){return function(){(0,e.props.onEdit)(t)}},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this,a=this.props,r=a.value,n=a.onAdd;return f.default.createElement(p.default,null,Object.entries(r).map((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1];return f.default.createElement(p.default.Item,{key:r,icon:"hammer",title:r,description:n||"-",onDelete:e.handleDelete(r),onEdit:e.handleEdit(r)})})),f.default.createElement(p.default.Add,{title:t("ADD_DATA_TCAP"),description:t("ADD_DATA_DESC"),onClick:n}))}},{key:"render",value:function(){return f.default.createElement("div",{className:m.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=h,h.defaultProps={value:{}}},function(e,t,a){e.exports={wrapper:"aDvnSfC_PO0cjwQXPRxri"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(1)),p=n(r(972)),m=r(186),v=r(881),h=n(r(2793));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.state={formData:e.getFormData()},e.registerForm=function(){var t=e.context.registerSubRoute,a=e.props.onCancel;t&&t(e.handleSubmit,a)},e.handleGoBack=function(){var t=e.context.resetSubRoute;t&&t(),e.props.onCancel()},e.handleSubmit=function(t){var a=e.props.onOk,r=e.formRef&&e.formRef.current;r&&r.validate((function(){var e=r.getData(),n=e.key,o=e.value;a((0,l.default)({},(0,p.default)(n),o)),t&&t()}))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.registerForm()}},{key:"getFormData",value:function(){var e=this.props,t=e.detail,a=e.selectKey;return{key:a||"",value:t[a]||""}}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selectKey;return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement("div",{className:"h6"},f.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},f.default.createElement(v.ReactComponent,null)),a[r]?t("EDIT_DATA_TCAP"):t("ADD_DATA_TCAP")),f.default.createElement("div",{className:h.default.formWrapper},f.default.createElement(m.Form,{data:this.state.formData,ref:this.formRef},f.default.createElement(m.Form.Item,{label:t("DATA_KEY"),description:t("CONFIG_FIELD_DESC")},f.default.createElement(m.Input,{name:"key"})),f.default.createElement(m.Form.Item,{label:t("DATA_VALUE"),description:t("ENTER_CONFIG_VALUE_DESC")},f.default.createElement(m.TextArea,{maxHeight:430,name:"value",rows:4,autoResize:!0})))))}}]),r}(f.default.Component);a.default=y,y.defaultProps={detail:{},selectKey:""},y.contextTypes={registerSubRoute:d.default.func,resetSubRoute:d.default.func}},function(e,t,a){e.exports={wrapper:"_1PdX-zg-RHkGdxETpgh8ot",formWrapper:"_3EIYglevz_Swh5nEFNZG3i",confirm:"SELJh5FgVGbyygztYusqG"}},function(e,t,a){e.exports={body:"_19MqCvqWGMl_Dtx4SLmQc",confirm:"_1LGqnJ3hh7Zg7eM0EMj72o"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(974)),o=r(a(1642)),u=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"DATA_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(26)),c=n(r(74)),s=n(r(240)),i=n(r(787)),f=n(r(435)),d=n(r(2797)),p=n(r(2799)),m=n(r(2801));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"configuration.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,c=e.success,p=(0,o.default)(e,["store","cluster","namespace","module","success"]),m=i.default.open(h({onOk:function(e){e&&a.create(e,{cluster:r,namespace:n||(0,u.default)(e,"metadata.namespace")}).then((function(){i.default.close(m),s.default.success({content:t("CREATE_SUCCESSFUL")}),c&&c(e)}))},module:l,cluster:r,namespace:n,modal:d.default,formTemplate:f.default[l]({namespace:n}),store:a,okText:t("CREATE")},p))}},"configuration.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(h({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),a.update(r,e).then((function(){i.default.close(u),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:p.default},l))}},"configuration.copy":{on:function(e){var a=e.cluster,r=e.namespace,n=e.store,l=e.detail,c=e.success,f=(0,o.default)(e,["cluster","namespace","store","detail","success"]),p=i.default.open(h({onOk:function(e){n.create(e,{cluster:a||(0,u.default)(l,"cluster"),namespace:r||(0,u.default)(l,"namespace")}).then((function(){i.default.close(p),s.default.success({content:t("COPY_SUCCESSFUL")}),c&&c(e)}))},store:n,detail:l,modal:d.default},f))}},"configuration.rollback":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(h({onOk:function(e){a.rollBack(r,e).then((function(){i.default.close(u),s.default.success({content:t("ROLLBACK_SUCCESSFUL")}),n&&n()}))},detail:r,modal:m.default,store:a},l))}}};a.default=E},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(14),p=n(r(26)),m=n(r(74)),v=n(r(63)),h=n(r(830)),E=r(186),y=n(r(240)),g=n(r(787)),b=n(r(1345)),S=r(72);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).formRef=f.default.createRef(),e.formTemplate=e.getFormTemplate(),e.state={codeData:e.getCodeData()},e.handleData=function(t){e.setState({codeData:t})},e.handleOk=function(a){var r=e.formRef.current;r&&r.validate((function(){var r=e.state.codeData,n=r.mode,o=r.config,u=(0,p.default)(a,"metadata.name");if((0,v.default)(o))return y.default.error({content:t("CONFIGURATION_CONTENT_EMPTY_DESC")});a.data=(0,l.default)({},"".concat(u,".").concat(n),o),(0,m.default)(a,'metadata.labels["springcloud.kubesphere.io/configuration.name"]',u),(0,m.default)(a,'metadata.annotations["springcloud.kubesphere.io/extension"]',n),(0,m.default)(a,'metadata.annotations["kubesphere.io/configuration-data"]',o),(0,m.default)(a,'metadata.annotations["springcloud.kubesphere.io/dataid"]',"".concat(u,".").concat(n)),e.props.onOk(a)}))},e.nameValidator=function(a,r,n){var l=e.props,o=l.store,u=l.namespace,c=l.cluster;if(!r)return n();o.checkName({name:r,namespace:u,cluster:c}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,u.default)(r,[{key:"getFormTemplate",value:function(){var e=this.props.formTemplate||(0,h.default)((0,d.toJS)(this.props.detail._originData));return this.props.isCopy&&(0,m.default)(e,"metadata.name",""),e}},{key:"getCodeData",value:function(){return{mode:(0,p.default)(this.formTemplate,'metadata.annotations["springcloud.kubesphere.io/extension"]',"yaml"),config:(0,p.default)(this.formTemplate,'metadata.annotations["kubesphere.io/configuration-data"]',"")}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.title,n=e.isSubmitting,l=e.onCancel,o=this.state.codeData;return f.default.createElement(g.default.Form,{width:960,title:r,visible:a,onCancel:l,onOk:this.handleOk,isSubmitting:n,formRef:this.formRef,data:this.formTemplate},f.default.createElement(E.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:S.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")},{validator:this.nameValidator}]},f.default.createElement(E.Input,{name:"metadata.name",autoFocus:!0,maxLength:63})),f.default.createElement(E.Form.Item,null,f.default.createElement(b.default,{data:o,title:t("CONFIGURATION_CONTENT"),onChange:this.handleData})))}}]),r}(f.default.Component);a.default=O},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(14),p=n(r(26)),m=n(r(74)),v=n(r(63)),h=n(r(830)),E=n(r(240)),y=n(r(787)),g=n(r(1345)),b=n(r(2800));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).state={data:e.getData()},e.handleData=function(t){e.setState({data:t})},e.handleOk=function(){var a=e.props.detail.name,r=e.state.data,n=r.mode,o=r.config,u=e.formTemplate;if((0,v.default)(o))return E.default.error({content:t("CONFIGURATION_CONTENT_EMPTY_DESC")});u.data=(0,l.default)({},"".concat(a,".").concat(n),o),(0,m.default)(u,'metadata.annotations["kubesphere.io/configuration-data"]',o),e.props.onOk(u)},e}return(0,u.default)(r,[{key:"getData",value:function(){return{mode:(0,p.default)(this.formTemplate,'metadata.annotations["springcloud.kubesphere.io/extension"]'),config:(0,p.default)(this.formTemplate,'metadata.annotations["kubesphere.io/configuration-data"]',"")}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.data;return f.default.createElement(y.default,{width:1400,title:t("EDIT_CONFIGURATION"),icon:"pen",visible:a,onCancel:n,onOk:this.handleOk,isSubmitting:r},f.default.createElement("div",{className:b.default.wrapper},f.default.createElement(g.default,{showSelect:!0,selectDisabled:!0,readOnly:!0,editorClassName:b.default.readOnly,data:this.getData(),title:t("ORIGINAL_CONFIGURATION_CONTENT_READONLY")}),f.default.createElement(g.default,{showSelect:!0,selectDisabled:!0,data:l,title:t("CURRENT_CONFIGURATION_CONTENT"),onChange:this.handleData})))}},{key:"formTemplate",get:function(){return(0,h.default)((0,d.toJS)(this.props.detail._originData))}}]),r}(f.default.Component);a.default=_},function(e,t,a){e.exports={wrapper:"_290-iM3J4EKkn5unochQzg",readOnly:"_1YCO0MLsFgmLSHmt0z3JP_"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(18),r(48),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(18),r(48),r(42),r(16),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(14),v=r(239),h=n(r(1)),E=n(r(26)),y=r(186),g=n(r(787)),b=r(52),S=n(r(1643));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).form=p.default.createRef(),e.historyStore=new S.default,e.fetchData=function(t){var a=t.namespace,r=t.cluster,n=t.name;e.historyStore.fetchList({cluster:r,namespace:a,labelSelector:"springcloud.kubesphere.io/configuration.name=".concat(n)})},e.getFormData=function(){return{name:e.props.detail.name,currentRevision:(0,E.default)(e.revisions,"[0].name")}},e.getRevisionOps=function(){return e.revisions.slice(1).map((function(e){var t=e.name,a=e.createTime;return{label:"".concat(t," ").concat((0,b.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss")),value:t}}))},e.handleOk=function(){if(e.form&&e.form.current){var t=e.form.current;t&&t.validate((function(){var a=t.getData(),r=(0,m.toJS)(e.revisions).find((function(e){return e.name===a.revision}));e.props.onOk({data:(0,E.default)(r,"data"),metadata:{annotations:{"kubesphere.io/configuration-data":(0,E.default)(r,'annotations["kubesphere.io/configuration-data"]')}}})}))}},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.visible&&this.fetchData(this.props.detail)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.getFormData();return p.default.createElement(g.default.Form,{formRef:this.form,data:l,width:600,title:t("ROLL_BACK"),icon:"timed-task",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},p.default.createElement(y.Form.Item,{label:t("RESOURCE_NAME")},p.default.createElement(y.Input,{name:"name",disabled:!0})),p.default.createElement(y.Form.Item,{label:t("CURRENT_REVISION_RECORD")},p.default.createElement(y.Input,{name:"currentRevision",disabled:!0})),p.default.createElement(y.Form.Item,{label:t("TARGET_REVISION_RECORD"),rules:[{required:!0,message:t("TARGET_REVISION_EMPTY_DESC")}]},p.default.createElement(y.Select,{name:"revision",placeholder:" ",options:this.getRevisionOps()})))}},{key:"revisions",get:function(){var e=this.historyStore.list,t=e.data;return e.isLoading?[]:t}},{key:"curRevisionItem",get:function(){var e=this.props.detail.resourceVersion;return this.revisions.find((function(t){return t.resourceVersion===e}))}}]),r}(p.default.Component),o.propTypes={visible:h.default.bool,detail:h.default.object,onOk:h.default.func,onCancel:h.default.func},o.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(26)),c=n(r(74)),s=r(14),i=n(r(240)),f=n(r(787)),d=n(r(435)),p=n(r(2803)),m=n(r(2905));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"custom.monitoring.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,c=e.success,s=(0,o.default)(e,["store","cluster","namespace","module","success"]),p=d.default[l]({namespace:n}),v=f.default.open(h({onOk:function(e){e&&("grafana"===e.type?(delete e.type,a.createGrafana(e,{cluster:r,namespace:n||(0,u.default)(e,"metadata.namespace")}).then((function(){f.default.close(v),i.default.success({content:t("CREATE_SUCCESSFUL")}),c&&c()}))):a.create(e,{cluster:r,namespace:n||(0,u.default)(e,"metadata.namespace")}).then((function(){f.default.close(v),i.default.success({content:t("CREATE_SUCCESSFUL")}),c&&c()})))},module:l,cluster:r,namespace:n,modal:m.default,formTemplate:p,store:a},s))}},"custom.monitoring.edit":{on:function(e){var a=e.store,r=e.detail,n=e.cluster,l=e.namespace,u=e.success,d=(0,o.default)(e,["store","detail","cluster","namespace","success"]);f.default.open(h({onOk:function(e){(0,c.default)(e,"metadata.resourceVersion",r.resourceVersion),a.update(r,e).then((function(){i.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u()}))},store:a,cluster:n,namespace:l,data:(0,s.toJS)(r._originData),modal:p.default},d))}}};a.default=E},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(42),a(16),a(4),a(22),a(23),a(57),a(17);var n=r(a(43));a(41);var l=r(a(44)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1644)),p=r(a(1679));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(a,e);var t=m(a);function a(e){var r;(0,o.default)(this,a),(r=t.call(this,e)).handleOk=(0,l.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.store.toJS(),e.next=3,r.props.onOk(t);case 3:r.store.switchEditingMode(!1);case 4:case"end":return e.stop()}}),e)})));var u=e.data,c=u.metadata,s=void 0===c?{}:c,i=u.spec,f=void 0===i?{}:i,d=f.title,m=f.description,v=f.refresh,h=f.panels,E=f.datasource,y=f.templatings,g=f.time,b=s.namespace,S=s.name;return r.store=new p.default({title:d,cluster:e.cluster,namespace:b,description:m,refresh:v,isEditing:!1,panels:h,datasource:E,templatings:y,time:g,name:S,formTemplate:e.data}),r}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.cluster,a=e.readOnly,r=e.isSubmitting,n=e.onCancel;return f.default.createElement(d.default,{store:this.store,cluster:t,readOnly:a,isSubmitting:r,onCancel:n,onOk:this.handleOk})}}]),a}(f.default.Component);t.default=v},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(6),a(84),a(137),a(9),a(10),a(85),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(5),a(6),a(84),a(28),a(137),a(9),a(10),a(4),a(22),a(85),a(7);var n=r(a(43));a(41);var l,o,u=r(a(44)),c=r(a(65)),s=r(a(36)),i=r(a(37)),f=r(a(49)),d=(r(a(66)),a(14)),p=r(a(26)),m=(l=function(){function e(){(0,s.default)(this,e),this.apiVersion="kapis/monitoring.kubesphere.io/v1beta1",(0,c.default)(this,"labelsets",o,this)}var t;return(0,i.default)(e,[{key:"getPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,r="";return t&&(r+="/clusters/".concat(t)),a&&(r+="/namespaces/".concat(a)),r}},{key:"fetchLabelSets",value:(t=(0,u.default)(n.default.mark((function e(){var t,a,r,l,o,u=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},a=Object.assign({},t),e.next=3,request.get("".concat(this.apiVersion).concat(this.getPath({}),"/targets/labelsets"),a);case 3:r=e.sent,l=(0,p.default)(r,"data")||[],o={},l.forEach((function(e){Object.keys(e).forEach((function(t){o[t]=o[t]||[],o[t].includes(e[t])||o[t].push(e[t])}))})),this.labelsets=o;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),o=(0,f.default)(l.prototype,"labelsets",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,f.default)(l.prototype,"fetchLabelSets",[d.action],Object.getOwnPropertyDescriptor(l.prototype,"fetchLabelSets"),l.prototype),l);t.default=m},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(239),p=n(r(1645));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=(0,d.inject)("monitoringStore")(l=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=m(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleEditClick=function(){e.props.monitoringStore.changeModeToEditing()},e}return(0,u.default)(r,[{key:"render",value:function(){return this.props.monitoringStore.isEditing?f.default.createElement(p.default,{type:"danger",icon:"pen",iconType:"light",onClick:this.props.onSaveClick,text:t("OK")},t("SAVE_TEMPLATE")):f.default.createElement(p.default,{type:"control",icon:"pen",iconType:"light",onClick:this.handleEditClick},t("EDIT_TEMPLATE"))}}]),r}(f.default.Component))||l)||l;a.default=v},function(e,t,a){e.exports={wrapper:"_3IYKAltq5See8I2g5kho1j",danger:"_3RaEr3lipfWerxmg8Kd3PZ"}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n,l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(239),d=r(a(2808));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,f.inject)("monitoringStore","modalStore")(n=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){e.props.monitoringStore.changeTitle(t.target.value)},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.monitoringStore,t=e.title,a=e.isEditing,r=this.props.modalStore.theme;return i.default.createElement(d.default,{theme:r,title:t,isEditing:a,onChange:this.handleChange})}}]),a}(i.default.Component))||n)||n;t.default=m},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.title,r=e.isEditing,n=e.onChange,i=e.theme;return o.default.createElement("div",{className:(0,c.default)(s.default.wrapper,(0,l.default)({},s.default.dark,"dark"===i))},r?o.default.createElement(u.Input,{onChange:n,value:a,placeholder:t("DASHBOARD_TITILE")}):o.default.createElement("span",{className:(0,c.default)(s.default.title,(0,l.default)({},s.default.dark,"dark"===i))},a))};var l=n(r(30)),o=n(r(0)),u=r(186),c=n(r(3)),s=n(r(2809))},function(e,t,a){e.exports={wrapper:"_3S-ZzwCINqG44Ke4mWbohz",title:"_1kW70ZLZ6se_m6RgePIVMz",dark:"_2KhkpRw5HC_2c9kTOeIogn"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(239),p=r(467),m=r(186),v=n(r(2811)),h=r(1646);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,d.inject)("monitoringStore")(l=(0,d.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleChange=function(t){e.props.monitoringStore.changeRefreshInterval(t)},e.options=h.refreshInterval.map((function(e){return{label:e?"".concat(t("INTERVAL")," ").concat((0,p.translateTimeAlias)(e)):t("NO_REFRESHING"),value:e}})),e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.monitoringStore.refresh;return f.default.createElement(v.default,{prefixIcon:f.default.createElement(m.Icon,{name:"refresh",type:"light"}),onChange:this.handleChange,options:this.options,value:e})}}]),r}(f.default.Component))||l)||l;a.default=y},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.default.createElement(o.Select,(0,n.default)({className:u.default.wrapper},e))};var n=r(a(315)),l=r(a(0)),o=a(186),u=r(a(2812))},function(e,t,a){e.exports={wrapper:"_3Bc9dCYAA0wO9AGEpIOcSG"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51));r(45),r(5),r(18),r(442),r(2814),r(42),r(4),r(23),r(57),r(24),r(17),r(64);var i,f=n(r(0)),d=r(239),p=n(r(243)),m=r(467),v=n(r(2817)),h=r(1646);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){return new Date(e).toISOString()},g=(0,d.inject)("monitoringStore")(i=(0,d.observer)(i=function(e){(0,u.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleQuickSelect=function(t){e.props.monitoringStore.changeTimeRange(t)},e.handeCustomSelect=function(t){var a=t.startTime,r=t.endTime;e.props.monitoringStore.changeTimeRange({from:y(a),to:y(r)})},e.options=h.recentTimeRange.map((function(e){return{label:"".concat(t("LAST")," ").concat((0,m.translateTimeAlias)(e)),value:{from:"now-".concat(e),to:"now"}}})),e.format=function(){var a=e.props.monitoringStore.time,r=a.to,n=a.from;return"now"===r?"".concat(t("LAST")," ").concat((0,m.translateTimeAlias)(n.replace("now-",""))):"".concat((0,p.default)(n).format("YYYY-MM-DD HH:mm:ss")," ~ ").concat((0,p.default)(r).format("YYYY-MM-DD HH:mm:ss"))},e}return(0,o.default)(r,[{key:"generateTimeRange",value:function(){var e=this.props.monitoringStore.time,t=e.from,a=e.to;return"now"===a?{startTime:Date.now()-(0,m.getMsFromTimeAlias)(t.replace("now-","")),endTime:Date.now()}:{startTime:new Date(t).valueOf(),endTime:new Date(a).valueOf()}}},{key:"render",value:function(){var e=this.props.monitoringStore.time,t=e.from,a=e.to;return f.default.createElement(v.default,{key:t+a,recentOpts:this.options,timeRange:this.generateTimeRange(),onRecentSelect:this.handleQuickSelect,onCustomSubmit:this.handeCustomSelect,format:this.format})}}]),r}(f.default.Component))||i)||i;a.default=g},,,,function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(30)),c=l(r(96)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51));r(45),r(5),r(18),r(442),r(42),r(4),r(23),r(57),r(17);var m=l(r(26)),v=l(r(63)),h=l(r(1)),E=n(r(0)),y=l(r(3)),g=r(186),b=l(r(243)),S=l(r(240)),_=l(r(2818));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=O(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={showDropdown:!1},e.toggleDropdown=function(){e.setState({showDropdown:!e.state.showDropdown})},e.hideDropdown=function(){e.setState({showDropdown:!1})},e.handleRecentClick=function(t){var a=t.currentTarget.dataset.index,r=e.props,n=r.recentOpts;(0,r.onRecentSelect)((0,m.default)(n,"[".concat(a,"].value")))},e.handleSubmit=function(a){var r=a.startTime,n=a.endTime,l=a.interval,o=(0,c.default)(r,1)[0],u=(0,c.default)(n,1)[0];o>u?S.default.error({content:t("TIMERANGE_SELECTOR_MSG")}):e.props.onCustomSubmit({startTime:o,endTime:u,interval:l})},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.state.showDropdown,t=this.props,a=t.format,r=t.timeRange,n=a(t.recent||{},r);return E.default.createElement("div",{className:(0,y.default)(_.default.wrapper,(0,u.default)({},_.default.active,e))},E.default.createElement("div",{className:(0,y.default)(_.default.mask,(0,u.default)({},_.default.active,e)),onClick:this.hideDropdown}),E.default.createElement("div",{className:_.default.content,onClick:this.toggleDropdown},E.default.createElement(g.Icon,{name:"calendar",type:"light"}),E.default.createElement("span",null,n),E.default.createElement(g.Icon,{name:"chevron-down",type:"light"})),this.renderDropDown())}},{key:"renderDropDown",value:function(){return E.default.createElement("div",{className:_.default.dropdown},this.renderRecentOpts(),this.renderCustomOpts())}},{key:"renderRecentOpts",value:function(){var e=this,a=this.props.recentOpts;return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:_.default.title},t("SELECT_TIME_RANGE")),E.default.createElement("div",{className:_.default.recentWrapper},a.map((function(t,a){var r=t.label;return E.default.createElement("span",{onClick:e.handleRecentClick,"data-index":a,key:a},r)}))))}},{key:"renderCustomOpts",value:function(){var e=this.props,a=e.timeRange,r=e.interval,n=e.intervalOpts,l=a.startTime,u=a.endTime,c={enableSeconds:!0,enableTime:!0,dateFormat:"Y-m-d H:i:S"};return E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:_.default.title},t("CUSTOM_TIME_RANGE")),E.default.createElement(g.Form,{data:{interval:r,startTime:[l],endTime:[u]},onSubmit:this.handleSubmit},E.default.createElement(g.Form.Item,{label:t("START_TIME")},E.default.createElement(g.DatePicker,(0,o.default)({name:"startTime"},c))),E.default.createElement(g.Form.Item,{label:t("END_TIME")},E.default.createElement(g.DatePicker,(0,o.default)({name:"endTime"},c))),E.default.createElement("div",{className:_.default.footer},(0,v.default)(n)||E.default.createElement(g.Form.Item,{label:t("SAMPLING_INTERVAL")},E.default.createElement(g.Select,{name:"interval",className:_.default.select,options:n})),E.default.createElement("div",null,E.default.createElement(g.Button,{htmlType:"submit"},t("OK"))))))}}]),r}(E.Component);C.propTypes={recent:h.default.object,timeRange:h.default.object,format:h.default.func,recentOpts:h.default.array,interval:h.default.string,intervalOpts:h.default.array,onRecentSelect:h.default.func,onCustomSubmit:h.default.func},C.defaultProps={recent:null,timeRange:{startTime:Date.now(),endTime:Date.now()},format:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.count,r=e.unit,n=arguments.length>1?arguments[1]:void 0,l=n.startTime,o=void 0===l?0:l,u=n.endTime,c=void 0===u?0:u;return a?"".concat(t("LAST")," ").concat(a," ").concat(t(r)):"".concat((0,b.default)(o).format("YYYY/MM/DD HH:mm:ss")," ~ ").concat((0,b.default)(c).format("YYYY/MM/DD HH:mm:ss"))},recentOpts:[{label:"Last 5 Minutes",value:{count:5,unit:"Minutes"}}],intervalOpts:[],onRecentSelect:function(){},onCustomSummit:function(){}};var T=C;a.default=T},function(e,t,a){e.exports={wrapper:"_2kNQZvZCCOrdYLr3lW_M0M",active:"_3ze5VvZgAQIFkqqU43TECt",dropdown:"_38qK6AG6_ltW34wzqG2QjC",mask:"_1e1_OUeku7JT9XcEh-uO-Q",content:"zGUNaQOOt-GtiMetfKDgX",title:"_3YE7OaQAST3rEZTGrNXeD2",recentWrapper:"_2FjFhDG37PJi2iTV2HWjv0",footer:"_1_M2ap0yCRe5IW3k3h55YP"}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(6),a(18),a(9),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(6),a(18),a(42),a(9),a(4),a(23),a(57),a(17),a(7);var n,l,o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(49)),d=r(a(0)),p=a(239),m=a(14),v=r(a(2820));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("monitoringStore","modalStore")(n=(0,p.observer)((l=function(e){(0,c.default)(a,e);var t=h(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleDelete=function(t){e.monitors[t].stopMonitoring(),e.textMonitorsRow.deleteTextMonitorByIndex(t)},e.handleEdit=function(t){var a=e.textMonitorsRow.monitors[t];e.props.modalStore.selectMonitor(a)},e.handleAdd=function(){var t=e.monitoringStore.generateNewTextMonitor();e.modalStore.selectMonitor(t)},e.handleSort=function(t){var a=t.map((function(e){return e.monitor}));e.textMonitorsRow.updateMonitors(a)},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.monitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"componentWillUnmount",value:function(){this.monitors.forEach((function(e){return e.stopMonitoring()}))}},{key:"componentDidUpdate",value:function(){var e=this;this.monitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"render",value:function(){var e=this.props.monitoringStore.isEditing,t=this.textMonitorData,a=this.monitors.map((function(e){return{monitor:e}}));return d.default.createElement(v.default,{isEditing:e,monitors:a,textPanels:t,onSort:this.handleSort,onDelete:this.handleDelete,onEdit:this.handleEdit,onAdd:this.handleAdd})}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}},{key:"modalStore",get:function(){return this.props.modalStore}},{key:"textMonitorsRow",get:function(){return this.monitoringStore.textMonitors}},{key:"monitors",get:function(){return this.textMonitorsRow.monitors}},{key:"textMonitorData",get:function(){return this.monitors.map((function(e){var t=e.config||{};return{title:t.title,id:t.id,value:e.stat,errorMessage:e.errorMessage}}))}}]),a}(d.default.Component),(0,f.default)(l.prototype,"monitoringStore",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"monitoringStore"),l.prototype),(0,f.default)(l.prototype,"modalStore",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"modalStore"),l.prototype),(0,f.default)(l.prototype,"textMonitorsRow",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"textMonitorsRow"),l.prototype),(0,f.default)(l.prototype,"monitors",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"monitors"),l.prototype),(0,f.default)(l.prototype,"textMonitorData",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"textMonitorData"),l.prototype),n=l))||n)||n;t.default=E},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.textPanels,a=e.isEditing,r=e.onAdd,f=e.onDelete,d=e.onEdit,p=e.onSort,m=e.monitors;return l.default.createElement("div",null,l.default.createElement(o.ReactSortable,{list:m,setList:p,className:i.default.wrapper,disabled:!a,key:a,animation:200},t.map((function(e,t){var r=e.title,o=e.isLoading,p=e.value,m=e.id,v=e.errorMessage;return l.default.createElement("div",{key:m,className:(0,c.default)((0,n.default)({},i.default.editting,a))},l.default.createElement(s.default,{errorMessage:v},l.default.createElement("div",{className:i.default.innner},a&&l.default.createElement("div",{className:i.default.tools},l.default.createElement(u.Icon,{name:"pen",size:20,type:"light",clickable:!0,onClick:function(){return d(t)}}),l.default.createElement(u.Icon,{name:"trash",size:20,type:"light",clickable:!0,onClick:function(){return f(t)}})),l.default.createElement("div",{className:i.default.content},l.default.createElement("h6",null,p),l.default.createElement("p",null,r),o&&l.default.createElement("span",{className:i.default.loadingTip},l.default.createElement(u.Loading,{size:10}))))))}))),a&&l.default.createElement("div",{className:i.default.wrapper},l.default.createElement("div",{onClick:r,className:i.default.addButton},l.default.createElement(u.Icon,{name:"add",size:20,type:"light"}))))};var n=r(a(30));a(18);var l=r(a(0)),o=a(1647),u=a(186),c=r(a(3)),s=r(a(1184)),i=r(a(2823))},,function(e,t,a){e.exports={wrapper:"_30EfsRi0WbMvAGkUtPp_pX",error:"bvYl6q_2buGchG0_oOgDB"}},function(e,t,a){e.exports={wrapper:"_1JNcscoEqUrPOfgH9bogzK",content:"_1rxqdHBClXet0rKccVsHtF",loadingTip:"_1Sbq1lYD-XsgcJkNcfkTMx",innner:"ZiUxG2dpZ98DolM28G884",editting:"_1KqodXGORr8QmNaNsSwc6n",tools:"_3V99brls9xcBq15s0iRdil",addButton:"_18he9_SXyr20t3iXb5JdBC"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(28),r(42),r(9),r(4),r(23),r(57),r(17);var o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(49)),m=l(r(0)),v=r(239),h=r(14),E=n(r(2825)),y=n(r(2827)),g=n(r(2840)),b=n(r(2851));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _={singlestat:y.default,graph:g.default,table:b.default},O=(0,v.inject)("modalStore","monitoringStore")(o=(0,v.observer)((u=function(e){(0,i.default)(r,e);var a=S(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).temporaryMonitor=e.getTemporaryMonitor(),e.handleCancel=function(){e.props.modalStore.unSelectMonitor()},e.handleSubmit=function(){e.isNewMonitor?e.monitor.belongTo.push(e.temporaryMonitor):e.monitor.config=e.temporaryMonitor.config,e.props.modalStore.unSelectMonitor()},e}return(0,s.default)(r,[{key:"getTemporaryMonitor",value:function(){return this.isNewMonitor?this.monitor:this.monitor.clone()}},{key:"componentDidMount",value:function(){this.temporaryMonitor.monitoring(this.props.monitoringStore)}},{key:"componentWillUnmount",value:function(){this.temporaryMonitor.stopMonitoring()}},{key:"render",value:function(){var e=_[this.monitor.type];return m.default.createElement(E.default,{formData:this.temporaryMonitor.config,onSubmit:this.handleSubmit,onCancel:this.handleCancel},e?m.default.createElement(e,{monitor:this.temporaryMonitor}):t("MONITOR_TYPE_NO_SUPPORT"))}},{key:"monitor",get:function(){return this.props.modalStore.selectedMonitor}},{key:"isNewMonitor",get:function(){var e=this.monitor;return!e.belongTo.has(e)}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"isNewMonitor",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"isNewMonitor"),u.prototype),o=u))||o)||o;a.default=O},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.formData,a=e.children,r=e.onCancel,u=e.onSubmit;return n.default.createElement(l.Form,{className:o.default.wrapper,data:t,onSubmit:u},n.default.createElement("div",{className:o.default.form},a),n.default.createElement("div",{className:o.default.formFooter},n.default.createElement(l.Button,{type:"control",icon:"close",iconType:"light",onClick:r}),n.default.createElement(l.Button,{type:"control",icon:"check",iconType:"light",htmlType:"submit"})))};var n=r(a(0)),l=a(186),o=r(a(2826))},function(e,t,a){e.exports={wrapper:"_3ZeYUgWPbewvTTUqMUOecy",form:"_7inMxqFIqjVzbHwr-qNm9",formFooter:"_3SNcsZ0T9tkGjtowg76Bzz"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(18),r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(9),r(4),r(23),r(57),r(17);var o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(49)),m=l(r(0)),v=r(239),h=r(14),E=n(r(26)),y=n(r(1346)),g=r(1347),b=r(2833),S=n(r(1112)),_=n(r(2837)),O=n(r(1184));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.inject)("monitoringStore","labelStore")(o=(0,v.observer)((u=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLabelSearch=function(t){var a=e.props.monitoringStore,r=a.cluster,n=a.namespace,l=e.props.monitoringStore.getTimeRange(),o=l.from,u=l.to;e.props.labelStore.fetchLabelSets({cluster:r,namespace:n,metric:t,start:Math.floor(o.valueOf()/1e3),end:Math.floor(u.valueOf()/1e3)})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.monitoringStore.fetchMetadata()}},{key:"render",value:function(){var e=this.stat,a=(0,E.default)(this.monitor,"config.title",""),r=(0,h.toJS)(this.props.labelStore.labelsets);return m.default.createElement(y.default,{preview:m.default.createElement(O.default,{errorMessage:this.monitor.errorMessage},m.default.createElement(b.SingleStatGraph,{singleState:e,title:a})),sidebar:m.default.createElement(g.GraphTextInput,{type:"singlestat"}),main:m.default.createElement(S.default,{label:t("DATA")},m.default.createElement(_.default,{supportMetrics:this.supportMetrics,labelsets:r,onLabelSearch:this.handleLabelSearch}))})}},{key:"monitor",get:function(){return this.props.monitor}},{key:"supportMetrics",get:function(){return this.props.monitoringStore.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}}))}},{key:"stat",get:function(){return this.monitor.stat}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"supportMetrics",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"supportMetrics"),u.prototype),(0,p.default)(u.prototype,"stat",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"stat"),u.prototype),o=u))||o)||o;a.default=T},function(e,t,a){e.exports={wrapper:"_3Stre0zYy7b8sCvF-xGly_",preview:"_1GfNd1Y_MUbgYSx9yzgB0h",form:"_3EOZI4PcAQPnwR-RVaCUSg",sidebar:"_2-dZfxhdtX-1OfJmQ5eWnQ",resource:"_2YOLD4b02Mh-Oj4kRCDrcJ"}},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.type,r={singlestat:{i18n:t("SINGLE_STATE_CHART"),icon:"text"},line:{i18n:t("LINE_CHART"),icon:"linechart"},bar:{i18n:t("BAR_CHART"),icon:"barchart"},table:{i18n:t("TABLE"),icon:"table-chart"}},n=r[a].icon,c=r[a].i18n;return l.default.createElement("div",{className:u.default.wrapper},l.default.createElement("header",null,t("CHART_TYPES")),l.default.createElement("div",null,l.default.createElement(o.Icon,{name:n,type:"light",size:40}),l.default.createElement("h3",null,c)))};var l=n(r(0)),o=r(186),u=n(r(2830))},function(e,t,a){e.exports={wrapper:"_2145NKyaXROReR0eN6-PBI"}},function(e,t,a){"use strict";a(15);var r=a(20);a(73),a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.options,a=e.value,r=e.onChange;return l.default.createElement("div",{className:s.default.wrapper},t.map((function(e,t){return l.default.createElement("div",{className:(0,o.default)((0,n.default)({},s.default.select,(0,u.default)(e.value.join(","),a.join(",")))),key:(0,c.default)(e.value)?e.value.join(","):t,onClick:function(){r(e.value)}},l.default.createElement("h3",null,e.label),l.default.createElement("div",{className:s.default.colors},e.value.map((function(e){return l.default.createElement("div",{key:e,style:{backgroundColor:e}})}))))})))};var n=r(a(30));a(73),a(18);var l=r(a(0)),o=r(a(3)),u=r(a(806)),c=r(a(60)),s=r(a(2832))},function(e,t,a){e.exports={wrapper:"_2li-l2mP2fMG1QZq-ZLncF",select:"_20S0JG5Gyd1kQm4yX006oO",colors:"_3DefZS0H3j5fxqBHp5Ejhd"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SingleStatGraph",{enumerable:!0,get:function(){return n.default}});var n=r(a(2834))},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.singleState,a=e.title;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("h3",null,n.default.createElement("span",null,t)),n.default.createElement("p",null,a))};var n=r(a(0)),l=r(a(2835))},function(e,t,a){e.exports={wrapper:"_3t0RsORTnxwuLWyQZfTZC9"}},function(e,t,a){e.exports={wrapper:"_3H8zHTGkN2UxY70Ttk_aKT"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51));r(45),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var d=n(r(0)),p=r(186),m=l(r(799)),v=r(794),h=l(r(1270)),E=l(r(1054)),y=l(r(1113)),g=l(r(2839));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=Object.keys(v.unitTransformMap).map((function(e){return{label:e,value:e}})),_=function(e){(0,s.default)(r,e);var a=b(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){return d.default.createElement("div",{className:g.default.wrapper},d.default.createElement("div",{className:g.default.config},d.default.createElement(p.Form.Item,{rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},d.default.createElement(E.default,{name:"title"},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("GRAPH_NAME"),tips:""},d.default.createElement(p.Input,{className:g.default.input,value:r,onChange:a}))}))),d.default.createElement(p.Form.Item,null,d.default.createElement(E.default,{name:"format",defaultValue:S[0]},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("UNIT"),tips:""},d.default.createElement(p.Select,{options:S,value:r,onChange:a}))}))),d.default.createElement(p.Form.Item,null,d.default.createElement(E.default,{name:"decimals",defaultValue:0},(function(e){var a=e.onChange,r=e.value;return d.default.createElement(y.default,{label:t("DECIMALS"),tips:""},d.default.createElement(m.default,{value:r,max:5,min:0,onChange:a}))})))),d.default.createElement("div",{className:g.default.metric},d.default.createElement(p.Form.Item,null,d.default.createElement(h.default,(0,o.default)({name:"targets[0].expr"},this.props)))))}}]),r}(d.Component);a.default=_},function(e,t,a){e.exports={wrapper:"_2C1fCSF8KpDwIEut_2MgtV",label:"QkppNQvAINnnNmxn5RPP6",content:"_39Ri6GN7ykbXXIM_Ff6zud"}},function(e,t,a){e.exports={wrapper:"Ak6-eMDkfF3C5TJyQphR8",config:"_2F_uvfrHJwigmWBLGegJ7I",metric:"_35j6cKLTeLYz6_IGhHcdd4",input:"ondUZb0hG43EmAsEFaDEn"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(12),r(109),r(5),r(18),r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(42),r(9),r(4),r(23),r(57),r(17);var o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(49)),m=l(r(0)),v=r(239),h=r(14),E=r(186),y=n(r(816)),g=r(72),b=n(r(1346)),S=r(1347),_=n(r(1054)),O=n(r(1648)),C=n(r(2845)),T=n(r(1184)),R=n(r(1112)),D=n(r(2847));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,v.inject)("monitoringStore","labelStore")(o=(0,v.observer)((u=function(e){(0,i.default)(r,e);var a=N(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLabelSearch=function(t){var a=e.props.monitoringStore,r=a.cluster,n=a.namespace,l=e.props.monitoringStore.getTimeRange(),o=l.from,u=l.to;e.props.labelStore.fetchLabelSets({cluster:r,namespace:n,metric:t,start:Math.floor(o.valueOf()/1e3),end:Math.floor(u.valueOf()/1e3)})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.props.monitoringStore.fetchMetadata()}},{key:"render",value:function(){var e=this.monitor.config,a=e.title,r=e.lines,n=e.bars,l=e.stack,o=e.description,u=this.monitor.errorMessage,c=this.monitor.legends,s=(0,h.toJS)(this.props.labelStore.labelsets);return m.default.createElement(b.default,{preview:m.default.createElement(T.default,{errorMessage:u},m.default.createElement(C.default,{title:a,description:o},m.default.createElement(O.default,{line:r,bar:n,stacked:l,timeRange:this.timeRange,valueFormatter:this.monitor.valueFormatter,legends:c,data:this.monitor.graphData}))),sidebar:m.default.createElement(m.default.Fragment,null,m.default.createElement(S.GraphTextInput,{type:this.monitor.config.lines?"line":"bar"}),m.default.createElement(R.default,{className:"margin-t12",label:t("GRAPH_TYPES")},m.default.createElement(E.Form.Item,null,m.default.createElement(_.default,{name:"stack",debounce:100},(function(e){var a=e.onChange,r=e.value;return m.default.createElement(y.default,{defaultValue:!1,value:r,onChange:a,options:[{value:!0,label:t("STACKED_GRAPH_TYPE"),icon:"barchart",description:t("STACKED_GRAPH_TYPE_DESC")},{value:!1,label:t("SINGLE_GRAPH_TYPE_NAME"),icon:"barchart",description:t("SINGLE_GRAPH_TYPE")}]})})))),m.default.createElement(R.default,{label:t("GRAPH_COLORS")},m.default.createElement(E.Form.Item,null,m.default.createElement(_.default,{name:"colors",defaultValue:0,debounce:100},(function(e){var a=e.onChange,r=e.value;return m.default.createElement(S.ThemeSelector,{onChange:a,value:r,options:g.MONITOR_GRAPH_COLORS.map((function(e){return{label:t(e.nameI18nKey),value:e.colors}}))})}))))),main:m.default.createElement(D.default,{supportMetrics:this.supportMetrics,labelsets:s,onLabelSearch:this.handleLabelSearch})})}},{key:"monitor",get:function(){return this.props.monitor}},{key:"supportMetrics",get:function(){return this.props.monitoringStore.targetsMetadata.map((function(e){return{value:e.metric,desc:e.help,type:e.type}}))}},{key:"timeRange",get:function(){return this.monitor.timeRange}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),(0,p.default)(u.prototype,"supportMetrics",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"supportMetrics"),u.prototype),o=u))||o)||o;a.default=k},,,,function(e,t,a){e.exports={wrapper:"O3kTaWXsEhAjMYeAvOzL1"}},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.children;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,n.default.createElement("h3",null,t),n.default.createElement("p",null,a)),r)},a(12),a(109);var n=r(a(0)),l=r(a(2846))},function(e,t,a){e.exports={wrapper:"NdXgZ7ysaYFLK9YlXlK3-"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51));r(45),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var f=n(r(0)),d=l(r(26)),p=r(186),m=l(r(799)),v=r(794),h=l(r(1650)),E=l(r(1651)),y=l(r(1112)),g=l(r(1652)),b=l(r(1054)),S=l(r(1113)),_=l(r(2850));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=Object.keys(v.unitTransformMap).map((function(e){return{label:e,value:e}})),T=function(e){(0,c.default)(r,e);var a=O(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.supportMetrics,r=e.labelsets,n=e.onLabelSearch;return f.default.createElement("div",{className:_.default.wrapper},f.default.createElement(y.default,{label:t("BASIC_INFORMATION")},f.default.createElement(p.Form.Item,null,f.default.createElement(p.Columns,null,f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(b.default,{name:"title"},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(S.default,{label:t("GRAPH_NAME")},f.default.createElement(p.Input,{value:r,onChange:a}))})))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(b.default,{name:"description"},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(S.default,{label:t("DESCRIPTION")},f.default.createElement(p.Input,{value:r,onChange:a}))}))))))),f.default.createElement(y.default,{label:t("DATA")},f.default.createElement(p.Form.Item,null,f.default.createElement(h.default,{name:"targets",header:function(e){var a=e.add,r=e.value;return f.default.createElement(g.default,{right:f.default.createElement(p.Button,{type:"control",onClick:function(){return a({step:(0,d.default)(r,"[0].step",""),legendFormat:"",expr:"",refId:Math.max.apply(null,r.map((function(e){return e.refId})))+1})}},t("ADD"))})}},(function(e){var t=e.formItemName,l=e.onDelete,o=e.onUpClick,u=e.onDownClick,c=e.index;return f.default.createElement(E.default,{key:c,onDelete:l,onUpClick:o,onDownClick:u,prefix:t,labelsets:r,onLabelSearch:n,supportMetrics:a})})))),f.default.createElement(y.default,{label:t("Y_AXIS")},f.default.createElement(p.Columns,null,f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(b.default,{name:"yaxes[0].format",debounce:100},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(S.default,{label:t("UNIT"),tips:""},f.default.createElement(p.Select,{defaultValue:"none",options:C,value:r,onChange:a}))})))),f.default.createElement(p.Column,null,f.default.createElement(p.Form.Item,null,f.default.createElement(b.default,{name:"yaxes[0].decimals",debounce:100},(function(e){var a=e.onChange,r=e.value;return f.default.createElement(S.default,{label:t("DECIMALS"),tips:""},f.default.createElement(m.default,{defaultValue:0,value:r,max:5,min:0,onChange:a}))})))))))}}]),r}(f.Component);a.default=T},function(e,t,a){e.exports={wrapper:"_1yTATo3lD_7rwY6lDudrCg",sort:"_1EFKSiYd2WrRafk0f3869_",form:"_3zEEtuQ4RATqr1QWLM324p",firstLine:"_3pMxYSBlRPq-WUsskbA7Tq",name:"_3aiu8eoQvrvOlWJ1SOMEHc",interval:"sCj97pEm23Tzvk_osJXDd",exprInput:"_28BUdWgdtRiDcK_TmmW9Cn"}},function(e,t,a){e.exports={wrapper:"_14rVNDNOZeNfMTOdh6yKjR"}},function(e,t,a){},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(9),r(4),r(23),r(57),r(17);var o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(49)),m=l(r(0)),v=r(239),h=r(14),E=r(186),y=n(r(799)),g=n(r(1650)),b=n(r(1346)),S=r(1347),_=n(r(1112)),O=n(r(1651)),C=n(r(2852)),T=n(r(1652)),R=n(r(1054)),D=n(r(1113));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,v.inject)("monitoringStore")(o=(0,v.observer)((u=function(e){(0,i.default)(r,e);var a=N(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){return m.default.createElement(b.default,{preview:m.default.createElement("div",null),sidebar:m.default.createElement(S.GraphTextInput,{type:"table"}),main:m.default.createElement(m.default.Fragment,null,m.default.createElement(_.default,{label:t("DATA")},m.default.createElement(E.Form.Item,null,m.default.createElement(g.default,{name:"targets",header:function(e){var a=e.onAdd;return m.default.createElement(T.default,{right:m.default.createElement(E.Button,{type:"control",onClick:a},t("ADD"))})}},(function(e){var t=e.formItemName,a=e.onDelete,r=e.onUpClick,n=e.onDownClick;return m.default.createElement(O.default,{onDelete:a,onUpClick:r,onDownClick:n,prefix:t})})))),m.default.createElement(_.default,{label:t("TABLE_SETTINGS")},m.default.createElement(E.Form.Item,null,m.default.createElement(g.default,{name:"styles",header:function(e){var a=e.onAdd;return m.default.createElement(T.default,{left:m.default.createElement(E.Form.Item,null,m.default.createElement(R.default,{name:"expr"},(function(e){var a=e.onChange,r=e.value;return m.default.createElement("div",null,m.default.createElement(D.default,{label:t("PER_PAGE_LINES"),tips:""},m.default.createElement(y.default,{value:r,onChange:a,defaultValue:100})))}))),right:m.default.createElement(E.Button,{type:"control",onClick:a},t("ADD"))})}},(function(e){var t=e.formItemName,a=e.onDelete,r=e.onUpClick,n=e.onDownClick;return m.default.createElement(C.default,{onDelete:a,onUpClick:r,onDownClick:n,prefix:t})})))))})}},{key:"monitor",get:function(){return this.props.monitor}}]),r}(m.Component),(0,p.default)(u.prototype,"monitor",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitor"),u.prototype),o=u))||o)||o;a.default=k},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(320),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.prefix,r=e.onUpClick,n=e.onDownClick,l=e.onDelete;return o.default.createElement("div",{className:f.default.wrapper},o.default.createElement("div",{className:f.default.sort},o.default.createElement(u.Icon,{name:"sort-ascending",onClick:r}),o.default.createElement(u.Icon,{name:"sort-descending",onClick:n})),o.default.createElement("div",{className:f.default.form},o.default.createElement("div",{className:f.default.firstLine},o.default.createElement("div",null,o.default.createElement(u.Form.Item,{className:f.default.name},o.default.createElement(c.default,{name:"".concat(a,".alias")},(function(e){var a=e.onChange,r=e.value;return o.default.createElement("div",null,o.default.createElement(s.default,{label:t("COLUMN_NAME"),tips:""},o.default.createElement(u.Input,{className:f.default.input,value:r,onChange:a})))}))),o.default.createElement(u.Form.Item,{className:f.default.interval},o.default.createElement(c.default,{name:"".concat(a,".pattern")},(function(e){var a=e.onChange,r=e.value;return o.default.createElement("div",null,o.default.createElement(s.default,{label:t("FIELD_NAME"),tips:""},o.default.createElement(u.Input,{className:f.default.input,value:r,onChange:a})))})))),o.default.createElement(u.Icon,{name:"trash",onClick:l})),o.default.createElement("div",{className:f.default.exprInput},o.default.createElement(u.Form.Item,null,o.default.createElement(c.default,{name:"".concat(a)},(function(e){var a=e.onChange,r=e.value;return o.default.createElement(s.default,{label:t("DISPLAY_FORMAT"),tips:""},o.default.createElement(i.default,{value:r,onChange:function(e){return a(p(p({},r),e))}}))}))))))};var l=n(r(30));r(12),r(11),r(6),r(28),r(320),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=n(r(0)),u=r(186),c=n(r(1054)),s=n(r(1113)),i=n(r(2853)),f=n(r(2868));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(194)),d=r(186),p=r(14),m=n(r(2854)),v=n(r(2867));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={shouldInputModalShow:!1},e.handleCustomClick=function(){e.setState({shouldInputModalShow:!0})},e.handleCustomColseClick=function(){e.setState({shouldInputModalShow:!1})},e.handleModalSubmit=function(t){e.setState({shouldInputModalShow:!1}),e.props.onChange(t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state.shouldInputModalShow,a=this.props.value;return i.default.createElement("div",null,i.default.createElement("div",{className:v.default.wrapper},i.default.createElement("div",null,this.renderItems()),i.default.createElement("div",{onClick:this.handleCustomClick},i.default.createElement("span",{className:v.default.button},i.default.createElement(d.Icon,{name:"pen"}),t("DISPLAY_FORMAT")))),i.default.createElement(m.default,{data:(0,p.toJS)(a),visible:e,onCancel:this.handleCustomColseClick,onOk:this.handleModalSubmit}))}},{key:"renderItems",value:function(){var e=this.props.value;return[{key:"type",label:t("TYPE")},{key:"unit",label:t("UNIT"),visible:function(e,t){return"number"===t.type}},{key:"dateFormat",label:t("TIME_FORMAT"),visible:function(e,t){return"date"===t.type}},{key:"decimals",label:t("DECIMALS"),visible:function(e,t){return"number"===t.type}},{key:"colorMode",label:function(e){return"t('THRESHOLD_FILL') (".concat(e,")")},visible:function(e,t){return"number"===t.type&&"disabled"!==e},value:function(e,t){return i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:v.default.colorCycle,style:{backgroundColor:t.colors[0]}}),i.default.createElement("span",null,"<"),i.default.createElement("span",null,t.thresholds[0]),i.default.createElement("span",null,"<"),i.default.createElement("span",{className:v.default.colorCycle,style:{backgroundColor:t.colors[1]}}),i.default.createElement("span",null,"<"),i.default.createElement("span",null,t.thresholds[1]),i.default.createElement("span",null,"<"),i.default.createElement("span",{className:v.default.colorCycle,style:{backgroundColor:t.colors[2]}}))}}].map((function(t){if((0,f.default)(t.visible)&&!t.visible(e[t.key],e))return!1;var a=(0,f.default)(t.value)?t.value(e[t.key],e):e[t.key];if(!a)return!1;var r=(0,f.default)(t.label)?t.label(e[t.key],e):t.label;return i.default.createElement("span",{key:t.key,className:v.default.item},r,": ",a)}))}}]),r}(i.default.Component);a.default=E},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(241)),d=n(r(787)),p=r(186),m=n(r(799)),v=n(r(2855)),h=n(r(2866));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).form=i.default.createRef(),t.handleTypeChange=function(e){t.setState({type:e})},t.onOk=function(){var e,a=t.props.data.type;"date"===a?e=(0,f.default)(t.props.data,["type","dateFormat"]):"number"===a?e=(0,f.default)(t.props.data,["type","decimals","unit","colorMode","thresholds","colors"]):"string"===a&&(e=(0,f.default)(t.props.data,["type"])),t.form.current.validator((function(){return t.props.onOk(e)}))},t.state={type:e.data.type},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.visible,n=e.onCancel,l=this.state.type;return i.default.createElement(d.default,{width:960,title:t("CUSTOM_DISPLAY_STYLE"),description:t("CUSTOM_DISPLAY_MODAL_DESC"),icon:"table-chart",visible:r,okText:t("OK"),onCancel:n,onOk:this.onOk},i.default.createElement(p.Form,{data:a,ref:this.form},i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("DATA_TYPE")},i.default.createElement(p.Select,{name:"type",onChange:this.handleTypeChange,options:[{label:"string",value:"string"},{label:"date",value:"date"},{label:"number",value:"number"}]}))),i.default.createElement(p.Column,null)),"number"===l&&i.default.createElement("div",null,i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("UNIT")},i.default.createElement(p.Select,{defaultValue:"null",name:"unit",options:[{label:"Bytes",value:"Bytes"},{label:"null",value:"null"}]}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{rules:[{required:!0}],label:t("DECIMALS")},i.default.createElement(m.default,{defaultValue:0,name:"decimals"})))),i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("THRESHOLD_FILL"),desc:t("THRESHOLD_FILL_DESC")},i.default.createElement(p.Select,{name:"colorMode",defaultValue:"disabled",options:[{label:"cell",value:"cell"},{label:"disabled",value:"disabled"},{label:"value",value:"value"}]}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("HIGHT_RULES")},i.default.createElement("div",{className:h.default.tableColorStyle},i.default.createElement(p.Form.Item,{className:h.default.thresholds},i.default.createElement(v.default,{name:"colors[0]",defaultValue:"#fff"})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:h.default.thresholds,rules:[{required:!0}]},i.default.createElement(m.default,{name:"thresholds[0]",defaultValue:0})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:h.default.thresholds},i.default.createElement(v.default,{defaultValue:"#fff",name:"colors[1]"})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:h.default.thresholds,rules:[{required:!0}]},i.default.createElement(m.default,{name:"thresholds[1]",defaultValue:0})),i.default.createElement("span",null," < "),i.default.createElement(p.Form.Item,{className:h.default.thresholds},i.default.createElement(v.default,{name:"colors[2]",defaultValue:"#fff"}))))))),"date"===l&&i.default.createElement("div",null,i.default.createElement(p.Columns,null,i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("TIME_FORMAT"),rules:[{required:!0}]},i.default.createElement(p.Select,{name:"dateFormat",defaultValue:"YYYY/MM/DD HH:mm:ss",options:[{label:"YYYY/MM/DD HH:mm:ss",value:"YYYY/MM/DD HH:mm:ss"}]})))))))}}]),r}(i.default.Component);a.default=y},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=a(5760),f=r(a(3)),d=r(a(2865));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={shouldMenuShow:!1},e.startSelect=function(){e.setState({shouldMenuShow:!0})},e.changeComplete=function(t){var a=t.hex;e.setState({shouldMenuShow:!1}),e.props.onChange(a)},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.className,r=this.state.shouldMenuShow;return s.default.createElement("div",{className:(0,f.default)(d.default.wrapper,a)},s.default.createElement("div",{style:{backgroundColor:t},onClick:this.startSelect}),r?s.default.createElement("div",{className:d.default.menu},s.default.createElement(i.SwatchesPicker,{onChangeComplete:this.changeComplete})):null)}}]),a}(s.default.Component);t.default=m},,,,,,,,,,function(e,t,a){e.exports={wrapper:"_2DqLE96MTxZgrmRaNYl3JI",menu:"_2YfBS7zYBSFVfBIOJT917U"}},function(e,t,a){e.exports={tableColorStyle:"_1_27Q09X6bn874q3jLw2v_",thresholds:"_1RovZFa3S9pOGx6bbUQPeW"}},function(e,t,a){e.exports={wrapper:"o_P3iP3_ZCsYtILH2QSyr",button:"_8-O7IVONGvYHZOfpcUOd",item:"_1GpHd2FMkgEHInMuv06qmH",colorCycle:"_1RNy3XODfgSAL5n6eOXavO"}},function(e,t,a){e.exports={wrapper:"_3h-NIuRqRE3h9GtNycKl4C",sort:"_3zsgf0KB-tg69gdZzW1-R2",form:"_2jSW_hDrQmQKxkNpIAG6sD",firstLine:"FrymriZwgftO8vlt-WmRq",name:"_1QnATmUkirtXgCWVQyKWSi",interval:"_3YNbiGLQms1_SoiSyMlZUp",exprInput:"_2mO4Qynrm8iiNk_zzxR4N_"}},function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(5),a(6),a(18),a(87),a(16),a(9),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(6),a(18),a(87),a(42),a(16),a(9),a(4),a(23),a(57),a(17),a(7);var l,o,u=r(a(61)),c=r(a(36)),s=r(a(37)),i=r(a(55)),f=r(a(56)),d=r(a(51)),p=r(a(49)),m=n(a(0)),v=a(239),h=a(14),E=r(a(63)),y=r(a(2870)),g=r(a(2876)),b=r(a(2887)),S=r(a(2889));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,v.inject)("monitoringStore")(l=(0,v.observer)((o=function(e){(0,i.default)(a,e);var t=_(a);function a(){return(0,c.default)(this,a),t.apply(this,arguments)}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this;this.allMonitors.forEach((function(t){return t.monitoring(e.monitoringStore)}))}},{key:"componentWillUnmount",value:function(){this.allMonitors.forEach((function(e){e.stopMonitoring(),e.clearMonitorMetrics()}))}},{key:"render",value:function(){var e=this.props.monitoringStore.isEditing;return m.default.createElement(b.default,{graphList:m.default.createElement(y.default,{rows:[this.monitoringStore.unNameGraphRow].concat((0,u.default)(this.graphMonitorRows)),monitos:this.allMonitors}),graphRowList:e?m.default.createElement(g.default,null):this.renderGraphRows()})}},{key:"monitorStatFactory",value:function(e){return{id:e.config.id,title:e.config.title,metrics:(0,E.default)(e.stats)?[]:e.stats.map((function(e){return{title:e.name,id:e.id,color:e.color,value:e.stat}}))}}},{key:"renderGraphRows",value:function(){var e=this,t=[{id:0,hideTitle:!0,panels:this.unNameGraphRowMonitors.map(this.monitorStatFactory,this)}],a=this.graphMonitorRows.map((function(t){return{title:t.config.title,id:t.config.id,panels:t.monitors.map(e.monitorStatFactory,e)}}));return m.default.createElement(m.default.Fragment,null,m.default.createElement(S.default,{rows:t}),m.default.createElement(S.default,{rows:a}))}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}},{key:"graphMonitorRows",get:function(){return this.monitoringStore.graphMonitorRows}},{key:"unNameGraphRowMonitors",get:function(){return this.monitoringStore.unNameGraphRow.monitors}},{key:"monitorsInRows",get:function(){return this.graphMonitorRows.reduce((function(e,t){return[].concat((0,u.default)(e),(0,u.default)(t.monitors))}),[])}},{key:"allMonitors",get:function(){return[].concat((0,u.default)(this.unNameGraphRowMonitors),(0,u.default)(this.monitorsInRows))}}]),a}(m.Component),(0,p.default)(o.prototype,"monitoringStore",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"monitoringStore"),o.prototype),(0,p.default)(o.prototype,"graphMonitorRows",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"graphMonitorRows"),o.prototype),(0,p.default)(o.prototype,"unNameGraphRowMonitors",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"unNameGraphRowMonitors"),o.prototype),(0,p.default)(o.prototype,"monitorsInRows",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"monitorsInRows"),o.prototype),(0,p.default)(o.prototype,"allMonitors",[h.computed],Object.getOwnPropertyDescriptor(o.prototype,"allMonitors"),o.prototype),l=o))||l)||l;t.default=O},function(e,t,a){"use strict";a(15);var r=a(20),n=a(157);a(12),a(109),a(18),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(18),a(42),a(4),a(23),a(57),a(17);var l,o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=n(a(0)),d=a(239),p=r(a(2871)),m=r(a(1184)),v=r(a(2874));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E={graph:p.default,table:function(){}},y=(0,d.observer)(l=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){return f.default.createElement("div",null,this.props.rows.map((function(e){return f.default.createElement(f.default.Fragment,{key:e.config.id},e.monitors.map((function(e){var t=e.config||{},a=t.id,r=t.title,n=t.description,l=t.type,o=E[l],u=Object.prototype.toString.call(o);return f.default.createElement(m.default,{key:a,errorMessage:e.errorMessage},f.default.createElement(v.default,{title:r,description:n},"[object Function]"!==u&&o?f.default.createElement(o,{monitor:e}):null))})))})))}}]),a}(f.Component))||l;t.default=y},function(e,t,a){"use strict";a(15);var r=a(20);a(73),a(18),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(73),a(18),a(42),a(4),a(23),a(57),a(17);var n,l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(239),d=r(a(2872));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=(0,f.inject)("monitoringStore")(n=(0,f.observer)(n=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props.monitoringStore.getTimeRange(),t=e.from,a=e.to,r={start:t.valueOf(),end:a.valueOf()},n=this.props.monitor,l=n.config,o=n.valueFormatter,u=n.graphData,c=n.legends,s=l.title,f=l.lines,p=l.bars,m=l.stack;return i.default.createElement(d.default,{key:c.map((function(e){return e.ID})).join(","),title:s,line:f,bar:p,stacked:m,timeRange:r,valueFormatter:o,legends:c,data:u})}}]),a}(i.default.Component))||n)||n;t.default=m},function(e,t,a){"use strict";var r=a(20);a(12),a(5),a(11),a(6),a(18),a(87),a(16),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(87),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var n=r(a(315)),l=r(a(58)),o=r(a(30)),u=r(a(36)),c=r(a(37)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(0)),p=r(a(3)),m=r(a(1648)),v=r(a(2873));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={legendsVisibleStates:e.props.legends.reduce((function(e,t){return E(E({},e),{},(0,o.default)({},t.ID,!0))}),{})},e.handleClick=function(t){var a=t.currentTarget.dataset.id,r=e.state.legendsVisibleStates;e.setState({legendsVisibleStates:E(E({},r),{},(0,o.default)({},a,!r[a]))})},e}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.legends,r=(0,l.default)(t,["legends"]),u=this.state.legendsVisibleStates;return d.default.createElement("div",{className:v.default.wrapper},d.default.createElement(m.default,(0,n.default)({},r,{legends:a.filter((function(e){return u[e.ID]}))})),d.default.createElement("div",null,a.map((function(t){return d.default.createElement("span",{className:(0,p.default)(v.default.legend,(0,o.default)({},v.default.hidden,!u[t.ID])),key:t.ID,"data-id":t.ID,onClick:e.handleClick},d.default.createElement("small",{className:v.default.radios,style:{backgroundColor:t.color}}),d.default.createElement("span",null,t.name))}))))}}]),a}(d.default.Component);t.default=g},function(e,t,a){e.exports={legend:"hYVeXXLX5hUg_Skp5KFDx",hidden:"_3UdJhoiUMp6i5NgSYGomIF"}},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.children;return n.default.createElement("div",{className:o.default.wrapper},n.default.createElement("header",null,n.default.createElement("h3",null,t,a&&n.default.createElement(l.Tooltip,{content:a},n.default.createElement(l.Icon,{name:"question"})))),r)},a(12),a(109);var n=r(a(0)),l=a(186),o=r(a(2875))},function(e,t,a){e.exports={wrapper:"_1u2Q6u2ZLAcL6JzPYrETFD",maximize:"_2f_K6nodyfyufD4be_iRn_"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(73),r(18),r(192),r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(73),r(18),r(192),r(42),r(9),r(4),r(23),r(57),r(17);var o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(49)),m=l(r(0)),v=r(239),h=r(14),E=r(1647),y=n(r(2877)),g=n(r(2879)),b=n(r(2881)),S=n(r(2883)),_=n(r(2885));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,v.inject)("monitoringStore","modalStore")(o=(0,v.observer)((u=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).addRow=function(){e.props.monitoringStore.addNewRow()},e.showMonitorModal=function(){e.props.modalStore.showNewMonitorModal()},e.onNewMonitorModalCancel=function(){e.props.modalStore.hideNewMonitorModal()},e.onConfirmNewGraphType=function(t){var a;"line"===t||"bar"===t?a=e.props.monitoringStore.generatGraphMonitor({lines:"line"===t,bars:"bar"===t}):"table"===t&&(a=e.props.monitoringStore.generatTableMonitor()),e.props.modalStore.hideNewMonitorModal(),e.modalStore.selectMonitor(a)},e}return(0,s.default)(r,[{key:"handleRowTitleChange",value:function(e){return function(t){e.config.title=t}}},{key:"handleRowPanelsSort",value:function(e){return function(t){var a=e.monitors.map((function(e){return e.id})).join(",");t.map((function(e){return e.monitor.id})).join(",")!==a&&(e.monitors=t.map((function(t){var a=t.monitor;return a.belong(e),a})))}}},{key:"handleRowDesc",value:function(e){var t=this;return function(){var a=t.props.monitoringStore.graphMonitorRows,r=a.length,n=a[e];a[e]=a[(e+1)%r],a[(e+1)%r]=n}}},{key:"handleRowAsc",value:function(e){var t=this;return function(){var a=t.props.monitoringStore.graphMonitorRows,r=a.length,n=a[e];a[e]=a[(e+r-1)%r],a[(e+r-1)%r]=n}}},{key:"handleRowDelete",value:function(e){var t=this;return function(){t.props.monitoringStore.graphMonitorRows.splice(e,1)}}},{key:"handleMonitorDelete",value:function(e,t){return function(){e.deleteTextMonitorByIndex(t)}}},{key:"handleMonitorSelect",value:function(e){var t=this;return function(){t.props.modalStore.selectMonitor(e)}}},{key:"render",value:function(){var e=this,a=this.props.monitoringStore.unNameGraphRow,r=this.props.monitoringStore.graphMonitorRows;return m.default.createElement(b.default,{top:m.default.createElement("div",null,m.default.createElement(E.ReactSortable,{handle:".".concat("j-sort"),list:a.monitors.map((function(e){return{monitor:e}})),setList:this.handleRowPanelsSort(a),animation:200,group:"group"},a.monitors.map((function(t,r){return m.default.createElement(g.default,{key:t.id,title:t.config.title,sortHandlerClassName:"j-sort",onEditClick:e.handleMonitorSelect(t),onDeleteClick:e.handleMonitorDelete(a,r)})}))),r.map((function(t,a){return m.default.createElement("div",{key:t.config.id},m.default.createElement(y.default,{key:t.config.id,onChange:e.handleRowTitleChange(t),title:t.config.title,onDescClick:e.handleRowDesc(a),onAscClick:e.handleRowAsc(a),onDeleteClick:e.handleRowDelete(a)}),m.default.createElement(E.ReactSortable,{key:"sortTable".concat(t.config.id),handle:".".concat("j-sort"),list:t.monitors.map((function(e){return{monitor:e}})),setList:e.handleRowPanelsSort(t),animation:200,group:"group"},t.monitors.map((function(a,r){return m.default.createElement(g.default,{key:a.config.id,title:a.config.title,sortHandlerClassName:"j-sort",onEditClick:e.handleMonitorSelect(a),onDeleteClick:e.handleMonitorDelete(t,r)})}))))}))),bottom:m.default.createElement("div",null,m.default.createElement(S.default,{title:t("ADD_MONITOR_ITEM"),onClick:this.showMonitorModal}),m.default.createElement(S.default,{title:t("ADD_MONITOR_ROW"),onClick:this.addRow}),m.default.createElement(_.default,{visible:this.modalStore.shouldNewMonitorModalShow,onCancel:this.onNewMonitorModalCancel,onOk:this.onConfirmNewGraphType}))})}},{key:"modalStore",get:function(){return this.props.modalStore}},{key:"monitoringStore",get:function(){return this.props.monitoringStore}}]),r}(m.Component),(0,p.default)(u.prototype,"modalStore",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"modalStore"),u.prototype),(0,p.default)(u.prototype,"monitoringStore",[h.computed],Object.getOwnPropertyDescriptor(u.prototype,"monitoringStore"),u.prototype),o=u))||o)||o;a.default=C},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=a(186),f=r(a(2878));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var p=function(e){(0,o.default)(a,e);var t=d(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={editing:!1},e.handleEditClick=function(){e.setState({editing:!0},(function(){e.inputRef.current.focus()}))},e.inputRef=s.default.createRef(),e.onChange=function(t){(0,e.props.onChange)(t.target.value)},e.onBlur=function(){e.setState({editing:!1})},e.onKeyUp=function(t){13===t.keyCode&&e.setState({editing:!1})},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.state.editing,t=this.props,a=t.title,r=t.onDescClick,n=t.onAscClick,l=t.onDeleteClick;return s.default.createElement("div",{className:f.default.wrapper},s.default.createElement("h3",null,e?s.default.createElement("input",{ref:this.inputRef,type:"text",value:a,onBlur:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp}):a),s.default.createElement("span",{className:f.default.tools},s.default.createElement(i.Icon,{name:"pen",onClick:this.handleEditClick}),s.default.createElement(i.Icon,{name:"trash",onClick:l}),s.default.createElement(i.Icon,{name:"sort-descending",onClick:r}),s.default.createElement(i.Icon,{name:"sort-ascending",onClick:n})))}}]),a}(s.default.Component);t.default=p},function(e,t,a){e.exports={wrapper:"_1Q5L6xVUY_dZiZE9P7abIn",tools:"_2AX8cBDeGzuZCuS9zSbLUA"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.sortHandlerClassName,r=e.onEditClick,u=e.onDeleteClick;return n.default.createElement("div",{className:o.default.wrapper},n.default.createElement("h3",null,t),n.default.createElement("div",{className:o.default.tools},n.default.createElement(l.Icon,{name:"pen",className:o.default.edit,onClick:r}),n.default.createElement(l.Icon,{name:"trash",className:o.default.edit,onClick:u}),n.default.createElement(l.Icon,{name:"drag-handle",className:a})))};var n=r(a(0)),l=a(186),o=r(a(2880))},function(e,t,a){e.exports={wrapper:"_1YVAyThxPFHSQQzYDWZZba",tools:"_1K8ripXpvIFhR8VfrzmiBH",edit:"FP5B56V7_lFfN94zeARrg"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.top,a=e.bottom;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",null,t),n.default.createElement("div",null,a))};var n=r(a(0)),l=r(a(2882))},function(e,t,a){e.exports={wrapper:"_3_UUuXKfEGWvjq98lJJLFJ"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.onClick;return n.default.createElement("div",{className:o.default.wrapper,onClick:a},n.default.createElement(l.Icon,{name:"add"}),n.default.createElement("span",null,t))};var n=r(a(0)),l=a(186),o=r(a(2884))},function(e,t,a){e.exports={wrapper:"_2dxZyYmy9dDDX9jI0csU0h"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(12),r(109),r(5),r(18),r(16),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(42),r(16),r(98),r(4),r(23),r(57),r(17);var o=l(r(30)),u=l(r(96)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(3)),v=l(r(787)),h=r(186),E=l(r(1112)),y=l(r(2886));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={type:"line"},e.typeConfig={line:{icon:"linechart",name:t("LINE_CHART"),desc:[{title:t("APPLICABLE_SCENE"),description:t("LINE_CHART_DESC")},{title:t("BASE_LINE_CHART"),description:t("BASE_LINE_CHART_DESC")},{title:t("STACK_LINE_CHART"),description:t("STACK_LINE_CHART_DESC")}]},bar:{icon:"barchart",name:t("BAR_CHART"),desc:[{title:t("APPLICABLE_SCENE"),description:t("BAR_CHART_DESC")},{title:t("BASE_BAR_CHART"),description:t("BASE_BAR_CHART_DESC")},{title:t("STACK_BAR_CHART"),description:t("STACK_BAR_CHART_DESC")}]}},e.handleClick=function(t){e.setState({type:t.currentTarget.dataset.type})},e.onOk=function(){e.props.onOk(e.state.type)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=this.state.type,c=this.typeConfig[l];return p.default.createElement(v.default,{width:960,imageIcon:"/assets/coin.svg",title:t("SELECT_CHART_TYPE"),description:t("SELECT_CHART_TYPE_MODAL_DESC"),visible:r,onCancel:n,onOk:this.onOk},p.default.createElement("div",{className:y.default.wrapper},p.default.createElement(E.default,{label:t("CHART_TYPES")},Object.entries(this.typeConfig).map((function(t){var a=(0,u.default)(t,2),r=a[0],n=a[1];return p.default.createElement("div",{key:r,"data-type":r,onClick:e.handleClick,className:y.default.typeOpts},p.default.createElement("div",{className:(0,m.default)(y.default.typeOpt,(0,o.default)({},y.default.select,r===l))},p.default.createElement(h.Icon,{className:y.default.icon,name:n.icon,size:40,type:r===l?"light":"dark"}),p.default.createElement("h4",null,n.name)))}))),c.desc.map((function(e){return p.default.createElement("div",{key:e.title},p.default.createElement("h3",null,e.title),p.default.createElement("p",null,e.description))})),p.default.createElement(E.default,{label:t("DISPLAY_POSITION")},p.default.createElement("div",{className:y.default.position},p.default.createElement("div",{className:y.default.navs},p.default.createElement("div",null),p.default.createElement("div",null)),p.default.createElement("div",{className:y.default.placeholderWrapper},p.default.createElement("div",{className:y.default.placeholder},p.default.createElement("div",{className:"text-center"},p.default.createElement(h.Icon,{name:c.icon,size:40}),p.default.createElement("div",{className:"margin-t12"},t("EMPTY_CHART_PLACEHOLDER")))))))))}}]),r}(p.Component);a.default=b},function(e,t,a){e.exports={wrapper:"_3Gsl08n1YLlMoZKB-ZIDyt",typeOpts:"DI7hisvpRHRQ4BOLCrfHJ",typeOpt:"_2_0SO5zI5pSrohp43NuaNF",select:"_2ydBGOddL92AnuxLWamTH7",position:"_1EKwsFmFowHAHtJ7TY95ZU",navs:"qqJ5lFZU8VjK1Sxl4oDZu",placeholderWrapper:"_1N3lMb4bCQ9diP9zwD3xpY",placeholder:"_11m9sjSshUu7Y2-c_9QF5D"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.graphList,a=e.graphRowList;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.graphs},t),n.default.createElement("div",{className:l.default.row},a))};var n=r(a(0)),l=r(a(2888))},function(e,t,a){e.exports={wrapper:"_2f81WjhyuGPKeTo_qAX3rO",graphs:"_Jreo1l7RXs_lL5KI3y-i",row:"_28aqToPqGsHD4usWoSm-Sq",hidden:"_1muGurgPkX7BU0SJUUGgkk"}},function(e,t,a){"use strict";a(15);var r=a(20);a(18),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.rows.map((function(e){return n.default.createElement("div",{key:e.id},e.hideTitle||n.default.createElement("h3",{className:o.default.rowTitle},e.title),e.panels.map((function(e){return n.default.createElement(l.default,{key:e.id,title:e.title,metrics:e.metrics})})))}))},a(18);var n=r(a(0)),l=r(a(2890)),o=r(a(2892))},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(18),a(98),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(98),a(4),a(23),a(57),a(17);var n=r(a(96)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=r(a(76)),d=a(186),p=r(a(2891));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(a,e);var t=m(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={collapse:!0},e.handleTitleClick=function(){e.setState((function(e){return{collapse:!e.collapse}}))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.metrics,r=this.state.collapse;return i.default.createElement("div",{className:p.default.wrapper},i.default.createElement("h3",{onClick:this.handleTitleClick},i.default.createElement("span",null,t),i.default.createElement("small",null,i.default.createElement(d.Icon,{name:r?"chevron-right":"chevron-down"}))),!r&&i.default.createElement("div",{className:p.default.legendsContainer},a.map((function(e,t){return i.default.createElement("div",{className:p.default.legends,key:t},i.default.createElement("p",null,i.default.createElement("small",{style:{backgroundColor:e.color}}),i.default.createElement("span",{title:e.title},e.title)),i.default.createElement("div",{className:p.default.subMetrics},(0,f.default)(e.value)&&Object.entries(e.value).map((function(e){var t=(0,n.default)(e,2),a=t[0],r=t[1];return i.default.createElement("div",{key:a},i.default.createElement("span",null,a),i.default.createElement("span",null,r))}))))}))))}}]),a}(i.default.Component);t.default=v},function(e,t,a){e.exports={wrapper:"rjDeaoFJ6N8WsWZ0bilph",legendsContainer:"_1Qvu2gaT9loLM60nS8Q06W",legends:"_2n9SFFnS_yXTWI_QrGamFb",subMetrics:"_2Q1jEzz9hTB_6cseHgUbTs"}},function(e,t,a){e.exports={rowTitle:"_20_7N3uyaR-QiWjc9NRg3z"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=a(239),o=r(a(1645));var u=(0,l.inject)("modalStore")((function(e){var t=e.modalStore;return n.default.createElement(o.default,{type:"control",icon:"theme",onClick:function(){t.changeTheme()}})}));t.default=u},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(442),r(42),r(4),r(23),r(57),r(17),r(110);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(243));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(r,e);var a=d(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={time:Date.now()},e}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.updateTime()}},{key:"updateTime",value:function(){var e=this;this.timer=setTimeout((function(){e.setState({time:Date.now()}),e.updateTime()}),1e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,t("TIME"),": ",(0,f.default)(this.state.time).format("YYYY-MM-DD HH:mm:ss"))}}]),r}(i.default.Component);a.default=p},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.theme,a=e.className,r=(0,l.default)(e,["theme","className"]),i="light"===t?s.default.light:s.default.dark;return o.default.createElement(c.default,(0,n.default)({className:(0,u.default)(a,i)},r))};var n=r(a(315)),l=r(a(58)),o=r(a(0)),u=r(a(3)),c=r(a(2896)),s=r(a(2898))},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.title,a=e.description,r=e.onCancel,s=e.children,i=e.operations,f=e.className;return n.default.createElement(o.default,{fullScreen:!0,hideFooter:!0,visible:!0,title:t,description:a,icon:"monitor",className:(0,u.default)(c.default.wrapper,f),headerClassName:c.default.header,bodyClassName:c.default.body,closable:!1,operations:n.default.createElement("div",{className:c.default.operations},i,n.default.createElement(l.Button,{icon:"close",iconType:"light",type:"control",onClick:r,className:c.default.close}))},s)},a(12),a(109);var n=r(a(0)),l=a(186),o=r(a(787)),u=r(a(3)),c=r(a(2897))},function(e,t,a){e.exports={wrapper:"_1v3w1K8GocJSNhGw0Otqvw",operations:"_2AtGIYhklmm48zCtgKZtnI",body:"_2_tbF0yNMg946Wj9MNdEpW",header:"_1Jj1diU-3q7-CIxwUuTEsN",close:"iOtAIVcFhv-JY_191Zjgq"}},function(e,t,a){e.exports={dark:"_2Y2inQV9uyIxXH3la3UO2x",light:"SrA97pSKRoGNYKHsT1wtU"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.sidebar,a=e.content;return n.default.createElement("div",{className:l.default.wrapper},n.default.createElement("div",{className:l.default.sidebar},t),n.default.createElement("div",{className:l.default.content},a))};var n=r(a(0)),l=r(a(2900))},function(e,t,a){e.exports={wrapper:"_2VQ65xJOwT9qSI7B5BWRaN",sidebar:"_88ehNHIYZa4OJYE96LJg2",content:"_1mU4S3qQTlDWk5sHLHl-0G"}},function(e,t,a){"use strict";a(15);var r=a(20);a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(9);var n,l,o,u,c=r(a(65)),s=r(a(36)),i=r(a(37)),f=r(a(49)),d=(r(a(66)),a(14)),p=(n=function(){function e(){(0,s.default)(this,e),(0,c.default)(this,"theme",l,this),(0,c.default)(this,"selectedMonitor",o,this),(0,c.default)(this,"shouldNewMonitorModalShow",u,this)}return(0,i.default)(e,[{key:"selectMonitor",value:function(e){this.selectedMonitor=e}},{key:"unSelectMonitor",value:function(){this.selectedMonitor=null}},{key:"changeTheme",value:function(){this.theme="light"===this.theme?"dark":"light"}},{key:"showNewMonitorModal",value:function(){this.shouldNewMonitorModalShow=!0}},{key:"hideNewMonitorModal",value:function(){this.shouldNewMonitorModalShow=!1}}]),e}(),l=(0,f.default)(n.prototype,"theme",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"dark"}}),o=(0,f.default)(n.prototype,"selectedMonitor",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=(0,f.default)(n.prototype,"shouldNewMonitorModalShow",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,f.default)(n.prototype,"selectMonitor",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"selectMonitor"),n.prototype),(0,f.default)(n.prototype,"unSelectMonitor",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"unSelectMonitor"),n.prototype),(0,f.default)(n.prototype,"changeTheme",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"changeTheme"),n.prototype),(0,f.default)(n.prototype,"showNewMonitorModal",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"showNewMonitorModal"),n.prototype),(0,f.default)(n.prototype,"hideNewMonitorModal",[d.action],Object.getOwnPropertyDescriptor(n.prototype,"hideNewMonitorModal"),n.prototype),n);t.default=p},function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(27),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(18),a(42),a(27),a(9),a(4),a(23),a(57),a(17);var n,l=r(a(96)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(49)),d=r(a(26)),p=a(14),m=a(794),v=r(a(1362));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E={avg:m.avgs,last:function(e){return e[e.length-1]},first:function(e){return e[0]}},y=(n=function(e){(0,c.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"stat",get:function(){var e=this.config,t=e.valueName,a=e.decimals,r=void 0===a?0:a,n=e.format,o=this.metrics,u=this.metrics.length;if(u>1)return"Only queries that return single series/table is supported";if(0===u)return"No Data";var c=(0,d.default)(o,"0.values",[]).map((function(e){var t=(0,l.default)(e,2)[1];return Number(t)})),s=(E[t]||m.avgs)(c)||0;return(m.unitTransformMap[n]||m.unitTransformMap.none)(s,r)}}]),a}(v.default),(0,f.default)(n.prototype,"stat",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"stat"),n.prototype),n);t.default=y},function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(29),a(18),a(87),a(16),a(27),a(98),a(9),a(13),a(10),a(4),a(23),a(17),a(7),a(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(29),a(18),a(28),a(87),a(42),a(16),a(27),a(34),a(15),a(98),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7),a(32);var n,l=r(a(30)),o=r(a(96)),u=r(a(36)),c=r(a(37)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(49)),p=a(14),m=a(794),v=r(a(26)),h=r(a(1362));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g={avg:m.avgs,last:function(e){return e[e.length-1]},first:function(e){return e[0]},max:function(e){return Math.max.apply(null,e)},min:function(e){return Math.min.apply(null,e)}},b=(n=function(e){(0,s.default)(a,e);var t=y(a);function a(){return(0,u.default)(this,a),t.apply(this,arguments)}return(0,c.default)(a,[{key:"graphData",get:function(){var e=this.metrics.reduce((function(e,t){var a=t.values,r=t.id;return a.forEach((function(t){var a=(0,o.default)(t,2),n=a[0],l=a[1],u=1e3*n,c=e[u]||{};c[r]=Number(l),e[u]=c})),e}),{});return Object.entries(e).map((function(e){var t=(0,o.default)(e,2),a=t[0],r=t[1];return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({time:Number(a)},r)}))}},{key:"legends",get:function(){var e=this.config.colors,t=void 0===e?[]:e;return this.formattedMetrics.map((function(e,a){var r=e.id;return{name:e.name,ID:r,color:t[a%t.length]}}))}},{key:"valueFormatter",get:function(){var e=(0,v.default)(this.config,"yaxes[0].format","none"),t=(0,v.default)(this.config,"yaxes[0].decimals",2),a=m.unitTransformMap[e]||function(){};return function(e){return a(e,t)}}},{key:"stats",get:function(){var e=this;return this.formattedMetrics.map((function(t,a){var r=(t.values||[]).map((function(e){var t=(0,o.default)(e,2)[1];return Number(t)})),n=e.config.colors,l=void 0===n?[]:n;return{id:t.id,name:t.name,color:l[a%l.length],stat:{max:e.valueFormatter(g.max(r)),min:e.valueFormatter(g.min(r)),avg:e.valueFormatter(g.avg(r)),last:e.valueFormatter(g.last(r))}}}))}}]),a}(h.default),(0,d.default)(n.prototype,"graphData",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"graphData"),n.prototype),(0,d.default)(n.prototype,"legends",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"legends"),n.prototype),(0,d.default)(n.prototype,"valueFormatter",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"valueFormatter"),n.prototype),(0,d.default)(n.prototype,"stats",[p.computed],Object.getOwnPropertyDescriptor(n.prototype,"stats"),n.prototype),n);t.default=b},function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(192),a(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(18),a(28),a(192),a(9);var n,l,o,u=r(a(65)),c=r(a(36)),s=r(a(37)),i=r(a(49)),f=(r(a(66)),a(14)),d=r(a(250)),p=(n=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.config,n=void 0===r?{}:r,s=a.monitors,i=void 0===s?[]:s;(0,c.default)(this,e),(0,u.default)(this,"monitors",l,this),(0,u.default)(this,"config",o,this),this.config=n,this.monitors=i.map((function(e){return e.belong(t)}))}return(0,s.default)(e,[{key:"push",value:function(e){return e.belong(this),this.monitors.push(e),this}},{key:"has",value:function(e){return(0,d.default)(this.monitors,e)}},{key:"updateMonitors",value:function(e){this.monitors=e}},{key:"deleteTextMonitorByIndex",value:function(e){this.monitors.splice(e,1)}}]),e}(),l=(0,i.default)(n.prototype,"monitors",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=(0,i.default)(n.prototype,"config",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,i.default)(n.prototype,"updateMonitors",[f.action],Object.getOwnPropertyDescriptor(n.prototype,"updateMonitors"),n.prototype),(0,i.default)(n.prototype,"deleteTextMonitorByIndex",[f.action],Object.getOwnPropertyDescriptor(n.prototype,"deleteTextMonitorByIndex"),n.prototype),n);t.default=p},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(26)),v=n(r(74)),h=n(r(1644)),E=n(r(2906)),y=n(r(1679)),g=n(r(825)),b=n(r(2911)),S=n(r(1681));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=function(e){(0,i.default)(r,e);var a=C(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={finishBasis:!1},e.handleOk=function(){var t=(0,u.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r="Grafana"===e.state.type?a:e.store.toJS(),e.props.onOk(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBasicConfirm=function(t){var a=e.props,r=a.cluster,n=a.namespace,l=(0,m.default)(S.default,"".concat(t.spec.title,".settings"),{});(0,v.default)(t,"spec",l,{}),e.store=new y.default(O({cluster:r,namespace:n,formTemplate:t,name:(0,m.default)(t,"metadata.name"),description:(0,m.default)(t,'metadata.annotations["kubesphere.io/description"]'),isEditing:!0},t.spec)),e.setState({finishBasis:!0,type:t.spec.title,formData:t})},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.state,a=e.finishBasis,r=e.type,n=e.formData,l=this.props,o=l.cluster,u=l.namespace,c=l.formTemplate,s=l.isSubmitting,i=l.onCancel,f=l.store,d=f.module;return a?"Grafana"===r?p.default.createElement(E.default,{formTemplate:n,onCancel:i,onOk:this.handleOk}):p.default.createElement(h.default,{store:this.store,cluster:o,onOk:this.handleOk,onCancel:i,isSubmitting:s}):p.default.createElement(g.default,{visible:!0,module:d,name:"CUSTOM_MONITORING_DASHBOARD",cluster:o,namespace:u,formTemplate:c,steps:b.default,store:f,onOk:this.handleBasicConfirm,onCancel:i,okBtnText:t("NEXT")})}}]),r}(p.default.Component);a.default=T},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c,s,i=n(r(30)),f=n(r(65)),d=n(r(36)),p=n(r(37)),m=n(r(88)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(49)),g=(n(r(66)),n(r(0))),b=r(239),S=n(r(26)),_=n(r(787)),O=r(186),C=r(14),T=r(72),R=n(r(2907)),D=n(r(2908));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var P=(0,b.observer)((o=function(e){(0,v.default)(r,e);var a=I(r);function r(){var e;(0,d.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return e=a.call.apply(a,[this].concat(l)),(0,f.default)(e,"type",u,(0,m.default)(e)),e.formRef=g.default.createRef(),(0,f.default)(e,"formData",c,(0,m.default)(e)),(0,f.default)(e,"handleTypeChange",s,(0,m.default)(e)),e.handleSave=function(){var t=e.formRef.current;t&&t.validate((function(){var t=e.props,a=t.onOk,r=t.formTemplate,n=e.formData,l=(0,S.default)(r,"metadata.name"),o=(0,S.default)(r,'metadata.annotations["kubesphere.io/description"]');a(k(k({},n),{},{type:"grafana",name:l,description:o,grafanaDashboardName:l}))}))},e.renderUpload=function(){return"json"===e.type?g.default.createElement(O.Form.Item,{label:t("SUPPORT_JSON_FILE"),rules:[{required:!0,message:t("UPLOAD_FILE_TIP")}]},g.default.createElement(D.default,{name:"grafanaDashboardContent"})):null},e.renderUrl=function(){return"json"===e.type?null:g.default.createElement(O.Form.Item,{label:t("UPLOAD_GRAFANA_URL"),rules:[{required:!0,message:t("ENTER_GRAFANA_URL")},{pattern:T.PATTERN_URL,message:t("INVALID_URL_DESC")}]},g.default.createElement(O.Input,{name:"grafanaDashboardUrl",autoFocus:!0,maxLength:63}))},e}return(0,p.default)(r,[{key:"render",value:function(){var e=this.props.onCancel;return g.default.createElement(_.default,{visible:!0,width:600,onCancel:e,title:t("UPLOAD_GRAFANA_DASHBOARD"),onOk:this.handleSave},g.default.createElement("div",{className:R.default.container},g.default.createElement(O.Form,{data:this.formData,ref:this.formRef},g.default.createElement(O.RadioGroup,{mode:"button",value:this.type,onChange:this.handleTypeChange,size:"small"},g.default.createElement(O.RadioButton,{value:"json"},t("UPLOAD_FROM_LOCAL_STORAGE")),g.default.createElement(O.RadioButton,{value:"url"},t("UPLOAD_FROM_URL"))),this.renderUpload(),this.renderUrl())))}}]),r}(g.default.Component),u=(0,y.default)(o.prototype,"type",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"json"}}),c=(0,y.default)(o.prototype,"formData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),s=(0,y.default)(o.prototype,"handleTypeChange",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.type=t,e.formData={}}}}),l=o))||l;a.default=P},function(e,t,a){e.exports={container:"_1N2aKN3q6b7ysIzqzzy8I8"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(975),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(975),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=r(186),h=n(r(952)),E=n(r(240)),y=n(r(459)),g=n(r(3)),b=r(52),S=r(2909),_=n(r(2910));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=function(e){(0,f.default)(r,e);var a=T(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).setFileStatus=function(e,t){n.setState((function(a){return{files:C(C({},a.files),{},(0,c.default)({},e,C(C({},a.files[e]),t)))}}))},n.beforeUploadHandler=function(){var e=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(n.state.files).length>0)){e.next=4;break}return E.default.error(t("FILE_UPLOAD_ERROR")),e.abrupt("return",Promise.reject(t("FILE_UPLOAD_ERROR")));case 4:if("json"===a.name.slice(a.name.lastIndexOf(".")+1)){e.next=8;break}return E.default.error(t("WRONG_FILE_EXTENSION_NAME",{type:"JSON"})),e.abrupt("return",Promise.reject(t("WRONG_FILE_EXTENSION_NAME",{type:"JSON"})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startHandler=function(e){n.setFileStatus(e.uid,{size:e.size,name:e.name,showProgress:!0,showFile:!1,percentage:0,status:"active"})},n.progressHandler=function(e,t){var a=(0,y.default)(e.percent)?Math.round(e.percent):0;n.setFileStatus(t.uid,{size:t.size,percentage:100===a?99:a,status:"active"})},n.successHandler=function(e,a){var r={name:a.name,size:a.size,showProgress:!1,showFile:!0,percentage:100,status:"active"};n.setFileStatus(a.uid,r);var l=new FileReader;l.readAsText(a,"utf8"),l.addEventListener("load",(function(){var e=l.result;n.props.onChange&&n.props.onChange(e)})),E.default.success({content:t("UPLOAD_SUCCESSFUL")})},n.errorHandler=function(e,a,r){n.setFileStatus(r.uid,{size:r.size,showProgress:!0,showFile:!1,status:"exception"}),E.default.error({content:t("UPLOAD_FAILED_MESSAGE")})},n.handleReUpload=function(){Object.keys(n.state.files).forEach((function(e){n.uploader.abort(e)})),n.setState({files:{}}),n.props.onChange(""),n.uploader.onClick()},n.renderProgress=function(e){var a=n.state.files[e];return m.default.createElement("div",{className:_.default.uploadingContent,key:e},m.default.createElement("p",{className:_.default.fileInfo},m.default.createElement("span",{className:_.default.fileName},a.name),m.default.createElement("span",{className:_.default.uploadText},t("UPLOAD_PERCENT",{percent:a.percentage})),m.default.createElement("span",{className:_.default.uploadText},t("FILE_SIZE",{size:(0,b.formatSize)(a.size)}))),m.default.createElement(v.Progress,{status:"primary",className:_.default.progress,percent:a.percentage,strokeWidth:8,key:e,showInfo:!1}))},n.renderFileItem=function(e){var a=n.state.files[e];return m.default.createElement("div",{className:_.default.uploadingContent,key:e},m.default.createElement("p",{className:_.default.fileInfo},m.default.createElement("span",{className:_.default.fileName},a.name),m.default.createElement("span",{className:_.default.uploadText},t("UPLOAD_FULLY")),m.default.createElement("span",{className:_.default.uploadText},t("FILE_SIZE",{size:(0,b.formatSize)(a.size)}))),m.default.createElement(v.Progress,{status:"primary",className:_.default.progress,percent:100,strokeWidth:8,showInfo:!1}))},n.uploaderProps={name:"grafanaDashboard",method:"post",action:n.getUploadUrl,multiple:!1,type:"json",beforeUpload:n.beforeUploadHandler,onStart:n.startHandler,onSuccess:n.successHandler,onProgress:n.progressHandler,onError:n.errorHandler},n.state={files:{}},n}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=this.state.files,r=Object.keys(a).length;return m.default.createElement("div",null,m.default.createElement("div",{className:_.default.container},m.default.createElement(h.default,(0,l.default)({},this.uploaderProps,{ref:function(t){e.uploader=t}}),m.default.createElement("div",{className:(0,g.default)(_.default.selectContainer,{})},m.default.createElement(v.Icon,{className:_.default.icon,size:40,name:"upload"}),m.default.createElement("p",{className:_.default.title},t("UPLOAD_FROM_LOCAL_TITLE")),m.default.createElement("p",{className:_.default.desc},t("SUPPORT_JSON_FILE"))))),m.default.createElement("div",{className:(0,g.default)(_.default.uploadContainer,(0,c.default)({},_.default.none,!r))},m.default.createElement("span",{className:_.default.icon},m.default.createElement(S.ReactComponent,null)),Object.keys(a).map((function(t){return a[t]?a[t].showProgress?e.renderProgress(t):a[t].showFile?e.renderFileItem(t):null:null})),m.default.createElement(v.Icon,{changeable:!0,name:"trash",onClick:this.handleReUpload,className:_.default.uploadIcon})))}},{key:"getUploadUrl",get:function(){return"/grafana/file"}}]),r}(m.default.Component);a.default=R},function(e,t,a){"use strict";a.r(t),a.d(t,"ReactComponent",(function(){return i}));var r=a(315),n=a.n(r),l=a(0),o=a.n(l),u=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29 18.517h2.646v1.323c0 .73.592 1.323 1.323 1.323H19.84c.73 0 1.323-.592 1.323-1.323V7.936h-3.968c-.73 0-1.323-.592-1.323-1.323V2.645H9.259c-.73 0-1.323.593-1.323 1.323v6.613H5.291V2.645A2.645 2.645 0 017.936 0h10.26l5.612 5.612v15.55a2.645 2.645 0 01-2.645 2.646H7.936a2.645 2.645 0 01-2.645-2.645v-2.646z",fill:"#324558"}),c=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 10.582a1 1 0 00-1 1v5.936a1 1 0 001 1h18a1 1 0 001-1V11.58a1 1 0 00-1-1H1zm7.648 6.41c-.372.28-.874.42-1.504.42-.437 0-.836-.08-1.195-.24-.36-.16-.634-.38-.822-.659a1.686 1.686 0 01-.284-.969H6.02c0 .628.375.942 1.125.942.279 0 .496-.057.652-.17a.553.553 0 00.235-.475c0-.221-.078-.391-.235-.51-.156-.118-.437-.243-.843-.374a5.981 5.981 0 01-.965-.39c-.646-.348-.969-.818-.969-1.41 0-.307.087-.58.26-.822.173-.24.422-.429.746-.564a2.808 2.808 0 011.092-.203c.406 0 .768.073 1.086.22.317.148.564.355.74.624.176.268.264.572.264.914H8.035c0-.26-.082-.463-.246-.608-.164-.144-.395-.216-.692-.216-.286 0-.509.06-.668.181a.573.573 0 00-.238.479c0 .184.093.34.28.464.186.126.46.243.822.352.666.2 1.152.45 1.457.746.304.297.457.667.457 1.11 0 .492-.187.878-.559 1.158zm-5.088.193a2.118 2.118 0 01-.989.227c-.601 0-1.07-.153-1.406-.46-.336-.305-.504-.738-.504-1.298h1.18c0 .278.059.484.176.617.117.133.302.2.554.2a.672.672 0 00.536-.231c.132-.154.199-.373.199-.656v-3.938h1.172v3.938c0 .361-.08.681-.24.959-.16.277-.387.491-.678.642zm8.297.227c.477 0 .9-.115 1.268-.344.368-.23.652-.555.85-.977.197-.422.296-.912.296-1.472v-.254c0-.558-.1-1.05-.302-1.475a2.254 2.254 0 00-.856-.98 2.353 2.353 0 00-1.263-.342c-.474 0-.896.114-1.264.342a2.254 2.254 0 00-.856.98c-.201.426-.302.919-.302 1.479v.28c.002.548.105 1.032.308 1.452.203.42.49.744.86.97.37.227.79.34 1.261.34zm-.921-1.442c.213.32.52.48.921.48.394 0 .696-.154.907-.462.21-.309.317-.759.32-1.35v-.277c0-.597-.107-1.05-.32-1.36-.214-.31-.519-.464-.914-.464-.394 0-.697.153-.91.459-.214.306-.322.754-.325 1.345v.278c0 .58.107 1.03.32 1.351zm4.959 1.364V13.59l2.281 3.743h1.172v-5.688H18.18v3.75l-2.285-3.75h-1.172v5.688h1.172z",fill:"#B6C2CD"}),s=o.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.572 17.412c.367 0 .696-.076.988-.227.291-.151.517-.365.678-.642.16-.278.24-.598.24-.96v-3.937H3.306v3.938c0 .283-.067.502-.2.656a.671.671 0 01-.534.23c-.253 0-.438-.066-.555-.199-.117-.133-.176-.339-.176-.617H.661c0 .56.168.993.504 1.299.336.306.805.459 1.407.459zm4.572 0c.63 0 1.132-.14 1.504-.42.372-.28.559-.666.559-1.159 0-.442-.153-.812-.457-1.109-.305-.297-.79-.546-1.457-.746-.362-.11-.636-.226-.823-.351-.186-.126-.279-.28-.279-.465 0-.198.08-.358.238-.479.16-.121.382-.181.668-.181.297 0 .528.072.692.216.164.145.246.347.246.608h1.172a1.63 1.63 0 00-.264-.914 1.729 1.729 0 00-.74-.623 2.555 2.555 0 00-1.086-.221c-.404 0-.768.068-1.092.203a1.695 1.695 0 00-.746.564c-.173.241-.26.515-.26.823 0 .59.323 1.06.969 1.41.237.127.559.257.965.389.406.131.687.256.844.374.156.119.234.289.234.51a.553.553 0 01-.234.475c-.157.113-.374.17-.653.17-.75 0-1.125-.314-1.125-.942H4.843c0 .368.095.69.284.97.188.278.463.497.822.657.36.16.758.24 1.195.24zm4.713 0c.477 0 .9-.115 1.268-.344.368-.23.652-.555.85-.977.198-.422.296-.913.296-1.472v-.254c0-.558-.1-1.05-.302-1.475a2.254 2.254 0 00-.856-.98 2.353 2.353 0 00-1.263-.342c-.474 0-.896.114-1.264.342a2.254 2.254 0 00-.855.98c-.202.426-.303.919-.303 1.479v.28c.002.548.105 1.032.308 1.452.204.42.49.744.86.97.37.227.79.34 1.261.34zm0-.961c-.4 0-.708-.16-.921-.48-.214-.321-.32-.772-.32-1.352v-.278c.002-.59.11-1.04.324-1.345.213-.306.516-.46.91-.46.396 0 .7.156.914.466.213.31.32.762.32 1.359v.277c-.003.591-.11 1.041-.32 1.35-.211.308-.513.463-.906.463zm4.038.883V13.59l2.281 3.743h1.172v-5.688H18.18v3.75l-2.285-3.75h-1.172v5.688h1.172z",fill:"#324558"}),i=function(e){return o.a.createElement("svg",n()({viewBox:"0 0 24 24",fill:"none",width:"1em",height:"1em"},e),u,c,s)};t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01LjI5MDY1IDE4LjUxNzRINy45MzU5OVYxOS44NDAxQzcuOTM1OTkgMjAuNTcwNiA4LjUyODE3IDIxLjE2MjcgOS4yNTg2NiAyMS4xNjI3SDE5Ljg0QzIwLjU3MDUgMjEuMTYyNyAyMS4xNjI3IDIwLjU3MDYgMjEuMTYyNyAxOS44NDAxVjcuOTM2MDNIMTcuMTk0N0MxNi40NjQyIDcuOTM2MDMgMTUuODcyIDcuMzQzODUgMTUuODcyIDYuNjEzMzVWMi42NDUzNEg5LjI1ODY2QzguNTI4MTcgMi42NDUzNCA3LjkzNTk5IDMuMjM3NTIgNy45MzU5OSAzLjk2ODAxVjEwLjU4MTRINS4yOTA2NVYyLjY0NTM0QzUuMjkwNjUgMS4xODQzNiA2LjQ3NTAxIDAgNy45MzU5OSAwSDE4LjE5NjRMMjMuODA4IDUuNjExNjJWMjEuMTYyN0MyMy44MDggMjIuNjIzNyAyMi42MjM3IDIzLjgwODEgMjEuMTYyNyAyMy44MDgxSDcuOTM1OTlDNi40NzUwMSAyMy44MDgxIDUuMjkwNjUgMjIuNjIzNyA1LjI5MDY1IDIxLjE2MjdWMTguNTE3NFoiIGZpbGw9IiMzMjQ1NTgiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xIDEwLjU4MTVDMC40NDc3MTUgMTAuNTgxNSAwIDExLjAyOTMgMCAxMS41ODE1VjE3LjUxNzZDMCAxOC4wNjk5IDAuNDQ3NzE1IDE4LjUxNzYgMSAxOC41MTc2SDE5QzE5LjU1MjMgMTguNTE3NiAyMCAxOC4wNjk4IDIwIDE3LjUxNzZWMTEuNTgxNUMyMCAxMS4wMjkzIDE5LjU1MjMgMTAuNTgxNSAxOSAxMC41ODE1SDFaTTguNjQ4MDUgMTYuOTkxN0M4LjI3NTY2IDE3LjI3MTcgNy43NzQzNiAxNy40MTE2IDcuMTQ0MTUgMTcuNDExNkM2LjcwNjY1IDE3LjQxMTYgNi4zMDgyMSAxNy4zMzE1IDUuOTQ4ODMgMTcuMTcxNEM1LjU4OTQ2IDE3LjAxMTIgNS4zMTUzNyAxNi43OTE4IDUuMTI2NTcgMTYuNTEzMkM0LjkzNzc3IDE2LjIzNDUgNC44NDMzNyAxNS45MTE2IDQuODQzMzcgMTUuNTQ0NEg2LjAxOTE1QzYuMDE5MTUgMTYuMTcyIDYuMzk0MTUgMTYuNDg1OCA3LjE0NDE1IDE2LjQ4NThDNy40MjI3OSAxNi40ODU4IDcuNjQwMjQgMTYuNDI5MiA3Ljc5NjQ5IDE2LjMxNTlDNy45NTI3NCAxNi4yMDI2IDguMDMwODcgMTYuMDQ0NCA4LjAzMDg3IDE1Ljg0MTNDOC4wMzA4NyAxNS42MiA3Ljk1Mjc0IDE1LjQ1IDcuNzk2NDkgMTUuMzMxNUM3LjY0MDI0IDE1LjIxMzEgNy4zNTg5OSAxNS4wODgxIDYuOTUyNzQgMTQuOTU2NUM2LjU0NjQ5IDE0LjgyNSA2LjIyNDg4IDE0LjY5NTUgNS45ODc5IDE0LjU2NzlDNS4zNDIwNiAxNC4yMTg5IDUuMDE5MTUgMTMuNzQ4OSA1LjAxOTE1IDEzLjE1NzdDNS4wMTkxNSAxMi44NTA0IDUuMTA1NzQgMTIuNTc2MyA1LjI3ODkxIDEyLjMzNTVDNS40NTIwOSAxMi4wOTQ2IDUuNzAwNzkgMTEuOTA2NCA2LjAyNTAxIDExLjc3MUM2LjM0OTIzIDExLjYzNTYgNi43MTMxNiAxMS41Njc5IDcuMTE2OCAxMS41Njc5QzcuNTIzMDUgMTEuNTY3OSA3Ljg4NTAzIDExLjY0MTQgOC4yMDI3NCAxMS43ODg2QzguNTIwNDUgMTEuOTM1NyA4Ljc2NzE5IDEyLjE0MzQgOC45NDI5NyAxMi40MTE2QzkuMTE4NzYgMTIuNjc5OSA5LjIwNjY1IDEyLjk4NDUgOS4yMDY2NSAxMy4zMjU3SDguMDM0NzdDOC4wMzQ3NyAxMy4wNjUzIDcuOTUyNzQgMTIuODYyOCA3Ljc4ODY4IDEyLjcxODNDNy42MjQ2MiAxMi41NzM3IDcuMzk0MTUgMTIuNTAxNSA3LjA5NzI3IDEyLjUwMTVDNi44MTA4MSAxMi41MDE1IDYuNTg4MTYgMTIuNTYyIDYuNDI5MyAxMi42ODMxQzYuMjcwNDUgMTIuODA0MiA2LjE5MTAyIDEyLjk2MzcgNi4xOTEwMiAxMy4xNjE2QzYuMTkxMDIgMTMuMzQ2NSA2LjI4NDEyIDEzLjUwMTUgNi40NzAzMiAxMy42MjY1QzYuNjU2NTIgMTMuNzUxNSA2LjkzMDYxIDEzLjg2ODcgNy4yOTI1OCAxMy45NzhDNy45NTkyNSAxNC4xNzg2IDguNDQ0OTMgMTQuNDI3MyA4Ljc0OTYyIDE0LjcyNDFDOS4wNTQzIDE1LjAyMSA5LjIwNjY1IDE1LjM5MDggOS4yMDY2NSAxNS44MzM1QzkuMjA2NjUgMTYuMzI1NyA5LjAyMDQ1IDE2LjcxMTggOC42NDgwNSAxNi45OTE3Wk0zLjU1OTc3IDE3LjE4NTFDMy4yNjgxMSAxNy4zMzYxIDIuOTM4NjggMTcuNDExNiAyLjU3MTQ5IDE3LjQxMTZDMS45Njk5MyAxNy40MTE2IDEuNTAxMTggMTcuMjU4NiAxLjE2NTI0IDE2Ljk1MjZDMC44MjkzMDQgMTYuNjQ2NyAwLjY2MTMzNSAxNi4yMTM3IDAuNjYxMzM1IDE1LjY1MzhIMS44NDEwMkMxLjg0MTAyIDE1LjkzMjUgMS44OTk2MiAxNi4xMzgyIDIuMDE2OCAxNi4yNzFDMi4xMzM5OSAxNi40MDM4IDIuMzE4ODkgMTYuNDcwMiAyLjU3MTQ5IDE2LjQ3MDJDMi43OTU0NSAxNi40NzAyIDIuOTczODQgMTYuMzkzNCAzLjEwNjY1IDE2LjIzOThDMy4yMzk0NiAxNi4wODYxIDMuMzA1ODcgMTUuODY3NCAzLjMwNTg3IDE1LjU4MzVWMTEuNjQ2SDQuNDc3NzRWMTUuNTgzNUM0LjQ3Nzc0IDE1Ljk0NTUgNC4zOTc2NiAxNi4yNjUxIDQuMjM3NTEgMTYuNTQyNUM0LjA3NzM1IDE2LjgxOTggMy44NTE0NCAxNy4wMzQgMy41NTk3NyAxNy4xODUxWk0xMS44NTc0IDE3LjQxMTZDMTIuMzM0IDE3LjQxMTYgMTIuNzU2NSAxNy4yOTcgMTMuMTI1IDE3LjA2NzlDMTMuNDkzNSAxNi44Mzg3IDEzLjc3NjcgMTYuNTEzMiAxMy45NzQ2IDE2LjA5MTNDMTQuMTcyNSAxNS42Njk0IDE0LjI3MTUgMTUuMTc4NiAxNC4yNzE1IDE0LjYxODdWMTQuMzY0OEMxNC4yNzE1IDEzLjgwNzUgMTQuMTcwNiAxMy4zMTU5IDEzLjk2ODggMTIuODkwMUMxMy43NjY5IDEyLjQ2NDQgMTMuNDgxOCAxMi4xMzc1IDEzLjExMzMgMTEuOTA5N0MxMi43NDQ4IDExLjY4MTggMTIuMzIzNiAxMS41Njc5IDExLjg0OTYgMTEuNTY3OUMxMS4zNzU3IDExLjU2NzkgMTAuOTU0NCAxMS42ODE4IDEwLjU4NTkgMTEuOTA5N0MxMC4yMTc1IDEyLjEzNzUgOS45MzIzIDEyLjQ2NDQgOS43MzA0OCAxMi44OTAxQzkuNTI4NjUgMTMuMzE1OSA5LjQyNzc0IDEzLjgwODggOS40Mjc3NCAxNC4zNjg3VjE0LjY0OTlDOS40MzAzNSAxNS4xOTY4IDkuNTMzMjEgMTUuNjgwNSA5LjczNjM0IDE2LjEwMTFDOS45Mzk0NiAxNi41MjE3IDEwLjIyNTkgMTYuODQ1MiAxMC41OTU3IDE3LjA3MThDMTAuOTY1NSAxNy4yOTgzIDExLjM4NjEgMTcuNDExNiAxMS44NTc0IDE3LjQxMTZaTTEwLjkzNTYgMTUuOTcwMkMxMS4xNDkxIDE2LjI5MDUgMTEuNDU2NCAxNi40NTA3IDExLjg1NzQgMTYuNDUwN0MxMi4yNTA3IDE2LjQ1MDcgMTIuNTUyNyAxNi4yOTY0IDEyLjc2MzcgMTUuOTg3OEMxMi45NzQ2IDE1LjY3OTIgMTMuMDgxNCAxNS4yMjkzIDEzLjA4NCAxNC42MzgyVjE0LjM2MDhDMTMuMDg0IDEzLjc2NDUgMTIuOTc3MiAxMy4zMTE0IDEyLjc2MzcgMTMuMDAxNUMxMi41NTAxIDEyLjY5MTYgMTIuMjQ1NCAxMi41MzY2IDExLjg0OTYgMTIuNTM2NkMxMS40NTY0IDEyLjUzNjYgMTEuMTUzIDEyLjY4OTYgMTAuOTM5NSAxMi45OTU2QzEwLjcyNTkgMTMuMzAxNiAxMC42MTc4IDEzLjc1MDIgMTAuNjE1MiAxNC4zNDEzVjE0LjYxODdDMTAuNjE1MiAxNS4xOTk0IDEwLjcyMiAxNS42NDk5IDEwLjkzNTYgMTUuOTcwMlpNMTUuODk0OSAxNy4zMzM1VjEzLjU5MTNMMTguMTc2MiAxNy4zMzM1SDE5LjM0ODFWMTEuNjQ2SDE4LjE4MDFWMTUuMzk2TDE1Ljg5NDkgMTEuNjQ2SDE0LjcyMzFWMTcuMzMzNUgxNS44OTQ5WiIgZmlsbD0iI0I2QzJDRCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIuNTcxNTMgMTcuNDExNkMyLjkzODcyIDE3LjQxMTYgMy4yNjgxNSAxNy4zMzYxIDMuNTU5ODEgMTcuMTg1MUMzLjg1MTQ4IDE3LjAzNCA0LjA3NzM5IDE2LjgxOTggNC4yMzc1NSAxNi41NDI1QzQuMzk3NyAxNi4yNjUxIDQuNDc3NzggMTUuOTQ1NSA0LjQ3Nzc4IDE1LjU4MzVWMTEuNjQ2SDMuMzA1OTFWMTUuNTgzNUMzLjMwNTkxIDE1Ljg2NzQgMy4yMzk1IDE2LjA4NjEgMy4xMDY2OSAxNi4yMzk3QzIuOTczODggMTYuMzkzNCAyLjc5NTQ5IDE2LjQ3MDIgMi41NzE1MyAxNi40NzAyQzIuMzE4OTMgMTYuNDcwMiAyLjEzNDAzIDE2LjQwMzggMi4wMTY4NSAxNi4yNzFDMS44OTk2NiAxNi4xMzgyIDEuODQxMDYgMTUuOTMyNSAxLjg0MTA2IDE1LjY1MzhIMC42NjEzNzdDMC42NjEzNzcgMTYuMjEzNyAwLjgyOTM0NiAxNi42NDY2IDEuMTY1MjggMTYuOTUyNkMxLjUwMTIyIDE3LjI1ODYgMS45Njk5NyAxNy40MTE2IDIuNTcxNTMgMTcuNDExNlpNNy4xNDQxOSAxNy40MTE2QzcuNzc0NCAxNy40MTE2IDguMjc1NyAxNy4yNzE2IDguNjQ4MDkgMTYuOTkxN0M5LjAyMDQ5IDE2LjcxMTggOS4yMDY2OSAxNi4zMjU3IDkuMjA2NjkgMTUuODMzNUM5LjIwNjY5IDE1LjM5MDggOS4wNTQzNCAxNS4wMjEgOC43NDk2NiAxNC43MjQxQzguNDQ0OTcgMTQuNDI3MiA3Ljk1OTI5IDE0LjE3ODUgNy4yOTI2MyAxMy45NzhDNi45MzA2NSAxMy44Njg3IDYuNjU2NTYgMTMuNzUxNSA2LjQ3MDM2IDEzLjYyNjVDNi4yODQxNiAxMy41MDE1IDYuMTkxMDYgMTMuMzQ2NSA2LjE5MTA2IDEzLjE2MTZDNi4xOTEwNiAxMi45NjM3IDYuMjcwNDkgMTIuODA0MiA2LjQyOTM1IDEyLjY4MzFDNi41ODgyIDEyLjU2MiA2LjgxMDg2IDEyLjUwMTUgNy4wOTczMSAxMi41MDE1QzcuMzk0MTkgMTIuNTAxNSA3LjYyNDY2IDEyLjU3MzcgNy43ODg3MiAxMi43MTgzQzcuOTUyNzggMTIuODYyOCA4LjAzNDgxIDEzLjA2NTMgOC4wMzQ4MSAxMy4zMjU3SDkuMjA2NjlDOS4yMDY2OSAxMi45ODQ1IDkuMTE4OCAxMi42Nzk5IDguOTQzMDIgMTIuNDExNkM4Ljc2NzI0IDEyLjE0MzQgOC41MjA0OSAxMS45MzU3IDguMjAyNzggMTEuNzg4NkM3Ljg4NTA3IDExLjY0MTQgNy41MjMxIDExLjU2NzkgNy4xMTY4NSAxMS41Njc5QzYuNzEzMiAxMS41Njc5IDYuMzQ5MjcgMTEuNjM1NiA2LjAyNTA1IDExLjc3MUM1LjcwMDgzIDExLjkwNjQgNS40NTIxMyAxMi4wOTQ2IDUuMjc4OTUgMTIuMzM1NEM1LjEwNTc4IDEyLjU3NjMgNS4wMTkxOSAxMi44NTA0IDUuMDE5MTkgMTMuMTU3N0M1LjAxOTE5IDEzLjc0ODkgNS4zNDIxMSAxNC4yMTg5IDUuOTg3OTQgMTQuNTY3OUM2LjIyNDkyIDE0LjY5NTUgNi41NDY1MyAxNC44MjUgNi45NTI3OCAxNC45NTY1QzcuMzU5MDMgMTUuMDg4MSA3LjY0MDI4IDE1LjIxMzEgNy43OTY1MyAxNS4zMzE1QzcuOTUyNzggMTUuNDUgOC4wMzA5MSAxNS42MiA4LjAzMDkxIDE1Ljg0MTNDOC4wMzA5MSAxNi4wNDQ0IDcuOTUyNzggMTYuMjAyNiA3Ljc5NjUzIDE2LjMxNTlDNy42NDAyOCAxNi40MjkyIDcuNDIyODMgMTYuNDg1OCA3LjE0NDE5IDE2LjQ4NThDNi4zOTQxOSAxNi40ODU4IDYuMDE5MTkgMTYuMTcyIDYuMDE5MTkgMTUuNTQ0NEg0Ljg0MzQxQzQuODQzNDEgMTUuOTExNiA0LjkzNzgxIDE2LjIzNDUgNS4xMjY2MSAxNi41MTMyQzUuMzE1NDEgMTYuNzkxOCA1LjU4OTUgMTcuMDExMiA1Ljk0ODg4IDE3LjE3MTRDNi4zMDgyNSAxNy4zMzE1IDYuNzA2NjkgMTcuNDExNiA3LjE0NDE5IDE3LjQxMTZaTTExLjg1NzUgMTcuNDExNkMxMi4zMzQgMTcuNDExNiAxMi43NTY2IDE3LjI5NyAxMy4xMjUgMTcuMDY3OUMxMy40OTM1IDE2LjgzODcgMTMuNzc2NyAxNi41MTMyIDEzLjk3NDcgMTYuMDkxM0MxNC4xNzI2IDE1LjY2OTQgMTQuMjcxNSAxNS4xNzg1IDE0LjI3MTUgMTQuNjE4N1YxNC4zNjQ3QzE0LjI3MTUgMTMuODA3NSAxNC4xNzA2IDEzLjMxNTkgMTMuOTY4OCAxMi44OTAxQzEzLjc2NyAxMi40NjQ0IDEzLjQ4MTggMTIuMTM3NSAxMy4xMTMzIDExLjkwOTdDMTIuNzQ0OCAxMS42ODE4IDEyLjMyMzYgMTEuNTY3OSAxMS44NDk3IDExLjU2NzlDMTEuMzc1NyAxMS41Njc5IDEwLjk1NDUgMTEuNjgxOCAxMC41ODYgMTEuOTA5N0MxMC4yMTc1IDEyLjEzNzUgOS45MzIzNCAxMi40NjQ0IDkuNzMwNTIgMTIuODkwMUM5LjUyODY5IDEzLjMxNTkgOS40Mjc3OCAxMy44MDg4IDkuNDI3NzggMTQuMzY4N1YxNC42NDk5QzkuNDMwMzkgMTUuMTk2OCA5LjUzMzI1IDE1LjY4MDUgOS43MzYzOCAxNi4xMDExQzkuOTM5NSAxNi41MjE2IDEwLjIyNiAxNi44NDUyIDEwLjU5NTggMTcuMDcxOEMxMC45NjU1IDE3LjI5ODMgMTEuMzg2MSAxNy40MTE2IDExLjg1NzUgMTcuNDExNlpNMTEuODU3NSAxNi40NTA3QzExLjQ1NjQgMTYuNDUwNyAxMS4xNDkxIDE2LjI5MDUgMTAuOTM1NiAxNS45NzAyQzEwLjcyMjEgMTUuNjQ5OSAxMC42MTUzIDE1LjE5OTQgMTAuNjE1MyAxNC42MTg3VjE0LjM0MTNDMTAuNjE3OSAxMy43NTAyIDEwLjcyNiAxMy4zMDE2IDEwLjkzOTUgMTIuOTk1NkMxMS4xNTMgMTIuNjg5NiAxMS40NTY0IDEyLjUzNjYgMTEuODQ5NyAxMi41MzY2QzEyLjI0NTUgMTIuNTM2NiAxMi41NTAyIDEyLjY5MTYgMTIuNzYzNyAxMy4wMDE1QzEyLjk3NzMgMTMuMzExNCAxMy4wODQgMTMuNzY0NSAxMy4wODQgMTQuMzYwOFYxNC42MzgyQzEzLjA4MTQgMTUuMjI5MyAxMi45NzQ3IDE1LjY3OTIgMTIuNzYzNyAxNS45ODc4QzEyLjU1MjggMTYuMjk2NCAxMi4yNTA3IDE2LjQ1MDcgMTEuODU3NSAxNi40NTA3Wk0xNS44OTUgMTcuMzMzNVYxMy41OTEzTDE4LjE3NjIgMTcuMzMzNUgxOS4zNDgxVjExLjY0NkgxOC4xODAxVjE1LjM5NkwxNS44OTUgMTEuNjQ2SDE0LjcyMzFWMTcuMzMzNUgxNS44OTVaIiBmaWxsPSIjMzI0NTU4Ii8+Cjwvc3ZnPgo="},function(e,t,a){e.exports={container:"v7G9tmJJiZiPTjYulk-uk",selectContainer:"_2JbUzk0qVPxow2dv37yVtn",icon:"_3dvVq4Wja1r855of5vz4Vz",title:"_2iY4A3tvAD8fqWCX7YbXzW",desc:"_2Qz6RDrQb0PqcjJChLpZ51",uploadContainer:"_2FoLzMRXXZB1NAvaVl4r1y",uploadingContent:"M6eVRzcbprHTXlq43-qL",fileInfo:"_93kbv_HMX_E4Nb61U_YCJ",fileName:"_3Z0oHIHL6-rqZ80URIlaWt",uploadText:"_2ToMbKmVtBJZXrzMUJsa0A",progress:"_2kNei8kEcBntfnpeptiCS",uploadIcon:"_1QevqqsDTqOPEx8RnmcIon",none:"_3Th3hjQg4wakFUvbxe0l0F"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{title:"BASIC_INFORMATION",icon:"dashboard",component:r(a(2912)).default,required:!0}];t.default=n},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(18),r(16),r(98),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(18),r(42),r(16),r(98),r(10),r(4),r(23),r(57),r(17);var l,o=n(r(96)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(239),m=n(r(26)),v=n(r(74)),h=n(r(63)),E=n(r(135)),y=r(186),g=n(r(1680)),b=r(72),S=n(r(1681)),_=n(r(2914));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var C=(0,p.observer)(l=function(e){(0,s.default)(r,e);var a=O(r);function r(e){var n;if((0,u.default)(this,r),(n=a.call(this,e)).templateSettingsOpts=Object.entries(n.templateSettings).map((function(e){var a=(0,o.default)(e,2),r=a[0],n=a[1];return{value:r,image:n.logo,label:"Custom"===n.name?t("CUSTOM"):n.name,description:n.description}})),n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a,namespace:n.props.namespace,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleTemplateChange=function(e){(0,v.default)(n.formTemplate,"spec",(0,m.default)(n.templateSettings,"".concat(e,".settings"),{})),n.forceUpdate()},(0,h.default)(n.formTemplate.spec)){var l=Object.keys(n.templateSettings)[0],c=(0,E.default)(n.templateSettings[l].settings);(0,v.default)(n.formTemplate,"spec",c)}return n}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return d.default.createElement(y.Form,{data:this.formTemplate,ref:e},d.default.createElement(y.Columns,null,d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:b.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},d.default.createElement(y.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},d.default.createElement(y.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),d.default.createElement(y.Form.Item,{label:d.default.createElement("div",{className:_.default.templateLabel},d.default.createElement("h3",null,t("TEMPLATE")),d.default.createElement("p",null,t("CUSTOM_MONITORING_TEMPLATE_DESC")))},d.default.createElement(g.default,{name:"spec.title",className:_.default.templateList,options:this.templateSettingsOpts,onChange:this.handleTemplateChange})))}},{key:"templateSettings",get:function(){return(0,E.default)(S.default)}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,m.default)(t,b.MODULE_KIND_MAP[a],t)}}]),r}(d.default.Component))||l;a.default=C},function(e,t,a){e.exports={container:"_9NWeMBAss3j4dAfPXgl7q",selected:"_23vK4ncmS9GHYl5k5YaN4J"}},function(e,t,a){e.exports={templateList:"KSUx0GMOtSywAxVTF3PGQ",templateLabel:"F1e1CyJJ9gzhTQLwN8RyP"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(210),r(11),r(6),r(200),r(29),r(48),r(16),r(9),r(13),r(10),r(4),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(210),r(249),r(45),r(11),r(6),r(200),r(160),r(29),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(24),r(193),r(17),r(38),r(7),r(32);var l=n(r(30)),o=n(r(58)),u=n(r(240)),c=n(r(787)),s=n(r(825)),i=n(r(2916)),f=n(r(2950)),d=n(r(26)),p=n(r(74)),m=n(r(435));function v(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){u=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(u)throw l}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={"customScaling.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,i=(e.isFederated,e.success),d=(0,o.default)(e,["store","cluster","namespace","module","isFederated","success"]),p=m.default[l]({namespace:n}),v=c.default.open(y({onOk:function(e){if(!e)return!1;a.create(S(e),{cluster:r,namespace:n}).then((function(){c.default.close(v),u.default.success({content:t("CREATE_SUCCESSFUL")}),i&&i()}))},module:l,cluster:r,namespace:n,formTemplate:p,steps:f.default,modal:s.default,store:a},d))}},"customScaling.edit.setting":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,s=e.detail,f=(e.isFederated,e.success),d=(0,o.default)(e,["store","cluster","namespace","module","detail","isFederated","success"]),p=c.default.open(y({onOk:function(e){if(!e)return!1;a.update(s,S(e)).then((function(){c.default.close(p),u.default.success({content:t("UPDATE_SUCCESSFUL")}),f&&f()}))},module:l,cluster:r,namespace:n,detail:s,modal:i.default,store:a},d))}}};a.default=g;var b=["spec.minReplicaCount","spec.maxReplicaCount","spec.pollingInterval","spec.cooldownPeriod"],S=function(e){var t,a=v(b);try{for(a.s();!(t=a.n()).done;){var r=t.value;""===(0,d.default)(e,r)&&(0,p.default)(e,r,void 0)}}catch(e){a.e(e)}finally{a.f()}return e}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(58)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(787)),h=n(r(828)),E=n(r(1682)),y=n(r(830)),g=n(r(63)),b=r(14),S=r(239),_=n(r(1)),O=n(r(0)),C=n(r(2949));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var R=(0,S.observer)((u=o=function(e){(0,d.default)(r,e);var a=T(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleOk=function(){t.formRef&&t.formRef,t.formRef.current&&t.formRef.current.validate((function(){var e=t.formRef.current.getData();t.props.onOk(e)}))},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.state={formData:(0,y.default)((0,b.toJS)(e.detail._originData||e.detail)),subRoute:{}},t.formRef=O.default.createRef(),t}return(0,f.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}},{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,y.default)((0,b.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,g.default)(e)?null:O.default.createElement(h.default,{className:C.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=(0,s.default)(e,["visible","onCancel","isSubmitting"]);return O.default.createElement(v.default,{title:t("EDIT_CUSTOM_SCALING"),icon:"pen",visible:a,width:960,onOk:this.handleOk,onCancel:r,isSubmitting:n},O.default.createElement(E.default,(0,c.default)({},l,{formTemplate:this.state.formData,formRef:this.formRef})),this.renderSaveBar())}}]),r}(O.default.Component),o.propTypes={detail:_.default.object,onOk:_.default.func,onCancel:_.default.func,isSubmitting:_.default.bool},o.defaultProps={detail:{},isSubmitting:!1,onOk:function(){},onCancel:function(){}},o.childContextTypes={registerSubRoute:_.default.func,resetSubRoute:_.default.func},l=u))||l;a.default=R},,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={checkableText:"_1378_TRL04zqUXeEdYsZn6",triggerWrapper:"_3xQnYdf3Q4wcKIOP9stZam",title:"_3BU5g_iU-O8KOi_T9yQh8I",desc:"_2UB_Yg9e0vkZC2Jg9xbtM"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(29),r(18),r(4),r(316),r(23),r(17),r(324),r(38),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(29),r(18),r(42),r(4),r(316),r(23),r(57),r(17),r(324),r(38),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(32);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(829)),d=n(r(799)),p=n(r(63)),m=n(r(0)),v=n(r(2939)),h=n(r(2940));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).policiesValidator=function(a,r,n){if(r.length>0){if(new Set(r.map((function(e){return e.type}))).size!==r.length)return void n(t("POLICY_TYPE_DUPLICATED"));r.every((function(t){return e.checkItemValid(t)}))||n(t("EMPTY_POLICY_MESSAGE"))}n()},e.checkItemValid=function(e){return!(0,p.default)(e)&&Object.values(e).every((function(e){return void 0!==e&&""!==e}))},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.prefix,r="scaleUp"===e.type?"EXPANSION_STRATEGY":"SCALING_STRATEGY";return m.default.createElement("div",{className:v.default.wrapper},m.default.createElement("div",{className:v.default.title},t(r)),m.default.createElement("div",{className:v.default.contentWrapper},m.default.createElement(i.Columns,null,m.default.createElement(i.Column,null,m.default.createElement(i.Form.Item,{label:t("POLICY_PREFERENCE"),desc:t("POLICY_PREFERENCE_DESC")},m.default.createElement(i.Select,{name:"".concat(a,".selectPolicy"),options:[{label:t("TENDS_TO_SCALE_SIGNIFICANTLY"),value:"Max"},{label:t("TENDS_TO_EXPAND_SLIGHTLY"),value:"Min"},{label:t("SCALE_DISABLE"),value:"Disabled"}],defaultValue:"Max"}))),m.default.createElement(i.Column,null,m.default.createElement(i.Form.Item,{label:t("STABILIZATION_WINDOW_SECONDS"),desc:t("STABILIZATION_WINDOW_SECONDS_DESC")},m.default.createElement(d.default,{name:"".concat(a,".stabilizationWindowSeconds"),integer:!0,min:0})))),m.default.createElement("div",{className:v.default.polices},m.default.createElement(i.Form.Group,null,m.default.createElement(i.Form.Item,{rules:[{validator:this.policiesValidator,checkOnSubmit:!0}]},m.default.createElement(f.default,{name:"".concat(a,".policies"),itemType:"object",addText:t("ADD"),checkItemValid:this.checkItemValid},m.default.createElement(h.default,null)))))))}}]),r}(m.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"jFCoYhpnGhYRcS1QvI2uD",title:"_1gW9vDU9n16HaSVvFzrJvF",contentWrapper:"_1Q43wihGB-cA4A_oU381-F",polices:"_11tysHczkx95E3l_OS1yA9"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=n(r(1098)),p=n(r(799)),m=n(r(800)),v=n(r(0)),h=n(r(2941));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=[{label:t("PODS"),value:"Pods"},{label:t("PERCENT"),value:"Percent"}],g=function(e){(0,c.default)(r,e);var a=E(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).triggerChange=(0,m.default)((function(){var e=t.state,a=e.type,r=e.value,n=e.periodSeconds;t.props.onChange({type:a,value:r,periodSeconds:n})}),300),t.handleChange=function(e,a){t.setState((0,l.default)({},a,e),(function(){return t.triggerChange()}))},t.state=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.value,r=e.periodSeconds;return{type:t,value:a,periodSeconds:r}}(e.value),t}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.triggerChange()}},{key:"render",value:function(){var e=this,a=this.state,r=a.value,n=a.type,l=a.periodSeconds;return v.default.createElement("div",{className:h.default.wrapper},v.default.createElement(d.default,{prefix:t("POLICY_TYPE")},v.default.createElement(f.Select,{name:"type",value:n,options:y,onChange:function(t){return e.handleChange(t,"type")}})),v.default.createElement(d.default,{prefix:t("EXPANSION_VALUE")},v.default.createElement(p.default,{name:"value",value:r,min:0,integer:!0,onChange:function(t){return e.handleChange(t,"value")}})),v.default.createElement(d.default,{prefix:t("ACTIVATION_TIME")},v.default.createElement(p.default,{name:"periodSeconds",integer:!0,min:0,value:l,onChange:function(t){return e.handleChange(t,"periodSeconds")}})))}}]),r}(v.default.Component);a.default=g,g.defaultProps={value:{},onChange:function(){}}},function(e,t,a){e.exports={wrapper:"M54xui62otMloHUrIMpt_",tip:"_3aRuzDuGBQbBlvi2Gucjkc"}},function(e,a,r){"use strict";r(15);var n=r(20);r(84),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=n(r(816)),h=r(239),E=r(186),y=r(881),g=r(72),b=n(r(2943)),S=n(r(2944)),_=n(r(2945)),O=n(r(1367));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var t;(0,c.default)(this,r),(t=a.call(this,e)).handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){var a=t.props.onSave,r=t.formRef.current;r&&r.validate((function(){var t=r.getData();a(t),e&&e()}))},t.renderTrigger=function(){var e;switch(t.state.triggerType){case"cron":e=p.default.createElement(b.default,null);break;case"prometheus":e=p.default.createElement(S.default,null);break;default:e=p.default.createElement(_.default,null)}return e},t.handleChange=function(e){t.setState({triggerType:e,formData:{}})},t.formRef=p.default.createRef();var n=["cron","prometheus"].includes(e.trigger.type);return t.state={formData:e.trigger,triggerType:e.trigger.type?n?e.trigger.type:"custom":"cron"},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.onCancel,t=this.context.registerSubRoute;t&&t(this.handleSubmit,e)}},{key:"render",value:function(){var e=this.state,a=e.formData,r=e.triggerType;return p.default.createElement("div",{className:O.default.wrapper},p.default.createElement("div",{className:"h6"},p.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},p.default.createElement(y.ReactComponent,null)),t("ADD_TRIGGER")),p.default.createElement("div",{className:O.default.contentWrapper},p.default.createElement("div",{className:O.default.card},p.default.createElement(E.Form,{data:a,ref:this.formRef},p.default.createElement("div",null,t("TRIGGER_TYPE")),p.default.createElement(E.Form.Item,null,p.default.createElement(v.default,{value:r,options:g.CREATE_TRIGGER_TYPE_OPTIONS,onChange:this.handleChange})),p.default.createElement("div",{className:"form-group"},this.renderTrigger())))))}}]),r}(p.default.Component),o.defaultProps={onSave:function(){},onCancel:function(){}},o.contextTypes={registerSubRoute:m.default.func,resetSubRoute:m.default.func},l=u))||l;a.default=T},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=r(479),p=n(r(1367));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).validateCron=function(e,a,r){if(!a)return r();try{(0,d.parseExpression)(a)}catch(e){return r(t("CRON_EXPRESSION_ERROR_DESC"))}r()},e}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:p.default.hidden},i.default.createElement(f.Form.Item,null,i.default.createElement(f.Input,{name:"type",defaultValue:"cron",disabled:!0}))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("TIME_ZONE"),desc:t("CRON_TIME_ZONE_DESC")},i.default.createElement(f.Input,{name:"metadata.timezone",defaultValue:"Asia/Shanghai"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("REPLICAS_DESIRED"),desc:t("REPLICAS_DESIRED_CRON_TRIGGER_DESC")},i.default.createElement(f.Input,{name:"metadata.desiredReplicas"})))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("CRON_START"),desc:t("CRON_START_DESC"),rules:[{validator:this.validateCron}]},i.default.createElement(f.Input,{name:"metadata.start"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("CRON_END"),desc:t("CRON_END_DESC"),rules:[{validator:this.validateCron}]},i.default.createElement(f.Input,{name:"metadata.end"})))))}}]),r}(i.default.Component);a.default=v},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(10),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(842)),d=n(r(0)),p=n(r(1367));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).validateTogglerAuthor=function(e,a,r){if(a){var n=Object.keys(a);n.length&&"name"!==n[0]?r(t("TRIGGER_AUTHENTICATION_KEY_EQ_NAME")):r()}else r()},e}return(0,o.default)(r,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:p.default.hidden},d.default.createElement(i.Form.Item,null,d.default.createElement(i.Input,{name:"type",defaultValue:"prometheus",disabled:!0}))),d.default.createElement(i.Columns,null,d.default.createElement(i.Column,null,d.default.createElement(i.Form.Item,{label:t("ADDRESS"),desc:t("PROMETHUS_ADDRESS")},d.default.createElement(i.Input,{name:"metadata.serverAddress"}))),d.default.createElement(i.Column,null,d.default.createElement(i.Form.Item,{label:t("INDICATOR_NAME"),desc:t("INDICATOR_NAME_PROMETHUS_DESC")},d.default.createElement(i.Input,{name:"metadata.metricName"})))),d.default.createElement(i.Columns,null,d.default.createElement(i.Column,null,d.default.createElement(i.Form.Item,{label:t("THRESHOLD"),desc:t("THRESHOLD_PROMETHUS_DESC")},d.default.createElement(i.Input,{name:"metadata.threshold"}))),d.default.createElement(i.Column,null,d.default.createElement(i.Form.Item,{label:t("EXPRESSION"),desc:t("EXPRESSION_PROMETHUS_DESC")},d.default.createElement(i.Input,{name:"metadata.query"})))),d.default.createElement(i.Form.Item,{label:t("TOGGLER_AUTHOR"),rules:[{validator:this.validateTogglerAuthor}]},d.default.createElement(f.default,{name:"authenticationRef",addText:t("ADD"),maxLen:1})))}}]),r}(d.default.Component);a.default=v},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(1037),r(1038),r(98),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(1037),r(1038),r(42),r(98),r(10),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(842)),d=n(r(0));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).validateToggler=function(e,a,r){if(a){var n=Object.entries(a).flat();!n.length||n.every(Boolean)?r():r(t("LABEL_KEY_VALUE_CANNOT_BE_EMPTY"))}else r()},e.validateTogglerAuthor=function(e,a,r){if(a){var n=Object.keys(a);n.length&&"name"!==n[0]?r(t("TRIGGER_AUTHENTICATION_KEY_EQ_NAME")):r()}else r()},e}return(0,o.default)(r,[{key:"render",value:function(){return d.default.createElement(d.default.Fragment,null,d.default.createElement(i.Columns,null,d.default.createElement(i.Column,null,d.default.createElement(i.Form.Item,{label:t("TYPE"),rules:[{required:!0,message:t("EMPTY_TYPE_TRIGGER")}]},d.default.createElement(i.Input,{name:"type"}))),d.default.createElement(i.Column,null)),d.default.createElement(i.Form.Item,{label:t("TOGGLER_PARAMS"),rules:[{validator:this.validateToggler}]},d.default.createElement(f.default,{name:"metadata",addText:t("ADD")})),d.default.createElement(i.Form.Item,{label:t("TOGGLER_AUTHOR"),rules:[{validator:this.validateTogglerAuthor}]},d.default.createElement(f.default,{name:"authenticationRef",addText:t("ADD"),maxLen:1,rules:[{validator:this.validateTogglerAuthor}]})))}}]),r}(d.default.Component);a.default=m},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(192),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(192),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(63)),p=n(r(812)),m=n(r(2947)),v=n(r(2948));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleAddTrigger=function(){e.props.onShowTrigger()},e.handleEdit=function(t,a){e.props.onShowEdit(t,a)},e.handleDelete=function(t){var a=e.props,r=a.value,n=a.onChange;r.splice(t,1),n(r)},e}return(0,o.default)(r,[{key:"renderAddTrigger",value:function(){return i.default.createElement(p.default.Add,{onClick:this.handleAddTrigger,title:t("ADD_TRIGGER"),description:t("ADD_TRIGGER_DESC")})}},{key:"render",value:function(){var e=this,t=this.props.value;return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement("div",{className:v.default.content},!(0,d.default)(t)&&i.default.createElement("ul",{className:v.default.list},t.map((function(t,a){return i.default.createElement(m.default,{trigger:t,key:a,index:a,onEdit:e.handleEdit,onDelete:e.handleDelete})}))),this.renderAddTrigger()))}}]),r}(i.default.Component);a.default=E,E.defaultProps={prefix:"",onChange:function(){},onShowTrigger:function(){},onShowEdit:function(){}},E.contextTypes={formData:f.default.object}},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),a(31),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(315));a(12),a(109),a(31),a(4);var l=r(a(0)),o=r(a(1)),u=r(a(451)),c=r(a(812)),s=a(72),i=function(e){var t=e.trigger,a=e.onDelete,r=e.onEdit,o=e.index,i={};a&&(i.onDelete=function(){return a(o)}),r&&(i.onEdit=function(){return r(t,o)});var f=s.CREATE_TRIGGER_TYPE_OPTIONS.find((function(e){return e.value===t.type}))||s.CREATE_TRIGGER_TYPE_OPTIONS[2];return l.default.createElement(c.default.Item,(0,n.default)({icon:f.icon,title:(0,u.default)(t.type),description:f.description},i))};i.propTypes={container:o.default.object};var f=i;t.default=f},function(e,t,a){e.exports={wrapper:"_2RvL6Llw-aFnLKDdPhjxN7",list:"FdV3QCuZltFyjiiHymA5L"}},function(e,t,a){e.exports={confirm:"_3GatSk-ySQ9VFV36akCHyQ"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(2951)),l=r(a(1682)),o=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"SCALING_SETTINGS",icon:"stretch",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(26)),d=n(r(74)),p=n(r(0)),m=r(72),v=n(r(2952)),h=n(r(2957));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).onShowAdd=function(){t.setState({visible:!0,workloadData:{}})},t.onShowEdit=function(e){t.setState({visible:!0,workloadData:e})},t.resetState=function(){t.setState({visible:!1,workloadData:{}})},t.onSave=function(e){(0,d.default)(t.props.formTemplate,"spec.scaleTargetRef.name",e.name),(0,d.default)(t.props.formTemplate,"spec.scaleTargetRef.apiVersion","apps/v1"),(0,d.default)(t.props.formTemplate,"metadata.name",e.name),t.setState({visible:!1,workloadData:{}})},t.selectContainer=function(e){(0,d.default)(t.props.formTemplate,"spec.scaleTargetRef.envSourceContainerName",e)},t.state={visible:!1,workloadData:{}},t}return(0,o.default)(r,[{key:"renderWorkloadTableForm",value:function(){var e=this.props,t=e.formTemplate,a=e.cluster,r=e.namespace;return p.default.createElement(h.default,{formTemplate:t,cluster:a,namespace:r,onSave:this.onSave,onCancel:this.resetState})}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.maxNameLength,l=void 0===n?253:n,o=e.cluster,u=e.namespace;if(this.state.visible)return this.renderWorkloadTableForm();var c=253===l?t("LONG_NAME_DESC"):t("NAME_DESC");return p.default.createElement(i.Form,{ref:a,data:r},p.default.createElement(i.Columns,null,p.default.createElement(i.Column,null,p.default.createElement(i.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:c})}]},p.default.createElement(i.Input,{name:"metadata.name",maxLength:l,disabled:!0}))),p.default.createElement(i.Column,null,p.default.createElement(i.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:m.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},p.default.createElement(i.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(i.Columns,null,p.default.createElement(i.Column,null,p.default.createElement(i.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(i.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),p.default.createElement(i.Form.Item,{label:t("SCALING_OBJECT"),rules:[{required:!0,message:t("EMPTY_SCALING_OBJECT_MESSAGE")}]},p.default.createElement(v.default,{name:"spec.scaleTargetRef.name",scaleTargetRef:(0,f.default)(this.props.formTemplate,"spec.scaleTargetRef"),onShowAdd:this.onShowAdd,onShowEdit:this.onShowEdit,onCancel:this.resetState,cluster:o,selectContainer:this.selectContainer,namespace:u})))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,f.default)(this.props.formTemplate,"metadata.namespace")}}]),r}(p.default.Component);a.default=y},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(43)),o=n(r(30)),u=n(r(61));r(41);var c=n(r(44)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=r(186),v=n(r(812)),h=n(r(816)),E=n(r(0)),y=n(r(318)),g=n(r(2953)),b=n(r(1688));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=O(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).state={detail:{}},e.onShowAdd=function(){e.props.onShowAdd()},e.handleEdit=function(t){e.props.onShowEdit(t)},e.handleDelete=function(){(0,e.props.onChange)(void 0)},e.getWorkloadDetail=(0,c.default)(l.default.mark((function a(){var r,n,o,c,s,i,f,d,p,m,v,h,E;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=e.props,o=n.scaleTargetRef,c=n.namespace,s=n.cluster,(i=o).name&&i.kind){a.next=4;break}return a.abrupt("return");case 4:return f=i.kind.toLowerCase(),d="".concat(f,"s"),p=new y.default(d),a.next=9,p.fetchDetail({namespace:c,cluster:s,name:i.name});case 9:m=a.sent,v=null!==(r=null==m?void 0:m.initContainers)&&void 0!==r?r:[],h=[].concat((0,u.default)(m.containers),(0,u.default)(v)),E=h.map((function(e){return{icon:"docker",value:e.name,label:e.name,description:t("ENV_CONTAINER")}})),e.selectContainer(h[0].name),e.setState({detail:_(_({},m),{},{module:d}),containerOptions:E,container:h[0].name});case 15:case"end":return a.stop()}}),a)}))),e.selectContainer=function(t){e.props.selectContainer(t)},e.renderContainerSelector=function(){return E.default.createElement(h.default,{value:e.state.container,options:e.state.containerOptions,onChange:e.selectContainer})},e}return(0,i.default)(r,[{key:"renderAddComponent",value:function(){return E.default.createElement(v.default.Add,{onClick:this.onShowAdd,title:t("ADD_WORKLOAD"),description:t("ADD_WORKLOAD_DESC")})}},{key:"componentDidMount",value:function(){this.getWorkloadDetail()}},{key:"render",value:function(){var e=this.props.value,a=this.state.detail;return E.default.createElement("div",{className:b.default.wrapper},e?E.default.createElement("div",null,E.default.createElement(g.default,{detail:a,onEdit:null,onDelete:null,action:E.default.createElement(m.Button,{className:b.default.action,onClick:this.handleEdit},t("RESELECT"))}),this.renderContainerSelector()):this.renderAddComponent())}}]),r}(E.default.Component);a.default=C,C.defaultProps={onChange:function(){},onShowAdd:function(){},onShowEdit:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(790)),d=n(r(26)),p=n(r(63)),m=n(r(804)),v=n(r(865)),h=n(r(1)),E=n(r(0)),y=r(52),g=r(72),b=r(434),S=n(r(1688));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var O=function(e){(0,u.default)(r,e);var a=_(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"getDescription",value:function(e){var a=(0,b.getWorkloadStatus)(e,e.module),r=a.status,n=a.reason;if(n)return E.default.createElement(m.default,{status:r,reason:t(n),data:e});var l=e.updateTime,o=e.createTime;return l?t("UPDATED_AGO",{diff:(0,y.getLocalTime)(l).fromNow()}):t("CREATED_AGO",{diff:(0,y.getLocalTime)(o).fromNow()})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.onDelete,n=e.onEdit,l=e.action;if((0,p.default)(a))return null;var o=(0,d.default)(a,'annotations["deployment.kubernetes.io/revision"]');return E.default.createElement("div",{className:S.default.card},E.default.createElement(f.default,{icon:g.ICON_TYPES[a.module],title:(0,y.getDisplayName)(a),description:this.getDescription(a)}),E.default.createElement(f.default,{title:E.default.createElement(v.default,{data:a,module:a.module}),description:t("STATUS")}),E.default.createElement(f.default,{title:o?"#".concat(o):"-",description:t("REVISION_RECORD")}),E.default.createElement("div",{className:"buttons"},r&&E.default.createElement(i.Button,{type:"flat",icon:"trash",onClick:r}),n&&E.default.createElement(i.Button,{type:"flat",icon:"pen",onClick:n}),l))}}]),r}(E.default.Component);a.default=O,O.propTypes={className:h.default.string,detail:h.default.object},O.defaultProps={detail:{},onDelete:function(){},onEdit:function(){}}},,,,function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=r(186),v=r(881),h=n(r(74)),E=r(14),y=r(239),g=n(r(1)),b=n(r(0)),S=n(r(318)),_=n(r(1368)),O=n(r(2958));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R={deployments:"Deployment",statefulsets:"StatefulSet"},D=(0,y.observer)((u=o=function(e){(0,f.default)(r,e);var a=T(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleGoBack=function(){var e=t.context.resetSubRoute;e&&e(),t.props.onCancel()},t.handleSubmit=function(e){(0,t.props.onSave)(t.state.workloadData),e&&e()},t.handleTypeChange=function(e){var a=t.props.formTemplate;(0,h.default)(a,"spec.scaleTargetRef.kind",R[e]),t.store=new S.default(e),t.setState({type:e,workloadData:void 0})},t.fetchList=function(e){var a=t.props,r=a.namespace,n=a.cluster;t.store.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({cluster:n,namespace:r,labelSelector:"!autoscaling.kubeshpere.io/name",annotation:"!kubesphere.io/relatedHPA"},e))},t.handleSelectWorkload=function(e){t.setState({workloadData:e})},t.state={type:"deployments",workloadData:void 0},t.store=new S.default("deployments"),t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.onCancel,t=this.context.registerSubRoute;t&&t(this.handleSubmit,e);var a=this.props.formTemplate;(0,h.default)(a,"spec.scaleTargetRef.kind",R.deployments)}},{key:"render",value:function(){var e=this.state,a=e.type,r=e.workloadData;return b.default.createElement("div",{className:_.default.wrapper},b.default.createElement("div",{className:"h6"},b.default.createElement("a",{className:"icon",onClick:this.handleGoBack},b.default.createElement(v.ReactComponent,null)),t("ADD_WORKLOAD")),b.default.createElement("div",{className:_.default.content},b.default.createElement(m.RadioGroup,{mode:"button",buttonWidth:155,value:a,onChange:this.handleTypeChange},b.default.createElement(m.RadioButton,{value:"deployments"},t("DEPLOYMENT_PL")),b.default.createElement(m.RadioButton,{value:"statefulsets"},t("STATEFULSET_PL"))),b.default.createElement("div",{className:_.default.tableWrapper},b.default.createElement(O.default,{key:a,fetchList:this.fetchList,list:(0,E.toJS)(this.store.list),module:a,checkedValue:r,handleSelectWorkload:this.handleSelectWorkload}))))}}]),r}(b.default.Component),o.contextTypes={registerSubRoute:g.default.func,resetSubRoute:g.default.func},l=u))||l;a.default=D},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(188),r(7);var l,o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(863)),m=r(186),v=r(239),h=n(r(2959)),E=n(r(1368));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=(0,v.observer)(l=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).handleSearch=function(t){e.props.fetchList({name:t},!0)},e.handleRefresh=function(){var t=e.props.page;e.props.fetchList({limit:10,page:t})},e.clearFilter=function(){e.handleSearch()},e.renderEmpty=function(){return d.default.createElement("div",{className:E.default.emptyText},d.default.createElement("span",{className:E.default.emptyTipIcon},d.default.createElement(m.Icon,{name:"exclamation",size:48})),d.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),d.default.createElement("p",null,t("YOU_CAN_TRY_TO"),d.default.createElement("span",{className:E.default.action,onClick:e.handleRefresh,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),d.default.createElement("span",{className:E.default.action,onClick:e.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS"))))},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.props.list.total<1&&this.props.fetchList()}},{key:"render",value:function(){var e=this.props,a=e.list,r=e.fetchList,n=e.handleSelectWorkload,l=e.checkedValue,o=e.module,u=a.data,c=a.total,s=a.page,i=a.isLoading;return d.default.createElement("div",null,d.default.createElement(m.InputSearch,{className:E.default.search,value:a.filters.name,onSearch:this.handleSearch,placeholder:t("SEARCH_BY_NAME")}),d.default.createElement("div",{className:E.default.cardList},c<1?this.renderEmpty():d.default.createElement(p.default,{data:u,total:c,page:s,loading:i,onFetch:r},u.map((function(e,t){return d.default.createElement(h.default,{detail:g(g({},e),{},{module:o}),key:t,onClick:function(){return n(e)},isChecked:l&&l.name===e.name})})))))}}]),r}(d.default.Component))||l;a.default=S},function(e,a,r){"use strict";r(15);var n=r(20);r(84),r(10),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(42),r(10),r(4),r(23),r(57),r(17),r(85);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(790)),d=n(r(26)),p=n(r(804)),m=n(r(865)),v=n(r(1)),h=n(r(0)),E=r(52),y=r(72),g=r(434),b=n(r(1368));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,u.default)(r,e);var a=S(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"getDescription",value:function(e){var a=(0,g.getWorkloadStatus)(e,e.module),r=a.status,n=a.reason;if(n)return h.default.createElement(p.default,{status:r,reason:t(n),data:e});var l=e.updateTime,o=e.createTime;return l?t("UPDATED_AGO",{diff:(0,E.getLocalTime)(l).fromNow()}):t("CREATED_AGO",{diff:(0,E.getLocalTime)(o).fromNow()})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.onClick,n=e.isChecked;if(!a)return null;var l=(0,d.default)(a,'annotations["deployment.kubernetes.io/revision"]'),o=a.labels,u=Object.keys(o).includes("autoscaling.kubeshpere.io/name"),c=!!(0,d.default)(a,"annotations['kubesphere.io/relatedHPA']");return h.default.createElement("div",{className:b.default.card,onClick:function(){r&&r()}},h.default.createElement(i.Radio,{checked:n,disabled:u||c},h.default.createElement(f.default,{icon:y.ICON_TYPES[a.module],title:(0,E.getDisplayName)(a),description:this.getDescription(a)}),h.default.createElement(f.default,{title:h.default.createElement(m.default,{data:a,module:a.module}),description:t("STATUS")}),"deployments"===a.module?h.default.createElement(f.default,{title:l?"#".concat(l):"-",description:t("REVISION_RECORD")}):null))}}]),r}(h.default.Component);a.default=_,_.propTypes={className:v.default.string,detail:v.default.object},_.defaultProps={detail:{},onDelete:function(){},onEdit:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(22),r(196),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(196),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(787)),i=n(r(240)),f=n(r(1182));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={"devops.credential.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,d=e.workspace,m=e.devops,v=e.formTemplate,h=(0,c.default)(e,["store","success","cluster","workspace","devops","formTemplate"]),E=s.default.open(p({onOk:(a=(0,o.default)(l.default.mark((function e(a,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handleCreate(a,{devops:m,cluster:u}).finally((function(){o&&o()}));case 2:s.default.close(E),i.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),store:r,cluster:u,workspace:d,devops:m,formTemplate:v,modal:f.default},h))}},"devops.credential.edit":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,d=e.workspace,m=e.devops,v=e.formTemplate,h=(0,c.default)(e,["store","success","cluster","workspace","devops","formTemplate"]),E=s.default.open(p({onOk:(a=(0,o.default)(l.default.mark((function e(a,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateCredential(a,{devops:m,cluster:u}).finally((function(){o&&o()}));case 2:s.default.close(E),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),store:r,cluster:u,workspace:d,devops:m,formTemplate:v,modal:f.default},h))}}};a.default=m},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(326),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(61));r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(326),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var i=n(r(135)),f=n(r(26)),d=n(r(74)),p=n(r(240)),m=n(r(787)),v=n(r(2962)),h=n(r(2964)),E=n(r(2965)),y=n(r(824));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e){if(e.length>0){var t=new Map,a=[];return e.forEach((function(a){var r=a.name;if(r){var n=e.filter((function(e){return e.name===r}));t.set(r,n)}})),t.has("*")?a=(0,s.default)(t.get("*")):(t.forEach((function(e){var t=e.length&&e.filter((function(e){return"*"===e.namespace}));t.length>0?a.push(t[0]):a=a.concat(e)})),a)}return e},_={"devops.create":{on:function(e){var a=e.store,r=e.workspace,n=e.success,l=(0,c.default)(e,["store","workspace","success"]),o=m.default.open(b({onOk:function(e){var l=(0,f.default)(e,"spec.placement.cluster");a.create(e,{cluster:l,workspace:r}).then((function(){m.default.close(o),p.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n(l)}))},formTemplate:{},modal:v.default,store:a,workspace:r,hideCluster:!globals.app.isMultiCluster},l))}},"devops.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(b({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:h.default,detail:r,store:a},l))}},"devops.edit.allowlist":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),v=m.default.open(b({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,s,h,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,i.default)(a),c=(0,f.default)(o,"spec.argo.sourceRepos",[]),s=(0,f.default)(o,"spec.argo.destinations",[]),(h=c.filter((function(e){return"*"===e}))).length>0&&(0,d.default)(o,"spec.argo.sourceRepos",h),E=S(s),(0,d.default)(o,"spec.argo.destinations",E),e.next=9,r.editAllowlist(n,o);case 9:m.default.close(v),p.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:E.default,store:r},s))}},"devops.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,s=(0,c.default)(e,["store","success","rowKey"]),i=r.list,f=i.data,d=i.selectedRowKeys,v=f.filter((function(e){return d.includes(e[u])})).map((function(e){return e.name})),h=m.default.open(b({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],f.forEach((function(e){d.includes(e[u])&&a.push(r.delete(e))})),e.next=4,Promise.all(a);case 4:m.default.close(h),p.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:1===v.length?t("DELETE_DEVOPS_PROJECT"):t("DELETE_MULTIPLE_DEVOPS_PROJECTS"),desc:1===v.length?t.html("DELETE_DEVOPS_PROJECT_TIP",{resource:v.join(", ")}):t.html("DELETE_DEVOPS_PROJECT_TIP_PL",{resource:v.join(", ")}),resource:v.join(", "),modal:y.default,store:r},s))}}};a.default=_},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(16),r(98),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c=n(r(96)),s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=r(186),h=n(r(787)),E=n(r(814)),y=n(r(26)),g=n(r(63)),b=n(r(972)),S=r(239),_=n(r(1)),O=n(r(0)),C=n(r(445)),T=r(72),R=r(916),D=n(r(528)),N=n(r(2963));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var A=(0,S.observer)((u=o=function(e){(0,d.default)(r,e);var a=P(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).valueRenderer=function(e){return O.default.createElement(E.default,{cluster:e.cluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return O.default.createElement(O.default.Fragment,null,O.default.createElement(E.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0}),e.disabled&&O.default.createElement("div",{className:N.default.toolmessage},O.default.createElement("span",null,e.cluster.isReady?t("NO_DEVOPS_INSTALL"):t("UNREADY"))))},n.nameValidator=function(e,a,r){if(!a)return r();var l=n.props,o=l.formTemplate,u=l.workspace,c=(0,y.default)(o,"spec.placement.cluster");n.store.checkDevopsName({cluster:c,workspace:u,name:a},(0,R.compareVersion)(n.ksVersion,"3.4.0")<0).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleClusterChange=function(){if(n.nameRef&&n.nameRef.current){var e="metadata.generateName";n.formRef&&n.formRef.current&&!(0,g.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(e),n.nameRef.current.validate((0,s.default)({},e,(0,y.default)(n.props.formTemplate,e)))}},n.store=e.store,n.workspaceStore=new C.default,n.nameRef=O.default.createRef(),n.formRef=O.default.createRef(),n.state={clusters:{}},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.props.hideCluster||this.fetchClusters()}},{key:"fetchClusters",value:function(e){var t=this;D.default.get("/apis/kubesphere.io/v1alpha1/extensions/devops").then((function(e){var a={},r=(0,y.default)(e,"status.clusterSchedulingStatuses",{});Object.entries(r).forEach((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];a[r]="Installed"===(null==n?void 0:n.state)})),t.setState({clusters:a})})),this.workspaceStore.fetchClusters(I(I({},e),{},{workspace:this.props.workspace}))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.hideCluster,l=e.onOk,o=e.onCancel;return O.default.createElement(h.default.Form,{width:960,bodyClassName:N.default.body,data:r,onCancel:o,onOk:l,visible:a,closable:!1,hideHeader:!0,formRef:this.formRef},O.default.createElement("div",{className:N.default.header},O.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),O.default.createElement("div",{className:N.default.title},O.default.createElement("div",null,t("CREATE_DEVOPS_PROJECT")),O.default.createElement("p",null,t("DEVOPS_PROJECT_CREATE_DESC")))),O.default.createElement("div",{className:N.default.content},O.default.createElement(v.Columns,null,O.default.createElement(v.Column,null,O.default.createElement(v.Form.Item,{label:t("NAME"),desc:t("SERVICE_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:T.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("SERVICE_NAME_DESC")})},{validator:this.nameValidator}]},O.default.createElement(v.Input,{name:"metadata.generateName",autoFocus:!0,maxLength:63}))),O.default.createElement(v.Column,null,O.default.createElement(v.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:T.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},O.default.createElement(v.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),O.default.createElement(v.Columns,null,!n&&O.default.createElement(v.Column,null,O.default.createElement(v.Form.Item,{label:t("CLUSTER_SETTINGS"),rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},O.default.createElement(v.Select,{name:"spec.placement.cluster",className:N.default.cluster,options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,defaultValue:this.defaultCluster,onChange:this.handleClusterChange,showTip:!0}))),O.default.createElement(v.Column,null,O.default.createElement(v.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},O.default.createElement(v.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))))))}},{key:"networkOptions",get:function(){return[{label:t("OFF"),value:""},{label:t("ON"),value:"enabled"}]}},{key:"clusters",get:function(){var e=this.state.clusters;return this.workspaceStore.clusters.data.map((function(t){return{label:t.name,value:t.name,cluster:t,disabled:!t.isReady||!e[t.name]}}))}},{key:"defaultCluster",get:function(){var e=this.props.cluster,t=this.clusters.filter((function(e){return!e.disabled})).map((function(e){return e.value}));return t.find((function(t){return t===e}))||t[0]}},{key:"ksVersion",get:function(){var e=this.props.formTemplate,t=(0,y.default)(e,"spec.placement.cluster"),a=globals.app.isMultiCluster?(0,y.default)(globals,"clusterConfig.".concat(t,".ksVersion"),(0,y.default)(this.workspaceStore.clusters.data.find((function(e){return e.name===t})),"configz.ksVersion")):(0,y.default)(globals,"ksConfig.ksVersion");return(0,b.default)(a,"v")}}]),r}(O.default.Component),o.propTypes={formTemplate:_.default.object,visible:_.default.bool,isSubmitting:_.default.bool,onOk:_.default.func,onCancel:_.default.func},o.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=A},function(e,t,a){e.exports={body:"_3ZKoSqYFw5BRXmnCMUCyhC",header:"_3W-QAW13W4dowCBvjkJ7-y",title:"_22NqdZtvVEOVr9kv6bDsWN",toolmessage:"_370UWtm3Xf9odgtqYFtvAL",content:"Uz1mMt6FKA96vAT7roymt",cluster:"_2w41wf42xuXfsCbwGPlYQf",itemOption:"ZAVdNzefGlD04KWsBC5i_",itemValue:"_2ZXSuKSm_TuXXuyXCcojy-",group:"_3mcpkjmNOwaJzL-_WcWPpG"}},function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=r(186),m=n(r(787)),v=n(r(26)),h=r(14),E=r(239),y=n(r(1)),g=n(r(0)),b=n(r(322)),S=r(72);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,E.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleOk=function(e){(0,t.props.onOk)(e)},t.form=g.default.createRef(),t.store=new b.default,e.detail.workspace&&t.store.fetchList({limit:1/0,workspace:e.detail.workspace}),t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){var t=(0,v.default)(this.props,"detail.workspace");t&&t!==(0,v.default)(e,"detail.workspace")&&this.store.fetchMembers({limit:1/0,workspace:t})}},{key:"getMembersOptions",value:function(){return(0,h.toJS)(this.store.list).data.map((function(e){return{label:e.username,value:e.username}}))}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onCancel,l=e.isSubmitting;return g.default.createElement(m.default.Form,{width:691,title:t("EDIT_INFORMATION"),icon:"pen",data:a,onOk:this.handleOk,onCancel:n,isSubmitting:l,visible:r},g.default.createElement(p.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:S.PATTERN_NAME,message:t("PATTERN_NAME_INVALID_TIP")}]},g.default.createElement(p.Input,{name:"name",disabled:!0})),g.default.createElement(p.Form.Item,{label:t("CREATOR"),desc:t("DEVOPS_ADMIN_DESC")},g.default.createElement(p.Select,{name:"creator",options:this.getMembersOptions(),disabled:!0})),g.default.createElement(p.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:S.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},g.default.createElement(p.Input,{name:"aliasName",maxLength:63})),g.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},g.default.createElement(p.TextArea,{maxLength:256,name:"description"})))}}]),r}(g.default.Component),o.propTypes={detail:y.default.object,visible:y.default.bool,onOk:y.default.func,onCancel:y.default.func,isSubmitting:y.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(61)),u=n(r(43));r(41);var c=n(r(44)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(829)),h=n(r(1)),E=r(186),y=n(r(787)),g=n(r(846)),b=n(r(26)),S=n(r(158)),_=n(r(323)),O=n(r(1194)),C=r(14),T=n(r(2966)),R=n(r(2967));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var I=function(e){(0,f.default)(r,e);var a=k(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=a.call.apply(a,[this].concat(l))).state={formTemplate:{},options:[],clusters:[],isLoading:!1},e.store=new _.default,e.cdStore=new O.default,e.formRef=m.default.createRef(),e.init=(0,c.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.initFormTemplate();case 3:return t.next=5,e.fetchClusters();case 5:e.setState({isLoading:!1});case 6:case"end":return t.stop()}}),t)}))),e.fetchClusters=(0,c.default)(u.default.mark((function a(){var r,n;return u.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.cdStore.getClustersList();case 2:r=e.cdStore.clustersList.map((function(e){return{label:e.label,value:e.name,server:e.server}})),n={label:t("ALL"),value:"*",server:"*"},e.setState({clusters:[n].concat((0,o.default)(r))});case 5:case"end":return a.stop()}}),a)}))),e.initFormTemplate=function(){e.store.fetchDetail(N({},e.props)).then((function(){var t=(0,b.default)((0,C.toJS)(e.store.detail),"_originData.spec.argo",{});e.setState({formTemplate:{spec:{argo:t}}})}))},e.checkItemValid=function(e){return""!==e},e.sourceReposValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){return n.includes(e)?r({message:t("CODE_REPOSITORY_EXIST_DESC")}):e?void n.push(e):r({message:t("REPO_EMPTY_DESC")})}))}r()},e.destinationsValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){var a=n.find((function(t){return t.namespace===e.namespace&&t.cluster===e.name}));return(0,S.default)(a)?e.name&&!e.namespace?r({message:t("PROJECT_NOT_SELECT_DESC")}):void n.push({namespace:e.namespace,cluster:e.name}):r({message:t("DEPLOYMENT_LOCATION_EXIST_DESC")})}))}r()},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.onOk,l=e.devops,o=e.cluster;return m.default.createElement(y.default.Form,{width:960,title:t("EDIT_ALLOWLIST"),data:this.state.formTemplate,onCancel:r,onOk:n,visible:a,formRef:this.formRef},this.state.isLoading?m.default.createElement(E.Loading,{spinning:this.state.isLoading},m.default.createElement(g.default,{desc:"NO_DATA"})):m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Form.Item,{label:t("CODE_REPO_PL"),rules:[{validator:this.sourceReposValidator}]},m.default.createElement(v.default,{name:"spec.argo.sourceRepos",addText:t("ADD"),itemType:"string",checkItemValid:this.checkItemValid},m.default.createElement(R.default,{devops:l,cluster:o}))),m.default.createElement(E.Form.Item,{label:t("DEPLOYMENT_LOCATION_PL"),rules:[{validator:this.destinationsValidator}]},m.default.createElement(v.default,{name:"spec.argo.destinations",itemType:"object",addText:t("ADD")},m.default.createElement(T.default,{clusters:this.state.clusters,formtemplate:this.state.formTemplate})))))}}]),r}(m.default.Component);a.default=I,I.propTypes={formTemplate:h.default.object,visible:h.default.bool,isSubmitting:h.default.bool,onOk:h.default.func,onCancel:h.default.func},I.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(43)),u=n(r(30));r(41);var c,s,i,f,d=n(r(44)),p=n(r(65)),m=n(r(36)),v=n(r(37)),h=n(r(88)),E=n(r(55)),y=n(r(56)),g=n(r(51)),b=n(r(49)),S=(n(r(66)),r(186)),_=n(r(867)),O=n(r(26)),C=n(r(63)),T=n(r(241)),R=n(r(74)),D=r(14),N=r(239),k=n(r(0)),I=n(r(439)),P=r(52),A=n(r(1689));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,g.default)(e);if(t){var n=(0,g.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,y.default)(this,a)}}var j={label:t("ALL"),value:"*",icon:"allowlist"},x=(0,N.observer)((s=function(e){(0,E.default)(n,e);var a,r=L(n);function n(){var e;(0,m.default)(this,n);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return(e=r.call.apply(r,[this].concat(l))).projectStore=new I.default,e.state={formData:{}},(0,p.default)(e,"cluster",i,(0,h.default)(e)),e.fetchNamespaces=(0,d.default)(o.default.mark((function t(){var a,r,n=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.length>0&&void 0!==n[0]?n[0]:{},"*"!==(r=(0,P.inCluster2Default)(e.cluster))){t.next=6;break}e.projectStore.list.update({data:[],isLoading:!1}),t.next=9;break;case 6:if(!r||"*"===r){t.next=9;break}return t.next=9,e.projectStore.fetchList(M(M({cluster:r},a),{},{type:"user"}));case 9:case"end":return t.stop()}}),t)}))),e.projectOptionRenderer=function(e){return k.default.createElement("span",{className:A.default.option},e.isFedManaged?k.default.createElement("img",{className:A.default.indicator,src:"/assets/cluster.svg"}):k.default.createElement(S.Icon,{name:"project"}),e.label,e.isFedManaged&&k.default.createElement(S.Tooltip,{content:t("MULTI_CLUSTER_PROJECT_NOT_FOR_CD")},k.default.createElement(S.Icon,{className:A.default.tip,name:"question"})))},(0,p.default)(e,"handleClusterChange",f,(0,h.default)(e)),e.handleChange=function(t){e.props.onChange(M({},t))},e.checkDestinationsValid=function(e){return!(0,C.default)(e)&&e.name&&e.namespace&&e.server},e}return(0,v.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(a=(0,d.default)(o.default.mark((function e(){var t,a,r,n,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.destinations[this.props.index]||{},a=t.name,r=t.namespace,!a){e.next=10;break}return l=this.clusters.find((function(e){return e.value===a}))||{},this.cluster=l.value,(0,R.default)(this.state.formData,"name",(0,O.default)(this.clusters,l.value)),(0,R.default)(this.state.formData,"server",(0,O.default)(this.clusters,l.server)),e.next=8,this.fetchNamespaces();case 8:u=this.namespaces.find((function(e){return e.value===r})),(0,R.default)(this.state.formData,"namespace",null!==(n=null==u?void 0:u.value)&&void 0!==n?n:"");case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e,a=this.props.value;return k.default.createElement(_.default,{value:a,onChange:this.handleChange},k.default.createElement(S.Select,{name:"name",key:null===(e=this.props.value)||void 0===e?void 0:e.name,placeholder:t("CLUSTER"),options:this.clusters,onChange:this.handleClusterChange,prefixIcon:k.default.createElement(S.Icon,{name:"cluster",size:16}),showTip:!0}),k.default.createElement(S.Select,{name:"namespace",placeholder:t("PROJECT"),options:this.namespaces,pagination:(0,T.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,searchable:!0}))}},{key:"clusters",get:function(){return this.props.clusters.map((function(e){return M(M({},e),{},{label:k.default.createElement("span",null,(0,P.showNameAndAlias)(e.label,"cluster"))})}))}},{key:"destinations",get:function(){return(0,O.default)(this.props.formtemplate,"spec.argo.destinations",[])}},{key:"namespaces",get:function(){var e=this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:(0,P.showNameAndAlias)(e),value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}));return this.cluster?[j].concat((0,l.default)(e)):e}}]),n}(k.default.Component),i=(0,b.default)(s.prototype,"cluster",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),(0,b.default)(s.prototype,"clusters",[D.computed],Object.getOwnPropertyDescriptor(s.prototype,"clusters"),s.prototype),f=(0,b.default)(s.prototype,"handleClusterChange",[D.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,d.default)(o.default.mark((function t(a){var r,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cluster=a,t.next=3,e.fetchNamespaces();case 3:r=e.clusters.find((function(e){return e.value===a})).server,n=e.namespaces[0].value,e.props.onChange({name:a,server:r,namespace:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),c=s))||c;a.default=x},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(43)),o=n(r(61)),u=n(r(30));r(41);var c=n(r(44)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=r(186),v=n(r(241)),h=n(r(0)),E=n(r(1109)),y=n(r(1689));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return(e=a.call.apply(a,[this].concat(u))).codeStore=new E.default,e.state={options:[]},e.getRepoList=function(){var a=(0,c.default)(l.default.mark((function a(r){var n,u,c,s,i;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props,u=n.devops,c=n.cluster,a.next=3,e.codeStore.fetchList(b({devops:u,cluster:c},r));case 3:s=e.codeStore.list.data.map((function(e){return{label:e.name,value:e.repoURL,icon:"bitbucket_server"===e.provider?"bitbucket":e.provider}})),i={label:t("ALL"),value:"*",icon:"allowlist"},e.setState({options:[i].concat((0,o.default)(s))});case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.repoOptionRenderer=function(e){return function(t){return h.default.createElement("span",{className:y.default.option},!!e.icon&&h.default.createElement(m.Icon,{name:e.icon,type:"value"===t?"dark":"light"}),e.label,"*"===e.value?"":" (".concat(e.value,")"))}},e}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.getRepoList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,r=t.index;return h.default.createElement(m.Select,{value:a,key:r,style:{maxWidth:"100%"},placeholder:" ",options:this.state.options,pagination:(0,v.default)(this.codeStore.list,["page","limit","total"]),isLoading:this.codeStore.list.isLoading,onFetch:this.getRepoList,valueRenderer:function(t){return e.repoOptionRenderer(t)("value")},optionRenderer:function(t){return e.repoOptionRenderer(t)("option")},clearable:!0,searchable:!0,onChange:this.props.onChange})}}]),r}(h.default.Component);a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(240)),o=n(r(787)),u=n(r(824)),c={"edgeNode.unbound.nodeGroup":{on:function(e){var a=e.resource,r=e.params,n=e.store,c=e.success,s=o.default.open({onOk:function(){n.removeNodeGroupEdgeNode(r).then((function(){l.default.success({content:t("UNBOUND_NODE_GROUP_SUCCESSFULLY")}),o.default.close(s),c&&c()}))},store:n,modal:u.default,resource:a,title:t("UNBOUND_NODE_GROUP"),desc:t.html("UNBOUND_NODE_GROUP_TIP",{resource:a,nodegroup:r.nodegroup})})}}};a.default=c},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(824)),d=n(r(1369)),p=n(r(2970)),m=n(r(2972)),v=n(r(135)),h=n(r(26)),E=n(r(63)),y=n(r(74)),g=n(r(861)),b=n(r(242)),S=r(14),_=n(r(437)),O=n(r(439)),C=r(52),T=n(r(2990)),R=n(r(435)),D=n(r(2991));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={"federated.baseinfo.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,f=e.projectStore,p=(0,c.default)(e,["store","detail","success","projectStore"]),m=i.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a,c={metadata:(0,v.default)((0,h.default)(a,"metadata"))},(0,y.default)(a,'spec.template.metadata.annotations["kubesphere.io/alias-name"]',(0,h.default)(a,'metadata.annotations["kubesphere.io/alias-name"]')),(0,C.updateFederatedAnnotations)(a),e.next=6,f.patch({workspace:n.workspace,name:n.name},c);case 6:r.patch(n,o).then((function(){i.default.close(m),s.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u()}));case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:n,modal:d.default,store:r},p))}},"federated.project.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,f=e.workspace,d=e.clusters,m=(0,c.default)(e,["store","success","cluster","workspace","clusters"]),E=i.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,y.default)(a,'metadata.annotations["kubesphere.io/creator"]',globals.user.username),(0,y.default)(a,'metadata.labels["kubesphere.io/workspace"]',f),o=(0,g.default)((0,h.default)(a,"spec.placement.clusters",[]).filter((function(e){return e.name})),"name"),u=new _.default(r),(0,y.default)(a,"spec.placement.clusters",o),c=(0,v.default)(a),(0,y.default)(c,'metadata.labels["kubesphere.io/kubefed-host-namespace"]',"true"),(0,y.default)(c,'metadata.labels["kubefed.io/managed"]',"false"),(0,b.default)(c,"spec.placement"),e.next=11,r.create(c,{workspace:f});case 11:return e.next=13,u.create(T.default.namespaces(a),{namespace:(0,h.default)(a,"metadata.name")});case 13:i.default.close(E),s.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 16:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:u,workspace:f,clusters:d,formTemplate:R.default.project(),modal:p.default,store:r},m))}},"federated.project.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=new O.default,u=i.default.open(k({onOk:function(){o.delete({name:r.name}).then((function(){i.default.close(u),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()}))},store:a,modal:f.default,resource:r.name,type:"MULTI_CLUSTER_PROJECT",isLoading:o.isLoading},l))}},"federated.project.delete.batch":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,d=(0,c.default)(e,["store","success","rowKey"]),p=new O.default,m=r.list,v=m.data,h=m.selectedRowKeys,E=v.filter((function(e){return h.includes(e[u])})).map((function(e){return e.name})),y=i.default.open(k({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],v.forEach((function(e){E.includes(e.name)&&a.push(p.delete({name:e.name}))})),e.next=4,Promise.all(a);case 4:i.default.close(y),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:E.join(", "),modal:f.default,store:r,isLoading:p.isLoading},d))}},"federated.workload.template.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.module,o=e.supportGpuSelect,u=void 0!==o&&o,f=(0,c.default)(e,["store","detail","success","module","supportGpuSelect"]),d=i.default.open(k({onOk:function(e){var l=(0,h.default)(e,"spec.overrides",[]);(0,C.multiCluster_overrides_Dot)(l);var o=(0,h.default)(e,"spec.template.spec.customMode",{});(0,E.default)(o)||delete e.spec.template.spec.customMode,a.update(r,e).then((function(){s.default.success({content:t("UPDATE_SUCCESSFUL")}),i.default.close(d),n&&n()}))},store:a,module:l||a.module,detail:(0,S.toJS)(r._originData),modal:m.default,type:r.type,workloadStore:a,isEdit:!0,supportGpuSelect:u,hideVolumeSetting:"statefulsets"===a.module},f))}},"federated.project.add.cluster":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(k({onOk:function(e){a.patch(r,e).then((function(){s.default.success({content:t("UPDATE_SUCCESSFUL")}),i.default.close(o),n&&n()}))},store:a,formTemplate:(0,S.toJS)(r._originData),modal:D.default},l))}}};a.default=I},function(e,a,r){"use strict";r(15);var n=r(20);r(197),r(29),r(18),r(16),r(9),r(4),r(22),r(23),r(17),r(38),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(197),r(29),r(18),r(42),r(16),r(9),r(4),r(22),r(23),r(57),r(17),r(38),r(32);var l=n(r(30)),o=n(r(43)),u=n(r(61));r(41);var c,s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(49)),g=r(186),b=n(r(787)),S=n(r(814)),_=n(r(829)),O=n(r(867)),C=n(r(26)),T=n(r(63)),R=n(r(74)),D=n(r(861)),N=r(14),k=r(239),I=n(r(1)),P=n(r(0)),A=r(72),w=n(r(2971));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var L=(0,k.observer)((f=i=function(e){(0,v.default)(r,e);var a=M(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).nameValidator=function(){var e=(0,d.default)(o.default.mark((function e(a,r,l){var c,s,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",l());case 2:return e.next=4,n.store.checkName({name:r});case 4:if(!e.sent.exist){e.next=7;break}return e.abrupt("return",l({message:t("PROJECT_NAME_EXISTS_IN_HOST"),field:a.field}));case 7:return c=(0,C.default)(n.props.formTemplate,"spec.placement.clusters",[]),e.next=10,Promise.all((0,u.default)(c.map((function(e){return n.store.checkName({name:r,cluster:e.name})}))));case 10:if(s=e.sent,!((i=s.findIndex((function(e){return e.exist})))>-1&&c[i])){e.next=14;break}return e.abrupt("return",l({message:t("PROJECT_NAME_EXISTS_IN_CLUSTER",{cluster:c[i].name}),field:a.field}));case 14:l();case 15:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.valueRenderer=function(e){return P.default.createElement(S.default,{cluster:e.cluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return P.default.createElement(S.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},n.handleClusterChange=function(e){if((0,R.default)(n.props.formTemplate,"spec.placement.clusters",(0,D.default)(e,"name")),n.nameRef&&n.nameRef.current){var t="metadata.name";n.formRef&&n.formRef.current&&!(0,T.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(t),n.nameRef.current.validate((0,l.default)({},t,(0,C.default)(n.props.formTemplate,t)))}},n.store=e.store,n.formRef=P.default.createRef(),n.nameRef=P.default.createRef(),n}return(0,m.default)(r,[{key:"renderClusters",value:function(){return P.default.createElement(g.Form.Group,{label:t("CLUSTER_PL"),desc:t("PROJECT_CLUSTER_SETTINGS_DESC")},P.default.createElement(g.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},P.default.createElement(_.default,{name:"spec.placement.clusters",addText:t("ADD_CLUSTER"),itemType:"object",onChange:this.handleClusterChange},P.default.createElement(O.default,null,P.default.createElement(g.Select,{name:"name",placeholder:" ",className:w.default.cluster,options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,showTip:!0})))))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.onOk,l=e.onCancel,o=e.isSubmitting;return P.default.createElement(b.default.Form,{width:960,formRef:this.formRef,bodyClassName:w.default.body,data:r,onCancel:l,onOk:n,visible:a,closable:!1,isSubmitting:o,hideHeader:!0},P.default.createElement("div",{className:w.default.header},P.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),P.default.createElement("div",{className:w.default.title},P.default.createElement("div",null,t("CREATE_MULTI_CLUSTER_PROJECT")),P.default.createElement("p",null,t("CREATE_MULTI_CLUSTER_PROJECT_DESC")))),P.default.createElement("div",{className:w.default.content},P.default.createElement(g.Columns,null,P.default.createElement(g.Column,null,P.default.createElement(g.Form.Item,{label:t("NAME"),desc:t("SERVICE_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:A.PATTERN_SERVICE_NAME,message:t("INVALID_NAME_DESC",{message:t("SERVICE_NAME_DESC")})},{validator:this.nameValidator}]},P.default.createElement(g.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),P.default.createElement(g.Column,null,P.default.createElement(g.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:A.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},P.default.createElement(g.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),P.default.createElement(g.Columns,null,P.default.createElement(g.Column,null,P.default.createElement(g.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},P.default.createElement(g.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),P.default.createElement(g.Column,null)),this.renderClusters()))}},{key:"networkOptions",get:function(){return[{label:t("OFF"),value:""},{label:t("ON"),value:"enabled"}]}},{key:"clusters",get:function(){return this.props.clusters.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}}]),r}(P.default.Component),i.propTypes={formTemplate:I.default.object,visible:I.default.bool,isSubmitting:I.default.bool,clusters:I.default.array,onOk:I.default.func,onCancel:I.default.func},i.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},s=f,(0,y.default)(s.prototype,"clusters",[N.computed],Object.getOwnPropertyDescriptor(s.prototype,"clusters"),s.prototype),c=s))||c;a.default=L},function(e,t,a){e.exports={body:"_2YFT-UtUl19RnIcDCBLrSX",header:"_2cYVq3DxoJtlCWF7n20jG",title:"_3JeOv7o2Iknp2JVawu8F0D",content:"_3FxY_7mBEqpROSZi3lNiqU",cluster:"ZBb_XLUwlhmbTirefNnWq",toolmessage:"_2Zd1xHbMCz9tv6jdf1MAn2"}},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1)),p=r(a(1123)),m=r(a(2976));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module]}}]),a}(f.default.Component);t.default=h,h.propTypes={module:d.default.string},h.defaultProps={module:"deployments"}},,,,function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1691)),l=r(a(1692)),o=r(a(1693)),u=r(a(1694)),c=r(a(2977)),s=r(a(2985)),i=r(a(1695)),f={deployments:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:o.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:u.default},{icon:"group",name:"deploymentMode",title:"POD_SCHEDULING_RULES",component:n.default},{icon:"forbid-right-duotone",name:"podMode",title:"POD_GRACE_PERIOD",component:i.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:c.default}],statefulsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:o.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:l.default},{icon:"forbid-right-duotone",name:"podMode",title:"POD_GRACE_PERIOD",component:i.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:u.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:c.default}],service:[{icon:"network-router",name:"editService",title:"SERVICE_SETTINGS",component:s.default},{title:"CLUSTER_DIFF",icon:"blue-green-deployment",name:"Diff Settings",component:c.default}]};t.default=f},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(84),r(18),r(16),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(84),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(63)),m=n(r(321)),v=n(r(74)),h=r(72),E=r(186),y=n(r(1333)),g=n(r(1611)),b=n(r(1612)),S=n(r(1613)),_=n(r(1614)),O=n(r(1615)),C=n(r(2978)),T=n(r(2980)),R=n(r(1331)),D=n(r(2982));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=N(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleLocal=function(t){e.formTemplate.spec.overrides.map((function(e){return t.includes(e.clusterName)||(0,p.default)(e.clusterOverrides)||(e.clusterOverrides=[]),e}));var a=[];t.forEach((function(e){a.push({name:e})})),(0,v.default)(e.formTemplate,"spec.placement.clusters",a)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.projectDetail,o=a.withService,u=a.formProps,c=a.module,s=a.isEdit,i=a.workspace,p=(0,m.default)(n.clusters,"name");return f.default.createElement("div",null,f.default.createElement(E.Form,(0,l.default)({data:this.formTemplate,ref:r},u),f.default.createElement(E.Form.Group,{label:t("CLUSTER")},f.default.createElement(E.Form.Item,null,f.default.createElement(R.default,{name:"clusters",options:this.clustersOption,defaultValue:this.defaultClusters,onChange:this.handleLocal}))),"service"===c&&s?null:f.default.createElement(E.Form.Group,{label:t("CONTAINER_IMAGE"),desc:t("CLUSTER_DIFF_CONTAINER_SETTINGS_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(g.default,(0,l.default)({formTemplate:e.formTemplate},t,u),(function(e){return f.default.createElement(D.default,(0,l.default)({isEdit:s},e,{workspace:i}))}))}))),this.showVolumeTemplate&&f.default.createElement(E.Form.Group,{label:t("VOLUME_TEMPLATE_SETTINGS"),desc:t("CLUSTER_VOLUME_DIFF_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(_.default,(0,l.default)({formTemplate:e.formTemplate},t),(function(e){return f.default.createElement(O.default,e)}))}))),f.default.createElement(E.Form.Group,{label:t("PORT_SETTINGS"),desc:t("CLUSTER_DIFF_PORT_SETTINGS_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},"service"===c&&s?function(t){return f.default.createElement(C.default,(0,l.default)({formTemplate:e.formTemplate,withService:o},t,u),(function(e){return f.default.createElement(T.default,e)}))}:function(t){return f.default.createElement(g.default,(0,l.default)({formTemplate:e.formTemplate,withService:o,serviceTemplate:(0,d.default)(e.props.formTemplate,"Service")},t,u),(function(e){return f.default.createElement(b.default,e)}))})),"service"===c&&s?null:f.default.createElement(E.Form.Group,{label:t("ENVIRONMENT_VARIABLE_PL"),desc:t("CLUSTER_DIFF_ENVIRONMENT_VARIABLES_DESC"),checkable:!0},f.default.createElement(y.default,{clusters:this.clusters,clustersDetail:p,namespace:this.namespace},(function(t){return f.default.createElement(g.default,(0,l.default)({formTemplate:e.formTemplate},t,u),(function(e){return f.default.createElement(S.default,e)}))})))))}},{key:"namespace",get:function(){return(0,d.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,h.MODULE_KIND_MAP[a],t)}},{key:"clusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[])}},{key:"clustersOption",get:function(){var e=this.props.projectDetail.clusters,t=[];return e.forEach((function(e){t.push({name:e.name,value:e.name,provider:e.provider})})),t}},{key:"showVolumeTemplate",get:function(){return"statefulsets"===this.props.module&&(0,d.default)(this.formTemplate,"spec.template.spec.volumeClaimTemplates")}},{key:"defaultClusters",get:function(){return(0,d.default)(this.formTemplate,"spec.placement.clusters",[]).map((function(e){return e.name}))}}]),r}(f.default.Component);a.default=k},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(5),a(11),a(31),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(17),a(75),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(31),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(75),a(7);var l=n(a(30)),o=n(a(61)),u=n(a(36)),c=n(a(37)),s=n(a(55)),i=n(a(56)),f=n(a(51)),d=n(a(26)),p=n(a(74)),m=n(a(63)),v=n(a(861)),h=n(a(60)),E=r(a(0)),y=n(a(3)),g=n(a(2979));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(a,e);var t=_(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={editContainer:""},e.showEdit=function(t){var a=e.props,r=a.onSelect,n=a.cluster;e.setState({editContainer:t.clusterName},(function(){r(n)}))},e.handleEdit=function(t){var a=t.data,r=e.props,n=r.cluster,l=r.formTemplate,u=r.onChange,c=[];a.ports.forEach((function(e){e.servicePort&&c.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})}));var s=[{path:"/spec/ports",value:c}],i=(0,d.default)(l,"spec.overrides",[]),f=i.find((function(e){return e.clusterName===n}));f?f.clusterOverrides=(0,v.default)([].concat(s,(0,o.default)(f.clusterOverrides||[])),"path"):i.push({clusterName:n,clusterOverrides:s}),(0,p.default)(l,"spec.overrides",i),e.setState({editContainer:""}),u()},e.renderContainer=function(t){var a=e.props,r=a.children,n=a.selected,o=e.state.editContainer;return E.default.createElement("div",{key:t.name,className:(0,y.default)(g.default.wrapper,(0,l.default)({},g.default.selected,n))},r(S(S({},e.props),{},{containerType:"worker",formData:t,isEdit:o===t.clusterName,showEdit:e.showEdit,onEdit:e.handleEdit})))},e}return(0,c.default)(a,[{key:"getContainer",value:function(e){var t=this.props,a=t.cluster,r=t.formTemplate,n=(0,d.default)(r,"spec.overrides",[]).find((function(e){return e.clusterName===a}))||{},l={path:"/spec/ports",value:e};n&&!(0,m.default)(n.clusterOverrides)&&n.clusterOverrides.forEach((function(e){if(e&&e.path.startsWith("/spec/ports")){var t=e.value;!(0,m.default)(t)&&(0,h.default)(t)||(t=(0,d.default)(r,"spec.template.spec.ports")),(0,p.default)(l,"value",t)}}));var o=l.value.map((function(e){return{name:e.name,protocol:e.protocol,servicePort:e.port,containerPort:e.targetPort}}));return{clusterName:a,ports:o}}},{key:"render",value:function(){var e=this.props.formTemplate,t=(0,d.default)(e,"spec.template.spec.ports",[]),a=this.getContainer(t);return E.default.createElement(E.default.Fragment,null,this.renderContainer(a,"worker"))}}]),a}(E.Component);t.default=O},function(e,t,a){e.exports={wrapper:"_10qAPtNu0wFuyojJ9ol8zs",selected:"gG0AbN0FtgLTYXYx6Uk00"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(241)),m=l(r(1051)),v=l(r(1097)),h=l(r(2981));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,s.default)(r,e);var a=E(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleSubmit=function(t){var a=e.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,p.default)(t,["ports"])})},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formData,r=e.containerType,n=e.withService,l="init"!==r&&n,u=d.default.createElement(d.default.Fragment,null,a.ports&&a.ports.map((function(e,a){return d.default.createElement("div",{key:a,className:h.default.port},d.default.createElement("span",null,"".concat(t("PROTOCOL"),": ").concat(e.protocol)),d.default.createElement("span",null,"".concat(t("NAME"),": ").concat(e.name)),d.default.createElement("span",null,"".concat(t("CONTAINER_PORT"),": ").concat(e.containerPort)),l&&d.default.createElement("span",null,"".concat(t("SERVICE_PORT"),": ").concat(e.servicePort)))})));return d.default.createElement(m.default,(0,o.default)({},this.props,{title:u,onOk:this.handleSubmit}),d.default.createElement(v.default,{withService:"init"!==r&&n}))}}]),r}(d.Component);a.default=y},function(e,t,a){e.exports={port:"_1BuMHNg2pwGj5c5dHEdMpg"}},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(6),r(29),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(29),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var o,u,c,s=n(r(315)),i=n(r(30)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=l(r(0)),E=n(r(26)),y=n(r(189)),g=n(r(1094)),b=n(r(158)),S=n(r(1)),_=r(239),O=r(14),C=n(r(885)),T=n(r(913)),R=r(52),D=r(248),N=n(r(1051)),k=n(r(851)),I=n(r(2983));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var M=(0,_.observer)((c=u=function(e){(0,p.default)(r,e);var a=w(r);function r(e){var t;return(0,f.default)(this,r),(t=a.call(this,e)).handleSubmit=function(e){var a=t.props,r=a.index,n=a.containerType;(0,a.onEdit)({index:r,containerType:n,data:(0,y.default)(e,"type")})},t.quotaStore=new C.default,t.workspaceQuotaStore=new T.default,t.imageRegistryStore=new k.default,t.state={availableQuota:{},imageRegistries:[],imageDetail:{}},t}return(0,d.default)(r,[{key:"getChildContext",value:function(){var e=this;return{imageDetail:this.state.imageDetail,setImageDetail:function(t){e.setState({imageDetail:t})}}}},{key:"componentDidMount",value:function(){this.fetchQuota(),this.fetchImageSecret()}},{key:"fetchImageSecret",value:function(){var e=this,t=this.props,a=t.cluster,r=t.namespace;this.imageRegistryStore.fetchListByK8s({cluster:a,namespace:r,fieldSelector:"type=kubernetes.io/dockerconfigjson"}).then((function(t){e.setState({imageRegistries:t})}))}},{key:"fetchQuota",value:function(){var e=this,t=this.props,a=t.cluster,r=t.workspace,n=t.namespace;r&&n&&Promise.all([this.quotaStore.fetch({cluster:a,namespace:n}),this.workspaceQuotaStore.fetchDetail({name:r,workspace:r,cluster:a})]).then((function(){var t=(0,O.toJS)(e.quotaStore.data.hard),a=(0,D.getLeftQuota)((0,E.default)(e.workspaceQuotaStore.detail,"status.total"),e.quotaStore.data),r=a.namespace,n=a.workspace;e.setState({availableQuota:{workspace:n,namespace:A(A({},r),(0,y.default)(t,R.resourceLimitKey))}})}))}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.formData,l=e.containerType,o=e.isEdit,u=(0,E.default)(n,"resources"),c=this.state.imageRegistries;return h.default.createElement(N.default,(0,s.default)({},this.props,{title:h.default.createElement("span",null,"".concat(t("IMAGE"),": ").concat(n.image)),onOk:this.handleSubmit}),h.default.createElement(I.default,{data:n,cluster:a,namespace:r,limitRanges:u,defaultContainerType:l,workspaceQuota:this.workspaceQuota,isEdit:o,imageRegistries:c}))}},{key:"workspaceQuota",get:function(){var e=(0,E.default)(this.state.availableQuota,"namespace",{}),t=(0,E.default)(this.state.availableQuota,"workspace",{});return(0,g.default)(e,t,(function(e,t){if(e||t)return(0,b.default)(e)?t:e<t?e:t}))}}]),r}(h.Component),u.childContextTypes={imageDetail:S.default.object,setImageDetail:S.default.func},o=c))||o;a.default=M},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(52),d=r(72),p=r(186),m=n(r(63)),v=n(r(26)),h=n(r(872)),E=n(r(951)),y=n(r(1303)),g=n(r(2984));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"getGpuLimit",value:function(){return(0,f.gpuLimitsArr)(this.workspaceQuota)}},{key:"renderAdvancedSettings",value:function(){var e=this.props,a=e.defaultContainerType,r=e.onContainerTypeChange,n=e.isEdit,l=this.defaultResourceLimit;return i.default.createElement(E.default,{defaultShow:!0},i.default.createElement(i.default.Fragment,null,i.default.createElement(p.Columns,{className:g.default.columns},i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("CONTAINER_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:d.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})}]},i.default.createElement(p.Input,{name:"name",defaultValue:"container-".concat((0,f.generateId)()),maxLength:63}))),i.default.createElement(p.Column,null,i.default.createElement(p.Form.Item,{label:t("CONTAINER_TYPE")},i.default.createElement(p.Select,{name:"type",defaultValue:a,options:this.containerTypes,onChange:r,valueRenderer:this.valueRenderer})))),i.default.createElement(p.Alert,{className:"margin-b12",type:"info",message:t("CONTAINER_RESOURCE_LIMIT_TIP")}),i.default.createElement(p.Form.Item,{rules:[{validator:this.limitValidator,checkOnSubmit:!0}]},i.default.createElement(h.default,{name:"resources",defaultValue:l,onError:this.handleError,isEdit:n,supportGpuSelect:!0,workspaceLimitProps:this.workspaceLimitProps}))))}},{key:"defaultResourceLimit",get:function(){var e=this.props.limitRanges,t=void 0===e?{}:e;if(t.limits||t.requests)return{requests:t.requests||{},limits:t.limits||{}}}},{key:"workspaceLimitProps",get:function(){var e=this.props.workspaceQuota;return(0,m.default)(e)?{}:{limits:{cpu:(0,v.default)(e,"limits.cpu"),memory:(0,v.default)(e,"limits.memory")},requests:{cpu:(0,v.default)(e,"requests.cpu"),memory:(0,v.default)(e,"requests.memory")},gpuLimit:this.getGpuLimit()}}}]),r}(y.default);a.default=S},function(e,t,a){e.exports={message:"_2tYIfpBit4wZxAd9FJxE6y",imageSearch:"WP6XS0i1_qs6HdOBtnh2d",columns:"_3ZMZ7kB3ERXUvc6BlRfr7D",type:"_1z31teCRLbXGZmM73L340N"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(1337)),m=r(72),v=n(r(2986)),h=n(r(2989));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(){var t=e.props,a=t.onSave,r=t.store,n=t.detail,l=e.context.resetSubRoute,o=e.formRef.current,u=r.list,c=(0,d.toJS)(u.selectedRowKeys).filter((function(e){return e!==n.uid}));o&&o.validate((function(){a(o.getData()),u.setSelectRowKeys(c)})),l&&l()},e.handleCancel=function(){(0,e.props.onCancel)()},e}return(0,o.default)(r,[{key:"renderServiceSettings",value:function(){var e=this.props,t=e.cluster,a=e.formRef,r=e.isFederated,n=e.formProps,l=e.formTemplate,o=e.type;return i.default.createElement(v.default,{formRef:a,formTemplate:l,cluster:t,isFederated:r,formProps:n,type:m.SERVICE_TYPES_VALUE[o]})}},{key:"renderExternalName",value:function(){var e=this.props,t=e.formRef,a=e.formTemplate;return i.default.createElement(p.default,{formRef:t,formTemplate:a})}},{key:"renderEmpty",value:function(){return i.default.createElement("p",{className:h.default.empty},t("UNKNOWN_SERVICE_TYPE"))}},{key:"renderForm",value:function(){var e=null;switch(this.props.type){case m.SERVICE_TYPES.VirtualIP:case m.SERVICE_TYPES.Headless:e=this.renderServiceSettings();break;case m.SERVICE_TYPES.ExternalName:e=this.renderExternalName();break;default:e=this.renderEmpty()}return e}},{key:"render",value:function(){return i.default.createElement("div",null,this.renderForm())}}]),r}(i.default.Component);a.default=y,y.propTypes={type:f.default.string,formTemplate:f.default.object,onSave:f.default.func,onCancel:f.default.func},y.defaultProps={type:"",formTemplate:{},onSave:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(816));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderTypeSelect",value:function(){return i.default.createElement(f.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(d.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}}]),r}(n(r(2987)).default);a.default=m},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(6),r(84),r(16),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(6),r(84),r(28),r(42),r(16),r(4),r(23),r(57),r(24),r(193),r(17),r(7);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(26)),d=n(r(74)),p=n(r(242)),m=n(r(63)),v=n(r(0)),h=r(186),E=n(r(816)),y=n(r(829)),g=n(r(1339)),b=r(52),S=r(72),_=n(r(1618)),O=n(r(2988));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var T=function(e){(0,c.default)(r,e);var a=C(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).state={serviceType:"virtualIP"},e.handleTypeChange=function(t){e.setState({serviceType:t},(function(){"virtualIP"===t?(0,p.default)(e.formTemplate,"spec.clusterIP"):(0,d.default)(e.formTemplate,"spec.clusterIP","None")}))},e.handleLabelsChange=function(t){var a=e.props.formTemplate;(0,d.default)(a,"metadata.labels",t),(0,d.default)(a,'metadata.annotations["kubesphere.io/workloadName"]',"".concat(t.app,"-").concat(t.version))},e.portsValidator=function(e,a,r){if(!a)return r();if(a.length>0){var n=[];a.forEach((function(e){return e.name&&e.port?n.includes(e.name)?r({message:t("PORT_INPUT_DESC")}):e.name&&(e.name.length>63||!S.PATTERN_PORT_NAME.test(e.name))?r({message:t("PORT_NAME_DESC")}):void n.push(e.name):r({message:t("INVALID_PORT")})}))}r()},e.labelsValidator=function(e,a,r){return a?(0,m.default)(a)?r({message:t("ENTER_SELECTOR_TIP")}):(0,b.isValidLabel)(a)?r():r({message:t("LABEL_FORMAT_DESC")}):r()},e}return(0,u.default)(r,[{key:"renderTypeSelect",value:function(){return v.default.createElement(h.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},v.default.createElement(E.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types}))}},{key:"renderLabelSelector",value:function(){var e=this.props.isFederated;return v.default.createElement(h.Form.Item,{label:t("WORKLOAD_SELECTOR"),rules:[{required:!0,message:t("ENTER_SELECTOR_TIP")},{validator:this.labelsValidator}]},v.default.createElement(_.default,{name:e?"spec.template.spec.selector":"spec.selector",cluster:this.props.cluster,namespace:this.namespace,addText:t("ADD"),isFederated:e,onChange:this.handleLabelsChange}))}},{key:"renderPorts",value:function(){var e=this.props.isFederated;return v.default.createElement(h.Form.Group,{label:t("PORT_PL"),desc:t("SERVICE_PORTS_DESC")},v.default.createElement(h.Form.Item,{rules:[{required:!0,message:t("PORT_EMPTY")},{validator:this.portsValidator,checkOnSubmit:!0}]},v.default.createElement(y.default,{name:e?"spec.template.spec.ports":"spec.ports",itemType:"object",addText:t("ADD_PORT")},v.default.createElement(g.default,null))))}},{key:"render",value:function(){var e=this.props,t=e.formRef,a=e.formProps;return v.default.createElement("div",{className:O.default.wrapper},v.default.createElement(h.Form,(0,l.default)({data:this.formTemplate,ref:t},a),this.renderTypeSelect(),this.renderLabelSelector(),this.renderPorts()))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,S.MODULE_KIND_MAP[a],t)}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"types",get:function(){return[{icon:"cluster",label:t("VIRTUAL_IP_TITLE"),description:t("VIRTUAL_IP_DESC"),value:"virtualIP"},{icon:"blockchain",label:t("INTERNAL_DOMAIN_NAME"),description:t("INTERNAL_DOMAIN_NAME_DESC"),value:"headlessSelector"}]}}]),r}(v.default.Component);a.default=T},function(e,t,a){e.exports={wrapper:"_1d8R2wC-iPUk0mJ0gGdi9g",contentWrapper:"_3YpkzmM-waCXVs2m6v7Jd1",card:"_2TCiSZqKH5Kv9Jot5mNmTY",tabs:"_3CrPTt4KFbhRsB2wWRMg88",label:"_2GCaqlVoPz2mC7DU580ae2"}},function(e,t,a){e.exports={empty:"_3g5fKDY3mes3tmmqImZr6D"}},function(e,t,a){"use strict";a(15);var r=a(20);a(18),a(16),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(18),a(16);var n=r(a(135)),l=r(a(26)),o=r(a(242)),u={namespaces:function(e){var t=(0,l.default)(e,"metadata.name"),a=(0,l.default)(e,"metadata.annotations"),r=(0,l.default)(e,"spec.placement"),u=(0,l.default)(e,"spec.placement.clusters",[]),c=(0,l.default)(e,'metadata.labels["kubesphere.io/workspace"]'),s=(0,n.default)(e);(0,o.default)(s,"apiVersion"),(0,o.default)(s,"kind"),(0,o.default)(s,"metadata.name"),(0,o.default)(s,"spec");var i=u.map((function(e){return{clusterName:e.name,clusterOverrides:[{path:"/metadata/annotations",value:a}]}}));return{apiVersion:"types.kubefed.io/v1beta1",kind:"FederatedNamespace",metadata:{name:t,namespace:t,labels:{"kubesphere.io/workspace":c},annotations:a},spec:{placement:r,template:s,overrides:i}}}};t.default=u},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(18),r(97),r(16),r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(18),r(97),r(42),r(16),r(9),r(4),r(23),r(57),r(17);var l,o=n(r(61)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(49)),p=n(r(0)),m=r(186),v=n(r(829)),h=n(r(867)),E=r(14),y=n(r(787)),g=n(r(74)),b=n(r(861)),S=n(r(26)),_=n(r(814)),O=n(r(2992));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=(l=function(e){(0,s.default)(r,e);var a=C(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).clustersList=(0,S.default)(e.props.formTemplate,"spec.placement.clusters",[]),e.formTemplate={},e.handleClusterChange=function(t){(0,g.default)(e.formTemplate,"clusters",(0,b.default)(t,"name"))},e.valueRenderer=function(e){return p.default.createElement(_.default,{cluster:e.cluster,size:"small",noStatus:!0})},e.optionRenderer=function(e){return p.default.createElement(_.default,{cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},e.handleOk=function(t){var a=e.props,r=a.onOk,n=a.formTemplate,l=(0,b.default)([].concat((0,o.default)(e.clustersList),(0,o.default)(t.clusters)),"name"),u=(0,S.default)(n,"metadata.annotations"),c=l.map((function(e){return{clusterName:e.name,clusterOverrides:[{path:"/metadata/annotations",value:u}]}}));(0,g.default)(n,"spec.placement.clusters",l),(0,g.default)(n,"spec.overrides",c),r(n)},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel;return p.default.createElement(y.default.Form,{data:this.formTemplate,width:691,title:t("ADD_CLUSTER"),icon:"enterprise",onOk:this.handleOk,onCancel:n,visible:a,isSubmitting:r},p.default.createElement("div",{className:O.default.fedProClusterContainer},p.default.createElement(m.Form.Group,null,p.default.createElement(m.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}],desc:this.enableAddCluster?t("FEDPROJECT_CANNOT_ADD_CLUSTER"):null},p.default.createElement(v.default,{name:"clusters",addText:t("ADD_CLUSTER"),itemType:"object",onChange:this.handleClusterChange},p.default.createElement(h.default,null,p.default.createElement(m.Select,{name:"name",placeholder:" ",options:this.clusters,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,showTip:!0})))))))}},{key:"clusters",get:function(){var e=this;return this.props.clusters.map((function(t){var a=e.clustersList.some((function(e){return e.name===t.name}));return{label:t.name,value:t.name,cluster:t,disabled:!t.isReady||a}}))}},{key:"enableAddCluster",get:function(){return this.clusters.every((function(e){return e.disabled}))}}]),r}(p.default.Component),(0,d.default)(l.prototype,"clusters",[E.computed],Object.getOwnPropertyDescriptor(l.prototype,"clusters"),l.prototype),(0,d.default)(l.prototype,"enableAddCluster",[E.computed],Object.getOwnPropertyDescriptor(l.prototype,"enableAddCluster"),l.prototype),l);a.default=T},function(e,t,a){e.exports={fedProClusterContainer:"_2iCHyPdPf0H_KTrM8xWFQL"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(24),r(85),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(74)),d=n(r(26)),p=n(r(2994)),m=n(r(824)),v=n(r(435)),h=n(r(2998)),E=n(r(834));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={"gateways.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.name,o=e.workspace,u=e.success,m=e.type,h=(0,c.default)(e,["store","cluster","namespace","name","workspace","success","type"]),E=v.default.gateways();(0,f.default)(E,"metadata",{namespace:n,name:l});var y=i.default.open(g({onOk:function(e){if((0,d.default)(e,"metadata")){(0,f.default)(e,"metadata",g(g({},e.metadata),{},{creator:globals.user.username,createTime:new Date}));var l=(0,d.default)(e,"metadata.labels",{});"cluster"===m&&((0,f.default)(e,"spec.values.controller.integrateKubeSphere.scope",{enabled:!0,namespace:"",namespaceSelector:""}),(0,f.default)(e,"metadata.labels",g(g({},l),{},{"kubesphere.io/gateway-type":"cluster"}))),!n&&o&&((0,f.default)(e,"spec.values.controller.integrateKubeSphere.scope",{enabled:!0,namespace:"",namespaceSelector:"kubesphere.io/workspace=".concat(o)}),(0,f.default)(e,"metadata.labels",g(g({},l),{},{"kubesphere.io/gateway-type":"workspace","kubesphere.io/workspace":o}))),n&&o&&((0,f.default)(e,"spec.values.controller.integrateKubeSphere.scope",{enabled:!0,namespace:n,namespaceSelector:""}),(0,f.default)(e,"metadata.labels",g(g({},l),{},{"kubesphere.io/gateway-type":"project","kubesphere.io/workspace":o})));var c=!1;c=!!(0,d.default)(globals,"ksConfig.enabledExtensionModulesStatus.".concat("whizard-monitoring",".clusterSchedulingStatuses.").concat(r),!1),(0,f.default)(e,"spec.values.controller.metrics.enabled",c),(0,f.default)(e,"spec.values.controller.metrics.serviceMonitor.enabled",c),a.addGateway({cluster:r,namespace:n,workspace:o},e).then((function(){i.default.close(y),s.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u()}))}else s.default.error({content:t("INVALID_YAML_FILE_FORMAT")})},modal:p.default,isEdit:!1,cluster:r,namespace:n,workspace:o,name:l,store:a,detail:E},h))}},"gateways.edit":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,d,m,v,h,y,b,S,_,O,C,T;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.detail,u=e.cluster,d=e.namespace,m=e.workspace,v=e.success,h=e.name,y=e.type,b=(0,c.default)(e,["store","detail","cluster","namespace","workspace","success","name","type"]),S=new E.default,_={cluster:u,namespace:d,workspace:m,type:y},a.next=5,S.getGateway(g({},_));case 5:O=a.sent,C=O.resourceVersion,T=i.default.open(g({onOk:function(){var e=(0,o.default)(l.default.mark((function e(a){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getGateway(g({},_));case 2:(n=e.sent).resourceVersion===C?((0,f.default)(a,"metadata.resourceVersion",n.resourceVersion),r.editGateway({cluster:u,namespace:d,workspace:m,name:h},a).then((function(){i.default.close(T),s.default.success({content:t("UPDATE_SUCCESSFUL")}),v&&v()}))):(C=n.resourceVersion,s.default.info({content:t("GATEWAY_UPDATING_TIP")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),modal:p.default,isEdit:!0,detail:n,cluster:u,namespace:d,workspace:m,store:r},b));case 8:case"end":return a.stop()}}),a)})))()}},"gateways.delete":{on:function(e){var a=e.store,r=e.resource,n=(e.detail,e.cluster),l=e.namespace,o=e.workspace,u=e.success,f=e.name,d=(0,c.default)(e,["store","resource","detail","cluster","namespace","workspace","success","name"]),p=r?t.html("DELETE_RESOURCE_TYPE_DESC_GW",{resource:r,type:t("GATEWAY_LOW")}):t("DISABLE_GATEWAY_TIP"),v=i.default.open(g({onOk:function(){a.delete({name:f,cluster:n,namespace:l,workspace:o}).then((function(){i.default.close(v),s.default.success({content:t("DISABLE_SUCCESSFUL")}),u&&u()}))},store:a,modal:m.default,title:t("DISABLE_GATEWAY"),desc:p,type:"GATEWAY",resource:r,cluster:n,namespace:l,workspace:o},d))}},"gateways.update":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,p,m,v,y,b,S,_,O,C,T,R,D;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.detail,u=e.cluster,p=e.namespace,m=e.workspace,v=e.type,y=e.updateToLatest,b=e.success,S=(0,c.default)(e,["store","detail","cluster","namespace","workspace","type","updateToLatest","success"]),_=new E.default,O={cluster:u,namespace:p,workspace:m},a.next=5,_.getGateway(g({},O));case 5:C=a.sent,T=C.resourceVersion,R=n,D=i.default.open(g({onOk:function(){var e=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=6;break}return e.next=3,_.getGateway(g({},O));case 3:return(a=e.sent).resourceVersion===T?((0,f.default)(R,"metadata.resourceVersion",a.resourceVersion),o=(0,d.default)(R,"metadata.labels",{}),"cluster"===v&&(0,f.default)(R,"metadata.labels",g(g({},o),{},{"kubesphere.io/gateway-type":"cluster"})),"project"===v&&(0,f.default)(R,"metadata.labels",g(g({},o),{},{"kubesphere.io/gateway-type":"project","kubesphere.io/workspace":m})),r.editGateway({cluster:u,namespace:p,workspace:m},R).then((function(){i.default.close(D),s.default.success({content:t("UPDATE_SUCCESSFUL")}),b&&b()}))):(T=a.resourceVersion,s.default.info({content:t("GATEWAY_UPDATING_TIP")})),e.abrupt("return");case 6:r.updateGateway({cluster:u,namespace:p,workspace:m,gatewayName:n.metadata.name},n).then((function(){i.default.close(D),s.default.success({content:t("UPDATE_SUCCESSFUL")}),b&&b()}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),modal:h.default,detail:n,store:r,cluster:u,workspace:m,namespace:p},S));case 9:case"end":return a.stop()}}),a)})))()}},"gateways.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=e.type,d=e.workspace,p=(0,c.default)(e,["store","success","rowKey","type","workspace"]),v=r.list,h=v.data,E=v.selectedRowKeys,y=h.filter((function(e){return E.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),b=y.map((function(e){return e.name})),S=i.default.open(g({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],h.forEach((function(e){if(y.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))){var t=e.name.split("kubesphere-router-")[1],n=e.cluster;a.push(r.delete({name:e.name,cluster:n,namespace:t,workspace:d}))}})),e.next=4,Promise.all(a);case 4:i.default.close(S),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:b.join(", "),modal:m.default,title:1===b.length?t("DISABLE_GATEWAY"):t("DISABLE_MULTIPLE_GATEWAYS"),store:r,type:f||"GATEWAY"},p))}}};a.default=b},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(87),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(160),r(28),r(87),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(43));r(41);var c,s,i,f,d,p,m,v=n(r(44)),h=n(r(65)),E=n(r(36)),y=n(r(37)),g=n(r(88)),b=n(r(55)),S=n(r(56)),_=n(r(51)),O=n(r(49)),C=(n(r(66)),n(r(26))),T=n(r(74)),R=n(r(63)),D=n(r(198)),N=n(r(0)),k=n(r(1)),I=r(186),P=n(r(884)),A=n(r(787)),w=n(r(850)),M=n(r(842)),L=n(r(1050)),j=r(72),x=r(14),U=r(239),F=n(r(2995)),V=r(1335),G=n(r(2997));function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,_.default)(e);if(t){var n=(0,_.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,S.default)(this,a)}}var H=(0,U.observer)((m=p=function(e){(0,b.default)(n,e);var a,r=z(n);function n(e){var a;return(0,E.default)(this,n),a=r.call(this,e),(0,h.default)(a,"template",i,(0,g.default)(a)),(0,h.default)(a,"store",f,(0,g.default)(a)),(0,h.default)(a,"options",d,(0,g.default)(a)),a.getNginxVersion=(0,v.default)(u.default.mark((function e(){var t,r,n,l,o,c,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.cluster,n=t.isEdit,e.next=3,a.store.getGatewayAppVersions({cluster:r});case 3:for(c in l=e.sent,o=[],l)o.push({label:c,value:c});if(s="",!n){e.next=11;break}s=(0,C.default)(a.template,"spec.appVersion",""),e.next=15;break;case 11:if(s=(0,C.default)(o,"[0].value",""),(0,R.default)(s)){e.next=15;break}return e.next=15,a.fetchHelmChart(s);case 15:a.setState({versionOption:o,version:s});case 16:case"end":return e.stop()}}),e)}))),a.fetchHelmChart=function(){var e=(0,v.default)(u.default.mark((function e(t){var r,n,l,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,n=r.cluster,l=r.name,e.next=3,a.store.getHelmChart({appversion:t,cluster:n});case 3:o=e.sent,(0,T.default)(o,"controller.ingressClassResource.name",l),(0,T.default)(o,"controller.electionID",l),(0,T.default)(a.template,"spec.values",o),(0,T.default)(a.template,"spec.appVersion",t),a.initAnnotations();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getData=function(){return a.editor.current.getData()},a.nameValidator=function(e,r,n){if(!r)return n();a.props.store.checkName({name:r}).then((function(a){if(a.exist)return n({message:t("NAME_EXIST_DESC"),field:e.field});n()}))},a.getTypeOptions=function(){return[{label:"NodePort",value:"NodePort"},{label:"LoadBalancer",value:"LoadBalancer"}]},a.initAnnotations=function(){var e=(0,C.default)(a.template,"spec.values.controller.service.annotations"),t=(0,C.default)(a.template,"spec.values.controller.service.type"),r=(0,C.default)(a.template,"spec.values.controller.service['kubesphere.io/loadbalancer-provider']");(0,R.default)(e)&&"LoadBalancer"===t&&"QingCloud Kubernetes Engine"===r&&(0,T.default)(a.template,"spec.values.controller.service.annotations",globals.config.loadBalancerDefaultAnnotations),r&&(a.options=Object.keys(V.CLUSTER_PROVIDERS_ANNOTATIONS[r]));var n=(0,C.default)(a.template,"spec.values.controller.config",{});(0,D.default)(n,"worker-processes")||(0,T.default)(a.template,"spec.values.controller.config",Y(Y({},n),{},{"worker-processes":"4"})),a.forceUpdate()},a.handleOk=function(){var e=a.props.onOk,t=a.state,r=t.isChecked;if(t.isCodeMode)return a.template=a.parseFormFromCode(a.getData()),void e(a.template);(0,T.default)(a.template,"spec.values.controller.integrateKubeSphere.tracing",!!r),a.form.current.validate((function(){e(a.template)}))},a.parseFormFromCode=function(e){return Array.isArray(e)?e.reduce((function(e,t){return Y(Y({},e),t)}),{}):e},a.handleTypeChange=function(e){var t=(0,C.default)(a.template,"spec.values.controller.service.annotations",{});"LoadBalancer"===e?((0,T.default)(a.template,"spec.values.controller.service.annotations",(0,R.default)(t)?globals.config.loadBalancerDefaultAnnotations:t),(0,T.default)(a.template,"spec.values.controller.service['kubesphere.io/loadbalancer-provider']","QingCloud Kubernetes Engine"),(0,T.default)(a.template,"spec.values.controller.publishService.enabled",!0)):((0,T.default)(a.template,"spec.values.controller.service.annotations",{}),(0,T.default)(a.template,"spec.values.controller.publishService.enabled",!1),(0,T.default)(a.template,"spec.values.controller.service['kubesphere.io/loadbalancer-provider']","")),a.setState({type:e})},a.providerOptionRenderer=function(e){return N.default.createElement(N.default.Fragment,null,N.default.createElement(I.Icon,{className:"margin-r8",name:e.icon,type:"light",size:20}),e.label)},a.handleAnnotations=function(e){a.options=Object.keys(V.CLUSTER_PROVIDERS_ANNOTATIONS[e]),"QingCloud Kubernetes Engine"===e?a.setAnnotations(globals.config.loadBalancerDefaultAnnotations):a.setAnnotations({})},a.setAnnotations=function(e){(0,T.default)(a.template,"spec.service.annotations",e),a.forceUpdate()},a.renderLoadBalancerSupport=function(){var e=[].concat((0,l.default)(j.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes"}]);return N.default.createElement("div",{className:G.default.loadBalancer},N.default.createElement(I.Form.Item,{label:t("LOAD_BALANCER_PROVIDER")},N.default.createElement(I.Select,{options:e,placeholder:" ",optionRenderer:a.providerOptionRenderer,onChange:a.handleAnnotations,name:"spec.values.controller.service['kubesphere.io/loadbalancer-provider']"})))},a.handleToggleChange=function(e){a.setState({isChecked:e})},a.handleVersionChange=function(e){a.setState({version:e}),a.fetchHelmChart(e)},a.handleModeChange=function(){var e=a.state.isCodeMode;e&&(a.template=a.parseFormFromCode(a.getData())),a.setState({isCodeMode:!e})},a.handleIngressClassNameChange=function(e){(0,T.default)(a.template,"spec.values.controller.electionID",e),a.props.isEdit||(0,T.default)(a.template,"metadata.name",e)},a.renderTitle=function(){return N.default.createElement("div",{className:G.default.modalTitle},N.default.createElement(I.Icon,{name:"loadbalancer",size:32}),N.default.createElement("div",{className:G.default.modalTitleContent},N.default.createElement("div",null,t("ENABLE_GATEWAY")),N.default.createElement("p",null," ",t("ENABLE_GATEWAY_DESC"))))},a.operations=function(){return N.default.createElement(w.default,{className:G.default.switch,text:t("EDIT_YAML"),onChange:a.handleModeChange,checked:a.state.isCodeMode})},a.handleConfigError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a.setState({configError:e})},a.form=N.default.createRef(),a.editor=N.default.createRef(),a.state={isChecked:JSON.parse((0,C.default)(a.template,"spec.values.controller.integrateKubeSphere.tracing",!1)),configError:"",isCodeMode:!1,versionOption:[],version:""},a}return(0,y.default)(n,[{key:"componentDidMount",value:(a=(0,v.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNginxVersion();case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderYamlEdit",value:function(){return N.default.createElement("div",{className:G.default.codeWrapper},N.default.createElement(P.default,{ref:this.editor,value:this.template}))}},{key:"renderForm",value:function(){var e=this.props,a=e.cluster,r=e.isEdit,n=this.state,l=n.isChecked,o=n.versionOption,u=n.version;return N.default.createElement("div",{className:G.default.wrapper},N.default.createElement(I.Form,{ref:this.form,data:this.template},N.default.createElement(I.Form.Item,{label:t("NGINX_INGRESS_VERSION")},N.default.createElement(I.Select,{options:o,disabled:r,value:u,onChange:this.handleVersionChange})),N.default.createElement(I.Form.Item,{label:"IngressClassName",desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:j.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},N.default.createElement(I.Input,{name:"spec.values.controller.ingressClassResource.name",maxLength:63,onChange:this.handleIngressClassNameChange})),N.default.createElement(I.Form.Item,null,N.default.createElement(F.default,{name:"spec.values.controller.replicaCount",template:this.template,replicas:(0,C.default)(this.template,"spec.values.controller.replicaCount")})),N.default.createElement(I.Form.Item,{label:t("ACCESS_MODE"),className:G.default.types},N.default.createElement(I.RadioGroup,{name:"spec.values.controller.service.type",mode:"button",buttonWidth:155,onChange:this.handleTypeChange,size:"small"},N.default.createElement(I.RadioButton,{value:"NodePort"},"NodePort"),N.default.createElement(I.RadioButton,{value:"LoadBalancer"},"LoadBalancer"))),N.default.createElement("div",{className:G.default.content},globals.app.hasClusterModule(a,"servicemesh")&&N.default.createElement("div",{className:G.default.wrapperContent},N.default.createElement("div",{className:G.default.toggle},N.default.createElement(I.Toggle,{checked:l,onChange:this.handleToggleChange}),t("TRACING")),N.default.createElement("div",{className:G.default.toggleTip},t.html("GATEWAY_TRACING_TIP"))),"LoadBalancer"===(0,C.default)(this.template,"spec.values.controller.service.type")&&N.default.createElement(N.default.Fragment,null,this.renderLoadBalancerSupport(),N.default.createElement("div",{className:G.default.wrapperContent},N.default.createElement(I.Form.Item,{label:t("ANNOTATION_PL")},N.default.createElement(L.default,{controlled:!0,options:(0,x.toJS)(this.options),className:G.default.objectBg,name:"spec.values.controller.service.annotations",addText:t("ADD")})))),N.default.createElement("div",{className:G.default.wrapperContent},N.default.createElement(I.Form.Item,{label:t("CONFIGURATION_OPTIONS")},N.default.createElement(M.default,{className:G.default.objectBg,name:"spec.values.controller.config",addText:t("ADD"),controlled:!0,onError:this.handleConfigError}))))))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state,o=l.configError,u=l.isCodeMode;return N.default.createElement(A.default,{width:960,title:this.renderTitle(),onCancel:r,visible:a,bodyClassName:G.default.modalBody,headerClassName:G.default.modalHead,closable:!1,operations:this.operations(),hideFooter:!0},N.default.createElement("div",{className:G.default.body},u?this.renderYamlEdit():this.renderForm()),N.default.createElement("div",{className:G.default.footer},N.default.createElement(I.Button,{onClick:r,loading:n,disabled:n},t("CANCEL")),N.default.createElement(I.Button,{type:"control",onClick:this.handleOk,loading:n,disabled:n||""!==o},t("OK"))))}}]),n}(N.default.Component),p.propTypes={template:k.default.object,visible:k.default.bool,onOk:k.default.func,onCancel:k.default.func,isSubmitting:k.default.bool},p.defaultProps={template:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},s=m,i=(0,O.default)(s.prototype,"template",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.detail||{}}}),f=(0,O.default)(s.prototype,"store",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.props.store}}),d=(0,O.default)(s.prototype,"options",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=s))||c;a.default=H},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=r(a(74)),f=r(a(800)),d=a(186),p=a(239),m=r(a(1306)),v=r(a(2996));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var E=function(e){(0,o.default)(a,e);var t=h(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).triggerChange=(0,f.default)((function(){var t=e.props,a=t.template,r=t.onChange,n=t.name,l=e.state.replicas;(0,i.default)(a,n,l),r&&r(l)}),200),e}return(0,l.default)(a,[{key:"render",value:function(){return s.default.createElement("div",{className:v.default.wrapper},s.default.createElement(d.Columns,{className:"is-vcentered is-2"},s.default.createElement(d.Column,{className:"is-narrow"},this.renderReplicas())))}}]),a}(m.default),y=(0,p.observer)(E);t.default=y},function(e,t,a){e.exports={wrapper:"_2K5X8Z4X93OFAXjvIhp13q"}},function(e,t,a){e.exports={modalBody:"_1W8ICRFudzizrwjjlAcLB5",body:"_2ynZ9Qv5UBx4fdFF94iS8l",title:"_1KSWFSm2_S45PYbuv-ylkc",wrapper:"_3Xw8W1pcplCVMxZGuPXD1h",types:"_3hcGivEGhw7kKkrWaSIwbh",content:"_3kJmDSOTlGJNzVC74giSdM",wrapperContent:"_31NltraBC15DWZFVQw0FII",toggle:"_30PuUvVRi3WL3hUQMzYBKi",toggleTip:"_2Tpg7-yEO4iYJmla3rrTQH",modalHead:"_1MQmwepBQ4o4vIt7Sofj",modalTitle:"_3_hCNks3aVEgLmZjWCu90Y",modalTitleContent:"_1b_AX358BmOPnGnyYH8thr",footer:"_2ypYyRW9Ofzx9BYHt_EBbh",objectBg:"gz6zaUnJJSaQ6LBjd6P4M",loadBalancer:"_2URqPcgtq6_w6kQXfaGwvz",lbB:"GyNUXQU2RPwnkNxkeubav",codeWrapper:"_3L7MgSyS45uIcDYqagV3d0"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=n(r(787)),h=r(186),E=r(239),y=n(r(2999));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var b=(0,E.observer)((u=o=function(e){(0,i.default)(r,e);var a=g(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(){var t=e.props;(0,t.onOk)(t.detail)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return p.default.createElement(v.default,{width:600,onCancel:r,visible:a,closable:!1,onOk:this.handleOk,footerClassName:y.default.footer,bodyClassName:y.default.modalBody,hideHeader:!0},p.default.createElement("div",{className:y.default.body},p.default.createElement("div",{className:y.default.title},p.default.createElement(h.Icon,{name:"information",type:"light",size:20}),p.default.createElement("strong",null,t("UPDATED_GATEWAY_TITLE"))),p.default.createElement("div",{className:y.default.content},t("UPDATE_GATEWAY_DESC"))))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={detail:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=b},function(e,t,a){e.exports={modalBody:"_2J_VWsfuSeyfjEPyWoXEnM",title:"ky2jKIotIQKZRDn6osazT",content:"_3LmHELJYHg20z0wgQYhqPr",footer:"_1PAbTr7xLaBxt4wQGLbfF9"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(240)),f=n(r(787)),d=n(r(824));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var m={"group.user.remove":{on:function(e){var a,r=e.store,n=e.detail,m=e.workspace,v=e.success,h=(0,c.default)(e,["store","detail","workspace","success"]),E=f.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getGroupBinding({user:n.name,group:n.group},{workspace:m});case 2:a=e.sent,o=(0,s.default)(a.items[0],"metadata.name"),r.deleteGroupBinding(o,{workspace:m}).then((function(){f.default.close(E),i.default.success({content:t("DELETED_SUCCESSFULLY")}),v&&v()}));case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),modal:d.default,title:t("REMOVE_MEMBER"),desc:t.html("REMOVE_MEMBER_TIP",{resource:n.name}),resource:n.name,store:r},h))}}};a.default=m},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(30)),o=n(r(58));r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var u=r(14),c=n(r(240)),s=n(r(787)),i=n(r(825)),f=n(r(3002)),d=n(r(435)),p=n(r(901)),m=n(r(3004)),v=n(r(26)),h=n(r(63)),E=n(r(60)),y=n(r(74));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e,t){var a=(0,v.default)(e,"spec.config.environment");return(0,E.default)(a)&&(a=a.filter((function(e){return t(e)}))),a},_={"imagebuilder.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,u=e.success,f=(0,o.default)(e,["store","cluster","namespace","module","success"]),v=d.default[l]({namespace:n}),E=s.default.open(b({onOk:function(e){if(e){var o=S(e,(function(e){return!(0,h.default)(e)}));(0,y.default)(e,"spec.config.environment",o),a.create(e,{cluster:r,namespace:n}).then((function(){s.default.close(E),c.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u(),p.default.delete("".concat(l,"_create_form"))}))}},module:l,cluster:r,namespace:n,name:"IMAGE_BUILDER",formTemplate:v,steps:m.default,modal:i.default,noCodeEdit:!0,store:a},f))}},"imagebuilder.rerun":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,o.default)(e,["store","detail","success"]),l=s.default.open(b({onOk:function(e){var n=S(e,(function(e){return!(0,h.default)(e)}));(0,y.default)(e,"spec.config.environment",n),t.updateBuilder(e,a).then((function(){s.default.close(l),r&&r()}))},detail:(0,u.toJS)(a._originData),modal:f.default,cluster:a.cluster,namespace:a.namespace,store:t},n))}}};a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(26)),p=n(r(74)),m=r(186),v=n(r(787)),h=r(52),E=n(r(1178)),y=n(r(1340)),g=n(r(3003));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.props,t=e.onOk,a=e.detail;a&&((0,d.default)(a,"metadata.annotations['devops.kubesphere.io/donotautoscale']")&&(0,p.default)(a,"metadata.annotations['devops.kubesphere.io/donotautoscale']","true"),n.content.current.validate((function(){t(a)})))},n.renderEnableUpdate=function(){var e=n.props.detail;return(0,d.default)(e,"metadata.annotations.serviceName")?i.default.createElement("div",{className:g.default.checkboxCard},i.default.createElement("label",null,i.default.createElement(m.Form.Item,null,i.default.createElement(m.Checkbox,{name:"isUpdateWorkload",defaultValue:!0},i.default.createElement("span",{name:!0,className:g.default.title},t("S2I_UPDATE_WORKLOAD"))))),i.default.createElement("p",{className:g.default.desc},t("S2I_UPDATA_WORKLOAD_DESC"))):null},n.form=i.default.createRef(),n.content=i.default.createRef(),n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.cluster,o=e.detail,u=e.namespace,c=(0,d.default)(o,"spec.config.isBinaryURL");return i.default.createElement(v.default.Form,{formRef:this.form,width:691,title:t("RUN"),icon:"cdn",onOk:this.handleOk,okText:t("RUN"),onCancel:n,visible:a,data:o,isSubmitting:r},c?i.default.createElement(y.default,{formTemplate:o,formRef:this.content,cluster:l,namespace:u,mode:"edit"}):i.default.createElement(E.default,{isEdgeWize:(0,h.isEdgeWizePage)(),formTemplate:o,formRef:this.content,cluster:l,namespace:u,mode:"edit"}),this.renderEnableUpdate())}}]),r}(i.default.Component);a.default=S,S.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={checkboxCard:"_3Y2tyGl5PEtOaHysruKVvi",title:"_3ATnnLF4a1obzO82eJmNLf",desc:"rnfyY8DMRnQvhUfZgd3IA"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3005)),l=r(a(1178)),o=[{title:"BUILD_MODE",component:n.default},{title:"BUILD_SETTINGS",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(22),r(23),r(57),r(17);var l=n(r(30)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(74)),v=n(r(26)),h=n(r(242)),E=n(r(1)),y=n(r(3)),g=r(186),b=n(r(456)),S=n(r(1341)),_=r(52),O=r(982),C=n(r(1178)),T=n(r(1340)),R=n(r(3006));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=D(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).fetchData=(0,u.default)(o.default.mark((function e(){var t,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.cluster,e.next=3,n.store.getS2iSupportLanguage({cluster:t});case 3:a=e.sent,n.setState(a);case 5:case"end":return e.stop()}}),e)}))),n.handleLanguageSelect=function(e,t){return function(){var a=n.props.steps;"b2i"===t&&((0,m.default)(a,"[1].component",T.default),(0,m.default)(n.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"b2i"),(0,m.default)(n.props.formTemplate,"spec.config.isBinaryURL",!0)),"s2i"===t&&((0,m.default)(a,"[1].component",C.default),(0,m.default)(n.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"s2i"),(0,h.default)(n.props.formTemplate,"spec.config.isBinaryURL")),n.context.setSteps(a),(0,m.default)(n.props.formTemplate,"metadata.annotations.languageType",e),(0,h.default)(n.props.formTemplate,"spec.config.builderImage"),n.forceUpdate()}},n.renderSupportTip=function(){if("containerd"===globals.runtime.toLowerCase())return p.default.createElement(g.Alert,{className:R.default.margin_b_10,type:"warning",message:t("CONTAINERD_RUNTIME_NOT_SUPPORTED")})},n.isEdgeWize=(0,_.isEdgeWizePage)(),n.store=n.isEdgeWize?new S.default:new b.default,n.state={s2i:[],b2i:[]},n}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,a=this.props,r=a.formTemplate,n=a.formRef,o=(0,v.default)(this.props.formTemplate,"metadata.annotations.languageType"),u=(0,v.default)(this.props.formTemplate,'metadata.labels["s2i-type.kubesphere.io"]',"s2i");return p.default.createElement(g.Form,{ref:n,data:r},this.renderSupportTip(),p.default.createElement("div",{className:R.default.header},p.default.createElement("p",null,t("IMAGE_FROM_S2I")),p.default.createElement("p",null,t("S2I_DESC"))),p.default.createElement("ul",{className:R.default.content},this.state.s2i.map((function(a){return p.default.createElement("li",{key:a,className:(0,y.default)(R.default.item,(0,l.default)({},R.default.item_select,o===a&&"s2i"===u)),onClick:e.handleLanguageSelect(a,"s2i")},p.default.createElement(g.Icon,{name:(0,O.getLanguageIcon)(a,"radio"),size:48}),p.default.createElement("p",null,t(a.toUpperCase())))}))),p.default.createElement("div",{className:R.default.header},p.default.createElement("p",null,t("IMAGE_FROM_B2I")),p.default.createElement("p",null,t("B2I_DESC"))),p.default.createElement("ul",{className:R.default.content},this.state.b2i.map((function(a){return p.default.createElement("li",{key:a,className:(0,y.default)(R.default.item,(0,l.default)({},R.default.item_select,o===a&&"b2i"===u)),onClick:e.handleLanguageSelect(a,"b2i")},p.default.createElement(g.Icon,{name:(0,O.getLanguageIcon)(a,"radio"),size:48}),p.default.createElement("p",null,t(a.toUpperCase())))}))),p.default.createElement(g.Form.Item,{rules:[{required:!0,message:t("EMPTY_IMAGE_TYPE_DESC")}]},p.default.createElement(g.Input,{style:{display:"none"},readOnly:!0,name:"metadata.annotations.languageType"})))}}]),r}(p.default.Component);a.default=N,N.contextTypes={setSteps:E.default.func}},function(e,t,a){e.exports={header:"UF0cy-s-F7_E3xD9T-iiO",content:"_3nX5vmb5CHWXRRdJAshIoI",item_select:"_1-Jk3y0NUhvd28iE52bNEk",margin_b_10:"_3kVPnlIFTOJFynDcNQlbJX"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(240)),c=n(r(787)),s=n(r(3008));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var f={"license.update":{on:function(e){var a=e.store,r=e.success,n=(0,o.default)(e,["store","success"]),f=c.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:function(e){a.updateLicense(e).then((function(){c.default.close(f),u.default.success({content:"".concat(t("UPDATE_SUCCESSFUL"))}),localStorage.removeItem("hideLicenseTip"),r&&r()}))},modal:s.default,store:a},n))}}};a.default=f},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(84),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(84),r(42),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(64);var l=n(r(315)),o=n(r(30)),u=n(r(58)),c=n(r(43));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(0)),g=n(r(1)),b=r(239),S=r(186),_=n(r(787)),O=r(440),C=n(r(3)),T=r(52),R=n(r(3009));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var N=["Format error","Invalid signature","Invalid type","Empty license"],k=(0,b.observer)((f=i=function(e){(0,v.default)(r,e);var a=D(r);function r(){var e;(0,p.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={value:"",error:!1},e.handleSubmit=(0,d.default)(c.default.mark((function t(){var a,r,n,l,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.value,t.next=3,e.handleInvalid(a);case 3:r=t.sent,n=r.error,l=r.errorMessage,e.setState({error:n,errorMessage:l}),n||(o=JSON.parse((0,O.safeAtob)(a)),e.props.onOk(o),e.setState({error:!1,errorMessage:""}));case 8:case"end":return t.stop()}}),t)}))),e.handleValue=function(t){e.setState({value:t,error:!1})},e.handleInvalid=function(){var t=(0,d.default)(c.default.mark((function t(a){var r,n,l,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.props.store,n=JSON.parse((0,O.safeAtob)(a)),t.next=5,r.invalidLicense(n);case 5:if(l=t.sent,o=l.status.violation.type,!N.includes(o)){t.next=9;break}return t.abrupt("return",{error:!0,errorMessage:o.replace(/\s/g,"_")});case 9:return t.abrupt("return",{error:!1,errorMessage:""});case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",{error:!0,errorMessage:"INVALID_ACTIVATION_CODE_DESC"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderTipMessage=function(){var a=globals.licenseInfo||{},r=a.isUnAuthorized,n=void 0!==r&&r,l=a.isOverLimit,o=void 0!==l&&l,u=a.isExpired,c=void 0!==u&&u;return n?t("".concat(e.isAdmin?"ADMIN_":"","AUTHORIZED_INVALID_LICENSE_DESC")):o?t("".concat(e.isAdmin?"ADMIN_":"","OVER_RESOURCE_LICENSE_LIMIT")):c?t("".concat(e.isAdmin?"ADMIN_":"","EXPIRED_INVALID_LICENSE_DESC")):t("".concat(e.isAdmin?"ADMIN_":"","AUTHORIZED_INVALID_LICENSE_DESC"))},e.renderHeader=function(){return y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:R.default.customHeader},y.default.createElement(S.Icon,{name:"close",type:"light",className:R.default.closeIcon}),y.default.createElement("b",null,t("INVALID_LICENSE")),y.default.createElement("img",{src:"/assets/logo.svg"})),y.default.createElement(S.Alert,{type:"error",message:e.renderTipMessage()}))},e}return(0,m.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.title,c=e.isOverLimit,s=void 0!==c&&c,i=(0,u.default)(e,["visible","onCancel","title","isOverLimit"]);return y.default.createElement(_.default,(0,l.default)({},i,{width:600,title:t(n),visible:a,onCancel:r,onOk:this.isAdmin?this.handleSubmit:null,cancelText:this.isAdmin?t("CANCEL"):t("CLOSE"),icon:"pen"}),y.default.createElement("div",{className:R.default.body},s&&this.renderHeader(),this.isAdmin?y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:R.default.title},t("ACTIVATION_CODE")),y.default.createElement(S.TextArea,{className:(0,C.default)("max-width-full",(0,o.default)({},R.default.TextError,this.state.error)),rows:"3",onChange:this.handleValue}),this.state.error&&y.default.createElement("div",{className:R.default.error},t(this.state.errorMessage))):null))}},{key:"isAdmin",get:function(){return globals.app.isPlatformAdmin}},{key:"kscLink",get:function(){return(0,T.getConfigSupportLink)("ksc")}}]),r}(y.default.Component),i.propTypes={visible:g.default.bool,onOk:g.default.func,onCancel:g.default.func},i.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},s=f))||s;a.default=k},function(e,t,a){e.exports={body:"_3cuJyw4UcmokF5NgeYKAVE",TextError:"_2Y_gRDChK2WgeacdCzVavx",error:"_1ucO7UX7j5IvXn1nL2sEFy",title:"_2-EuDVRUdylWBXPFsPZJ3c",customHeader:"z-xciYo3gRYHskGtULxfJ",closeIcon:"_1McViypeDlXnTfuHVd2QIq",info:"_2OCA78vqWU8QkLBitXiM8q"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(975),r(16),r(9),r(13),r(10),r(24),r(64),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(975),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(24),r(64),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(0)),i=n(r(135)),f=n(r(26)),d=n(r(1152)),p=n(r(240)),m=n(r(787)),v=r(440),h=r(894),E=n(r(3011)),y=n(r(1370)),g=n(r(1371)),b=n(r(1696));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={"log.collection.active.switch":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),i=m.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.enabled,e.next=3,r.patch(r.detail,{metadata:{labels:{"logging.whizard.io/enable":o?"true":"false"}}});case 3:m.default.close(i),n&&n(),p.default.success({content:t("UPDATE_SUCCESSFUL")});case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:m.default.Form,store:r,width:497,icon:"timed-task",title:t("CHANGE_STATUS"),children:s.default.createElement(E.default,null)},u))}},"log.collection.edit":{on:function(e){var a,r,n=e.store,E=e.success,S=e.component,O=(0,c.default)(e,["store","success","component"]),C={elasticsearch:y.default,kafka:g.default,opensearch:b.default},T=(null==n||null===(a=n.detail)||void 0===a||null===(r=a.name)||void 0===r?void 0:r.split("-").pop())||"",R="".concat(T,"_").concat(S).replace("-","_"),D=(0,f.default)((0,h.getValueObj)((0,v.safeAtob)((0,f.default)(n.detail._originData,'data["sink.yaml"]',{}))),"sinks.".concat(R),{}),N=C[T]||null,k=(0,i.default)(D),I=(0,i.default)(D);if(I.logstashPrefix=(0,f.default)(k,"bulk.index","-").replace("{{ .cluster }}-","").replace("-%Y.%m.%d",""),"opensearch"===T||"elasticsearch"===T){var P=(0,f.default)(k,"endpoints[0]",""),A=P.lastIndexOf(":");I.host=P.substring(0,A),I.port=P.substring(A+1)}var w,M=m.default.open(_({onOk:(w=(0,o.default)(l.default.mark((function e(a){var r,o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.default)(a),"opensearch"!==T&&"elasticsearch"!==T||(r.endpoints||(r.endpoints=[]),r.bulk||(r.bulk={index:""}),r.endpoints[0]=(0,d.default)(a.host,"http")?"".concat(a.host,":").concat(a.port):"http://".concat(a.host,":").concat(a.port),r.bulk.index="{{ .cluster }}-".concat(a.logstashPrefix,"-%Y.%m.%d"),delete r.host,delete r.port,delete r.logstashPrefix),o=(0,h.objectToYaml)({data:{sinks:(0,u.default)({},R,r)}}),(c=n.detail._originData).data["sink.yaml"]=(0,v.safeBtoa)(o),e.next=7,n.patch(n.detail,c);case 7:m.default.close(M),E&&E(),p.default.success({content:t("UPDATE_SUCCESSFUL")});case 10:case"end":return e.stop()}}),e)}))),function(e){return w.apply(this,arguments)}),modal:m.default.Form,data:I,width:691,icon:"timed-task",title:t("EDIT_LOG_RECEIVER"),children:s.default.createElement(N,null),store:n},O))}}};a.default=O},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(3012));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=m(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).statusLabel=[{label:t("ENABLE"),value:1},{label:t("DISABLE"),value:0}],e}return(0,u.default)(r,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement("p",{className:p.default.tip},t("LOG_COLLECTION_ENABLE_TIPS")),f.default.createElement(d.Form.Item,null,f.default.createElement(d.Select,{name:"enabled",options:this.statusLabel,placeholder:t("SELECT_STATUS_TIP")})))}}]),r}(f.Component);a.default=v},function(e,t,a){e.exports={tip:"_1uuSdxXW-f_ib1niUKsZY7"}},,,,,function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(73),r(16),r(9),r(13),r(10),r(24),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(73),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=r(14),c=n(r(240)),s=n(r(787)),i=n(r(3018)),f=n(r(1698)),d=n(r(824));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={"member.invite":{on:function(e){var a=e.store,r=e.cluster,n=e.workspace,l=e.namespace,u=e.success,f=e.devops,d=(0,o.default)(e,["store","cluster","workspace","namespace","success","devops"]),p=s.default.open(m({onOk:function(e){a.create(e,{cluster:r,workspace:n,namespace:null!=l?l:f}).then((function(){s.default.close(p),c.default.success({content:t("INVITED_SUCCESSFULLY")}),u&&u()}))},modal:i.default,store:a,cluster:r,workspace:n,namespace:l,devops:f},d))}},"member.edit":{on:function(e){var a=e.store,r=e.module,n=e.detail,l=e.cluster,u=e.workspace,i=e.namespace,d=e.success,p=e.devops,v=(0,o.default)(e,["store","module","detail","cluster","workspace","namespace","success","devops"]),h=s.default.open(m({onOk:function(e){a.update(m(m(m({},n),l),{},{workspace:u,namespace:null!=i?i:p}),{username:n.name,roleRef:e}).then((function(){s.default.close(h),c.default.success({content:t("UPDATE_SUCCESSFUL")}),d&&d()}))},modal:f.default,store:a,module:r},v))}},"member.remove":{on:function(e){var a=e.store,r=e.detail,n=e.cluster,l=e.workspace,u=e.namespace,i=e.success,f=e.devops,p=(0,o.default)(e,["store","detail","cluster","workspace","namespace","success","devops"]),v=s.default.open(m({onOk:function(){a.delete(m(m({},r),{},{cluster:n,workspace:l,namespace:null!=u?u:f})).then((function(){s.default.close(v),c.default.success({content:t("DELETED_SUCCESSFULLY")}),i&&i()}))},modal:d.default,title:t("REMOVE_MEMBER"),desc:t.html("REMOVE_MEMBER_TIP",{resource:r.name}),resource:r.name,store:a},p))}},"member.remove.batch":{on:function(e){var a=e.store,r=e.cluster,n=e.workspace,l=e.namespace,i=e.success,f=e.devops,p=(0,o.default)(e,["store","cluster","workspace","namespace","success","devops"]),v=(0,u.toJS)(a.list.selectedRowKeys),h=v.join(", "),E=s.default.open(m({onOk:function(){a.batchDelete({rowKeys:v,cluster:r,workspace:n,namespace:l,devops:f}).then((function(){s.default.close(E),c.default.success({content:t("DELETED_SUCCESSFULLY")}),i&&i()}))},modal:d.default,title:1===h.split(", ").length?t("REMOVE_MEMBER"):t("REMOVE_MULTIPLE_MEMBERS"),desc:1===h.split(", ").length?t.html("REMOVE_MEMBER_TIP",{resource:h}):t.html("REMOVE_MULTIPLE_MEMBERS_TIP",{resource:h}),resource:h,store:a},p))}}};a.default=v},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var l,o,u,c=n(r(61)),s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(1)),E=r(14),y=r(239),g=r(186),b=n(r(787)),S=n(r(863)),_=n(r(322)),O=n(r(3019)),C=n(r(1697));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var N=(0,y.observer)((u=o=function(e){(0,d.default)(r,e);var a=D(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props,r=a.workspace,n=a.namespace,l=a.devops;t.userStore.fetchList(R({name:t.state.name,workspace:n||l?r:void 0},e))},t.handleSearch=function(e){t.setState({name:e},t.fetchData)},t.handleSelect=function(e,a){t.setState((function(t){var r=t.members,n=t.newMembers;return{members:[].concat((0,c.default)(r),[e]),newMembers:[].concat((0,c.default)(n),[{username:e,roleRef:a}])}}))},t.handleSubmit=function(){t.props.onOk(t.state.newMembers)},t.userStore=new _.default,t.memberStore=new _.default,t.state={members:[],newMembers:[]},t}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cluster,r=t.workspace,n=t.namespace,l=t.devops;this.memberStore.fetchList({limit:-1,cluster:a,workspace:r,namespace:null!=n?n:l}).then((function(){e.setState({members:e.memberStore.list.data.map((function(e){return e.name}))})}))}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.roles,o=a.title,u=a.desc,c=a.searchPlaceholder,s=this.state.members,i=(0,E.toJS)(this.userStore.list),f=i.data,d=void 0===f?[]:f,p=i.total,m=i.page,h=i.isLoading;return v.default.createElement(b.default,{width:691,icon:"pen",onCancel:n,onOk:this.handleSubmit,visible:r,bodyClassName:C.default.modalBody,hideHeader:!0},v.default.createElement("div",{className:C.default.body},v.default.createElement("div",{className:C.default.title},v.default.createElement("div",{className:"h4"},o||t("INVITE_MEMBER")),v.default.createElement("p",null,u||t("INVITE_MEMBER_DESC"))),v.default.createElement("div",{className:C.default.content},v.default.createElement(g.InputSearch,{placeholder:c||t("INVITE_MEMBER_SEARCH_PLACEHOLDER"),onSearch:this.handleSearch}),v.default.createElement("div",{className:C.default.results},v.default.createElement(S.default,{data:d,total:p,page:m,loading:h,onFetch:this.fetchData},d.map((function(t){return v.default.createElement(O.default,{key:t.name,user:t,roles:l,selected:s.includes(t.name),onSelect:e.handleSelect})})))))))}}]),r}(v.default.Component),o.propTypes={roles:h.default.array,visible:h.default.bool,workspace:h.default.string,namespace:h.default.string,cluster:h.default.string,title:h.default.string,desc:h.default.string,searchPlaceholder:h.default.string,onOk:h.default.func,onCancel:h.default.func},o.defaultProps={roles:[],visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=N},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(26)),f=n(r(0)),d=n(r(1)),p=r(186),m=n(r(788)),v=n(r(1697));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleMoreMenuClick=function(t,a){var r=e.props;(0,r.onSelect)(r.user.username,a)},e}return(0,o.default)(r,[{key:"getDesc",value:function(e){var a=(0,i.default)(e,"description");return t(a)}},{key:"renderMoreMenu",value:function(){var e=this,a=this.props.roles;return f.default.createElement("div",{className:v.default.menu},f.default.createElement("p",null,t("ASSIGN_ROLE")),f.default.createElement(p.Menu,{onClick:this.handleMoreMenuClick},a.map((function(t){return f.default.createElement(p.Menu.MenuItem,{key:t.name},f.default.createElement(m.default,{className:v.default.avatar,icon:"role",iconSize:40,title:t.name,desc:e.getDesc(t),noLink:!0}))}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.onSelect,r=e.selected;return f.default.createElement("div",{className:v.default.item,"data-user":t.username},f.default.createElement("p",null,f.default.createElement("strong",null,t.username)),f.default.createElement("p",null,t.email),!r&&f.default.createElement(p.Dropdown,{content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},f.default.createElement(p.Button,{type:"control",icon:"add",iconType:"light",onClick:a})),r&&f.default.createElement(p.Button,{type:"flat",icon:"check",disabled:!0}))}}]),r}(f.default.Component);a.default=E,E.propTypes={user:d.default.object,roles:d.default.array,selected:d.default.bool,onSelect:d.default.func}},function(e,t,a){e.exports={option:"_2hbd_NLQpyyfSepVMs0f2Z"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=r(14),c=n(r(26)),s=n(r(189)),i=n(r(74)),f=n(r(240)),d=n(r(787)),p=n(r(825)),m=n(r(3022)),v=r(72),h=n(r(435)),E=n(r(901)),y=n(r(1699));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={"microservice.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,u=e.module,m=e.success,g=e.isFederated,S=e.supportGpuSelect,_=void 0!==S&&S,O=(0,o.default)(e,["store","cluster","namespace","module","success","isFederated","supportGpuSelect"]),C=v.MODULE_KIND_MAP[u],T=(0,l.default)({},C,h.default[u]({namespace:n})),R=d.default.open(b({onOk:function(e){var l=(e=(0,s.default)(e,(0,v.OMIT_TOTAL_REPLICAS)(C)))[C];if(l){var o=(0,c.default)(l,"metadata.name");(0,i.default)(l,'metadata.labels["springcloud.kubesphere.io/app"]',o),(0,i.default)(l,'spec.template.metadata.labels["springcloud.kubesphere.io/app"]',o),a.create(l,{cluster:r,namespace:n}).then((function(){d.default.close(R),f.default.success({content:t("CREATE_SUCCESSFUL")}),m&&m(),E.default.delete("".concat(u,"_create_form"))}))}},steps:y.default,module:u,cluster:r,namespace:n,name:C,isFederated:g,formTemplate:T,modal:p.default,store:a,supportGpuSelect:_,maxNameLength:63},O))}},"microservice.instance.weight.edit":{on:function(e){var a=e.store,r=e.namespace,n=(e.module,e.cluster),l=e.detail,c=e.success,s=(0,o.default)(e,["store","namespace","module","cluster","detail","success"]),i=d.default.open(b({modal:m.default,onOk:function(e){a.update(l,e).then((function(){d.default.close(i),f.default.success({content:t("MODIFY_SUCCESSFUL")}),c&&c(e)}))},detail:(0,u.toJS)(l._originData),store:a,namespace:r,cluster:n},s))}}};a.default=S},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(830)),m=r(186),v=n(r(787)),h=n(r(799));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).state={formData:(0,p.default)((0,d.toJS)(e.detail._originData||e.detail))},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.onOk,o=this.state.formData;return i.default.createElement(v.default.Form,{formRef:this.form,data:o,width:691,title:t("EDIT_WEIGHT"),icon:"pen",onOk:l,onCancel:n,visible:a,isSubmitting:r},i.default.createElement(m.Form.Item,{label:t("WEIGHT"),desc:t("INSTANCE_WEIGHT_DESC")},i.default.createElement(h.default,{name:"spec.weight",integer:!0,min:0})))}}]),r}(i.default.Component);a.default=y,y.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=r(14),c=n(r(74)),s=n(r(26)),i=n(r(240)),f=n(r(787)),d=n(r(825)),p=n(r(824)),m=n(r(435)),v=n(r(3024));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"microservicegateway.create":{on:function(e){var a=e.store,r=e.namespace,n=e.cluster,l=e.success,u=(0,o.default)(e,["store","namespace","cluster","success"]),p=f.default.open(E({onOk:function(e){var o=[];(0,s.default)(e,"spec.deployment.template.spec.containers[0].ports",[]).forEach((function(e){o.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})})),(0,c.default)(e,"spec.service.ports",o),""===(0,s.default)(e,"spec.service.type","")&&(0,c.default)(e,"spec.service.type","ClusterIP"),a.create(e,{cluster:n,namespace:r}).then((function(){f.default.close(p),i.default.success({content:t("CREATE_SUCCESSFUL")}),l&&l()}))},formTemplate:m.default.microservicegateways({namespace:r}),modal:d.default,steps:v.default,namespace:r,cluster:n,store:a},u))}},"microservicegateway.edit":{on:function(e){var a=e.store,r=e.namespace,n=e.cluster,l=e.detail,p=e.isEdit,m=void 0===p||p,h=e.title,y=void 0===h?t("EDIT_MICROSERVICE_GATEWAY"):h,g=e.okBtnText,b=void 0===g?t("OK"):g,S=e.success,_=(0,o.default)(e,["store","namespace","cluster","detail","isEdit","title","okBtnText","success"]),O=(0,u.toJS)(l._originData);"ClusterIP"===(0,s.default)(O,"spec.service.type","")&&(0,c.default)(O,"spec.service.type","");var C=f.default.open(E({onOk:function(e){var r=[];(0,s.default)(e,"spec.deployment.template.spec.containers[0].ports",[]).forEach((function(e){r.push({name:e.name,protocol:e.protocol,port:e.servicePort,targetPort:e.containerPort})})),(0,c.default)(e,"spec.service.ports",r),""===(0,s.default)(e,"spec.service.type","")&&(0,c.default)(e,"spec.service.type","ClusterIP"),a.update(l,e).then((function(){f.default.close(C),i.default.success({content:t("MODIFY_SUCCESSFUL")}),S&&S()}))},isEdit:m,title:y,okBtnText:b,formTemplate:O,modal:d.default,steps:v.default,namespace:r,cluster:n,store:a},_))}},"microservicegateway.delete":{on:function(e){var a=e.store,r=(e.resource,e.detail),n=e.cluster,l=e.namespace,u=e.success,c=(0,o.default)(e,["store","resource","detail","cluster","namespace","success"]),s=f.default.open(E({onOk:function(){a.delete({cluster:n,namespace:l,name:r.name}).then((function(){f.default.close(s),i.default.success({content:t("DELETED_SUCCESSFULLY")}),u&&u()}))},store:a,modal:p.default,type:"MICROSERVICE_GATEWAY",resource:r.name,cluster:n,namespace:l},c))}}};a.default=y},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3025)),l=r(a(3028)),o=[{title:"GATEWAY_SETTINGS",component:n.default,required:!0},{title:"ADVANCED_SETTINGS",component:l.default,require:!0}];t.default=o},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(29),r(18),r(48),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(29),r(18),r(28),r(48),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var l=n(r(315)),o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(26)),m=n(r(74)),v=n(r(63)),h=n(r(158)),E=n(r(1700)),y=r(186),g=n(r(799)),b=n(r(872)),S=n(r(1300)),_=n(r(1097)),O=n(r(1301)),C=n(r(1302)),T=n(r(1297)),R=r(72),D=r(248),N=n(r(885)),k=n(r(913)),I=n(r(3027));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var M=["limits.cpu","limits.memory","requests.cpu","requests.memory"],L=function(e){(0,s.default)(r,e);var a=w(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).quotaStore=new N.default,e.workspaceQuotaStore=new k.default,e.state={leftQuota:""},e.nameValidator=function(a,r,n){var l=e.props,o=l.namespace,u=l.cluster;return l.isEdit?n():r?void e.props.store.checkName({name:r,namespace:o,cluster:u}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()})):n()},e.handleNameChange=function(t){var a=t.slice(0,63);(0,m.default)(e.formTemplate,"spec.deployment.template.metadata.labels.app",a),(0,m.default)(e.formTemplate,'spec.deployment.template.metadata.labels["springcloud.kubesphere.io/app"]',a),(0,m.default)(e.formTemplate,"spec.deployment.template.spec.containers[0].name",a),(0,m.default)(e.formTemplate,"spec.deployment.selector.matchLabels.app",a),(0,m.default)(e.formTemplate,'spec.deployment.labels["springcloud.kubesphere.io/app"]',a)},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.initContainerPorts(),this.fetchQuota()}},{key:"initContainerPorts",value:function(){var e=(0,p.default)(this.formTemplate,"".concat(this.prefix,".ports")),t=(0,p.default)(this.formTemplate,"spec.service.ports");if(!(0,v.default)(e)){var a=e.map((function(e,a){return A(A({},e),{},{servicePort:(0,p.default)(t,"".concat(a,".port"))})}));(0,m.default)(this.formTemplate,"".concat(this.prefix,".ports"),a)}}},{key:"fetchQuota",value:function(){var e=this,t=this.props,a=t.workspace,r=t.cluster,n=t.namespace;Promise.all([this.quotaStore.fetch({cluster:r,namespace:n}),this.workspaceQuotaStore.fetchDetail({workspace:a,name:a,cluster:r})]).then((function(t){var a=(0,D.getLeftQuota)(t[1],(0,p.default)(t[0],"data")).workspace,r=(0,D.getUsedQuota)((0,p.default)(t[0],"data")),n={};M.forEach((function(e){var t=a[e],l=r[e];t&&!(0,h.default)(t)?n[e]=(0,E.default)(t,l):n[e]=void 0})),e.setState({leftQuota:n})}))}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.rootStore,n=e.namespace,o=e.cluster,u=e.isEdit;return d.default.createElement(y.Form,{ref:a,data:this.formTemplate},d.default.createElement(y.Columns,{className:I.default.columns},d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:R.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},d.default.createElement(y.Input,{name:"metadata.name",maxLength:63,autoFocus:!u,disabled:u,onChange:this.handleNameChange})))),d.default.createElement(y.Columns,{className:I.default.columns},d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("IMAGE"),rules:[{required:!0,message:t("GATEWAY_IMAGE_EMPTY_DESC")}]},d.default.createElement(y.Input,{name:"spec.deployment.template.spec.containers[0].image",placeholder:"nginx:latest"}))),d.default.createElement(y.Column,null,d.default.createElement(y.Form.Item,{label:t("REPLICA_COUNT"),rules:[{required:!0,message:t("REPLICA_COUNT_EMPTY_DESC")}]},d.default.createElement(g.default,{name:"spec.deployment.replicas",defaultValue:1,min:1,integer:!0,controls:!0})))),d.default.createElement("div",{className:I.default.wrapper},d.default.createElement(y.Form.Item,null,d.default.createElement(b.default,(0,l.default)({name:"".concat(this.prefix,".resources")},this.resourceLimitProps)))),d.default.createElement(_.default,{prefix:this.prefix,withService:!0}),d.default.createElement(O.default,{prefix:this.prefix}),d.default.createElement(C.default,{prefix:this.prefix}),d.default.createElement(y.Form.Group,{label:t("ENVIRONMENT_VARIABLE_PL"),desc:t("CONTAINER_ENVIRONMENT_DESC"),checkable:!0},d.default.createElement(y.Form.Item,null,d.default.createElement(S.default,{name:"spec.deployment.template.spec.containers[0].env",rootStore:r,namespace:n,cluster:o}))),d.default.createElement(T.default,{prefix:this.prefix}))}},{key:"prefix",get:function(){return"spec.deployment.template.spec.containers[0]"}},{key:"formTemplate",get:function(){return this.props.formTemplate}},{key:"resourceLimitProps",get:function(){var e=this.state.leftQuota;return{defaultValue:{limits:{cpu:(0,p.default)(this.formTemplate,"".concat(this.prefix,'.resources["limits.cpu"]')),memory:(0,p.default)(this.formTemplate,"".concat(this.prefix,'.resources["limits.memory"]'))},requests:{cpu:(0,p.default)(this.formTemplate,"".concat(this.prefix,'.resources["requests.cpu"]')),memory:(0,p.default)(this.formTemplate,"".concat(this.prefix,'.resources["requests.memory"]'))}},workspaceLimitProps:(0,v.default)(e)?{}:{limits:{cpu:(0,p.default)(e,"limits.cpu"),memory:(0,p.default)(e,"limits.memory")},requests:{cpu:(0,p.default)(e,"requests.cpu"),memory:(0,p.default)(e,"requests.memory")}}}}}]),r}(d.default.Component);a.default=L},,function(e,t,a){e.exports={wrapper:"_2aGmg1SqGR_HAxgNvm2zes",columns:"_137ogh4mr41Ac3GAWRpjhP"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(3029));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate;return i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement(f.Form.Group,{label:t("EXTERNAL_ACCESS"),desc:t("SERVICE_EXTERNAL_ACCESS_DESC"),checkable:!0},i.default.createElement(d.default,{formTemplate:r})))}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(26)),d=n(r(74)),p=n(r(242)),m=n(r(0)),v=r(186),h=n(r(842)),E=n(r(3030));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleAccessModeChange=function(e){if("LoadBalancer"===e){var a=(0,f.default)(t.formTemplate,"spec.service.annotations",{});a=g(g({},globals.config.loadBalancerDefaultAnnotations),a),(0,d.default)(t.formTemplate,"spec.service.annotations",a)}else Object.keys(globals.config.loadBalancerDefaultAnnotations).forEach((function(e){(0,p.default)(t.formTemplate,'spec.service.annotations["'.concat(e,'"]'))}));t.setState({mode:e})},t.optionRenderer=function(e){return m.default.createElement("div",{className:E.default.option},m.default.createElement("div",null,e.label),m.default.createElement("p",null,e.desc))},t.state={mode:(0,f.default)(t.formTemplate,"spec.service.type","ClusterIP")},t}return(0,u.default)(r,[{key:"render",value:function(){var e=this.state.mode;return m.default.createElement(m.default.Fragment,null,m.default.createElement(v.Form.Item,{label:t("ACCESS_MODE")},m.default.createElement(v.Select,{name:"spec.service.type",options:this.accessModes,onChange:this.handleAccessModeChange,optionRenderer:this.optionRenderer,placeholder:" "})),"LoadBalancer"===e&&m.default.createElement(v.Form.Item,{label:t("ANNOTATION_PL")},m.default.createElement(h.default,{name:"spec.service.annotations",hiddenKeys:globals.config.preservedAnnotations,addText:t("ADD")})))}},{key:"formTemplate",get:function(){return this.props.formTemplate}},{key:"accessModes",get:function(){return[{label:"NodePort",desc:t("ACCESS_NODEPORT_TIP"),value:"NodePort"},{label:"LoadBalancer",desc:t("ACCESS_LOADBALANCER_TIP"),value:"LoadBalancer"}]}}]),r}(m.default.Component);a.default=S},function(e,t,a){e.exports={wrapper:"_3gjtQxlJDCeZNKs50wvwrF",title:"cL9stDI8z0xGGtsGjFBWA",contentWrapper:"_3TShf0a0NSRmjIn5nojL0H",option:"_3WVSaQ0HCbYvIGbYKY9fkD"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(11),r(6),r(29),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(24),r(17),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(11),r(6),r(29),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(17),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(1170)),d=n(r(825)),p=n(r(824)),m=n(r(3032)),v=n(r(3038)),h=n(r(3040)),E=n(r(3042)),y=n(r(3043)),g=n(r(3044)),b=n(r(3045)),S=n(r(3046)),_=n(r(3047)),O=n(r(3048)),C=n(r(3050)),T=n(r(3052)),R=n(r(135)),D=n(r(26)),N=n(r(63)),k=n(r(74)),I=n(r(435)),P=r(52);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={"network.policies.add":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.module,u=n.cluster,f=i.default.open(w({modal:b.default,onOk:function(e){(0,N.default)(e)?i.default.close(f):a.create(e,{cluster:u,namespace:l}).then((function(){i.default.close(f),s.default.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:I.default[o]({namespace:l}),store:a},n))}},"network.policies.addIpBlock":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.module,u=n.cluster,d=f.default.open(w({modal:_.default,onOk:function(e){(0,N.default)(e)?i.default.close(d):a.create(e,{cluster:u,namespace:l}).then((function(){i.default.close(d),s.default.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:I.default[o]({namespace:l}),store:a},n))}},"network.policies.viewIpBlock":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.namespace,o=n.module,u=n.cluster,d=f.default.open(w({modal:O.default,onOk:function(e){(0,N.default)(e)?i.default.close(d):a.create(e,{cluster:u,namespace:l}).then((function(){i.default.close(d),s.default.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:I.default[o]({namespace:l}),store:a},n))}},"network.policies.editIpBlock":{on:function(e){var a,r,n,l,o=e.store,u=e.success,d=e.formTemplate,p=(e.onOk,e.onCancel,(0,c.default)(e,["store","success","formTemplate","onOk","onCancel"])),m=p.namespace,v=p.cluster,h=p.name,E=d,y=d.spec.egress?"egress":"ingress",g=(null==d||null===(a=d.spec)||void 0===a?void 0:a.egress)||(null==d||null===(r=d.spec)||void 0===r?void 0:r.ingress)||[],b=(null===(n=g[0])||void 0===n||null===(l=n.ports)||void 0===l?void 0:l.map((function(e){var t={};return e.protocol&&(t.protocol=null==e?void 0:e.protocol),e.port&&(t.port={},t.port.value=e.port.toString()),e.endPort&&(t.endPort={},t.endPort.value=e.endPort.toString()),t})))||[],S=(g[0].to?g[0].to:g[0].from||[]).map((function(e){var t=e.ipBlock.cidr.split("/");return{ip:{value:t[0]},mask:{value:t[1]}}}))||[];E.specType=y,E.portRules=b,E.cidrRules=S;var O=f.default.open(w({modal:_.default,onOk:function(e){(0,N.default)(e)?i.default.close(O):o.update({cluster:v,namespace:m,name:h},e).then((function(){i.default.close(O),s.default.success({content:t("MODIFY_SUCCESSFUL")}),u&&u()}))},formTemplate:E,store:o,edit:!0},p))}},"network.policies.toggle":{on:function(e){var a=e.success,r=(0,c.default)(e,["success"]),n=i.default.open(w({modal:p.default,onOk:function(){i.default.close(n),s.default.success({content:t("DISABLE_SUCCESSFUL")}),a&&a()}},r))}},"network.policies.delete":{on:function(e){var a=e.store,r=e.success,n=(e.onOk,e.onCancel,(0,c.default)(e,["store","success","onOk","onCancel"])),l=n.namespace,o=n.cluster,u=n.ruleName,f=i.default.open(w({modal:p.default,onOk:function(){a.delete({name:u,namespace:l,cluster:o}).then((function(){i.default.close(f),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r&&r()}))},resource:u,store:a},n))}},"network.policies.addByYaml":{on:function(e){var t,a=e.store,r=(e.detail,e.success),n=(0,c.default)(e,["store","detail","success"]),u=n.cluster,s=i.default.open(w({modal:S.default,onOk:(t=(0,o.default)(l.default.mark((function e(t){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,D.default)(t,"metadata.namespace"),e.next=3,a.create(t,{namespace:n,cluster:u});case 3:i.default.close(s),r&&r();case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a},n))}},"edge.nodegroup.ippool.add":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),f=i.default.open(w({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.cluster,c=u.group,e.next=3,r.bindIpPoolToNodeGroup({cluster:o,nodetree:c,params:[{op:"add",path:"/metadata/annotations/infra.kubesphere.io~1ippool-".concat(a.namespace),value:a.ippool}]});case 3:i.default.close(f),s.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n(a);case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,title:t("绑定容器组 IP池"),formTemplate:{},modal:C.default,noCodeEdit:!0},u))}},"network.ippool.add":{on:function(e){var a,r=e.store,n=e.success,u=e.isCalico,f=void 0!==u&&u,p=e.allList,m=(0,c.default)(e,["store","success","isCalico","allList"]),v=m.cluster,h=i.default.open(w({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,f;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.list,!(u=(0,P.cidrOverlap)(o,p))){e.next=4;break}return e.abrupt("return",s.default.error({content:t("CIDR_OVERLAP",{cidr0:u[0],cidr1:u[1]})}));case 4:return f=[],o.forEach((function(e){var t=e.workspace,a=(e.key,e.isEdge),n=e.name,l=e.description,o=e.aliasName,u=(0,c.default)(e,["workspace","key","isEdge","name","description","aliasName"]);delete u.nodeSelectorText,delete u.nodeSelectorLable;var s={apiVersion:"crd.projectcalico.org/v1",kind:"IPPool",metadata:{name:n,annotations:{"kubesphere.io/description":l,"kubesphere.io/alias-name":o}},spec:w({type:"calico"},u)},i=a?"kubesphere.io/workspace":"kubesphere.io/namespace";t&&("__ALL__"===t?(s.metadata.annotations[i]="",(0,k.default)(s,'metadata.labels["ippool.network.kubesphere.io/default"]',"")):(0,k.default)(s,'metadata.labels["'.concat(i,'"]'),t)),f.push(r.create(s,{cluster:v}))})),e.next=8,Promise.all(f);case 8:i.default.close(h),s.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 11:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,title:t("CREATE_POD_IP_POOL"),formTemplate:{},steps:T.default,hideWorkspace:f,modal:d.default,noCodeEdit:!0},m))}},"network.ipool.assignworkspace":{on:function(e){var a,r=e.store,n=e.success,u=e.detail,f=(0,c.default)(e,["store","success","detail"]),d=i.default.open(w({modal:E.default,onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(u,a);case 2:i.default.close(d),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:u},f))}},"network.ipool.assignnamespace":{on:function(e){var a,r=e.store,n=e.success,u=e.detail,f=(0,c.default)(e,["store","success","detail"]),d=i.default.open(w({modal:y.default,onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(u,a);case 2:i.default.close(d),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:u},f))}},"network.ipool.autoAssign":{on:function(e){var a,r=e.store,n=e.success,u=e.detail,f=(0,c.default)(e,["store","success","detail"]),d=i.default.open(w({modal:g.default,onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(u,a);case 2:i.default.close(d),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:u},f))}},"network.ipool.edit":{on:function(e){var t,a=e.store,r=e.success,n=e.detail,u=(0,c.default)(e,["store","success","detail"]),s=(0,R.default)(n),f=i.default.open(w(w({onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.default.close(f),r&&r(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,formTemplate:s},u),{},{modal:m.default}))}},"network.ipool.editoverlay":{on:function(e){var a,r=e.store,n=e.success,u=e.detail,f=(0,c.default)(e,["store","success","detail"]),d=i.default.open(w({modal:h.default,onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(u,a);case 2:i.default.close(d),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:u},f))}},"network.ipool.disable":{on:function(e){var a,r=e.store,n=e.success,u=e.detail,f=e.cluster,d=(0,c.default)(e,["store","success","detail","cluster"]),p=i.default.open(w({modal:v.default,onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.old,!(c=a.new)){e.next=4;break}return e.next=4,r.migrate(f,o,c);case 4:return e.next=6,r.patch(u,{spec:{disabled:!0}});case 6:i.default.close(p),s.default.success({content:t("DISABLE_SUCCESSFUL")}),n&&n();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:f,store:r,detail:u},d))}},"network.ipool.removeNamespace":{on:function(e){var a=e.store,r=e.success,n=(e.workspace,e.data),l=(0,c.default)(e,["store","success","workspace","data"]),o=l.namespace,u=l.cluster,f=i.default.open(w({modal:p.default,onOk:function(){a.patchNamespace({namespace:o,cluster:u},n).then((function(){i.default.close(f),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r&&r()}))},store:a},l))}},"network.ipool.removeNamespaceAll":{on:function(e){var a,r=e.store,n=e.success,u=(e.workspace,e.data,(0,c.default)(e,["store","success","workspace","data"])),f=u.namespaceList,d=u.getData,m=u.cluster,v=i.default.open(w({modal:p.default,onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],f.forEach((function(e){a.push(r.patchNamespace({namespace:e.name,cluster:m},d(e)))})),e.next=4,Promise.all(a);case 4:i.default.close(v),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n();case 7:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r},u))}}};a.default=M},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(58)),c=n(r(0)),s=r(903),i=l(r(1702)),f=function(e){var a=e.title,r=e.visible,n=e.onOk,l=e.onCancel,f=(0,u.default)(e,["title","visible","onOk","onCancel"]),d=c.useRef();return c.createElement(s.Modal,{width:960,visible:r,title:null!=a?a:t("EDIT_POD_IP_POOL"),onOk:function(){d.current&&d.current.validate((function(){n(d.current.getData())}))},onCancel:l,okText:t("EDIT")},c.createElement(i.default,(0,o.default)({},f,{formRef:d})))};a.default=f},,function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=b,r(12),r(11),r(6),r(18),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=l(r(30)),u=l(r(96)),c=r(186),s=l(r(3)),i=l(r(790)),f=l(r(135)),d=l(r(806)),p=l(r(1)),m=n(r(0)),v=l(r(106)),h=r(434),E=l(r(3035));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var a=e.value,r=e.onChange,n=m.useRef(),l=m.useState(Object.keys(a).length?a:{ipipMode:"Never",vxlanMode:"Never"}),o=(0,u.default)(l,2),p=o[0],y=o[1],b=(0,h.getOverlayStatus)(p),S=m.useState(!1),_=(0,u.default)(S,2),O=_[0],C=_[1],T=m.useRef(),R=m.useRef();m.useEffect((function(){(0,d.default)(p,a)||y(a)}),[a]);var D,N,k=function(){C(!O),y(a)},I=["Never","Always","CrossSubnet"].map((function(e){return{label:e,value:e}})),P=function(e){y(g(g({},p),{},{ipipMode:e,vxlanMode:"Never"===e?p.vxlanMode:"Never"}))},A=function(e){y(g(g({},p),{},{vxlanMode:e,ipipMode:"Never"===e?p.ipipMode:"Never"}))},w=function(){R.current&&R.current.validate((function(){r(p),C(!1)}))};return m.createElement("div",{ref:T,className:E.default.wrapper},m.createElement("div",{ref:T,className:(0,s.default)(E.default.value,E.default.card),onClick:k},m.createElement(i.default,{icon:"intranet-routers-duotone",title:null!==(D=b.type)&&void 0!==D?D:"-",description:t("IPPOOL_OVERLAY_MODE")}),b.value?m.createElement(i.default,{title:null!==(N=null==b?void 0:b.value)&&void 0!==N?N:"-",description:t("CONFIGURATION_MODE")}):m.createElement("span",null),m.createElement(c.Icon,{name:O?"chevron-up":"chevron-down",size:20})),O?v.default.createPortal(m.createElement("div",{ref:n,className:(0,s.default)(E.default.card,E.default.form)},m.createElement(c.Form,{ref:R,data:(0,f.default)(p)},m.createElement(c.Columns,null,m.createElement(c.Column,null,m.createElement(c.Form.Item,{label:t("IPIP_MODE"),rules:[{required:!0,message:t("IPIP_MODE_REQUIRED")}],desc:t("IPIP_MODE_DESC")},m.createElement(c.Select,{name:"ipipMode",options:I,onChange:P}))),m.createElement(c.Column,null,m.createElement(c.Form.Item,{label:t("VXLAN_MODE"),rules:[{required:!0,message:t("VXLAN_MODE_REQUIRED")}],desc:t("VXLAN_MODE_DESC")},m.createElement(c.Select,{name:"vxlanMode",options:I,onChange:A})))),m.createElement("div",{className:E.default.footer},m.createElement("div",{className:E.default.button,onClick:k},m.createElement(c.Icon,{name:"close",type:"light",size:16})),m.createElement("div",{className:E.default.button,onClick:w},m.createElement(c.Icon,{name:"check",type:"light",sizse:16}))))),T.current):null)}b.propTypes={value:p.default.object,onChange:p.default.func}},function(e,t,a){e.exports={wrapper:"_3k1EaXx8ZQXIX6sSacey4a",card:"_1dYTJ5SrSX7NRLmu6L6LYb",value:"_2vy4dOZcERxaaYuFIbWxwU",form:"_3rsGiv4J9BvSqXYeHNz3r4",footer:"_11z0-XOErj1iN_Zq31ARs4",button:"_3BpgBQlrs5BIHZJEw-hn3i"}},function(e,a,r){"use strict";r(15);var n=r(20);r(84),r(29),r(18),r(4),r(23),r(17),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(29),r(18),r(42),r(4),r(23),r(57),r(17),r(32);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(1366)),p=r(832),m=n(r(3037));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleNameChange=function(e,a){t.setState({keyName:a})},t.handleKeyChange=function(e){t.setState({key:e,values:[]},(function(){return t.handleChange()}))},t.handleOperatorChange=function(e){var a=t.state.values;["Exists","DoesNotExist"].includes(e)&&(a=void 0),"Match"===e&&(a=""),t.setState({operator:e,values:a},(function(){return t.handleChange()}))},t.handleValueChange=function(e){t.setState({values:e},(function(){return t.handleChange()}))},t.handleChange=function(){var e=t.state,a=e.key,r=e.operator,n=e.values,l=["Exists","DoesNotExist"].includes(r)?void 0:n||[],o={key:a,operator:r};l&&(o.values=l),"Match"===r&&(o.regexValue=n,delete o.values),t.props.onChange(o)},t.state=t.getInitialData(),t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value){var t=this.props.value||{},a=t.key,r=void 0===a?"":a,n=t.operator,l=void 0===n?"":n,o=t.values,u=void 0===o?[]:o,c=t.regexValue;this.setState({values:c||u,key:r,operator:l})}}},{key:"getInitialData",value:function(){var e=this.props.value||{};return{key:e.key,operator:e.operator,values:e.values}}},{key:"renderValues",value:function(){var e=this,a=this.state,r=a.operator,n=a.values;return"Exists"===r||"DoesNotExist"===r?null:"Match"===r?i.default.createElement("div",null,i.default.createElement(f.Input,{name:"regexValue",value:n,onChange:function(t,a){return e.handleValueChange(a)},placeholder:t("VALUES")})):i.default.createElement(d.default,{name:"values",placeholder:t("VALUES"),value:n,onChange:this.handleValueChange})}},{key:"render",value:function(){var e=this,a=this.state,r=a.key,n=a.operator;return i.default.createElement("div",{className:m.default.selectWrapper},i.default.createElement(f.Input,{name:"key",value:r,placeholder:t("KEY"),className:m.default.input,onChange:function(t,a){return e.handleKeyChange(a)}}),i.default.createElement(f.Select,{name:"operator",value:n,options:this.operators,onChange:this.handleOperatorChange,placeholder:t("CONDITION_OPERATOR")}),this.renderValues())}},{key:"operators",get:function(){return[{label:t("CONTAIN"),value:"In"},{label:t("NOT_CONTAIN"),value:"NotIn"},{label:t("EXIST"),value:"Exists"},{label:t("NOT_EXIST"),value:"DoesNotExist"}]}},{key:"severities",get:function(){return p.SEVERITY_LEVEL.map((function(e){return{label:t(e.label),value:e.value,level:e}}))}}]),r}(i.default.Component);a.default=h},function(e,t,a){e.exports={selectWrapper:"_1qxoMwjpMfT2ECkbDPgEyC",optionsContainer:"_2En2n1YkjikJFAxAmRnf4P",optionsList:"_3Tr3o2NsuAeAwYPy3AiFEZ",customSelect:"_1jj4-hS6FWN5Px1g6kx40o",iconWrapper:"XuNHzRkWa4luHSuhHl3vQ"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=C,r(12),r(109),r(5),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(315)),o=n(r(30)),u=n(r(96)),c=n(r(58)),s=r(186),i=n(r(787)),f=n(r(790)),d=n(r(1310)),p=n(r(26)),m=n(r(1)),v=n(r(0)),h=n(r(1104)),E=n(r(1323)),y=r(52),g=r(72),b=r(434),S=n(r(3039));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var a=e.detail,r=e.onCancel,n=e.cluster,o=e.isEdge,m=e.store,_=(e.data,e.onOk),C=(0,c.default)(e,["store","data","onOk"]),T=v.default.useRef(),R=v.default.useState([]),D=(0,u.default)(R,2),N=D[0],k=D[1],I=v.default.useState(!1),P=(0,u.default)(I,2),A=P[0],w=P[1],M=v.default.useState(""),L=(0,u.default)(M,2),j=L[0],x=L[1],U=v.default.useRef(o?new E.default:new h.default("ippools")),F=(0,p.default)(a,"status.capacity",0),V=(0,p.default)(a,"status.unallocated",0),G=(0,b.getOverlayStatus)(a);v.default.useEffect((function(){U.current.fetchMigrateIpPool({limit:-1,cluster:n,name:a.name}).then((function(e){k(e.map((function(e){return O(O({},e),{},{label:e.name,value:e.name})})))}))}),[a,y.getDisplayName]);var B=v.default.useMemo((function(){return Boolean(N.length)&&a.status.tunnel!==a.status.allocations}),[a,N]);return v.default.createElement(i.default,(0,l.default)({className:S.default.modal,hideHeader:!0,okText:t("OK"),onOk:function(){T.current?T.current.validate((function(){_({old:a.name,new:A?j:""})})):_({old:a.name,new:A?j:""})},onCancel:r,hideFooter:!1},C),v.default.createElement("div",null,v.default.createElement("div",{className:S.default.header},v.default.createElement("div",{className:S.default.title},v.default.createElement(s.Icon,{name:"error",size:20,type:"light",color:{secondary:"#ca2621"},className:"margin-r4"}),t("DISABLE_POD_IP_POOL")),v.default.createElement("span",{className:S.default.close,onClick:r},v.default.createElement(s.Icon,{name:"close",type:"light",size:20}))),v.default.createElement(s.Alert,{type:"warning",message:t("DISABLE_POD_IP_POOL_DESC"),className:"margin-b20"}),v.default.createElement("div",{className:S.default.card},v.default.createElement("div",{className:S.default.row},v.default.createElement(f.default,{title:(0,y.getDisplayName)(a),icon:g.ICON_TYPES[m.module],description:a.description||"-"}),v.default.createElement(f.default,{title:"".concat(F-V," / ").concat(F),description:t("USED_IP_ADDRESSES")}),v.default.createElement(f.default,{title:a.cidr,description:t("NETWORK_SEGMENT")}),v.default.createElement(f.default,{title:v.default.createElement("div",null,v.default.createElement("span",{className:"font-bold"},G.type),G.value&&v.default.createElement("span",{style:{marginLeft:"4px"}},"(",G.value,")")),description:t("IPPOOL_OVERLAY_MODE")}))),B&&v.default.createElement("div",{className:S.default.card},v.default.createElement(f.default,{className:"margin-b12",title:v.default.createElement("div",null,v.default.createElement(s.Checkbox,{className:"margin-r12",onChange:w,disabled:!N.length}),v.default.createElement("span",null,t("MIGRATE_POD_IP_POOL"))),description:v.default.createElement("span",{style:{marginLeft:28}},t("MIGRATE_POD_IP_POOL_DESC"))}),v.default.createElement(s.Form,{ref:T,data:{migrateIPPool:j}},A&&v.default.createElement("div",{className:S.default.container},v.default.createElement(s.Form.Item,{rules:[{required:!0,message:t("SELECT_POD_IP_POOL_DESC")}]},v.default.createElement(d.default,{name:"migrateIPPool",list:N,icon:"eip-group",value:j,onChange:x,hideColumns:["blockSize"]})))))))}C.propTypes={data:m.default.object,store:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool,width:m.default.number},C.defaultProps={width:960}},function(e,t,a){e.exports={modal:"_32N1KA5lqz7Rhf6nPU_SmZ",header:"_4hqu6e02Ta7A-LqN1Yyd",title:"_3h5TnZmoUNq22890_EptHa",close:"_2VlHBgXP9K7HFVBhc1O0c2",card:"_5lACFwDW77C_ssV-M-3Jg",checkboxContainer:"_1vwW1jjBUCJY4itLFIiQvz",row:"_304cXBwAclHJqwD-zjE1lF",container:"_3SUCvKYYzGhhuhDyj9tJxL",option:"_36NfxJ2xc-ZSmIuzcBtjjW"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(30)),c=l(r(96)),s=l(r(58));r(12),r(11),r(6),r(18),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var i=r(186),f=l(r(787)),d=l(r(806)),p=l(r(241)),m=n(r(0)),v=l(r(3041));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=["Never","Always","CrossSubnet"].map((function(e){return{label:e,value:e}})),g=function(e){var a=e.detail,r=e.onOk,n=(0,s.default)(e,["detail","onOk"]),l=m.useState((0,p.default)(a,["ipipMode","vxlanMode"])),u=(0,c.default)(l,2),h=u[0],g=u[1],b=m.useRef();m.useEffect((function(){(0,d.default)((0,p.default)(a,["ipipMode","vxlanMode"]),h)||g((0,p.default)(a,["ipipMode","vxlanMode"]))}),[a]);return m.createElement(f.default,(0,o.default)({icon:"pen",width:960,title:t("EDIT_OVERLAY_MODE")},n,{onOk:function(){b.current&&b.current.validate((function(){r({spec:h})}))}}),m.createElement("div",{className:v.default.wrapper},m.createElement(i.Form,{ref:b,data:h},m.createElement(i.Columns,null,m.createElement(i.Column,null,m.createElement(i.Form.Item,{label:t("IPIP_MODE"),rules:[{required:!0,message:t("IPIP_MODE_REQUIRED")}],desc:t("IPIP_MODE_DESC")},m.createElement(i.Select,{name:"ipipMode",options:y,onChange:function(e){g(E(E({},h),{},{ipipMode:e,vxlanMode:"Never"===e?h.vxlanMode:"Never"}))}}))),m.createElement(i.Column,null,m.createElement(i.Form.Item,{label:t("VXLAN_MODE"),rules:[{required:!0,message:t("VXLAN_MODE_REQUIRED")}],desc:t("VXLAN_MODE_DESC")},m.createElement(i.Select,{name:"vxlanMode",options:y,onChange:function(e){g(E(E({},h),{},{vxlanMode:e,ipipMode:"Never"===e?h.ipipMode:"Never"}))}})))))))};a.default=g},function(e,t,a){e.exports={wrapper:"wA2KCcHnG5yzk7iMmYDMS"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var o=n(r(315)),u=n(r(61)),c=n(r(43));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=r(186),g=n(r(787)),b=n(r(135)),S=n(r(26)),_=n(r(241)),O=n(r(74)),C=r(14),T=r(239),R=n(r(1)),D=l(r(0)),N=n(r(445)),k=r(52);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var P="",A=(0,T.observer)((f=i=function(e){(0,v.default)(r,e);var a=I(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).fetchWorkspaces=function(){var e=(0,d.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.workspaceStore.fetchList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.workspaceValidator=function(e,a,r){if(!a)return r();var l=n.props.detail,o=(0,S.default)(l,"status.allocations",0)>0;if((0,S.default)(l,"status.tunnel")===(0,S.default)(l,"status.allocations"))return r();var u=l.workspace;return o&&u&&a!==u?r({message:t("IPPOOL_ASSIGN_WORKSPACE_CHANGE_WARNING"),field:e.field}):o&&a!==P?r({message:t("IPPOOL_ASSIGN_WORKSPACE_ALLOCATED_WARNING"),field:e.field}):void r()},n.handleSubmit=function(e){var t=n.props.onOk,a={},r=(0,S.default)(e,"metadata.labels['kubesphere.io/workspace']");r===P?((0,O.default)(a,"metadata.labels['kubesphere.io/workspace']",null),(0,O.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']","")):((0,O.default)(a,"metadata.labels['kubesphere.io/workspace']",r||null),(0,O.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']",null)),t(a)},n.formTemplate=(0,b.default)((0,C.toJS)(e.detail._originData)),n.workspaceStore=new N.default,n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.props.detail.isDefault&&(0,O.default)(this.formTemplate,"metadata.labels['kubesphere.io/workspace']",P),this.workspaceStore.fetchList({cluster:this.props.cluster})}},{key:"getWorkspaces",value:function(){return[{label:t("ALL"),value:P}].concat((0,u.default)(this.workspaceStore.list.data.map((function(e){return{label:(0,k.showNameAndAlias)(e.name,"workspace"),value:e.name}}))))}},{key:"render",value:function(){var e=this.props.detail,a=(0,S.default)(e,"status.allocations",0)>0,r=e.workspace;return D.default.createElement(g.default.Form,(0,o.default)({title:t("ASSIGN_WORKSPACE"),icon:"enterprise",width:691,data:this.formTemplate},this.props,{onOk:this.handleSubmit}),a&&r?D.default.createElement(y.Alert,{className:"margin-b12",type:"warning",message:t("IPPOOL_ASSIGN_WORKSPACE_ALLOCATED_WARNING")}):D.default.createElement(y.Alert,{className:"margin-b12",type:"info",message:t("IPPOOL_ASSIGN_WORKSPACE_DESC")}),D.default.createElement(y.Form.Item,{label:t("WORKSPACE"),desc:t("SELECT_WORKSPACE_DESC"),rules:[{validator:this.workspaceValidator}]},D.default.createElement(y.Select,{name:"metadata.labels['kubesphere.io/workspace']",options:this.getWorkspaces(),pagination:(0,_.default)(this.workspaceStore.list,["page","total","limit"]),isLoading:this.workspaceStore.list.isLoading,onFetch:this.fetchWorkspaces,searchable:!0,clearable:!0,placeholder:" "})))}}]),r}(D.Component),i.propTypes={detail:R.default.object,visible:R.default.bool,onOk:R.default.func,onCancel:R.default.func},i.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){}},s=f))||s;a.default=A},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var o=n(r(315)),u=n(r(61)),c=n(r(43));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=r(186),g=n(r(787)),b=n(r(135)),S=n(r(26)),_=n(r(241)),O=n(r(74)),C=r(14),T=r(239),R=n(r(1)),D=l(r(0)),N=n(r(439)),k=r(52);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var P="",A=(0,T.observer)((f=i=function(e){(0,v.default)(r,e);var a=I(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).fetchProjects=function(){var e=(0,d.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.projectStore.fetchList(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.projectValidator=function(e,a,r){if(!a)return r();var l=n.props.detail,o=(0,S.default)(l,"status.allocations",0)>0;if((0,S.default)(l,"status.tunnel")===(0,S.default)(l,"status.allocations"))return r();var u=l.namespace;return o&&u&&a!==u?r({message:t("IPPOOL_ASSIGN_PROJECT_CHANGE_WARNING"),field:e.field}):o&&a!==P?r({message:t("IPPOOL_ASSIGN_PROJECT_ALLOCATED_WARNING"),field:e.field}):void r()},n.handleSubmit=function(e){var t=n.props.onOk,a={},r=(0,S.default)(e,"metadata.labels['kubesphere.io/namespace']");r===P?((0,O.default)(a,"metadata.labels['kubesphere.io/namespace']",null),(0,O.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']","")):((0,O.default)(a,"metadata.labels['kubesphere.io/namespace']",r||null),(0,O.default)(a,"metadata.labels['ippool.network.kubesphere.io/default']",null)),t(a)},n.formTemplate=(0,b.default)((0,C.toJS)(e.detail._originData)),n.projectStore=new N.default,n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.props.detail.isDefault&&(0,O.default)(this.formTemplate,"metadata.labels['kubesphere.io/namespace']",P),this.projectStore.fetchList({cluster:this.props.cluster})}},{key:"getProjects",value:function(){return[{label:t("ALL"),value:P}].concat((0,u.default)(this.projectStore.list.data.map((function(e){return{label:(0,k.showNameAndAlias)(e,"name"),value:e.name}}))))}},{key:"render",value:function(){var e=this.props.detail,a=(0,S.default)(e,"status.allocations",0)>0,r=e.namespace;return D.default.createElement(g.default.Form,(0,o.default)({title:t("ASSIGN_PROJECT"),icon:"enterprise",width:691,data:this.formTemplate},this.props,{onOk:this.handleSubmit}),a&&r?D.default.createElement(y.Alert,{className:"margin-b12",type:"warning",message:t("IPPOOL_ASSIGN_PROJECT_ALLOCATED_WARNING")}):D.default.createElement(y.Alert,{className:"margin-b12",type:"info",message:t("IPPOOL_ASSIGN_PROJECT_DESC")}),D.default.createElement(y.Form.Item,{label:t("PROJECT"),desc:t("SELECT_PROJECT_DESC"),rules:[{validator:this.projectValidator}]},D.default.createElement(y.Select,{name:"metadata.labels['kubesphere.io/namespace']",options:this.getProjects(),pagination:(0,_.default)(this.projectStore.list,["page","total","limit"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchProjects,searchable:!0,clearable:!0,placeholder:" "})))}}]),r}(D.Component),i.propTypes={detail:R.default.object,visible:R.default.bool,onOk:R.default.func,onCancel:R.default.func},i.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){}},s=f))||s;a.default=A},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o,u,c,s=n(r(315)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=r(186),h=n(r(787)),E=n(r(135)),y=n(r(26)),g=n(r(74)),b=r(14),S=r(239),_=n(r(1)),O=l(r(0));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var T=(0,S.observer)((c=u=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).handleSubmit=function(e){var a=t.props.onOk,r=t.formTemplate,n=e.nodeSelector;(0,g.default)(r,"spec.nodeSelector",n),a(r)},t.formTemplate=(0,E.default)((0,b.toJS)(e.detail._originData)),t.state={nodeSelector:(0,y.default)(e.detail,"nodeSelector","all()")},t}return(0,f.default)(r,[{key:"getOptions",value:function(){return[{label:t("YES"),value:"all()"},{label:t("NO"),value:"!all()"}]}},{key:"render",value:function(){return O.default.createElement(h.default.Form,(0,s.default)({title:t("IPPOOL_AUTO_ASSIGN"),width:691,data:this.state},this.props,{onOk:this.handleSubmit}),O.default.createElement(v.Form.Item,{label:t("IPPOOL_IS_AUTO_ASSIGN")},O.default.createElement(v.Select,{name:"nodeSelector",options:this.getOptions(),clearable:!0,placeholder:" "})))}}]),r}(O.Component),u.propTypes={detail:_.default.object,visible:_.default.bool,onOk:_.default.func,onCancel:_.default.func},u.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){}},o=c))||o;a.default=T},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c,s,i,f,d=n(r(315)),p=n(r(30)),m=n(r(65)),v=n(r(36)),h=n(r(37)),E=n(r(88)),y=n(r(55)),g=n(r(56)),b=n(r(51)),S=n(r(49)),_=(n(r(66)),r(186)),O=n(r(3)),C=n(r(787)),T=n(r(789)),R=n(r(74)),D=r(14),N=r(239),k=n(r(0)),I=n(r(443)),P=r(52),A=r(1193),w=n(r(1703));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,b.default)(e);if(t){var n=(0,b.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,g.default)(this,a)}}var x=(0,N.inject)("projectStore")(l=(0,N.observer)((o=function(e){(0,y.default)(r,e);var a=j(r);function r(e){var n;return(0,v.default)(this,r),n=a.call(this,e),(0,m.default)(n,"tabName",u,(0,E.default)(n)),(0,m.default)(n,"specType",c,(0,E.default)(n)),(0,m.default)(n,"specNameSpaces",s,(0,E.default)(n)),(0,m.default)(n,"specCurNameSpace",i,(0,E.default)(n)),(0,m.default)(n,"specServices",f,(0,E.default)(n)),n.handleTabChange=function(e){n.tabName=e,n.specNameSpaces=[],n.specCurNameSpace=n.props.namespace,n.specServices=[]},n.handleNameSpaceChange=function(e){var t=n.props.cluster;n.specCurNameSpace=e,n.serviceStore.fetchList({namespace:e,cluster:t,limit:-1})},n.handleNameSpaceChecked=function(e,t){var a=(0,E.default)(n),r=a.specNameSpaces,l=a.tabName,o=r.filter((function(t){return t.name===e.name})).length>0;t&&!o?(r.push({name:e.name}),n.specNameSpaces=(0,D.toJS)(r)):!t&&o&&(n.specNameSpaces=r.filter((function(t){return t.name!==e.name}))),n.psRef.current.handleValueChange("type",null,l)},n.handleServiceChange=function(e,t){var a=(0,E.default)(n),r=a.specCurNameSpace,l=a.specServices,o=a.tabName,u=l.filter((function(t){return t.name===e.name&&t.namespace===r})).length>0;t&&!u?(l.push({name:e.name,namespace:r}),n.specServices=(0,D.toJS)(l)):!t&&u&&(n.specServices=l.filter((function(t){return!(t.name===e.name&&t.namespace===r)}))),n.psRef.current.handleValueChange("type",null,o)},n.handleSave=function(){var e=(0,E.default)(n),t=e.tabName,a=e.specType,r=e.specNameSpaces,l=e.specServices,o=n.props.formTemplate,u="projects"===t?r.map((function(e){return{namespace:e}})):l.map((function(e){return{service:e}}));if(u.length){var c="egress"===a?"to":"from";(0,R.default)(o,"spec.".concat(a,"[0].").concat(c),u),(0,R.default)(o,"metadata.name","policy-".concat(c,"-").concat((0,P.generateId)()))}(0,R.default)(o,'metadata.labels.["kubesphere.io/policy-traffic"]',"inside"),(0,R.default)(o,'metadata.labels.["kubesphere.io/policy-type"]',a),n.props.onOk(o)},n.psValidator=function(e,a,r){var l=(0,E.default)(n),o=l.tabName,u=l.specNameSpaces,c=l.specServices;0===("projects"===o?u.map((function(e){return{namespace:e}})):c.map((function(e){return{service:e}}))).length?r({message:t("EMPTY_RESOURCE_DESC")}):r()},n.projectStore=e.projectStore,n.serviceStore=new I.default,n.specCurNameSpace=e.namespace,n.psRef=k.default.createRef(),n}return(0,h.default)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.namespace,a={cluster:e.cluster,limit:-1};this.projectStore.fetchList(L(L({},a),{},{labelSelector:this.ProjectLabelSelector})),this.serviceStore.fetchList(L({namespace:t},a))}},{key:"render",value:function(){var e=this,a=this.projectStore.list,r=this.serviceStore.list,n=Object.assign({},this.props),l=this.specNameSpaces,o=this.specType,u=this.tabName,c=this.specCurNameSpace,s=this.specServices;return k.default.createElement(C.default.Form,(0,d.default)({width:600,title:t("ADD_ALLOWLIST_ENTRY"),closable:!0},n,{onOk:this.handleSave}),k.default.createElement(_.Form.Item,{label:t("TRAFFIC_DIRECTION"),desc:t("INTERNAL_TRAFFIC_DIRECTION_DESC"),rules:[{required:!0,message:t("SELECT_RULE_DIRECTION_TIP")}]},k.default.createElement(_.RadioGroup,{name:"direction",defaultValue:o,wrapClassName:w.default.dirCheck,onChange:function(t){e.specType=t}},k.default.createElement(_.RadioButton,{value:"egress"},k.default.createElement(_.Icon,{name:"upload",size:32}),k.default.createElement("div",null,t("EGRESS"))),k.default.createElement(_.RadioButton,{value:"ingress"},k.default.createElement(_.Icon,{name:"download",size:32}),k.default.createElement("div",null,t("INGRESS"))))),k.default.createElement(_.Form.Item,{label:t("TYPE"),rules:[{validator:this.psValidator}],ref:this.psRef},k.default.createElement(_.RadioGroup,{name:"type",mode:"button",buttonWidth:155,defaultValue:u,onChange:this.handleTabChange,size:"small",rules:[{required:!0}]},k.default.createElement(_.RadioButton,{value:"projects"},t("PROJECT")),k.default.createElement(_.RadioButton,{value:"services"},t("SERVICE")))),k.default.createElement(T.default,{className:(0,O.default)("projects"===u?"block":"hide",w.default.panel_p)},k.default.createElement("ul",{className:w.default.list},a.data.map((function(a){return k.default.createElement("li",{key:a.name},k.default.createElement(_.Checkbox,{value:a.name,checked:l.filter((function(e){return e.name===a.name})).length>0,disabled:a.isFedManaged,onChange:function(t){e.handleNameSpaceChecked(a,t)}},(0,P.showNameAndAlias)(a)),a.isFedManaged&&k.default.createElement(_.Tooltip,{content:t("FED_HOST_NAMESPACE_TIP")},k.default.createElement(_.Icon,{className:w.default.tip,name:"question"})))})))),k.default.createElement(T.default,{className:(0,O.default)("services"===u?"block":"hide",w.default.panel_s)},k.default.createElement("div",{className:w.default.sheader},k.default.createElement(A.ProjectSelect,{cluster:this.props.cluster,defaultValue:c,onChange:this.handleNameSpaceChange,tipMessage:t("FED_HOST_NAMESPACE_TIP"),labelSelector:this.ProjectLabelSelector})),k.default.createElement("div",{className:w.default.sbody},k.default.createElement("ul",{className:w.default.list},r.data.map((function(t){return k.default.createElement("li",{key:t.name},k.default.createElement(_.Checkbox,{value:t.name,checked:s.filter((function(e){return e.name===t.name&&e.namespace===c})).length>0,onChange:function(a){e.handleServiceChange(t,a)}},t.name))}))))))}},{key:"ProjectLabelSelector",get:function(){var e=this.props.workspace;return"!kubesphere.io/devopsproject,kubesphere.io/workspace=".concat(e)}}]),r}(k.default.Component),u=(0,S.default)(o.prototype,"tabName",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"projects"}}),c=(0,S.default)(o.prototype,"specType",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=(0,S.default)(o.prototype,"specNameSpaces",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,S.default)(o.prototype,"specCurNameSpace",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,S.default)(o.prototype,"specServices",[D.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=o))||l)||l;a.default=x},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(158)),p=n(r(787)),m=n(r(884));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.onCancel,n=t.editor.current.getData();(0,d.default)(n)?r():a(n)},t.state={value:{kind:"NetworkPolicy",apiVersion:"networking.k8s.io/v1",metadata:{name:"",namespace:""},spec:{podSelector:{}}}},t.editor=i.default.createRef(),t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting;return i.default.createElement(p.default,{icon:"firewall",title:t("CREATE_NETWORK_POLICY_TCAP"),description:t("CREATE_NETWORK_POLICY_DESC"),onOk:this.handleOk,onCancel:r,okText:t("OK"),visible:a,isSubmitting:n,width:960},i.default.createElement(m.default,{ref:this.editor,value:this.state.value}))}}]),r}(i.default.Component);a.default=h,h.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool,readOnly:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,readOnly:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(48),r(192),r(27),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(48),r(192),r(42),r(27),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(193),r(17),r(7);var l,o=n(r(315)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(239),v=n(r(74)),h=n(r(63)),E=n(r(135)),y=r(186),g=n(r(1170)),b=n(r(443)),S=r(72),_=n(r(1703));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var R=(0,m.inject)("projectStore")(l=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=T(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).modifyCIDR=function(e,a){var r=t.state.cidrRules,n=r[e];r[e]=C(C({},n),a),t.setState(r)},t.addCIDRRule=function(){var e=t.state.cidrRules;e.push({ip:{value:""},mask:{value:""}}),t.setState(e)},t.copyCIDRRule=function(e){var a=t.state.cidrRules;a.splice(e,0,(0,E.default)(a[e])),t.setState(a,(function(){t.validCIDR()}))},t.delCIDRRule=function(e){var a=t.state.cidrRules;a.length>1&&(a.splice(e,1),t.setState(a))},t.addPortRule=function(){var e=t.state.portRules;e.push({port:{value:""},protocol:"TCP"}),t.setState(e)},t.addPortRangeRule=function(){var e=t.state.portRules;e.push({port:{value:""},endPort:{value:""},protocol:"TCP"}),t.setState(e)},t.copyPortRule=function(e){var a=t.state.portRules;a.splice(e,0,(0,E.default)(a[e])),t.setState(a,(function(){t.validPort()}))},t.delPortRule=function(e){var a=t.state.portRules;a.length>1&&(a.splice(e,1),t.setState(a))},t.modifyRule=function(e,a){var r=t.state.portRules,n=r[e];r[e]=C(C({},n),a),t.setState(r,(function(){t.validPort()}))},t.isRepeatCIDR=function(e,t,a){var r=!1;return t.forEach((function(t,n){""!==t.ip.value&&""!==t.mask.value&&a>n&&t.ip.value+t.mask.value===e.ip.value+e.mask.value&&(r=!0)})),r},t.validCIDR=function(){var e=t.state.cidrRules.slice(),a=!0;return e.forEach((function(r,n){var l=t.isRepeatCIDR(r,e,n);r.ip.valid=!(0,h.default)(r.ip.value)&&S.PATTERN_IP.test(r.ip.value)&&!l,r.mask.valid=!(0,h.default)(r.mask.value)&&S.PATTERN_IP_MASK.test(r.mask.value)&&!l&&Number(r.mask.value)>-1&&Number(r.mask.value)<33,r.ip.valid&&r.mask.valid||(a=!1)})),t.setState({cidrRules:e}),a},t.isValidPort=function(e){return""!==e&&/^(?![0])(\d{0,5})$/.test(e)&&e<65536},t.isRepeatPort=function(e,t,a){var r=!1;return t.forEach((function(t,n){var l,o,u;""!==t.port.value&&""!==(null==t||null===(l=t.endPort)||void 0===l?void 0:l.value)&&a>n&&e.protocol+e.port.value+(null==e||null===(o=e.endPort)||void 0===o?void 0:o.value)===t.protocol+t.port.value+(null==t||null===(u=t.endPort)||void 0===u?void 0:u.value)&&(r=!0)})),r},t.validPort=function(){var e=t.state.portRules.slice(),a=!0;return e.forEach((function(r,n){var l=t.isRepeatPort(r,e,n),o=!0;(null==r?void 0:r.endPort)&&Number(r.endPort.value)-Number(r.port.value)<0&&(o=!1),r.port.valid=(0,h.default)(r.port.value)||t.isValidPort(r.port.value)&&!l&&o,(null==r?void 0:r.endPort)&&(r.endPort.valid=(0,h.default)(r.endPort.value)||t.isValidPort(r.endPort.value)&&!l&&o,r.port.valid||r.endPort.valid||(a=!1))})),t.setState({portRules:e}),a},t.validSpecType=function(){var e=t.state.specType;return""===e&&t.setState({specType:!1}),""!==e},t.validFormData=function(){return t.validSpecType()&&t.validCIDR()&&t.validPort()},t.handleSave=function(){var e=t.state,a=e.specType,r=e.cidrRules,n=e.portRules;if(t.validFormData()){var l=t.props.formTemplate,o=n.filter((function(e){return!(0,h.default)(e.port.value)})).map((function(e){var t,a;return{port:+e.port.value,endPort:(null===(t=e.endPort)||void 0===t?void 0:t.value)?+(null===(a=e.endPort)||void 0===a?void 0:a.value):void 0,protocol:e.protocol}})),u=r.filter((function(e){return!(0,h.default)(e.ip.value)&&!(0,h.default)(e.mask.value)})).map((function(e){return{ipBlock:{cidr:"".concat(e.ip.value,"/").concat(e.mask.value)}}})),c="egress"===a?"to":"from";(0,v.default)(l,"spec.".concat(a,"[0].ports"),o),(0,v.default)(l,"spec.".concat(a,"[0].").concat(c),u),(0,v.default)(l,'metadata.labels.["kubesphere.io/policy-traffic"]',"outside"),(0,v.default)(l,'metadata.labels.["kubesphere.io/policy-type"]',a),t.props.onOk(l)}},t.projectStore=e.projectStore,t.serviceStore=new b.default,t.state={specType:e.edit?e.formTemplate.specType:"",specNameSpaces:[],specServices:[],specCurNameSpace:e.namespace,protocols:[{value:"TCP",label:"TCP"},{value:"UDP",label:"UDP"},{value:"SCTP",label:"SCTP"}],cidrRules:e.edit&&e.formTemplate.cidrRules.length>0?e.formTemplate.cidrRules:[{ip:{value:""},mask:{value:""}}],portRules:e.edit&&e.formTemplate.portRules.length>0?e.formTemplate.portRules:[{port:{value:""},protocol:"TCP"}]},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.maxNameLength,n=void 0===r?63:r,l=a.formTemplate,u=a.formRef,c=a.edit,s=Object.assign({},this.props),i=this.state,f=i.specType,d=i.protocols,m=i.portRules,v=i.cidrRules,E=!1,b=!1,O=253===n?t("LONG_NAME_DESC"):t("NAME_DESC");return p.default.createElement(g.default.Form,(0,o.default)({width:900,title:c?t("EDIT_ALLOWLIST_ENTRY"):t("ADD_ALLOWLIST_ENTRY"),closable:!0},s,{onOk:this.handleSave,data:l,ref:u}),p.default.createElement(y.Columns,null,p.default.createElement(y.Column,null,p.default.createElement(y.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:S.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:O})}]},p.default.createElement(y.Input,{name:"metadata.name",maxLength:n,disabled:c})))),p.default.createElement(y.Columns,null,p.default.createElement(y.Column,null,p.default.createElement(y.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:S.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},p.default.createElement(y.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),p.default.createElement(y.Columns,null,p.default.createElement(y.Column,null,p.default.createElement(y.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(y.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),p.default.createElement(y.Form.Item,{label:t("TRAFFIC_DIRECTION"),desc:f?t("EXTERNAL_TRAFFIC_DIRECTION_DESC"):p.default.createElement("span",{className:_.default.errColor},t("SELECT_RULE_DIRECTION_TIP"))},p.default.createElement(y.RadioGroup,{size:"large",name:"direction",defaultValue:f,wrapClassName:_.default.dirCheck,onChange:function(t){return e.setState({specType:t})}},p.default.createElement(y.RadioButton,{value:"egress"},p.default.createElement(y.Icon,{name:"upload",size:32}),p.default.createElement("div",null,t("EGRESS"))),p.default.createElement(y.RadioButton,{value:"ingress"},p.default.createElement(y.Icon,{name:"download",size:32}),p.default.createElement("div",null,t("INGRESS"))))),p.default.createElement("div",{className:_.default.title},t("NETWORK_SEGMENT")),v.map((function(a,r){var n=a.ip,l=a.mask;return!1!==n.valid&&!1!==l.valid||(b=!0),1===v.length&&((0,h.default)(n.value)||(0,h.default)(l.value))&&(b=!0),p.default.createElement("div",{className:_.default.cidrrow,key:"".concat(r," ")},p.default.createElement("div",{className:_.default.cidr},p.default.createElement(y.Input,{name:"cidr-ip",className:!1===n.valid?_.default.error:"",value:n.value,placeholder:t("NETWORK_SEGMENT_EXAMPLE"),onChange:function(t,a){return e.modifyCIDR(r,{ip:{value:a}})},onBlur:e.validCIDR}),p.default.createElement("span",null,"/"),p.default.createElement(y.Input,{name:"cidr-mask",className:!1===l.valid?_.default.error:"",placeholder:"24",value:l.value,onChange:function(t,a){return e.modifyCIDR(r,{mask:{value:a}})},onBlur:e.validCIDR})),p.default.createElement("div",null,p.default.createElement(y.Tooltip,{content:t("ADD_REPLICA")},p.default.createElement(y.Icon,{changeable:!0,clickable:!0,name:"copy",className:_.default.copy,onClick:function(){e.copyCIDRRule(r)}})),p.default.createElement(y.Tooltip,{content:t("DROP")},p.default.createElement(y.Icon,{changeable:!0,clickable:!0,name:"trash",onClick:function(){e.delCIDRRule(r)}}))))})),p.default.createElement("div",{className:_.default.addBtn},p.default.createElement(y.Button,{onClick:this.addCIDRRule},t("ADD_NEW_NETWORK_SEGMENT"))),b&&p.default.createElement("div",{className:_.default.errColor},t("ENTER_VALID_SEGMENT_DESC")),E&&p.default.createElement("div",{className:_.default.errColor},t("ENTER_VALID_PORT_NUMBER_DESC")),p.default.createElement("div",{className:_.default.title},t("PORT_PL")),m.map((function(a,r){var n=a.port,l=a.protocol,o=a.endPort,u=void 0===o?"":o;return!1===n.valid&&(E=!0),p.default.createElement("div",{className:_.default.rulerow,key:"".concat(r," ")},p.default.createElement("div",null,p.default.createElement(y.Select,{name:"proto",value:l,options:d,onChange:function(t){return e.modifyRule(r,{protocol:t})}}),u?p.default.createElement("div",null,p.default.createElement(y.Input,{placeholder:t("PORT_EXAMPLE"),className:!1===n.valid?_.default.error:"",value:n.value,onBlur:e.validPort,onChange:function(t,a){return e.modifyRule(r,{port:{value:a}})}}),p.default.createElement("span",null," - "),p.default.createElement(y.Input,{placeholder:t("PORT_EXAMPLE"),className:!1===u.valid?_.default.error:"",value:u.value,onBlur:e.validPort,onChange:function(t,a){return e.modifyRule(r,{endPort:{value:a}})}})):p.default.createElement(y.Input,{placeholder:t("PORT_EXAMPLE"),className:!1===n.valid?_.default.error:"",value:n.value,onBlur:e.validPort,onChange:function(t,a){return e.modifyRule(r,{port:{value:a}})}})),p.default.createElement("div",null,p.default.createElement(y.Tooltip,{content:t("REPLICA")},p.default.createElement(y.Icon,{changeable:!0,clickable:!0,name:"copy",className:_.default.copy,onClick:function(){e.copyPortRule(r)}})),p.default.createElement(y.Tooltip,{content:t("DROP")},p.default.createElement(y.Icon,{changeable:!0,clickable:!0,name:"trash",onClick:function(){e.delPortRule(r)}}))))})),p.default.createElement("div",{className:_.default.addBtn},p.default.createElement(y.Button,{onClick:this.addPortRangeRule},t("ADD_NEW_PORT_RANGE")),p.default.createElement(y.Button,{onClick:this.addPortRule},t("ADD_NEW_PORT"))),E&&p.default.createElement("div",{className:_.default.errColor},t("ENTER_VALID_PORT_NUMBER_DESC")))}}]),r}(p.default.Component))||l)||l;a.default=R},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(84),r(18),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var l,o=n(r(315)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(239),v=n(r(3)),h=r(52),E=n(r(105)),y=r(791),g=n(r(63)),b=n(r(26)),S=r(186),_=n(r(1704)),O=n(r(1170)),C=n(r(3049));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,m.inject)("rootStore")(l=(0,m.inject)("projectStore")(l=(0,y.trigger)(l=(0,m.observer)(l=function(e){(0,i.default)(r,e);var a=D(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).editIpBlock=function(){var e=n.detailInfo.name;n.trigger("network.policies.editIpBlock",R(R({},n.props),{},{formTemplate:n.formTemplate,edit:!0,name:e,success:n.props.fetchOutside}))},n.handleDelete=function(){var e=n.detailInfo.name;n.trigger("network.policies.delete",R(R({},n.props),{},{ruleName:e,resource:n.detailInfo.name,type:"ALLOWLIST_ENTRY",success:function(){n.props.fetchOutside(),n.props.onCancel()}}))},n.getAttrs=function(){return[{name:t("CLUSTER"),value:n.clusters},{name:t("PROJECT"),value:n.detailInfo.namespace},{name:t("CREATION_TIME_TCAP"),value:(0,h.getLocalTime)(n.detailInfo.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:n.detailInfo.creator}]},n.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",show:n.enableActions.includes("edit"),onClick:function(){return n.editIpBlock()}},{key:"delete",icon:"trash",text:t("DELETE"),action:"edit",show:n.enableActions.includes("delete"),onClick:function(){return n.handleDelete()}}]},n.renderIpRules=function(e,t){return 0===(0,b.default)(e,"spec.".concat(t,"[0].").concat("egress"===t?"to":"from"),[]).length?p.default.createElement("div",{key:(0,b.default)(e,"metadata.name"),className:C.default.row},p.default.createElement("div",{className:C.default.prow},p.default.createElement("span",{className:C.default.cell},p.default.createElement(S.Icon,{name:"eip"})),(0,b.default)(e,"spec.".concat(t,"[0].ports"),[]).map((function(e,t){var a=e.endPort?"".concat(e.port,"-").concat(e.endPort,"/").concat(e.protocol):"".concat(e.port,"/").concat(e.protocol);return p.default.createElement("label",{key:a},0===t&&p.default.createElement(S.Icon,{name:"port"}),p.default.createElement("span",{className:C.default.port},p.default.createElement("b",null,a)))})))):p.default.createElement(p.default.Fragment,null,(0,b.default)(e,"spec.".concat(t,"[0].").concat("egress"===t?"to":"from"),[]).map((function(a,r){var n;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{key:(0,b.default)(e,"metadata.name")+r,className:C.default.row},p.default.createElement("div",{className:C.default.prow},p.default.createElement("span",{className:C.default.cell},p.default.createElement(S.Icon,{name:"eip"}),p.default.createElement("b",{key:r},null==a||null===(n=a.ipBlock)||void 0===n?void 0:n.cidr)),(0,b.default)(e,"spec.".concat(t,"[0].ports"),[]).map((function(e,t){var a=e.endPort?"".concat(e.port,"-").concat(e.endPort,"/").concat(e.protocol):"".concat(e.port,"/").concat(e.protocol);return p.default.createElement("label",{key:a},0===t&&p.default.createElement(S.Icon,{name:"port"}),p.default.createElement("span",{className:C.default.port},p.default.createElement("b",null,a)))})))))})))},n.formTemplate=e.formTemplate,n.clusters=(0,b.default)(e.projectStore,"detail.cluster",[]),n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formTemplate,r=e.formRef,n=Object.assign({},this.props),l=[],u=[],c=a;return(0,g.default)((0,b.default)(c,"spec.egress[0].ports"))?(0,g.default)((0,b.default)(c,"spec.egress[0].to"))||((0,g.default)((0,b.default)(c,"spec.egress[0].to[0].ipBlock"))?[].push(c):l.push(c)):l.push(c),(0,g.default)((0,b.default)(c,"spec.ingress[0].ports"))?(0,g.default)((0,b.default)(c,"spec.ingress[0].from"))||((0,g.default)((0,b.default)(c,"spec.ingress[0].from[0].ipBlock"))?[].push(c):u.push(c)):u.push(c),p.default.createElement(O.default.Form,(0,o.default)({width:900,title:t("ALLOWLIST_ENTRY_DETAIL"),closable:!0},n,{onOk:!1,data:a,ref:r}),p.default.createElement("div",{className:C.default.rulebody},p.default.createElement("div",{className:C.default.rulemenu},p.default.createElement("div",null,p.default.createElement("div",{className:C.default.rulename},this.detailInfo.aliasName?"".concat(this.detailInfo.name,"(").concat(this.detailInfo.aliasName,")"):this.detailInfo.name),p.default.createElement("div",null,this.detailInfo.description)),p.default.createElement(_.default,{className:C.default.more,options:this.getOperations(a)})),p.default.createElement("div",{className:C.default.collapseWrapper},p.default.createElement(S.Collapse,null,p.default.createElement(S.Collapse.CollapseItem,{label:t("ATTRIBUTES"),key:"p1"},this.getAttrs().map((function(e){var t=e.name,a=e.value;return p.default.createElement("div",null,p.default.createElement("div",{className:C.default.name},p.default.createElement("span",null,t,": ")),p.default.createElement("div",{className:C.default.value},a))}))))),p.default.createElement("div",{className:(0,v.default)(C.default.rulegroup,{hide:0===l.length})},p.default.createElement("div",{className:C.default.ruletitle},p.default.createElement(S.Icon,{name:"upload",size:32}),p.default.createElement("div",null,p.default.createElement("div",{className:C.default.subtitle},t("EGRESS")),p.default.createElement("div",{className:C.default.disp},t("EXTERNAL_EGRESS_DESC")))),this.renderIpRules(l[0],"egress")),p.default.createElement("div",{className:(0,v.default)(C.default.rulegroup,{hide:0===u.length})},p.default.createElement("div",{className:C.default.ruletitle},p.default.createElement(S.Icon,{name:"download",size:32}),p.default.createElement("div",null,p.default.createElement("div",{className:C.default.subtitle},t("INGRESS")),p.default.createElement("div",{className:C.default.disp},t("EXTERNAL_INGRESS_DESC")))),this.renderIpRules(u[0],"ingress"))))}},{key:"detailInfo",get:function(){return E.default.default(this.formTemplate)}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"enableActions",get:function(){return globals.app.getActions(R(R({module:"networkpolicies"},this.props.match.params),{},{project:this.namespace}))}}]),r}(p.default.Component))||l)||l)||l)||l;a.default=N},function(e,t,a){e.exports={rulemenu:"judtUMFa6uhc62Leqi0FF",rulename:"_3-aMREaT4Mv4YlYuonPcol",rulebody:"_2NK9zYAlsFLFnoaK3j5yHO",ruletitle:"_1CUprNz4zBb319IAfFzgde",rulegroup:"MLTSn1q_zq4IVpaCX8dKL",subtitle:"_3gPIujsGyjY1YqPjXX7kdO",disp:"_2-gSRm32lNKszgiFNOz695",row:"_2PxYjU94glauluQgdgJeff",prow:"_1bgOuUOZKQ7ifKmtpNF2L8",cell:"_1XSU-3U1JjBZ8SQDA36rpM",pcell:"_348B25AXH0Ez-4S2EF_mbc",port:"eT4sNzbO-woqzs77FtrHT",collapseWrapper:"_18k10KEQsISh9Xg2fc33nQ"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var o=l(r(315)),u=l(r(30)),c=l(r(43));r(41);var s=l(r(44)),i=l(r(96)),f=l(r(58)),d=n(r(0)),p=l(r(241)),m=r(186),v=l(r(787)),h=l(r(816)),E=l(r(852)),y=l(r(1176)),g=r(52),b=l(r(3051));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=new E.default,C=new y.default,T={label:t("SELECT_POD_IP_POOL"),description:t("SELECT_POD_IP_POOL_TO_NODEGROUP_DESC"),icon:"eip-group",value:""},R=function(e){var a=e.detail,r=e.onOk,n=(0,f.default)(e,["detail","onOk"]),l=e.cluster,u=e.group,E=(0,d.useState)((0,p.default)(a||{},["namespace","ippool"])),y=(0,i.default)(E,2),S=y[0],R=y[1],D=(0,d.useState)([]),N=(0,i.default)(D,2),k=N[0],I=N[1],P=(0,d.useState)(!1),A=(0,i.default)(P,2),w=A[0],M=A[1],L=(0,d.useState)({page:1,limit:10,total:0}),j=(0,i.default)(L,2),x=j[0],U=j[1],F=(0,d.useState)([T]),V=(0,i.default)(F,2),G=V[0],B=V[1],Y=(0,d.useRef)();function z(e){return H.apply(this,arguments)}function H(){return(H=(0,s.default)(c.default.mark((function e(t){var a,r,n,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,O.fetchChildResource(_({kind:"namespaces",cluster:l,group:u},t));case 3:a=e.sent,r=a.data,n=a.total,r&&(o=r.map((function(e){return{label:(0,g.showNameAndAlias)(e,"name"),value:e.name}})),I(o),U(_(_({},x),{},{total:n}))),M(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,d.useEffect)((function(){z()}),[a]);var W=function(){var e=(0,s.default)(c.default.mark((function e(t){var a,r;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R({namespace:t,ippool:""}),e.next=3,C.fetchList({cluster:l,hasStatus:!1,limit:-1,page:1,labelSelector:"kubesphere.io/namespace=".concat(t,",node-role.kubernetes.io/edge")});case 3:(null==(a=e.sent)?void 0:a.length)?((r=a.map((function(e){return{label:e.aliasName||e.name,description:e.cidr,icon:"eip-group",value:e.name}}))).push(T),B(r)):B([T]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.default.createElement(v.default,(0,o.default)({icon:"pen",width:960,title:t("绑定容器组 IP池"),bodyClassName:b.default["modal-body"]},n,{onOk:function(){Y.current&&Y.current.validate((function(){r(S)}))}}),d.default.createElement("div",null,d.default.createElement(m.Form,{ref:Y,data:S},d.default.createElement(m.Columns,null,d.default.createElement(m.Column,null,d.default.createElement(m.Form.Item,{label:t("EDGE_PROJECT"),rules:[{required:!0,message:t("IPIP_MODE_REQUIRED")}]},d.default.createElement(m.Select,{name:"namespace",options:k,searchable:!0,clearable:!0,pagination:x,isLoading:w,onFetch:z,onChange:W})))),d.default.createElement(m.Columns,null,d.default.createElement(m.Column,null,d.default.createElement(m.Form.Item,{label:t("POD_IP_POOL_PL"),rules:[{required:!0,message:t("POD_IP_POOL_PL_REQUIRED")}],desc:t("POD_IP_POOL_PL_DESC")},d.default.createElement(h.default,{name:"ippool",onChange:function(e){R(_(_({},S),{},{ippool:e}))},defaultValue:"",options:G,renderOption:function(e){return d.default.createElement("div",{className:b.default["ippool-option"]},d.default.createElement("div",{className:b.default["ippool-option-item"]},d.default.createElement("div",{className:b.default["ippool-option-item-title"]},e.label),d.default.createElement("div",{className:b.default["ippool-option-item-des"]},e.value)),e.value&&d.default.createElement("div",{className:b.default["ippool-option-item"]},d.default.createElement("div",{className:b.default["ippool-option-item-title"]},e.description),d.default.createElement("div",{className:b.default["ippool-option-item-des"]},t("NETWORK_SEGMENT"))))},searchable:!0})))))))};a.default=R},function(e,t,a){e.exports={"modal-body":"_36WQ2XoK1I6FnNXW_eNT9h","ippool-option":"MJA5zRuLD9bf29o-spM2j","ippool-option-item":"_3pCotaQQqevvLzwp9y7PhM","ippool-option-item-title":"_3nr7RX9GzHj1dN3FugoH4G","ippool-option-item-des":"_1I-au4LKJHAI1_1utjGOTD"}},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(3053)),o=n(r(3054)),u=[{title:t("IP_POOL_RANGE"),icon:"earth",component:l.default,required:!0},{title:t("POD_IP_POOL"),icon:"eip-group",component:o.default,required:!0}];a.default=u},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.formRef,r=e.formTemplate;return c.createElement(o.Form,{ref:a,data:r},c.createElement(o.Columns,null,c.createElement(o.Column,null,c.createElement(o.Form.Item,{label:t("IP_ADDRESS"),rules:[{required:!0,message:t("IP_ADDRESS_EMPTY_DESC")},{pattern:s.PATTERN_IP,message:t("INVALID_IP_DESC")}]},c.createElement(o.Input,{name:"ip"}))),c.createElement(o.Column,null,c.createElement(o.Form.Item,{label:t("MASK"),rules:[{required:!0,message:t("MASK_TIP")}]},c.createElement(u.default,{name:"mask",defaultValue:24,integer:!0,min:0,max:32})))),c.createElement(o.Form.Item,{label:t("QUANTITY"),desc:t("IP_POOL_CREATE_COUNT_DESC"),rules:[{required:!0,message:t("IP_POOL_NUM_TIP")}]},c.createElement(u.default,{name:"count",defaultValue:1,integer:!0,min:1,max:10})))};var o=r(186),u=l(r(799)),c=n(r(0)),s=r(72)},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(187),r(197),r(6),r(29),r(73),r(18),r(192),r(27),r(4),r(24),r(17),r(64),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(187),r(197),r(6),r(29),r(73),r(18),r(28),r(192),r(42),r(27),r(4),r(24),r(193),r(17),r(64),r(7),r(32);var l=n(r(61)),o=n(r(96)),u=n(r(0)),c=r(186),s=n(r(3)),i=n(r(795)),f=n(r(790)),d=n(r(240)),p=n(r(828)),m=n(r(1702)),v=n(r(135)),h=n(r(74)),E=r(477),y=r(52),g=r(72),b=r(434),S=n(r(1322));var _=function(e){var a=e.formRef,r=e.formTemplate,n=e.store,_=e.setButtonProps,O=e.isOutdated,C=e.cluster,T=e.namespace,R=e.hideWorkspace,D=void 0!==R&&R,N=(0,y.isEdgeWizePage)(),k=u.default.useState(),I=(0,o.default)(k,2),P=I[0],A=I[1],w=u.default.useState((function(){var e=r.ip,t=r.mask,a=r.count,n=void 0===a?1:a,l=[];if(g.PATTERN_IP.test(e)&&t&&n>0)for(var o=(0,y.generateId)(4),u=0,c=new E.Netmask("".concat(e,"/").concat(t)),s=function(){var e=c.toString();l.every((function(t){return t.cidr!==e}))&&l.push({key:"ippool-".concat(o,"-").concat(u),cidr:e,name:"ippool-".concat(o,"-").concat(u),workspace:void 0,blockSize:Number(t)>26?t:26,disabled:!1,ipipMode:"Always",vxlanMode:"Never",natOutgoing:!0,nodeSelector:"all()"}),u+=1,c=c.next()};u<n;)s();return l})),M=(0,o.default)(w,2),L=M[0],j=M[1];u.default.useEffect((function(){(0,h.default)(r,"list",L)}),[L]),u.default.useEffect((function(){(0,h.default)(r,"list",L)}),[L]);var x,U=u.default.useCallback((function(){A(null),_({ok:{}})}),[]),F=function(){var e,a,r=L.findIndex((function(e){return e.key===P.key})),u=(0,l.default)(L);P.nodeSelectorLable&&(P.nodeSelector=(e=P.nodeSelectorLable,a="",e.forEach((function(e){var t="",r="";switch(e.operator){case"NotIn":r=e.values.map((function(e){return'"'.concat(e,'"')})).join(","),t="".concat(e.key," not in {").concat(r,"}");break;case"In":r=e.values.map((function(e){return'"'.concat(e,'"')})).join(","),t="".concat(e.key," in {").concat(r,"}");break;case"Exists":t="has(".concat(e.key,")");break;case"DoesNotExist":t="!has(".concat(e.key,")")}a=a?"".concat(a," && ").concat(t):t})),a)),P.nodeSelectorText?P.nodeSelector=P.nodeSelectorText.replace(/'/g,'"'):P.nodeSelector=P.nodeSelector.replace(/'/g,'"');var c=Number(P.cidr.split("/")[1])||0;P.blockSize=c>(P.blockSize||0)?c<27?26:c:P.blockSize,u.splice(r,1,P);var s=((0,o.default)(u,1)[0]||{}).workspace;if(N&&s)return n.fetchList({cluster:C,page:1,limit:1e3,labelSelector:s?"kubesphere.io/namespace=".concat(s||""):void 0}).then((function(e){var a=(0,y.cidrOverlap)(e,u);if(a)return d.default.error({content:t("CIDR_OVERLAP",{cidr0:a[0],cidr1:a[1]})});j(u),A(null),_({ok:{}})}));j(u),A(null),_({ok:{}})};return P?u.default.createElement(u.default.Fragment,null,u.default.createElement(m.default,{cluster:C,namespace:T,isEdge:N,formRef:a,formTemplate:P,goBack:U,isOutdated:O,hideWorkspace:D,onOk:F}),u.default.createElement(p.default,{className:S.default.confirm,onOk:F,onCancel:U})):u.default.createElement(c.Form,{ref:a,data:r},(x=L,u.default.createElement("div",{className:S.default.container},x.map((function(e){var a,r=(0,b.getOverlayStatus)(e);return u.default.createElement("div",{key:e.key,className:(0,s.default)(S.default.card,S.default.listItem)},u.default.createElement(f.default,{title:(0,y.getDisplayName)(e),icon:g.ICON_TYPES[n.module],description:e.description||"-",className:S.default.info}),!O&&u.default.createElement(f.default,{title:u.default.createElement(i.default,{type:e.disabled?"Disabled":"Running",name:t(e.disabled?"DISABLED":"ENABLED")}),description:t("STATUS")}),u.default.createElement(f.default,{title:e.cidr,description:t("NETWORK_SEGMENT")}),u.default.createElement(f.default,{title:null!==(a=e.blockSize)&&void 0!==a?a:"-",description:t("IPPOOL_BLOCK_SIZE")}),!O&&u.default.createElement(f.default,{title:u.default.createElement("div",null,u.default.createElement("span",{className:"font-bold"},r.type),r.value&&u.default.createElement("span",{style:{marginLeft:"4px"}},"(",r.value,")")),description:t("IPPOOL_OVERLAY_MODE")}),u.default.createElement("div",{className:S.default.workspace}),u.default.createElement("div",{className:S.default.action},u.default.createElement(c.Button,{className:S.default.edit,onClick:function(){return function(e){A((0,v.default)(e)),_({ok:{disabled:!0}})}(e)}},u.default.createElement(c.Icon,{name:"pen",type:"dark",size:16})),!O&&u.default.createElement(c.Tooltip,{content:t("DISABLE_POD_IP_POOL")},u.default.createElement(c.Toggle,{checked:!e.disabled,onChange:function(t){return function(e,t){var a=L.findIndex((function(t){return t.key===e.key})),r=(0,l.default)(L);r[a].disabled=t,j(r)}(e,!t)}}))))})))))};a.default=_},function(e,a,r){"use strict";(function(e){var n=r(20);r(12),r(109),r(11),r(6),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(1705),r(24),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(11),r(6),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(1705),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(787)),i=n(r(74)),f=n(r(26)),d=r(14),p=n(r(240)),m=n(r(435)),v=n(r(3056)),h=n(r(3058)),E=r(3059),y=n(r(3061)),g=n(r(3063)),b=n(r(824)),S=n(r(3070)),_=n(r(1698)),O=n(r(3072)),C=n(r(852)),T=n(r(953));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={"node.group.create":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=n.module,o=n.cluster,u=s.default.open(D({modal:v.default,onOk:function(e){a.create(D({cluster:o,nodetree:e.metadata.name},e)).then((function(){s.default.close(u),p.default.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))},formTemplate:m.default[l](),store:a},n))}},"node.group.tree.baseinfo.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.onOk,o=(0,c.default)(e,["store","detail","success","onOk"]),u=s.default.open(D({onOk:function(e){var a={alias:e.spec.alias,description:e.spec.description};return l(a).then((function(){s.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:h.default,store:a},o))}},"node.group.tree.move":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.onOk,o=(0,c.default)(e,["store","detail","success","onOk"]),u=s.default.open(D({onOk:function(e){return l((null==e?void 0:e.key)||"").then((function(){s.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:E.BoundNodeGroupModal,visible:!0,onCancel:function(){s.default.close(u)},store:a},o))}},"node.group.baseinfo.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=s.default.open(D({onOk:function(e){(0,i.default)(e,"apiVersion","infra.kubesphere.io/v1alpha1"),(0,i.default)(e,"kind","NodeGroup"),a.update(r,e).then((function(){s.default.close(o),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:h.default,store:a},l))}},"bound.node.group":{on:function(e){var a,r=e.store,n=e.cluster,u=(e.detail,e.success),i=(0,c.default)(e,["store","cluster","detail","success"]),f=(0,d.toJS)(r.list).selectedRowKeys,m=s.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var r,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new T.default,o=f.map((function(e){return r.bindNodeGroup({cluster:n,node:e,parentNode:a.key})})),e.next=4,Promise.all(o);case 4:p.default.success({content:t("BOUND_SUCCESSFULLY")}),s.default.close(m),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),onCancel:function(){s.default.close(m)},modal:E.BoundNodeGroupModal,visible:!0,cluster:n,store:r},i))}},"node.bound.node.group":{on:function(e){var a,r=e.store,n=e.cluster,u=(e.detail,e.success),i=e.parentKey,f=(0,c.default)(e,["store","cluster","detail","success","parentKey"]),d=s.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var r,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new T.default,o=a.map((function(e){return r.bindNodeGroup({cluster:n,node:e,parentNode:i})})),e.next=4,Promise.all(o);case 4:p.default.success({content:t("BOUND_SUCCESSFULLY")}),s.default.close(d),u&&u();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),onCancel:function(){s.default.close(d)},modal:y.default,visible:!0,cluster:n,store:r},f))}},"node.group.bound.project":{on:function(e){var a=e.store,r=e.cluster,n=e.group,l=e.success,o=(0,c.default)(e,["store","cluster","group","success"]),u=s.default.open(D({onOk:function(e){var o=e.map((function(e){return e.name}));a.batchBoundNamespaces({cluster:r,group:n,namespaces:o}).then((function(){p.default.success({content:t("BOUND_SUCCESSFULLY")}),s.default.close(u),l&&l()}))},modal:g.default,store:a,cluster:r,group:n},o))}},"node.group.unbound.namespace":{on:function(e){var a=e.store,r=e.cluster,n=e.group,l=e.resource,o=e.success,u=l||(0,f.default)((0,d.toJS)(a.list),"selectedRowKeys",[]),c=s.default.open({onOk:function(){a.batchUnboundNamespaces({cluster:r,group:n,namespaces:u}).then((function(){p.default.success({content:t("UNBOUND_SUCCESSFULLY")}),s.default.close(c),o&&o()}))},store:a,type:"PROJECT",modal:b.default,resource:u.join(",")})}},"node.group.member.invite":{on:function(e){var a=e.store,r=e.cluster,n=e.group,l=e.roles,o=e.success,u=(0,c.default)(e,["store","cluster","group","roles","success"]),i=s.default.open(D({onOk:function(e){a.addMember({cluster:r,group:n,data:e}).then((function(){s.default.close(i),p.default.success({content:t("INVITED_SUCCESSFULLY")}),o&&o()}))},modal:S.default,store:a,cluster:r,group:n,roles:l},u))}},"node.group.member.edit":{on:function(a){var r=a.store,n=a.detail,l=a.cluster,o=a.group,u=a.success,i=(0,c.default)(a,["store","detail","cluster","group","success"]),f=s.default.open(D({onOk:function(e){var a={cluster:l,group:o,name:n.name,data:{username:n.name,roleRef:e}};r.updateMember(a).then((function(){s.default.close(f),p.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u()}))},modal:_.default,store:r,module:e},i))}},"node.group.member.remove":{on:function(e){var a,r,n=e.store,l=e.cluster,o=e.group,u=e.resources,c=e.success;r=u?u.join(","):(a=(0,d.toJS)(n.list.selectedRowKeys)).join(", ");var i=s.default.open({onOk:function(){var e=[];u?u.forEach((function(t){return e.push(n.removeMember({cluster:l,group:o,name:t}))})):a.forEach((function(t){return e.push(n.removeMember({cluster:l,group:o,name:t}))})),Promise.allSettled(e).then((function(){s.default.close(i),p.default.success({content:t("DELETED_SUCCESSFULLY")}),c&&c()}))},modal:b.default,title:1===r.split(", ").length?t("REMOVE_MEMBER"):t("REMOVE_MULTIPLE_MEMBERS"),desc:1===r.split(", ").length?t.html("REMOVE_MEMBER_TIP",{resource:r}):t.html("REMOVE_MULTIPLE_MEMBERS_TIP",{resource:r}),resource:r,store:n})}},"node.group.add.cluster":{on:function(e){var a=e.store,r=e.cluster,n=e.group,l=(e.success,s.default.open({onOk:function(e){(new C.default).addGroupNode({cluster:r,group:n,node:e}).then((function(){p.default.success({content:t("BOUND_SUCCESSFULLY")}),s.default.close(l)}))},modal:O.default,cluster:r,store:a}))}},"node.group.unbound.node":{on:function(e){var a=e.resource,r=e.params,n=e.store,l=e.success,o=s.default.open({onOk:function(){n.removeNodeGroupEdgeNode(r).then((function(){p.default.success({content:t("UNBOUND_NODE_GROUP_SUCCESSFULLY")}),s.default.close(o),l&&l()}))},store:n,modal:b.default,resource:a,title:t("UNBOUND_NODE_GROUP"),desc:t.html("UNBOUND_NODE_GROUP_TIP",{resource:a})})}}};a.default=N}).call(this,r(138)(e))},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(187),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(187),r(11),r(6),r(18),r(28),r(859),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(88)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(14),v=r(239),h=r(186),E=n(r(787)),y=n(r(1317)),g=r(72),b=n(r(322)),S=n(r(3057));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.observer)(l=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).userStore=new b.default,n.formRef=p.default.createRef(),n.fetchUseList=function(e){n.userStore.fetchList(O(O({},e),{},{limit:-1}))},n.handleOk=function(){var e=n.props,t=e.onOk,a=e.formTemplate,r=e.cluster,l=n.formRef.current;l&&l.validate((function(){console.log(a,(0,s.default)(n));var e={cluster:r,nodetree:a.metadata.name,kind:"NodeTree",apiVersion:"infra.kubesphere.io/v1alpha1",metadata:O(O({},a.metadata),{},{annotations:O(O({},a.metadata.annotations),{},{"kubesphere.io/alias-name":a.spec.alias,"kubesphere.io/description":a.spec.description})}),spec:{parent:n.state.parentNodeKey,children:[],nodes:[]}};console.log(e),t(e)}))},n.handleSelect=function(e){n.setState({parentNodeKey:e.key})},n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a,cluster:n.props.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.state={parentNodeKey:""},n}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchUseList()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.formTemplate,l=(0,m.toJS)(this.userStore.list),o=l.page,u=l.isLoading;return p.default.createElement(E.default,{visible:a,onOk:this.handleOk,onCancel:r,width:960,bodyClassName:S.default.body,footerClassName:S.default.footer,hideHeader:!0},p.default.createElement("div",{className:S.default.header},p.default.createElement("img",{src:"/assets/node-group-modal.svg"}),p.default.createElement("div",{className:S.default.textWrapper},p.default.createElement("div",{className:S.default.title},t("CREATE_NODE_GROUP")),p.default.createElement("div",{className:S.default.desc},t("NODE_GROUP_DESC")))),p.default.createElement("div",{className:S.default.content},p.default.createElement(h.Form,{data:n,ref:this.formRef},p.default.createElement(h.Columns,null,p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},p.default.createElement(h.Input,{name:"metadata.name"}))),p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(h.Input,{name:"spec.alias"})))),p.default.createElement(h.Columns,null,p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("PARENT_NODE_GROUP")},p.default.createElement(y.default,{name:"spec.parentNode",cluster:this.props.cluster,onSelect:this.handleSelect}))),p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("NODE_GROUP_ADMINISTER")},p.default.createElement(h.Select,{name:"spec.nodegroup",options:this.users,defaultValue:globals.user.username,pagination:o,isLoading:u,onFetch:this.fetchUseList,searchable:!0,placeholder:" "})))),p.default.createElement(h.Columns,null,p.default.createElement(h.Column,null,p.default.createElement(h.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(h.TextArea,{name:"spec.description",maxLength:256})))))))}},{key:"users",get:function(){var e=globals.user.username,t=this.userStore.list.data.map((function(e){return{label:e.username,value:e.username}}));return t.every((function(t){return t.value!==e}))&&t.unshift({label:e,value:e}),t}}]),r}(p.default.Component))||l;a.default=T},function(e,t,a){e.exports={body:"_14RjHJLWj0EOu1J6JKPLtC",header:"_3NySPwq-aQuhRpx8Nr_rMI",textWrapper:"_31paKY-KbE9AThK9tRPxzF",title:"_3libkMDKzEn36d2IK1KbBT",desc:"_1_9iEc6a8MecGqXcH5fMaq",content:"_2A7tE2pyPE1klqjNdsT_lr",footer:"_3C0S9yFXremxR5OeYSKyl5"}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(830)),m=r(186),v=n(r(787));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,d.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";r(e),u&&o.setSelectRowKeys(c)},t.state={formData:(0,p.default)((0,d.toJS)(e.detail._originData||e.detail))},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return i.default.createElement(v.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},i.default.createElement(m.Form.Item,{label:t("NAME")},i.default.createElement(m.Input,{name:"metadata.name",disabled:!0})),i.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},i.default.createElement(m.Input,{name:"spec.alias",maxLength:63})),i.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(m.TextArea,{name:"spec.description",maxLength:256})))}}]),r}(i.default.Component);a.default=E,E.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},E.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BoundNodeGroupModal=void 0;var o=l(r(96)),u=n(r(0)),c=r(239),s=(l(r(241)),l(r(787))),i=r(186),f=(l(r(322)),l(r(852)),l(r(953))),d=l(r(1317)),p=l(r(3060));new f.default;var m=(0,c.observer)((function(e){var a=e.cluster,r=e.visible,n=e.onCancel,l=e.onOk,c=(0,u.createRef)(),f=(0,u.useState)(),m=(0,o.default)(f,2),v=m[0],h=m[1];return u.default.createElement(s.default,{bodyClassName:p.default["tree-modal-body"],visible:r,width:600,title:t("BOUND_NODE_GROUP"),onOk:function(){l(v)},onCancel:n},u.default.createElement(i.Form,{ref:c},u.default.createElement(i.Form.Item,{label:t("NODE_GROUP")},u.default.createElement(d.default,{cluster:a,onSelect:function(e){h(e)}}))))}));a.BoundNodeGroupModal=m;var v=m;a.default=v},function(e,t,a){e.exports={tipText:"_1cYRXjlqK602TX4ZbojWm6","tree-modal-body":"_3PWp5YKk2Eg8VR6qaQ6ORt"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BoundNodeGroupModal=void 0,r(12),r(5),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var o=l(r(43)),u=l(r(30));r(41);var c=l(r(44)),s=l(r(96)),i=n(r(0)),f=r(239),d=l(r(787)),p=r(186),m=l(r(1008)),v=l(r(3062));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=new m.default;var g=(0,f.observer)((function(e){var a=e.cluster,r=e.visible,n=e.onCancel,l=e.onOk,u=(0,i.createRef)(),f=(0,i.useState)({page:1,limit:10,total:0,data:[]}),m=(0,s.default)(f,2),h=m[0],g=m[1],b=(0,i.useState)(!1),S=(0,s.default)(b,2),_=S[0],O=S[1],C=(0,i.useState)(""),T=(0,s.default)(C,2),R=T[0],D=T[1],N=(0,i.useState)([]),k=(0,s.default)(N,2),I=k[0],P=k[1];function A(e){return w.apply(this,arguments)}function w(){return(w=(0,c.default)(o.default.mark((function e(t){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,y.fetchList(E(E(E({},h),{},{cluster:a},t),{},{labelSelector:"!apps.edgewize.io/nodegroup,node-role.kubernetes.io/edge",type:""}));case 3:(r=e.sent)&&(n=r.filter((function(e){return!e.metadata.labels["apps.edgewize.io/nodegroup"]})).map((function(e){return{label:"".concat(e.name,"(").concat(e.ip,")"),value:e.name}})),g(E(E({},h),t)),O(!1),P(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,i.useEffect)((function(){A()}),[]),i.default.createElement(d.default,{bodyClassName:v.default["tree-modal-body"],visible:r,width:600,title:t("BOUND_NODE_GROUP"),onOk:function(){l(R)},onCancel:n},i.default.createElement(p.Form,{ref:u},i.default.createElement(p.Form.Item,{label:t("EDGE_NODE_PL"),rules:[{required:!0,message:t("SELECT_A_TARGET_NODE")}]},i.default.createElement(p.Select,{name:"node",options:I,onChange:function(e){D(e)},pagination:h,isLoading:_,onFetch:A,searchable:!0,multi:!0,placeholder:" "}))))}));a.BoundNodeGroupModal=g;var b=g;a.default=b},function(e,t,a){e.exports={tipText:"_3-qyn0WXCLvamM8YcdwsWG","tree-modal-body":"oWArT0A4ByWnWpDasw4YF"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(43)),u=n(r(30));r(41);var c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(26)),E=r(14),y=r(239),g=r(186),b=n(r(874)),S=n(r(787)),_=n(r(863)),O=r(52),C=r(794),T=r(1195),R=n(r(852)),D=n(r(970)),N=n(r(1197)),k=n(r(3067)),I=n(r(3069));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var M=(0,y.observer)(c=function(e){(0,d.default)(r,e);var a=w(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).fetchData=function(){var e=(0,s.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.fetchList(A(A({},t),{},{cluster:n.cluster,type:"user"}));case 2:return e.next=4,n.monitoringStore.fetchMetrics({cluster:n.cluster,resources:n.store.list.data.map((function(e){return e.name})),metrics:Object.values((0,O.hideGPUByLicense)(T.MetricTypes,n.cluster)),last:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.fetchGroupData=(0,s.default)(o.default.mark((function e(){var t,a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.group,r=t.cluster,e.next=3,n.groupStore.fetchChildResource({kind:"namespaces",cluster:r,group:a,limit:9999});case 3:n.setState({alreadyBound:n.groupStore.list.data.map((function(e){return{name:e.name}}))});case 4:case"end":return e.stop()}}),e)}))),n.handleSearch=function(e){n.fetchData({name:e})},n.handleRefresh=function(){n.fetchData()},n.handleOnEnter=function(e){var t=n.props.onChange;localStorage.setItem("".concat(globals.user.username,"-cluster"),e),t&&t(e)},n.handleOk=function(){var e=n.state.checkedList;n.props.onOk(e)},n.renderEmpty=function(){return v.default.createElement(b.default,{icon:"project",title:t("NODE_GROUP_PROJECT_EMPTY"),desc:t("BOUND_A_PROJECT_FOR_NODE_GROUP")})},n.handleOnCheck=function(e,t){t?n.setState((function(t){return{checkedList:[].concat((0,l.default)(t.checkedList),[e])}})):n.setState((function(t){return{checkedList:t.checkedList.filter((function(t){return t.uid!==e.uid}))}}))},n.getLastValue=function(e,t){var a=n.monitoringStore.data,r=((0,h.default)(a,"".concat(t,".data.result"))||[]).find((function(t){return(0,h.default)(t,"metric.namespace")===e.name}));return(0,h.default)(r,"value[1]",0)},n.store=new D.default,n.monitoringStore=new N.default,n.groupStore=new R.default,n.state={alreadyBound:[],checkedList:[]},n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchGroupData()}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,o=this.store.list,u=o.data,c=o.total,s=o.page,i=o.isLoading,f=this.state,d=f.checkedList,p=f.alreadyBound,m=(0,h.default)(this.store.list,"filters.name"),y=this.monitoringStore.isLoading;return v.default.createElement(S.default,{bodyClassName:I.default.body,visible:r,onCancel:n,onOk:this.handleOk,width:960,title:t("BOUND_PROJECT_PL")},v.default.createElement("div",{className:I.default.content},v.default.createElement("div",{className:I.default.bar},v.default.createElement(g.Columns,null,v.default.createElement(g.Column,null,v.default.createElement(g.InputSearch,{value:m,placeholder:t("SEARCH_BY_NAME"),onSearch:this.handleSearch})),v.default.createElement(g.Column,{className:"is-narrow"},v.default.createElement(g.Button,{icon:"refresh",type:"flat",onClick:this.handleRefresh})))),v.default.createElement("div",{className:I.default.list},v.default.createElement(_.default,{wrapperClassName:I.default.listWrapper,data:(0,E.toJS)(u),total:c,page:s,loading:i||y,onFetch:this.fetchData,empty:this.renderEmpty()},u.map((function(t){return v.default.createElement(k.default,{key:t.uid,data:t,metricData:{cpuUsage:(0,C.getSuitableValue)(e.getLastValue(t,T.MetricTypes.cpu),"cpu","-"),memoryUsage:(0,C.getSuitableValue)(e.getLastValue(t,T.MetricTypes.memory),"memory","-"),podCount:e.getLastValue(t,T.MetricTypes.pod)},disabled:p.some((function(e){return e.name===t.name})),checked:[].concat((0,l.default)(d),(0,l.default)(p)).some((function(e){return e.name===t.name})),onCheck:e.handleOnCheck})}))))))}},{key:"cluster",get:function(){return this.props.cluster}}]),r}(v.default.Component))||c;a.default=M},,,,function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(3)),d=r(186),p=n(r(788)),m=n(r(795)),v=n(r(812)),h=r(52),E=n(r(3068));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleChecked=function(t){var a=e.props,r=a.data;(0,a.onCheck)(r,t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.data,r=e.metricData,n=e.checked,l=e.disabled,o=[{title:i.default.createElement(m.default,{type:a.status,name:t(a.status.toUpperCase()),flicker:!0}),className:E.default.status},{title:a.workspace||"-",description:t("WORKSPACE"),className:E.default.itemText},{title:r.cpuUsage,description:t("CPU_USAGE"),className:E.default.itemText},{title:r.memoryUsage,description:t("MEMORY_USAGE"),className:E.default.itemText},{title:r.podCount,description:t("POD_PL"),className:E.default.itemText}],u=i.default.createElement("div",{className:E.default.title},i.default.createElement(d.Checkbox,{checked:n,onChange:this.handleChecked,disabled:l}),i.default.createElement(p.default,{icon:"project",iconSize:40,desc:a.description||"-",title:(0,h.getDisplayName)(a),noLink:!0}));return i.default.createElement(v.default.Item,{className:(0,f.default)(E.default.wrapper),titleClass:E.default.title,title:u,details:o})}}]),r}(i.default.Component);a.default=g},function(e,t,a){e.exports={wrapper:"_3MeTHytcliIzkhEiRk6P2A",notReady:"_8eqMfYWF0qkjoJLQW5rqH",title:"_3Tem5JtWYqPMo53Sys6k0S",name:"_2g4Ovw-4lHI3kahLn5W4zP",provider:"oQ6ZlFrUobfAH9TYAm9FS",status:"_28aFqe3i0G6Kw9VTuExqN1",itemText:"o9e2EIOhQDOjyY6-gOgRn"}},function(e,t,a){e.exports={body:"_2xyesmcLPQXehwH3PeccXP",content:"_1AfrEcBCKLhv8xOT6WUVUz",list:"_17SqTowXtiVnCAlJxMps68",listWrapper:"_1bQ2glFGDfmIawJ4pz6PmY"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var l,o,u,c=n(r(61)),s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(1)),E=r(14),y=r(239),g=r(186),b=n(r(787)),S=n(r(863)),_=n(r(322)),O=n(r(1706)),C=n(r(3071)),T=n(r(1707));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var k=(0,y.observer)((u=o=function(e){(0,d.default)(r,e);var a=N(r);function r(e){var t;return(0,i.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.props,r=a.cluster,n=a.workspace,l=a.namespace,o=a.devops;t.userStore.fetchList(D({name:t.state.name,cluster:r,workspace:l||o?n:void 0},e))},t.handleSearch=function(e){t.setState({name:e},t.fetchData)},t.handleSelect=function(e,a){t.setState((function(t){var r=t.members,n=t.newMembers;return{members:[].concat((0,c.default)(r),[e]),newMembers:[].concat((0,c.default)(n),[{username:e,roleRef:a}])}}))},t.handleSubmit=function(){t.props.onOk(t.state.newMembers)},t.userStore=new _.default,t.memberStore=new O.default,t.state={members:[],newMembers:[]},t}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.cluster,r=t.group;this.memberStore.fetchChildResource({kind:"members",cluster:a,group:r,limit:"-1"}).then((function(){e.setState({members:e.memberStore.list.data.map((function(e){return e.name}))})}))}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.roles,o=a.title,u=a.desc,c=a.searchPlaceholder,s=this.state.members,i=(0,E.toJS)(this.userStore.list),f=i.data,d=void 0===f?[]:f,p=i.total,m=i.page,h=i.isLoading;return v.default.createElement(b.default,{width:691,icon:"pen",onCancel:n,onOk:this.handleSubmit,visible:r,bodyClassName:T.default.modalBody,hideHeader:!0},v.default.createElement("div",{className:T.default.body},v.default.createElement("div",{className:T.default.title},v.default.createElement("div",{className:"h4"},o||t("INVITE_MEMBER")),v.default.createElement("p",null,u||t("INVITE_NODE_GROUP_MEMBER_DESC"))),v.default.createElement("div",{className:T.default.content},v.default.createElement(g.InputSearch,{placeholder:c||t("INVITE_NODE_GROUP_MEMBER_SEARCH_PLACEHOLDER"),onSearch:this.handleSearch}),v.default.createElement("div",{className:T.default.results},v.default.createElement(S.default,{data:d,total:p,page:m,loading:h,onFetch:this.fetchData},d.map((function(t){return v.default.createElement(C.default,{key:t.name,user:t,roles:l,selected:s.includes(t.name),onSelect:e.handleSelect})})))))))}}]),r}(v.default.Component),o.propTypes={roles:h.default.array,visible:h.default.bool,workspace:h.default.string,namespace:h.default.string,cluster:h.default.string,title:h.default.string,desc:h.default.string,searchPlaceholder:h.default.string,onOk:h.default.func,onCancel:h.default.func},o.defaultProps={roles:[],visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=k},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(26)),f=n(r(0)),d=n(r(1)),p=r(186),m=n(r(788)),v=n(r(1707));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleMoreMenuClick=function(t,a){var r=e.props;(0,r.onSelect)(r.user.username,a)},e}return(0,o.default)(r,[{key:"getDesc",value:function(e){var a=(0,i.default)(e,"description");return t(a)}},{key:"renderMoreMenu",value:function(){var e=this,a=this.props.roles;return f.default.createElement("div",{className:v.default.menu},f.default.createElement("p",null,t("ASSIGN_ROLE")),f.default.createElement(p.Menu,{onClick:this.handleMoreMenuClick},a.map((function(t){return f.default.createElement(p.Menu.MenuItem,{key:t.name},f.default.createElement(m.default,{className:v.default.avatar,icon:"role",iconSize:40,title:t.name,desc:e.getDesc(t),noLink:!0}))}))))}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.onSelect,r=e.selected;return f.default.createElement("div",{className:v.default.item,"data-user":t.username},f.default.createElement("p",null,f.default.createElement("strong",null,t.username)),f.default.createElement("p",null,t.email),!r&&f.default.createElement(p.Dropdown,{content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},f.default.createElement(p.Button,{type:"control",icon:"add",iconType:"light",onClick:a})),r&&f.default.createElement(p.Button,{type:"flat",icon:"check",disabled:!0}))}}]),r}(f.default.Component);a.default=E,E.propTypes={user:d.default.object,roles:d.default.array,selected:d.default.bool,onSelect:d.default.func}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(14),m=r(239),v=n(r(241)),h=n(r(787)),E=r(186),y=n(r(1008)),g=n(r(3073));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=(0,m.observer)(l=function(e){(0,s.default)(r,e);var a=_(r);function r(){var e;(0,u.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).store=new y.default,e.state={selected:""},e.formRef=d.default.createRef(),e.fetchList=function(t){var a=e.props.cluster;e.store.fetchList(S(S({},t),{},{cluster:a,labelSelector:"vcluster.loft.sh/fake-node!=true",type:""}))},e.handleOnOk=function(){(0,e.props.onOk)(e.state.selected)},e.handleSelect=function(t){e.setState({selected:t})},e}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.state.selected,l=(0,v.default)(this.store.list,["page","limit","total"]),o=(0,p.toJS)(this.store.list),u=o.data,c=void 0===u?[]:u,s=o.isLoading;return d.default.createElement(h.default,{visible:a,width:600,title:t("BOUND_EDGE_NODE"),onOk:this.handleOnOk,onCancel:r},d.default.createElement(E.Form.Item,{label:t("EDGE_NODE"),desc:t("SELECT_A_CLUSTER")},d.default.createElement(E.Select,{className:g.default.Select,value:n,options:c.map((function(e){return{label:e.name,value:e.name}})),pagination:l,isLoading:s,onFetch:this.fetchList,onChange:this.handleSelect,placeholder:" "})))}}]),r}(d.default.Component))||l;a.default=O},function(e,t,a){e.exports={Select:"C0dnTtcXAoISwL_XgTSWY"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(84),r(73),r(18),r(87),r(16),r(9),r(13),r(10),r(316),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(5),r(11),r(6),r(84),r(73),r(18),r(28),r(87),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(85),r(7);var l=n(r(43)),o=n(r(61));r(41);var u=n(r(44)),c=n(r(30)),s=n(r(58)),i=r(14),f=n(r(240)),d=n(r(26)),p=n(r(74)),m=n(r(63)),v=n(r(1198)),h=n(r(1052)),E=n(r(787)),y=n(r(1123)),g=n(r(824)),b=n(r(1631)),S=n(r(3075)),_=n(r(3076)),O=n(r(3080)),C=n(r(3082)),T=n(r(3084)),R=n(r(3087)),D=n(r(3092)),N=n(r(3094)),k=n(r(3096)),I=n(r(3098)),P=n(r(3100)),A=n(r(3102)),w=r(983);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j={"node.add":{on:function(e){var t,a=e.kkName,r=e.success,n=(0,s.default)(e,["kkName","success"]),c=new h.default,f=E.default.open(L({modal:b.default,onOk:(t=(0,u.default)(l.default.mark((function e(t){var n,u,s;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.fetchDetail({name:a});case 2:return n=(0,i.toJS)(c.detail._originData),u=(0,d.default)(n,"spec.hosts",[]),s=(0,d.default)(n,"spec.roleGroups",{}),t.roles.forEach((function(e){s[e]=s[e]||[],s[e].push(t.name)})),(0,p.default)(n,"spec.hosts",[].concat((0,o.default)(u),[t])),(0,p.default)(n,"spec.roleGroups",s),e.next=10,c.update({name:a},n).then((function(){E.default.close(f),r&&r()}));case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:c,addAfterCreate:!0},n))}},"node.type.add":{on:function(){E.default.open({modal:S.default})}},"node.add.log":{on:function(e){var t=e.detail;E.default.open({modal:_.default,detail:t})}},"node.labels":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),l=(0,i.toJS)(a.labels),o=E.default.open(L({onOk:function(e){(0,v.default)(l,(function(t,a){(0,m.default)(e[a])&&(l[a]="")}));var n=L(L({},l),e);t.patch(a,{metadata:{labels:n}}).then((function(){E.default.close(o),r&&r()}))},value:l,modal:O.default,store:t},n))}},"node.taint":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=(0,s.default)(e,["store","detail","success"]),l=E.default.open(L({onOk:function(e){t.patch(a,e).then((function(){E.default.close(l),r&&r()}))},value:(0,i.toJS)(a.taints),modal:C.default,store:t},n))}},"node.taint.batch":{on:function(e){var a=e.store,r=e.success,n=(0,i.toJS)(a.list),l=n.data,o=n.selectedRowKeys,u=l.filter((function(e){return o.includes(e.name)})),c=E.default.open({onOk:function(e){a.batchPatchTaints(e).then((function(){E.default.close(c),f.default.success({content:t("UPDATE_SUCCESSFUL")}),r&&r()}))},nodes:u,modal:T.default,store:a})}},"node.batch.delete":{on:function(e){var a,r=e.store,n=e.cluster,o=e.success,c=e.selectedNodes,i=e.resource,d=(0,s.default)(e,["store","cluster","success","selectedNodes","resource"]),p=c.map((function(e){return{nodeName:e.name,taskName:"del_node"}})),m=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patchNode(n,p);case 2:E.default.close(m),f.default.success({content:t("DELETED_SUCCESSFULLY")}),o&&o();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:t("BATCH_ACTION",{action:t("DELETE")}),resource:i,modal:g.default,store:r},d))}},"node.batch.manage":{on:function(e){var a,r=e.store,n=e.cluster,o=e.success,c=e.selectedNodes,i=(0,s.default)(e,["store","cluster","success","selectedNodes"]),f=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(t){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.reduce((function(e,a){var r=a.name,n=Object.values(t).map((function(e){var t=e.type,a=e.version_id;return{nodeName:r,taskName:"".concat(t,"_install"),taskDefinition:{version:a}}}));return e.concat(n)}),[]),e.next=3,r.patchNode(n,a);case 3:E.default.close(f),null==o||o();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:c[0],title:t("BATCH_ACTION",{action:t("ACCESS_MANAGE")}),modal:P.default,store:r},i))}},"node.batch.cancel.managed":{on:function(e){var a,r=e.store,n=e.cluster,o=e.success,c=e.selectedNodes,i=(0,s.default)(e,["store","cluster","success","selectedNodes"]),d=c.map((function(e){return e.name})),p=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.map((function(e){return{nodeName:e,taskName:"cancel_managed"}})),e.next=3,r.patchNode(n,a);case 3:E.default.close(p),f.default.success({content:t("CANCEL_MANAGED_SUCCESSFULLY")}),null==o||o();case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),type:"ACCESS_NODE",title:t("BATCH_ACTION",{action:t("CANCEL_MANAGED")}),resource:d.join(", "),modal:g.default,store:r},i))}},"node.batch.softInfo":{on:function(e){var a,r=e.store,n=e.cluster,o=e.selectedNodes,c=e.success,i=(0,s.default)(e,["store","cluster","selectedNodes","success"]),f=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(t){var a,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x(t),u=o.reduce((function(e,t){var r=t.name,n=a.map((function(e){var t=e.taskName,a=e.taskDefinition;return{nodeName:r,taskName:t,taskDefinition:a}}));return e.concat(n)}),[]),e.next=4,r.patchNode(n,u);case 4:E.default.close(f),null==c||c();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:y.default,store:r,title:t("BATCH_ACTION",{action:t("EDIT_SOFTWARE_INFO")}),icon:"pen",forms:A.default},i))}},"node.edge.add":{on:function(e){var a=e.cluster,r=e.store,n=e.nodegroup,l=void 0!==n&&n,o=(0,s.default)(e,["cluster","store","nodegroup"]),u=E.default.open(L({onOk:function(){return E.default.close(u)},title:t("ADD_EDGE_NODE"),modal:R.default,cluster:a,store:r,nodegroup:l},o))}},"node.edge.manage":{on:function(e){var a,r=e.store,n=e.success,o=e.detail,c=(0,s.default)(e,["store","success","detail"]),i=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(t){var a,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.name,u=Object.values(t).map((function(e){var t=e.type,r=e.version_id;return{nodeName:a,taskName:"".concat(t,"_install"),taskDefinition:{version:r}}})),e.next=4,r.patchNode(o.cluster,u);case 4:E.default.close(i),null==n||n();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("ACCESS_MANAGE"),modal:P.default,store:r,detail:o},c))}},"node.edge.register":{on:function(e){var a,r=e.cluster,n=e.detail,o=e.store,c=e.success,i=(0,s.default)(e,["cluster","detail","store","success"]),f=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.nodeRegister(t);case 2:E.default.close(f),null==c||c();case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("REGISTER_EDGE_NODE"),modal:I.default,cluster:r,formTemplate:(0,w.getRegisterFormTemplate)(r,n),store:o},i))}},"node.softInfo":{on:function(e){var a,r=e.store,n=e.nodeName,o=e.cluster,c=e.success,i=(0,s.default)(e,["store","nodeName","cluster","success"]),f=E.default.open(L({onOk:(a=(0,u.default)(l.default.mark((function e(t){var a,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x(t),u=a.map((function(e){var t=e.taskName,a=e.taskDefinition;return{nodeName:n,taskName:t,taskDefinition:a}})),e.next=4,r.patchNode(o,u);case 4:E.default.close(f),null==c||c();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:y.default,store:r,title:t("EDIT_SOFTWARE_INFO"),icon:"pen",forms:A.default},i))}},"node.baseinfo.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,s.default)(e,["store","detail","success"]),o=E.default.open(L({onOk:function(e){var r=e.cluster,l=[{nodeName:e.name,taskName:"edit_node_info",taskDefinition:{alias:e.alias,description:e.description}}];a.patchNode(r,l).then((function(){E.default.close(o),f.default.success({content:t("UPDATE_SUCCESSFUL")}),null==n||n()}))},detail:L(L({},r),{},{edgeNodeName:r.name}),modal:k.default,store:a},l))}},"node.sync.time":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,s.default)(e,["store","detail","success"]),o=E.default.open(L({onOk:function(){var e=r.cluster,l=[{nodeName:r.name,taskName:"sync_time"}];a.patchNode(e,l).then((function(){E.default.close(o),f.default.success({content:t("UPDATE_SUCCESSFUL")}),null==n||n()}))},detail:r,modal:N.default,store:a},l))}},"node.filter.confirm":{on:function(e){var t=e.nextStep,a=(0,s.default)(e,["nextStep"]),r=E.default.open(L({onOk:function(e){E.default.close(r),t(e)},modal:D.default},a))}}};function x(e){return Object.values(e).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){var t=e.todoTasks;return!(0,m.default)(t)})).reduce((function(e,t){var a=t.name,r=t.configFile,n=t.version,l=t.customTaskInfo,o=t.todoTasks.map((function(e){var t,o="".concat(a,"_install"),u="".concat(a,"_modify_conf");switch(e){case o:t={version:n};break;case u:t=r;break;case"custom_task":t=l}return{taskName:e,taskDefinition:t}}));return e.concat(o)}),[])}a.default=j},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(787)),p=r(186);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){return f.default.createElement(d.default.Form,(0,l.default)({width:600,icon:"nodes",title:t("ADD_NODE_TYPE")},this.props),f.default.createElement(p.Form.Item,{label:t("TYPE_NAME"),desc:t("NAME_DESC")},f.default.createElement(p.Input,{name:"name",maxLength:63})),f.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("NODE_TYPE_DESCRIPTION_DEC")},f.default.createElement(p.TextArea,{name:"description"})))}}]),r}(f.default.Component);a.default=v},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(787)),m=n(r(1373)),v=n(r(1052)),h=n(r(3078)),E=r(239),y=n(r(3079));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=(0,E.observer)(l=function(e){(0,c.default)(r,e);var a=g(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).kubekeyClusterStore=e.props.isEdgeWize?new h.default:new v.default,e.fetchPod=function(){var t=(0,d.default)(e.props,"detail.kkName");t&&e.kubekeyClusterStore.fetchDetail({name:t})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.fetchPod()}},{key:"renderContent",value:function(){var e=(0,d.default)(this.kubekeyClusterStore.detail,"status.jobInfo",{}),t=e.namespace,a=e.pods,r=(0,d.default)(a,"[0].name"),n=(0,d.default)(a,"[0].containers[0].name");return f.default.createElement(m.default,{className:y.default.containerLog,contentClassName:y.default.containerLogContent,namespace:t,podName:r,isEdgeWize:this.props.isEdgeWize,containerName:n,isRealtime:!0})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return f.default.createElement(p.default,{bodyClassName:y.default.body,title:t("LOGS"),visible:a,onCancel:r,fullScreen:!0,hideFooter:!0},this.renderContent())}}]),r}(f.default.Component))||l;a.default=b},,function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(55)),o=r(a(56)),u=r(a(51));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var s=function(e){(0,l.default)(a,e);var t=c(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return a}(r(a(1052)).default);t.default=s},function(e,t,a){e.exports={body:"_1YPo-YXSjXshsvOLc6vDAH",containerLog:"_1BDHwOP-bAWoN4kDG1yCjv",containerLogContent:"_3zKOo0nnc69mFUX5on-BCT"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=n(r(3)),v=n(r(63)),h=r(186),E=n(r(787)),y=n(r(842)),g=n(r(3081));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleOk=function(){(0,t.props.onOk)(t.state.value)},t.handleChange=function(e){t.setState({value:e})},t.handleError=function(e){t.setState({enableSave:(0,v.default)(e)})},t.state={value:e.value,enableSave:!0},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.value;a&&a!==e.visible&&r!==e.value&&this.setState({value:r})}},{key:"render",value:function(){var e=this.props,a=e.title,r=(e.onOk,(0,o.default)(e,["title","onOk"])),n=this.state,u=n.value,c=n.enableSave;return d.default.createElement(E.default.Form,(0,l.default)({width:1162,bodyClassName:g.default.body,title:t("EDIT_TITLE",{title:a}),icon:"pen",okText:t("OK"),onOk:this.handleOk,disableOk:!c},r),d.default.createElement("div",{className:g.default.wrapper},d.default.createElement("div",{className:(0,m.default)(g.default.title,"h5")},t(a)),d.default.createElement("div",{className:g.default.content},d.default.createElement(h.Form.Item,null,d.default.createElement(y.default,{className:g.default.inputs,addText:t("ADD"),value:u,onChange:this.handleChange,onError:this.handleError})))))}}]),r}(d.default.Component);a.default=S,S.propTypes={value:p.default.object,title:p.default.string,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},S.defaultProps={visible:!1,title:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"nGOiMiUdF85Rmj9KRQgJy",wrapper:"_3gcATE4Hg6mOM-FIQJUKap",title:"_1TC3EKShLbFxFx5bge4ASR",content:"_3du1pxv0kFceCZAjUywg8s",inputs:"_1PO0E_3BPNCJdOqw1k0o1P"}},function(e,a,r){"use strict";r(15);var n=r(20);r(6),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(6),r(42),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=r(186),v=n(r(787)),h=n(r(26)),E=n(r(63)),y=n(r(1708)),g=n(r(1710));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleSubmit=function(e){var a=(0,h.default)(e,"spec.taints");if((0,E.default)(a))t.props.onOk(e);else{var r={},n=!0;a.forEach((function(e){r[e.key]?n=!1:r[e.key]=1})),n&&t.props.onOk(e)}},t.state={formData:{spec:{taints:e.value}}},t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.value;a&&a!==e.visible&&e.value!==r&&this.setState({formData:{spec:{taints:r}}})}},{key:"render",value:function(){var e=this.props,a=(e.value,e.onOk,(0,o.default)(e,["value","onOk"]));return d.default.createElement(v.default.Form,(0,l.default)({width:1162,bodyClassName:g.default.body,title:t("EDIT_TAINTS"),icon:"wrench",okText:t("OK"),data:this.state.formData,onOk:this.handleSubmit},a),d.default.createElement("div",{className:g.default.wrapper},d.default.createElement("div",{className:g.default.title},t("TAINTS")),d.default.createElement(m.Alert,{type:"info",message:t("TAINTS_DESC")}),d.default.createElement("div",{className:g.default.content},d.default.createElement(m.Form.Item,null,d.default.createElement(y.default,{name:"spec.taints"})))))}}]),r}(d.default.Component);a.default=S,S.propTypes={value:p.default.array,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},S.defaultProps={visible:!1,value:[{}],onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(315)),o=n(r(58)),u=n(r(0)),c=r(186),s=n(r(867)),i=n(r(1709)),f=function(e){var a=e.onSelect,r=e.onDelete,n=e.disabled,f=(0,o.default)(e,["onSelect","onDelete","disabled"]),d=[{label:t("NOSCHEDULE"),value:"NoSchedule"},{label:t("PREFERNOSCHEDULE"),value:"PreferNoSchedule"},{label:t("NOEXECUTE"),value:"NoExecute"}];return u.default.createElement("div",{className:i.default.item},u.default.createElement(s.default,(0,l.default)({className:i.default.inputs},f),u.default.createElement(c.Input,{name:"key",placeholder:t("KEY")}),u.default.createElement(c.Input,{name:"value",placeholder:t("VALUE")}),u.default.createElement(c.Select,{name:"effect",options:d,defaultValue:"NoSchedule"})),u.default.createElement("div",{className:i.default.tips},u.default.createElement(c.Tooltip,{content:u.default.createElement("div",{style:{width:200},dangerouslySetInnerHTML:{__html:t("TAINTS_TIPS")}})},u.default.createElement(c.Icon,{name:"question",size:16}))),u.default.createElement("div",{className:i.default.actions},a&&u.default.createElement(c.Tooltip,{content:t("TAINT_SELECT_TIPS")},u.default.createElement(c.Button,{type:"flat",icon:"add",className:i.default.select,disabled:n,onClick:a})),r&&u.default.createElement(c.Tooltip,{content:t("TAINT_DELETE_TIP")},u.default.createElement(c.Button,{type:"flat",icon:"trash",className:i.default.delete,onClick:r}))))};a.default=f},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(31),r(6),r(84),r(18),r(87),r(16),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(87),r(42),r(16),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(61)),c=n(r(36)),s=n(r(37)),i=n(r(88)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(1)),h=n(r(63)),E=n(r(74)),y=n(r(3085)),g=n(r(3086)),b=n(r(928)),S=n(r(800)),_=n(r(26)),O=r(52),C=r(186),T=n(r(787)),R=n(r(1708)),D=n(r(1710));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var k=function(e){(0,f.default)(r,e);var a=N(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).getTaints=function(e){return e.taints||[{}]},t.getCommonTaints=function(e){var t=e.nodes;if((0,h.default)(t)||1===t.length)return[{}];var a=t.map((function(e){return e.taints})),r=y.default.apply(void 0,(0,u.default)(a).concat([function(e,t){return e.key===t.key&&e.value===t.value&&e.effect===t.effect}]));return(0,h.default)(r)?[{}]:r},t.getDifferentTaints=function(e){var a=t.getTaints(e).filter((function(e){return(0,h.default)(e.key)&&(0,h.default)(e.value)||!t.commonTaintsKeys.includes(e.key)}));return(0,h.default)(a)?[{}]:a},t.handleSubmit=function(){var e=t.state,a=e.nodes,r=e.commonTaints,n=a.map((function(e){var a=t.getTaints(e),n=[].concat((0,u.default)(a),(0,u.default)(r)).filter((function(e){return e.key})).reduce((function(e,t){return e.find((function(e){return e.key===t.key}))||e.push(t),e}),[]);return(0,E.default)(e,"taints",n),e})),l=!0;n.forEach((function(e){var t=(0,_.default)(e,"taints",[]),a={};t.forEach((function(e){a[e.key]?l=!1:a[e.key]=1}))})),l&&t.props.onOk(n)},t.handleChangeAll=(0,S.default)((function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.setState((function(r){var n=r.nodes,l=(0,u.default)(n);return l.forEach((function(e){var r=t.getTaints(e);a.key&&(0,b.default)(r,(function(e){return e.key===a.key})),(0,b.default)(r,(function(e){return t.commonTaintsKeys.includes(e.key)}))})),{nodes:l,commonTaints:(0,h.default)(e)?[{}]:e}}))}),100),t.handleChange=function(e,a){return(0,O.cacheFunc)("_change_".concat(a),(function(e){t.setState((function(t){var r=t.nodes,n=(0,u.default)(r);return(0,E.default)(n,"[".concat(a,"].taints"),e),{nodes:n}}))}),(0,i.default)(t))},t.handleSelect=function(e){return(0,O.cacheFunc)("_select_".concat(e),(function(e){e.key&&t.setState((function(t){var a=t.nodes,r=t.commonTaints;return a.forEach((function(t){var a=t.taints||[];t.taints=(0,g.default)(a,[e],"key").filter((function(e){return e.key}))})),r.push(e),{nodes:a,commonTaints:r.filter((function(e){return e.key}))}}))}),(0,i.default)(t))},t.state={nodes:e.nodes,commonTaints:t.getCommonTaints(e)},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.setState({nodes:this.props.nodes,commonTaints:this.getCommonTaints(this.props)})}},{key:"renderCommonTaints",value:function(){var e=this.state,a=e.nodes,r=e.commonTaints;return(0,h.default)(a)||1===a.length?null:m.default.createElement("div",{className:D.default.node},m.default.createElement("div",{className:D.default.subTitle},t("COMMON_TAINTS")),m.default.createElement(R.default,{value:r,onChange:this.handleChangeAll}))}},{key:"renderNodeTaints",value:function(){var e=this,t=this.state,a=t.nodes,r=t.commonTaints,n=(0,h.default)(a)||1===a.length;return a.map((function(t,a){var l=e.getDifferentTaints(t);return m.default.createElement("div",{key:t.name,className:D.default.node},m.default.createElement("div",{className:D.default.subTitle},t.name),m.default.createElement(R.default,{common:r,value:l,onSelect:n?null:e.handleSelect(a),onChange:e.handleChange(t,a)}))}))}},{key:"render",value:function(){var e=this.props,a=(e.detail,e.onOk,(0,o.default)(e,["detail","onOk"]));return m.default.createElement(T.default.Form,(0,l.default)({width:1162,bodyClassName:D.default.body,title:t("EDIT_TAINTS"),icon:"wrench",okText:t("OK"),onOk:this.handleSubmit},a),m.default.createElement("div",{className:D.default.wrapper},m.default.createElement("div",{className:D.default.title},t("TAINTS")),m.default.createElement(C.Alert,{type:"info",message:t("TAINTS_DESC")}),m.default.createElement("div",{className:D.default.content},this.renderCommonTaints(),this.renderNodeTaints())))}},{key:"commonTaintsKeys",get:function(){return this.state.commonTaints.map((function(e){return e.key}))}}]),r}(m.default.Component);a.default=k,k.propTypes={visible:v.default.bool,nodes:v.default.array,onOk:v.default.func,onCancel:v.default.func},k.defaultProps={visible:!1,nodes:[],onOk:function(){},onCancel:function(){}}},,,function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(86),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(934),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(86),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(934),r(7);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(30)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=n(r(0)),v=l(r(74)),h=l(r(1375)),E=r(186),y=r(1376),g=l(r(240)),b=r(52),S=r(72),_=l(r(787)),O=l(r(3091));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var D={name:function(e){return t("IN_USE_Node_NAME",{name:e})},IP:function(e){return t("IN_USE_Node_IP",{ip:e})}},N=function(e){(0,f.default)(r,e);var a=R(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).state={link:"",loading:!1,showLink:!1,isCheck:!0,formData:(0,h.default)(e.props.formTemplate||{})},e.formRef=m.default.createRef(),e.store=e.props.store,e.validator=function(t){return function(a,r,n){var l=t.toLocaleLowerCase();if(!r)return n();var o=e.props,u=o.cluster,c=o.nodegroup;if(a.field===l){var s=T({cluster:u},e.state.formData);c&&(0,v.default)(s,"nodegroup",c),e.store.createEdgeNode(s).then((function(e){"Failure"===e.status?e.message.indexOf("".concat(t))>-1?n({field:a.field,message:D[t](r)}):n():n()}))}}},e.handleLink=function(){var t=e.props,a=t.cluster,r=t.nodegroup,n=e.state.isCheck,l=e.formRef.current;l&&l.validate((0,u.default)(o.default.mark((function t(){var l,u,c;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),l=T({cluster:a,defaultTaint:n},e.state.formData),r&&(0,v.default)(l,"nodegroup",r),t.next=5,e.store.createEdgeNode(l);case 5:"Failure"!==(u=t.sent).status&&(c=u.data,e.setState({link:c,showLink:!0})),e.setState({loading:!1});case 8:case"end":return t.stop()}}),t)}))))},e.handleCopy=function(){g.default.success({content:t("COPY_SUCCESSFUL")})},e.emptyLink=function(){e.state.link&&e.setState({link:"",showLink:!1})},e.renderLink=function(){var a=e.state,r=a.showLink,n=a.link,l=t.html("EDGENODE_CONFIG_COMMAND_TIP");return r?m.default.createElement("div",{className:O.default.column},m.default.createElement(E.Form.Item,{label:m.default.createElement(m.default.Fragment,null,t("EDGENODE_CONFIG_COMMAND"),m.default.createElement(E.Tooltip,{content:m.default.createElement("span",{className:O.default.installInfo},(0,b.learnMoreTip)(l))},m.default.createElement(E.Icon,{className:O.default.infoIcon,name:"information",size:18}))),desc:t("ADD_EDGE_COMMAND")},m.default.createElement("div",{className:O.default.linkContainer},m.default.createElement("pre",{className:O.default.link},n))),m.default.createElement(y.CopyToClipboard,{text:n,onCopy:e.handleCopy},m.default.createElement(E.Button,null,t("COPY")))):null},e.handleChangeCheck=function(t){e.setState({isCheck:t})},e.runtimeOptions=[{label:"Docker",value:"docker"},{label:"Containerd",value:"containerd"}],e.renderEdgeWizeNodeFormItems=function(){return m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Form.Item,{className:O.default.runtime,label:t("CONTAINER_RUNTIME"),rules:[{required:!0,message:t("CONTAINER_RUNTIME_EMPTY_DESC")}]},m.default.createElement(E.RadioGroup,{name:"runtime",defaultValue:"docker",wrapClassName:"radio-group-button"},e.runtimeOptions.map((function(e){var t=e.value,a=e.label;return m.default.createElement(E.RadioButton,{key:t,value:t},a)})))),m.default.createElement(E.Form.Item,{label:t("IMAGE_REPOSITORY_ADDRESS")},m.default.createElement(E.Input,{name:"imageRepository"})),m.default.createElement("div",{className:O.default.column},m.default.createElement(E.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("EDGENODE_NAME_EMPTY_DESC")},{pattern:S.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:e.validator("name")}],desc:t("NAME_DESC")},m.default.createElement(E.Input,{name:"name",defaultValue:"edgenode-".concat((0,b.generateId)(4)),onChange:e.emptyLink})),m.default.createElement(E.Button,{className:O.default.edgeValidate,onClick:e.handleLink,loading:e.state.loading},t("VALIDATE"))))},e.renderEdgeNodeFormItems=function(){return m.default.createElement(m.default.Fragment,null,m.default.createElement(E.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("EDGENODE_NAME_EMPTY_DESC")},{pattern:S.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:e.validator("name")}],desc:t("NAME_DESC")},m.default.createElement(E.Input,{name:"name",maxLength:63,defaultValue:"edgenode-".concat((0,b.generateId)(4)),onChange:e.emptyLink})),m.default.createElement("div",{className:O.default.column},m.default.createElement(E.Button,{className:O.default.edgeValidate,onClick:e.handleLink,loading:e.state.loading},t("VALIDATE"))))},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel,l=e.isEdgeWize;return m.default.createElement(_.default,{title:t("ADD_EDGE_NODE"),width:600,visible:a,onOk:r,onCancel:n,hideFooter:!0},m.default.createElement(E.Form,{data:this.state.formData,ref:this.formRef},l?this.renderEdgeWizeNodeFormItems():this.renderEdgeNodeFormItems(),m.default.createElement("div",{className:O.default.column},m.default.createElement(E.Checkbox,{defaultValue:!0,checked:this.state.isCheck,onChange:this.handleChangeCheck},t("ADD_DEFAULT_TAINT",{params:'node-role.kubernetes.io/edge="":NoSchedule'}))),this.renderLink()))}}]),r}(m.Component);a.default=N},,,,function(e,t,a){e.exports={errorMessage:"_3S7-jeydyoFwDpd9pSycVx",linkContainer:"_1ggyEQNMCzuZ-coFwWh3pC",link:"c_iHcRkOuUTw0vHcUCv2d",column:"_3oR2jlvaLkV7X5Pt_HUBWZ",infoIcon:"_1xenl2b6SqpTOis9lh2q2P",installInfo:"k72561gKG-uS6_V9v8-zN",edgeValidate:"zXNjoENWZneCz3uB43FM-",runtime:"_3T5sDaR53b2VxAXhvzBEGY"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(11),r(84),r(18),r(16),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(11),r(84),r(18),r(42),r(16),r(4),r(23),r(57),r(17),r(85);var l=n(r(30)),o=n(r(61)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(3)),m=n(r(247)),v=n(r(1)),h=r(186),E=r(983),y=n(r(787)),g=n(r(795)),b=n(r(788)),S=n(r(3093));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(r,e);var a=_(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleSelectAll=function(){if(t.isSelectedAll)return t.setState({selectedKeys:[]});t.setState({selectedKeys:t.allowedNodes.map((function(e){return e.name}))})},t.handleNodeCheckedChange=function(e,a){var r,n=null!==(r=t.state.selectedKeys)&&void 0!==r?r:[];return e?t.setState({selectedKeys:(0,m.default)([].concat((0,o.default)(n),[a]))}):t.setState({selectedKeys:n.filter((function(e){return e!==a}))})},t.handleOk=function(){var e=t.props.onOk;null==e||e(t.selectedNodes)},t.state={selectedKeys:t.allowedNodes.map((function(e){return e.name}))},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.title,o=a.okText,u=a.onCancel;return d.default.createElement(y.default,{width:600,title:n,visible:r,okText:o,onOk:this.handleOk,onCancel:u},d.default.createElement("div",{className:S.default.banner},d.default.createElement("span",{className:S.default.title},t("EDGE_NODE")),d.default.createElement("span",{onClick:this.handleSelectAll,className:S.default.action},this.isSelectedAll?t("CANCEL_SELECT_ALL"):t("SELECT_ALL"))),d.default.createElement("div",{className:S.default.list},this.allowedNodes.map((function(a){var r=a.name,n=a.nodeIP,o=a.status;return d.default.createElement("div",{key:r,className:(0,p.default)(S.default.node,(0,l.default)({},S.default.active,e.state.selectedKeys.includes(r)))},d.default.createElement(h.Checkbox,{checked:e.state.selectedKeys.includes(r),onChange:function(t){return e.handleNodeCheckedChange(t,r)}}),d.default.createElement(b.default,{className:S.default.content,to:null,icon:"edge-node",iconSize:20,title:(0,E.getAccessNodeDisplayName)(a),desc:n}),d.default.createElement(g.default,{type:o,name:t("NODE_STATUS_".concat(o.toLocaleUpperCase()))}))}))))}},{key:"allowedNodes",get:function(){var e;return null!==(e=this.props.nodes)&&void 0!==e?e:[]}},{key:"isSelectedAll",get:function(){var e=this;return this.allowedNodes.every((function(t){var a=t.name;return e.state.selectedKeys.includes(a)}))}},{key:"selectedNodes",get:function(){var e=this;return this.allowedNodes.filter((function(t){var a=t.name;return e.state.selectedKeys.includes(a)}))}}]),r}(d.default.Component);a.default=O,O.propTypes={detail:v.default.object,visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func,isSubmitting:v.default.bool},O.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={banner:"_3xffvM2XHROBh42U_Nf9gr",action:"nuCNP_IfGqufUHnjpp843",title:"_1zMX4UNFhb7j1VH-4m1IkU",list:"_3lcynLW3pEZOY2n-LnNoa6",active:"_1GR_uekAuiFnWs14U5mtI0",node:"_2xAMNMKIbhRF7URBG2nP1-",content:"D41eZi0b2YjFiBi-S9SAn"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3095));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).width=504,e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=e.onCancel,l=e.isSubmitting;return i.default.createElement(p.default,{width:this.width,bodyClassName:m.default.modalBody,visible:a,isSubmitting:l,onOk:r,onCancel:n,hideHeader:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:m.default.title},i.default.createElement(d.Icon,{name:"information",size:20}),t("SYNC_TIME")),i.default.createElement("div",{className:m.default.content},t("SYNC_TIME_TIPS"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={content:"_9pRvOwXyTWBcsAma1UveH",title:"_2kBY1J9CnEwixu_dECeWr7"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(14),p=n(r(830)),m=n(r(1)),v=r(186),h=n(r(787)),E=n(r(3097));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b=function(e){(0,c.default)(r,e);var a=g(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=Object.assign({},e),r=t.props.onOk,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a);null==r||r(n)},t.state={formData:(0,p.default)((0,d.toJS)(e.detail))},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return f.default.createElement(h.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r,className:E.default.modal},f.default.createElement(v.Form.Item,{label:t("NAME")},f.default.createElement(v.Input,{name:"name",disabled:!0})),f.default.createElement(v.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},f.default.createElement(v.Input,{name:"alias",maxLength:63})),f.default.createElement(v.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},f.default.createElement(v.TextArea,{name:"description",maxLength:256})))}}]),r}(f.default.Component);a.default=b,b.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},b.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={modal:"NVRK7pz-OS7YdiksJpbNE"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(30)),u=n(r(58)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(3)),v=r(239),h=n(r(1325)),E=r(186),y=r(72),g=n(r(787)),b=n(r(1059)),S=n(r(799)),_=n(r(1634)),O=n(r(3099));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var D=(0,v.observer)(l=function(e){(0,i.default)(r,e);var a=R(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).registryTabs=[{label:t("SINGLE_REGISTRATION"),value:"single"},{label:t("MULTIPLE_REGISTRATION"),value:"multiple"}],n.formatFormData=function(e){var t=e.edgeNodeName,a=e.edgeIpList;return T(T({},(0,u.default)(e,["edgeNodeName","edgeIpList"])),{},{edgeNodeName:n.isSingleRegister?t:void 0,edgeIpList:n.isSingleRegister?[a[0]]:a})},n.handleOk=function(){var e=n.formRef.current;e&&e.validate((function(){var t=n.props.onOk,a=n.formatFormData(e.getData());null==t||t(a)}))},n.handleModeChange=function(e){n.setState({mode:e})},n.renderSSHAndPortItems=function(){var e=n.props.reRegister;return e||n.isSingleRegister?p.default.createElement(E.Form.Item,{label:t("NODE_ACCESS_IP"),desc:t("NODE_ACCESS_IP_TIPS")},p.default.createElement(b.default,{portName:"sshPort",renderHostInput:p.default.createElement(_.default,{name:"edgeIpList",onChange:n.handleIpInputChange,disabled:e}),defaultPort:22})):p.default.createElement(p.default.Fragment,null,p.default.createElement(E.Form.Item,{label:t("NODE_ACCESS_IP"),desc:t("NODE_ACCESS_IPS_TIPS")},p.default.createElement(_.default,{name:"edgeIpList",onChange:n.handleIpInputChange,isMultiMode:!0})),p.default.createElement(E.Form.Item,{label:t("SSH_PORT"),desc:t("SSH_PORT_DESC")},p.default.createElement(S.default,{name:"sshPort"})))},n.otafileServerValidator=function(e,a,r){return a?h.default.isURL(a)?r():r({message:t("FILE_SERVER_ERROR_MESSAGE"),field:e.field}):r()},n.formTemplate=n.props.formTemplate,n.state={mode:"single"},n.formRef=p.default.createRef(),n}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.title,l=e.cluster,o=e.reRegister;return p.default.createElement(g.default,{title:n,visible:a,onOk:this.handleOk,onCancel:r},!o&&p.default.createElement(E.RadioGroup,{defaultValue:this.state.mode,wrapClassName:(0,m.default)("radio-group-button",O.default.toolbar),onChange:this.handleModeChange},this.registryTabs.map((function(e){var t=e.value,a=e.label;return p.default.createElement(E.RadioButton,{key:t,value:t},a)}))),!this.isSingleRegister&&p.default.createElement(E.Alert,{type:"info",message:t("MULTIPLE_REGISTER_TIPS"),className:O.default.tips}),p.default.createElement(E.Form,{ref:this.formRef,data:this.formTemplate,onSubmit:this.handleOk,className:O.default.form},p.default.createElement(E.Form.Item,{label:t("CLUSTER_NAME")},p.default.createElement(E.Input,{name:"clusterName",defaultValue:l,maxLength:63,disabled:!!l})),this.isSingleRegister&&p.default.createElement(E.Form.Item,{label:t("NODE_ACCESS_NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NODE_ACCESS_NAME_REQUIRED")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC")}]},p.default.createElement(E.Input,{name:"edgeNodeName",maxLength:63,disabled:o})),p.default.createElement(E.Form.Item,{label:t("FILE_SERVER"),desc:t("FILE_SERVER_TIPS"),rules:[{validator:this.otafileServerValidator}]},p.default.createElement(E.Input,{name:"otafileServer"})),p.default.createElement(E.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},p.default.createElement(E.Input,{name:"alias",maxLength:63})),this.renderSSHAndPortItems(),p.default.createElement(E.Form.Item,{label:t("NODE_ARCHITECTURE"),rules:[{required:!0,message:t("NODE_ARCHITECTURE_REQUIRED")}]},p.default.createElement(E.Select,{name:"arch",options:[{label:"x86_64",value:"x86_64"},{label:"arm64",value:"arm64"}]})),p.default.createElement(E.Form.Item,{label:t("USERNAME"),desc:t("NODE_ACCESS_USERNAME_TIPS"),rules:[{required:!0,message:t("NODE_ACCESS_USERNAME_REQUIRED")}]},p.default.createElement(E.Input,{name:"userName",autoComplete:"off"})),p.default.createElement(E.Form.Item,{label:t("PASSWORD"),desc:t("NODE_ACCESS_PASSWORD_TIPS"),rules:[{required:!0,message:t("请输入边缘节点的登录密码")}]},p.default.createElement(E.InputPassword,{name:"password",type:"password",onChange:this.handlePasswordChange,autoComplete:"off"})),p.default.createElement(E.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(E.TextArea,{name:"description",maxLength:256,className:O.default.desc}))))}},{key:"isSingleRegister",get:function(){return"single"===this.state.mode}}]),r}(p.default.Component))||l;a.default=D},function(e,t,a){e.exports={tips:"_2CObeVvLeE9AlWUQi2cKyi",toolbar:"_2ydpppmHnfYfCeSi8qVFvK",form:"_3YYBwlrjE9-wsZGQvdRieS",password:"_2a33JaTvqhNwcKFdNl43nh",verifyBtn:"iJMoSIewUPj4xj9w6RjAa",success:"_2bHGYO2J7tmaDnxu8bMJHW"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(3)),p=n(r(1)),m=n(r(26)),v=n(r(189)),h=n(r(241)),E=r(186),y=n(r(787)),g=n(r(816)),b=n(r(3101));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).formattedVersionOption=function(e){var a,r;return e&&null!==(a=null===(r=n.versionList[e])||void 0===r?void 0:r.map((function(a){return{label:a,description:t("SOFT_VERSION",{value:e}),value:a}})))&&void 0!==a?a:[]},n.handleOk=function(){var e,t;null===(e=(t=n.props).onOk)||void 0===e||e.call(t,(0,h.default)(n.state,["containerEngine","edgeSoft"]))},n.handleSoftTypeChange=function(e,t){var a;n.setState((0,l.default)({},t,{type:e,version_id:null===(a=n.versionList[e])||void 0===a?void 0:a[0]}))},n.handleSoftVersionChange=function(e,t){n.setState((0,l.default)({},t,{type:n.state[t].type,version_id:e}))},n.renderSoftCards=function(e,t){return f.default.createElement("div",{className:b.default.softs},e.map((function(e){var a,r=e.label,o=e.value,u=e.icon,c=e.disable,s=o===n.state[t].type;return f.default.createElement("div",{key:o,className:(0,d.default)(b.default.soft,(a={},(0,l.default)(a,b.default.active,s),(0,l.default)(a,b.default.unAllowable,c),a)),onClick:function(){return!c&&n.handleSoftTypeChange(o,t)}},f.default.createElement(E.Icon,{name:u,size:48}),f.default.createElement("span",null,r),f.default.createElement(E.Radio,{checked:s,style:{position:"absolute",top:"10px",right:"10px"}}))})))},n.state={containerEngine:n.defaultContainerEngine,edgeSoft:n.defaultEdgeSoft},n}return(0,u.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.isSubmitting,l=a.onCancel,o=a.title;return f.default.createElement(y.default,{width:600,title:o,onOk:this.handleOk,onCancel:l,visible:r,isSubmitting:n},f.default.createElement("div",{className:b.default.title},t("CONTAINER_ENGINE")),f.default.createElement("p",{className:b.default.desc},t("CONTAINER_ENGINE_TIPS")),this.renderSoftCards(this.containerEngines,"containerEngine"),f.default.createElement(g.default,{value:this.state.containerEngine.version_id,options:this.formattedVersionOption(this.state.containerEngine.type),onChange:function(t){return e.handleSoftVersionChange(t,"containerEngine")}}),f.default.createElement("div",{className:b.default.title,style:{marginTop:"20px"}},t("EDGE_SOFT")),f.default.createElement("p",{className:b.default.desc},t("EDGE_SOFT_TIPS")),this.renderSoftCards(this.edgeSofts,"edgeSoft"),f.default.createElement(g.default,{value:this.state.edgeSoft.version_id,options:this.formattedVersionOption(this.state.edgeSoft.type),onChange:function(t){return e.handleSoftVersionChange(t,"edgeSoft")}}))}},{key:"versionList",get:function(){var e,t=null===(e=this.props.detail)||void 0===e?void 0:e.versionList,a=(0,v.default)(t,"nvidiaDocker2"),r=(0,m.default)(t,"nvidiaDocker2");return _(_({},a),{},{"nvidia-docker2":r})}},{key:"containerEngines",get:function(){return[{label:"Docker",icon:"docker",value:"docker"},{label:"Containerd",icon:"container",value:"containerd"},{label:"Nvidia-Docker2",icon:"docker",value:"nvidia-docker2"}]}},{key:"edgeSofts",get:function(){return[{label:"KubeEdge",icon:"iot-duotone",value:"edgecore"},{label:"其他",icon:"smart-edge",value:"others",disable:!0}]}},{key:"defaultContainerEngine",get:function(){var e;return{type:"docker",version_id:null===(e=this.versionList.docker)||void 0===e?void 0:e[0]}}},{key:"defaultEdgeSoft",get:function(){var e;return{type:"edgecore",version_id:null===(e=this.versionList.edgecore)||void 0===e?void 0:e[0]}}}]),r}(f.default.Component);a.default=C,C.propTypes={visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,isSubmitting:p.default.bool},C.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={title:"_1GqaNQezZIYu-eRXAcJIMZ",desc:"_1q1QxsmTC5Kuh4SOHumU_z",softs:"_1CPddhpixg9fqsIaX-s5ql",soft:"_1owOrngbzAMPFHL0rquvFD",active:"ucFicryCpyev5al_2P_NQ",unAllowable:"_22UFSXFdpL32zK5Ew9ca-X"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3103)),l=r(a(3110)),o=r(a(3114)),u=[{icon:"turn-dot-duotone",name:"containerEngine",title:"CONTAINER_ENGINE",component:r(a(3115)).default},{icon:"turn-dot-delta-duotone",name:"edgeSoft",title:"EDGE_SOFT",component:n.default},{icon:"app-4-duotone",name:"otherSofts",title:"OTHER_SOFTS",component:l.default},{icon:"terminal",name:"customCommand",title:"CUSTOM_COMMAND",component:o.default}];t.default=u},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(31),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(63)),m=r(186),v=n(r(841)),h=n(r(874)),E=n(r(828)),y=n(r(3104)),g=n(r(3106)),b=n(r(1711)),S=n(r(3109));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var T=function(e){(0,s.default)(r,e);var a=C(r);function r(e){var n,o,c,s,i,f;return(0,u.default)(this,r),(f=a.call(this,e)).handleFormChange=function(e){var t=f.props,a=t.name;(0,t.onSaveChange)(a,O(O({},t.formTemplate),{},{edgeSofts:[e]}))},f.handleHideConfirmForm=function(){return f.setState({showConfirmForm:""})},f.handleInstall=function(){return f.setState({showConfirmForm:"install"})},f.handleInstallEdgeCore=function(e){var t;f.handleFormChange(e),f.setState({edgeCore:e,edgeCoreConfig:null!==(t=e.configFile)&&void 0!==t?t:""}),f.handleHideConfirmForm()},f.handleEdgeCoreConfigChange=function(e){f.state.showConfirmForm||f.setState({showConfigConfirm:!0}),f.setState({edgeCoreConfig:e})},f.handleActionConfirm=function(e){var t=e[0];f.setState({edgeCore:t}),f.handleFormChange(t),f.handleHideConfirmForm()},f.handleCardActionClick=function(e){f.setState({showConfirmForm:e})},f.handleSaveEdgeCoreConfigChange=function(){var e=f.state.edgeCoreConfig,t=f.state.edgeCore,a=t.name,r=t.todoTasks,n=void 0===r?[]:r,o="".concat(a,"_modify_conf"),u=O(O({},f.state.edgeCore),{},{todoTasks:n.includes(o)?n:[].concat((0,l.default)(n),[o]),configFile:e});f.setState({edgeCore:u,showConfigConfirm:!1}),f.handleFormChange(u)},f.renderEdgeSoftItem=function(){var e=f.state,a=e.showConfigConfirm,r=e.edgeCore,n=e.edgeCoreConfig,l=void 0===n?"":n,o=r.name,u=r.todoTasks,c=void 0===u?[]:u;return(0,p.default)(r)||c.includes("edgecore_uninstall")?d.default.createElement("div",{className:S.default.container},d.default.createElement(h.default,{className:S.default.empty,icon:"iot-duotone",title:t("SOFT_INSTALLED_EMPTY",{resource:o}),desc:t("EDGE_CORE_EMPTY_DESC"),action:d.default.createElement(m.Button,{key:"install",type:"control",onClick:f.handleInstall},t("INSTALL"))})):d.default.createElement("div",{className:S.default.container},d.default.createElement(y.default,{software:r,onClick:f.handleCardActionClick}),d.default.createElement(m.Form.Group,{label:t("SOFT_SETTINGS",{container:o}),desc:t("SOFT_SETTINGS_TIPS",{container:o,filePath:"/etc/kubeedge/config/edgecore.yaml"}),checkable:!0,keepDataWhenUnCheck:!0},d.default.createElement(v.default,{mode:"yaml",className:S.default.containerConfig,value:l,onChange:f.handleEdgeCoreConfigChange}),a&&d.default.createElement(E.default,{onOk:f.handleSaveEdgeCoreConfigChange,onCancel:function(){return f.setState({showConfigConfirm:!1,edgeCoreConfig:r.configFile})},className:S.default.configConfirm})))},f.state={showConfirmForm:e.batchMode&&(0,p.default)(null===(n=e.formTemplate.edgeSofts)||void 0===n?void 0:n.find((function(e){return"edgecore"===e.name})))?"install":"",showConfigConfirm:!1,edgeCoreConfig:null===(o=e.formTemplate.edgeSofts)||void 0===o||null===(c=o.find((function(e){return"edgecore"===e.name})))||void 0===c?void 0:c.configFile,edgeCore:null!==(s=null===(i=e.formTemplate.edgeSofts)||void 0===i?void 0:i.find((function(e){return"edgecore"===e.name})))&&void 0!==s?s:{}},f}return(0,c.default)(r,[{key:"renderConfirmForm",value:function(){var e=this.props.batchMode,t=this.state.showConfirmForm;return"install"===t?d.default.createElement(g.default,{batchMode:e,versionList:this.props.versionList,onConfirm:this.handleInstallEdgeCore,onCancel:this.handleHideConfirmForm}):d.default.createElement(b.default,{type:t,containerKey:"edgecore",containers:[this.state.edgeCore],onConfirm:this.handleActionConfirm,onCancel:this.handleHideConfirmForm})}},{key:"render",value:function(){var e=this.props.batchMode,a=this.state.showConfirmForm;return d.default.createElement(d.default.Fragment,null,!e&&d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:S.default.title},t("KUBE_EDGE")),d.default.createElement("div",{className:S.default.others},this.otherEdgeSofts.map((function(e){return d.default.createElement(y.default,{key:e.name,software:e,simpleMode:!0,className:S.default.otherSoft})})))),a?this.renderConfirmForm():this.renderEdgeSoftItem())}},{key:"otherEdgeSofts",get:function(){var e;return null===(e=this.props.formTemplate.edgeSofts)||void 0===e?void 0:e.filter((function(e){return"edgecore"!==e.name}))}}]),r}(d.default.Component);a.default=T},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(11),r(16),r(4);var l=n(r(0)),o=r(186),u=r(983),c=n(r(812)),s=n(r(795)),i=n(r(3105)),f=function(e){var a=e.software,r=e.simpleMode,n=e.onClick,f=e.className,d=a.name,p=a.runningStatus,m=a.version,v="running"===p,h=[{title:l.default.createElement(s.default,{type:p,className:i.default.status,name:t("NODE_STATUS_".concat(null==p?void 0:p.toLocaleUpperCase()))}),description:t("STATUS"),show:!r&&!!p},{title:t(m),description:t("VERSIONS"),show:!!m}];return l.default.createElement(c.default.Item,{className:f,icon:(0,u.getSoftIconName)(d),title:d,status:r?p:void 0,description:t("EDGE_SOFT"),details:h.filter((function(e){return!!e.show})),operations:!r&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.Tooltip,{content:t("UNINSTALL"),placement:"bottom"},l.default.createElement(o.Button,{type:"flat",icon:"trash",onClick:function(){return n("uninstall",a)}})),l.default.createElement(o.Tooltip,{content:t("SOFT_RESTART"),placement:"bottom"},l.default.createElement(o.Button,{type:"flat",icon:"refresh",onClick:function(){return n("restart",a)},style:{marginRight:"12px"}})),l.default.createElement(o.Toggle,{checked:v,onText:t("ENABLE"),offText:t("STOP_SOFT_TEXT"),onChange:function(e){n(e?"start":"stop",a)}}))})};a.default=f},function(e,t,a){e.exports={status:"_3DrgyBAOyZTQeiaJljjqSl"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18);var o=l(r(30)),u=l(r(96)),c=n(r(0)),s=l(r(3)),i=l(r(241)),f=l(r(1)),d=r(186),p=l(r(816)),m=l(r(828)),v=l(r(3107)),h=function(e){var a,r=e.versionList,n=e.batchMode,l=e.onConfirm,f=e.onCancel,h=(0,i.default)(r,"edgecore"),E=(0,c.useState)(),y=(0,u.default)(E,2),g=y[0],b=y[1],S=(0,c.useState)(),_=(0,u.default)(S,2),O=_[0],C=_[1],T=(0,c.useMemo)((function(){var e;return null===(e=h[g])||void 0===e?void 0:e.map((function(e){return{label:e,description:t("SOFT_VERSION",{value:g}),value:e}}))}),[g]);return(0,c.useEffect)((function(){var e;T&&C(null===(e=T[0])||void 0===e?void 0:e.value)}),[T]),c.default.createElement("div",{className:(0,s.default)((0,o.default)({},v.default.install,!n))},n&&c.default.createElement(d.Alert,{type:"warning",message:t("BATCH_EDGE_SOFT_TIPS"),className:"margin-b12"}),c.default.createElement("div",{className:v.default.title},t("EDGE_SOFT")),c.default.createElement("p",{className:v.default.desc},t("EDGE_SOFT_TIPS")),(a=[{label:"KubeEdge",icon:"iot-duotone",value:"edgecore"},{label:"其他",icon:"smart-edge",value:"others",disable:!0}],c.default.createElement("div",{className:v.default.softs},a.map((function(e){var t,a=e.label,r=e.value,n=e.icon,l=e.disable,u=r===g;return c.default.createElement("div",{key:r,className:(0,s.default)(v.default.soft,(t={},(0,o.default)(t,v.default.active,u),(0,o.default)(t,v.default.unAllowable,l),t)),onClick:function(){return!l&&b(r)}},c.default.createElement(d.Icon,{name:n,size:48}),c.default.createElement("span",null,a),c.default.createElement(d.Radio,{checked:u,style:{position:"absolute",top:"10px",right:"10px"}}))})))),g&&c.default.createElement(c.default.Fragment,null,c.default.createElement(p.default,{value:O,options:T,onChange:C}),c.default.createElement(m.default,{className:v.default.confirm,onOk:function(){l({name:g,version:O,todoTasks:["".concat(g,"_install")]})},onCancel:f})))};h.propTypes={versionList:f.default.object,className:f.default.string};var E=h;a.default=E},function(e,t,a){e.exports={title:"_1Wm2x6TRRZsnFIpGO-YUXy",desc:"agyWn9ANcscl04YqFcZOX",softs:"OlaTC7zIXBb3NOY7BxN0P",soft:"_3QcuWha5eTu3-WptRe-Lgt",active:"_2M8vBOuiJGunXtceDqML07",unAllowable:"_2ECtRhCudl2T6WFHHLQI2O",install:"_3XHoGsESFBRvmsEu__xHQp"}},function(e,t,a){e.exports={contentWrapper:"_3csHfDY4l4HAxxHQJMbL7p",content:"_1YdZ4YkguK1qsnFGExGHFd",title:"_1q-f5of54lbIcJptd67TNp",icon:"_1kcfHDTPZ-HJpOCdj3pegl"}},function(e,t,a){e.exports={title:"Hyyct7wFspdJ1gLo7D2bT",container:"_1b33GOuNWOdlqn99QQ6T_7",others:"_304Xe8Txy1NTffSYPbCMk1",otherSoft:"_10tGLdb9Vwr83w8LHfflQ3",containerConfig:"_3mFdq7TjNd-j70t69paBga",empty:"_3HG0uIcXzFgQrWuGuokxeN"}},function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(3111)),d=n(r(3113));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:d.default.title},t("OTHER_SOFTS")),this.otherSofts.map((function(e){return i.default.createElement(f.default,{key:e.name,software:e,readOnly:!0})})))}},{key:"otherSofts",get:function(){return[{name:"mysql"},{name:"redis"}]}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";r(15);var n=r(20);r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(30));r(16);var o=n(r(0)),u=n(r(3)),c=n(r(1)),s=r(983),i=n(r(812)),f=n(r(3112)),d=function(e){var a=e.software,r=e.readOnly,n=a.name;return o.default.createElement(i.default.Item,{className:(0,u.default)(f.default.card,(0,l.default)({},f.default.unAllowable,r)),icon:(0,s.getSoftIconName)(n),title:n,description:t("CONTAINER_ENGINE")})};d.propTypes={container:c.default.object};var p=d;a.default=p},function(e,t,a){e.exports={card:"_1OZxuWmJ2FGnkuTc-0LdC9",unAllowable:"_1Vm_raX-Q1W6v50q_6hiDE"}},function(e,t,a){e.exports={title:"_3q-FSTMFr4LJcD0ptp6R4u"}},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(11),a(6),a(28),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var l=n(a(30)),o=n(a(96)),u=r(a(0)),c=n(a(841)),s=n(a(828));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e){var t,a,r,n=e.onSaveChange,l=e.formTemplate,i=null!==(t=null===(a=l.customCommand)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.customTaskInfo)&&void 0!==t?t:"",d=(0,u.useState)(!1),p=(0,o.default)(d,2),m=p[0],v=p[1],h=(0,u.useState)(""),E=(0,o.default)(h,2),y=E[0],g=E[1];return(0,u.useEffect)((function(){g(i)}),[i]),u.default.createElement(u.default.Fragment,null,u.default.createElement(c.default,{value:y,onChange:function(e){m||v(!0),g(e)},options:{style:{minHeight:"376px"}}}),m&&u.default.createElement(s.default,{onOk:function(){n("custom_task",f(f({},l),{},{customCommand:[{todoTasks:["custom_task"],customTaskInfo:y}]})),v(!1)},onCancel:function(){v(!1),g("")}}))};t.default=d},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(61)),o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(63)),m=r(186),v=n(r(874)),h=n(r(3116)),E=n(r(1711)),y=n(r(3118));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=S(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).handleInstall=function(){return t.setState({showConfirmForm:"install"})},t.handleFormChange=function(e){var a=t.props,r=a.name;(0,a.onSaveChange)(r,b(b({},a.formTemplate),{},{containerEngineSofts:e}))},t.handleCardActionClick=function(e,a,r){var n=a.name;if("modify_conf"===e){var o=t.state.containerEngines.map((function(t){var a=t.name,o=t.todoTasks,u=void 0===o?[]:o,c="".concat(a,"_").concat(e);return a!==n||u.includes(c)?t:b(b({},t),{},{todoTasks:[].concat((0,l.default)(u),[c]),configFile:r})}));return t.setState({containerEngines:o}),void t.handleFormChange(o)}t.setState({selectedContainerKey:n},(function(){t.setState({showConfirmForm:e})}))},t.handleAddContainer=function(e){var a=t.state.containerEngines,r=[].concat((0,l.default)(a),[e]);t.handleFormChange(r),t.setState({containerEngines:r}),t.handleHideConfirmForm()},t.handleActionConfirm=function(e){t.setState({containerEngines:e}),t.handleFormChange(e),t.handleHideConfirmForm()},t.handleHideConfirmForm=function(){return t.setState({showConfirmForm:"",selectedContainer:void 0})},t.state={showConfirmForm:e.batchMode&&(0,p.default)(e.formTemplate.containerEngineSofts)?"install":"",selectedContainerKey:void 0,containerEngines:e.formTemplate.containerEngineSofts},t}return(0,c.default)(r,[{key:"renderConfirmForm",value:function(){var e=this.state.showConfirmForm,t=this.props,a=t.batchMode,r=t.versionList;return"install"===e?d.default.createElement(y.default,{batchMode:a,versionList:r,onConfirm:this.handleAddContainer,onCancel:this.handleHideConfirmForm}):d.default.createElement(E.default,{type:e,containerKey:this.state.selectedContainerKey,containers:this.state.containerEngines,onConfirm:this.handleActionConfirm,onCancel:this.handleHideConfirmForm})}},{key:"renderContainerItem",value:function(){var e=this,a=this.state.containerEngines.filter((function(e){var t=e.name,a=e.todoTasks;return!(void 0===a?[]:a).includes("".concat(t,"_uninstall"))}));return d.default.createElement(d.default.Fragment,null,(0,p.default)(a)?d.default.createElement(v.default,{icon:"turn-dot-duotone",title:t("SOFT_INSTALLED_EMPTY",{resource:t("CONTAINER_ENGINE")}),desc:t("CONTAINER_ENGINE_EMPTY_DESC"),action:d.default.createElement(m.Button,{key:"install",type:"control",onClick:this.handleInstall},t("INSTALL"))}):d.default.createElement(d.default.Fragment,null,a.map((function(t){return d.default.createElement(h.default,{key:t.name,container:t,onClick:e.handleCardActionClick})}))))}},{key:"render",value:function(){var e=this.state.showConfirmForm;return d.default.createElement(d.default.Fragment,null,e?this.renderConfirmForm():this.renderContainerItem())}}]),r}(d.default.Component);a.default=_},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(11),r(16),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(96));r(11),r(16),r(4);var u=n(r(0)),c=l(r(1)),s=r(186),i=r(983),f=l(r(828)),d=l(r(812)),p=l(r(795)),m=l(r(841)),v=l(r(3117)),h=function(e){var a=e.container,r=e.onClick,n=a.name,l=a.runningStatus,c=a.version,h=a.configFile,E="running"===l,y=(0,u.useState)(),g=(0,o.default)(y,2),b=g[0],S=g[1],_=(0,u.useState)(!1),O=(0,o.default)(_,2),C=O[0],T=O[1],R=[{title:u.default.createElement(p.default,{type:l,className:v.default.status,name:t("NODE_STATUS_".concat(null==l?void 0:l.toLocaleUpperCase()))}),description:t("STATUS"),show:!!l},{title:t(c),description:t("VERSIONS"),show:!!c}],D=function(e,t){r(e,a,t)};return(0,u.useEffect)((function(){S(h)}),[h]),u.default.createElement("div",{className:v.default.container},u.default.createElement(d.default.Item,{icon:(0,i.getSoftIconName)(n),title:n,description:t("CONTAINER_ENGINE"),details:R.filter((function(e){return!!e.show})),operations:u.default.createElement(u.default.Fragment,null,u.default.createElement(s.Tooltip,{content:t("UNINSTALL"),placement:"bottom"},u.default.createElement(s.Button,{type:"flat",icon:"trash",onClick:function(){return D("uninstall")}})),u.default.createElement(s.Tooltip,{content:t("SOFT_RESTART"),placement:"bottom"},u.default.createElement(s.Button,{type:"flat",icon:"refresh",onClick:function(){return D("restart")},style:{marginRight:"12px"}})),u.default.createElement(s.Toggle,{checked:E,onText:t("ENABLE"),offText:t("STOP_SOFT_TEXT"),onChange:function(e){D(e?"start":"stop")}}))}),u.default.createElement(s.Form.Group,{label:t("SOFT_SETTINGS",{container:n}),desc:t("SOFT_SETTINGS_TIPS",{container:n,filePath:"containerd"===n?"/etc/containerd/config.toml":"/etc/docker/daemon.json"}),checkable:!0,keepDataWhenUnCheck:!0},u.default.createElement(m.default,{mode:function(e){switch(e){case"docker":return"json";case"containerd":return"toml";default:return"yaml"}}(n),className:v.default.containerConfig,value:null!=b?b:"",onChange:function(e){C||T(!0),S(e)}}),C&&u.default.createElement(f.default,{onOk:function(){r("modify_conf",a,b),T(!1)},onCancel:function(){T(!1),S(h)},className:v.default.configConfirm})))};h.propTypes={container:c.default.object,onClick:c.default.func};var E=h;a.default=E},function(e,t,a){e.exports={container:"_3u6O2lgklHCG-k_ftsYECu",status:"_51J4UoSKyTQZ2mVnCDLaQ",containerConfig:"PKEq2P8pgSMhUX3W_ZUVg",configConfirm:"IeKaP05h3L1JsWM_wEhiW"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(18),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(18),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=l(r(96)),u=l(r(30)),c=n(r(0)),s=l(r(3)),i=l(r(26)),f=l(r(189)),d=l(r(1)),p=r(186),m=l(r(816)),v=l(r(828)),h=l(r(3119));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=function(e){var a,r=e.versionList,n=e.batchMode,l=e.onConfirm,d=e.onCancel,E=(0,f.default)(r,"nvidiaDocker2"),g=(0,i.default)(r,"nvidiaDocker2"),b=y(y({},E),{},{"nvidia-docker2":g}),S=(0,c.useState)(),_=(0,o.default)(S,2),O=_[0],C=_[1],T=(0,c.useState)(),R=(0,o.default)(T,2),D=R[0],N=R[1],k=(0,c.useMemo)((function(){var e;return null===(e=b[O])||void 0===e?void 0:e.map((function(e){return{label:e,description:t("SOFT_VERSION",{value:O}),value:e}}))}),[O]);return(0,c.useEffect)((function(){var e;k&&N(null===(e=k[0])||void 0===e?void 0:e.value)}),[k]),c.default.createElement("div",null,n&&c.default.createElement(p.Alert,{type:"warning",message:t("BATCH_CONTAINER_SOFT_TIPS"),className:"margin-b12"}),c.default.createElement("div",{className:h.default.title},t("CONTAINER_ENGINE")),c.default.createElement("p",{className:h.default.desc},t("CONTAINER_ENGINE_TIPS")),(a=[{label:"Docker",icon:"docker",value:"docker",disable:!1},{label:"Containerd",icon:"container",value:"containerd",disable:!0},{label:"Nvidia-Docker2",icon:"docker",value:"nvidia-docker2",disable:!0}],c.default.createElement("div",{className:h.default.softs},a.map((function(e){var t,a=e.label,r=e.value,n=e.icon,l=e.disable,o=r===O;return c.default.createElement("div",{key:r,className:(0,s.default)(h.default.soft,(t={},(0,u.default)(t,h.default.active,o),(0,u.default)(t,h.default.unAllowable,l),t)),onClick:function(){return!l&&C(r)}},c.default.createElement(p.Icon,{name:n,size:48}),c.default.createElement("span",null,a),c.default.createElement(p.Radio,{checked:o,style:{position:"absolute",top:"10px",right:"10px"}}))})))),O&&c.default.createElement(c.default.Fragment,null,c.default.createElement(m.default,{value:D,options:k,onChange:N}),c.default.createElement(v.default,{className:h.default.confirm,onOk:function(){l({name:O,version:D,todoTasks:["".concat(O,"_install")]})},onCancel:d})))};g.propTypes={versionList:d.default.object};var b=g;a.default=b},function(e,t,a){e.exports={title:"_3cXd5e92V2wN6TQkLuwIcc",desc:"qZdfdDC_bEzYqeUGkOxaq",softs:"_2LX1FjKxXIv4-2eS7skwpV",soft:"_30-3cPPeVzY2sN6btISogx",active:"_1pcyRTinZm3XuaZc8Vj_TU",unAllowable:"_13tmT0Hgoycr2XLklxNhZs"}},function(e,t,a){"use strict";var r=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(11),a(6),a(28),a(34),a(15),a(9),a(13),a(10),a(4),a(7);var n=r(a(30)),l=r(a(58)),o=r(a(787)),u=r(a(3121));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var s={"notification.user.setting":{on:function(e){var t=e.store,a=(e.success,(0,l.default)(e,["store","success"]));o.default.open(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({onOk:null,modal:u.default,store:t},a))}}};t.default=s},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(1)),h=n(r(3)),E=n(r(26)),y=n(r(198)),g=r(186),b=n(r(787)),S=n(r(828)),_=r(52),O=n(r(3122)),C=n(r(1013));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=function(e){(0,f.default)(r,e);var a=D(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={activeTab:(0,E.default)(e.tabs,"[0].name"),updatedTabs:{},subRoute:{}},e.registerUpdate=function(t,a){var r=e.state.updatedTabs;(0,y.default)(r,t)||e.setState({updatedTabs:R(R({},r),{},(0,c.default)({},t,a))})},e.handleChangeTab=function(t){var a=t.currentTarget.dataset.name;a&&e.setState({activeTab:a,subRoute:{}})},e.handleSaveChanges=function(t){return function(){var a=e["".concat(t,"FormRef")].current,r=e["".concat(t,"Ref")].current;a&&a.validate((0,u.default)(o.default.mark((function n(){var l;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=a.getData(),n.next=3,r.handleSubmit(l);case 3:e.cancelUpdate(t),r.fetchData();case 5:case"end":return n.stop()}}),n)}))))}},e.handleDiscardChanges=function(t){return function(){var a=e["".concat(t,"Ref")].current;a&&(a.resetData(),e.cancelUpdate(t))}},e.cancelUpdate=function(t){var a=R({},e.state.updatedTabs);delete a[t],e.setState({updatedTabs:a})},e.renderForm=function(t){var a=t.name,r=t.component,n=e.state.activeTab,l=r;if(!l)return null;var o="".concat(a,"Ref");e[o]||(e[o]=m.default.createRef());var u="".concat(a,"FormRef");return e[u]||(e[u]=m.default.createRef()),m.default.createElement("div",{key:a,className:(0,h.default)(C.default.formContainer,(0,c.default)({},C.default.active,a===n))},m.default.createElement(l,{ref:e[o],formRef:e[u]}))},e}return(0,i.default)(r,[{key:"getChildContext",value:function(){return{registerUpdate:this.registerUpdate}}},{key:"renderTabs",value:function(){var e=this;return m.default.createElement("ul",{className:C.default.tabs},this.tabs.map((function(a){var r=a.icon,n=void 0===r?"appcenter":r,l=a.title,o=a.name,u=e.state,s=u.activeTab,i=u.updatedTabs,f=o===s,d=f?"light":"dark";return m.default.createElement("li",{onClick:e.handleChangeTab,key:l,"data-name":o,className:(0,h.default)((0,c.default)({},C.default.active,f))},m.default.createElement(g.Tooltip,{placement:"bottomLeft",content:(0,y.default)(i,o)?e.updateTip:""},m.default.createElement("span",{className:C.default.tooltipTrigger},m.default.createElement(g.Icon,{name:n,size:20,type:d}),(0,y.default)(i,o)&&m.default.createElement("span",{className:C.default.tipIcon}))),m.default.createElement("p",null,t(l)))})))}},{key:"renderFormComponents",value:function(){var e=this.state,t=e.activeTab,a=e.updatedTabs;return m.default.createElement("div",{className:C.default.form},m.default.createElement("div",{className:(0,h.default)(C.default.wrapper,(0,c.default)({},C.default.wrapperActive,(0,y.default)(a,t)))},this.tabs.map(this.renderForm)),m.default.createElement(S.default,{className:(0,h.default)(C.default.confirm,(0,c.default)({},C.default.confirmActive,(0,y.default)(a,t))),onOk:this.handleSaveChanges(t),onCancel:this.handleDiscardChanges(t)}))}},{key:"renderLicenseTip",value:function(){return m.default.createElement("div",{className:C.default.licenseTip},m.default.createElement("div",{className:C.default.wrapper},m.default.createElement("img",{src:"/assets/notification-license-icon.svg",alt:""}),m.default.createElement("div",{className:C.default.content},m.default.createElement("div",{className:C.default.title},t("TENANT_NOTIFICATION")),m.default.createElement("p",null,t("TENANT_NOTIFICATION_DESC")),m.default.createElement("p",{className:C.default.tip},this.isAdmin?(0,_.htmlLinkControl)(t.html("TENANT_NOTIFICATION_LICENSE_ACTIVATION_TIP")):t("UNADMIN_TENANT_NOTIFICATION_LICENSE_ACTIVATION_TIP")))))}},{key:"renderContent",value:function(){return m.default.createElement("div",{className:C.default.content},m.default.createElement("div",{className:C.default.container},this.renderTabs(),this.renderFormComponents()))}},{key:"render",value:function(){var e=Object.assign({},this.props);return m.default.createElement(b.default,(0,l.default)({},e,{bodyClassName:C.default.body,title:t("NOTIFICATION_SETTINGS"),icon:"loudspeaker",width:1162,cancelText:t("CLOSE")}),this.renderContent())}},{key:"isAdmin",get:function(){return globals.app.isPlatformAdmin}},{key:"updateTip",get:function(){return m.default.createElement("div",{className:C.default.tip},m.default.createElement("h6",null,t("CONTENT_NOT_SAVED_TIPS")),m.default.createElement("p",null,t("SAVE_EDIT_HINTS")))}},{key:"tabs",get:function(){return O.default}}]),r}(m.default.Component);a.default=N,N.propTypes={visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func},N.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},N.childContextTypes={registerUpdate:v.default.func}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3123)),l=r(a(3127)),o=r(a(3129)),u=r(a(3131)),c=r(a(3133)),s=r(a(3135)),i=[{icon:"email",name:"mail",title:"EMAIL",component:n.default},{icon:"feishu",name:"feishu",title:"FEISHU",component:s.default},{icon:"dingtalk",name:"dingtalk",title:"DINGTALK",component:l.default},{icon:"wecom",name:"wecom",title:"WECOM",component:o.default},{icon:"slack",name:"slack",title:"SLACK",component:u.default},{icon:"webhook",name:"webhook",title:"WEBHOOK",component:c.default}];t.default=i},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var l=n(r(43));r(41);var o,u,c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(1)),E=r(14),y=r(239),g=n(r(26)),b=n(r(242)),S=n(r(74)),_=n(r(135)),O=n(r(63)),C=n(r(240)),T=n(r(789)),R=n(r(1712)),D=n(r(435)),N=n(r(888)),k=n(r(1013));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,y.observer)((c=u=function(e){(0,d.default)(r,e);var a=I(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).receiverStore=new N.default,e.state={formData:{},isLoading:!1,noConfig:!0},e.formTemplate={receiver:D.default.notificationreceivers({name:e.receiverName,type:e.type})},e.fetchData=function(){e.setState({isLoading:!0}),e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}).then((function(){var t=(0,E.toJS)(e.receiverStore.list.data).find((function(t){return(0,g.default)(t,"name")===e.receiverName}));(0,O.default)(t)||(0,S.default)(e.formTemplate,"receiver",(0,g.default)(t,"_originData",{})),e.setState({formData:(0,_.default)(e.formTemplate),isLoading:!1,noConfig:(0,O.default)(t)})}))},e.resetData=function(){e.setState({formData:(0,_.default)(e.formTemplate)})},e.getResource=(0,s.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.receiverStore.getResource({name:e.receiverName,user:globals.user.username});case 2:return a=t.sent,t.abrupt("return",{isExitReceiver:a});case 4:case"end":return t.stop()}}),t)}))),e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getVerifyFormTemplate=function(e){var t=(0,_.default)(e),a=t.config,r=t.receiver,n=t.secret;return(0,b.default)(r,"spec.email.alertSelector"),{config:a,receiver:r,secret:n}},e.handleSubmit=function(){var a=(0,s.default)(l.default.mark((function a(r){var n,o,u,c;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=(0,_.default)(r),o=n.receiver,(0,b.default)(o,"metadata.resourceVersion"),a.next=4,e.getResource();case 4:if(u=a.sent,!u.isExitReceiver){a.next=12;break}return a.next=9,e.receiverStore.update({name:e.receiverName,user:globals.user.username},o);case 9:c=t("UPDATE_SUCCESSFUL"),a.next=16;break;case 12:return(0,S.default)(o,"spec.mail.enabled",!0),a.next=15,e.receiverStore.create(o,{name:e.receiverName,user:globals.user.username});case 15:c=t("CREATE_SUCCESSFUL");case 16:C.default.success({content:c,duration:1e3});case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isValidating,n=t.isLoading,l=t.noConfig;return v.default.createElement(T.default,{loading:n,className:k.default.panel},v.default.createElement("div",{className:k.default.wrapper},v.default.createElement(R.default,{noConfig:l,formRef:e,data:a,isValidating:r,hideFooter:!0,user:globals.user.username,onChange:this.handleFormChange,getVerifyFormTemplate:this.getVerifyFormTemplate})))}},{key:"name",get:function(){return"mail"}},{key:"type",get:function(){return"email"}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-email-receiver")}}]),r}(v.default.Component),u.contextTypes={registerUpdate:h.default.func},o=c))||o;a.default=P},,,,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(31),r(6),r(29),r(16),r(10),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(31),r(6),r(29),r(42),r(16),r(10),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var l=n(r(96)),o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=r(14),y=r(239),g=n(r(1)),b=n(r(60)),S=n(r(63)),_=n(r(26)),O=n(r(74)),C=n(r(242)),T=n(r(135)),R=n(r(240)),D=n(r(789)),N=n(r(1715)),k=n(r(888)),I=n(r(919)),P=r(440),A=n(r(435)),w=n(r(1013));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=(0,y.observer)((s=c=function(e){(0,p.default)(r,e);var a=M(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new k.default,e.secretStore=new I.default,e.state={formData:{},noConfig:!0},e.formTemplate={receiver:A.default.notificationreceivers({name:e.receiverName,type:e.type}),secret:e.secretFormTemplate},e.fetchData=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Promise.all([e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}),e.secretStore.fetchList({name:e.secretName,user:globals.user.username})]).then((function(){var t=(0,E.toJS)(e.receiverStore.list.data).find((function(t){return(0,_.default)(t,"name")===e.receiverName})),a=(0,E.toJS)(e.secretStore.list.data).find((function(t){return(0,_.default)(t,"name")===e.secretName}));(0,S.default)(t)||(0,O.default)(e.formTemplate,"receiver",(0,_.default)(t,"_originData",{})),(0,S.default)(a)||(0,O.default)(e.formTemplate,"secret",a),e.setState({formData:(0,T.default)(e.formTemplate),isLoading:!1,noConfig:(0,S.default)(t)})}));case 3:case"end":return t.stop()}}),t)}))),e.resetData=function(){e.setState({formData:(0,T.default)(e.formTemplate)})},e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getVerifyFormTemplate=function(e){var t={},a=(0,T.default)(e),r=a.receiver,n=a.secret,l=(0,_.default)(r,"spec.dingtalk.conversation.chatids"),o=(0,_.default)(r,"spec.dingtalk.chatbot.keywords"),u=(0,_.default)(n,"data",{}),c=u.webhook,s=u.chatbotsecret;return(0,S.default)(l)||(0,O.default)(t,"receiver.spec.dingtalk.conversation.chatids",l),c&&(0,O.default)(t,"receiver.spec.dingtalk.chatbot.webhook.value",c),s&&(0,O.default)(t,"receiver.spec.dingtalk.chatbot.secret.value",s),(0,S.default)(o)||(0,O.default)(t,"receiver.spec.dingtalk.chatbot.keywords",o),t},e.handleVerify=function(e){var a=e.receiver,r=e.secret,n=(0,_.default)(a,"spec.dingtalk.chatbot.keywords"),l=(0,_.default)(a,"spec.dingtalk.conversation.chatids"),o=(0,_.default)(r,"data",{}),u=o.webhook,c=o.chatbotsecret;if([l,u,c,n].every((function(e){return(0,b.default)(e)?(0,S.default)(e):!e})))return R.default.error({content:t("DINGTALK_SETTING_TIP")}),!1;if(u||c||!(0,S.default)(n)){if(!u)return R.default.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:"Webhook URL"})}),!1;if(!c&&(0,S.default)(n))return R.default.error({content:t("DINGTALK_CHATBOT_SECURITY_TIP")}),!1}return!0},e.getResource=(0,i.default)(o.default.mark((function t(){var a,r,n,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.receiverStore.getResource({name:e.receiverName,user:globals.user.username}),e.secretStore.getResource({name:e.secretName,user:globals.user.username})]);case 2:return a=t.sent,r=(0,l.default)(a,2),n=r[0],u=r[1],t.abrupt("return",{isExitReceiver:n,isExitSecret:u});case 7:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var a=(0,i.default)(o.default.mark((function a(r){var n,l,u,c,s,i,f,d;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,T.default)(r),l=n.receiver,u=n.secret,e.handleVerify(r)){a.next=3;break}return a.abrupt("return");case 3:return c=(0,_.default)(u,"data",{}),Object.keys(c).forEach((function(e){c[e]=(0,P.safeBtoa)(c[e])})),(0,O.default)(l,"spec.dingtalk.chatbot.webhook.valueFrom.secretKeyRef.key","webhook"),(0,O.default)(l,"spec.dingtalk.chatbot.webhook.valueFrom.secretKeyRef.name",e.secretName),(0,O.default)(l,"spec.dingtalk.chatbot.secret.valueFrom.secretKeyRef.key","chatbotsecret"),(0,O.default)(l,"spec.dingtalk.chatbot.secret.valueFrom.secretKeyRef.name",e.secretName),c.webhook||(0,C.default)(l,"spec.dingtalk.chatbot.webhook"),c.chatbotsecret||(0,C.default)(l,"spec.dingtalk.chatbot.secret"),(0,S.default)((0,_.default)(l,"spec.dingtalk.conversation.chatids"))&&(0,C.default)(l,"spec.dingtalk.conversation"),(0,S.default)((0,_.default)(l,"spec.dingtalk.chatbot.keywords"))&&(0,C.default)(l,"spec.dingtalk.chatbot.keywords"),(0,S.default)((0,_.default)(l,"spec.dingtalk.chatbot"))&&(0,C.default)(l,"spec.dingtalk.chatbot"),a.next=16,e.getResource();case 16:if(s=a.sent,i=s.isExitReceiver,f=s.isExitSecret,!i){a.next=25;break}return a.next=22,e.receiverStore.update({name:e.receiverName,user:globals.user.username},l);case 22:d=t("UPDATE_SUCCESSFUL"),a.next=29;break;case 25:return(0,O.default)(l,"spec.dingtalk.enabled",!0),a.next=28,e.receiverStore.create(l,{name:e.receiverName,user:globals.user.username});case 28:d=t("CREATE_SUCCESSFUL");case 29:if(!f){a.next=34;break}return a.next=32,e.secretStore.update({name:e.secretName,user:globals.user.username},(0,O.default)(e.secretTemplate,"data",c));case 32:a.next=36;break;case 34:return a.next=36,e.secretStore.create((0,O.default)(e.secretTemplate,"data",c),{name:e.secretName,user:globals.user.username});case 36:R.default.success({content:d,duration:1e3});case 37:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isLoading,n=t.noConfig;return h.default.createElement(D.default,{loading:r,className:w.default.panel},h.default.createElement(N.default,{formRef:e,noConfig:n,wrapperClassName:w.default.wrapper,data:a,onChange:this.handleFormChange,onVerify:this.handleVerify,getVerifyFormTemplate:this.getVerifyFormTemplate,hideFooter:!0,user:globals.user.username}))}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-dingtalk-receiver")}},{key:"secretName",get:function(){return"".concat(globals.user.username,"-dingtalk-config-secret")}},{key:"name",get:function(){return"dingtalk"}},{key:"type",get:function(){return"dingtalk"}},{key:"secretTemplate",get:function(){return A.default.globalsecret({name:this.secretName})}}]),r}(h.default.Component),c.contextTypes={registerUpdate:g.default.func},u=s))||u;a.default=L},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(6),r(29),r(16),r(10),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(6),r(29),r(42),r(16),r(10),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var l=n(r(96)),o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=n(r(1)),y=r(14),g=r(239),b=n(r(74)),S=n(r(26)),_=n(r(242)),O=n(r(135)),C=n(r(63)),T=r(440),R=n(r(240)),D=n(r(789)),N=n(r(1716)),k=n(r(435)),I=n(r(888)),P=n(r(919)),A=n(r(1013));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var M=(0,g.observer)((s=c=function(e){(0,p.default)(r,e);var a=w(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new I.default,e.secretStore=new P.default,e.state={formData:{},isLoading:!1,noConfig:!0},e.formTemplate={receiver:k.default.notificationreceivers({name:e.receiverName,type:e.type}),secret:e.secretFormTemplate},e.fetchData=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Promise.all([e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}),e.secretStore.fetchList({name:e.secretName,user:globals.user.username})]).then((function(){var t=(0,y.toJS)(e.receiverStore.list.data).find((function(t){return(0,S.default)(t,"name")===e.receiverName})),a=(0,y.toJS)(e.secretStore.list.data).find((function(t){return(0,S.default)(t,"name")===e.secretName}));(0,C.default)(t)||(0,b.default)(e.formTemplate,"receiver",(0,S.default)(t,"_originData",{})),(0,C.default)(a)||(0,b.default)(e.formTemplate,"secret",a),e.setState({formData:(0,O.default)(e.formTemplate),isLoading:!1,noConfig:(0,C.default)(t)})}));case 3:case"end":return t.stop()}}),t)}))),e.resetData=function(){e.setState({formData:(0,O.default)(e.formTemplate)})},e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getVerifyFormTemplate=function(e){var t=(0,O.default)(e),a=t.config,r=t.receiver,n=t.secret,l=(0,S.default)(n,"data",{}).webhook;return l?((0,b.default)(r,"spec.wechat.chatbot.webhook.value",l),(0,_.default)(r,"spec.wechat.toUser"),(0,_.default)(a,"spec.wechat.wechatApiAgentId"),(0,_.default)(a,"spec.wechat.wechatApiCorpId"),(0,_.default)(a,"spec.wechat.wechatApiSecret")):(0,b.default)(a,"spec.wechat.wechatApiSecret.value",(0,S.default)(n,"data.appsecret")),(0,b.default)(a,"spec.wechat.wechatApiSecret.value",(0,S.default)(n,"data.appsecret")),(0,_.default)(r,"spec.wechat.alertSelector"),(0,_.default)(a,"spec.wechat.wechatApiSecret.valueFrom"),{config:a,receiver:r,secret:n}},e.getResource=(0,i.default)(o.default.mark((function t(){var a,r,n,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.receiverStore.getResource({name:e.receiverName,user:globals.user.username}),e.secretStore.getResource({name:e.secretName,user:globals.user.username})]);case 2:return a=t.sent,r=(0,l.default)(a,2),n=r[0],u=r[1],t.abrupt("return",{isExitReceiver:n,isExitSecret:u});case 7:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var a=(0,i.default)(o.default.mark((function a(r){var n,l,u,c,s,i,f,d,p,m;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=(0,O.default)(r),l=n.receiver,u=n.secret,c=(0,S.default)(u,"data",{}),s=c.webhook,i=(0,S.default)(u,"data",{}),Object.keys(i).forEach((function(e){i[e]=(0,T.safeBtoa)(i[e])})),s&&(0,b.default)(l,"spec.wechat.chatbot.webhook.value",s),a.next=7,e.getResource();case 7:if(f=a.sent,d=f.isExitReceiver,p=f.isExitSecret,!d){a.next=16;break}return a.next=13,e.receiverStore.update({name:e.receiverName,user:globals.user.username},l);case 13:m=t("UPDATE_SUCCESSFUL"),a.next=20;break;case 16:return(0,b.default)(l,"spec.wechat.enabled",!0),a.next=19,e.receiverStore.create(l,{name:e.receiverName,user:globals.user.username});case 19:m=t("CREATE_SUCCESSFUL");case 20:if(!p){a.next=25;break}return a.next=23,e.secretStore.update({name:e.secretName,user:globals.user.username},(0,b.default)(e.secretTemplate,"data",i));case 23:a.next=27;break;case 25:return a.next=27,e.secretStore.create((0,b.default)(e.secretTemplate,"data",i),{name:e.secretName,user:globals.user.username});case 27:R.default.success({content:m,duration:1e3});case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isLoading,n=t.noConfig;return h.default.createElement(D.default,{loading:r,className:A.default.panel},h.default.createElement(N.default,{noConfig:n,wrapperClassName:A.default.wrapper,formRef:e,data:a,hideFooter:!0,user:globals.user.username,onChange:this.handleFormChange,getVerifyFormTemplate:this.getVerifyFormTemplate}))}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-wechat-receiver")}},{key:"secretName",get:function(){return"".concat(globals.user.username,"-wechat-config-secret")}},{key:"secretTemplate",get:function(){return k.default.globalsecret({name:this.secretName})}},{key:"name",get:function(){return"wecom"}},{key:"type",get:function(){return"wechat"}}]),r}(h.default.Component),c.contextTypes={registerUpdate:E.default.func},u=s))||u;a.default=M},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var l=n(r(43));r(41);var o,u,c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(1)),E=r(14),y=r(239),g=n(r(74)),b=n(r(26)),S=n(r(242)),_=n(r(135)),O=n(r(63)),C=n(r(240)),T=n(r(789)),R=n(r(1718)),D=n(r(435)),N=n(r(888)),k=n(r(1013));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var P=(0,y.observer)((c=u=function(e){(0,d.default)(r,e);var a=I(r);function r(){var e;(0,i.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).receiverStore=new N.default,e.state={formData:{},isLoading:!1,noConfig:!0},e.formTemplate={receiver:D.default.notificationreceivers({name:e.receiverName,type:e.type})},e.fetchData=function(){e.setState({isLoading:!0}),e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}).then((function(){var t=(0,E.toJS)(e.receiverStore.list.data).find((function(t){return(0,b.default)(t,"name")===e.receiverName}));(0,O.default)(t)||(0,g.default)(e.formTemplate,"receiver",(0,b.default)(t,"_originData",{})),e.setState({formData:(0,_.default)(e.formTemplate),isLoading:!1,noConfig:(0,O.default)(t)})}))},e.resetData=function(){e.setState({formData:(0,_.default)(e.formTemplate)})},e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getVerifyFormTemplate=function(e){var t=(0,_.default)(e),a=t.config,r=t.receiver,n=t.secret;return(0,g.default)(a,"spec.slack.slackTokenSecret.value",(0,b.default)(n,"data.token")),(0,S.default)(r,"spec.slack.alertSelector"),(0,S.default)(a,"spec.slack.slackTokenSecret.valueFrom"),{config:a,receiver:r,secret:n}},e.getResource=(0,s.default)(l.default.mark((function t(){var a;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.receiverStore.getResource({name:e.receiverName,user:globals.user.username});case 2:return a=t.sent,t.abrupt("return",{isExitReceiver:a});case 4:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var a=(0,s.default)(l.default.mark((function a(r){var n,o,u,c;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=(0,_.default)(r),o=n.receiver,a.next=3,e.getResource();case 3:if(u=a.sent,!u.isExitReceiver){a.next=11;break}return a.next=8,e.receiverStore.update({name:e.receiverName,user:globals.user.username},o);case 8:c=t("UPDATE_SUCCESSFUL"),a.next=15;break;case 11:return(0,g.default)(o,"spec.slack.enabled",!0),a.next=14,e.receiverStore.create(o,{name:e.receiverName,user:globals.user.username});case 14:c=t("CREATE_SUCCESSFUL");case 15:C.default.success({content:c,duration:1e3});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isLoading,n=t.noConfig;return v.default.createElement(T.default,{loading:r,className:k.default.panel},v.default.createElement(R.default,{noConfig:n,wrapperClassName:k.default.wrapper,formRef:e,data:a,hideFooter:!0,user:globals.user.username,onChange:this.handleFormChange,getVerifyFormTemplate:this.getVerifyFormTemplate}))}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-slack-receiver")}},{key:"name",get:function(){return"slack"}},{key:"type",get:function(){return"slack"}}]),r}(v.default.Component),u.contextTypes={registerUpdate:h.default.func},o=c))||o;a.default=P},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(31),r(29),r(16),r(4),r(22),r(23),r(17),r(38),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(29),r(42),r(16),r(4),r(22),r(23),r(57),r(17),r(38),r(32);var l=n(r(96)),o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=r(14),y=r(239),g=n(r(1)),b=n(r(63)),S=n(r(26)),_=n(r(74)),O=n(r(242)),C=n(r(135)),T=n(r(240)),R=n(r(789)),D=n(r(1719)),N=n(r(888)),k=n(r(919)),I=r(440),P=n(r(435)),A=n(r(1013));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var M=(0,y.observer)((s=c=function(e){(0,p.default)(r,e);var a=w(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new N.default,e.secretStore=new k.default,e.state={formData:{},isLoading:!1,noConfig:!0},e.formTemplate={receiver:e.receiverFormTemplate,secret:e.secretFormTemplate},e.fetchData=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Promise.all([e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}),e.secretStore.fetchList({name:e.secretName,user:globals.user.username})]).then((function(){var t=(0,E.toJS)(e.receiverStore.list.data).find((function(t){return(0,S.default)(t,"name")===e.receiverName})),a=(0,E.toJS)(e.secretStore.list.data).find((function(t){return(0,S.default)(t,"name")===e.secretName}));(0,b.default)(t)||(0,_.default)(e.formTemplate,"receiver",(0,S.default)(t,"_originData",{})),(0,b.default)(a)||(0,_.default)(e.formTemplate,"secret",a),e.setState({formData:(0,C.default)(e.formTemplate),isLoading:!1,noConfig:(0,b.default)(t)})}));case 3:case"end":return t.stop()}}),t)}))),e.resetData=function(){e.setState({formData:(0,C.default)(e.formTemplate)})},e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getResource=(0,i.default)(o.default.mark((function t(){var a,r,n,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.receiverStore.getResource({name:e.receiverName,user:globals.user.username}),e.secretStore.getResource({name:e.secretName,user:globals.user.username})]);case 2:return a=t.sent,r=(0,l.default)(a,2),n=r[0],u=r[1],t.abrupt("return",{isExitReceiver:n,isExitSecret:u});case 7:case"end":return t.stop()}}),t)}))),e.getVerifyFormTemplate=function(e){var t=(0,C.default)(e),a=t.receiver,r=t.secret,n=(0,S.default)(a,'metadata.annotations["kubesphere.io/verify-type"]'),l=(0,S.default)(a,"spec.webhook.httpConfig.basicAuth.username"),o=(0,S.default)(r,"data",{}),u=o.password,c=o.token;return(0,O.default)(a,"spec.webhook.httpConfig.bearerToken"),(0,O.default)(a,"spec.webhook.httpConfig.basicAuth"),"basic"===n&&u&&((0,_.default)(a,"spec.webhook.httpConfig.basicAuth.password.value",u),(0,_.default)(a,"spec.webhook.httpConfig.basicAuth.username",l)),"token"===n&&c&&(0,_.default)(a,"spec.webhook.httpConfig.bearerToken.value",c),(0,O.default)(a,"spec.webhook.alertSelector"),{receiver:a}},e.handleSubmit=function(){var a=(0,i.default)(o.default.mark((function a(r){var n,l,u,c,s,i,f,d,p,m;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=(0,C.default)(r),l=n.receiver,u=n.secret,c=e.secretTemplate,s=(0,S.default)(l,'metadata.annotations["kubesphere.io/verify-type"]'),i=(0,S.default)(l,"spec.webhook.httpConfig.basicAuth.username"),(0,O.default)(l,"spec.webhook.httpConfig.bearerToken"),(0,O.default)(l,"spec.webhook.httpConfig.basicAuth"),"basic"===s&&((0,_.default)(c,"data.password",(0,I.safeBtoa)((0,S.default)(u,"data.password"))),(0,_.default)(l,"spec.webhook.httpConfig.basicAuth.username",i),(0,_.default)(l,"spec.webhook.httpConfig.basicAuth.password.valueFrom.secretKeyRef.key","password"),(0,_.default)(l,"spec.webhook.httpConfig.basicAuth.password.valueFrom.secretKeyRef.name",e.secretName)),"token"===s&&((0,_.default)(c,"data.token",(0,I.safeBtoa)((0,S.default)(u,"data.token"))),(0,_.default)(l,"spec.webhook.httpConfig.bearerToken.valueFrom.secretKeyRef.key","token"),(0,_.default)(l,"spec.webhook.httpConfig.bearerToken.valueFrom.secretKeyRef.name",e.secretName)),a.next=10,e.getResource();case 10:if(d=a.sent,p=d.isExitReceiver,m=d.isExitSecret,!p){a.next=19;break}return a.next=16,e.receiverStore.update({name:e.receiverName,user:globals.user.username},l);case 16:f=t("UPDATE_SUCCESSFUL"),a.next=22;break;case 19:(0,_.default)(l,"spec.webhook.enabled",!0),e.receiverStore.create(l,{name:e.receiverName,user:globals.user.username}),f=t("CREATE_SUCCESSFUL");case 22:if(!m){a.next=27;break}return a.next=25,e.secretStore.update({name:e.secretName,user:globals.user.username},c);case 25:a.next=29;break;case 27:return a.next=29,e.secretStore.create(c,{name:e.secretName,user:globals.user.username});case 29:T.default.success({content:f,duration:1e3});case 30:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isValidating,n=t.isLoading,l=t.noConfig;return h.default.createElement(R.default,{loading:n,className:A.default.panel},h.default.createElement(D.default,{noConfig:l,formRef:e,user:globals.user.username,wrapperClassName:A.default.wrapper,data:a,onChange:this.handleFormChange,getVerifyFormTemplate:this.getVerifyFormTemplate,isValidating:r,hideFooter:!0}))}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-webhook-receiver")}},{key:"secretName",get:function(){return"".concat(globals.user.username,"-webhook-secret")}},{key:"name",get:function(){return"webhook"}},{key:"type",get:function(){return"webhook"}},{key:"receiverFormTemplate",get:function(){return P.default.notificationreceivers({name:this.receiverName,type:this.type})}},{key:"secretTemplate",get:function(){return P.default.globalsecret({name:this.secretName})}}]),r}(h.default.Component),c.contextTypes={registerUpdate:g.default.func},u=s))||u;a.default=M},,function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(187),r(31),r(6),r(29),r(16),r(10),r(4),r(22),r(23),r(17),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(187),r(31),r(6),r(29),r(42),r(16),r(10),r(4),r(22),r(23),r(57),r(17),r(38),r(7),r(32);var l=n(r(96)),o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=r(14),y=r(239),g=n(r(1)),b=n(r(60)),S=n(r(63)),_=n(r(26)),O=n(r(74)),C=n(r(242)),T=n(r(135)),R=n(r(240)),D=n(r(789)),N=n(r(1720)),k=n(r(888)),I=n(r(919)),P=r(440),A=n(r(435)),w=n(r(1013));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=(0,y.observer)((s=c=function(e){(0,p.default)(r,e);var a=M(r);function r(){var e;(0,f.default)(this,r);for(var n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return(e=a.call.apply(a,[this].concat(u))).receiverStore=new k.default,e.secretStore=new I.default,e.state={formData:{},noConfig:!0},e.formTemplate={receiver:A.default.notificationreceivers({name:e.receiverName,type:e.type}),secret:e.secretFormTemplate},e.fetchData=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Promise.all([e.receiverStore.fetchList({name:e.receiverName,user:globals.user.username,type:e.type}),e.secretStore.fetchList({name:e.secretName,user:globals.user.username})]).then((function(){var t=(0,E.toJS)(e.receiverStore.list.data).find((function(t){return(0,_.default)(t,"name")===e.receiverName})),a=(0,E.toJS)(e.secretStore.list.data).find((function(t){return(0,_.default)(t,"name")===e.secretName}));(0,S.default)(t)||((0,O.default)(e.formTemplate,"receiver",(0,_.default)(t,"_originData",{})),e.setState({isExitReceiver:!0})),(0,S.default)(a)||((0,O.default)(e.formTemplate,"secret",a),e.setState({isExitSecret:!0})),e.setState({formData:(0,T.default)(e.formTemplate),isLoading:!1,noConfig:(0,S.default)(t)})}));case 3:case"end":return t.stop()}}),t)}))),e.resetData=function(){e.setState({formData:(0,T.default)(e.formTemplate)})},e.handleFormChange=function(t,a){e.context.registerUpdate(e.name,{name:t,value:a})},e.getVerifyFormTemplate=function(e){var t={},a=(0,T.default)(e),r=a.receiver,n=a.secret,l=(0,_.default)(r,"spec.feishu.chatbot.keywords"),o=(0,_.default)(r,"spec.feishu.department"),u=(0,_.default)(r,"spec.feishu.user"),c=(0,_.default)(n,"data",{}),s=c.webhook,i=c.chatbotsecret;return s&&(0,O.default)(t,"receiver.spec.feishu.chatbot.webhook.value",s),i&&(0,O.default)(t,"receiver.spec.feishu.chatbot.secret.value",i),(0,S.default)(l)||(0,O.default)(t,"receiver.spec.feishu.chatbot.keywords",l),(0,S.default)(o)||(0,O.default)(t,"receiver.spec.feishu.department",o),(0,S.default)(u)||(0,O.default)(t,"receiver.spec.feishu.user",u),t},e.handleVerify=function(e){var a=e.receiver,r=e.secret,n=(0,_.default)(a,"spec.feishu.chatbot.keywords"),l=(0,_.default)(a,"spec.feishu.department",[]),o=(0,_.default)(a,"spec.feishu.user",[]),u=(0,_.default)(r,"data",{}),c=u.webhook,s=u.chatbotsecret;if([c,s,n].every((function(e){return(0,b.default)(e)?(0,S.default)(e):!e}))&&l.length<1&&o.length<1)return R.default.error({content:t("DINGTALK_SETTING_TIP")}),!1;if(c||s||!(0,S.default)(n)){if(!c)return R.default.error({content:t("PLEASE_ENTER_VALUE_CUSTOM",{value:"Webhook URL"})}),!1;if(!s&&(0,S.default)(n))return R.default.error({content:t("DINGTALK_CHATBOT_SECURITY_TIP")}),!1}return!0},e.getResource=(0,i.default)(o.default.mark((function t(){var a,r,n,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.receiverStore.getResource({name:e.receiverName,user:globals.user.username}),e.secretStore.getResource({name:e.secretName,user:globals.user.username})]);case 2:return a=t.sent,r=(0,l.default)(a,2),n=r[0],u=r[1],t.abrupt("return",{isExitReceiver:n,isExitSecret:u});case 7:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var a=(0,i.default)(o.default.mark((function a(r){var n,l,u,c,s,i,f;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=(0,T.default)(r),l=n.receiver,u=n.secret,e.handleVerify(r)){a.next=3;break}return a.abrupt("return",!1);case 3:return c=(0,_.default)(u,"data",{}),Object.keys(c).forEach((function(e){c[e]=(0,P.safeBtoa)(c[e])})),(0,O.default)(l,"spec.feishu.chatbot.webhook.valueFrom.secretKeyRef.key","webhook"),(0,O.default)(l,"spec.feishu.chatbot.webhook.valueFrom.secretKeyRef.name",e.secretName),(0,O.default)(l,"spec.feishu.chatbot.secret.valueFrom.secretKeyRef.key","chatbotsecret"),(0,O.default)(l,"spec.feishu.chatbot.secret.valueFrom.secretKeyRef.name",e.secretName),c.webhook||(0,C.default)(l,"spec.feishu.chatbot.webhook"),c.chatbotsecret||(0,C.default)(l,"spec.feishu.chatbot.secret"),(0,S.default)((0,_.default)(l,"spec.feishu.chatbot.keywords"))&&(0,C.default)(l,"spec.feishu.chatbot.keywords"),(0,S.default)((0,_.default)(l,"spec.feishu.chatbot"))&&(0,C.default)(l,"spec.feishu.chatbot"),a.next=15,e.getResource();case 15:if(s=a.sent,i=s.isExitReceiver,f=s.isExitSecret,!i){a.next=23;break}return a.next=21,e.receiverStore.update({name:e.receiverName,user:globals.user.username},l);case 21:a.next=26;break;case 23:return(0,O.default)(l,"spec.feishu.enabled",!0),a.next=26,e.receiverStore.create(l,{name:e.receiverName,user:globals.user.username});case 26:if(!f){a.next=31;break}return a.next=29,e.secretStore.update({name:e.secretName,user:globals.user.username},(0,O.default)(e.secretTemplate,"data",c));case 29:a.next=33;break;case 31:return a.next=33,e.secretStore.create((0,O.default)(e.secretTemplate,"data",c),{name:e.secretName,user:globals.user.username});case 33:R.default.success({content:t("UPDATE_SUCCESSFUL"),duration:1e3});case 34:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return(0,d.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.formRef,t=this.state,a=t.formData,r=t.isLoading,n=t.noConfig;return h.default.createElement(D.default,{loading:r,className:w.default.panel},h.default.createElement(N.default,{formRef:e,noConfig:n,wrapperClassName:w.default.wrapper,data:a,onChange:this.handleFormChange,onVerify:this.handleVerify,getVerifyFormTemplate:this.getVerifyFormTemplate,hideFooter:!0,user:globals.user.username}))}},{key:"receiverName",get:function(){return"".concat(globals.user.username,"-feishu-receiver")}},{key:"secretName",get:function(){return"".concat(globals.user.username,"-feishu-config-secret")}},{key:"name",get:function(){return"feishu"}},{key:"type",get:function(){return"feishu"}},{key:"secretTemplate",get:function(){return A.default.globalsecret({name:this.secretName})}}]),r}(h.default.Component),c.contextTypes={registerUpdate:g.default.func},u=s))||u;a.default=L},,function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(0)),i=n(r(240)),f=n(r(787)),d=n(r(3138)),p=n(r(3150)),m=n(r(3151)),v=n(r(824)),h=n(r(3153)),E=n(r(3178)),y=n(r(1724)),g=n(r(1587)),b=n(r(3187)),S=n(r(1726)),_=n(r(3199)),O=n(r(3209)),C=n(r(3211)),T=n(r(3213)),R=n(r(3215)),D=n(r(3216)),N=n(r(3218)),k=n(r(3219)),I=n(r(3223)),P=n(r(1383)),A=n(r(3225)),w=n(r(3249)),M=n(r(3250)),L=n(r(3251)),j=n(r(3252)),x=n(r(3253)),U=n(r(3255)),F=r(1049);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={"openpitrix.app.create":{on:function(e){var t=e.store,a=e.cluster,r=e.namespace,n=(0,c.default)(e,["store","cluster","namespace"]),l=f.default.open(G({onOk:function(){f.default.close(l)},store:t,cluster:a,namespace:r,modal:d.default},n))}},"openpitrix.app.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(G({onOk:function(e){a.patch(r,e).then((function(){f.default.close(o),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:p.default},l))}},"openpitrix.app.template.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(G({onOk:function(e){a.upgrade(e,r).then((function(){f.default.close(o),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:m.default},l))}},"openpitrix.repo.add":{on:function(e){var t,a=e.store,r=e.workspace,n=e.success,u=(0,c.default)(e,["store","workspace","success"]),s=f.default.open(G({onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.create(G(G({},t),{},{workspace:r,app_default_status:"active"}));case 2:f.default.close(s),n&&n();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,modal:h.default,workspace:r},u))}},"openpitrix.repo.edit":{on:function(e){var t,a=e.store,r=e.detail,n=e.workspace,u=e.success,s=(0,c.default)(e,["store","detail","workspace","success"]),i=f.default.open(G({onOk:(t=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.update(t);case 2:f.default.close(i),u&&u();case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),store:a,detail:r,modal:h.default,workspace:n},s))}},"openpitrix.template.create":{on:function(e){var t=e.store,a=e.success,r=(0,c.default)(e,["store","success"]),n=f.default.open(G({onOk:function(){f.default.close(n),a&&a()},store:t,modal:E.default},r))}},"openpitrix.template.upload":{on:function(e){var a,r=e.store,n=e.workspace,u=e.success,s=(0,c.default)(e,["store","workspace","success"]),d=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.create(G(G({},a),{},{workspace:n}));case 2:i.default.success({content:t("UPLOAD_SUCCESSFUL")}),f.default.close(d),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:y.default,title:t("UPLOAD_HELM_TITLE"),description:t("UPLOAD_HELM_CHART_DESC"),icon:"templet",type:"CREATE_APP",workspace:n},s))}},"openpitrix.template.edit":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.update(a);case 2:f.default.close(s),i.default.success({content:t("MODIFY_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:g.default,success:n},u))}},"openpitrix.template.addVersion":{on:function(e){var a,r=e.store,n=e.versionStore,u=e.workspace,s=e.success,d=(0,c.default)(e,["store","versionStore","workspace","success"]),p=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.create(a);case 2:i.default.success({content:t("ADD_VERSION_SUCCESSFUL")}),f.default.close(p),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:y.default,title:t("UPLOAD_HELM_TITLE"),description:t("UPLOAD_HELM_CHART_DESC"),icon:"templet",type:"CREATE_APP",workspace:u},d))}},"openpitrix.template.deploy":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,d,p;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.namespace,u=a.cluster,d=a.workspace,p=(0,c.default)(a,["namespace","cluster","workspace"]),e.next=3,r.deploy(p,{workspace:d,namespace:o,cluster:u});case 3:f.default.close(s),i.default.success({content:"".concat(t("DEPLOYED_SUCCESSFUL"))}),n&&n();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:b.default},u))}},"openpitrix.template.delete":{on:function(e){var a=e.store,r=e.detail,n=e.versions,u=e.success,d=(0,c.default)(e,["store","detail","versions","success"]),p=r.name,m=t.html("DELETE_APP_TEMPLATE_DESC",{resource:p});n.length&&(m=s.default.createElement("span",null,t.html("DELETE_APP_TEMPLATE_VERSIONS_DESC",{resource:p})));var h,E=f.default.open(G({onOk:(h=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.delete(r);case 2:f.default.close(E),i.default.success({content:t("DELETED_SUCCESSFULLY")}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)}),store:a,desc:m,type:"APP_TEMPLATE",resource:p,modal:v.default},d))}},"openpitrix.template.action":{on:function(e){var a,r=e.store,n=e.detail,u=e.handleType,s=e.success,d=(0,c.default)(e,["store","detail","handleType","success"]),p=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handle({action:u,app_id:n.app_id,app_version_types:n.app_version_types});case 2:a=F.HANDLE_TYPE_TO_SHOW[u]||u,f.default.close(p),i.default.success({content:"".concat(t("".concat(a.toUpperCase(),"_SUCCESSFUL")))}),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),content:t.html("APP_".concat((u||"suspend").toUpperCase(),"_TIP"),{name:n.name}),modal:S.default,store:r},d))}},"openpitrix.template.review":{on:function(e){var a,r=e.store,n=e.detail,u=e.type,s=e.success,d=e.onReject,p=(0,c.default)(e,["store","detail","type","success","onReject"]),m=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.app_id,o=n.version_id,e.next=3,r.handle({app_id:a,version_id:o,action:"pass"});case 3:f.default.close(m),i.default.success(t("RELEASE_SUCCESSFUL")),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),onReject:function(){f.default.close(m),d()},icon:"safe-notice",title:t("APP_DETAILS"),description:t("APP_DETAILS_DESC"),canHandle:"unprocessed"===u,modal:_.default,detail:n,store:r},p))}},"openpitrix.template.reject":{on:function(e){var a,r=e.store,n=e.detail,u=e.type,s=e.success,d=(0,c.default)(e,["store","detail","type","success"]),p=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.app_id,u=n.version_id,e.next=3,r.handle(G({app_id:o,version_id:u,action:"reject"},a));case 3:f.default.close(p),i.default.success(t("REJECT_SUCCESSFUL")),s&&s();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),icon:"safe-notice",title:t("REJECTION_REASON"),description:t("REJECT_REASON_DESC"),canHandle:"unprocessed"===u,versionId:n.version_id||"",modal:O.default,store:r},d))}},"openpitrix.category.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.names,s=e.success,d=(0,c.default)(e,["store","detail","names","success"]),p=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.category_id){e.next=6;break}return e.next=3,r.update(a);case 3:o="".concat(t("MODIFY_SUCCESSFUL")),e.next=9;break;case 6:return e.next=8,r.create(a);case 8:o=t("CREATE_SUCCESSFUL");case 9:f.default.close(p),i.default.success({content:o}),s&&s();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CATEGORY"),icon:"tag",detail:n,categoryNames:u,modal:C.default,store:r},d))}},"openpitrix.category.delete":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),d=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.delete(n);case 2:f.default.close(d),i.default.success({content:t("DELETED_SUCCESSFULLY")}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),desc:t.html("DELETE_CATEGORY_DESC",{name:n.name}),modal:v.default,store:r},s))}},"openpitrix.category.ajust":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),s=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.adjustCategory(a);case 2:f.default.close(s),i.default.success({content:"".concat(t("CHANGED_SUCCESSFULLY"))}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CHANGE_CATEGORY"),icon:"tag",modal:T.default,store:r},u))}},"openpitrix.db.adjustCapacity":{on:function(e){var a,r=e.store,n=e.success,u=e.icon,s=(0,c.default)(e,["store","success","icon"]),d=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(d),i.default.success({content:"".concat(t("MODIFY_SUCCESSFUL"))}),n&&n();case 3:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),title:t("EXPAND_VOLUME"),icon:u,modal:R.default,store:r},s))}},"openpitrix.db.createDBNode":{on:function(e){var a,r=e.store,n=e.success,u=e.icon,s=(0,c.default)(e,["store","success","icon"]),d=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(d),a?i.default.success({content:"".concat(t("DELETED_SUCCESSFULLY"))}):i.default.success({content:"".concat(t("CREATE_SUCCESSFUL"))}),n&&n();case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("SCALE_OUT"),icon:u,modal:D.default,store:r},s))}},"openpitrix.db.adjustSpecification":{on:function(e){var a,r=e.store,n=e.success,u=e.icon,s=(0,c.default)(e,["store","success","icon"]),d=f.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(d),i.default.success({content:"".concat(t("MODIFY_SUCCESSFUL"))}),n&&n(a);case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("ADJUST_RESOURCES"),icon:u,modal:N.default,store:r},s))}},"openpitrix.db.createAccount":{on:function(e){var t,a=e.store,r=e.success,n=e.icon,u=e.content,s=(0,c.default)(e,["store","success","icon","content"]),d=f.default.open(G({onOk:(t=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(d),u&&i.default.success({content:u}),r&&r();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onCancel:function(){f.default.close(d)},icon:n,modal:k.default,store:a},s))}},"openpitrix.db.app.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(G({onOk:function(e){a.patch(r,e).then((function(){f.default.close(o),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:I.default},l))}},"openpitrix.db.app.update":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=f.default.open(G({onOk:function(){a.updateVersion(r).then((function(){f.default.close(o),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},store:a,detail:r,modal:U.default},l))}},"openpitrix.db.app.create":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=P.default.open(G({onOk:function(){f.default.close(o),i.default.success({content:"".concat(t("CREATE_SUCCESSFUL"))}),n&&n()},store:a,detail:r,modal:A.default},l))}},"openpitrix.db.backup.create":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),d=P.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.add(G(G({},s),a));case 2:f.default.close(d),i.default.success({content:"".concat(t("CREATE_SUCCESSFUL"))}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,modal:w.default},s))}},"openpitrix.db.backup.auto":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),d=P.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.autoBackup(a);case 2:f.default.close(d),i.default.success({content:"".concat(t("MODIFY_SUCCESSFUL"))}),u&&u();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,modal:M.default},s))}},"openpitrix.db.kafka.rebalance":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=P.default.open(G({onOk:function(){f.default.close(o),i.default.success({content:"".concat(t("CREATE_SUCCESSFUL"))}),n&&n()},store:a,detail:r,modal:L.default},l))}},"openpitrix.db.topic.create":{on:function(e){var a,r=e.store,n=e.isEdit,u=e.detail,s=e.success,d=(0,c.default)(e,["store","isEdit","detail","success"]),p=P.default.open(G({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,r.edit(G({topic:a,oldTopicName:u.name},d));case 3:i.default.success({content:"".concat(t("UPDATE_SUCCESSFUL"))}),e.next=9;break;case 6:return e.next=8,r.create(G({topic:a},d));case 8:i.default.success({content:"".concat(t("CREATE_SUCCESSFUL"))});case 9:f.default.close(p),s&&s();case 11:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:u,isEdit:n,modal:j.default,okText:t("OK")},d))}},"openpitrix.app.agreement":{on:function(e){var t=e.success,a=(0,c.default)(e,["success"]),r=f.default.open(G({onOk:function(){f.default.close(r),t&&t()},modal:x.default},a))}}};a.default=B},function(e,t,a){"use strict";var r=a(20),n=a(157);a(12),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(17),a(7);var l,o,u,c=r(a(315)),s=r(a(58)),i=r(a(30)),f=r(a(36)),d=r(a(37)),p=r(a(55)),m=r(a(56)),v=r(a(51)),h=n(a(0)),E=a(239),y=r(a(241)),g=r(a(1)),b=a(186),S=r(a(787)),_=r(a(3139)),O=r(a(3141)),C=r(a(3149));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var N=(0,E.observer)((u=o=function(e){(0,p.default)(a,e);var t=D(a);function a(e){var r;return(0,f.default)(this,a),(r=t.call(this,e)).setViewType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"appList",t=arguments.length>1?arguments[1]:void 0;r.setState({selectRepo:t,viewType:e})},r.handleClickApp=function(e){r.setState({viewType:"appDetail",selectApp:e})},r.handleDeploy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.props.trigger("openpitrix.template.deploy",R(R(R({},e),(0,y.default)(r.props,["cluster","workspace","namespace"])),{},{success:function(){return r.props.onOk()}}))},r.state={selectRepo:"",viewType:"appList",selectApp:null},r}return(0,d.default)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.workspace,n=(e.onDeploy,(0,s.default)(e,["visible","onCancel","workspace","onDeploy"])),l=this.state,o=l.viewType,u=l.selectApp,i=l.selectRepo;return h.default.createElement(S.default,(0,c.default)({width:1070,className:C.default.modal,bodyClassName:C.default.body,visible:t,onCancel:a,rightScreen:!0,hideHeader:!0,hideFooter:!0},n),h.default.createElement(b.Button,{className:C.default.close,icon:"close",iconType:"light",type:"control",onClick:a}),"appList"===o&&h.default.createElement(_.default,{workspace:r,selectRepo:i,setType:this.setViewType,onClickApp:this.handleClickApp}),"appDetail"===o&&h.default.createElement(O.default,{setType:this.setViewType,app:u,workspace:r,onDeploy:this.handleDeploy}))}}]),a}(h.Component),o.propTypes={workspace:g.default.string,visible:g.default.bool,onOk:g.default.func,onCancel:g.default.func},o.defaultProps={workspace:"",visible:!1,onOk:function(){},onCancel:function(){}},l=u))||l;t.default=N},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(188),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(859),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(64),r(188),r(7);var o=n(r(61)),u=n(r(43)),c=n(r(30));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=l(r(0)),g=r(239),b=n(r(1)),S=n(r(26)),_=n(r(455)),O=r(186),C=n(r(1627)),T=n(r(469)),R=n(r(1380)),D=r(327),N=n(r(3140));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var A=(0,g.observer)((f=i=function(e){(0,v.default)(n,e);var a,r=P(n);function n(e){var t;return(0,p.default)(this,n),(t=r.call(this,e)).fetchRepos=(0,d.default)(u.default.mark((function e(){var a,r,n=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:{},r=t.props.workspace,e.next=4,t.repoStore.fetchList(I({status:"active",noLimit:!0,workspace:r},a));case 4:case"end":return e.stop()}}),e)}))),t.fetchApps=(0,d.default)(u.default.mark((function e(){var a,r,n,l,c,s=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:{},r=!(s.length>1&&void 0!==s[1])||s[1],e.next=4,t.appStore.fetchList(I({page:1,limit:D.STORE_APP_LIMIT,status:t.isFormWorkspace?"":"active",workspace:t.isFormWorkspace?t.props.workspace:"",repo_id:t.selectedRepo},a));case 4:n=t.appStore,l=n.allApps,c=n.list,r?(l.clear(),l.replace(c.data)):l.push.apply(l,(0,o.default)(c.data));case 6:case"end":return e.stop()}}),e)}))),t.fetchMoreApps=(0,d.default)(u.default.mark((function e(){var a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appStore.list.page,e.next=3,t.fetchApps({page:a+1},!1);case 3:case"end":return e.stop()}}),e)}))),t.handleSearch=function(e){t.fetchApps({keyword:e})},t.handleRefresh=function(){t.fetchApps()},t.handleChangeRepo=function(e){t.selectedRepo!==e&&t.setState({selectRepo:e},(function(){t.fetchApps()}))},t.state={selectRepo:e.selectRepo},t.appStore=new T.default,t.repoStore=new R.default,t}return(0,m.default)(n,[{key:"componentDidMount",value:(a=(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchRepos();case 2:if(!(this.repoSelectOptions.length>0)){e.next=5;break}return e.next=5,this.fetchApps();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderHeader",value:function(){return y.default.createElement("div",{className:N.default.header},y.default.createElement("div",{className:N.default.logo},y.default.createElement("img",{src:"/assets/application.svg",alt:""})),y.default.createElement("div",{className:N.default.text},y.default.createElement("h2",null,t("APP_TEMPLATE_PL")),y.default.createElement("p",null,t("APP_TEMPLATES_MODAL_DESC"))))}},{key:"renderToolbar",value:function(){return y.default.createElement("div",{className:N.default.toolbar},y.default.createElement(O.Select,{name:"repo",placeholder:t("SELECT_APP_REPOSITORY"),onChange:this.handleChangeRepo,className:N.default.selectRepos,options:this.repoSelectOptions,value:this.selectedRepo}),y.default.createElement(O.InputSearch,{onSearch:this.handleSearch,className:N.default.search,placeholder:t("SEARCH")}),y.default.createElement(O.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"render",value:function(){var e=this.appStore,t=e.allApps,a=e.list,r=a.isLoading,n=a.total;return y.default.createElement(y.default.Fragment,null,this.renderHeader(),this.renderToolbar(),y.default.createElement("div",{className:N.default.apps},y.default.createElement(C.default,{itemCls:N.default.appItem,apps:t.toJS(),isLoading:r,total:n,onFetchMore:this.fetchMoreApps,onClickAppItem:this.props.onClickApp,disableLink:!0})))}},{key:"isFormWorkspace",get:function(){return!this.selectedRepo}},{key:"repoSelectOptions",get:function(){var e=this.repoStore.list.data.map((function(e){var t=e.name;return{value:e.repo_id,label:t}}));return e.unshift({value:null,label:t("CURRENT_WORKSPACE")}),e}},{key:"selectedRepo",get:function(){return this.state.selectRepo||(0,S.default)(this.repoSelectOptions,"[0].value")}}]),n}(y.Component),i.propTypes={workspace:b.default.string,store:b.default.object,onClickApp:b.default.func,fetchApps:b.default.func,selectRepo:b.default.string},i.defaultProps={workspace:"",store:{},onClickApp:_.default},s=f))||s;a.default=A},function(e,t,a){e.exports={apps:"_1UatQrbMOVzFuohgTg31oP",appItem:"_1M1BO3tpD1NAdxEzt9622l",header:"_2X4awaWFWZe3_0szPQS1tG",logo:"_2VFLGzBVR1DwI0uG14Iij",text:"_180h4OHwH9Gfe3LwWRj5r1",toolbar:"fwgiubvg9GxvkA5OEo1tO",selectRepos:"hUYgP6O2Qv2aSSy9gAShl",search:"_1Qe3PDhi2sBCabmc6Pwcpf"}},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(109),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43)),u=n(r(30));r(41);var c,s,i,f=n(r(44)),d=n(r(36)),p=n(r(37)),m=n(r(55)),v=n(r(56)),h=n(r(51)),E=l(r(0)),y=r(239),g=n(r(1)),b=n(r(26)),S=n(r(243)),_=r(186),O=n(r(816)),C=n(r(3142)),T=n(r(1722)),R=n(r(469)),D=n(r(942)),N=n(r(3146)),k=n(r(3148));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var w=(0,y.observer)((i=s=function(e){(0,m.default)(n,e);var a,r=A(n);function n(e){var t;return(0,d.default)(this,n),(t=r.call(this,e)).fetchVersions=(0,f.default)(o.default.mark((function e(){var a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,t.versionStore.fetchList(P(P({},a),{},{app_id:t.appId,noLimit:!0}));case 3:case"end":return e.stop()}}),e)}))),t.handleTabChange=function(e){t.setState({tab:e})},t.handleClickBack=function(){var e=t.props.app;t.props.setType("appList",e.repo_id)},t.showDeploy=function(){t.props.onDeploy({app:t.appStore.detail,store:t.appStore})},t.handleChangeAppVersion=function(e){t.setState({selectAppVersion:e})},t.state={tab:"versionInfo",selectAppVersion:"",showDeploy:!1},t.appStore=new R.default,t.versionStore=new D.default,t}return(0,p.default)(n,[{key:"componentDidMount",value:(a=(0,f.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchVersions();case 2:t=(0,b.default)(this.versionStore,"list.data[0].version_id",""),this.setState((function(){return{selectAppVersion:t}})),this.appStore.fetchDetail({app_id:[this.appId]});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.props.setType()}},{key:"renderVersionList",value:function(){return E.default.createElement("div",{className:"margin-b12"},E.default.createElement("div",{className:"h6 margin-b12"},t("VERSION")),E.default.createElement(O.default,{value:this.state.selectAppVersion,options:this.versionOptions,onChange:this.handleChangeAppVersion}))}},{key:"render",value:function(){var e=this.props.app,a=this.state,r=a.selectAppVersion,n=a.tab,l=this.appStore.detail;return E.default.createElement(E.default.Fragment,null,E.default.createElement(N.default,{onClickBack:this.handleClickBack,title:e.name,desc:e.description,icon:e.icon}),E.default.createElement("div",{className:k.default.bar},E.default.createElement(_.RadioGroup,{mode:"button",value:n,options:this.tabs,onChange:this.handleTabChange}),E.default.createElement(_.Button,{type:"control",onClick:this.showDeploy},t("INSTALL"))),E.default.createElement("div",{className:k.default.content},E.default.createElement(_.Columns,null,E.default.createElement(_.Column,null,E.default.createElement(C.default,{appId:this.appId,versionId:r,currentTab:n})),E.default.createElement(_.Column,{className:"is-narrow"},this.renderVersionList(),E.default.createElement(T.default,{app:l})))))}},{key:"appId",get:function(){return this.props.app.app_id}},{key:"tabs",get:function(){return[{label:t("APP_INFORMATION"),value:"versionInfo"},{label:t("CHART_FILES"),value:"chartFiles"}]}},{key:"versionOptions",get:function(){return this.versionStore.list.data.map((function(e){var t=e.version_id,a=e.name,r=e.create_time;return{label:a,description:(0,S.default)(r).format("YYYY-MM-DD"),value:t}}))}}]),n}(E.Component),s.propTypes={app:g.default.object,setType:g.default.func,workspace:g.default.string},s.defaultProps={app:{}},c=i))||c;a.default=w},function(e,a,r){"use strict";r(15);var n=r(20);r(9),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(9),r(4),r(23),r(57),r(17);var l,o,u,c,s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(49)),v=n(r(0)),h=n(r(1)),E=r(14),y=r(239),g=r(186),b=n(r(63)),S=n(r(935)),_=n(r(1001)),O=n(r(1721)),C=n(r(3144));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var R=g.Tabs.TabPanel,D=(0,y.observer)((c=u=function(e){(0,f.default)(r,e);var a=T(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).handleTabChange=function(e){n.setState({tab:e})},n.renderReadMe=function(){var e=n.files["README.md"];return e||n.fileStore.isLoading?v.default.createElement(_.default,{source:e}):v.default.createElement("p",{className:C.default.noReadme},t("VERSION_INTRO_EMPTY_DESC"))},n.renderChartFiles=function(){if(!(0,b.default)(n.files)){return v.default.createElement(O.default,{files:(0,E.toJS)(n.files),editorOptions:{options:{readOnly:!0}}})}},n.fileStore=new S.default,n.state={tab:"versionInfo"},n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.versionId;t!==e.versionId&&this.fetchFile(t)}},{key:"componentDidMount",value:function(){var e=this.props.versionId;this.fetchFile(e)}},{key:"fetchFile",value:function(e){var t=this.props.appId;e&&this.fileStore.fetch({app_id:t,version_id:e})}},{key:"render",value:function(){var e=this.props,a=e.versionId,r=e.currentTab,n=this.state.tab;return a?this.fileStore.isLoading?v.default.createElement(g.Loading,{className:C.default.loading}):"versionInfo"===r?v.default.createElement(v.default.Fragment,null,this.renderReadMe()):"chartFiles"===r?v.default.createElement(v.default.Fragment,null,this.renderChartFiles()):v.default.createElement(g.Tabs,{type:"button",activeName:n,onChange:this.handleTabChange},v.default.createElement(R,{label:t("APP_INTRODUCTION"),name:"versionInfo"},v.default.createElement("div",{className:C.default.wrapper},this.renderReadMe())),v.default.createElement(R,{label:t("CHART_FILES"),name:"chartFiles"},v.default.createElement("div",{className:C.default.wrapper},this.renderChartFiles()))):null}},{key:"files",get:function(){return this.fileStore.files}}]),r}(v.default.Component),u.propTypes={appId:h.default.string,versionId:h.default.string,currentTab:h.default.string},u.defaultProps={currentTab:"",appId:"",versionId:""},o=c,(0,m.default)(o.prototype,"files",[E.computed],Object.getOwnPropertyDescriptor(o.prototype,"files"),o.prototype),l=o))||l;a.default=D},,function(e,t,a){e.exports={wrapper:"_22Uqg9uSekELpB6KOCdXpB",noReadme:"_2op9wgbzpexIMRcDqKNfeb",loading:"_2ycCMmftlBf-UDzqsr_oJG"}},function(e,t,a){e.exports={appBase:"_1I6e4FCt60BefNpkAUBRMO"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=l(r(1)),p=r(186),m=l(r(836)),v=l(r(3147));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleClickBack=function(){e.props.onClickBack?e.props.onClickBack():history.back()},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.desc,n=e.icon;return f.default.createElement("div",{className:v.default.banner},f.default.createElement("div",{className:v.default.back,onClick:this.handleClickBack},f.default.createElement(p.Icon,{name:"return",size:20}),f.default.createElement("span",null,t("BACK"))),f.default.createElement("div",{className:v.default.intro},f.default.createElement("span",{className:v.default.icon},f.default.createElement(m.default,{src:n,alt:"",iconLetter:a,iconSize:48})),f.default.createElement("div",{className:v.default.text},f.default.createElement("h3",null,a),f.default.createElement("p",null,r))),f.default.createElement("div",{className:v.default.rightIcon},f.default.createElement("span",{className:v.default.image},f.default.createElement(m.default,{src:n,alt:"",iconLetter:a,iconSize:200}))))}}]),r}(f.PureComponent);E.propTypes={title:d.default.string,desc:d.default.string,icon:d.default.string,onClickBack:d.default.func};var y=E;a.default=y},function(e,t,a){e.exports={banner:"_1FsQGq61FOegh8j3_GhZif",back:"_1gmVPVuByhMa57J036PSxv",intro:"_3j5upf16nlGbfjUg4e-X34",icon:"fDrmqEhdOkv6q7azoOFUs",text:"Pk8jY_OQnHqX_iBCCvh9r",rightIcon:"_Ea0pMqGjtHduLt6SbNPo",image:"_2Dw5Wj1kIEH4VCAKK2-1q6"}},function(e,t,a){e.exports={bar:"_1DaaC_xsG5XhBKwZhkgEg2",content:"_9_gu9ro0MHL2Y29sszoZI",loading:"_4r_xEprGi4V3ulL1P_Ojc"}},function(e,t,a){e.exports={modal:"_1KackZTxL0khYUVdXmINz7",body:"_1QrRgA4KOz3Xeinog9zRKn",close:"_3PAVlOmYX1mSke11tsE8YY"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(t){(0,e.props.onOk)(t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.isSubmitting,l=e.onCancel;return i.default.createElement(p.default.Form,{data:a,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:l,visible:r,isSubmitting:n},i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("LONG_NAME_DESC")},i.default.createElement(d.Input,{name:"name",disabled:!0})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{maxLength:256,name:"description"})))}}]),r}(i.default.Component);a.default=v,v.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(320),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(320),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(43)),u=n(r(30));r(41);var c,s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(49)),g=n(r(0)),b=n(r(1)),S=r(14),_=r(239),O=n(r(26)),C=n(r(74)),T=n(r(241)),R=r(186),D=n(r(841)),N=n(r(787)),k=n(r(942)),I=n(r(935)),P=r(916),A=n(r(3152));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var j=(0,_.observer)((f=i=function(e){(0,v.default)(r,e);var a=L(r);function r(e){var n;return(0,p.default)(this,r),(n=a.call(this,e)).updateValuesYaml=function(){var e=n.fileStore.files;e&&e["values.yaml"]?((0,C.default)(n.state.formData,"conf",e["values.yaml"]),n.setState({valuesYaml:e["values.yaml"],loadingFile:!1})):n.setState({loadingFile:!1})},n.versionOptionRender=function(e){var a=e.label,r=e.value;return g.default.createElement("span",{style:{display:"flex",alignItem:"center"}},a,"  ",r===n.latestVersion&&g.default.createElement(R.Tag,{type:"warning"},t("LATEST_VERSION")))},n.fetchVersions=(0,d.default)(o.default.mark((function e(){var t,a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},a=n.props.detail,e.abrupt("return",n.versionStore.fetchList(M(M({},t),{},{app_id:a.app_id})));case 3:case"end":return e.stop()}}),e)}))),n.handleVersionChange=function(e){var t=n.props.detail;(0,C.default)(n.state.formData,"version_id",e),n.setState({loadingFile:!0,valuesYaml:""}),n.fileStore.fetch({app_id:t.app_id,version_id:e}).then((function(){n.updateValuesYaml()}))},n.handleYamlChange=function(e){var t=n.state.formData;n.setState({valuesYaml:e},(function(){(0,C.default)(t,"conf",e)}))},n.handleOk=function(){n.props.onOk(n.state.formData)},n.state={currentStep:0,formData:M(M({},(0,T.default)(e.detail,["app_id","cluster_id","description","name","owner","version_id"])),{},{namespace:e.namespace,cluster:e.cluster,workspace:e.workspace}),valuesYaml:"",conf:(0,O.default)(e.detail,"env",""),loadingFile:!1},n.versionStore=new k.default,n.fileStore=new I.default,n}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.setState({loadingFile:!0}),this.versionStore.fetchList({app_id:this.props.detail.app_id}),this.fileStore.fetch({app_id:this.props.detail.app_id,version_id:this.state.formData.version_id}).then((function(){e.updateValuesYaml()}))}},{key:"render",value:function(){var e=this.props.detail,a=this.state,r=a.valuesYaml,n=a.conf,o=a.loadingFile;return g.default.createElement(N.default,(0,l.default)({title:t("EDIT_APP_SETTINGS")},this.props,{onOk:this.handleOk,width:1280,okText:t("OK")}),g.default.createElement(R.Columns,null,g.default.createElement(R.Column,null,g.default.createElement("div",{className:A.default.label},t("CURRENT_APP_VERSION")),g.default.createElement(R.Input,{className:"margin-b12",value:e.version.name,readOnly:!0}),g.default.createElement("div",{className:A.default.label},t("CURRENT_APP_SETTINGS_READONLY")),g.default.createElement(R.Loading,{spinning:!1},g.default.createElement(D.default,{mode:"yaml",className:A.default.readOnly,value:n,options:{readOnly:!0}}))),g.default.createElement(R.Column,null,g.default.createElement("div",{className:A.default.label},t("TARGET_APP_VERSION")),g.default.createElement(R.Select,{name:"version_id",className:"margin-b12",value:this.state.formData.version_id,options:this.sortedVersions,placeholder:t("VERSION_EMPTY_DESC"),pagination:(0,T.default)(this.versionStore.list,["page","limit","total"]),isLoading:this.versionStore.list.isLoading,onFetch:this.fetchVersions,onChange:this.handleVersionChange,optionRenderer:this.versionOptionRender,valueRenderer:this.versionOptionRender}),g.default.createElement("div",{className:A.default.label},t("TARGET_APP_SETTINGS")),g.default.createElement(R.Loading,{spinning:o},g.default.createElement(D.default,{mode:"yaml",value:r,onChange:this.handleYamlChange})))))}},{key:"sortedVersions",get:function(){return this.versionStore.list.data.map((function(e){return{label:e.name,value:e.version_id}})).sort((function(e,t){return(0,P.compareVersion)(t.name,e.name)}))}},{key:"latestVersion",get:function(){return(0,O.default)(this.sortedVersions,"[0].value","")}}]),r}(g.default.Component),i.propTypes={visible:b.default.bool,detail:b.default.object,store:b.default.object,cluster:b.default.string,workspace:b.default.string,namespace:b.default.string,onOk:b.default.func,onCancel:b.default.func},i.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){}},s=f,(0,y.default)(s.prototype,"sortedVersions",[S.computed],Object.getOwnPropertyDescriptor(s.prototype,"sortedVersions"),s.prototype),(0,y.default)(s.prototype,"latestVersion",[S.computed],Object.getOwnPropertyDescriptor(s.prototype,"latestVersion"),s.prototype),c=s))||c;a.default=j},function(e,t,a){e.exports={label:"_3uikzxbVhWftLhURgoCd7X",readOnly:"_3khog5JHAOn8kW0CFIpLvI"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(48),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(62),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(48),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(23),r(57),r(24),r(193),r(17),r(62),r(7);var o=l(r(315)),u=l(r(58)),c=l(r(30)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=n(r(0)),v=l(r(1)),h=l(r(26)),E=r(186),y=l(r(787)),g=l(r(3154)),b=l(r(3155)),S=l(r(1381));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=O(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).getFormData=function(e){var t="https";if(e&&e.url){var a=e.url.match(/^(.*):\/\//);a[1]&&(t=a[1])}return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({type:t,name:"",sync_period:(0,h.default)(e,"sync_period","0s"),repoType:"Helm",visibility:"public",credential:"{}",providers:["kubernetes"]},e)},n.getSeconds=function(e){var t=e.slice(-1),a=e.slice(0,-1),r=parseFloat(e);if(r.toString()!==a)return 179;switch(t){default:case"s":return r;case"m":return 60*r;case"h":return 60*r*60}},n.timeValidator=function(e,a,r){var l=n.getSeconds(a);return l?/^[0-9]*$/.test(l)?0!==l&&(l>86400||l<180)?r({message:t("SYNC_INTERVAL_TIP")}):void r():r({message:t("SYNC_INTERVAL_INVALID")}):r()},n.handleSubmit=function(e){n.props.onOk(e).then((function(){n.setState({formData:n.getFormData({})})}))},n.handleCancel=function(){n.props.onCancel(),n.setState({formData:n.getFormData({})})},n.handleUrlValidate=function(e){n.setState({isValid:e.isValid})},n.formRef=m.default.createRef(),n.state={formData:n.getFormData(e.detail)},n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.detail!==e.detail&&this.setState({formData:this.getFormData(this.props.detail)})}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.store,n=(e.onOk,e.onCancel,e.workspace),l=(0,u.default)(e,["detail","store","onOk","onCancel","workspace"]),c=a?"EDIT_APP_REPO":"ADD_APP_REPO";return m.default.createElement(y.default.Form,(0,o.default)({bodyClassName:S.default.body,title:t(c),icon:"firewall",width:691,data:this.state.formData,onOk:this.handleSubmit,onCancel:this.handleCancel},l),m.default.createElement(E.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},m.default.createElement(E.Input,{name:"name",autoFocus:!0})),m.default.createElement(b.default,{store:r,workspace:n,formData:this.state.formData,onValidate:this.handleUrlValidate,isSubmitting:this.props.isSubmitting}),m.default.createElement(E.Form.Item,{label:t("SYNC_INTERVAL"),desc:t("SYNC_INTERVAL_DESC"),rules:[{required:!0,message:t("SYNC_PERIOD_EMPTY_DESC")},{validator:this.timeValidator}]},m.default.createElement(g.default,{name:"sync_period"})),m.default.createElement(E.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},m.default.createElement(E.TextArea,{name:"description",maxLength:256})))}}]),r}(m.Component);a.default=C,C.propTypes={store:v.default.object,detail:v.default.object,visible:v.default.bool,isSubmitting:v.default.bool,onOk:v.default.func,onCancel:v.default.func},C.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(48),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(1381));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleChangeValue=function(e,a){var r=t.props.onChange,n=t.state.unit;t.setState({value:a}),r(a?"".concat(a).concat(n):a)},t.handleChangeUnit=function(e){var a=t.props.onChange,r=t.state.value;t.setState({unit:e}),a(r?"".concat(r).concat(e):r)},t.state={value:e.value.slice(0,-1),unit:e.value.slice(-1)},t}return(0,o.default)(r,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.unit;return i.default.createElement("div",{className:d.default.timeInput},i.default.createElement(f.Input,{className:d.default.input,value:t,onChange:this.handleChangeValue}),i.default.createElement(f.Select,{className:d.default.select,value:a,options:this.options,onChange:this.handleChangeUnit}))}},{key:"options",get:function(){return[{label:t("SECONDS"),value:"s"},{label:t("MINUTES"),value:"m"},{label:t("HOURS"),value:"h"}]}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(139),r(24),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(249),r(45),r(5),r(11),r(6),r(28),r(191),r(42),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(139),r(251),r(24),r(252),r(193),r(17),r(7);var l,o,u,c,s,i,f,d,p,m=n(r(30)),v=n(r(65)),h=n(r(36)),E=n(r(88)),y=n(r(37)),g=n(r(55)),b=n(r(56)),S=n(r(51)),_=n(r(49)),O=(n(r(66)),n(r(0))),C=n(r(1)),T=r(14),R=r(239),D=n(r(3156)),N=n(r(63)),k=n(r(26)),I=n(r(74)),P=n(r(972)),A=r(916),w=r(186),M=n(r(1381));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,S.default)(e);if(t){var n=(0,S.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,b.default)(this,a)}}var U=/^(http|https|s3):\/\//,F=[{label:"http://",value:"http"},{label:"https://",value:"https"},{label:"s3://",value:"s3"}],V=(0,R.observer)((p=d=function(e){(0,g.default)(r,e);var a=x(r);function r(e){var n;(0,h.default)(this,r),n=a.call(this,e),(0,v.default)(n,"handleTypeChange",u,(0,E.default)(n)),(0,v.default)(n,"handleUrlChange",c,(0,E.default)(n)),(0,v.default)(n,"handleAccessInputChange",s,(0,E.default)(n)),(0,v.default)(n,"handleVerify",i,(0,E.default)(n)),(0,v.default)(n,"handleVerifyResult",f,(0,E.default)(n));var l=(0,k.default)(e.formData,"type","http"),o=n.getUrl(e.formData),d=n.getCredential(e.formData);return(0,T.extendObservable)((0,E.default)(n),{type:l,url:o,credential:d,validateStatus:"",validateStatusCode:0,isValid:!1}),n.validateSchema=new D.default({url:function(e,a,r){n.isValid&&"success"===n.validateStatus?r():r(new Error(t("INVALID_URL_DESC")))}}),n}return(0,y.default)(r,[{key:"store",get:function(){return this.props.store}}]),(0,y.default)(r,[{key:"getUrl",value:function(e){if(e.url){var t=new RegExp("^([\\s\\S]*?:\\/\\/)([\\s\\S]*)$","g").exec(e.url);return t?t[2]:""}return""}},{key:"getCredential",value:function(e){var t={accessKeyID:"",secretAccessKey:""};if(e.credential)try{return j(j({},t),JSON.parse(e.credential))}catch(e){}return t}},{key:"resetValidateStatus",value:function(){this.validateStatus="",this.validate()}},{key:"checkVerifyEnable",value:function(){if("validating"===this.validateStatus)return!1;if("s3"===this.type){var e=this.credential,t=e.accessKeyID,a=e.secretAccessKey;return!(0,N.default)(this.url)&&!(0,N.default)(t)&&!(0,N.default)(a)}return!(0,N.default)(this.url)}},{key:"validate",value:function(){var e=this.props,t=e.formData,a=e.onValidate;this.validateSchema.validate(t,{first:!0},(function(e,t){a({isValid:(0,N.default)(t)})}))}},{key:"render",value:function(){return O.default.createElement("div",{className:M.default.urlInput},this.renderField(),this.renderAccess())}},{key:"renderValidateStatus",value:function(){var e=this.validateStatus,a=this.validateStatusCode;if(""===e)return null;var r="validating"===e?O.default.createElement(w.Loading,{size:16}):O.default.createElement(w.Tooltip,{placement:"top",content:"success"===e?t("VALID_URL_DESC"):(0,A.checkRepoInvalidReason)(a)},O.default.createElement(w.Icon,{name:e}));return O.default.createElement("div",{className:M.default.validStatus},r)}},{key:"renderField",value:function(){return O.default.createElement("div",{className:M.default.field},O.default.createElement("label",{className:M.default.label},t("URL")),O.default.createElement("div",{className:M.default.fieldInput},O.default.createElement(w.Select,{className:M.default.protocol,value:this.type,options:F,onChange:this.handleTypeChange}),O.default.createElement(w.Input,{className:M.default.url,type:"text",name:"url",value:this.url,validateStatus:this.validateStatus,placeholder:"example.com",onChange:this.handleUrlChange}),this.renderValidateStatus(),"s3"!==this.type&&O.default.createElement(w.Button,{className:M.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("VALIDATE"))),O.default.createElement("div",{className:M.default.desc},t("APP_REPO_URL_DESC")))}},{key:"renderAccess",value:function(){return"s3"!==this.type?null:O.default.createElement("div",{className:M.default.access},O.default.createElement("div",{className:M.default.accessItem},O.default.createElement("label",{className:M.default.label},t("ACCESS_KEY_ID")),O.default.createElement(w.Input,{name:"accessKeyID",value:this.credential.accessKeyID,onChange:this.handleAccessInputChange})),O.default.createElement("div",{className:M.default.accessItem},O.default.createElement("label",{className:M.default.label},t("SECRET_ACCESS_KEY")),O.default.createElement(w.Input,{name:"secretAccessKey",value:this.credential.secretAccessKey,onChange:this.handleAccessInputChange})),O.default.createElement(w.Button,{className:M.default.verifyBtn,onClick:this.handleVerify,disabled:!this.checkVerifyEnable()||this.props.isSubmitting},t("VALIDATE")))}}]),r}(O.default.Component),d.propTypes={formData:C.default.object,onValidate:C.default.func,isSubmitting:C.default.bool},d.defaultProps={formData:{},onValidate:function(){},isSubmitting:!1},o=p,u=(0,_.default)(o.prototype,"handleTypeChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props.formData;(0,I.default)(a,"credential","s3"===t?JSON.stringify(e.credential):"{}"),(0,I.default)(a,"type",t),e.type=t,U.test(e.url)||(0,I.default)(a,"url","".concat(t,"://").concat(e.url)),e.resetValidateStatus()}}}),c=(0,_.default)(o.prototype,"handleUrlChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=e.props.formData,n=(0,P.default)(a);(0,I.default)(r,"url",U.test(n)?n:"".concat(e.type,"://").concat(n)),e.url=n,e.resetValidateStatus()}}}),s=(0,_.default)(o.prototype,"handleAccessInputChange",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.target.name;e.credential[a]=t.target.value,(0,I.default)(e.props.formData,"credential",JSON.stringify(e.credential)),e.resetValidateStatus()}}}),i=(0,_.default)(o.prototype,"handleVerify",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.validateStatus="validating";var t=e.props.formData,a=t.url,r=t.credential;e.store.validate({type:e.type,url:a,workspace:e.props.workspace,credential:r}).then((function(t){e.handleVerifyResult(t.ok,t.errorCode)})).catch((function(){e.handleVerifyResult(!1)}))}}}),f=(0,_.default)(o.prototype,"handleVerifyResult",[T.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.validateStatus=t?"success":"error",e.validateStatusCode=t?0:a,e.isValid=t,e.validate()}}}),(0,_.default)(o.prototype,"resetValidateStatus",[T.action],Object.getOwnPropertyDescriptor(o.prototype,"resetValidateStatus"),o.prototype),l=o))||l;a.default=V},,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(12),r(109),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(42),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(58)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(1)),v=l(r(3)),h=r(186),E=l(r(787)),y=l(r(3179)),g=l(r(3181));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=b(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=(0,u.default)(e,["visible","onOk"]);return p.default.createElement(E.default,(0,o.default)({width:600,bodyClassName:g.default.body,visible:a,hideHeader:!0},n),p.default.createElement("div",{className:(0,v.default)(g.default.header,"clearfix")},p.default.createElement("img",{src:"/assets/application.svg",alt:""}),p.default.createElement("div",{className:g.default.title}," ",t("CREATE_APP_TEMPLATE")),p.default.createElement("div",{className:g.default.description},t("CREATE_APP_TEMPLATE_DESC"))),p.default.createElement(y.default,{className:g.default.item,title:t("UPLOAD_HELM_TITLE"),show:!0},p.default.createElement("div",{className:g.default.more},p.default.createElement("div",{className:g.default.description},t("HELM_CHART_FORMAT_DESC")),p.default.createElement(h.Button,{type:"control",onClick:r},t("UPLOAD")))))}}]),r}(p.Component);a.default=S,S.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(30)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(1),d=r(a(3)),p=a(186),m=r(a(3180));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(a,e);var t=v(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={show:e.props.show,close:!1},e.toggle=function(){e.setState((function(e){return{show:!e.show}}))},e.close=function(){e.setState({close:!0})},e}return(0,o.default)(a,[{key:"render",value:function(){var e,t=this.props,a=t.className,r=t.title,l=t.hasClose,o=t.description,u=t.children,c=this.state,s=c.show,f=c.close;return i.default.createElement("div",{className:(0,d.default)(m.default.item,(e={},(0,n.default)(e,m.default.hideBg,!s),(0,n.default)(e,m.default.close,f),e),a)},i.default.createElement("div",{className:m.default.name,onClick:this.toggle},i.default.createElement(p.Icon,{name:s?"chevron-down":"chevron-right",size:20}),r,l&&!s&&i.default.createElement(p.Icon,{onClick:this.close,name:"close",size:20,className:m.default.closeIcon})),i.default.createElement("div",{className:(0,d.default)(m.default.detail,(0,n.default)({},m.default.more,!s))},o||u))}}]),a}(i.default.Component);t.default=h,h.propTypes={title:f.PropTypes.string,description:f.PropTypes.string,show:f.PropTypes.bool,hasClose:f.PropTypes.bool},h.defaultProps={title:"",description:"",show:!1,hasClose:!1}},function(e,t,a){e.exports={item:"_2R-OA2wgFv3mbPJKfBIaX7",hideBg:"aSyW8y8emrhSy2MBzQKcD",close:"_3VPiR9lK6WXBhSkrUNdy-H",name:"_33hMf-OF9XImHwm-LhooXh",closeIcon:"_3PIL0xxkZX8ydOOwdHurfc",detail:"QO8FskG69CUNwCFVUQSRe",more:"_3U3WzN-jhR4kf_IMbMjLGK"}},function(e,t,a){e.exports={body:"_3h99wEjjBu7dM8XLM260Si",header:"_28t6cMjRrw-hLtf4pMoFxM",title:"rZl0p0p0PvUroTZyEmQ0C",description:"CTcfpOJrLSYc8t6F5szin",item:"_1ytH-qXuR9Oiy1Assaixn0",more:"_39janX0J74H9bDKIZeydBs",note:"_2QwVboTlporGzzInUuRTuz"}},,,,,,function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(64),r(1092),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(43)),c=n(r(30));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(0)),g=n(r(1)),b=r(239),S=n(r(26)),_=r(186),O=n(r(787)),C=n(r(1725)),T=n(r(3191)),R=n(r(942)),D=n(r(935)),N=r(52),k=n(r(3195)),I=n(r(3197));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var M=(0,b.observer)((f=i=function(e){(0,v.default)(n,e);var a,r=w(n);function n(e){var t;return(0,p.default)(this,n),(t=r.call(this,e)).handlePrev=function(){t.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},t.handleNext=function(){var e=t.formRef.current;e&&e.validate((function(){t.setState((function(e){var a=e.currentStep;return{currentStep:Math.min(t.steps.length-1,a+1)}}))}))},t.handleOk=function(){var e=t.formRef.current;e&&e.validate((function(){t.props.onOk(t.state.formData)}))},t.state={currentStep:0,formData:{app_id:e.app.app_id,name:"".concat(e.app.name.slice(0,7).toLowerCase().replaceAll(" ","-"),"-").concat((0,N.generateId)()),version_id:e.versionId,namespace:e.namespace,cluster:e.cluster,workspace:e.workspace},intializing:!0},t.versionStore=new R.default,t.fileStore=new D.default,t.formRef=y.default.createRef(),t}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(a=(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.versionStore.fetchList({app_id:this.props.app.app_id});case 2:return this.state.formData.version_id||this.setState({formData:A(A({},this.state.formData),{},{version_id:(0,S.default)(this.versionStore,"list.data[0].version_id","")})}),e.next=5,this.fileStore.fetch({app_id:this.props.app.app_id,version_id:this.state.formData.version_id});case 5:this.setState({intializing:!1});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderSteps",value:function(){return y.default.createElement("div",{className:I.default.steps},y.default.createElement(k.default,{steps:this.steps,current:this.state.currentStep}))}},{key:"renderForm",value:function(){var e=this.props,t=e.app,a=e.cluster,r=e.workspace,n=e.namespace,l=e.versionId,o=this.state,u=o.formData,c=o.currentStep;if(o.intializing)return y.default.createElement(_.Loading,{className:I.default.loading});var s=this.steps[c],i=s.component,f={formData:u,cluster:a,workspace:r,namespace:n,versionId:l,versionStore:this.versionStore,fileStore:this.fileStore,appId:t.app_id};return s.isForm?f.formRef=this.formRef:f.ref=this.formRef,y.default.createElement("div",{className:I.default.form},y.default.createElement(i,f))}},{key:"renderFooter",value:function(){var e=this.state.currentStep,a=this.steps.length-1;return y.default.createElement("div",{className:I.default.footer},e>0&&y.default.createElement(_.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),e<a?y.default.createElement(_.Button,{type:"control",onClick:this.handleNext},t("NEXT")):y.default.createElement(_.Button,{type:"control",onClick:this.handleOk,loading:this.props.store.isSubmitting},t("INSTALL")))}},{key:"render",value:function(){var e=this.props,t=e.app,a=(e.versionId,e.onOk,e.onCancel),r=(e.isSubmitting,(0,o.default)(e,["app","versionId","onOk","onCancel","isSubmitting"]));return y.default.createElement(O.default,(0,l.default)({bodyClassName:I.default.body,imageIcon:t.icon||t.name,title:t.name,description:t.description,onCancel:a,rightScreen:!0,hideFooter:!0},r),this.renderSteps(),this.renderForm(),this.renderFooter())}},{key:"steps",get:function(){return[{title:"BASIC_INFORMATION",component:C.default,required:!0,isForm:!0},{title:"APP_SETTINGS",component:T.default,required:!0}]}}]),n}(y.default.Component),i.propTypes={visible:g.default.bool,app:g.default.object,store:g.default.object,cluster:g.default.string,workspace:g.default.string,namespace:g.default.string,versionId:g.default.string,onOk:g.default.func,onCancel:g.default.func},i.defaultProps={visible:!1,app:{},onOk:function(){},onCancel:function(){}},s=f))||s;a.default=M},function(e,t,a){e.exports={title:"_33R0U9boImf8m2I9YsvtEM",placement:"_1DPArJcOi3947q7-jkb3IH",placementWrapper:"Cn8-UAsOj9IFn4AwvBErg",placementContent:"ZsCFEc87YJzsBpso9LRfs"}},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(31),r(6),r(18),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43)),u=n(r(30));r(41);var c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(49)),E=r(186),y=n(r(3)),g=n(r(996)),b=n(r(790)),S=n(r(828)),_=n(r(26)),O=n(r(241)),C=n(r(74)),T=r(14),R=r(239),D=l(r(0)),N=n(r(439)),k=n(r(445)),I=r(52),P=n(r(3190));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=(0,R.observer)((s=function(e){(0,p.default)(c,e);var a,r,n,l=M(c);function c(){var e;(0,f.default)(this,c);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(e=l.call.apply(l,[this].concat(r))).state={showForm:!1,initializing:!0,formData:e.props.formData},e.formRef=D.default.createRef(),e.workspaceStore=new k.default,e.projectStore=new N.default,e.fetchNamespaces=(0,i.default)(o.default.mark((function t(){var a,r,n,l,u=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:{},r=e.state.formData,n=r.workspace,l=r.cluster,!n||!l){t.next=5;break}return t.next=5,e.projectStore.fetchList(w(w({},a),{},{workspace:n,cluster:l,ascending:!0}));case 5:case"end":return t.stop()}}),t)}))),e.handleWorkspaceChange=function(){e.fetchClusters(),(0,C.default)(e.state.formData,"cluster",""),(0,C.default)(e.state.formData,"namespace","")},e.handleClusterChange=function(){e.fetchNamespaces(),(0,C.default)(e.state.formData,"namespace","")},e.handleSubmit=function(){var t=e.formRef.current;t&&t.validate((function(){Object.assign(e.props.formData,w({},e.state.formData)),e.hideForm()}))},e.showForm=function(){e.setState({showForm:!0})},e.hideForm=function(){e.setState({showForm:!1})},e.projectOptionRenderer=function(e){return D.default.createElement("span",{className:P.default.option},e.isFedManaged?D.default.createElement("img",{className:P.default.indicator,src:"/assets/cluster.svg"}):D.default.createElement(E.Icon,{name:"project"}),e.label,e.isFedManaged&&D.default.createElement(E.Tooltip,{content:t("FEDPROJECT_CANNOT_DEPLOY_APP_TIP")},D.default.createElement(E.Icon,{className:P.default.tip,name:"question"})))},e.clusterOptionRenderer=function(e){return D.default.createElement("div",null,D.default.createElement("div",null,e.label),!e.cluster.isReady&&D.default.createElement("div",null,D.default.createElement(g.default,{data:e.cluster,noTip:!0})))},e}return(0,d.default)(c,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:(n=(0,i.default)(o.default.mark((function e(){var t,a,r,n,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({initializing:!0}),t=this.state.formData,a=t.workspace,r=t.cluster,n=t.namespace,e.next=4,this.fetchWorkspaces();case 4:return a||(0,C.default)(this.state.formData,"workspace",(0,_.default)(this.workspaces,"[0].value")),e.next=7,this.fetchClusters();case 7:return r||(0,C.default)(this.state.formData,"cluster",(0,_.default)(this.clusters,"[0].value")),e.next=10,this.fetchNamespaces();case 10:n||(l=this.namespaces.find((function(e){return!e.disabled}))||{},(0,C.default)(this.state.formData,"namespace",l.value||"")),Object.assign(this.props.formData,this.state.formData),this.setState({initializing:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchWorkspaces",value:(r=(0,i.default)(o.default.mark((function e(){var t,a=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.workspaceStore.fetchList(w(w({},t),{},{limit:-1,ascending:!0}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchClusters",value:(a=(0,i.default)(o.default.mark((function e(){var t,a,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!(a=this.state.formData.workspace)){e.next=5;break}return e.next=5,this.workspaceStore.fetchClusters(w(w({},t),{},{workspace:a,limit:-1,ascending:!0}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderPlacement",value:function(){var e=this.props.formData,a=e.namespace,r=e.workspace,n=e.cluster;return D.default.createElement("div",{className:P.default.placement},D.default.createElement(b.default,{className:P.default.text,title:(0,I.showNameAndAlias)(r,"workspace"),description:t("WORKSPACE")}),D.default.createElement(b.default,{className:P.default.text,title:(0,I.showNameAndAlias)(n,"cluster"),description:t("CLUSTER")}),D.default.createElement(b.default,{className:P.default.text,icon:"project",title:(0,I.showNameAndAlias)(a,"project",{cluster:n}),description:t("PROJECT")}),D.default.createElement(E.Icon,{className:P.default.icon,name:"chevron-down",size:20}))}},{key:"renderForm",value:function(){var e=this.props.workspace;return D.default.createElement("div",{className:P.default.form},D.default.createElement(E.Form,{ref:this.formRef,type:"inner",data:this.state.formData},D.default.createElement(E.Columns,null,D.default.createElement(E.Column,null,D.default.createElement(E.Form.Item,{label:t("WORKSPACE")},D.default.createElement(E.Select,{name:"workspace",placeholder:t("WORKSPACE_EMPTY_DESC"),options:this.workspaces,onChange:this.handleWorkspaceChange,prefixIcon:D.default.createElement(E.Icon,{name:"enterprise",size:16}),disabled:!!e}))),D.default.createElement(E.Column,null,D.default.createElement(E.Form.Item,{label:t("CLUSTER")},D.default.createElement(E.Select,{name:"cluster",placeholder:" ",options:this.clusters,onChange:this.handleClusterChange,optionRenderer:this.clusterOptionRenderer,prefixIcon:D.default.createElement(E.Icon,{name:"cluster",size:16}),showTip:!0}))),D.default.createElement(E.Column,null,D.default.createElement(E.Form.Item,{label:t("PROJECT"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},D.default.createElement(E.Select,{name:"namespace",placeholder:" ",options:this.namespaces,pagination:(0,O.default)(this.projectStore.list,["page","limit","total"]),isLoading:this.projectStore.list.isLoading,onFetch:this.fetchNamespaces,valueRenderer:this.projectOptionRenderer,optionRenderer:this.projectOptionRenderer,clearable:!0}))))),D.default.createElement(S.default,{className:P.default.confirm,onOk:this.handleSubmit,onCancel:this.hideForm}))}},{key:"render",value:function(){var e=this.state,a=e.showForm,r=e.formData,n=e.initializing;return a?this.renderForm():D.default.createElement("div",{className:(0,y.default)(P.default.wrapper,(0,u.default)({},P.default.expand,a)),onClick:this.showForm},r.namespace?this.renderPlacement():D.default.createElement("div",{className:P.default.placeholder},n?D.default.createElement(E.Loading,{className:"text-center"}):t("PROJECT_NOT_SELECT_DESC")))}},{key:"workspaces",get:function(){return this.workspaceStore.list.data.filter((function(e){return e.name!==globals.config.systemWorkspace})).map((function(e){return{label:(0,I.showNameAndAlias)(e),value:e.name}}))}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:(0,I.showNameAndAlias)(e),value:e.name,disabled:!e.isReady,cluster:e}}))}},{key:"namespaces",get:function(){return this.projectStore.list.data.filter((function(e){return"Terminating"!==e.status})).map((function(e){return{label:(0,I.showNameAndAlias)(e),value:e.name,disabled:e.isFedManaged,isFedManaged:e.isFedManaged}}))}}]),c}(D.Component),(0,h.default)(s.prototype,"workspaces",[T.computed],Object.getOwnPropertyDescriptor(s.prototype,"workspaces"),s.prototype),(0,h.default)(s.prototype,"clusters",[T.computed],Object.getOwnPropertyDescriptor(s.prototype,"clusters"),s.prototype),(0,h.default)(s.prototype,"namespaces",[T.computed],Object.getOwnPropertyDescriptor(s.prototype,"namespaces"),s.prototype),c=s))||c;a.default=L},function(e,t,a){e.exports={wrapper:"_1-zzsgQcL6AnKOs_Sxiu20",placeholder:"_1VOZnqeyx9mHYMTD8k_Q3_",form:"_1AI73FeUImn3gHEsO9StyJ",confirm:"_3w7hJkkJRGqAW2U6H4l_3l",placement:"_2RflgzEx5EebIR0t5yYHhq",text:"_3sMJ4G-DVsOmo9TkX6Xlhr",icon:"_19fvfv87icQ9tqCf2bPw6L",option:"_3GsdSpU7z-pczQtQ6zwAgG",tip:"-gsMZiJ2S2gdBb2vcv9oy"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(74)),p=r(14),m=r(239),v=r(186),h=n(r(841)),E=n(r(850)),y=r(52),g=r(894),b=n(r(3192)),S=n(r(3194));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={valuesYaml:"",valuesJSON:{},valuesSchema:void 0,loadingFile:!0,isCodeMode:!1},e.updateState=function(){var t=e.props.fileStore.files;t?e.setState({valuesYaml:t["values.yaml"],valuesJSON:(0,g.getValueObj)(t["values.yaml"]),valuesSchema:(0,y.safeParseJSON)(t["values.schema.json"]),loadingFile:!1}):e.setState({loadingFile:!1})},e.updateFormData=function(){var t=e.props.formData,a=e.state,r=a.isCodeMode,n=a.valuesYaml,l=a.valuesJSON,o=a.valuesSchema;(0,d.default)(t,"conf",(0,g.getValue)(r||!o?(0,g.getValueObj)(n):l))},e.handleModeChange=function(){var t=e.state.isCodeMode;e.setState({isCodeMode:!t})},e.handleValueChange=function(t){e.setState({valueJSON:t})},e.handleYamlChange=function(t){e.setState({valuesYaml:t})},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.updateState(),this.props.fileStore.files.packageFiles||(this.dispather=(0,p.reaction)((function(){return e.props.fileStore.files}),this.updateState))}},{key:"componentWillUnmount",value:function(){this.dispather&&this.dispather()}},{key:"validate",value:function(e){this.updateFormData(),e&&e()}},{key:"renderYamlEdit",value:function(){var e=this.state.valuesYaml;return f.default.createElement("div",{className:S.default.codeWrapper},f.default.createElement(h.default,{mode:"yaml",value:e,onChange:this.handleYamlChange}))}},{key:"renderSchemaForm",value:function(){var e=this.state,t=e.valuesJSON,a=e.valuesSchema;return f.default.createElement("div",{className:S.default.schemaWrapper},f.default.createElement(b.default,{schema:a,value:t,onChange:this.handleValueChange}))}},{key:"render",value:function(){var e=this.state,a=e.valuesSchema,r=e.loadingFile,n=e.isCodeMode,l=n||!a;return r?f.default.createElement(v.Loading,{className:S.default.loading}):f.default.createElement("div",{className:S.default.wrapper},f.default.createElement("div",{className:S.default.title},f.default.createElement("div",null,t("APP_SETTINGS")),a&&f.default.createElement(E.default,{className:S.default.switch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:n})),a&&f.default.createElement(v.Alert,{className:"margin-b12",type:"info",message:t("HELM_APP_SCHEMA_FORM_TIP")}),l?this.renderYamlEdit():this.renderSchemaForm())}}]),r}(f.default.Component))||l;a.default=O},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),a(5),a(187),a(27),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(5),a(187),a(42),a(27),a(4),a(319),a(23),a(57),a(17);var n=r(a(61)),l=r(a(246)),o=r(a(315)),u=r(a(36)),c=r(a(37)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(0)),p=r(a(1)),m=r(a(895)),v=r(a(26)),h=r(a(74)),E=r(a(1158)),y=r(a(198)),g=r(a(800)),b=r(a(63)),S=r(a(925)),_=a(186),O=r(a(790)),C=r(a(799)),T=r(a(3193));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var D=function(e){(0,s.default)(a,e);var t=R(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={value:e.props.value},e.triggerChange=(0,g.default)((function(t){e.props.onChange(t)}),300),e.generateMarks=function(e,t){for(var a=parseInt((t-e)/5,10),r={},n=0;n<5;n++){var l=e+n*a;r[l]=l}return r[t]=t,r},e.renderFormItem=function(t,a,r){var n,l=e.state.value,u={defaultValue:(0,v.default)(l,r,""),onChange:function(t){return e.handleFormChange((0,h.default)(l,r,t))}};switch(t.type){case"string":if("slider"===t.render){var c,s=null!==(c=t.sliderMin)&&void 0!==c?c:0,i=Number(t.sliderMax),f=(0,S.default)(i)?100:i<s?s+100:i;n=d.default.createElement(_.Slider,(0,o.default)({max:f,min:s,unit:t.sliderUnit,marks:e.generateMarks(s,f)},u,{withInput:!0}))}else n="textArea"===t.render?d.default.createElement(_.TextArea,u):d.default.createElement(_.Input,u);break;case"integer":n=d.default.createElement(C.default,(0,o.default)({},u,{min:0,integer:!0}));break;case"boolean":n=d.default.createElement("div",{className:T.default.boolean},d.default.createElement(_.Toggle,(0,o.default)({},u,{defaultChecked:(0,v.default)(l,r,!1)})),d.default.createElement(O.default,{title:t.title,description:t.description}));break;case"array":n=d.default.createElement(d.default.Fragment,null,"todo");break;default:n=d.default.createElement(d.default.Fragment,null)}return d.default.createElement(_.Form.Item,{key:a,label:"boolean"===t.type?"":t.title,desc:"boolean"===t.type?"":t.description},n)},e.renderSchemaForm=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=t.type,u=t.form,c=e.state.value,s="object"===(0,l.default)(t.hidden)?(0,v.default)(c,t.hidden.value,null)===t.hidden.condition:(0,v.default)(c,t.hidden,!1);if(s)return null;if("object"===o){var i=(0,m.default)(t.properties,(function(t,a){return e.renderSchemaForm(t,a,[].concat((0,n.default)(r),[a]))}));if((0,b.default)(i)||i.every((function(e){return!e})))return null;var f=t.properties&&(0,E.default)(t.properties,(function(e){return(0,y.default)(e,"properties")}));return d.default.createElement("div",{key:a,className:f?T.default.parentGroup:T.default.group},t.title&&d.default.createElement("div",{className:T.default.title},t.title),t.description&&d.default.createElement("p",{className:T.default.description},t.description),i)}return u?e.renderFormItem(t,a,r):null},e}return(0,c.default)(a,[{key:"handleFormChange",value:function(e){this.setState({value:e}),this.triggerChange(e)}},{key:"render",value:function(){var e=this.props.schema;return this.renderSchemaForm(e)}}]),a}(d.default.Component);t.default=D,D.propTypes={schema:p.default.object,value:p.default.object,onChange:p.default.func},D.defaultProps={onChange:function(){}}},function(e,t,a){e.exports={group:"_3xTfalXI7Y64g0li2u6vG2",title:"_182KrRnt2udLzkiRSMx9JE",description:"_2839u1rW56wEbtmaeCpjpO",boolean:"_3mnMZpC4gF0oolH9K1bn2W",parentGroup:"HW1rPNOyhUpkrn584aGu-"}},function(e,t,a){e.exports={wrapper:"TLG9iSoooMsoVDmn61N6I",title:"_1eUI0tEXI3u8lHvjGDMO3f",switch:"_32tTvAbdJ_mXTYRvGpAE2n",codeWrapper:"_3uRVlVgjuj0HJpjr9wInob",schemaWrapper:"_3VOv76O-06CKHBW5mIv-lM",loading:"_2ckKN8H46Wi058LIpHKyNF"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(3)),m=l(r(3196));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,s.default)(r,e);var a=v(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return d.default.createElement("div",{className:m.default.wrapper},a.map((function(e,a){var n;return d.default.createElement("div",{key:e.title},d.default.createElement("span",{className:(0,p.default)(m.default.indicator,(n={},(0,o.default)(n,m.default.fullfill,r>a),(0,o.default)(n,m.default.current,r===a),(0,o.default)(n,m.default.pending,r<a),n))}),d.default.createElement("span",null,t(e.title)))})))}}]),r}(d.Component);a.default=h},function(e,t,a){e.exports={wrapper:"_1rMJfMVFnxLy1REsL1b0d2",indicator:"_1AbVJwEGRYpTCxZ4fg8_sj",pending:"_1G5x995omZkUPUMTKD4tAN",current:"_2bAp9vrnpwq4_uGyp0SW3g",fullfill:"GN3iaoOEvA_qq-V2O-jXe"}},function(e,t,a){e.exports={body:"llEBCzPZ3tg-xtEiqsqId",form:"_1CBuVzX83GlsKJl1N68JLM",steps:"_3GIS02Ma2AO6qKKu1n_m0z",footer:"_3huyye8nSYCWnxBm26xXvq",loading:"_1A8KLi4Z4xBf-34211Mprr"}},,function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(12),r(109),r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(136),r(75),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17),r(75);var o=n(r(315)),u=n(r(30)),c=n(r(58)),s=n(r(43));r(41);var i,f,d,p=n(r(44)),m=n(r(36)),v=n(r(37)),h=n(r(55)),E=n(r(56)),y=n(r(51)),g=l(r(0)),b=n(r(1)),S=r(239),_=n(r(3)),O=r(186),C=n(r(26)),T=r(14),R=n(r(787)),D=n(r(836)),N=n(r(3200)),k=n(r(3202)),I=n(r(3204)),P=n(r(1382)),A=n(r(3206)),w=n(r(469)),M=n(r(942)),L=n(r(935)),j=n(r(3208));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,y.default)(e);if(t){var n=(0,y.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,E.default)(this,a)}}var U=O.Tabs.TabPanel,F=(0,S.observer)((d=f=function(e){(0,h.default)(r,e);var a=x(r);function r(e){var t;return(0,m.default)(this,r),(t=a.call(this,e)).fetchData=function(e){var a=e.detail;t.store.fetchDetail({app_id:a.app_id}),t.versionStore.fetchDetail({app_id:a.app_id,version_id:a.version_id}),t.fileStore.fetch({app_id:a.app_id,version_id:a.version_id})},t.getPackageName=function(){var e=t.props.detail,a=(0,C.default)(t.versionStore,"detail.package_name");return!a||a.startsWith("att-")?"".concat(e.app_name,"-").concat(e.version_name):a},t.handleTabChange=function(){var e=(0,p.default)(s.default.mark((function e(a){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({tab:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.store=new w.default,t.versionStore=new M.default,t.fileStore=new L.default,t.state={tab:"appInfo"},t}return(0,v.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.fetchData(this.props)}},{key:"componentDidMount",value:function(){this.props.visible&&this.fetchData(this.props)}},{key:"renderBaseInfo",value:function(){var e=(0,T.toJS)(this.store.detail),a=(0,T.toJS)(this.versionStore.detail),r=(0,C.default)(e,"screenshots",""),n=r?r.split(","):[],l=n.length;return g.default.createElement(g.default.Fragment,null,g.default.createElement(N.default,{detail:e,versionName:a.name}),g.default.createElement("div",{className:j.default.screenshots},g.default.createElement("div",{className:j.default.title},t("APP_SCREENSHOTS")),l>0?g.default.createElement("ul",null,n.map((function(e,t){return g.default.createElement("li",{key:t},g.default.createElement(D.default,{src:e}))}))):g.default.createElement("p",null,t("NONE"))))}},{key:"renderConfigFiles",value:function(){var e=this.versionStore.detail,t=this.fileStore.files;return g.default.createElement("div",null,g.default.createElement(P.default,{className:j.default.downloadInfo,fileStore:this.fileStore,packageName:this.getPackageName(),updateTime:e.update_time||e.status_time,appId:e.app_id,versionId:e.version_id,hasPackage:!0}),g.default.createElement(I.default,{files:t}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.isSubmitting,r=e.onReject,n=e.onOk;return g.default.createElement("div",{className:j.default.footer},g.default.createElement(O.Button,{type:"danger",onClick:r},t("REJECT")),g.default.createElement(O.Button,{type:"control",loading:a,disabled:a,onClick:n},t("APPROVE")))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.canHandle,n=(0,c.default)(e,["visible","canHandle"]),l=(0,T.toJS)(this.versionStore.detail),s=this.state.tab,i=(0,C.default)(this.fileStore,"files",{})["README.md"];return g.default.createElement(R.default,(0,o.default)({bodyClassName:(0,_.default)(j.default.body,(0,u.default)({},j.default.hideFooter,!r)),visible:a},n,{rightScreen:!0,hideFooter:!0}),g.default.createElement(O.Tabs,{type:"button",activeName:s,onChange:this.handleTabChange},g.default.createElement(U,{label:t("APP_INFORMATION"),name:"appInfo"},this.renderBaseInfo()),g.default.createElement(U,{label:t("DOCUMENTATION"),name:"readme"},g.default.createElement(k.default,{readme:i})),g.default.createElement(U,{label:t("CHART_FILES"),name:"configFiles"},this.renderConfigFiles()),g.default.createElement(U,{label:t("UPDATE_LOG"),name:"updateLog"},g.default.createElement(A.default,{description:l.description}))),r&&this.renderFooter())}}]),r}(g.Component),f.propTypes={visible:b.default.bool,canHandle:b.default.bool,detail:b.default.object,onReject:b.default.func,onOk:b.default.func,onCancel:b.default.func},f.defaultProps={visible:!1,canHandle:!1,detail:{},onReject:function(){},onOk:function(){},onCancel:function(){}},i=d))||i;a.default=F},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(42),r(16),r(4),r(23),r(57),r(24),r(193),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(836)),m=n(r(1001)),v=r(239),h=n(r(1)),E=n(r(0)),y=r(52),g=n(r(3201));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=b(r);function r(){return(0,c.default)(this,r),a.apply(this,arguments)}return(0,s.default)(r,[{key:"renderBase",value:function(){var e=this.props,a=e.detail,r=e.versionName,n=a.home?/^https?:\/\//.test(a.home)?a.home:"http://".concat(a.home):a.home;return E.default.createElement("div",{className:g.default.base},E.default.createElement("div",{className:g.default.title},t("BASIC_INFORMATION")),E.default.createElement("div",{className:g.default.info},E.default.createElement("div",{className:g.default.icon},E.default.createElement(p.default,{src:a.icon,iconLetter:a.name,iconSize:100})),E.default.createElement("div",{className:g.default.words},E.default.createElement("dl",null,E.default.createElement("dd",null,a.name),E.default.createElement("dt",null,t("NAME"))),E.default.createElement("dl",null,E.default.createElement("dd",null,globals.config.showOutSiteLink&&E.default.createElement("a",{href:(0,y.hrefControl)(n),target:"_blank",rel:"noopener noreferrer"},a.home),!a.home&&E.default.createElement("span",null,"-")),E.default.createElement("dt",null,t("SERVICE_PROVIDER_WEBSITE")))),E.default.createElement("div",null,E.default.createElement("dl",null,E.default.createElement("dd",null,r),E.default.createElement("dt",null,t("VERSION"))),E.default.createElement("dl",null,E.default.createElement("dd",null,(0,y.showNameAndAlias)(a.isv,"workspace")),E.default.createElement("dt",null,t("WORKSPACE"))))),E.default.createElement("div",{className:g.default.description},E.default.createElement("dl",null,E.default.createElement("pre",null,a.description||"-"),E.default.createElement("dt",null,t("INTRODUCTION")))),E.default.createElement("div",{className:g.default.title},t("APP_DESCRIPTION")),E.default.createElement("div",null,E.default.createElement(m.default,{source:a.abstraction||t("NONE")})))}},{key:"render",value:function(){return E.default.createElement("div",{className:g.default.main},this.renderBase())}}]),r}(E.default.Component),o.propTypes={detail:h.default.object,versionName:h.default.string},o.defaultProps={detail:{},versionName:""},l=u))||l;a.default=S},function(e,t,a){e.exports={base:"_3RhG54Afc3jTrbfar2yUo0",info:"_2pPSF0uuUVhnDFREH_W1RE",icon:"sN1v3yg2lJsboH2B2H53J",words:"vEULlxo--39bvTHCeQZnd",description:"_1Sv5X8JxKxpsz_-ZoHkVMt",title:"_1PRTS92xyJ2yUX613onuo4",banLink:"VE_ECtfsbM2wxJue7ZAW3"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(1001)),p=n(r(3203));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.readme;return e?i.default.createElement(d.default,{source:e,className:p.default.markdown}):i.default.createElement("p",null,t("NO_DOCUMENT_FOUND"))}}]),r}(i.default.PureComponent);a.default=v,v.propTypes={readme:f.default.string},v.defaultProps={readme:""}},function(e,t,a){e.exports={markdown:"V_-mqFB-1z1gAg3djZCMg"}},function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(9),r(10),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(191),r(42),r(159),r(9),r(10),r(4),r(23),r(57),r(24),r(17),r(64);var l,o,u,c,s,i=n(r(30)),f=n(r(65)),d=n(r(36)),p=n(r(37)),m=n(r(88)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=(n(r(66)),n(r(49))),g=n(r(0)),b=r(239),S=r(186),_=r(14),O=r(909),C=n(r(3)),T=n(r(1268)),R=n(r(841)),D=n(r(3205));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var k=(0,b.observer)((o=function(e){(0,v.default)(r,e);var a=N(r);function r(e){var t;return(0,d.default)(this,r),(t=a.call(this,e)).DEFAULT_PREVIEW_FILE="values.yaml",(0,f.default)(t,"changeMode",u,(0,m.default)(t)),(0,f.default)(t,"changeSelectFile",c,(0,m.default)(t)),(0,f.default)(t,"changePreviewType",s,(0,m.default)(t)),t.handleDownload=function(){var e=t.props.files[t.selectFile];"yaml"===t.mode?t.downloadAsYaml(e):"json"===t.mode&&t.downloadAsJSON(e)},(0,_.extendObservable)((0,m.default)(t),{selectFile:t.defaultSelectFile,mode:"yaml"}),t}return(0,p.default)(r,[{key:"downloadAsJSON",value:function(e){var t=this.selectFile.replace(/yaml$/,"json"),a="";try{a=JSON.stringify(T.default.safeLoad(e),null,2)}catch(e){a=e}this.saveAs(a,t)}},{key:"downloadAsYaml",value:function(e){var t=this.selectFile;this.saveAs(e,t)}},{key:"saveAs",value:function(e,t){var a=new Blob([e],{type:"text/plain;charset=utf-8"});(0,O.saveAs)(a,t)}},{key:"render",value:function(){return this.selectFile?g.default.createElement("div",{className:D.default.wrapper},g.default.createElement("div",{className:D.default.topbar},g.default.createElement("div",{className:D.default.icon},g.default.createElement(S.Icon,{name:"coding",size:20}),g.default.createElement("span",null,t("CHART_FILES"))),this.renderFileSelect()),g.default.createElement("div",{className:D.default.edit},this.renderPreviewToolbar(),this.renderPreviewContent())):g.default.createElement("p",null,t("NO_APP_CHART_FILE_FOUND"))}},{key:"renderFileSelect",value:function(){return g.default.createElement(S.Select,{defaultValue:this.selectFile,onChange:this.changeSelectFile,options:this.fileOptions})}},{key:"renderPreviewToolbar",value:function(){return g.default.createElement("div",{className:D.default.toolbar},g.default.createElement(S.Icon,{className:D.default.download,name:"download",size:20,color:{primary:"#fff"},onClick:this.handleDownload,clickable:!0,changeable:!0}))}},{key:"renderPreviewTypeBtn",value:function(e,t){var a=this;return g.default.createElement("span",{className:(0,C.default)(D.default.preview_btn,(0,i.default)({},D.default.active,this.mode===e)),onClick:function(){return a.changePreviewType(e)}},t)}},{key:"renderPreviewContent",value:function(){return g.default.createElement(R.default,{mode:this.mode,value:this.props.files[this.selectFile],options:{readOnly:!0}})}},{key:"fileOptions",get:function(){var e=this.props.files,t=void 0===e?{}:e;return Object.keys(t).map((function(e){return{label:e,value:e}}))}},{key:"defaultSelectFile",get:function(){var e=this.props.files,t=(void 0===e?{}:e)[this.DEFAULT_PREVIEW_FILE],a=this.fileOptions.length?this.fileOptions[0].value:"";return t?this.DEFAULT_PREVIEW_FILE:a}}]),r}(g.default.Component),(0,y.default)(o.prototype,"fileOptions",[_.computed],Object.getOwnPropertyDescriptor(o.prototype,"fileOptions"),o.prototype),(0,y.default)(o.prototype,"defaultSelectFile",[_.computed],Object.getOwnPropertyDescriptor(o.prototype,"defaultSelectFile"),o.prototype),u=(0,y.default)(o.prototype,"changeMode",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.mode=t}}}),c=(0,y.default)(o.prototype,"changeSelectFile",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectFile=t}}}),s=(0,y.default)(o.prototype,"changePreviewType",[_.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.mode=t}}}),l=o))||l;a.default=k},function(e,t,a){e.exports={wrapper:"C9RBDezZTSZ9wuANVHPsi",topbar:"_1qDSB0O58SB7_GXNCw7_dc",icon:"_3srqZVcOkSMEixaltbPZi7",edit:"_2jL4KvBNHuC4jU_RiiIi4_",toolbar:"_2_GUQMPwxTWMMjXHWFT_Ka",download:"_3jjk2LxhatXGcY7nGnb2Fl",preview_btn:"_20Qa4VKbEwotZP_JgGCEar",active:"_3QE1zwmNIDX4CN7ZNPOTga"}},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(3207));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.description;return i.default.createElement("div",{className:d.default.main},i.default.createElement("div",{className:d.default.title},t("UPDATE_LOG")),i.default.createElement("pre",{className:d.default.updateLog},e||t("NO_UPDATE_LOG_DESC")))}}]),r}(i.default.PureComponent);a.default=m,m.propTypes={description:f.default.string},m.defaultProps={description:""}},function(e,t,a){e.exports={main:"_2u4FA6A7MCUfIFe4Z8dqKO",title:"_1xP27HuPsxtLPGTg0MT-St"}},function(e,t,a){e.exports={body:"_2IouoNUd7iTI3nxkqsDwX7",hideFooter:"_3c8gxa4F0ILHsBRr299LfN",downloadInfo:"_3KDp6pP6cAe17QzOMgHY9_",screenshots:"_2hMAd_6nxqkUS9UaXkSw-a",title:"_1CJO5lsaTds2qNIyfcMs4u",footer:"_3qPgJzENw1ErWJvWwB6Ij6"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(58)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(1)),v=r(186),h=l(r(787)),E=l(r(3210));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleReject=function(){return t.formRef.validate((function(){return t.props.onOk({version_id:t.props.versionId,message:t.state.message})}))},t.changeMessage=function(e){t.setState({message:e})},t.state={message:""},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=(0,u.default)(a,["visible"]),l={message:this.state.message};return p.default.createElement(h.default,(0,o.default)({width:600,visible:r},n,{onOk:this.handleReject,footerClassName:E.default.footer}),p.default.createElement(v.Form,{data:l,ref:function(t){e.formRef=t},className:E.default.rejectForm},p.default.createElement(v.Form.Item,{rules:[{required:!0,message:t("REJECT_REASON_TIP")}]},p.default.createElement(v.TextArea,{name:"message",onChange:this.changeMessage}))))}}]),r}(p.Component);a.default=g,g.propTypes={versionId:m.default.string,onOk:m.default.func,onCancel:m.default.func},g.defaultProps={versionId:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={rejectForm:"_2HRp9_fNHxQCirZ1195MMj",footer:"_2lsP4pTvid2tIQnqGzOeDI"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(12),r(109),r(84),r(18),r(16),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(84),r(18),r(42),r(16),r(4),r(23),r(57),r(17),r(85);var o=l(r(315)),u=l(r(30)),c=l(r(58)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=n(r(0)),v=l(r(1)),h=l(r(3)),E=r(186),y=l(r(806)),g=l(r(787)),b=r(327),S=l(r(3212));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=function(e){(0,f.default)(r,e);var a=_(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).changeName=function(e){n.setState({name:e})},n.changeIcon=function(e){n.setState({description:e})},n.nameValidator=function(e,a,r){if(!a)return r();var l=n.props,o=l.detail,u=l.categoryNames;if(a!==o.name&&u.includes(a))return r({message:t("NAME_EXIST_DESC"),field:e.field});r()},n.createOrModify=function(){var e={name:n.state.name,description:n.state.description,locale:"{}"},t=n.props.detail.category_id;t&&(e.category_id=t),n.formRef.validate((function(){n.props.onOk(e)}))},n.onCancel=function(){n.setState({name:"",description:""}),n.props.onCancel()},n.state={name:n.props.detail.name,description:n.props.detail.description},n}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.detail;(0,y.default)(t,e.detail)||this.setState({name:t.name,description:t.description})}},{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=(0,c.default)(a,["visible"]),l={name:this.state.name,description:this.state.description};return m.default.createElement(g.default,(0,o.default)({width:600,visible:r,footerClassName:S.default.footer},n,{onOk:this.createOrModify,onCancel:this.onCancel}),m.default.createElement(E.Form,{data:l,ref:function(t){e.formRef=t}},m.default.createElement(E.Form.Item,{label:t("NAME"),desc:t("CATEGORY_NAME_DESC"),rules:[{required:!0,message:t("ENTER_CATEGORY_NAME_TIP")},{validator:this.nameValidator}]},m.default.createElement(E.Input,{name:"name",onChange:this.changeName,maxLength:20})),m.default.createElement(E.Form.Item,{label:t("ICON")},m.default.createElement("div",{name:"description",className:S.default.icons,value:l.description},b.CATEGORY_ICONS.map((function(t){return m.default.createElement("label",{key:t,onClick:function(){return e.changeIcon(t)},className:(0,h.default)((0,u.default)({},S.default.active,t===l.description))},m.default.createElement(E.Icon,{name:t,size:20}))}))))))}}]),r}(m.Component);a.default=O,O.propTypes={detail:v.default.object,categoryNames:v.default.array,onOk:v.default.func,onCancel:v.default.func},O.defaultProps={detail:{},categoryNames:[],onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={footer:"_2Qp-Oq8oA7HhDGSXylc-1b",icons:"XKu-mU-Dz1wbD5ksgEs7z",active:"_3i5IWpdoNOUzlLf-hGhkbI"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(16),r(137),r(4),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(16),r(137),r(4),r(23),r(57),r(24),r(17),r(64);var o=l(r(61)),u=l(r(315)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(1)),v=r(186),h=l(r(787)),E=l(r(3214));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({categoryId:e})},t.adjustCategory=function(){t.props.onOk({category_id:t.state.categoryId})},t.onCancel=function(){t.setState({categoryId:""}),t.props.onCancel()},t.state={categoryId:t.props.categoryId},t}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=Object.assign({},this.props),r={category_id:this.state.categoryId};return p.default.createElement(h.default,(0,u.default)({width:600,footerClassName:E.default.footer},a,{onOk:this.adjustCategory,onCancel:this.onCancel}),p.default.createElement(v.Form,{className:E.default.form,data:r,ref:function(t){e.formRef=t}},p.default.createElement(v.Form.Item,{label:t("CHANGE_CATEGORY"),desc:t("CHANGE_CATEGORY_DESC")},p.default.createElement(v.Select,{name:"category_id",options:this.categories,value:this.state.categoryId,onChange:this.handleChange}))))}},{key:"categories",get:function(){return(0,o.default)(this.props.categories.map((function(e){var a=e.name,r=e.category_id;return{label:t("APP_CATE_".concat(a.toUpperCase().replace(/[^A-Z]+/g,"_")),{defaultValue:a}),value:r}})))}}]),r}(p.Component);a.default=g,g.propTypes={categories:m.default.array,categoryId:m.default.string,onOk:m.default.func,onCancel:m.default.func},g.defaultProps={categories:[],categoryId:"",onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={footer:"_2TvTf_D-_JM0vtni7wgWQZ",form:"_3wLMP_UWlRBwrQYi452Fek"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(11),r(137),r(4),r(23),r(24),r(17),r(64),r(75),r(818),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(137),r(4),r(436),r(319),r(22),r(23),r(57),r(24),r(17),r(64),r(75),r(818);var o=l(r(315)),u=l(r(43));r(41);var c=l(r(44)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=n(r(0)),v=l(r(1)),h=l(r(26)),E=l(r(135)),y=r(186),g=l(r(966)),b=l(r(787)),S=l(r(984)),_=r(815);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=function(e){(0,f.default)(r,e);var a=O(r);function r(e){var n;(0,s.default)(this,r),(n=a.call(this,e)).getSliderMax=function(e){return e?(0,h.default)(n.valueSchema,"properties.".concat(e,".properties.volume.sliderMax"),2048):(0,h.default)(n.valueSchema,"properties.volume.sliderMax",2048)},n.onChange=function(e){var a=(0,_.validateStorage)(e,{app_id:n.props.app_id,nodeRole:n.state.nodeRole,max:n.max,oldStorage:n.oldStorage}).message,r=void 0===a?"":a,l=parseFloat(e);l<parseFloat(n.oldStorage)&&(r=t("CANNOT_REDUCE_VOLUME_SIZE")),e&&l>0&&e.trim().startsWith("0")?n.setState({storage:e.replace(/^0*/,""),errorMessage:r}):n.setState({storage:e,errorMessage:r})},n.onRoleChange=function(e){var t=n.props.storages,a=(void 0===t?{}:t)[e]||{};n.oldStorage=a,n.max="zookeeper"===e?100:2048,n.setState({nodeRole:e,storage:a});var r=n.getSliderMax(e);n.max=r},n.onOk=(0,c.default)(u.default.mark((function e(){var t,a,r,l,o;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.errorMessage){e.next=2;break}return e.abrupt("return");case 2:return t=n.props,a=t.workspace,r=t.namespace,l=t.cluster,o=t.cluster_id,e.next=5,n.props.store.updateStorage({workspace:a,namespace:r,cluster:l,cluster_id:o,storage:n.state.storage,nodeRole:n.state.nodeRole});case 5:n.props.onOk();case 6:case"end":return e.stop()}}),e)}))),n.onCancel=function(){n.setState({categoryId:""}),n.props.onCancel()},n.generateMarks=function(){for(var e=parseInt((n.max-n.min)/4,10),t={},a=0;a<4;a++){var r=n.min+a*e;t[r]=0===r?r:r+"Gi"}return t[n.max]=n.max+"Gi",t};var l=e.storage,o=e.storages,i=e.nodes,f=e.app_id;n.valueSchema=(0,E.default)(_.ValuesSchema[f]),n.roleOptions=(0,_.getNodeRoleOptions)(f,"storage").filter((function(e){var t=e.value;return!i||i[t]>0}));var d=(0,h.default)(n.roleOptions,"[0].value");return n.state={nodeRole:d,storage:o?o[d]:l,errorMessage:""},n.min=1,n.max=o?n.getSliderMax(d):n.getSliderMax(),n.oldStorage=n.state.storage,n}return(0,i.default)(r,[{key:"render",value:function(){var e=this,a=Object.assign({},this.props),r=this.state,n=r.storage,l=r.errorMessage,u=r.nodeRole,c={storage:n},s=l?{message:l}:null;return m.default.createElement(b.default,(0,o.default)({width:600,footerClassName:S.default.footer},a,{onOk:this.onOk,onCancel:this.onCancel}),m.default.createElement(y.Alert,{className:S.default.alert,type:"warning",message:t("DATABASE_OPERATION_WARNING")}),m.default.createElement(y.Form,{className:S.default.form,data:c,ref:function(t){e.formRef=t}},u&&m.default.createElement(y.Form.Item,{label:t("NODE_ROLE")},m.default.createElement(y.Select,{name:"nodeRole",value:u,defaultValue:u,options:this.roleOptions,onChange:this.onRoleChange})),m.default.createElement(y.Form.Item,{label:t("VOLUME"),error:s},m.default.createElement(g.default,{max:this.max,marks:this.generateMarks(),value:this.state.storage,unit:"Gi",onChange:this.onChange,withInput:!0}))))}}]),r}(m.Component);a.default=C,C.propTypes={storage:v.default.string,onOk:v.default.func,onCancel:v.default.func},C.defaultProps={storage:"10Gi",onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(6),r(84),r(18),r(137),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(64),r(75),r(818),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(22),r(23),r(57),r(24),r(17),r(85),r(64),r(75),r(818),r(7);var o=l(r(315)),u=l(r(30)),c=l(r(43));r(41);var s=l(r(44)),i=l(r(36)),f=l(r(37)),d=l(r(55)),p=l(r(56)),m=l(r(51)),v=n(r(0)),h=l(r(1)),E=r(186),y=l(r(26)),g=l(r(966)),b=l(r(787)),S=l(r(1199)),_=l(r(984)),O=r(815);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=function(e){(0,d.default)(r,e);var a=R(r);function r(e){var n;(0,i.default)(this,r),(n=a.call(this,e)).handleChange=function(e){var a="";n.oldShardsCount>e&&![O.RadonDBAppId.MySQL,O.RadonDBAppId.PostgreSQL,O.RadonDBAppId.RedisCluster,O.RadonDBAppId.RedisSentinel,O.RadonDBAppId.MongoDB,O.RadonDBAppId.Elasticsearch,O.RadonDBAppId.OpenSearch].includes(n.props.app_id)&&(a=t("CANNOT_REDUCE_DATABASE_NODES")),""===e&&(a=t("ENTER_POSITIVE_INTEGER_DESC")),n.setState({shardsCount:e,errorMessage:a})},n.onOk=(0,s.default)(c.default.mark((function e(){var t,a,r,l,o,u,s,i,f,d,p;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.workspace,r=t.namespace,l=t.cluster,o=t.cluster_id,u=n.state,s=u.specifications,i=u.nodeRole,f=u.errorMessage,d=u.storageErrorMessage,p=u.storage,!f&&!d){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.props.store.updateShardsCount({workspace:a,namespace:r,cluster:l,cluster_id:o,shardsCount:n.state.shardsCount,nodeRole:i,specifications:s,storage:p});case 6:n.props.onOk(n.oldShardsCount>n.state.shardsCount);case 7:case"end":return e.stop()}}),e)}))),n.onCancel=function(){n.props.onCancel()},n.onRoleChange=function(e){var t=n.props,a=t.nodes,r=void 0===a?{}:a,l=t.specificationsObject,o=void 0===l?{}:l,u=t.storages,c=void 0===u?{}:u,s=t.app_id;switch(n.oldShardsCount=r[e],s){case O.RadonDBAppId.Elasticsearch:n.input.range="kibana"===e?{min:0,max:8}:{min:0===n.oldShardsCount?n.oldShardsCount:1,max:200};break;case O.RadonDBAppId.RedisCluster:n.input.range="proxy"===e?{min:0,max:50}:{min:3,max:50};break;case O.RadonDBAppId.Kafka:n.input="zookeeper"===e?{type:"select",title:"NODE_COUNT",description:" ",options:[1,3,5,7,9].map((function(e){return{label:e,value:e}}))}:{type:"integer",title:"NODE_COUNT",range:{min:1,max:100},showFunc:!0};break;case O.RadonDBAppId.OpenSearch:n.input.range="dashboard"===e?{min:0,max:8}:"logstash"===e?{min:0,max:10}:{min:0===n.oldShardsCount?n.oldShardsCount:1,max:200}}var i=o[e]||{},f=i.cpu,d=i.memory;n.setSpecificationsOptions(e);var p=c[e]||{};n.setState({nodeRole:e,shardsCount:r[e],specifications:"".concat(f,", ").concat(d),storage:p,errorMessage:""})},n.onSpecificationsChange=function(e){n.setState({specifications:e})},n.onStorageChange=function(e){var t=(0,O.validateStorage)(e,{app_id:n.props.app_id}).message,a=void 0===t?"":t,r=parseFloat(e);e&&r>0&&e.trim().startsWith("0")?n.setState({storage:e.replace(/^0*/,""),storageErrorMessage:a}):n.setState({storage:e,storageErrorMessage:a})};var l=e.shardsCount,o=e.nodes,u=e.specificationsObject,f=e.storages,d=e.storage,p=e.app_id;n.roleOptions=(0,O.getNodeRoleOptions)(p,"node").map((function(e){return T(T({},e),{},{disabled:void 0===(0,y.default)(o,e.value)})}));var m=(0,y.default)(n.roleOptions,"[0].value",""),v=(u||{})[m]||{},h=v.cpu,E=v.memory;switch(n.state={shardsCount:o?o[m]:l,specifications:"".concat(h||n.props.cpu,", ").concat(E||n.props.memory),storage:f?f[m]:d,nodeRole:m,errorMessage:"",storageErrorMessage:""},p){case O.RadonDBAppId.ClickHouse:n.input={type:"integer",title:"SHARD_COUNT",description:"SHARDS_DESC",range:{min:1,max:100},showFunc:!0};break;case O.RadonDBAppId.MySQL:n.input={type:"select",title:"NODE_COUNT",description:"MYSQL_NODES_DESC",options:[2,3,5].map((function(e){return{label:e,value:e}}))};break;case O.RadonDBAppId.PostgreSQL:n.input={type:"integer",title:"DATA_NODE_COUNT",range:{min:2,max:8},showFunc:!0};break;case O.RadonDBAppId.RedisCluster:n.input={type:"integer",title:"NODE_COUNT",range:{min:3,max:50},showFunc:!0};break;case O.RadonDBAppId.RedisSentinel:n.input={type:"select",title:"NODE_COUNT",description:"REDIS_SENTINEL_NODES_DESC",options:[3,5,7].map((function(e){return{label:e,value:e}}))};break;case O.RadonDBAppId.MongoDB:n.input={type:"select",title:"NODE_COUNT",description:"MONGODB_NODES_DESC",options:[1,3,5,7].map((function(e){return{label:e,value:e}}))};break;case O.RadonDBAppId.Elasticsearch:n.input={type:"integer",title:"NODE_COUNT",range:{min:0===n.oldShardsCount?n.oldShardsCount:1,max:200},showFunc:!0};break;case O.RadonDBAppId.Kafka:n.input={type:"integer",title:"NODE_COUNT",range:{min:3,max:100},showFunc:!0};break;case O.RadonDBAppId.OpenSearch:n.input={type:"integer",title:"NODE_COUNT",range:{min:0===n.oldShardsCount?n.oldShardsCount:1,max:200},showFunc:!0};break;default:n.input={range:{}}}return n.setSpecificationsOptions(m),n.oldShardsCount=n.state.shardsCount,n}return(0,f.default)(r,[{key:"setSpecificationsOptions",value:function(e){this.specificationsOptions=this.props.specificationsObject?O.SpecificationOptionsObject[this.props.app_id][e]:O.SpecificationOptionsObject[this.props.app_id]||O.SpecificationsOptions}},{key:"render",value:function(){var e=Object.assign({},this.props),a=this.input,r=a.description,n=a.type,l=a.title,u=a.options,c=a.range,s=a.showFunc,i=this.state,f=i.errorMessage,d=i.nodeRole,p=i.shardsCount,m=i.storageErrorMessage,h=f?{message:f}:null,y=m?{message:m}:null,O=0===this.oldShardsCount&&0!==this.state.shardsCount,C=O&&!["kibana","proxy","dashboard","logstash"].includes(d);return v.default.createElement(b.default,(0,o.default)({width:600,footerClassName:_.default.footer},e,{onOk:this.onOk,onCancel:this.onCancel}),v.default.createElement(E.Alert,{className:_.default.alert,type:"warning",message:t("DATABASE_OPERATION_WARNING")}),v.default.createElement(E.Form,{className:_.default.form},d&&v.default.createElement(E.Form.Item,{label:t("NODE_ROLE")},v.default.createElement(E.Select,{name:"nodeRole",value:d,defaultValue:d,options:this.roleOptions,onChange:this.onRoleChange})),v.default.createElement(E.Form.Item,{label:t(l),desc:r?t(r):t("NODE_COUNT_DESC",{min:c.min,max:c.max}),error:h},"select"===n?v.default.createElement(E.Select,{value:p,defaultValue:p,onChange:this.handleChange,options:u.map((function(e){return T(T({},e),{},{label:"number"==typeof e.label?e.label:t(e.label)})}))}):v.default.createElement(S.default,{value:p,onChange:this.handleChange,min:c.min,max:c.max,showFunc:s,integer:!0})),O&&v.default.createElement(E.Form.Item,{label:t("RESOURCES"),desc:t("RESOURCES_DESC")},v.default.createElement(E.Select,{name:"specifications",value:this.state.specifications,defaultValue:this.state.specifications,options:this.specificationsOptions,onChange:this.onSpecificationsChange})),C&&v.default.createElement(E.Form.Item,{label:t("VOLUME"),error:y},v.default.createElement(g.default,{max:2048,marks:{0:"0",512:"512 Gi",1024:"1024 Gi",1536:"1536 Gi",2048:"2048 Gi"},value:this.state.storage,unit:"Gi",onChange:this.onStorageChange,withInput:!0}))))}}]),r}(v.Component);a.default=D,D.propTypes={specificationsObject:h.default.object,shardsCount:h.default.number,onOk:h.default.func,onCancel:h.default.func,app_id:h.default.string},D.defaultProps={shardsCount:1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={withUnit:"_3MkVmyFjamQAHbMfqPEKDP",funcContainer:"_ptAO3HqFm-oaIp8hrkii",func:"_2Z8YdS1HCE46ycS48Ju1fF"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(18),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(436),r(22),r(23),r(57),r(17),r(7);var o=l(r(315)),u=l(r(30)),c=l(r(43));r(41);var s=l(r(44)),i=l(r(36)),f=l(r(37)),d=l(r(55)),p=l(r(56)),m=l(r(51)),v=n(r(0)),h=l(r(1)),E=r(186),y=l(r(26)),g=l(r(787)),b=l(r(984)),S=r(815);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var T=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var t;(0,i.default)(this,r),(t=a.call(this,e)).onChange=function(e){t.setState({specifications:e})},t.onRoleChange=function(e){var a=t.props.specificationsObject,r=(void 0===a?{}:a)[e]||{},n=r.cpu,l=r.memory;t.setSpecificationsOptions(e),t.setState({nodeRole:e,specifications:"".concat(n,", ").concat(l)})},t.onOk=(0,s.default)(c.default.mark((function e(){var a,r,n,l,o;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,r=a.workspace,n=a.namespace,l=a.cluster,o=a.cluster_id,e.next=3,t.props.store.updateSpecifications({workspace:r,namespace:n,cluster:l,cluster_id:o,specifications:t.state.specifications,nodeRole:t.state.nodeRole});case 3:t.props.onOk(t.state.specifications);case 4:case"end":return e.stop()}}),e)}))),t.onCancel=function(){t.props.onCancel()};var n=e.specificationsObject,l=void 0===n?{}:n,o=e.nodes,u=e.app_id;t.roleOptions=(0,S.getNodeRoleOptions)(u,"specifications").filter((function(e){var t=e.value;return!o||o[t]>0}));var f=(0,y.default)(t.roleOptions,"[0].value",""),d=l[f]||{},p=d.cpu,m=d.memory;return t.state={specifications:"".concat(p||e.cpu,", ").concat(m||e.memory),nodeRole:f},t.setSpecificationsOptions(f),t}return(0,f.default)(r,[{key:"setSpecificationsOptions",value:function(e){var t=this,a=this.props.app_id;this.specificationsOptions=this.props.specificationsObject?S.SpecificationOptionsObject[a][e]:S.SpecificationOptionsObject[a]||S.SpecificationsOptions,a!==S.RadonDBAppId.RedisCluster&&a!==S.RadonDBAppId.RedisSentinel||(this.specificationsOptions=this.specificationsOptions.map((function(a){var r=(0,S.getCpuAndMemoryFromSpecifications)(a.value),n=r.cpu,l=r.memory,o=(0,y.default)(t.props,'specificationsObject["'.concat(e,'"]'),t.props);return O(O({},a),{},{disabled:parseFloat(n)<parseFloat(o.cpu)||parseFloat(l)<parseFloat(o.memory)})})))}},{key:"render",value:function(){var e=this,a=Object.assign({},this.props);return v.default.createElement(g.default,(0,o.default)({width:600,footerClassName:b.default.footer},a,{onOk:this.onOk,onCancel:this.onCancel}),v.default.createElement(E.Alert,{className:b.default.alert,type:"warning",message:t("DATABASE_OPERATION_WARNING")}),v.default.createElement(E.Form,{className:b.default.form,ref:function(t){e.formRef=t}},this.state.nodeRole&&v.default.createElement(E.Form.Item,{label:t("NODE_ROLE")},v.default.createElement(E.Select,{name:"nodeRole",value:this.state.nodeRole,defaultValue:this.state.nodeRole,options:this.roleOptions,onChange:this.onRoleChange})),v.default.createElement(E.Form.Item,{label:t("RESOURCES"),desc:t("RESOURCES_DESC")},v.default.createElement(E.Select,{name:"specifications",value:this.state.specifications,defaultValue:this.state.specifications,options:this.specificationsOptions,onChange:this.onChange}))))}}]),r}(v.Component);a.default=T,T.propTypes={specificationsObject:h.default.object,onOk:h.default.func,onCancel:h.default.func,app_id:h.default.string},T.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(5),r(11),r(31),r(6),r(84),r(18),r(192),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(31),r(6),r(84),r(18),r(28),r(192),r(191),r(42),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(85),r(7),r(110);var o=l(r(315)),u=l(r(58)),c=l(r(61)),s=l(r(43));r(41);var i=l(r(44)),f=l(r(30)),d=l(r(36)),p=l(r(37)),m=l(r(55)),v=l(r(56)),h=l(r(51)),E=n(r(0)),y=r(14),g=l(r(135)),b=l(r(26)),S=l(r(74)),_=l(r(242)),O=l(r(1)),C=r(186),T=l(r(240)),R=l(r(951)),D=l(r(787)),N=l(r(984)),k=r(815),I=l(r(3220)),P=l(r(3222)),A=r(1295);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var j=function(e){(0,m.default)(r,e);var a=L(r);function r(e){var n;(0,d.default)(this,r),(n=a.call(this,e)).formRef=E.default.createRef(),n.passwordRef=E.default.createRef(),n.checkDatabase=function(e,t,a){var r=a||n.state.detail;return"permission"===e&&"Advanced"===t&&"*"!==r.database&&(r.database="*",n.setState({detail:M({},r)})),"authentication"===e&&n.setState({showAuthenticationAlert:n.props.authentication!==t}),r},n.getEmptyResourceNameRuleIndexes=function(e){return(e||n.state.detail.permissionRules||[]).map((function(e,t){return"cluster"===(0,b.default)(e,"resource.type")||(0,b.default)(e,"resource.name")?-1:t})).filter((function(e){return e>-1}))},n.onOk=function(){var e=n.props,a=e.action,r=e.detail,l=n.checkDatabase("permission",n.state.detail.permission,M({},n.state.detail));n.formRef.current.validate((0,i.default)(s.default.mark((function e(){var o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}if(e.prev=1,o=n.getEmptyResourceNameRuleIndexes(),n.setState({emptyResourceNameRuleIndexes:o}),!(o.length>0)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,a(M(M({},n.props),{},{user:l,oldUser:r}));case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),e.t0.message&&T.default.error({content:"".concat(t(e.t0.message))}),n.props.onCancel(),e.abrupt("return");case 15:n.props.onOk();case 16:case"end":return e.stop()}}),e,null,[[1,10]])}))))},n.customNameValidator=function(e,t){return n.props.nameReplicationValidator(t,(0,b.default)(n.props,"detail.name"))},n.getFormItems=function(e){return e.map((function(e){var a=e.name,r=e.type,l=e.label,o=e.description,u=e.rules,s=void 0===u?[]:u,i=e.options,f=e.range,d=e.disabled,p="name"===a?[].concat((0,c.default)(s),[{required:!0,validator:n.customNameValidator,message:t("USERNAME_EXISTS")}]):s;switch(r){case"text":return E.default.createElement(C.Form.Item,{key:a,label:t(l),desc:t(o),rules:p||[]},E.default.createElement(C.Input,{name:a,maxLength:f&&f.max?f.max:-1,disabled:d}));case"password":return E.default.createElement(C.Form.Item,{key:a,label:t(l),desc:t(o),rules:p||[]},E.default.createElement(C.InputPassword,{name:a,innerRef:n.passwordRef,maxLength:f&&f.max?f.max:-1,disabled:d}));case"textArea":return E.default.createElement(C.Form.Item,{key:a,label:t(l),desc:t(o),rules:p},E.default.createElement(C.TextArea,{maxLength:256,name:a,disabled:d}));case"select":return E.default.createElement(C.Form.Item,{key:a,label:t(l),desc:t(o),rules:p},E.default.createElement(C.Select,{disabled:d,name:a,options:i}));default:return null}}))},n.onPermissionRuleChange=function(e,t){if(t){var a=n.state.detail.permissionRules;(0,S.default)(a,t,e)}},n.onKafkaUserConfigChange=function(e,t){if(t){var a=n.state.detail.kafkaUserConfig;""===e?(0,_.default)(a,t):(0,S.default)(a,t,e)}},n.addPermissionRule=function(){var e=n.state.detail.permissionRules||[];n.setState({detail:M(M({},n.state.detail),{},{permissionRules:[].concat((0,c.default)(e),[JSON.parse(A.DefaultPermissionRuleString)])})})},n.deletePermissionRule=function(e){var t=n.state.detail.permissionRules||[];t.splice(e-1,1);var a=n.getEmptyResourceNameRuleIndexes(t);n.setState({detail:M({},n.state.detail),emptyResourceNameRuleIndexes:a})};var l=[k.RadonDBAppId.RedisCluster,k.RadonDBAppId.RedisSentinel].includes(e.app_id);return n.state={detail:(0,g.default)((0,y.toJS)(e.detail))||{name:"",password:"",network:"::/0",database:"*",permission:l?"~* &* +@all":"General",host:"%",authentication:"tls",authorization:"simple",permissionRules:e.app_id===k.RadonDBAppId.Kafka?[JSON.parse(A.DefaultPermissionRuleString)]:[],kafkaUserConfig:(e.app_id,k.RadonDBAppId.Kafka,{})},emptyResourceNameRuleIndexes:[],showAuthenticationAlert:e.authentication&&e.authentication!==(0,b.default)(e,"detail.authentication","tls")},n}return(0,p.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout((function(){var t=e.passwordRef.current;t&&(t.value=(0,b.default)(e.props,"detail.password",""))}),200)}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"renderOtherItems",value:function(e){var a=this;if(e===k.RadonDBAppId.Kafka){var r=this.state.detail,n=r.permissionRules,l=void 0===n?[]:n,o=r.kafkaUserConfig,u=void 0===o?{}:o;return E.default.createElement("div",null,E.default.createElement("div",{className:N.default.otherItems,key:"PermissionRule"},l.map((function(e,t){return E.default.createElement(I.default,{key:"".concat(JSON.stringify(e)).concat(t),permissionRule:e,index:t+1,isEmptyError:a.state.emptyResourceNameRuleIndexes.includes(t),onChange:a.onPermissionRuleChange,canDelete:l.length>1,onDelete:a.deletePermissionRule})})),E.default.createElement("div",{className:N.default.addRuleRow},E.default.createElement("div",null,E.default.createElement(C.Icon,{name:"information",size:16}),E.default.createElement("span",null,t("PERMISSION_RULE_DESC"))),E.default.createElement(C.Button,{onClick:this.addPermissionRule},t("ADD")))),E.default.createElement(R.default,null,E.default.createElement(P.default,{kafkaUserConfig:u,onChange:this.onKafkaUserConfigChange})))}return null}},{key:"render",value:function(){var e=this.props,a=e.app_id,r=e.authentication,n=void 0===r?"":r,l=(0,u.default)(e,["app_id","authentication"]),c=[A.UserName,A.Password];switch(a){case k.RadonDBAppId.ClickHouse:c=A.CKAccount;break;case k.RadonDBAppId.PostgreSQL:c=(0,A.getPGAccount)(!!this.props.detail);break;case k.RadonDBAppId.MySQL:c=A.MySQLAccount;break;case k.RadonDBAppId.RedisCluster:case k.RadonDBAppId.RedisSentinel:c.push({name:"permission",label:"PERMISSIONS",type:"text",description:"ACL_DESC"});break;case k.RadonDBAppId.Kafka:c=A.KafkaAccount}if(this.props.detail){var s=(c=(0,g.default)(c)).find((function(e){return"name"===e.name}));s&&(s.disabled=!0)}return E.default.createElement(D.default,(0,o.default)({width:610,footerClassName:N.default.footer},l,{onOk:this.onOk}),this.state.showAuthenticationAlert&&E.default.createElement(C.Alert,{className:N.default.alert,type:"warning",message:t("AUTHENTICATION_MODE_INCORRECT_ALERT",{cluster:n.toUpperCase(),user:this.state.detail.authentication.toUpperCase()})}),E.default.createElement(C.Form,{className:N.default.form,data:this.state.detail,ref:this.formRef,onChange:this.checkDatabase},this.getFormItems(c),this.renderOtherItems(a)))}}]),r}(E.Component);a.default=j,j.propTypes={detail:O.default.object,onOk:O.default.func,onCancel:O.default.func},j.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(30)),o=n(r(246)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51));r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(191),r(42),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var d=n(r(0)),p=n(r(26)),m=n(r(74)),v=n(r(3)),h=r(186),E=n(r(3221));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=["Read","Write","Delete","Alter","Describe","All","IdempotentWrite","ClusterAction","Create","AlterConfigs","DescribeConfigs"].map((function(e){return{label:e,value:e}})),S=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).handleDetele=function(){n.props.onDelete(n.props.index)},n.onChange=function(e){return function(t){var a=n.props,r=a.index,u=void 0===r?1:r,c=a.onChange;"object"===(0,o.default)(t)&&(t=t.target.value),(0,m.default)(n.state.permissionRule,e,t),n.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n.state.permissionRule)),c(t,"[".concat(u-1,"]").concat(e))}},n.renderModeTip=function(){return d.default.createElement("div",null,d.default.createElement("div",null,t("PREFIX_DESC")),d.default.createElement("div",null,t("LITERAL_DESC")))},n.state={permissionRule:JSON.parse(JSON.stringify(e.permissionRule))},n}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.index,r=void 0===a?1:a,n=e.canDelete,l=e.isEmptyError,o=this.state.permissionRule,u="cluster"===(0,p.default)(o,"resource.type"),c=""===(0,p.default)(o,"resource.name"),s=!u&&c&&l;return d.default.createElement("div",{className:E.default.cardContainer},d.default.createElement("div",{className:E.default.cardHeader},d.default.createElement("div",null,t("PERMISSION_RULE")," ",r),n&&d.default.createElement(h.Icon,{className:E.default.delete,onClick:this.handleDetele,name:"trash",size:16})),d.default.createElement("div",{className:E.default.cardRow},d.default.createElement("div",{className:E.default.inputItem},d.default.createElement("div",null,t("RESOURCE_TYPE")),d.default.createElement(h.Select,{value:(0,p.default)(o,"resource.type"),onChange:this.onChange("resource.type"),options:[{label:t("TOPIC"),value:"topic"},{label:t("GROUP"),value:"group"},{label:t("CLUSTER"),value:"cluster"},{label:t("TRANSACTION_ID"),value:"transactionalId"}]}),d.default.createElement("div",{className:E.default.desc},t("RESOURCE_TYPE_DESC"))),d.default.createElement("div",{className:E.default.inputItem},d.default.createElement("div",null,t("RESOURCE_MATCHING_MODE"),d.default.createElement(h.Tooltip,{content:this.renderModeTip()},d.default.createElement(h.Icon,{name:"question",size:16,className:"margin-l6"}))),d.default.createElement(h.Select,{value:(0,p.default)(o,"resource.patternType"),onChange:this.onChange("resource.patternType"),options:[{label:t("PREFIX"),value:"prefix"},{label:t("LITERAL"),value:"literal"}],disabled:u}),d.default.createElement("div",{className:E.default.desc},t("RESOURCE_MATCHING_MODE_DESC"))),d.default.createElement("div",{className:(0,v.default)(E.default.inputItem,E.default.wide,{"form-item":s,"error-item":s})},d.default.createElement("div",null,t("RESOURCE_NAME")),d.default.createElement(h.Input,{defaultValue:(0,p.default)(o,"resource.name"),onChange:this.onChange("resource.name"),disabled:u,maxLength:1e3,placeholder:" "}),d.default.createElement("div",{className:E.default.desc},t("")),s&&d.default.createElement("div",{className:"form-item-error"},t("KAFKA_USER_RESOURCE_NAME_EMPTY_ERROR")))),d.default.createElement("div",{className:E.default.cardRow},d.default.createElement("div",{className:E.default.inputItem},d.default.createElement("div",null,t("OPERATION")),d.default.createElement(h.Select,{value:(0,p.default)(o,"operation"),onChange:this.onChange("operation"),options:b}),d.default.createElement("div",{className:E.default.desc},t("OPERATION_DESC"))),d.default.createElement("div",{className:E.default.inputItem},d.default.createElement("div",null,t("TYPE")),d.default.createElement(h.Select,{value:(0,p.default)(o,"type"),onChange:this.onChange("type"),options:[{label:t("ALLOW"),value:"allow"}],disabled:!0}),d.default.createElement("div",{className:E.default.desc},t("RULE_TYPE_DESC")))))}}]),r}(d.default.Component);a.default=S},function(e,t,a){e.exports={cardContainer:"_1A0ZzaFXe0rRkSIT_gpKJ4",cardHeader:"_2dF0B0snhoVr7iw3jASRyk",delete:"_2Um9MHt5tpHKT_Nq7dvpHp",cardRow:"_2my6m4oEFPGfbrKAVIE63t",inputItem:"_1bUd16IKIt35JoTshl1iPk",desc:"_3owrxQsOb3muWi0cGMoJWu",wide:"_3JHn1sebkO15-qnvoTd9tz"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(246)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=r(186),m=n(r(799)),v=n(r(26)),h=n(r(74));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=y(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).onChange=function(e){return function(a){var r=t.props.onChange;"object"===(0,o.default)(a)&&(a=a.target.value),(0,h.default)(t.state.kafkaUserConfig,e,a),t.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t.state.kafkaUserConfig)),r(a,e)}},t.state={kafkaUserConfig:e.kafkaUserConfig},t}return(0,c.default)(r,[{key:"render",value:function(){var e=this,t=this.state.kafkaUserConfig;return this.config.map((function(a){return d.default.createElement(p.Form.Item,{label:a.name,desc:a.desc,key:a.name},d.default.createElement(m.default,{defaultValue:(0,v.default)(t,a.name),onChange:e.onChange(a.name),placeholder:" ",integer:!0,min:a.min,max:a.max}))}))}},{key:"config",get:function(){return[{name:"producerByteRate",min:0,max:2147483647,desc:t("DBPARAM_PRODUCER_BYTERATE_DESC",{min:0,max:2147483647})},{name:"consumerByteRate",min:0,max:2147483647,desc:t("DBPARAM_CONSUMER_BYTERATE_DESC",{min:0,max:2147483647})},{name:"requestPercentage",min:0,max:100,desc:t("DBPARAM_REAUSET_PERCENTAGE_DESC",{min:0,max:100})},{name:"controllerMutationRate",min:0,max:2147483647,desc:t("DBPARAM_CONTROLLER_MUTATION_DESC",{min:0,max:2147483647})}]}}]),r}(d.default.Component);a.default=g},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).handleOk=function(t){(0,e.props.onOk)(t)},e}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.isSubmitting,l=e.onCancel;return i.default.createElement(p.default.Form,{data:a,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:l,visible:r,isSubmitting:n},i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("CLUSTER_NAME_DESC")},i.default.createElement(d.Input,{name:"name",disabled:!0})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{maxLength:256,name:"description"})))}}]),r}(i.default.Component);a.default=v,v.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},v.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={modal:"uCpjMDHerDwIah6qfWz9h",header:"_8lnL68RyqZ8Mf9SZb7Hrd",description:"_33_m7zffZwxc_WSXhaDLod",title:"_1RCLSA0CgpowJeAz2EvXQd",close:"_3b-UjX6y3xFVR7jYPyBDQE",body:"_2RmBWnxQTqO-v5_7aoCgAc",hideFooter:"_19r6Epwcx_6rYUzr7-lTOk",footer:"_2VxqjGKUCqjewkc5qwInwk",formFooter:"l6hFXqhvTTUulkgDi7kbg",formBody:"_3stxqSfgjAuUqDRJxt4317",formWrapper:"_3KZJuiPCVxqGEbnqGR-4Dk",fullscreen:"_1A5dMkmDhaACu6DAJ7ZbL5",rightScreen:"GUyZ7UV2FZGD28gs3w7W5",image:"_1eulCwUt1yUJJF8dAZdtkb",iconBg:"_1mtvZOIPGtBjUPmBpKWC7l"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(11),r(6),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=n(r(1628)),h=n(r(836)),E=n(r(26)),y=r(52),g=n(r(3226)),b=r(186),S=n(r(1383)),_=n(r(3233)),O=n(r(3238)),C=n(r(3248));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=function(e){(0,i.default)(r,e);var a=D(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).appStore=new g.default,e.state={step:{count:1,hideFooter:!0}},e.showDeploy=function(){e.setState({step:{count:2,hideFooter:!1,okText:t("NEXT"),onOk:e.showDeployNext}})},e.showDeployNext=function(){e.setState({step:R(R({},e.state.step),{},{count:3,onFormOk:function(){return e.setState({step:R(R({},e.state.step),{},{okText:t("INSTALL"),onOk:e.handleDeploy,onPrev:e.showDeploy,next:null})})},next:3===e.state.step.count})})},e.handleDeploy=function(){e.setState({step:{count:4,hideFooter:!1,okText:t("INSTALL"),onOk:e.handleDeploy,onPrev:e.showDeploy,next:{}}})},e}return(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.appStore.fetchDetail({app_id:this.props.detail.app_id}).then((function(){return e.forceUpdate()}))}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=(e.onDeploy,e.detail),n=(0,o.default)(e,["visible","onCancel","onDeploy","detail"]),u=r.name,c=r.icon,s=(0,E.default)(globals.user,"lang")||(0,y.getBrowserLang)(),i=(0,E.default)(r,"description_".concat(s),r.description),f=this.state.step,d=this.appStore.isLoading?p.default.createElement(b.Loading,{className:C.default.loading}):p.default.createElement(p.default.Fragment,null,1===f.count&&p.default.createElement(_.default,(0,l.default)({showDeploy:this.showDeploy,detail:r,appStore:this.appStore},n)),1!==f.count&&p.default.createElement(O.default,(0,l.default)({appStore:this.appStore,stepCount:f.count-2,next:f.next,onFormOk:f.onFormOk},n)));return p.default.createElement(S.default,(0,l.default)({width:1070,className:C.default.modal,visible:t,onCancel:a,rightScreen:!0,customTitle:p.default.createElement("div",{className:C.default.intro},p.default.createElement("span",{className:C.default.icon},p.default.createElement(h.default,{iconSize:48,iconLetter:u,src:c,alt:""})),p.default.createElement("div",{className:C.default.text},p.default.createElement("div",null,p.default.createElement("span",null,u),p.default.createElement(v.default,{iconSize:32,isShowTip:!1,app:r})),p.default.createElement("p",null,i))),hideFooter:f.hideFooter},n,f),d)}}]),r}(p.default.Component);a.default=N,N.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},N.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){"use strict";a(15);var r=a(20);a(12),a(109),a(5),a(16),a(9),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(109),a(45),a(5),a(42),a(16),a(9),a(4),a(436),a(22),a(23),a(57),a(17);var n=r(a(43));a(41);var l,o,u=r(a(44)),c=r(a(65)),s=r(a(36)),i=r(a(37)),f=r(a(88)),d=r(a(55)),p=r(a(56)),m=r(a(51)),v=(r(a(66)),r(a(49))),h=a(14),E=a(52),y=r(a(26)),g=r(a(1727)),b=r(a(469)),S=a(815),_=a(1015);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var C=(l=function(e){(0,d.default)(r,e);var t,a=O(r);function r(){var e;(0,s.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).alertRuleStore=new g.default,e.getUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workspace,a=e.cluster,r=e.namespace;return(0,_.getManifestApi)({workspace:t,cluster:a,namespace:r})},(0,c.default)(e,"fetchDetail",o,(0,f.default)(e)),e}return(0,i.default)(r,[{key:"deploy",value:(t=(0,u.default)(n.default.mark((function e(t,a){var r,l,o,u,c,s,i,f,d,p;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.workspace,l=a.namespace,o=a.cluster,u=a.restoreParams,c=t.app_id,s=t.name,i=t.conf,f=t.version_id,d=t.description,i.volume&&parseFloat(i.volume)<10&&(i.volume="10Gi"),(p={name:s,description:d,version:1,appVersion:"",customResource:"{}",relatedResources:[]}).appVersion=f,!l){e.next=39;break}e.t0=c,e.next=e.t0===S.RadonDBAppId.ClickHouse?9:e.t0===S.RadonDBAppId.PostgreSQL?11:e.t0===S.RadonDBAppId.MySQL?13:e.t0===S.RadonDBAppId.RedisCluster?16:e.t0===S.RadonDBAppId.RedisSentinel?19:e.t0===S.RadonDBAppId.MongoDB?22:e.t0===S.RadonDBAppId.Elasticsearch?25:e.t0===S.RadonDBAppId.Kafka?28:e.t0===S.RadonDBAppId.OpenSearch?31:34;break;case 9:return p.customResource=(0,S.mergeCKInstallationData)({name:s,valuesJson:i,namespace:l}),e.abrupt("break",35);case 11:return p.customResource=(0,S.mergePGInstallationData)({name:s,valuesJson:i,namespace:l,restoreParams:u}),e.abrupt("break",35);case 13:return p.customResource=(0,S.mergeMySQLInstallationData)({name:s,valuesJson:i,namespace:l,restoreParams:u}),p.relatedResources=[{name:"secret",data:(0,S.getSecretCrd)({name:s,namespace:l})}],e.abrupt("break",35);case 16:return p.customResource=(0,S.mergeRedisClusterInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getRedisClusterRelatedResources)({name:s,namespace:l,password:i.password,specifications:i.specifications}),e.abrupt("break",35);case 19:return p.customResource=(0,S.mergeRedisSentinelInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getRedisSentinelRelatedResources)({name:s,namespace:l,password:i.password,specifications:i.specifications}),e.abrupt("break",35);case 22:return p.customResource=(0,S.mergeMongoDBInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getMongoDBRelatedResources)({name:s,namespace:l}),e.abrupt("break",35);case 25:return p.customResource=(0,S.mergeECKInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getECKRelatedResources)({name:s,namespace:l,kibanaValues:i.kibana||{}}),e.abrupt("break",35);case 28:return p.customResource=(0,S.mergeKafkaInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getKafkaRelatedResources)({namespace:l,name:s}),e.abrupt("break",35);case 31:return p.customResource=(0,S.mergeOpenSearchInstallationData)({name:s,namespace:l,valuesJson:i}),p.relatedResources=(0,S.getOpenSearchRelatedResources)({name:s,namespace:l,logstashValues:i.logstash||{},username:i.username,password:i.password}),e.abrupt("break",35);case 34:return e.abrupt("return");case 35:return e.next=37,this.submitting(request.post(this.getUrl({namespace:l,workspace:r,cluster:o}),p));case 37:return e.next=39,this.alertRuleStore.createDefaultAlert(c,{name:s,namespace:l,cluster:o});case 39:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})}]),r}(b.default),(0,v.default)(l.prototype,"deploy",[h.action],Object.getOwnPropertyDescriptor(l.prototype,"deploy"),l.prototype),o=(0,v.default)(l.prototype,"fetchDetail",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,u.default)(n.default.mark((function t(a){var r,l,o,u;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.app_id,l=(0,y.default)(globals.user,"lang")||(0,E.getBrowserLang)(),e.isLoading=!0,o="/kapis/application.kubesphere.io/v2/apps/".concat(r),t.next=6,request.get(o);case 6:(u=t.sent).abstraction=(0,y.default)(u,"abstraction_".concat(l),u.abstraction),u.description=(0,y.default)(u,"description_".concat(l),u.description),u.screenshots=(0,y.default)(u,"screenshots_".concat(l),u.screenshots),e.detail=u,e.isLoading=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),l);t.default=C},,,,,,,function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(48),r(16),r(4),r(23),r(24),r(17),r(188),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(48),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(188);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=r(244),p=r(14),m=n(r(243)),v=r(186),h=n(r(942)),E=n(r(1728)),y=n(r(1722)),g=r(52),b=n(r(3237));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var _=v.Tabs.TabPanel,O=function(e){(0,u.default)(r,e);var a=S(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleDeploy=function(){t.props.showDeploy()},t.params=(0,d.parse)(location.search.slice(1))||{},t.htmlOrigBgColor="",t.state={tab:"appInfo",selectAppVersion:"",showDeploy:!1},t.appId=t.props.app_id,t.versionStore=new h.default,t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.versionStore.fetchList({app_id:this.appId,status:"active"}).then((function(){var t=(0,f.default)(e.versionStore,"list.data[0].version_id","");e.setState({selectAppVersion:t})}))}},{key:"renderDeployButton",value:function(){var e=this.props.appStore.detail,a=(0,g.isAppIsRadonDBAndAuthorized)(e),r=a.isRadondb,n=a.isSupport,l=r&&!n;return i.default.createElement(v.Tooltip,{content:l?i.default.createElement("div",{className:b.default.authorizedTip},i.default.createElement("div",{className:b.default.authorizedTipTitle},i.default.createElement(v.Icon,{name:"information",color:{primary:"#fff",secondary:"#F5A623"}}),i.default.createElement("span",null,t("APP_UNAUTHORIZED"))),i.default.createElement("p",null,t("APP_UNAUTHORIZED_DESC"))):""},i.default.createElement("div",{className:b.default.deployButton},i.default.createElement(v.Button,{onClick:this.handleDeploy,type:"control",disabled:l},t("INSTALL"))))}},{key:"renderContent",value:function(){var e=this.state.tab,a=this.props.appStore.detail,r=this.versionStore.list.data;return i.default.createElement(v.Tabs,{className:"tabs-new",activeName:e,onChange:this.handleTabChange},i.default.createElement(_,{label:t("APP_INFORMATION"),name:"appInfo"},this.renderDeployButton(),i.default.createElement(v.Columns,null,i.default.createElement(v.Column,{className:"is-9"},i.default.createElement(E.default,{app:a,versions:(0,p.toJS)(r)})),i.default.createElement(v.Column,null,i.default.createElement(y.default,{app:a})))))}},{key:"render",value:function(){return i.default.createElement("div",{className:b.default.main},i.default.createElement("div",{className:b.default.content},this.renderContent()))}},{key:"versionOptions",get:function(){return this.versionStore.list.data.map((function(e){var a=e.version_id,r=e.name,n=e.create_time;return{label:r,description:(0,m.default)(n).format(t("YYYY-MM-DD")),value:a}}))}}]),r}(i.default.Component);a.default=O},,,,function(e,t,a){e.exports={content:"F9cCXv2wjuVST_W7U5zvb",deployButton:"_1DTp0_lcWeecxqs_-It4KA",keywords:"_1A3YmiMHk1xXcfQiwW-ykl",deployModal:"_2Ut2mhc56BgtCHaPbBcvrj",authorizedTip:"_1mGVVHb7CDZ80rcKOYpjMH",authorizedTipTitle:"_3WSM1_DidAthIrad3ItYSB"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(48),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(64),r(1092),r(7);var l=n(r(43)),o=n(r(30));r(41);var u,c=n(r(44)),s=n(r(58)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(26)),E=r(239),y=r(186),g=n(r(942)),b=n(r(3239)),S=n(r(1725)),_=r(52),O=n(r(3240)),C=n(r(3245)),T=n(r(3247)),R=r(815);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var I=(0,E.observer)(u=function(e){(0,d.default)(n,e);var a,r=k(n);function n(e){var t;(0,i.default)(this,n),(t=r.call(this,e)).handleOk=function(){var e=t.formRef.current;e&&e.validate((function(){var e=t.state.formData,a=e.cluster,r=e.workspace,n=e.namespace,l=(0,s.default)(e,["cluster","workspace","namespace"]);t.props.appStore.deploy(l,{cluster:a,namespace:n,workspace:r,restoreParams:t.props.restoreParams}).then((function(){t.props.onOk()}))}))},t.handleNext=function(){var e=t.formRef.current;e&&e.validate((function(){2!==t.props.stepCount?(t.setState((function(e){var a=e.currentStep;return{currentStep:Math.min(t.steps.length-1,a+1)}})),t.props.onFormOk&&t.props.onFormOk()):t.handleOk()}))},t.appId=e.app_id,t.versionStore=new g.default,t.fileStore=new b.default;var a=e.workspace,l=e.cluster,o=e.namespace;return t.state={currentStep:e.stepCount,formData:{app_id:t.appId,workspace:a,cluster:l,namespace:o}},t.formRef=v.default.createRef(),t}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fixBodyColor(),this.getData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.stepCount;this.props.next?this.handleNext():e.stepCount!==t&&(t>e.stepCount?this.handleNext():this.setState({currentStep:t}))}},{key:"componentWillUnmount",value:function(){document.querySelector("html").style.backgroundColor=this.htmlOrigBgColor}},{key:"fixBodyColor",value:function(){var e=document.querySelector("html");this.htmlOrigBgColor=window.getComputedStyle(e).backgroundColor,e.style.backgroundColor="white"}},{key:"getData",value:(a=(0,c.default)(l.default.mark((function e(){var t,a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.versionStore.fetchList({app_id:this.appId,status:"active"});case 2:t=(0,h.default)(this.versionStore,"list.data[0].version_id",""),a=(0,h.default)(this.versionStore,"list.data[0].name",""),r=this.props.appStore.detail.name,this.fileStore.loadRadonDB({app_id:this.appId,restoreParams:this.props.restoreParams}),this.setState({formData:N(N({},this.state.formData),{},{name:"".concat(r.slice(0,7).toLowerCase().replaceAll(" ","-"),"-").concat((0,_.generateId)()),version_id:this.isRadonDB?a:t})});case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"renderForm",value:function(){var e=this.state,t=e.formData,a=e.currentStep,r=this.steps[a],n=r.component,l={formData:t,fromStore:!0,versionStore:this.versionStore,fileStore:this.fileStore,appId:this.appId};return r.isForm?l.formRef=this.formRef:l.ref=this.formRef,v.default.createElement("div",{className:T.default.form},v.default.createElement(n,l))}},{key:"renderControl",value:function(){var e=this.state.currentStep,a=this.steps.length-1;return v.default.createElement("div",{className:T.default.control},e<a?v.default.createElement(y.Button,{type:"control",onClick:this.handleNext},t("NEXT")):v.default.createElement(y.Button,{type:"control",onClick:this.handleOk,loading:this.props.appStore.isSubmitting},t("INSTALL")))}},{key:"renderSteps",value:function(){return v.default.createElement("div",{className:T.default.steps},v.default.createElement(C.default,{steps:this.steps,current:this.state.currentStep}))}},{key:"render",value:function(){return v.default.createElement("div",{className:T.default.main},v.default.createElement("div",{className:T.default.content},this.renderSteps(),v.default.createElement("div",{className:T.default.formWrapper},this.renderForm())))}},{key:"isRadonDB",get:function(){return R.RadonDBAppIds.includes(this.appId)}},{key:"steps",get:function(){var e=[{title:"BASIC_INFORMATION",component:S.default,required:!0,isForm:!0}];return e.push({title:"APP_SETTINGS",component:O.default,required:!0}),e}}]),n}(v.default.Component))||u;a.default=I},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n,l,o=r(a(65)),u=r(a(36)),c=r(a(88)),s=r(a(55)),i=r(a(56)),f=r(a(51)),d=r(a(49)),p=(r(a(66)),a(14)),m=r(a(935)),v=r(a(135)),h=r(a(74)),E=a(815);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=(n=function(e){(0,s.default)(a,e);var t=y(a);function a(){var e;(0,u.default)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).resourceName="files",(0,o.default)(e,"loadRadonDB",l,(0,c.default)(e)),e}return a}(m.default),l=(0,d.default)(n.prototype,"loadRadonDB",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=t.app_id,r=t.restoreParams;e.files={"values.schema":(0,v.default)(E.ValuesSchema[a]),"values.json":(0,v.default)(E.ValuesJSON[a])},r&&(r.databaseVersion&&((0,h.default)(e.files,'["values.schema"].properties.version.disabled',!0),(0,h.default)(e.files,'["values.json"].version',r.databaseVersion)),r.nodes&&((0,h.default)(e.files,'["values.schema"].properties.nodes.disabled',!0),(0,h.default)(e.files,'["values.json"].nodes',r.nodes)),r.volume&&((0,h.default)(e.files,'["values.schema"].properties.volume.disabled',!0),(0,h.default)(e.files,'["values.schema"].properties.volumeType.disabled',!0),(0,h.default)(e.files,'["values.json"].volume',r.volume)),r.specifications&&((0,h.default)(e.files,'["values.schema"].properties.specifications.disabled',!0),(0,h.default)(e.files,'["values.json"].specifications',r.specifications))),e.isLoading=!1,e.isRadonDB=!0}}}),n);t.default=g},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(74)),p=r(14),m=r(239),v=r(186),h=n(r(240)),E=r(52),y=r(894),g=r(815),b=n(r(3241)),S=n(r(3244));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,m.observer)(l=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={valuesJSON:{},valuesSchema:void 0,loadingFile:!0},e.validatorResult={errorCount:0},e.updateState=function(){var t=e.props.fileStore.files;e.props.fileStore.isRadonDB?e.setState({valuesSchema:t["values.schema"],valuesJSON:t["values.json"],loadingFile:!1}):t&&t["values.yaml"]&&e.setState({valuesJSON:(0,y.getValueObj)(t["values.yaml"]),valuesSchema:(0,E.safeParseJSON)(t["values.schema.json"]),loadingFile:!1})},e.updateFormData=function(){var t=e.props.formData,a=e.state.valuesJSON;(0,d.default)(t,"conf",a)},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.updateState(),this.props.fileStore.files.packageFiles||(this.dispather=(0,p.reaction)((function(){return e.props.fileStore.files}),this.updateState))}},{key:"componentWillUnmount",value:function(){this.dispather&&this.dispather()}},{key:"validate",value:function(e){if(!(this.validatorResult.errorCount>0)){var a=this.props.formData,r=this.state.valuesJSON,n=a.name,l=a.namespace,o=a.app_id,u=r.version,c="";if(o===g.RadonDBAppId.MySQL&&"5.7"===u&&(l.length>16||n.length>14)){if(l.length>16)return c=t("PROJECT_NAME_EXCEEDS_LIMIT"),void h.default.warning({content:c});if(n.length>14)return c=t("APP_NAME_EXCEED_LIMIT"),void h.default.warning({content:c})}this.updateFormData(),e&&e()}}},{key:"renderSchemaForm",value:function(){var e=this.state,t=e.valuesJSON,a=e.valuesSchema;return f.default.createElement("div",{className:S.default.schemaWrapper},f.default.createElement(b.default,{schema:a,value:t,validatorResult:this.validatorResult,formData:this.props.formData}))}},{key:"render",value:function(){return this.state.loadingFile?f.default.createElement(v.Loading,{className:S.default.loading}):f.default.createElement("div",{className:S.default.wrapper},f.default.createElement("div",{className:S.default.title},f.default.createElement("div",null,t("APP_SETTINGS"))),this.renderSchemaForm())}}]),r}(f.default.Component))||l;a.default=O},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(5),r(187),r(11),r(6),r(84),r(73),r(18),r(97),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(64),r(75),r(818),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(187),r(11),r(6),r(84),r(73),r(18),r(28),r(97),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(436),r(319),r(23),r(57),r(24),r(193),r(17),r(85),r(64),r(75),r(818),r(7);var l=n(r(61)),o=n(r(246)),u=n(r(315)),c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(1)),h=n(r(1198)),E=n(r(26)),y=n(r(74)),g=n(r(1158)),b=n(r(198)),S=n(r(63)),_=r(186),O=n(r(790)),C=n(r(3)),T=n(r(966)),R=r(14),D=n(r(1199)),N=n(r(3242)),k=n(r(3243));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var w=function(e){(0,f.default)(r,e);var a=A(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,i=new Array(n),f=0;f<n;f++)i[f]=arguments[f];return(e=a.call.apply(a,[this].concat(i))).state={value:e.props.value,showAdvanced:(0,E.default)(e.props.schema,"unfoldAdvanced",!1),error:{}},e.toggleAdvanced=function(){e.setState({showAdvanced:!e.state.showAdvanced})},e.generateMarks=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=4,n=parseInt((t-e)/r,10),l={},o=0;o<r;o++){var u=e+o*n;l[u]=0===u?u:u+a}return l[t]=t+a,l},e.renderFormItem=function(a,r,n){var l,o=e.state,s=o.value,i=o.error,f={defaultValue:(0,E.default)(s,n,""),onChange:function(r){a.rules&&a.rules.some((function(e){return e.pattern&&!e.pattern.test(r)?((0,y.default)(i,'["'.concat(n.join("."),'"]'),t(e.message)),!0):((0,y.default)(i,'["'.concat(n.join("."),'"]'),""),!1)}));var l=Object.values(i).filter((function(e){return e})).length;(0,y.default)(e.props.validatorResult,"errorCount",l),e.handleFormChange((0,y.default)(s,n,r))}};switch(a.type){case"string":l="slider"===a.render?m.default.createElement(T.default,(0,u.default)({className:(0,C.default)((0,c.default)({},k.default.disabled,a.disabled)),withInput:!a.disabled,max:a.sliderMax,min:a.sliderMin,unit:a.sliderUnit,marks:e.generateMarks(a.sliderMin,a.sliderMax,a.sliderUnit)},f,{onChange:function(t){if(a.validator){var r=a.validator(t,{app_id:e.props.formData.app_id,max:a.sliderMax,nodeRole:(0,E.default)(n,"[0]")}),l=r.error,o=r.message;l?(0,y.default)(i,'["'.concat(n.join("."),'"]'),o):(0,y.default)(i,'["'.concat(n.join("."),'"]'),"")}t&&parseFloat(t)>0&&t.trim().startsWith("0")?f.onChange(t.replace(/^0*/,"")):f.onChange(t)}})):"textArea"===a.render?m.default.createElement(_.TextArea,f):"select"===a.render?"volumeType"===r?m.default.createElement(N.default,(0,u.default)({disabled:a.disabled},f,{cluster:e.props.formData.cluster})):m.default.createElement(_.Select,(0,u.default)({},f,{options:(0,R.toJS)(a.options).map((function(e){return P(P({},e),{},{label:"number"==typeof e.label?e.label:t(e.label)})})),disabled:a.disabled})):"password"===a.render?m.default.createElement(_.InputPassword,(0,u.default)({name:a.name,disabled:a.disabled,autoComplete:"new-password",placeholder:a.placeholder?t(a.placeholder):""},f)):m.default.createElement(_.Input,(0,u.default)({},f,{disabled:a.disabled}));break;case"integer":l=m.default.createElement(D.default,(0,u.default)({},f,{integer:!0,min:a.min,max:a.max,showFunc:a.showFunc,disabled:a.disabled,style:{maxWidth:"455px"}}));break;case"boolean":l=m.default.createElement("div",{className:k.default.boolean},m.default.createElement(_.Toggle,(0,u.default)({},f,{defaultChecked:(0,E.default)(s,n,!1)})),m.default.createElement(O.default,{title:a.title,description:a.description}));break;case"alert":l=m.default.createElement(_.Alert,{className:k.default.alert,icon:"information",message:t(a.content)});break;case"array":l=m.default.createElement(m.default.Fragment,null,"todo");break;default:l=m.default.createElement(m.default.Fragment,null)}var d="";"boolean"!==a.type&&(d=a.tooltipContent?m.default.createElement("div",null,m.default.createElement("span",{style:{verticalAlign:"bottom"}},t(a.title)),m.default.createElement(_.Tooltip,{content:t(a.tooltipContent)},m.default.createElement(_.Icon,{size:20,name:"question"}))):t(a.title));var p="integer"===a.type&&"number"==typeof a.min&&"number"==typeof a.max?"".concat(t(a.description||"")).concat(t("VALUE_RANGE_DESC",{min:a.min,max:a.max})):t(a.description),v=(0,E.default)(i,'["'.concat(n.join("."),'"]')),h=(0,E.default)(e.state.value,"[".concat(n.join(".").replace(r,"version"),"]"));return a.forVersion&&a.forVersion instanceof Array&&!a.forVersion.includes(h)?null:m.default.createElement(_.Form.Item,{key:r,className:a.rowExclusive&&!a.halfRow?"row":"",label:d,desc:p,error:v?{message:v}:null},l)},e.renderSchemaForm=function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=a.type,c=e.state.value,s="object"===(0,o.default)(a.hidden)?(0,E.default)(c,a.hidden.value,null)===a.hidden.condition:(0,E.default)(c,a.hidden,!1);if(s)return null;if("object"===u){var i=[],f=[];if((0,h.default)(a.properties,(function(t,a){t.advanced?f.push(e.renderSchemaForm(t,a,[].concat((0,l.default)(n),[a]))):i.push(e.renderSchemaForm(t,a,[].concat((0,l.default)(n),[a])))})),(0,S.default)(i)||i.every((function(e){return!e})))return null;var d=a.properties&&(0,g.default)(a.properties,(function(e){return(0,b.default)(e,"properties")}));return m.default.createElement("div",{key:r,className:d?k.default.parentGroup:k.default.group},a.title&&m.default.createElement("div",{className:k.default.titleContainer},a.icon&&m.default.createElement(_.Icon,{name:a.icon,size:20}),m.default.createElement("div",{className:k.default.title},t(a.title))),a.description&&m.default.createElement("p",{className:k.default.description},t(a.description)),i,f.length>0&&m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:k.default.advanced,onClick:e.toggleAdvanced},m.default.createElement("span",null,t("ADVANCED_SETTINGS")),m.default.createElement(_.Icon,{name:e.state.showAdvanced?"chevron-up":"chevron-down",size:"20"})),m.default.createElement("div",null)),e.state.showAdvanced&&f,f.length%2==1&&m.default.createElement("div",{className:"form-item"}))}return m.default.createElement(m.default.Fragment,null,e.renderFormItem(a,r,n),a.halfRow&&m.default.createElement("div",{className:"form-item"}))},e}return(0,i.default)(r,[{key:"handleFormChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this.props.schema;return this.renderSchemaForm(e)}}]),r}(m.default.Component);a.default=w,w.propTypes={schema:v.default.object,value:v.default.object,onChange:v.default.func,validatorResult:v.default.object,formData:v.default.object},w.defaultProps={onChange:function(){}}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(36)),o=r(a(37)),u=r(a(55)),c=r(a(56)),s=r(a(51)),i=r(a(0)),f=a(186),d=r(a(26));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={options:[]},e.getUrl=function(){return"\n      /kapis".concat(globals.app.isMultiCluster?"/clusters/".concat(e.props.cluster):"","/resources.kubesphere.io/v1alpha3/storageclasses?sortBy=createTime")},e}return(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this;request.get(this.getUrl()).then((function(t){var a=t.items.map((function(e){return{label:e.metadata.name,value:e.metadata.name}}));e.setState({options:a}),e.props.onChange((0,d.default)(e.state.options,"[0].value"))}))}},{key:"render",value:function(){return i.default.createElement(f.Select,(0,n.default)({},this.props,{options:this.state.options}))}}]),a}(i.default.Component);t.default=m},function(e,t,a){e.exports={group:"_1LEM6H2hiHcNQ8bUU3mJuw",titleContainer:"_3d3-PHNYtbjdjLYgLjSooE",title:"_2zPbKOf3hJMkI0WpS-Z3eB",description:"_12__-bkxGteMzlKHt_OWt6",boolean:"_3z596UuO4JJfAARMnB9iEc",parentGroup:"_3n-j-dfbxo2qVkAjSkNyjz",advanced:"_19fZQMwrad5YJBF1CtSSdg",alert:"_2i-Xv0soiNQZQGbxkpXi8R",disabled:"_2Phc2CXUSzuqeWaTUbmWRH"}},function(e,t,a){e.exports={wrapper:"_2UpPoM0Aj97SWE8BeEzdgl",title:"_2JPY252bQeGvx258GYWwO5",switch:"_2SpL0hTaRrp2E5f_wTEGpY",codeWrapper:"_2UTeaFK_M0EfVWjoTimlTg",loading:"_12fEXFIn68d7_pvL5Cq5E1"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(3)),m=l(r(3246));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var h=function(e){(0,s.default)(r,e);var a=v(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return d.default.createElement("div",{className:m.default.wrapper},a.map((function(e,a){var n;return d.default.createElement("div",{key:e.title},d.default.createElement("span",{className:(0,p.default)(m.default.indicator,(n={},(0,o.default)(n,m.default.fullfill,r>a),(0,o.default)(n,m.default.current,r===a),(0,o.default)(n,m.default.pending,r<a),n))}),d.default.createElement("span",null,t(e.title)))})))}}]),r}(d.Component);a.default=h},function(e,t,a){e.exports={wrapper:"thPTMVSpjM6ZufPDuzykF",indicator:"_1lBM82p9Ksgncv6GSgHrHt",pending:"_3NeVNf4NiX9V831jYF8w4M",current:"_3PpRNuetQdN9jDMxk5z1wk",fullfill:"_2ULf1mAxJvjg65-bY76hGR"}},function(e,t,a){e.exports={content:"THjO0nqOHFnL0C82sdOjK",formWrapper:"_1pMNOwJjEl4YoOiRYTZuel",form:"_1eqfbeVSMtiU8imBQ_IVsQ",steps:"_3UYFmXGEQit5rJh-8U6XXe",control:"_1gpDWlp0j17OplfPf6bRt"}},function(e,t,a){e.exports={modal:"_1XlWaPapH46cbNu3hZGvaK",intro:"_1tgVqbLxsu1iO0JifaIrDW",icon:"_1564b2zp57bs2ZwihiPDBe",text:"P-C3WCuJxI66ExNOL235G",loading:"_8dlv9Jo5agw2j4WbF_zur"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(12),r(109),r(18),r(16),r(137),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(18),r(42),r(16),r(137),r(4),r(22),r(23),r(57),r(17);var o=l(r(315)),u=l(r(43));r(41);var c=l(r(44)),s=l(r(36)),i=l(r(37)),f=l(r(55)),d=l(r(56)),p=l(r(51)),m=r(186),v=l(r(787)),h=l(r(1)),E=n(r(0)),y=r(815),g=r(1295),b=l(r(984));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var n;return(0,s.default)(this,r),(n=a.call(this,e)).formRef=E.default.createRef(),n.onOk=(0,c.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.formRef.current.validate((0,c.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.onOk(n.state.backup);case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.onCancel=function(){n.props.onCancel()},n.state={backup:{name:"",alias:""}},n.formItems=e.app_id===y.RadonDBAppId.PostgreSQL?null:[{name:"name",label:"NAME",type:"text",description:"BACKUP_NAME_DESC",rules:[{pattern:g.backupNameRegx,message:t("INVALID_BACKUP_NAME_DESC")},{required:!0,message:t("BACKUP_NAME_EMPTY_DESC")}],range:{max:24}},{name:"alias",label:"ALIAS",type:"text",description:"ALIAS_NAME_DESC",range:{max:63}}],n}return(0,i.default)(r,[{key:"render",value:function(){var e=Object.assign({},this.props);return E.default.createElement(v.default,(0,o.default)({width:600,footerClassName:b.default.footer},e,{onOk:this.onOk,onCancel:this.onCancel,okText:t("BACK_UP")}),E.default.createElement("div",{className:b.default.tips},t("BACKUP_WARNING")),this.props.app_id===y.RadonDBAppId.PostgreSQL&&E.default.createElement("div",{className:b.default.tips},t("BACKUP_POSTGRE_SQL_TIP")),E.default.createElement(m.Form,{className:b.default.form,data:this.state.backup,ref:this.formRef},this.formItems?this.formItems.map((function(e){var a=e.name,r=e.label,n=e.description,l=e.rules,o=e.range;return E.default.createElement(m.Form.Item,{key:a,label:t(r),desc:t(n),rules:l||[]},E.default.createElement(m.Input,{name:a,maxLength:o&&o.max?o.max:-1}))})):E.default.createElement("div",null,t("BACKUP_COMFIRM_TIP"))))}}]),r}(E.Component);a.default=_,_.propTypes={onOk:h.default.func,onCancel:h.default.func,app_id:h.default.string},_.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(84),r(73),r(137),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(73),r(28),r(42),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(319),r(22),r(23),r(57),r(17),r(85),r(7);var o=l(r(315)),u=l(r(43)),c=l(r(30));r(41);var s=l(r(44)),i=l(r(36)),f=l(r(37)),d=l(r(55)),p=l(r(56)),m=l(r(51)),v=n(r(0)),h=l(r(1)),E=l(r(26)),y=r(186),g=l(r(240)),b=l(r(787)),S=l(r(1199)),_=r(815),O=l(r(984));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=[{label:"00:00:00–02:00:00",value:"0"},{label:"02:00:00–04:00:00",value:"2"},{label:"04:00:00–06:00:00",value:"4"},{label:"06:00:00–08:00:00",value:"6"},{label:"08:00:00–10:00:00",value:"8"},{label:"10:00:00–12:00:00",value:"10"},{label:"12:00:00–14:00:00",value:"12"},{label:"14:00:00–16:00:00",value:"14"},{label:"16:00:00–18:00:00",value:"16"},{label:"18:00:00–20:00:00",value:"18"},{label:"20:00:00–22:00:00",value:"20"},{label:"22:00:00–24:00:00",value:"22"}],N=function(e){(0,d.default)(r,e);var a=R(r);function r(e){var n;(0,i.default)(this,r),(n=a.call(this,e)).getBackupSchedule=function(){var e=n.state,t=e.checked,a=e.timePeriod,r=e.cycle;return t&&r.length?"0 ".concat(a," * * ").concat(r.join(",")):""},n.handleToggle=function(e){n.setState({checked:e})},n.handleCheckBoxChange=function(e){n.setState({cycle:e})},n.handleSelectChange=function(e){n.setState({timePeriod:e})},n.onOk=(0,s.default)(u.default.mark((function e(){var a,r,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state,r=a.retentionTime,l=a.cycle,!a.checked){e.next=8;break}if(r){e.next=5;break}return g.default.error({content:t("BACKUP_RETENTION_DAYS_ERROR")}),e.abrupt("return");case 5:if(0!==l.length){e.next=8;break}return g.default.error({content:t("BACKUP_DATE_ERROR")}),e.abrupt("return");case 8:n.props.onOk(T(T({},n.props),{},{backupSchedule:n.getBackupSchedule(),retentionTime:r}));case 9:case"end":return e.stop()}}),e)}))),n.onCancel=function(){n.props.onCancel()};var l=e.backupSchedule,o=!!l,c="0",f=["0","1","2","3","4","5","6"],d=e.retentionTime||30;if(o){var p=l.split(" ");c=(0,E.default)(p,"[1]",c),f=(0,E.default)(p,"[4]","").split(",").filter((function(e){return f.includes(e)}))}return n.state={checked:o,timePeriod:c,cycle:f,isScheduledDelete:e.isScheduledDelete||!1,retentionTime:d},n}return(0,f.default)(r,[{key:"checkBoxOptions",get:function(){return[{label:t("MONDAY"),value:"1"},{label:t("TUESDAY"),value:"2"},{label:t("WEDNESDAY"),value:"3"},{label:t("THURSDAY"),value:"4"},{label:t("FRIDAY"),value:"5"},{label:t("SATURDAY"),value:"6"},{label:t("SUNDAY"),value:"0"}]}},{key:"checkBoxPGOptions",get:function(){return[{label:t("MONDAY"),value:"0"},{label:t("TUESDAY"),value:"1"},{label:t("WEDNESDAY"),value:"2"},{label:t("THURSDAY"),value:"3"},{label:t("FRIDAY"),value:"4"},{label:t("SATURDAY"),value:"5"},{label:t("SUNDAY"),value:"6"}]}},{key:"showScheduledDelete",get:function(){return this.props.app_id===_.RadonDBAppId.PostgreSQL}}]),(0,f.default)(r,[{key:"render",value:function(){var e=this,a=Object.assign({},this.props);return v.default.createElement(b.default,(0,o.default)({width:600,footerClassName:O.default.footer},a,{onOk:this.onOk,onCancel:this.onCancel}),v.default.createElement("div",{className:O.default.autoBackupToggle},v.default.createElement(y.Toggle,{checked:this.state.checked,onChange:this.handleToggle}),v.default.createElement("span",null,this.state.checked?t("ENABLED"):t("DISABLED"))),this.state.checked?v.default.createElement("div",{className:O.default.autoBackupSetting},v.default.createElement("div",{className:O.default.formItem},v.default.createElement("span",{className:O.default.label},t("BACKUP_TIME")),v.default.createElement(y.Select,{options:D,value:this.state.timePeriod,onChange:this.handleSelectChange})),v.default.createElement("div",{className:O.default.formItem},v.default.createElement("span",{className:O.default.label},t("BACKUP_DATE")),v.default.createElement(y.CheckboxGroup,{value:this.state.cycle,options:this.showScheduledDelete?this.checkBoxPGOptions:this.checkBoxOptions,onChange:this.handleCheckBoxChange})),this.showScheduledDelete&&v.default.createElement("div",null,v.default.createElement("span",{className:O.default.label},t("BACKUP_RETENTION_DAYS")),v.default.createElement(S.default,{className:O.default.retentionTime,min:1,unit:t("BACKUP_DAY"),value:this.state.retentionTime,max:365,showUnit:!0,integer:!0,showFunc:!0,onChange:function(t){var a=""===t?t:parseInt(t,10);e.setState({retentionTime:a})}}))):null)}}]),r}(v.Component);a.default=N,N.propTypes={onOk:h.default.func,onCancel:h.default.func},N.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(18),r(48),r(16),r(137),r(9),r(13),r(10),r(4),r(23),r(17),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(48),r(42),r(16),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7),r(110);var o=l(r(315)),u=l(r(43)),c=l(r(30));r(41);var s=l(r(44)),i=l(r(36)),f=l(r(37)),d=l(r(55)),p=l(r(56)),m=l(r(51)),v=n(r(0)),h=l(r(1)),E=l(r(3)),y=r(186),g=l(r(26)),b=r(52),S=l(r(795)),_=l(r(1383)),O=l(r(984));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var D=function(e){(0,d.default)(r,e);var a=R(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).onOk=(0,s.default)(u.default.mark((function t(){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.store.create(T(T({},e.props),{},{id:e.props.cluster_id}));case 2:return t.next=4,e.props.store.fetchList(T(T({},e.props),{},{id:e.props.cluster_id}));case 4:e.props.onOk();case 5:case"end":return t.stop()}}),t)}))),e.onCancel=function(){e.props.onCancel()},e}return(0,f.default)(r,[{key:"getIsRebalancing",value:function(e){var t=(0,g.default)(e,"[0]");return t&&"Creating"===t.status}},{key:"componentDidMount",value:function(){var e=this;if(this.getIsRebalancing(this.props.store.list.data)){var t=this.props,a={cluster:t.cluster,namespace:t.namespace,id:t.cluster_id};this.props.store.fetchList(a),this.timer=setInterval((function(){e.props.store.fetchList(a).then((function(t){e.getIsRebalancing(t)||clearInterval(e.timer)}),(function(){clearInterval(e.timer)}))}),1e4)}}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"render",value:function(){var e=Object.assign({},this.props),a=this.props.store.list,r=this.getIsRebalancing(this.props.store.list.data),n=a.isLoading||r;return v.default.createElement(_.default,(0,o.default)({width:600,footerClassName:O.default.footer},e,{disableSubmit:n,onOk:this.onOk,onCancel:this.onCancel,okText:t("START_REBALANCING"),okTooltip:r?t("REBALANCING_IN_PROGRESS_DESC"):""}),v.default.createElement("div",{className:O.default.modalPadding},v.default.createElement(y.Alert,{className:O.default.alert,type:"warning",message:t("KAFKA_OPERATION_WARNING")}),v.default.createElement("div",{className:O.default.rebalance},v.default.createElement("div",{className:O.default.subTitle},t("REBALANCING_HISTORY")),v.default.createElement("div",{className:O.default.historyContainer},v.default.createElement("div",{className:O.default.row},v.default.createElement("div",{className:O.default.time},t("TIME")),v.default.createElement("div",{className:O.default.status},t("STATUS"))),a.data.slice(0,3).map((function(e){return v.default.createElement("div",{key:e.name,className:(0,E.default)(O.default.row,O.default.historyItem)},v.default.createElement("div",{className:O.default.time},(0,b.getLocalTime)(e.creationTimestamp).format("YYYY-MM-DD HH:mm:ss")),v.default.createElement("div",{className:O.default.status},v.default.createElement(S.default,{type:e.status,name:t(e.statusName),flicker:!0})))}))))))}}]),r}(v.Component);a.default=D,D.propTypes={onOk:h.default.func,onCancel:h.default.func},D.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(109),r(11),r(6),r(73),r(18),r(16),r(27),r(931),r(137),r(9),r(13),r(10),r(4),r(316),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(11),r(6),r(73),r(18),r(28),r(42),r(16),r(931),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(319),r(22),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(315)),c=l(r(58)),s=l(r(43));r(41);var i=l(r(44)),f=l(r(36)),d=l(r(37)),p=l(r(55)),m=l(r(56)),v=l(r(51)),h=n(r(0)),E=l(r(1)),y=r(186),g=l(r(26)),b=l(r(74)),S=l(r(158)),_=l(r(787)),O=l(r(966)),C=l(r(1199)),T=l(r(984));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var k=function(e){(0,p.default)(r,e);var a=N(r);function r(e){var n;(0,f.default)(this,r),(n=a.call(this,e)).formRef=h.default.createRef(),n.onOk=(0,i.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===Object.values(n.state.error).join("")){e.next=2;break}return e.abrupt("return");case 2:n.formRef.current.validate((0,i.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.onOk(n.state.detail);case 1:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)}))),n.onCancel=function(){n.props.onCancel()},n.generateMarks=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=4,n=parseInt((t-e)/r,10),l={},o=0;o<r;o++){var u=e+o*n;l[u]=0===u?u:u+a}return l[t]=t+a,l},n.toggleAdvanced=function(){n.setState({showAdvanced:!n.state.showAdvanced})},n.getFormItems=function(e){var t=n.state,a=t.error,r=t.detail;return e.map((function(e){var t=e.name,l=e.type,o=e.label,s=e.description,i=e.rules,f=void 0===i?[]:i,d=e.range,p=e.unit,m=e.showFunc,v=e.options,E=e.validator,S=(0,c.default)(e,["name","type","label","description","rules","range","unit","showFunc","options","validator"]),_=(0,g.default)(a,'["'.concat(t,'"]')),T=(0,g.default)(r,'["'.concat(t,'"]'));switch(l){case"text":return h.default.createElement(y.Form.Item,{key:t,label:o,desc:s,rules:f},h.default.createElement(y.Input,(0,u.default)({name:t,maxLength:d&&d.max?d.max:-1},S)));case"textArea":return h.default.createElement(y.Form.Item,(0,u.default)({key:t,label:o,desc:s,rules:f},S),h.default.createElement(TextArea,{maxLength:256,name:t}));case"number":return h.default.createElement(y.Form.Item,{key:t,label:o,desc:s,rules:f},h.default.createElement(C.default,(0,u.default)({name:t,integer:!0,min:d.min,max:d.max,showFunc:m,unit:p,showUnit:!!p,value:(0,g.default)(n.state,'detail["'.concat(t,'"]'),T),onChange:function(e){(0,b.default)(n.state,'detail["'.concat(t,'"]'),""===e?e:parseInt(e,10)),n.forceUpdate()}},S)));case"select":return h.default.createElement(y.Form.Item,{key:t,label:o,desc:s,rules:f},h.default.createElement(y.Select,{name:t,options:v}));case"slider":return h.default.createElement(y.Form.Item,{key:t,label:o,desc:s,rules:f,error:_?{message:_}:null},S.disabled?h.default.createElement(C.default,(0,u.default)({integer:!0,unit:p,showUnit:!!p,name:t,value:(0,g.default)(n.state,'detail["'.concat(t,'"]'),T)},S)):h.default.createElement(O.default,{name:t,max:d.max,min:d.min,unit:p,marks:n.generateMarks(d.min,d.max,p),value:T,onChange:function(e){if(E){var r=E(e,D(D({},d),{},{unit:p})),l=r.error,o=r.message;l?(0,b.default)(a,'["'.concat(t,'"]'),o):(0,b.default)(a,'["'.concat(t,'"]'),"")}(0,b.default)(n.state,'detail["'.concat(t,'"]'),e),n.forceUpdate()},withInput:!0}));default:return null}}))};var l={name:"",partitions:3,replicas:Math.min(3,e.kafkaReplicas),"cleanup.policy":"delete","min.insync.replicas":1,"unclean.leader.election.enable":"true","segment.ms":6048e5,"retention.ms":6048e5,"retention.bytes":-1,"max.message.bytes":1048588};return n.state={detail:e.detail?D(D({},l),e.detail):l,error:{},showAdvanced:!1},n.formItems=[{name:"name",label:t("NAME"),type:"text",description:t("TOPIC_NAME_DESC"),range:{max:100},rules:[{pattern:/^[a-z][a-z0-9-.]{0,100}$/,message:t("INVALID_TOPIC_NAME_DESC")},{required:!0,message:t("TOPIC_NAME_EMPTY_DESC")}],disabled:!!e.detail},{name:"partitions",label:t("PARTITION_COUNT"),type:"slider",unit:"",description:e.detail?"":" ",range:{min:1,max:1e3},validator:function(a,r){var n=r.min,l=r.max,o=parseInt(a,10),u=(0,g.default)(e,"detail.partitions");return!(0,S.default)(u)&&o<u?{error:!0,message:t("INVALID_PARTITION_COUNT_DESC",{min:u,max:l})}:Number.isNaN(o)||o<n||o>l?{error:!0,message:t("INVALID_PARTITION_COUNT_DESC",{min:n,max:l})}:{error:!1}},rules:[{required:!0,message:t("PARAM_REQUIRED")}]},{name:"replicas",label:t("REPLICA_COUNT"),type:"number",range:{min:1,max:e.kafkaReplicas},showFunc:!0,description:t("TOPIC_REPLICA_COUNT_DESC"),disabled:!!e.detail,rules:[{required:!0,message:t("PARAM_REQUIRED")}]}],n.advancedItems=[{name:"cleanup.policy",label:"cleanup.policy",type:"select",description:t("CLEANUP_POLICY_DESC"),options:[{label:t("CLEANUP_POLICY_DELETE"),value:"delete"},{label:t("CLEANUP_POLICY_COMPACT"),value:"compact"}]},{name:"min.insync.replicas",label:"min.insync.replicas",type:"number",description:t("MIN_INSYNC_REPLICAS_DESC"),range:{min:1,max:(0,g.default)(n.state.detail,"replicas",1)},showFunc:!0},{name:"unclean.leader.election.enable",label:"unclean.leader.election.enable",type:"select",description:t("UNCLEAN_LEADER_ELECTION_ENABLE_DESC"),options:[{label:t("TRUE"),value:"true"},{label:t("FALSE"),value:"false"}]},{name:"segment.ms",label:"segment.ms",type:"number",description:t("SEGMENT_MS_DESC"),range:{min:864e5},unit:"ms"},{name:"retention.ms",label:"retention.ms",type:"number",description:t("RETENTION_MS_DESC"),range:{min:-1},unit:"ms"},{name:"retention.bytes",label:"retention.bytes",type:"number",description:t("RETENTION_BYTES_DESC"),range:{min:-1},unit:"byte"},{name:"max.message.bytes",label:"max.message.bytes",type:"number",description:t("MAX_MESSAGE_BYTES_DESC"),range:{min:0},unit:"byte"}],n}return(0,d.default)(r,[{key:"render",value:function(){var e=Object.assign({},this.props);return h.default.createElement(_.default,(0,u.default)({width:600,footerClassName:T.default.footer},e,{onOk:this.onOk,onCancel:this.onCancel}),h.default.createElement(y.Form,{className:T.default.form,data:this.state.detail,ref:this.formRef},this.getFormItems(this.formItems),h.default.createElement("div",{className:T.default.advanced,onClick:this.toggleAdvanced},h.default.createElement("span",null,t("ADVANCED_SETTINGS")),h.default.createElement(y.Icon,{name:this.state.showAdvanced?"chevron-up":"chevron-down",size:"20"})),this.state.showAdvanced&&this.getFormItems(this.advancedItems)))}}]),r}(h.Component);a.default=k,k.propTypes={onOk:E.default.func,onCancel:E.default.func,app_id:E.default.string},k.defaultProps={onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(58)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(1)),v=r(186),h=l(r(787)),E=l(r(3254));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var g=function(e){(0,i.default)(r,e);var a=y(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChangeCheck=function(e){localStorage.setItem("".concat(globals.user.username,"-app-agreement"),e)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onOk,n=(0,u.default)(e,["visible","onOk"]);return p.default.createElement(h.default,(0,o.default)({width:600,bodyClassName:E.default.body,visible:a,hideHeader:!0,onOk:r,okText:t("AGREE")},n),p.default.createElement("div",{className:E.default.wrapper},p.default.createElement("img",{src:"/assets/app-safety.svg",alt:""}),p.default.createElement("div",{className:E.default.content},p.default.createElement("div",{className:E.default.title}," ",t("APP_DEPLOY_AGREEMENT")),p.default.createElement("ul",null,p.default.createElement("li",null,t("APP_DEPLOY_AGREEMENT_DESC_1")),p.default.createElement("li",null,t("APP_DEPLOY_AGREEMENT_DESC_2"))),p.default.createElement(v.Checkbox,{onChange:this.handleChangeCheck},t("DO_NOT_REMIND_AGAIN")))))}}]),r}(p.Component);a.default=g,g.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},g.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"_1yenBd_xxty8LIDUQZfbje",wrapper:"_1hbebsdjZ3ZpoZNh-lJuTR",content:"_2sujFFe0rBgZgjurei191W",title:"_2ZVasVLtnF01STWETyn4LD"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3256));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={confirm:""},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleOk=function(){e.props.onOk()},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.resource,r=e.visible,n=e.onCancel,l=e.title,o=e.desc,u=e.isSubmitting,c=o||(a?1===a.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{resource:a,type:""}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{resource:a,type:""}):t.html("UPDATE_VERSION_DESC",{resource:a,type:""}));return i.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:r,isSubmitting:u,onCancel:n,hideHeader:!0,hideFooter:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"update",type:"light",className:m.default.closeIcon}),l||t("UPDATE_VERSION")),i.default.createElement("div",{className:m.default.content},i.default.createElement("p",null,c),a&&i.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:a,autoFocus:!0}))),i.default.createElement("div",{className:m.default.footer},i.default.createElement(d.Button,{onClick:n,"data-test":"modal-cancel"},t("CANCEL")),i.default.createElement(d.Button,{type:"danger",loading:u,disabled:u||!!a&&this.state.confirm!==a,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalBody:"dSVZHFsjnhedVNtz82AvW",body:"_2Mux1kpI6qcjYjhrMA0o9m",content:"_3dYpBTkEKI5yi-0GJv33vk",closeIcon:"_1DzCeDvGNINV5MBXfi4wr-",footer:"_15WXkPqTa6X7mFd75RF17q"}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(87),r(16),r(9),r(13),r(10),r(4),r(22),r(24),r(85),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(61)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(30)),s=n(r(58));r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(87),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var i=n(r(240)),f=n(r(787)),d=n(r(1729)),p=n(r(825)),m=n(r(824)),v=n(r(3259)),h=n(r(3265)),E=n(r(3267)),y=n(r(3268)),g=n(r(3322)),b=r(3324),S=n(r(3335)),_=n(r(135)),O=n(r(26)),C=n(r(63)),T=n(r(189)),R=n(r(74)),D=r(14),N=r(1183),k=r(982);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=e.type.toLowerCase().split("parameterdefinition")[0],a=(0,O.default)(e,"defaultParameterValue.value"),r=e.name,n=(0,O.default)(e,"choices",[]),l={};switch(t){case"choice":l={name:r,value:a||n[0]};break;default:l={name:r,value:a}}return l}var w={"pipeline.create":{on:function(e){var a,r=e.store,n=e.cluster,l=e.devops,c=(e.workspace,e.module),d=e.success,m=e.formTemplate,v=(0,s.default)(e,["store","cluster","devops","workspace","module","success","formTemplate"]),h=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.updatePipelineParams)(a),(0,k.updatePipelineParamsInSpec)(a,l),e.next=4,r.createPipeline({data:a,devops:l,cluster:n});case 4:f.default.close(h),i.default.success({content:t("CREATE_SUCCESSFUL")}),d&&d();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,module:c,cluster:n,devops:l,formTemplate:m,modal:p.default,steps:b.PIPELINE_PROJECT_CREATE_STEPS,noCodeEdit:!0},v))}},"pipeline.batch.delete":{on:function(e){var a,r=e.store,n=e.success,l=e.rowKey,c=e.devops,d=e.cluster,p=(0,s.default)(e,["store","success","rowKey","devops","cluster"]),v=(0,D.toJS)(r.list),h=v.data,E=v.selectedRowKeys,y=h.filter((function(e){return E.includes(e[l])})).map((function(e){return e.name})),g=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],h.forEach((function(e){y.includes(e.name)&&a.push(r.delete({name:e.name,devops:c,cluster:d}))})),e.next=4,Promise.all(a);case 4:f.default.close(g),i.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:y.join(", "),modal:m.default,store:r},p))}},"pipeline.batch.run":{on:function(e){return(0,u.default)(o.default.mark((function a(){var r,n,l,c,s,f,d,p,m,v;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.success,l=e.rowKey,c=e.devops,s=e.cluster,f=(0,D.toJS)(r.list),d=f.data,p=f.selectedRowKeys,i.default.success({content:1===d.length?t("PIPELINE_RUN_START_SI"):t("PIPELINE_RUN_START_PL")}),m=d.filter((function(e){return p.includes(e[l])})).map((function(e){return e.name})),v=[],d.forEach(function(){var e=(0,u.default)(o.default.mark((function e(t){var a,n,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.includes(t.name)){e.next=11;break}if(a=t.parameters,n=t.branchNames,l=(0,O.default)(n,"[0]",""),!n||(0,C.default)(n)){e.next=9;break}return e.next=7,r.getBranchDetail({branch:l,name:t.name,devops:c,cluster:s});case 7:u=e.sent,a=u.parameters||void 0;case 9:(0,C.default)(a)||(a=a.map((function(e){return A(e)}))),v.push(r.runBranch({name:t.name,devops:c,cluster:s,branch:l,parameters:a}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.next=8,Promise.all(v);case 8:i.default.success({content:1===d.length?t("BATCH_RUN_SUCCESS_SI"):t("BATCH_RUN_SUCCESS_PL")}),r.setSelectRowKeys([]),n&&n();case 11:case"end":return a.stop()}}),a)})))()}},"pipeline.edit":{on:function(e){var a=e.store,r=e.cluster,n=e.devops,c=e.success,d=e.formTemplate,p=(0,s.default)(e,["store","cluster","devops","success","formTemplate"]),m=null;if((0,O.default)(d,"multi_branch_pipeline")){var v=(0,O.default)(d,"multi_branch_pipeline"),E=(0,O.default)(v,"source_type"),y=(0,O.default)(v,"".concat(E,"_source.scm_id"));(0,R.default)(d,"multi_branch_pipeline.key",y),m=E;var g=N.omitRepoKeys[E].map((function(e){return"".concat(E,"_source.").concat(e)}));(0,R.default)(d,"__multi_branch_pipeline",(0,T.default)(v,["source_type"].concat((0,l.default)(g),["key"])))}var b,S=f.default.open(P({onOk:(b=(0,u.default)(o.default.mark((function e(l){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.resetPipelineMultiBranch)(l),(0,k.updatePipelineParams)(l,!0),(0,k.updatePipelineParamsInSpec)(l,n),e.next=5,a.updatePipeline({data:l,devops:n,cluster:r});case 5:f.default.close(S),i.default.success({content:t("UPDATE_SUCCESSFUL")}),c&&c();case 8:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)}),store:a,cluster:r,devops:n,provider:m,formTemplate:(0,_.default)(d),modal:h.default},p))}},"pipeline.advance.edit":{on:function(e){var a,r=e.store,n=e.cluster,l=e.devops,c=e.success,d=e.formTemplate,p=(0,s.default)(e,["store","cluster","devops","success","formTemplate"]),m=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.updatePipelineParams)(a,!0),(0,k.updatePipelineParamsInSpec)(a,l),e.next=4,r.updatePipeline({data:a,devops:l,cluster:n});case 4:f.default.close(m),i.default.success({content:t("UPDATE_SUCCESSFUL")}),c&&c();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:n,devops:l,formTemplate:(0,_.default)(d),modal:v.default},p))}},"pipeline.params":{on:function(e){var a,r=e.store,n=e.success,l=e.devops,c=e.cluster,p=(0,s.default)(e,["store","success","devops","cluster"]),m=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a,u){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.success({content:"".concat(t("PIPELINE_RUN_START_SI"))}),e.next=3,r.runBranch({devops:l,name:p.params.name,branch:u,parameters:a,cluster:c});case 3:f.default.close(m),n&&n(u);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)}),store:r,devops:l,cluster:c,modal:d.default},p))}},"pipeline.scanRepositoryLogs":{on:function(e){var t,a=e.store,r=(e.success,(0,s.default)(e,["store","success"])),n=f.default.open(P({onOk:(t=(0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.default.close(n);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),modal:g.default,store:a},r))}},"pipeline.jenkins":{on:function(e){var a,r=e.store,n=e.params,l=e.defaultValue,c=e.success,d=(0,s.default)(e,["store","params","defaultValue","success"]),p=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateJenkinsFile(a,n);case 2:f.default.close(p),i.default.success({content:t("UPDATE_SUCCESSFUL")}),c&&c();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:S.default,defaultValue:l,params:n},d))}},"pipeline.pipelineCreate":{on:function(e){var a,r=e.store,n=(e.rootStore,e.success),l=e.jsonData,c=e.params,d=(0,s.default)(e,["store","rootStore","success","jsonData","params"]),p=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.updateJenkinsFile(a,c);case 2:f.default.close(p),i.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:y.default,jsonData:l,params:c,store:r},d))}},"pipeline.pipelineTemplateOld":{on:function(e){var t,a=e.store,r=(e.rootStore,e.success),n=e.jsonData,l=e.params,c=(0,s.default)(e,["store","rootStore","success","jsonData","params"]),i=f.default.open(P({onOk:(t=(0,u.default)(o.default.mark((function e(t){var n,u,c,s,d,p,m,v;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.jenkinsFile,"custom"===t.template){e.next=13;break}return u=t.paramsForm,c=void 0===u?{}:u,s=Object.keys(c).reduce((function(e,t){return e.push({name:t,value:c[t]}),e}),[]),e.next=6,a.getTempleJenkins(t.template,{parameters:s},{cluster:l.cluster});case 6:return d=e.sent,p=l.devops,m=l.name,v=l.cluster,e.next=10,a.checkScriptCompile({devops:p,pipeline:m,value:d,cluster:v});case 10:return e.next=12,a.convertJenkinsFileToJson(d,v);case 12:n=e.sent;case 13:f.default.close(i),r&&r(n);case 15:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),modal:p.default,steps:b.PIPELINE_CREATE_STEPS_OLD,jsonData:n,params:l,store:a},c))}},"pipeline.pipelineTemplate":{on:function(e){var t=e.store,a=(e.rootStore,e.success),r=e.jsonData,n=e.params,l=(e.pipelineDetailStore,(0,s.default)(e,["store","rootStore","success","jsonData","params","pipelineDetailStore"]));t.isSubmitting=!1;var c,i=f.default.open(P({onOk:(c=(0,u.default)(o.default.mark((function e(r){var l,u,c,s,d,p,m,v,h,E,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("custom"===r.template){e.next=17;break}return u=r.paramsForm,c=void 0===u?{}:u,s=Object.keys(c).reduce((function(e,t){return e.push({name:t,value:c[t]}),e}),[]),e.next=5,t.getTempleJenkins(r.template,{parameters:s},{cluster:n.cluster});case 5:return d=e.sent,p=n.devops,m=n.name,v=n.cluster,e.next=9,t.checkScriptCompile({devops:p,pipeline:m,value:d,cluster:v});case 9:return e.next=11,t.convertJenkinsFileToJson(d,v,p,m,!0);case 11:h=e.sent,E=h.mode,y=h.jsonData,l={jenkinsFile:d,jsonData:y,mode:E,template:r.template},e.next=18;break;case 17:l={jenkinsFile:"",json:{},mode:"raw",template:"custom"};case 18:f.default.close(i),a&&a(l);case 20:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),modal:p.default,steps:b.PIPELINE_CREATE_STEPS,jsonData:r,params:n,store:t},l))}},"pipeline.copy":{on:function(e){var a,r=e.store,n=e.cluster,l=e.devops,c=e.success,d=e.formTemplate,p=(0,s.default)(e,["store","cluster","devops","success","formTemplate"]),m=f.default.open(P({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,k.updatePipelineParams)(a,!0),(0,k.updatePipelineParamsInSpec)(a,l),Object.keys(a).forEach((function(e){"metadata"===e&&a[e]&&Object.keys(a[e]).forEach((function(t){"name"!==t&&"namespace"!==t&&delete a[e][t]}))})),e.next=5,r.createPipeline({data:a,devops:l,cluster:n});case 5:f.default.close(m),i.default.success({content:t("CREATE_SUCCESSFUL")}),c&&c();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,cluster:n,devops:l,success:c,formTemplate:d,modal:E.default},p))}}};a.default=w},,function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(6),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(6),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(787)),p=n(r(26)),m=n(r(1730));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=["discarder","timer_trigger","remote_trigger","regex_filter","multibranch_job_trigger"],E=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).setEnableFlag=function(e){var a=e||{},r=a.pipeline,n=a.multi_branch_pipeline,l=r||n;l&&(h.forEach((function(t){var a=l[t]||(0,p.default)(l,"svn_source.".concat(t))||(0,p.default)(l,"git_source.".concat(t))||(0,p.default)(l,"github_source.".concat(t))||(0,p.default)(l,"gitlab_source.".concat(t))||(0,p.default)(l,"bitbucket_server_source.".concat(t))||(0,p.default)(l,"multibranch_job_trigger");(l[t]||a)&&(e["enable_".concat(t)]=!0)})),e.description=l.description,t.setState({formTemplate:e}))},t.handleOk=function(){var e=t.formRef&&t.formRef.current;e&&e.validate((function(){t.props.onOk(t.formRef.current.getData())}))},t.formRef=i.default.createRef(),t.state={formTemplate:{}},t}return(0,o.default)(r,[{key:"componentDidMount",value:function(){this.setEnableFlag(this.props.formTemplate)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel;return i.default.createElement(d.default,{width:1162,onCancel:r,onOk:this.handleOk,visible:a,closable:!1,title:t("EDIT_PIPELINE")},i.default.createElement(m.default,{type:"edit",formRef:this.formRef,formTemplate:this.state.formTemplate,devops:this.props.devops,cluster:this.props.cluster}))}}]),r}(i.default.Component);a.default=E,E.propTypes={name:f.default.string,branches:f.default.array},E.defaultProps={branches:[],visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(42),r(448),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(85),r(64),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(198)),d=n(r(189)),p=n(r(63)),m=n(r(0)),v=n(r(1)),h=r(186),E=r(72),y=n(r(3261)),g=n(r(1731));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var O=function(e){(0,c.default)(r,e);var a=_(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleChange=function(t){var a=e.props,r=a.value;(0,a.onChange)(S(S({},r),t))},e.handleDelete=function(t){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))},e.handleMoreMenuClick=function(t,a){var r=e.props,n=r.value,l=r.onChange;if(!(0,f.default)(n,a))switch(a){case"discover_branches":l(S(S({},n),{},{discover_branches:1}));break;case"discover_pr_from_origin":l(S(S({},n),{},{discover_pr_from_origin:1}));break;case"discover_pr_from_forks":l(S(S({},n),{},{discover_pr_from_forks:{strategy:1,trust:2}}));break;case"discover_tags":l(S(S({},n),{},{discover_tags:!0}))}},e}return(0,u.default)(r,[{key:"renderMoreMenu",value:function(){var e=this,a=this.props.value,r=Object.keys(a);return m.default.createElement(h.Menu,{onClick:this.handleMoreMenuClick},!(0,p.default)(this.menuData)&&Object.keys(this.menuData).map((function(a){return m.default.createElement(h.Menu.MenuItem,{key:a,disabled:r.includes(a)},m.default.createElement(h.Icon,{name:"ticket"})," ",t(e.menuData[a].replace(/\s/g,"_").toUpperCase()))})))}},{key:"render",value:function(){var e=this,a=this.props,r=a.name,n=a.value;return m.default.createElement("div",null,m.default.createElement("div",{className:g.default.header},m.default.createElement(h.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},m.default.createElement(h.Button,{type:"control"},t("ADD_STRATEGY")))),m.default.createElement("div",{className:g.default.content},Object.keys(this.menuData).filter(f.default.bind(this,n)).map((function(t,a){return m.default.createElement(y.default,{key:a,value:(0,l.default)({},t,n[t]),prefix:"".concat(r,"[").concat(a,"]"),onDelete:e.handleDelete.bind(e,t),onChange:e.handleChange,menuData:e.menuData})}))))}},{key:"menuData",get:function(){var e=this.props.sourceType;return["gitlab","github","bitbucket_server"].includes(e)?E.PIPELINE_ACTION_TYPES:{}}}]),r}(m.default.Component);a.default=O,O.propTypes={name:v.default.string,value:v.default.object,onChange:v.default.func,sourceType:v.default.string},O.defaultProps={name:"",value:{},sourceType:"",onChange:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(64),r(136),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(1)),p=n(r(26)),m=n(r(800)),v=n(r(74)),h=r(186),E=n(r(1731));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=function(e){(0,c.default)(r,e);var a=b(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).triggerChange=(0,m.default)((function(t){e.props.onChange(t)}),500),e.handleChange=function(t){return function(a){var r=t.split(".");if(r.length>1){var n=(0,p.default)(e.props.value,r[0]);return n?(0,v.default)(n,r[1],a):n=(0,l.default)({},r[1],a),void e.triggerChange(g(g({},e.props.value),{},(0,l.default)({},r[0],n)))}e.triggerChange(g(g({},e.props.value),{},(0,l.default)({},t,a)))}},e}return(0,u.default)(r,[{key:"renderFormItems",value:function(e){var t=null;switch(e){case"discover_branches":t=this.renderBranchesFormItems();break;case"discover_pr_from_origin":t=this.renderPrOriginFormItems();break;case"discover_pr_from_forks":t=this.renderPrForkFormItems();break;default:t=this.renderTagBranchesFormItems()}return t}},{key:"renderTagBranchesFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(h.Form.Item,{label:t("STRATEGY")},f.default.createElement(h.Select,{name:"discover_tags",defaultValue:e.discover_tags,onChange:this.handleChange("discover_tags"),options:[{label:t("ENABLE_TAG_BRANCH_DISCOVERY"),value:!0},{label:t("DISABLE_TAG_BRANCH_DISCOVERY"),value:!1}]})))}},{key:"renderBranchesFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(h.Form.Item,{label:t("STRATEGY")},f.default.createElement(h.Select,{name:"discover_branches",defaultValue:e.discover_branches,onChange:this.handleChange("discover_branches"),options:[{label:t("EXCLUDE_PR_BRANCHES"),value:1},{label:t("ONLY_PR_BRANCHES"),value:2},{label:t("ALL_BRANCHES"),value:3}]})))}},{key:"renderPrOriginFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(h.Form.Item,{label:t("PULL_STRATEGY")},f.default.createElement(h.Select,{name:"discover_pr_from_origin",defaultValue:e.discover_pr_from_origin,onChange:this.handleChange("discover_pr_from_origin"),options:[{label:t("OPTIONS_PR_PARAMS_1"),value:1},{label:t("OPTIONS_PR_PARAMS_2"),value:2},{label:t("OPTIONS_PR_PARAMS_3"),value:3}]})))}},{key:"renderPrForkFormItems",value:function(){var e=this.props.value;return f.default.createElement("div",null,f.default.createElement(h.Columns,null,f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("PULL_STRATEGY")},f.default.createElement(h.Select,{name:"discover_pr_from_forks.strategy",defaultValue:e.discover_pr_from_forks&&e.discover_pr_from_forks.strategy,onChange:this.handleChange("discover_pr_from_forks.strategy"),options:[{label:t("OPTIONS_PR_PARAMS_1"),value:1},{label:t("OPTIONS_PR_PARAMS_2"),value:2},{label:t("OPTIONS_PR_PARAMS_3"),value:3}]}))),f.default.createElement(h.Column,null,f.default.createElement(h.Form.Item,{label:t("TRUSTED_USERS")},f.default.createElement(h.Select,{name:"discover_pr_from_forks.trust",defaultValue:e.discover_pr_from_forks&&e.discover_pr_from_forks.trust,onChange:this.handleChange("discover_pr_from_forks.trust"),options:[{label:t("CONTRIBUTORS"),value:1},{label:t("EVERYONE"),value:2},{label:t("USERS_WITH_PERMISSION"),value:3},{label:t("NOBODY"),value:4}]})))))}},{key:"render",value:function(){var e=this.props,a=e.value,r=e.onDelete,n=e.menuData,l=Object.keys(a)[0];return f.default.createElement("div",{className:E.default.itemWrapper},f.default.createElement("div",{className:E.default.itemTitle},f.default.createElement("p",null,f.default.createElement("strong",null,t(n[l].replace(/\s/g,"_").toUpperCase()))),f.default.createElement(h.Button,{className:E.default.delete,type:"flat",icon:"trash",onClick:r})),l&&this.renderFormItems(l))}}]),r}(f.default.Component);a.default=S,S.propTypes={value:d.default.object,onChange:d.default.func,onDelete:d.default.func},S.defaultProps={value:{},onChange:function(){},onDelete:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(18),r(16),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(18),r(42),r(448),r(16),r(10),r(4),r(23),r(57),r(17);var l=n(r(61)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(63)),d=n(r(60)),p=n(r(26)),m=n(r(74)),v=n(r(0)),h=n(r(1)),E=r(186),y=r(72),g=n(r(3263)),b=n(r(1732));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=S(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){var a=e.props,r=a.formTemplate,n=a.name;(0,m.default)(r,n,e.value.filter((function(e,a){return a!==t}))),e.forceUpdate()},e.handleMoreMenuClick=function(t,a){var r=e.props,n=r.formTemplate,o=r.name;(0,m.default)(n,o,[].concat((0,l.default)((0,d.default)(e.value)?e.value:[]),[{type:a}])),e.forceUpdate()},e}return(0,u.default)(r,[{key:"renderMoreMenu",value:function(){return v.default.createElement(E.Menu,{onClick:this.handleMoreMenuClick},Object.keys(y.PIPELINE_PARAMS_TYPES).map((function(e){return v.default.createElement(E.Menu.MenuItem,{key:e},v.default.createElement(E.Icon,{name:"ticket"})," ",t(y.PIPELINE_PARAMS_TYPES[e]))})))}},{key:"render",value:function(){var e=this,a=this.props.name;return v.default.createElement("div",{className:b.default.wrapper},v.default.createElement("div",{className:b.default.header},v.default.createElement(E.Dropdown,{theme:"dark",content:this.renderMoreMenu(),trigger:"click",placement:"bottomRight"},v.default.createElement(E.Button,{type:"control"},t("ADD")))),v.default.createElement("div",{className:b.default.content},(0,f.default)(this.value)&&v.default.createElement("p",{className:"text-center padding-12"},t("NO_DATA")),(0,d.default)(this.value)&&this.value.map((function(t,r){return v.default.createElement(g.default,{key:r,value:t,prefix:"".concat(a,"[").concat(r,"]"),onDelete:e.handleDelete.bind(e,r)})}))))}},{key:"value",get:function(){return(0,p.default)(this.props.formTemplate,this.props.name,[])}}]),r}(v.default.Component);a.default=_,_.propTypes={name:h.default.string,value:h.default.array,onChange:h.default.func},_.defaultProps={name:"",value:[],onChange:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(42),r(16),r(10),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=r(72),m=n(r(1732));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderFormItems",value:function(e){var t=null;switch(e){case"string":t=this.renderStringFormItems();break;case"text":t=this.renderTextFormItems();break;case"boolean":t=this.renderBooleanFormItems();break;case"choice":t=this.renderChoiceFormItems();break;case"password":t=this.renderPasswordFormItems()}return t}},{key:"renderStringFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE"),desc:t("PIPELINE_PARAM_DEFAULT_DESC")},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".default_value"),defaultValue:e.default_value||""})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderTextFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name})),i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".default_value"),defaultValue:e.default_value||""})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderBooleanFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("DEFAULT_VALUE")},i.default.createElement(d.RadioGroup,{name:"".concat(this.props.prefix,".default_value"),defaultValue:JSON.parse(e.default_value||"true")},i.default.createElement(d.Radio,{value:"true"},"True"),i.default.createElement(d.Radio,{value:"false"},"False"))))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderChoiceFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAMETER_NAME_EMPTY_DESC")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("OPTIONS"),desc:t("CHOICE_PARAM_OPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".default_value"),defaultValue:e.choice})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{className:"max-width-full",name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"renderPasswordFormItems",value:function(){var e=this.props.value;return i.default.createElement("div",null,i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("PARAM_REQUIRED")}]},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".name"),defaultValue:e.name}))),i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("PASSWORD")},i.default.createElement(d.Input,{name:"".concat(this.props.prefix,".default_value"),type:"password",defaultValue:e.default_value||""})))),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("PARAMETER_DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"".concat(this.props.prefix,".description"),defaultValue:e.description})))}},{key:"render",value:function(){var e=this.props,a=e.value,r=e.onDelete;return i.default.createElement("div",{className:m.default.itemWrapper},i.default.createElement("div",{className:m.default.itemTitle},i.default.createElement("p",null,i.default.createElement("strong",null,"PARAMS_TEXT"===p.PIPELINE_PARAMS_TYPES[a.type]?t("PARAMS_TEXT_TCAP"):t(p.PIPELINE_PARAMS_TYPES[a.type]))),i.default.createElement(d.Button,{className:m.default.delete,type:"flat",icon:"trash",onClick:r})),a.type&&this.renderFormItems(a.type))}}]),r}(i.default.Component);a.default=h,h.propTypes={value:f.default.object,onChange:f.default.func,onDelete:f.default.func},h.defaultProps={value:{},onChange:function(){},onDelete:function(){}}},function(e,t,a){e.exports={advance:"CL0stuq5jSYOBJiO8mU2C",wrapper:"XW_-pU8ZwuxgGpjgUHW-8"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(22),r(23),r(57),r(17);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=r(186),v=n(r(787)),h=n(r(26)),E=n(r(1639)),y=n(r(1200));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=function(e){(0,s.default)(r,e);var a=g(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.hideSelectRepo=function(){t.setState({showSelectRepo:!1})},t.showSelectRepo=function(){t.setState({showSelectRepo:!0})},t.handleOk=(0,o.default)(l.default.mark((function e(){var a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.onOk,r=t.form.current.getData(),e.next=4,a(r);case 4:t.state.subRoute&&t.props.handleScanRepository();case 5:case"end":return e.stop()}}),e)}))),t.form=d.default.createRef(),t.scmRef=d.default.createRef(),t.state={showSelectRepo:!1,repo:{}},t}return(0,c.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.formTemplate,l=void 0===n?{}:n,o=(0,h.default)(l,"pipeline.name","")||(0,h.default)(l,"multi_branch_pipeline.name",""),u=(0,h.default)(l,"pipeline.description","")||(0,h.default)(l,"multi_branch_pipeline.description","");return this.state.showSelectRepo?d.default.createElement(v.default,{width:1e3,hideHeader:!0,onOk:this.handleSaveRepo,visible:a},d.default.createElement(E.default,{sourceData:l.multi_branch_pipeline,devops:l.devops,cluster:l.cluster,name:o,onSave:this.handleRepoChange,onCancel:this.hideSelectRepo,enableTypeChange:!1})):d.default.createElement(v.default,{width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,onCancel:r,visible:a},d.default.createElement(m.Form,{ref:this.form,data:l},d.default.createElement(m.Form.Item,{label:t("NAME"),desc:t("")},d.default.createElement(m.Input,{name:"name",defaultValue:o,disabled:!0})),d.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("")},d.default.createElement(m.TextArea,{name:"description",defaultValue:u})),l.multi_branch_pipeline?d.default.createElement(m.Form.Item,{label:t("CODE_REPOSITORY")},d.default.createElement(y.default,{name:"multi_branch_pipeline",cluster:l.cluster,devops:l.devops,isCreatePipeline:!0,trigger:this.props.trigger})):null))}}]),r}(d.default.Component);a.default=b,b.propTypes={formTemplate:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func},b.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},b.childContextTypes={registerSubRoute:p.default.func,resetSubRoute:p.default.func}},,function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=r(72);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).handleOk=function(){var e=n.props.onOk,t=n.form.current;t&&t.validate((function(){var a=t.getData();e(a)}))},n.validator=function(e,a,r){if(!a)return r();n.props.store.checkPipelineName({name:a,cluster:n.props.cluster,devops:n.props.devops}).then((function(a){if(a.exist)return r({field:e.field,message:t("NAME_EXIST_DESC")});r()}))},n.form=i.default.createRef(),n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.title,l=e.icon,o=e.formTemplate,u=void 0===o?{}:o;return i.default.createElement(p.default,{width:691,title:n,icon:l,onOk:this.handleOk,onCancel:r,visible:a},i.default.createElement(d.Form,{ref:this.form,data:u},i.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("PIPELINE_NAME_DESC"),rules:[{required:!0,message:t("PIPELINE_NAME_TIP")},{pattern:m.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.validator}]},i.default.createElement(d.Input,{name:"name",maxLength:63})),i.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(d.TextArea,{name:"description",maxLength:256}))))}}]),r}(i.default.Component);a.default=h,h.propTypes={formTemplate:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func},h.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=n(r(787)),v=n(r(824)),h=n(r(1125)),E=n(r(3)),y=n(r(63)),g=n(r(3321));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).hideConfirm=function(){t.setState({isshowComfirm:!1})},t.showConfirm=function(){t.setState({isshowComfirm:!0})},t.handleCancel=function(){t.hideConfirm();var e=t.props.params,a=e.devops,r=e.name;localStorage.removeItem("".concat(globals.user.username,"-").concat(a,"-").concat(r)),t.props.onCancel()},t.CLIENT_WIDTH=document.body.clientWidth,t.state={isshowComfirm:!1,createPipelineType:(0,y.default)(t.props.jsonData)?void 0:"custom",jsonData:t.props.jsonData},t}return(0,c.default)(r,[{key:"renderPipelineContent",value:function(){var e=this.props,t=e.params,a=e.isSubmitting,r=e.onOk,n=this.state.jsonData;return d.default.createElement(h.default,{className:g.default.content,isEditMode:!0,params:t,jsonData:n,onOk:r,onCancel:this.showConfirm,isSubmitting:a,trigger:this.props.trigger})}},{key:"render",value:function(){var e=this.props.visible,a=this.state.createPipelineType,r=!(0,y.default)(a),n={hideHeader:r,closable:!r,title:t("CREATE_PIPELINE"),imageIcon:"/assets/pipeline/pipeline-icon-dark.svg",description:t("CREATE_PIPELINE_DESC")};return d.default.createElement(d.default.Fragment,null,d.default.createElement(m.default,(0,l.default)({width:a?Math.max(this.CLIENT_WIDTH-40,1200):"1400px",bodyClassName:(0,E.default)(g.default.body,(0,o.default)({},g.default.templeHeight,!a)),headerClassName:g.default.header,visible:e,closable:!1,maskClosable:!1,onOk:this.props.onOk,onCancel:this.showConfirm,hideFooter:!0},n),this.renderPipelineContent()),d.default.createElement(v.default,{visible:this.state.isshowComfirm,onCancel:this.hideConfirm,onOk:this.handleCancel,title:t("CLOSE"),desc:t("Are you sure to close this pipeline Editor ?")}))}}]),r}(d.default.Component);a.default=S,S.propTypes={name:p.default.string,module:p.default.string,store:p.default.object,formTemplate:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,jsonData:p.default.object,isSubmitting:p.default.bool},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={header:"_2saOnbMeHxpTm11Eed8tTs",body:"_2DgEUY-oZ3U39kMNOaJ0il",templeHeight:"_3spQYJcu5vaFgqKDKvxEzP",title:"_2xngYZLt3Su7hKoNhj6gjS",content:"LvzjWthXqdqyYc0TizKIr"}},function(e,a,r){"use strict";r(15);var n=r(20);r(86),r(4),r(23),r(24),r(17),r(62),r(136),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(86),r(42),r(4),r(22),r(23),r(57),r(24),r(17),r(62),r(110);var l=n(r(43));r(41);var o,u,c,s=n(r(44)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(0)),h=n(r(1)),E=r(186),y=n(r(240)),g=r(239),b=n(r(26)),S=n(r(63)),_=n(r(787)),O=n(r(3323));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var T=(0,g.observer)((c=u=function(e){(0,d.default)(r,e);var a=C(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).refreshHandler=function(){for(var e=n.props.store.repositoryLog.split("\n"),t=!1,a=e.length-1;a>=0;a--)if(!(0,S.default)(e[a])&&e[a].indexOf("Finished")>-1)return void(t=!0);if(t)clearInterval(n.refresh),n.refresh=null;else{var r=n.props.params;n.props.store.getRepoScanLogs(r)}},n.handleFetch=(0,s.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.params,e.next=3,n.props.handleScanRepository();case 3:return e.next=5,n.props.store.getRepoScanLogs(a);case 5:y.default.success({content:t("LOGS_OBTAINED_SUCCESSFULLY")});case 6:case"end":return e.stop()}}),e)}))),n.handleDownloadLogs=function(){var e=n.props.store.repositoryLog;n.props.store.saveAsFile(e,"log.txt")},n.formRef=v.default.createRef(),n.refresh=setInterval((function(){n.refreshHandler()}),4e3),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.params;this.props.store.getRepoScanLogs(e)}},{key:"componentDidUpdate",value:function(e){if(!e.visible&&this.props.visible){var t=this.props.params;this.props.store.getRepoScanLogs(t)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.refresh)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.props.store.repositoryLog;return v.default.createElement(_.default,{width:1160,onCancel:r,visible:a,closable:!1,title:t("REPOSITORY_SCAN_LOGS"),cancelText:t("CLOSE")},v.default.createElement("div",{className:O.default.content},v.default.createElement("div",{className:O.default.btn_group},v.default.createElement(E.Icon,{name:"human",size:20}),this.startBy,v.default.createElement(E.Button,{onClick:this.handleDownloadLogs},t("DOWNLOAD")),v.default.createElement(E.Button,{onClick:this.handleFetch},t("RESCAN"))),v.default.createElement("pre",{className:O.default.pre},n)))}},{key:"startBy",get:function(){var e=this.props.store.repositoryLog.split("\n"),a=(0,b.default)(e,"[0]",""),r=a.match(/^Started by (user )?(.*)?/)||[],n=r[1],l=r[2];return a&&n?t("STARTED_BY_NAME",{name:l}):a&&!n?t("STARTED_BY_NAME",{name:t(l)}):t("STARTED_BY_NAME",{name:"-"})}}]),r}(v.default.Component),u.propTypes={name:h.default.string,branches:h.default.array},u.defaultProps={branches:[],visible:!1,onOk:function(){},onCancel:function(){}},o=c))||o;a.default=T},function(e,t,a){e.exports={content:"_1TtDoHIK3aC3dRiBhRTT0F",btn_group:"_1iXbGXD3S6h6qcpzVlnDq1",pre:"_8f1VfuEP3pLkfRwcKptfp"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.PIPELINE_CREATE_STEPS_OLD=t.PIPELINE_CREATE_STEPS=t.PIPELINE_PROJECT_CREATE_STEPS=void 0;var n=r(a(1730)),l=r(a(3325)),o=r(a(3327)),u=r(a(3333)),c=r(a(3334)),s=[{title:"BASIC_INFORMATION",component:l.default,icon:"cdn",required:!0},{title:"ADVANCED_SETTINGS",component:n.default,required:!0}];t.PIPELINE_PROJECT_CREATE_STEPS=s;var i=[{title:"SELECT_TEMPLATE",component:o.default,required:!0},{title:"PARAMETER_CONFIG",component:u.default,required:!0,icon:"slider"}];t.PIPELINE_CREATE_STEPS=i;var f=[{title:"SELECT_TEMPLATE",component:o.default,required:!0},{title:"PARAMETER_CONFIG",component:c.default,required:!0,icon:"slider"}];t.PIPELINE_CREATE_STEPS_OLD=f},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(26)),d=n(r(74)),p=n(r(0)),m=r(52),v=r(72),h=r(916),E=r(903),y=n(r(1200)),g=n(r(3326));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var n;(0,l.default)(this,r),(n=a.call(this,e)).validator=function(e,a,r){if(!a)return r();n.props.store.checkPipelineName({name:a,cluster:n.props.cluster,devops:n.props.devops},(0,h.compareVersion)(n.ksVersion,"3.4.0")<0).then((function(a){if(a.exist)return r({field:e.field,message:t("NAME_EXIST_DESC")});r()}))};var o=e.formTemplate;return n.state={type:(0,f.default)(o,"multi_branch_pipeline",null)?1:0},n}return(0,o.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.formRef,n=a.formTemplate,l=a.devops,o=a.cluster;return p.default.createElement(i.Form,{ref:r,data:n,className:g.default.from},p.default.createElement(i.Columns,null,p.default.createElement(i.Column,null,p.default.createElement(i.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:v.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.validator}]},p.default.createElement(i.Input,{name:"name",maxLength:63})),p.default.createElement(i.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},p.default.createElement(i.TextArea,{name:"description",maxLength:256}))),p.default.createElement(i.Column,null,p.default.createElement(i.Form.Item,{label:t("DEVOPS_PROJECT"),desc:t("PIPELINE_CREATE_DEVOPS_PROJECT_DESC")},p.default.createElement("div",{name:"devopsName",className:"disabled-input"},(0,m.showNameAndAlias)(null==n?void 0:n.devopsName,"devops"))))),p.default.createElement("div",{className:"form-item"},p.default.createElement("label",{className:"form-item-label"},t("PIPELINE_TYPE")),p.default.createElement(E.TypeSelect,{value:this.state.type,onChange:function(t){e.setState({type:t}),(0,d.default)(n,"multi_branch_pipeline",void 0)},name:"pipeline-type",options:[{label:t("PIPELINE_PL"),value:0,icon:"branch",description:t("BRANCH_PIPELINE_DESC")},{label:t("MULTI_BRANCH_PIPELINE"),value:1,icon:"branch",description:t("MULTI_BRANCH_PIPELINE_DESC")}]})),1===this.state.type&&p.default.createElement(i.Form.Item,{label:t("CODE_REPOSITORY_OPTIONAL"),rules:[{required:!0,message:t("CODE_REPOSITORY_REQUIRED_DESC")}]},p.default.createElement(y.default,{name:"multi_branch_pipeline",devops:l,cluster:o,isCreatePipeline:!0,trigger:this.props.trigger})))}},{key:"ksVersion",get:function(){var e=this.props.cluster;return globals.app.isMultiCluster?(0,f.default)(globals,"clusterConfig.".concat(e,".ksVersion")):(0,f.default)(globals,"ksConfig.ksVersion")}}]),r}(p.default.Component);a.default=S},function(e,t,a){e.exports={from:"_3leGyYanySt4QBpWlptmsl"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=n(r(74)),p=r(239),m=n(r(3328)),v=n(r(0)),h=n(r(3332));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=(0,p.observer)(l=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleTemplateChange=function(t,a){(0,d.default)(e.props.formTemplate,"template",t),(0,d.default)(e.props.formTemplate,"params",a)},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.params;return v.default.createElement(f.Form,{data:r,ref:a,className:h.default.pipeline_template_form},v.default.createElement(f.Form.Item,{name:"template",rules:[{required:!0,message:t("PIPELINE_VALIDATOR_DESC")}]},v.default.createElement(m.default,{name:"template",templateLoading:!1,handleTemplateChange:this.handleTemplateChange,formTemplate:r,params:n})))}}]),r}(v.default.Component))||l;a.default=y},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(4),r(22),r(196),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(18),r(28),r(4),r(22),r(196);var o=l(r(30)),u=l(r(315)),c=l(r(43));r(41);var s=l(r(44)),i=l(r(96)),f=l(r(1202)),d=l(r(3)),p=l(r(241)),m=n(r(0)),v=l(r(960)),h=l(r(3331)),E=function(e){var a=e.handleTemplateChange,r=e.formTemplate,n=e.params,l={type:"custom",image:"/assets/pipeline/custom.svg",title:t("CUSTOM_PIPELIEN"),desc:t("CUSTOM_PIPELIEN_DESC")},o=new v.default,d=(0,m.useState)([]),E=(0,i.default)(d,2),g=E[0],b=E[1],S=(0,m.useState)(r.template),_=(0,i.default)(S,2),O=_[0],C=_[1],T=(0,m.useState)(!1),R=(0,i.default)(T,2),D=R[0],N=R[1],k=function(){var e=(0,s.default)(c.default.mark((function e(t){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getPipelineTemplateList(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,m.useEffect)((function(){N(!0),k((0,p.default)(n,"cluster")).then((function(e){e.push(l),b(e)})).finally((function(){N(!1)}))}),[]);var I=function(e,t){C(e),a&&a(e,t)};return m.default.createElement("div",{className:h.default.container},m.default.createElement(f.default,{spinning:D},m.default.createElement("div",{className:h.default.template},g&&g.map((function(e){return m.default.createElement(y,(0,u.default)({key:e.type,isSelected:O===e.type},e,{getTemple:I}))})))))};a.default=E;var y=function(e){var t=e.type,a=e.image,r=e.title,n=e.desc,l=e.parameters,u=e.getTemple,c=e.isSelected,s=(0,m.useRef)();return m.default.createElement("div",{className:(0,d.default)(h.default.card,(0,o.default)({},h.default.cardSelected,c)),onClick:function(){return u(t,l)}},m.default.createElement("div",{className:(0,d.default)(h.default.bg)},m.default.createElement("img",{src:a,ref:s,onError:function(){s.current.src="/assets/pipeline/custom.svg"}})),m.default.createElement("div",{className:h.default.info},m.default.createElement("div",{className:h.default.subtitle},r),m.default.createElement("p",{title:n,className:h.default.desc,style:{"-webkit-box-orient":"vertical"}},n)))}},,,function(e,t,a){e.exports={container:"_1kaDdvsCDov05n6ER1wlbB",title:"_1C-7dQGtX33JkSHwYAWGYz",card:"_3Aib_reYwYhPU8Swp57k0j",cardSelected:"_2oJj50hK159qSfvarGMI7E",bg:"CpVt8f8oNp_vruCV0QJh5",info:"_3tOaVhp-H4O_o1UMo84zEV",subtitle:"_3C_MhMM1PU2LSxvd1kyT5O",desc:"vq8hCrTUwI7BHDDDguAxC"}},function(e,t,a){e.exports={pipeline_template_form:"_2ZhLZbeOlhAnmZtNqK4Xug"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(87),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.formTemplate,r=e.formRef,n=e.store,l=(0,s.default)(e,["formTemplate","formRef","store"]),b=a.params,S=void 0===b?[]:b,_=(0,i.useState)("params"),O=(0,c.default)(_,2),C=O[0],T=O[1],R=(0,i.useState)(!1),D=(0,c.default)(R,2),N=D[0],k=D[1],I=(0,i.useState)({}),P=(0,c.default)(I,2),A=P[0],w=P[1],M=(0,i.useState)(!1),L=(0,c.default)(M,2),j=L[0],x=L[1],U=function(){var e=(0,u.default)(o.default.mark((function e(t){var r,u,c,s,i,f,d,p,m,h,E,y;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=25;break}return r=a.paramsForm,u=void 0===r?{}:r,c=Object.keys(u).reduce((function(e,t){return e.push({name:t,value:u[t]}),e}),[]),k(!0),e.next=6,n.getTempleJenkins(a.template,{parameters:c},{cluster:l.params.cluster});case 6:return s=e.sent,i=l.params,f=i.devops,d=i.name,p=i.cluster,e.next=10,n.checkScriptCompile({devops:f,pipeline:d,value:s,cluster:p});case 10:return e.prev=10,e.next=13,n.convertJenkinsFileToJson(s,p,f,d);case 13:m=e.sent,h=m.mode,E=m.jsonData,y=JSON.parse(E),h||(w({json:y}),(0,v.default)(a,"jenkinsFile",{json:y})),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),console.error(e.t0),x(!0);case 24:k(!1);case 25:T(t);case 26:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}();return i.default.createElement("div",{className:y.default.templateParams},i.default.createElement(h.default,{spinning:n.isSubmitting},i.default.createElement(f.Tabs,{type:"button",tabs:C,onChange:U},i.default.createElement(g,{label:t("PARAMETER_CONFIG"),name:"params"},i.default.createElement("div",{className:y.default.container},i.default.createElement("div",{className:y.default.params},i.default.createElement(f.Form,{data:a,ref:r},(0,p.default)(S)&&S.length>0?i.default.createElement("div",{className:y.default.params_container},S.map((function(e,t){return i.default.createElement(E.default,{key:t,option:e})}))):i.default.createElement("div",{className:y.default.empty},i.default.createElement("div",{className:y.default.icon},i.default.createElement("img",{src:"/assets/pipeline-temp-empty.svg",alt:""})),i.default.createElement("p",null,t("EMPTY_PARAMS_CONFIG"))))))),i.default.createElement(g,{label:t("PREVIEW"),name:"view",disabled:(0,m.default)(S)},i.default.createElement("div",{className:y.default.view},j?i.default.createElement("div",{className:y.default.timeOut},i.default.createElement("div",{className:y.default.icon},i.default.createElement("img",{src:"/assets/pipeline-temp-empty.svg",alt:""})),i.default.createElement("p",null,t("CONNECTION_TIMEOUT"))):i.default.createElement(h.default,{spinning:N},i.default.createElement(f.Form,{data:a,ref:r},i.default.createElement(d.default,{className:y.default.content,jsonData:A}))))))))},r(18),r(28),r(87),r(16),r(10),r(4),r(22);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(96)),s=l(r(58)),i=n(r(0)),f=r(186),d=l(r(1125)),p=l(r(60)),m=l(r(63)),v=l(r(74)),h=l(r(1202)),E=l(r(1737)),y=l(r(1386)),g=f.Tabs.TabPanel},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(87),r(16),r(10),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.formTemplate,r=e.formRef,n=e.store,l=(0,s.default)(e,["formTemplate","formRef","store"]),b=a.params,S=void 0===b?[]:b,_=(0,h.useState)("params"),O=(0,c.default)(_,2),C=O[0],T=O[1],R=(0,h.useState)(!1),D=(0,c.default)(R,2),N=D[0],k=D[1],I=(0,h.useState)({}),P=(0,c.default)(I,2),A=P[0],w=P[1],M=function(){var e=(0,u.default)(o.default.mark((function e(t){var r,u,c,s,i,f,d,p,m;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=16;break}return r=a.paramsForm,u=void 0===r?{}:r,c=Object.keys(u).reduce((function(e,t){return e.push({name:t,value:u[t]}),e}),[]),k(!0),e.next=6,n.getTempleJenkins(a.template,{parameters:c},{cluster:l.params.cluster});case 6:return s=e.sent,i=l.params,f=i.devops,d=i.name,p=i.cluster,e.next=10,n.checkScriptCompile({devops:f,pipeline:d,value:s,cluster:p});case 10:return e.next=12,n.convertJenkinsFileToJson(s,p);case 12:m=e.sent,w(m),(0,v.default)(a,"jenkinsFile",m),k(!1);case 16:T(t);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.default.createElement("div",{className:E.default.templateParams},h.default.createElement(f.default,{spinning:n.isSubmitting},h.default.createElement(i.Tabs,{type:"button",tabs:C,onChange:M},h.default.createElement(g,{label:t("PARAMETER_CONFIG"),name:"params"},h.default.createElement("div",{className:E.default.container},h.default.createElement("div",{className:E.default.params},h.default.createElement(i.Form,{data:a,ref:r},(0,p.default)(S)&&S.length>0?h.default.createElement("div",{className:E.default.params_container},S.map((function(e,t){return h.default.createElement(y.default,{key:t,option:e})}))):h.default.createElement("div",{className:E.default.empty},h.default.createElement("div",{className:E.default.icon},h.default.createElement("img",{src:"/assets/pipeline-temp-empty.svg",alt:""})),h.default.createElement("p",null,t("EMPTY_PARAMS_CONFIG"))))))),h.default.createElement(g,{label:t("PREVIEW"),name:"view",disabled:(0,m.default)(S)},h.default.createElement("div",{className:E.default.view},h.default.createElement(f.default,{spinning:N},h.default.createElement(i.Form,{data:a,ref:r},h.default.createElement(d.default,{className:E.default.content,jsonData:A}))))))))},r(18),r(28),r(87),r(16),r(10),r(4),r(22);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(96)),s=l(r(58)),i=r(186),f=l(r(1202)),d=l(r(1125)),p=l(r(60)),m=l(r(63)),v=l(r(74)),h=n(r(0)),E=l(r(1386)),y=l(r(1737)),g=i.Tabs.TabPanel},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(16),r(4),r(22),r(196),r(23),r(24),r(17),r(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(16),r(4),r(22),r(196),r(23),r(57),r(24),r(17),r(64);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(787)),p=n(r(841)),m=n(r(824)),v=n(r(26)),h=n(r(806)),E=n(r(1)),y=n(r(0)),g=n(r(960)),b=r(52),S=n(r(3336));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var O=function(e){(0,s.default)(r,e);var a=_(r);function r(e){var t,n;return(0,u.default)(this,r),(n=a.call(this,e)).showConfirm=function(){var e=n.props.defaultValue,t=n.state.value;(0,h.default)(e,t)?n.props.onCancel():n.setState({isShowConfirm:!0})},n.hideConfirm=function(){n.setState({isShowConfirm:!1})},n.handleCancel=function(){n.hideConfirm(),n.props.onCancel()},n.handleChange=function(e){n.setState({value:e})},n.getEditorInstance=function(e){n.editor=e},n.checkScriptCompile=(0,o.default)(l.default.mark((function e(){var t,a,r,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.params,a=t.devops,r=t.name,o=t.cluster,n.setState({isLoading:!0}),e.next=4,n.store.checkScriptCompile({value:n.newValue,pipeline:r,devops:a,cluster:o},(function(){n.setState({shouldCheckScriptCompile:!1})})).finally((function(){return n.setState({isLoading:!1})}));case 4:if("fail"!==(u=e.sent).status){e.next=9;break}return n.setState({error:{row:u.line-1,column:u.column,type:"error",text:u.message}}),n.forceUpdate(),e.abrupt("return",u);case 9:return n.setState({error:null}),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)}))),n.saveJenkins=function(e){var t=n.props.params,a=t.devops,r=t.name,l=t.cluster;n.setState({isLoading:!0});var o=l&&"default"!==l?"/klusters/".concat(l):"";return request.put("/kapis/devops.kubesphere.io/v1alpha3".concat(o,"/namespaces/").concat(a,"/pipelines/").concat(r,"/jenkinsfile?mode=raw"),{data:e},{headers:{"content-type":"application/json"}}).finally((function(){return n.setState({isLoading:!1})}))},n.handleOk=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newValue=n.state.value.replace(/\t/g,"    "),!n.state.shouldCheckScriptCompile){e.next=7;break}return e.next=4,n.checkScriptCompile();case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:if(n.isOld){e.next=10;break}return e.next=10,n.saveJenkins(n.newValue);case 10:n.props.onOk(n.newValue);case 11:case"end":return e.stop()}}),e)}))),n.store=new g.default,n.state={value:null!==(t=e.defaultValue)&&void 0!==t?t:"",isLoading:!1,isShowConfirm:!1,shouldCheckScriptCompile:!0},n}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.defaultValue;a&&!e.visible&&r&&this.setState({value:r})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=this.state,l=n.isShowConfirm,o=n.error,u=n.shouldCheckScriptCompile,c=n.value,s=n.isLoading;return y.default.createElement(y.default.Fragment,null,y.default.createElement(d.default,{icon:"cogwheel",width:900,bodyClassName:S.default.body,isSubmitting:r||s,onCancel:this.showConfirm,onOk:this.handleOk,okButtonType:u?void 0:"danger",okText:u?void 0:"continue",visible:a,closable:!1,maskClosable:!1,title:"Jenkinsfile"},y.default.createElement(y.default.Fragment,null,y.default.createElement(p.default,{className:S.default.codeEditor,name:"script",mode:"groovy",value:c,onChange:this.handleChange,options:o&&{annotations:[o]}}),o&&y.default.createElement("div",{className:S.default.checkResult},y.default.createElement("img",{src:"/assets/error.svg"}),y.default.createElement("span",null,t("JENKINS_LINS_ERROR",{line:o.row+1}))),!u&&y.default.createElement("div",{className:S.default.checkResult},y.default.createElement("img",{src:"/assets/error.svg"}),y.default.createElement("span",null,t("FAILED_CHECK_SCRIPT_COMPILE"))))),y.default.createElement(m.default,{visible:l,onCancel:this.hideConfirm,onOk:this.handleCancel,title:t("CLOSE"),desc:t("CLOSE_JENKINSFILE_EDITOR_TIP")}))}},{key:"ksVersion",get:function(){var e=this.props.params.cluster;return window.parent.globals.app.isMultiCluster?(0,v.default)(window,"parent.globals.clusterConfig.".concat(e,".ksVersion")):(0,v.default)(window,"parent.globals.ksConfig.ksVersion")}},{key:"isOld",get:function(){return(0,b.compareVersion)(this.ksVersion,"3.4.0")<0}}]),r}(y.default.Component);a.default=O,O.propTypes={name:E.default.string,params:E.default.object},O.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={codeEditor:"FwGVnxxpNbU-YwCj8hrz_",checkResult:"_177fFbaR70Um61ePRL6Q86",body:"_33dDTLMi8Kh16V0VchwicK"}},function(e,a,r){"use strict";var n=r(20);r(12),r(109),r(11),r(6),r(9),r(13),r(10),r(24),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(24),r(64),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(787)),c=n(r(240)),s=n(r(3338)),i=n(r(1293));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={"update.platformInfo.theme":{on:function(e){var a=e.store,r=e.success,n=(e.cluster,e.workspace,(0,o.default)(e,["store","success","cluster","workspace"])),l=u.default.open(d({onOk:function(e){var n=e.title,o=e.description,s=e.logo,i=e.favicon,f=e.background,d={title:n,description:o,logo:s.replace(/\/theme\/static\/images\//g,""),favicon:i.replace(/\/theme\/static\/images\//g,""),background:f.replace(/\/theme\/static\/images\//g,"")};a.updateTheme(d).then((function(){u.default.close(l),c.default.success({content:t("UPDATE_SUCCESSFUL")}),r&&r()}))},modal:s.default,store:a},n))}},"platformInfo.resetTheme":{on:function(e){var a=e.store,r=e.success,n=(e.cluster,e.workspace,(0,o.default)(e,["store","success","cluster","workspace"])),l=u.default.open(d({onOk:function(){a.updateTheme({title:"",logo:"",favicon:"",background:"",description:""}).then((function(){u.default.close(l),c.default.success({content:t("UPDATE_SUCCESSFUL")}),r&&r()}))},modal:i.default,title:t("RESET_PLATFORM_INFO"),desc:t("RESET_PLATFORM_INFO_TIP"),store:a},n))}}};a.default=p},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(1)),h=r(186),E=n(r(787)),y=r(239),g=n(r(3339)),b=n(r(3341));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,y.observer)((u=o=function(e){(0,f.default)(r,e);var a=O(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).handleLogoChange=function(e){var a=e.image,r=t.state.formTemplate;t.setState({formTemplate:_(_({},r),{},{logo:a})})},t.handleFavicon=function(e){var a=t.state.formTemplate,r=e.image;t.setState({formTemplate:_(_({},a),{},{favicon:r})})},t.handleBackground=function(e){var a=t.state.formTemplate,r=e.image;t.setState({formTemplate:_(_({},a),{},{background:r})})},t.handleOK=function(){t.formRef.current.validate((function(){t.props.onOk(t.formRef.current.getData())}))},t.state={formTemplate:_({},globals.theme)},t.formRef=m.default.createRef(),t}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state.formTemplate;return m.default.createElement(E.default,{width:960,onOk:this.handleOK,onCancel:r,visible:a,title:t("MODIFY_PLATFORM_INFO"),icon:"cogwheel",okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:n},m.default.createElement(h.Form,{data:l,ref:this.formRef},m.default.createElement("div",{className:b.default.form},m.default.createElement("div",{className:b.default.item},m.default.createElement(h.Form.Item,{label:t("PLATFORM_TITLE_TCAP"),desc:t("PLATFORM_TITLE_TIP"),rules:[{required:!0,message:t("TITLE_EMPTY_TIP")}]},m.default.createElement(h.Input,{name:"title",maxLength:63}))),m.default.createElement("div",{className:b.default.item},m.default.createElement(h.Form.Item,{label:t("PLATFORM_DESCRIPTION_TCAP"),desc:t("DESCRIPTION_DESC")},m.default.createElement(h.TextArea,{name:"description",maxLength:256})))),m.default.createElement("div",{className:b.default.form},m.default.createElement("div",{className:b.default.item},m.default.createElement(h.Form.Item,{label:t("PLATFORM_LOGO"),rules:[{required:!0,message:t("PLATFORM_LOGO_REQUIRED")}]},m.default.createElement(g.default,{name:"logo",uploadName:"image",type:["png","svg","jpg"],tooltipText:t("PLATFORM_LOGO_DESC",{imageSize:"200*40",fileSize:"2M",fileType:"svg、png、jpg"}),uploadUrl:this.uploadUrl,imagUrl:l.logo,fileSize:2,onChange:this.handleLogoChange})),m.default.createElement(h.Form.Item,{className:b.default.marginTop,label:t("BROWSER_FAVICON"),rules:[{required:!0,message:t("BROWSER_FAVICON_REQUIRED")}]},m.default.createElement(g.default,{name:"favicon",text:t("UPLOAD"),uploadName:"image",type:["ico","png","svg","jpg"],tooltipText:t("BROWSER_FAVICON_DESC"),imagUrl:l.favicon,uploadUrl:this.uploadUrl,fileSize:2,onChange:this.handleFavicon}))),m.default.createElement("div",{className:b.default.item},m.default.createElement(h.Form.Item,{label:t("LOGIN_BACKGROUND")},m.default.createElement(g.default,{text:t("UPLOAD"),height:288,uploadName:"image",type:["png","svg","jpg"],tooltipText:t("LOGIN_BACKGROUND_DESC"),uploadUrl:this.uploadUrl,imagUrl:l.background,onChange:this.handleBackground,fileSize:2,preview:!0}))))))}},{key:"store",get:function(){return this.props.store}},{key:"uploadUrl",get:function(){return this.store.getImagePath()}}]),r}(m.default.Component),o.propTypes={visible:v.default.bool,onOk:v.default.func,onCancel:v.default.func,isSubmitting:v.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=C},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(197),r(73),r(975),r(48),r(16),r(4),r(22),Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.title,r=e.height,n=void 0===r?120:r,l=e.width,y=void 0===l?450:l,g=e.uploadName,b=e.uploadUrl,S=e.imagUrl,_=void 0===S?"":S,O=e.logoUrl,C=void 0===O?"":O,T=e.type,R=void 0===T?["png"]:T,D=e.preview,N=void 0!==D&&D,k=e.tooltipText,I=void 0===k?"":k,P=e.fileSize,A=void 0===P?null:P,w=a||t("UPLOAD"),M=(0,i.useState)(""),L=(0,s.default)(M,2),j=L[0],x=L[1],U=(0,i.useState)(globals.useDefaultThem||""===_),F=(0,s.default)(U,2),V=F[0],G=F[1],B=(0,i.useState)(!1),Y=(0,s.default)(B,2),z=Y[0],H=Y[1],W=(0,i.useRef)(),q={name:g,method:"post",action:b,multiple:!1,beforeUpload:function(){var e=(0,c.default)(u.default.mark((function e(a){var r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.size,1048576,!(A&&r>1048576*A)){e.next=5;break}return d.default.error(t("UPLOAD_FILE_TOO_LARGE")),e.abrupt("return",Promise.reject(t("UPLOAD_FILE_TOO_LARGE")));case 5:if(n=a.name.slice(a.name.lastIndexOf(".")+1),-1!==R.findIndex((function(e){return e===n}))){e.next=9;break}return d.default.error(t("WRONG_FILE_EXTENSION_NAME",{type:R.join(",")})),e.abrupt("return",Promise.reject(t("WRONG_FILE_EXTENSION_NAME",{type:R.join(",")})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(a,r){var n=e.onChange,l=new FileReader;if(200===a.code||a.image)return l.readAsDataURL(r),l.addEventListener("load",(function(){var e=l.result;x(e),G(!1),n&&n(a,e)})),d.default.success({content:t("UPLOAD_SUCCESSFUL")});d.default.error({content:t("UPLOAD_PLATFORM_IMAGE_FAILED",{message:a.message||"Internal Server Error"})})},onError:function(a){var r=e.onError;r&&r(),d.default.error({content:t("UPLOAD_PLATFORM_IMAGE_FAILED",{message:a.message||"Internal Server Error"})}),G(!0)}};return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:v.default.container,style:{height:n,width:y}},(J=V?{}:{visibility:"hidden"},i.default.createElement("div",{className:v.default.uploadBox,style:J},i.default.createElement(p.default,(0,o.default)({},q,{ref:W}),i.default.createElement("div",{className:v.default.selectContainer,style:{height:n,width:y}},i.default.createElement(f.Icon,{className:v.default.icon,size:40,name:"upload"}),i.default.createElement("p",{className:v.default.title},w),i.default.createElement("p",{className:v.default.desc},I))))),(!globals.useDefaultTheme||""!==j)&&(K=j||_,Q=""!==globals.theme.background||""!==j,i.default.createElement("div",{className:v.default.imageBox},!V&&i.default.createElement(h.default,{style:(0,m.default)({favicon:{maxHeight:40},logo:{maxHeight:40}},e.name,{}),src:K}),i.default.createElement("div",{className:v.default.overlay},i.default.createElement(f.Tooltip,{content:I,placement:"top",style:{width:400}},i.default.createElement(f.Button,{type:"control",onClick:function(){return W.current.onClick()}},t("UPLOAD"))),N&&Q&&i.default.createElement(f.Button,{onClick:function(){return H(!0)}},t("PREVIEW"))))),z&&function(){var e=j||_;return i.default.createElement(E.default,{logoUrl:C,imagUrl:e,onClick:H})}()));var K,Q;var J},r(197),r(73),r(975),r(48),r(16),r(4),r(22);var o=l(r(315)),u=l(r(43));r(41);var c=l(r(44)),s=l(r(96)),i=n(r(0)),f=r(186),d=l(r(240)),p=l(r(952)),m=l(r(26)),v=l(r(1387)),h=l(r(1738)),E=l(r(3340))},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(96)),o=r(a(0)),u=a(186),c=n(a(3)),s=n(a(1387)),i=function(e){var t=e.imagUrl,a=e.logoUrl,r=e.style,n=e.className,i=e.onClick,f=(0,o.useState)(!0),d=(0,l.default)(f,2),p=d[0],m=d[1],v=globals.config.logo||globals.defaultTheme.logo,h=globals.useDefaultTheme?v:globals.theme.logo,E=""!==a?a:h;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:(0,c.default)(n,s.default.loadingPreviewImage)},o.default.createElement("div",{className:s.default.preview},o.default.createElement("div",{className:s.default.box},o.default.createElement("div",{className:s.default.image},p&&o.default.createElement(u.Loading,{className:s.default.loading}),o.default.createElement("img",{style:r,src:t,alt:"",onLoad:function(){return m(!1)}}),!p&&o.default.createElement(o.default.Fragment,null,o.default.createElement("img",{className:s.default.logo,src:E}),o.default.createElement("img",{className:s.default.loginForm,src:"/assets/loginForm.svg"}))),!p&&o.default.createElement(u.Icon,{name:"close",className:s.default.cancel,onClick:function(){return i(!1)}})))))};t.default=i},function(e,t,a){e.exports={form:"_117p4N5fmQ3xC2Jt2kqjt3",item:"_3QGGQazz9cLTxnGlDt0_dA",marginTop:"_2-DqDXEz5x0GhYdEsFqQNI"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(17),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(74)),f=n(r(457)),d=n(r(63)),p=n(r(240)),m=n(r(787)),v=n(r(3343)),h=n(r(3355)),E=n(r(3358)),y=n(r(3359)),g=n(r(435)),b=r(52),S=n(r(322)),_=n(r(885)),O=n(r(1095));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={"project.create":{on:function(e){var a,r=e.store,n=e.success,u=e.cluster,f=e.workspace,d=(0,c.default)(e,["store","success","cluster","workspace"]),v=m.default.open(T({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.default)(globals,"ksConfig.springcloud",!1)&&(0,i.default)(a,'metadata.labels["springcloud.kubesphere.io/enabled"]',"true"),(0,i.default)(a,'metadata.labels["kubesphere.io/workspace"]',f),o=u||(0,s.default)(a,"cluster"),c={cluster:o,workspace:f},e.next=6,r.create(a,c);case 6:m.default.close(v),p.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n(o);case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),hideCluster:!globals.app.isMultiCluster||!!u,cluster:u,workspace:f,formTemplate:g.default.project(),modal:h.default,store:r},d))}},"project.quota.edit":{on:function(e){e.store;var a,r=e.detail,n=e.success,u=e.isEdgeWize,i=(0,c.default)(e,["store","detail","success","isEdgeWize"]),h=u?new O.default:new _.default,E=m.default.open(T({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.default)(a,"spec.hard",{}),u=(0,s.default)(a,"storageLimit",{}),c={name:a.name,namespace:r.name,cluster:r.cluster},(0,b.quota_limits_requests_Dot)(o),i=(0,f.default)(o,(function(e){return e?(0,d.default)(e.toString()):!e})),a.spec={hard:T(T({},i),u)},e.next=8,h.checkName(c);case 8:if(!e.sent.exist){e.next=14;break}return e.next=12,h.update(c,{apiVersion:"v1",kind:"ResourceQuota",metadata:T(T({},c),{},{name:r.name}),spec:a.spec});case 12:e.next=16;break;case 14:return e.next=16,h.create({apiVersion:"v1",kind:"ResourceQuota",metadata:T(T({},c),{},{name:r.name}),spec:a.spec},c);case 16:m.default.close(E),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 19:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:r,isEdgeWize:u,store:h,modal:v.default,supportGpuSelect:!0},i))}},"project.default.resource":{on:function(e){var a,r=e.store,n=e.detail,u=e.namespace,s=e.cluster,f=e.success,v=e.isFederated,h=e.projectDetail,E=e.isEdgeWize,S=(0,c.default)(e,["store","detail","namespace","cluster","success","isFederated","projectDetail","isEdgeWize"]),_=m.default.open(T({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,E,y,S;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(0,b.limits_Request_EndsWith_Dot)({limits:a.default,requests:a.defaultRequest||{}}),c=o.limits,E=o.requests,a.default=T(T({},a.default),c),a.defaultRequest=T(T({},a.defaultRequest),E),!(0,d.default)(n)){e.next=10;break}return y=g.default.limitRange(),v?(y=g.default.federated({data:g.default.limitRange(),clusters:h.clusters.map((function(e){return e.name})),kind:"LimitRange"}),(0,i.default)(y,"metadata.name",u),(0,i.default)(y,"spec.template.spec",{limits:[T(T({},a),{},{type:"Container"})]})):(0,i.default)(y,"spec",{limits:[T(T({},a),{},{type:"Container"})]}),e.next=8,r.create(y,{namespace:u,cluster:s});case 8:e.next=15;break;case 10:return S=T({},n._originData),v?(0,i.default)(S,"spec.template.spec",{limits:[T(T({},n.limit),a)]}):(0,i.default)(S,"spec",{limits:[T(T({},n.limit),a)]}),(0,i.default)(S,"metadata.resourceVersion",n.resourceVersion),e.next=15,r.update(T(T({},n),{},{namespace:u,cluster:s}),S);case 15:m.default.close(_),p.default.success({content:t("UPDATE_SUCCESSFUL")}),f&&f();case 18:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),isEdgeWize:E,modal:y.default,store:r,detail:n,supportGpuSelect:!0,namespace:u,cluster:s,isFederated:v},S))}},"project.assignworkspace":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,i=(0,c.default)(e,["store","detail","success"]),f=new S.default,d=m.default.open(T({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,c,i,v;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(n,a);case 2:return o=n.cluster,c=n.name,i=(0,s.default)(a,'metadata.annotations["kubesphere.io/creator"]'),v=(0,s.default)(a,'metadata.labels["kubesphere.io/workspace"]'),e.next=7,f.create([{username:i,roleRef:"admin"}],{cluster:o,workspace:v,namespace:c});case 7:m.default.close(d),p.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 10:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:E.default,store:r,detail:n},i))}}};a.default=R},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(84),r(29),r(73),r(48),r(97),r(16),r(27),r(190),r(98),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(24),r(17),r(324),r(85),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(29),r(73),r(28),r(48),r(97),r(42),r(16),r(27),r(190),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(17),r(324),r(85),r(38),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(7),r(32);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(96)),s=l(r(61)),i=l(r(30)),f=l(r(36)),d=l(r(37)),p=l(r(55)),m=l(r(56)),v=l(r(51)),h=l(r(0)),E=l(r(1)),y=r(14),g=l(r(26)),b=l(r(74)),S=l(r(242)),_=l(r(63)),O=l(r(1094)),C=l(r(1700)),T=l(r(457)),R=l(r(447)),D=l(r(334)),N=l(r(1739)),k=l(r(855)),I=l(r(189)),P=l(r(925)),A=r(186),w=l(r(787)),M=l(r(872)),L=n(r(1388)),j=l(r(885)),x=l(r(913)),U=r(248),F=l(r(866)),V=r(52),G=l(r(3351)),B=l(r(3354));function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var W=function(e){(0,p.default)(n,e);var a,r=H(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).getStorageSpec=function(e,t){var a={storage:void 0,persistentvolumeclaims:void 0},r=(0,g.default)(e,"status.used",{}),n=(0,g.default)(e,"spec.hard",{}),l=(0,g.default)(n,["requests.storage"],null),o=(0,g.default)(n,"persistentvolumeclaims",null),u=Number((0,g.default)(r,["requests.storage"],"0")),c=(0,g.default)(r,"persistentvolumeclaims","0"),s=(0,g.default)(t,"storage"),i=(0,g.default)(t,"persistentvolumeclaims");if(l){l=(0,V.memoryFormat)(l,"Gi"),u=(0,V.memoryFormat)(u,"Gi");var f=(0,N.default)(l,u);a.storage=isFinite(s)?Math.min(s,f):f}else a.storage=s;if(o){var d=(0,N.default)(Number(o),Number(c));a.persistentvolumeclaims=isFinite(i)?Math.min(i,d):d}else a.persistentvolumeclaims=i;var p={"requests.storage":!l||(0,P.default)(l)?"InfinityGi":"".concat(l,"Gi"),persistentvolumeclaims:o||""};return Object.keys(n).forEach((function(e){(e.includes(L.STORAGE_CLASS_STORAGE)||e.includes(L.STORAGE_CLASS_VOLUME_CLAIMS))&&(p[e]=n[e])})),{spec:z({},p),nsAvailableStorage:z({},a)}},t.cancelGpuSetting=function(e){var t=(0,g.default)(e,"spec.hard",{}),a=globals.config.supportGpuType,r=(0,T.default)(t,(function(e,t){return a.some((function(e){return(0,R.default)(t,e)}))}));if((0,b.default)(e,"spec.hard",r),(0,_.default)(t))(0,b.default)(e,"spec.gpu",{type:"",value:""});else{var n=(0,D.default)(t,(function(e,t){return a.some((function(e){return(0,R.default)(t,e)}))}));if(!(0,_.default)(n)){var l=Object.keys(n)[0].split(".");(0,b.default)(e,"spec.gpu",{type:l.slice(1).join("."),value:Object.values(n)[0]})}}return e},t.getProjectSpec=function(){var e=t.state.spec,a=e["requests.storage"],r=e.persistentvolumeclaims,n=(0,V.memoryFormat)(a,"Gi");return{storage:(0,P.default)(n)?1/0:n,persistentvolumeclaims:""===r?1/0:Number(r)}},t.omitKey=["requests.storage","persistentvolumeclaims"],t.countTotalRelatedResource=function(){var e=t.state.spec,a=z({},(0,I.default)(e,t.omitKey)),r={totalStorage:0,totalVolumeClaims:0,addedItems:[]},n=new Set;return Object.keys(a).forEach((function(e){if(e.includes("requests.storage")){n.add(e.split(".storageclass.storage.k8s.io/requests.storage")[0]);var t=(0,V.memoryFormat)(a[e],"Gi");(0,P.default)(t)||(r.totalStorage+=t)}if(e.includes("persistentvolumeclaims")){n.add(e.split(".storageclass.storage.k8s.io/persistentvolumeclaims")[0]);var l=a[e],o=Number(l);""===l||(0,P.default)(o)||(r.totalVolumeClaims+=o)}})),r.addedItems=(0,s.default)(n.values()),r},t.validStorage=function(){var e=t.getProjectSpec(),a=e.storage,r=e.persistentvolumeclaims,n=t.countTotalRelatedResource(),l=n.totalStorage,o=n.totalVolumeClaims,u=!1;(r<o||0===r&&0===o)&&(u=!0),t.setState({disableSave:u,totalStorageError:a<l,totalVolumeClaimsError:r<o})},t.setRelateSourceResult=function(){var e=t.countTotalRelatedResource(),a=e.totalStorage,r=e.totalVolumeClaims,n=e.addedItems;t.setState({currentRelatedStorageTotal:a,currentRelatedVolumeClaimsTotal:r,addedItems:n})},t.handleOnChange=function(e){var a=e.actionType,r=e.data,n=e.originName,l=z({},t.state.spec);switch(a){case"delete":Object.keys(r).forEach((function(e){delete l[e]})),t.setState({spec:z({},l)},(function(){t.setRelateSourceResult()}));break;case"edit":delete l["".concat(n,".storageclass.storage.k8s.io/persistentvolumeclaims")],delete l["".concat(n,".storageclass.storage.k8s.io/requests.storage")],t.setState({spec:z(z({},l),r)},(function(){t.validStorage(),t.setRelateSourceResult()}));break;default:t.setState({spec:z(z({},t.state.spec),r)},(function(){t.validStorage(),t.setRelateSourceResult()}))}},t.handleOk=function(){var e=t.props.onOk,a=z({},t.state.spec);Object.entries(a).forEach((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];"InfinityGi"!==n&&""!==n||delete a[r]}));var r=z({},(0,g.default)(t.state.formTemplate,"spec.hard",{})),n=(0,T.default)(r,(function(e,t){return t.includes("requests.storage")||t.includes("persistentvolumeclaims")}));e({name:t.state.formTemplate.name,spec:{hard:z({},n),gpu:(0,g.default)(t.state.formTemplate,"spec.gpu",{})},storageLimit:z({},a)})},t.form=h.default.createRef(),t.store=new j.default,t.workspaceQuotaStore=new x.default,t.state={formTemplate:{},error:"",leftQuota:{},allStorageClass:[],spec:{},nsAvailableStorage:{},wsAvailableRequest:{},wsRelatedStoragesLimit:[],disableSave:!1,totalStorageError:!1,totalVolumeClaimsError:!1,currentRelatedStorageTotal:0,currentRelatedVolumeClaimsTotal:0,addedItems:[]},t.storageStore=new F.default,t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.detail||{},a=t.workspace,r=t.cluster;this.props.detail&&this.props.detail.name&&Promise.all([this.workspaceQuotaStore.fetchDetail({workspace:a,name:a,cluster:r})]).then((function(){e.fetchQuota(),e.fetchData(e.props.detail)}))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&r&&r.name&&this.fetchData(r)}},{key:"fetchQuota",value:function(){var e=this,t=this.props.detail||{},a=t.workspace,r=t.name,n=t.cluster;a&&r&&Promise.all([this.store.fetch({cluster:n,namespace:r})]).then((function(t){var a=(0,g.default)(e.workspaceQuotaStore.detail,"status.total",{}),r=(0,g.default)(e.workspaceQuotaStore.detail,"spec.quota",{}),n=(0,U.getLeftQuota)((0,_.default)(a)?r:a,(0,g.default)(t[0],"data")).workspace,l=(0,U.getUsedQuota)((0,g.default)(t[0],"data"));e.setState({leftQuota:(0,O.default)(l,n,(function(e,t){return t?(0,C.default)(e,t):e}))})}))}},{key:"fetchData",value:(a=(0,u.default)(o.default.mark((function e(){var t,a,r,n,l,u,c,i,f,d,p=this,m=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.store.checkName({name:t.name,namespace:t.name,cluster:t.cluster});case 3:if(!e.sent.exist){e.next=7;break}return e.next=7,this.store.fetchDetail({name:t.name,namespace:t.name,cluster:t.cluster});case 7:return a=(0,y.toJS)(this.store.detail),e.next=10,this.storageStore.fetchList({cluster:t.cluster});case 10:r=e.sent,n=z({},(0,g.default)(this.workspaceQuotaStore.detail,"spec.quota.hard",{})),l=this.getWorkspaceAvailableStorageConfig(n),u=l.wsAvailableRequest,c=l.wsRelatedStoragesLimit,i=this.getStorageSpec(a,u),f=i.spec,d=i.nsAvailableStorage,this.setState({formTemplate:this.cancelGpuSetting(a),allStorageClass:(0,s.default)(r),spec:f,nsAvailableStorage:d,wsAvailableRequest:u,wsRelatedStoragesLimit:c},(function(){p.setRelateSourceResult()}));case 15:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getWorkspaceAvailableStorageConfig",value:function(){var e=1/0,t=1/0,a=(0,y.toJS)(this.workspaceQuotaStore.detail),r=(0,g.default)(a,"spec.quota.hard",{}),n=(0,T.default)(r,(function(e,t){return!t.includes(L.STORAGE_CLASS_STORAGE)&&!t.includes(L.STORAGE_CLASS_VOLUME_CLAIMS)})),l=(0,g.default)(r,["requests.storage"],void 0),o=(0,g.default)(r,["persistentvolumeclaims"],void 0);(l&&(e=l=(0,V.memoryFormat)(l,"Gi")),o)&&(t=Number(o));return{wsAvailableRequest:{storage:e,persistentvolumeclaims:t},wsRelatedStoragesLimit:(0,k.default)(Object.entries(n),(function(e){return(0,c.default)(e,1)[0].split(".")[0]}))}}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onCancel,l=e.isFederated,o=e.isSubmitting,u=this.state,c=u.error,s=u.spec,i=u.allStorageClass,f=u.nsAvailableStorage,d=u.wsAvailableRequest,p=u.wsRelatedStoragesLimit,m=u.disableSave,v=u.totalStorageError,E=u.totalVolumeClaimsError,y=u.currentRelatedStorageTotal,g=u.currentRelatedVolumeClaimsTotal,b=u.addedItems;return h.default.createElement(w.default.Form,{width:960,title:t("EDIT_PROJECT_QUOTAS"),icon:"pen",data:this.state.formTemplate,onOk:this.handleOk,onCancel:n,visible:r,isSubmitting:o,disableOk:!!c||m},h.default.createElement("div",{className:B.default.body},h.default.createElement(A.Form.Item,{label:t("NAME")},h.default.createElement(A.Input,{name:"name",defaultValue:a.name,disabled:!0})),h.default.createElement(A.Form.Item,null,h.default.createElement(M.default,this.resourceLimitProps)),h.default.createElement("div",{className:B.default.storageLimit},h.default.createElement(L.default,{namespace:a.name,quota:s,isWorkspace:!1,availableQuota:f,wsAvailableRequest:d,relatedStoragesLimit:p,allStorageClass:i,onChange:this.handleOnChange,renderOutOfLimitTip:v||E,totalStorageError:v,totalVolumeClaimsError:E,currentRelatedStorageTotal:y,currentRelatedVolumeClaimsTotal:g,addedItems:b})),h.default.createElement("div",{className:B.default.label},t("APPLICATION_RESOURCE_QUOTAS")),h.default.createElement(G.default,{data:this.state.formTemplate,isFederated:l})))}},{key:"resourceLimitProps",get:function(){var e=this,a=this.state.formTemplate,r=this.state.leftQuota,n=(0,_.default)(r)?{}:{limits:{cpu:(0,g.default)(r,"limits.cpu"),memory:(0,g.default)(r,"limits.memory")},requests:{cpu:(0,g.default)(r,"requests.cpu"),memory:(0,g.default)(r,"requests.memory")}},l=(0,g.default)(a,"spec.gpu.type",""),o=(0,g.default)(a,"spec.gpu.value",""),u={};return(0,b.default)(u,'["'.concat(l,'"]'),o),{cpuProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:1,label:1,weight:4},{value:2,label:2,weight:2},{value:3,label:3,weight:2},{value:4,label:4},{value:5,label:5},{value:6,label:6},{value:7,label:7},{value:8,label:8},{value:1/0,label:t("NO_LIMIT")}]},memoryProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:2,label:2,weight:4},{value:4,label:4,weight:2},{value:6,label:6,weight:2},{value:8,label:8},{value:10,label:10},{value:12,label:12},{value:14,label:14},{value:16,label:16},{value:1/0,label:t("NO_LIMIT")}],unit:"Gi",valueFormatter:function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e}},defaultValue:{limits:z({cpu:(0,g.default)(a,'spec.hard["limits.cpu"]'),memory:(0,g.default)(a,'spec.hard["limits.memory"]')},u),requests:z({cpu:(0,g.default)(a,'spec.hard["requests.cpu"]'),memory:(0,g.default)(a,'spec.hard["requests.memory"]')},u)},workspaceLimitProps:n,onChange:function(e){var t;(0,S.default)(a,"spec.hard"),(0,b.default)(a,'spec.hard["limits.cpu"]',(0,g.default)(e,"limits.cpu",null)),(0,b.default)(a,'spec.hard["limits.memory"]',(0,g.default)(e,"limits.memory",null)),(0,b.default)(a,'spec.hard["requests.cpu"]',(0,g.default)(e,"requests.cpu",null)),(0,b.default)(a,'spec.hard["requests.memory"]',(0,g.default)(e,"requests.memory",null));var r=(0,g.default)(e,"requests",{}),n=null===(t=Object.keys(r))||void 0===t?void 0:t.filter((function(e){return e.includes("gpu")})),l=(0,g.default)(n,"0","");l&&(0,b.default)(a,'spec.hard["requests.'.concat(l,'"]'),(0,g.default)(r,l))},onError:function(t){e.setState({error:t})},supportGpuSelect:this.props.supportGpuSelect,omitQuotaCheck:!0}}}]),n}(h.default.Component);a.default=W,W.propTypes={detail:E.default.object,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},W.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(6),r(48),r(27),r(190),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(315)),u=l(r(30)),c=l(r(96)),s=l(r(58));r(12),r(5),r(11),r(6),r(28),r(48),r(27),r(190),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var i=n(r(0)),f=r(186),d=l(r(1304)),p=l(r(26)),m=l(r(447)),v=l(r(1040)),h=l(r(195)),E=r(52),y=l(r(3)),g=l(r(1740)),b=l(r(3345)),S=l(r(1741)),_=l(r(3347));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=f.Tabs.TabPanel,R=[{value:0,label:t("NO_REQUEST"),weight:2},{value:512,label:512,weight:2},{value:1024,label:1024,weight:2},{value:1536,label:1536,weight:2},{value:2048,label:2048},{value:1/0,label:t("NO_LIMIT")}],D=function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e},N=function(e){var a=e.storageLimitSpec,r=e.renderOutOfLimitTip,n=void 0!==r&&r,l=e.totalStorageError,O=void 0!==l&&l,N=e.totalVolumeClaimsError,k=void 0!==N&&N,I=(0,s.default)(e,["storageLimitSpec","renderOutOfLimitTip","totalStorageError","totalVolumeClaimsError"]),P=(0,i.useState)(!1),A=(0,c.default)(P,2),w=A[0],M=A[1],L=(0,i.useState)({"requests.storage":"InfinityGi",persistentvolumeclaims:""}),j=(0,c.default)(L,2),x=j[0],U=j[1],F=(0,i.useState)("workspace"),V=(0,c.default)(F,2),G=V[0],B=V[1];(0,i.useEffect)((function(){var e=(0,p.default)(a,["requests.storage"],"InfinityGi"),t={"requests.storage":e,persistentvolumeclaims:(0,p.default)(a,["persistentvolumeclaims"],"")};M("InfinityGi"===e),U(C({},t))}),[a]);var Y,z,H,W,q,K,Q,J,X=i.default.createElement("div",{className:b.default.tipContent},i.default.createElement("div",{className:b.default.warning},t("TOTAL_STORAGE_LIMIT_LESS_THAN_RELATE_RESOURCE")));return i.default.createElement("div",{className:b.default.storageClassBox},i.default.createElement("div",{className:b.default.titleLine},i.default.createElement("div",{className:b.default.icon},i.default.createElement(f.Icon,{name:"storage",size:40})),i.default.createElement("div",null,i.default.createElement("span",{className:b.default.title},t("STORAGE_QUOTA")),i.default.createElement("span",{className:b.default.desc},I.isWorkspace?t("WS_STORAGE_QUOTA_DESC"):t("NS_STORAGE_QUOTA_DESC")))),i.default.createElement("div",{className:b.default.setting},i.default.createElement(f.Tabs,{type:"button",activeName:G,onChange:function(e){return B(e)}},i.default.createElement(T,{label:t("TOTAL_STORAGE_RESOURCE"),name:"workspace"},(K=x["requests.storage"],Q=(0,h.default)(K)?"InfinityGi"===K?1/0:(0,E.memoryFormat)(K,"Gi"):K,J=x.persistentvolumeclaims,i.default.createElement("div",{className:b.default.storageClassBox},i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement("div",{className:b.default.slider},i.default.createElement("span",{className:b.default.text},t("VOLUME_TOTAL_CAPACITY",{unit:"Gi"})),i.default.createElement(S.default,{value:w?1/0:Q,marks:R,unit:"Gi",valueFormatter:D,onChange:function(e){return function(e){(0,v.default)(e)?M(!1):M(!0);var t={"requests.storage":isNaN(e)?"InfinityGi":"".concat(e).concat("Gi"),persistentvolumeclaims:(0,p.default)(x,["persistentvolumeclaims"],"")};I.handleWsLimitChange(C({},t))}(e)}})))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement("span",{className:b.default.text},t("RESOURCE_LIMITS")),i.default.createElement("div",{className:(0,y.default)(b.default.wrapper,(0,u.default)({},b.default.error,O))},i.default.createElement(g.default,{className:b.default.input,min:0,value:w?"":Q,placeholder:w?t("NO_LIMIT"):"",onChange:function(e){return a=t=e,(0,m.default)(t,".")&&(a=Number(t.slice(0,t.length-1))),""!==t&&"-"!==t||(a=1/0),void I.handleWsLimitChange({"requests.storage":"".concat(a,"Gi"),persistentvolumeclaims:(0,p.default)(x,["persistentvolumeclaims"],"")});var t,a}}),i.default.createElement("span",{className:b.default.unit},"Gi"))),i.default.createElement(f.Column,null,i.default.createElement("span",{className:b.default.text},t("VOLUME_MAX_NUM")),i.default.createElement("div",{className:(0,y.default)(b.default.wrapper,(0,u.default)({},b.default.error,k))},i.default.createElement(d.default,{className:b.default.input,min:0,value:J,placeholder:t("NO_LIMIT"),onChange:function(e){return r=t=e,(0,m.default)(t,".")&&(r=Number(t.slice(0,t.length-1))),""!==t&&"-"!==t||(r=""),void I.handleWsLimitChange({"requests.storage":(0,p.default)(a,["requests.storage"]),persistentvolumeclaims:r});var t,r}})))),!I.isWorkspace&&(Y=(0,p.default)(I.wsAvailableRequest,"storage",1/0),z=(0,p.default)(I.wsAvailableRequest,"persistentvolumeclaims",1/0),H=(0,v.default)(Y)?t("STORAGE_VOLUME_LIMIT_HAS_A_LIMIT",{num:Y}):t("STORAGE_VOLUME_LIMIT_NO_LIMIT"),W=(0,v.default)(z)?t("STORAGE_PERSISTENT_VOLUME_HAS_A_LIMIT",{num:z}):t("STORAGE_PERSISTENT_VOLUME_NO_LIMIT"),q="".concat(H,", ").concat(W),i.default.createElement("div",{className:b.default.tipContent},i.default.createElement(f.Alert,{type:"info",title:t("AVAILABLE_QUOTAS"),message:q}))),n&&X))),i.default.createElement(T,{label:t("STORAGE_RELATED_RESOURCE"),name:"related"},i.default.createElement(_.default,(0,o.default)({wsQuotaSpec:x,namespaceStorageClass:I.namespaceStorageClass,onChange:I.handleRelateVolumeChange},I))))))};a.default=N},function(e,t,a){e.exports={body:"_1Zibu60vRfDthPuTtmecl6",quotaItem:"_2B9mfPAIPrv87rpL8gK0Z3",label:"_387XF4DSpyII0xdPCm5Ol-",storageClassBox:"GsUeOovHSpbPHsXrfFSVd",titleLine:"_2b5PjG5EJ76L_CdkwSPf0d",icon:"_2hX0yF-a_71od_SpFGkHPc",title:"_3cGLB1-_7HM9DFtM2TaigR",desc:"_2FnNeo05GhWmAnl1WF1MM0",setting:"_19mHEHTw_bOB7NvvH2ASZE",labelTitle:"_2grZ3IUkiniMD2AXEHolyr",slider:"_277WgEgy_uhoHRu4K8tYrV",wrapper:"_3Ys-12L0fXQ8IAT8TOQMwA",unit:"_2TZjwDYDSzQuS9x7nY2Wos",text:"IUX493SRHJsoFy1nCdpuo",tipContent:"_1PqAcxrcsIzCF2KVhpciIh",warning:"DwT3n4gVdL1CX0m9GWbi8",relatedBox:"_3tHVi0clIheoFTfZ_VAWTr",value:"_1CvMaWz4ZY1zV_f_gqXywE",addQuota:"Ob66euHsOLSyS_BwVPVpw",addBox:"_2OxV92PCBs2dkZd5Qt2usU",addContent:"_2v8rozHDR2mazzNtAk6O4c",closeContent:"_2Z5LKlEGF3nX0OW0XM5GTw",error:"cVDyGh3umWPB0JhKLe8w1"}},function(e,t,a){e.exports={sliderWrapper:"INNBh97y-sYhMpVHkK4Cx",slider:"_3UgYaCslbwFNrg1OHhgtCa",rail:"_1M9nwpLeBwN-yBGjjJS0wK",track:"_9S1TEImvI4d7kGjcNqPN-",handler:"b0ekkTeiTmxUXjH6CcDL6",mark:"_3hurtyaOWHzXYBzgHj0tE",inputWrapper:"_1OHarvGzBe3xdofM0FT4cA",inputGroup:"_3MBu3VVqJNZxy6JdlTFD8l",input:"tY1BQ6yan1T6oqPBCIZSV",error:"_1xlDWH5PHscTddpENrWRA0",label:"_2OHx8yT3Rc_GlstfwtAOqg",inputBox:"_1GlrMZcwurb0PmqkDTfdw",unit:"_2-SWp1Be4AZe-14gP-4L1F",message:"_2GhODRzieuOaggJkAMiQt1"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(5),r(11),r(31),r(6),r(86),r(18),r(48),r(16),r(27),r(190),r(98),r(9),r(13),r(10),r(24),r(62),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=l(r(30)),u=l(r(96));r(12),r(5),r(11),r(31),r(6),r(86),r(18),r(28),r(48),r(16),r(27),r(190),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(24),r(62),r(64),r(7);var c=r(186),s=l(r(3)),i=l(r(799)),f=l(r(447)),d=l(r(26)),p=l(r(1040)),m=n(r(0)),v=r(52),h=r(1388),E=l(r(1741)),y=l(r(1740)),g=l(r(3348)),b=l(r(3349));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=[{value:0,label:t("NO_REQUEST"),weight:2},{value:512,label:512,weight:2},{value:1024,label:1024,weight:2},{value:1536,label:1536,weight:2},{value:2048,label:2048},{value:1/0,label:t("NO_LIMIT")}],C={name:"","requests.storage":"InfinityGi",persistentvolumeclaims:""};function T(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e}var R=function(e){var a=(0,m.useState)(!1),r=(0,u.default)(a,2),n=r[0],l=r[1],S=(0,m.useState)(_({},C)),R=(0,u.default)(S,2),D=R[0],N=R[1],k=(0,m.useRef)(),I=(0,m.useState)({editItemName:"",isEditMode:!1,storage:0,claims:0}),P=(0,u.default)(I,2),A=P[0],w=P[1],M=(0,m.useState)({limit:"",count:""}),L=(0,u.default)(M,2),j=L[0],x=L[1],U=(0,m.useState)(!1),F=(0,u.default)(U,2),V=F[0],G=F[1],B=(0,m.useState)(!1),Y=(0,u.default)(B,2),z=Y[0],H=Y[1],W=(0,m.useCallback)((function(){n&&k.current.scrollIntoView({behavior:"smooth"})}),[k,n]);(0,m.useEffect)((function(){W()}),[n,V,z]),(0,m.useEffect)((function(){var t=(0,d.default)(e.availableQuota,["storage"],1/0),a=(0,d.default)(e.availableQuota,["persistentvolumeclaims"],1/0),r=(0,d.default)(e.wsQuotaSpec,["persistentvolumeclaims"]),n=(0,d.default)(e.wsQuotaSpec,["requests.storage"]);if(r=""===r?1/0:r,"string"==typeof(n=""===n?1/0:n)){var l=(0,v.memoryFormat)(n,"Gi");n=l||1/0}if(!e.isWorkspace){var o=D.name,c=(0,d.default)(e.relatedStoragesLimit,["".concat(o)],null);if(c){var s=c.filter((function(e){return(0,u.default)(e,1)[0].match("storageclass.storage.k8s.io/requests.storage")})),i=c.filter((function(e){return(0,u.default)(e,1)[0].match("storageclass.storage.k8s.io/persistentvolumeclaims")})),f=1/0,m=1/0;if(s.length>0&&(f=(0,v.memoryFormat)(s[0][1],"Gi")),i.length>0&&(m=Number(i[0][1])),(t-=e.currentRelatedStorageTotal)<f){if(A.isEditMode){var h=(0,v.memoryFormat)(A.storage,"Gi");t+=h=isNaN(h)?0:Number(h)}}else t=f;(a-=e.currentRelatedVolumeClaimsTotal)<m?A.isEditMode&&(a+=Number(A.claims)):a=m}else{var E=Math.min(t,n),y=Math.min(a,r);if(E-=e.currentRelatedStorageTotal,y-=e.currentRelatedVolumeClaimsTotal,A.isEditMode){var g=(0,v.memoryFormat)(A.storage,"Gi");E+=g=isNaN(g)?0:Number(g),y+=Number(A.claims)}t=E,a=y}}var b=t>=0?Math.min(t,n):(0,p.default)(n)?n:1/0,S=Math.min(a,r);x({limit:b,count:S})}),[e.availableQuota,D,n]),(0,m.useEffect)((function(){$(D.persistentvolumeclaims);var e=(0,v.memoryFormat)(D["requests.storage"],"Gi");Z(e=""!==e?e:"Infinity")}),[j]);var q,K,Q,J,X=(0,m.useCallback)((function(e){N(_(_({},D),{},{name:e.name}))}),[D]),Z=function(t){var a=j.limit,r=e.currentRelatedStorageTotal,n=A.isEditMode,l=A.storage,o=(0,v.memoryFormat)(l,"Gi");if("InfinityGi"!==a&&""!==a&&(0,p.default)(t)){var u=Number(a);e.isWorkspace&&(u-=r,!isNaN(o)&&n&&(u+=o)),"string"==typeof a&&(u=Number(a.replace(/[a-zA-Z]/g,""))),G(t>u)}else V&&G(!1)},$=function(t){var a=j.count,r=e.currentRelatedVolumeClaimsTotal,n=A.isEditMode,l=A.claims;if(""!==a&&""!==t){var o=a;e.isWorkspace&&(o-=r,""!==l&&n&&(o+=Number(l))),"string"==typeof a&&(o=a.replace(/[a-zA-Z]/g,"")),Number(t)>o?H(!0):H(!1)}else H(!1)},ee=(0,m.useCallback)((function(){l(!1),N(_({},C)),H(!1),G(!1),w({editItemName:"",isEditMode:!1,storage:0,claims:0})}),[]),te=(0,m.useCallback)((function(){var t;l(!1);var a=D.name,r=D["requests.storage"],n=D.persistentvolumeclaims,u=(t={},(0,o.default)(t,"".concat(a,".").concat(h.STORAGE_CLASS_STORAGE),r),(0,o.default)(t,"".concat(a,".").concat(h.STORAGE_CLASS_VOLUME_CLAIMS),n),t),c=A.isEditMode?{actionType:"edit",originName:A.editItemName,data:_({},u)}:{actionType:"add",data:_({},u)};e.onChange(c),N(C),w({editItemName:"",isEditMode:!1,limit:0,claims:0})}),[D]),ae=(0,m.useCallback)((function(t){var a,r=t.name;e.onChange({actionType:"delete",data:(a={},(0,o.default)(a,"".concat(r,".").concat(h.STORAGE_CLASS_STORAGE),""),(0,o.default)(a,"".concat(r,".").concat(h.STORAGE_CLASS_VOLUME_CLAIMS),""),a)})}),[]),re=(0,m.useCallback)((function(e,t){N({name:e.name,"requests.storage":t.storage,persistentvolumeclaims:t.claims}),w({editItemName:e.name,isEditMode:!0,storage:t.storage,claims:t.claims}),l(!0)}),[]),ne=(0,m.useCallback)((function(){return m.default.createElement("div",{className:g.default.relatedBox},m.default.createElement("div",{className:g.default.list},Object.entries(e.namespaceStorageClass).map((function(a,r){var n=(0,u.default)(a,2),l=n[0],o=n[1],s=e.allStorageClass.find((function(e){return e.name===l})),i="InfinityGi",f="",p=o.filter((function(e){return-1!==e.key.indexOf("requests.storage")}));p.length>0&&(i=p[0].value);var h,E,y,b=o.filter((function(e){return-1!==e.key.indexOf("persistentvolumeclaims")}));return b.length>0&&(f=b[0].value),s&&m.default.createElement("div",{className:g.default.card,key:r},(h=s,E={storage:"InfinityGi"===i?"InfinityGi":"".concat((0,v.memoryFormat)(i,"Gi"),"Gi"),claims:f},y=(0,v.memoryFormat)(E.storage,"Gi"),m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:g.default.baseInfo},m.default.createElement("div",{className:g.default.Icon},m.default.createElement(c.Icon,{name:"database",size:40})),m.default.createElement("div",{className:g.default.text},m.default.createElement("p",{className:g.default.label},h.name,h.default&&m.default.createElement("span",{className:g.default.default},t("DEFAULT"))),m.default.createElement("p",{className:g.default.value},t("NAME"))),m.default.createElement("div",{className:g.default.text},m.default.createElement("p",{className:g.default.label},(0,d.default)(e.relatedCount,h.name,0)),m.default.createElement("p",{className:g.default.value},t("VOLUME_COUNT"))),m.default.createElement("div",{className:g.default.iconText},m.default.createElement("div",null,m.default.createElement("p",{className:g.default.label},h.provisioner),m.default.createElement("p",{className:g.default.value},t("PROVISIONER"))),m.default.createElement("div",{className:g.default.opt},m.default.createElement(c.Icon,{name:"trash",size:16,onClick:function(){return ae(h)}}),m.default.createElement(c.Icon,{name:"pen",size:16,onClick:function(){return re(h,E)}})))),m.default.createElement("div",{className:g.default.config},m.default.createElement("span",{className:g.default.config_text},m.default.createElement("span",{className:g.default.value},t("STORAGE_LIMIT"),": "),m.default.createElement("span",{className:g.default.label},"InfinityGi"===E.storage||isNaN(y)?t("NO_LIMIT"):"".concat(y,"Gi"))),m.default.createElement("span",{className:g.default.config_text},m.default.createElement("span",{className:g.default.value},t("STORAGE_CLASS_VOLUME"),": "),m.default.createElement("span",{className:g.default.label},""!==E.claims?E.claims:t("NO_LIMIT")))))))}))),m.default.createElement("div",{className:g.default.addQuota,onClick:function(){return l(!0)}},m.default.createElement("p",{className:g.default.label},t("SELECT_A_STORAGECLASS")),m.default.createElement("p",{className:g.default.value},t("SET_RELATED_STORAGE_CLASS_QUOTA"))))}),[e.namespaceStorageClass]);return n?(q=(0,v.memoryFormat)(D["requests.storage"],"Gi"),K=D.persistentvolumeclaims,Q=isNaN(q)?1/0:q,J=!1,(""===D.name||0===Q||0===K)&&(J=!0),m.default.createElement("div",{className:g.default.addBox},m.default.createElement("div",{className:g.default.addContent,ref:k},m.default.createElement(b.default,{addedItems:e.addedItems,allStorageClass:e.allStorageClass,editName:D.name,editMode:A.isEditMode,onChange:X}),m.default.createElement("div",null,m.default.createElement(c.Columns,null,m.default.createElement(c.Column,null,m.default.createElement("div",{className:g.default.slider},m.default.createElement("span",{className:g.default.text},t("VOLUME_TOTAL_CAPACITY",{unit:"Gi"})),m.default.createElement(E.default,{value:(0,p.default)(q)?Number(q):1/0,marks:O,unit:"Gi",valueFormatter:T,onChange:function(e){return function(e){var t=isNaN(e)?"InfinityGi":"".concat(e).concat("Gi");Z(t),N(_(_({},D),{},{"requests.storage":t}))}(e)}})))),m.default.createElement(c.Columns,null,m.default.createElement(c.Column,null,m.default.createElement("span",{className:g.default.text},t("RESOURCE_LIMITS")),m.default.createElement("div",{className:(0,s.default)(g.default.wrapper,(0,o.default)({},g.default.error,V))},m.default.createElement(y.default,{className:g.default.input,min:0,value:(0,p.default)(q)?q:"",placeholder:(0,p.default)(q)?"":t("NO_LIMIT"),onChange:function(e){return a=t=e,(0,f.default)(t,".")&&(a=Number(t.slice(0,t.length-1))),""!==t&&"-"!==t||(a=1/0),Z(a),void N(_(_({},D),{},{"requests.storage":"".concat(a).concat("Gi")}));var t,a}}),m.default.createElement("span",{className:g.default.unit},"Gi"))),m.default.createElement(c.Column,null,m.default.createElement("span",{className:g.default.text},t("VOLUME_MAX_NUM")),m.default.createElement("div",{className:(0,s.default)(g.default.wrapper,(0,o.default)({},g.default.error,z))},m.default.createElement(i.default,{className:g.default.input,min:0,value:K,placeholder:t("NO_LIMIT"),onChange:function(e){return a=t=e,(0,f.default)(t,".")&&(a=Number(t.slice(0,t.length-1))),""!==t&&"-"!==t||(a=""),$(a),void N(_(_({},D),{},{persistentvolumeclaims:a}));var t,a}}))))),function(){var a=j.limit,r=j.count,n=e.currentRelatedStorageTotal,l=e.currentRelatedVolumeClaimsTotal,o=a,u=r;if(e.isWorkspace){(0,p.default)(a)&&(o-=n),(0,p.default)(r)&&(u-=l);var s=A.isEditMode,i=A.storage,f=A.claims,d=(0,v.memoryFormat)(i,"Gi");(0,p.default)(a)&&s&&!isNaN(d)&&(o+=d),""!==f&&(0,p.default)(r)&&s&&(u+=Number(f))}var h=(0,p.default)(a)?t("STORAGE_VOLUME_LIMIT_HAS_A_LIMIT",{num:o}):t("STORAGE_VOLUME_LIMIT_NO_LIMIT"),E=(0,p.default)(r)?t("STORAGE_PERSISTENT_VOLUME_HAS_A_LIMIT",{num:u}):t("STORAGE_PERSISTENT_VOLUME_NO_LIMIT"),y="".concat(h,", ").concat(E);return m.default.createElement("div",{className:g.default.tipContent},m.default.createElement(c.Alert,{type:"info",title:t("AVAILABLE_QUOTAS"),message:y}),(V||z)&&m.default.createElement("div",{className:g.default.warning},t("REQUEST_EXCEED_AVAILABLE_QUOTA")))}(),m.default.createElement("div",{className:g.default.closeContent},m.default.createElement("div",{className:g.default.icon,onClick:ee},m.default.createElement(c.Icon,{name:"close",size:16})),m.default.createElement("div",{className:(0,s.default)(g.default.icon,(0,o.default)({},g.default.disabled,J||z||V)),onClick:te},m.default.createElement(c.Icon,{name:"check",size:16})))))):ne()};a.default=R},function(e,t,a){e.exports={relatedBox:"_1GGmkso_4IJTkxjrWF32_6",label:"_1CGNqu-q5sfQ050_H30wts",value:"KKbwkLC9KvM1xuHdZVHBw",list:"RdLtbOozPGoubquDaAr3O",card:"_3owbF3meZl7eQCaMwjlyRC",baseInfo:"_3eNCBNEnGHEBCoYOrxEYRn",Icon:"_1668ydHLavkdcsClp6BPDz",text:"_3tYSIDE5E8DLQS1Fpwu63f",default:"_3cN04CNtBKjf8lFfA73-v",iconText:"_1-XxK_YcydUaYulcve3UHw",opt:"_1dQEbMcYDc_524orHLVEEK",config:"etu-pGB83QqKQxJDXo-Sm",config_text:"_1lbPmxNq09U-73j0TaoBgQ",addQuota:"_2HKZQ-LKndrfIztjRwDalI",addBox:"_3WSfp73NfezhHgTmYM4qnb",addContent:"_14unDCHvUsTwbIvUhkQ_vD",wrapper:"_1_w447Hic4nOy-sCH5RDzV",unit:"_3SYBak0N4z7MISs51IM25h",tipContent:"QM2pl7XTGNSX9NTrqJmFa",warning:"_3QnOEHy7BNAOBXqS6JWz1A",closeContent:"_37J22EJXV49Y4H_NAS6KDh",icon:"_2YbiBieUBwoH8Dyg-XrDIu",disabled:"_9VqM3CRNqJWJJ4sz0ijXt",error:"V6cUjfRc1-lPhfqYMb029"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(86),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var o=l(r(30)),u=l(r(96)),c=n(r(0)),s=r(186),i=l(r(3)),f=l(r(63)),d=l(r(3350));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=function(e){var a=(0,c.useState)(!1),r=(0,u.default)(a,2),n=r[0],l=r[1],p=(0,c.useState)({}),v=(0,u.default)(p,2),h=v[0],E=v[1];(0,c.useEffect)((function(){var t=e.allStorageClass.filter((function(t){return t.name===e.editName}))[0];E(m({},t))}),[e.editName]);var y=(0,c.useCallback)((function(t){l(!1),E(m({},t)),e.onChange(t)})),g=(0,c.useCallback)((function(e){return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:d.default.Icon},c.default.createElement(s.Icon,{name:"database",size:40})),c.default.createElement("div",{className:d.default.text},c.default.createElement("p",{className:d.default.label},e.name," ",e.default&&c.default.createElement("span",{className:d.default.default},t("DEFAULT"))),c.default.createElement("p",{className:d.default.value},t("NAME"))),c.default.createElement("div",{className:d.default.text},c.default.createElement("p",{className:d.default.label},e.associationPVCCount||0),c.default.createElement("p",{className:d.default.value},t("VOLUME_COUNT"))),c.default.createElement("div",{className:d.default.text},c.default.createElement("p",{className:d.default.label},e.provisioner),c.default.createElement("p",{className:d.default.value},t("PROVISIONER"))))})),b=e.allStorageClass.filter((function(t){return-1===e.addedItems.indexOf(t.name)})),S=e.editMode,_=c.default.createElement("div",{className:(0,i.default)(d.default.addBox,(0,o.default)({},d.default.hover,!S)),onClick:function(){return l(!n)}},(0,f.default)(h)?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:d.default.Icon},c.default.createElement(s.Icon,{name:"database",size:40})),c.default.createElement("div",{className:d.default.text},c.default.createElement("p",{className:d.default.label},t("SELECT_STORAGE_CLASS")),c.default.createElement("p",{className:d.default.value},t("SET_RELATED_STORAGE_CLASS_QUOTA")))):c.default.createElement(c.default.Fragment,null,g(h)),!S&&c.default.createElement("div",{className:n?d.default.rotate:""},c.default.createElement(s.Icon,{name:"chevron-down",size:20}))),O=(0,c.useCallback)((function(){return b.length>0?c.default.createElement("div",{className:d.default.list},c.default.createElement("div",{className:d.default.extraContent},b.map((function(e){return c.default.createElement("div",{className:d.default.card,key:e.name,onClick:function(){return y(e)}},g(e))})))):null}));return c.default.createElement("div",{className:d.default.wrapper},_,c.default.createElement(c.default.Fragment,null,!S&&n&&O()))};a.default=v},function(e,t,a){e.exports={addBox:"_2P0f0FwDVpHJ7wtcHg4mZP",Icon:"_2EoBETTKKnmy_fVgMCB9yR",text:"_164oSWx0vc9753lp2Rf8EW",label:"_3Os24eJRt_vq5NdAj6PtUr",default:"_1iDV2CgIhUQCZE-BWJqX03",value:"yp2bvppkb-cW4cXDNXuEr",hover:"_14g5XwSM1u8TqXP18Hl3Ij",list:"_2iNtlWNCQ_kNrIK58DBunO",extraContent:"_3leBkLEhf6uYuWG1Al7lTt",card:"_7YZjcuF7SXPzsBKEKEqhm",wrapper:"_32Jj8ViLQU8hzot9rBIvko",rotate:"JUvzx2dwgkpp6dtYPx2A9"}},function(e,a,r){"use strict";r(15);var n=r(20);r(197),r(6),r(84),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(197),r(6),r(84),r(28),r(859),r(42),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(61)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(1114)),p=n(r(26)),m=n(r(63)),v=n(r(74)),h=n(r(189)),E=n(r(158)),y=n(r(199)),g=n(r(241)),b=n(r(457)),S=r(186),_=n(r(829)),O=r(72),C=r(52),T=n(r(3352)),R=r(1742),D=n(r(3353));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var k=function(e){(0,c.default)(r,e);var a=N(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).handleAddQuotaItem=function(e){t.setState({items:e},(function(){var a=(0,p.default)(t.props.data,"spec.hard"),r=(0,g.default)(a,t.omitKeys),n={};e.forEach((function(e){var t=e.module,a=e.value;if(!(0,E.default)(t)){var r=(0,p.default)(O.QUOTAS_MAP,"".concat(t,".name"),t);n["".concat(r)]=a}})),(0,v.default)(t.props.data,"spec.hard",(0,y.default)(n,r))}))},t.checkItemValid=function(e){return!(0,m.default)(e)&&e.module},t.state={items:(0,l.default)(t.getItems(e))},t}return(0,u.default)(r,[{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({items:(0,l.default)(this.getItems(this.props))})}},{key:"getItems",value:function(e){var t=(0,h.default)((0,p.default)(e.data,"spec.hard",{}),this.omitKeys),a=(0,b.default)(t,(function(e,t){return t.includes("requests.storage")||t.includes("persistentvolumeclaims")})),r=[];(0,d.default)(a,(function(e,t){var a={module:R.QUOTAS_KEY_MODULE_MAP[t]||t,value:e};r.push(a)}));var n=r.findIndex((function(e){return"pods"===e.module}));if(n>0){var l=r[0];r[0]=r[n],r[n]=l}return n<0&&r.unshift({module:"pods",value:""}),r}},{key:"render",value:function(){var e=this.state.items;return f.default.createElement("div",{className:D.default.wrapper},f.default.createElement(S.Form.Item,null,f.default.createElement(_.default,{value:e,itemType:"object",addText:t("ADD"),onChange:this.handleAddQuotaItem,checkItemValid:this.checkItemValid},f.default.createElement(T.default,{isFederated:this.props.isFederated}))))}},{key:"omitKeys",get:function(){var e=globals.config.supportGpuType,t=(0,l.default)(C.resourceLimitKey);return e.forEach((function(e){return t.push("limits.".concat(e),"requests.".concat(e))})),t}}]),r}(f.default.Component);a.default=k},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(84),r(18),r(10),r(4),r(23),r(17),r(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(84),r(18),r(42),r(10),r(4),r(23),r(57),r(17),r(85);var l=n(r(61)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=r(186),p=r(72),m=n(r(867)),v=n(r(799)),h=r(1742);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var y=function(e){(0,c.default)(r,e);var a=E(r);function r(){var e;(0,o.default)(this,r);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(e=a.call.apply(a,[this].concat(l))).handleLimitValue=function(t){e.props.onChange(t)},e.renderInputByModule=function(){var a=e.props.value;return Object.keys(p.QUOTAS_MAP).includes(a.module)?f.default.createElement(v.default,{name:"value",className:"margin-l12",placeholder:t("QUOTA"),integer:!0}):f.default.createElement(d.Input,{name:"value",className:"margin-l12",placeholder:t("QUOTA")})},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.value;return f.default.createElement(m.default,{value:e,onChange:this.handleLimitValue},f.default.createElement(d.Select,{name:"module",options:this.options,searchable:!0,disabled:"pods"===e.module,placeholder:t("SELECT_RESOURCE_TIP")}),this.renderInputByModule())}},{key:"options",get:function(){var e=this,a=this.props,r=a.arrayValue,n=a.value.module,o=r.map((function(e){return e.module})),u=[].concat((0,l.default)(o.filter((function(e){return e!==n}))),(0,l.default)(h.RESERVED_MODULES));return Object.keys(p.QUOTAS_MAP).filter((function(t){return!(u.includes(t)||e.props.isFederated&&h.FEDERATED_PROJECT_UNSOPPORT_QUOTA.includes(t))})).map((function(e){return{label:t("NUMBER_OF_".concat(e.toUpperCase())),value:e}}))}}]),r}(f.default.Component);a.default=y},function(e,t,a){e.exports={wrapper:"_2f9FtzUmnr8s0l-t7pIdZ6",add:"_12llEGhtVNhuZkDEOFJruL",item:"ldxiI3Htv3eXoJDTeeX_k"}},function(e,t,a){e.exports={body:"_3saq57SXrBCpwOp8y8Yn9v",quotaItem:"lZFyXdiuUr16N-QbFejXg",label:"_2tWA6RsFJazk5XKsXgERqG",storageLimit:"_1P5oo__wk4zvMZ0OFveyyz"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(86),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(86),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o,u,c,s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(49)),h=n(r(0)),E=r(239),y=r(14),g=n(r(26)),b=n(r(63)),S=n(r(158)),_=n(r(1)),O=r(186),C=n(r(787)),T=n(r(951)),R=n(r(842)),D=n(r(814)),N=r(52),k=n(r(445)),I=n(r(3356)),P=r(72),A=n(r(3357));function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var j=(0,E.observer)((c=u=function(e){(0,d.default)(r,e);var a=L(r);function r(e){var n;return(0,i.default)(this,r),(n=a.call(this,e)).nameValidator=function(e,a,r){if(!a)return r();if(0===a.indexOf("kube-"))return r({message:t("NAME_VALIDATION_FAILED"),field:e.field});var l=n.props.cluster||(0,g.default)(n.props.formTemplate,"cluster");if(!l&&globals.app.isMultiCluster)return r();n.store.checkName({name:a,cluster:l}).then((function(a){if(a.exist)return r({message:t("PROJECT_NAME_EXIST_DESC"),field:e.field});r()}))},n.annotationValidator=function(e,a,r){return(0,S.default)(a)||(0,b.default)(a)?r():(0,N.isValidAnnotation)(a)?void r():r({message:t("ANNOTATION_FORMAT_DESC")})},n.handleClusterChange=function(){if(n.nameRef&&n.nameRef.current){var e="metadata.name";n.formRef&&n.formRef.current&&!(0,b.default)(n.formRef.current.state.errors)&&n.formRef.current.resetValidateResults(e),n.nameRef.current.validate((0,s.default)({},e,(0,g.default)(n.props.formTemplate,e)))}},n.valueRenderer=function(e){return h.default.createElement(D.default,{cluster:e.cluster,isEdgeWize:n.isEdgeCluster,size:"small",noStatus:!0})},n.optionRenderer=function(e){return h.default.createElement(D.default,{isEdgeWize:n.isEdgeCluster,cluster:e.cluster,size:"small",theme:"light",noStatus:!0})},n.store=e.store,n.workspaceStore=e.isEdgeWize?new I.default:new k.default,n.formRef=h.default.createRef(),n.nameRef=h.default.createRef(),n}return(0,f.default)(r,[{key:"componentDidMount",value:function(){this.props.hideCluster||this.fetchClusters()}},{key:"fetchClusters",value:function(e){this.workspaceStore.fetchClusters(M(M({},e),{},{workspace:this.props.workspace}))}},{key:"renderClusters",value:function(){var e=this.isEdgeCluster?t("EDGE_CLUSTER"):t("KS_CLUSTER");return h.default.createElement(O.Form.Group,{label:e,desc:t("SELECT_CLUSTER_DESC",{type:e})},h.default.createElement(O.Form.Item,{rules:[{required:!0,message:t("CLUSTER_EMPTY_DESC")}]},h.default.createElement(O.Select,{name:"cluster",className:A.default.cluster,options:this.clusters,defaultValue:this.props.defaultCluster,valueRenderer:this.valueRenderer,optionRenderer:this.optionRenderer,onChange:this.handleClusterChange,placeholder:" ",disabled:this.isEdgeCluster,showTip:!0})))}},{key:"renderAdvancedSettings",value:function(){return h.default.createElement(T.default,{className:A.default.advanced},h.default.createElement(O.Columns,null,h.default.createElement(O.Column,null,h.default.createElement(O.Form.Item,{label:t("ANNOTATION_PL"),rules:[{validator:this.annotationValidator}]},h.default.createElement(R.default,{name:"metadata.annotations",addText:t("ADD")})))))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.formTemplate,n=e.hideCluster,l=e.onOk,o=e.onCancel,u=e.isSubmitting;return h.default.createElement(C.default.Form,{width:960,formRef:this.formRef,bodyClassName:A.default.body,data:r,onCancel:o,onOk:l,visible:a,closable:!1,isSubmitting:u,hideHeader:!0},h.default.createElement("div",{className:A.default.header},h.default.createElement("img",{src:"/assets/project-create.svg",alt:""}),h.default.createElement("div",{className:A.default.title},h.default.createElement("div",null,t("CREATE_PROJECT")),h.default.createElement("p",null,t("CREATE_PROJECT_DESC")))),h.default.createElement("div",{className:A.default.content},h.default.createElement(O.Columns,null,h.default.createElement(O.Column,null,h.default.createElement(O.Form.Item,{label:t("NAME"),desc:t("PROJECT_NAME_DESC"),ref:this.nameRef,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:P.PATTERN_SERVICE_NAME,message:t("PROJECT_NAME_INVALID_DESC")},{validator:this.nameValidator}]},h.default.createElement(O.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),h.default.createElement(O.Column,null,h.default.createElement(O.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:P.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},h.default.createElement(O.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),h.default.createElement(O.Columns,null,h.default.createElement(O.Column,null,h.default.createElement(O.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},h.default.createElement(O.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256}))),h.default.createElement(O.Column,null)),!n&&this.renderClusters(),this.isClusterManage&&this.renderAdvancedSettings()))}},{key:"isClusterManage",get:function(){return globals.app.isPlatformAdmin||globals.app.hasPermission({module:"clusters",action:"manage"})}},{key:"isEdgeCluster",get:function(){return"edge"===this.props.type}},{key:"networkOptions",get:function(){return[{label:t("OFF"),value:""},{label:t("ON"),value:"enabled"}]}},{key:"clusters",get:function(){return this.workspaceStore.clusters.data.map((function(e){return{label:e.name,value:e.name,cluster:e,disabled:!e.isReady}}))}},{key:"defaultClusters",get:function(){var e=this.workspaceStore.clusters.data.filter((function(e){return e.isReady})).map((function(e){return{name:e.name}}));return(0,b.default)(e)?void 0:e}}]),r}(h.default.Component),u.propTypes={isEdgeWize:_.default.bool,formTemplate:_.default.object,visible:_.default.bool,isSubmitting:_.default.bool,onOk:_.default.func,onCancel:_.default.func},u.defaultProps={formTemplate:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},o=c,(0,v.default)(o.prototype,"clusters",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"clusters"),o.prototype),(0,v.default)(o.prototype,"defaultClusters",[y.computed],Object.getOwnPropertyDescriptor(o.prototype,"defaultClusters"),o.prototype),l=o))||l;a.default=j},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(55)),o=r(a(56)),u=r(a(51));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.default)(e);if(t){var n=(0,u.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,o.default)(this,a)}}var s=function(e){(0,l.default)(a,e);var t=c(a);function a(){return(0,n.default)(this,a),t.apply(this,arguments)}return a}(r(a(445)).default);t.default=s},function(e,t,a){e.exports={body:"yQVuHwvZatSDhyjLUxSq5",header:"_3s8iAobkuDQP3egb7N_LV-",title:"_1N6z-WOWpmvXrCkFLYrEFO",content:"_2J8aCzfL8eRgztGnCRkwJc",cluster:"_3sckvxZYDol88LJbcAn1US",toolmessage:"_37IuScW3NoMm7a6hjFHwUR",advanced:"_1nriC6RCBOcZwoZ1MEx5VH"}},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(315)),u=n(r(30)),c=n(r(43));r(41);var s,i,f,d=n(r(44)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=r(186),g=n(r(787)),b=n(r(241)),S=n(r(74)),_=r(239),O=n(r(1)),C=l(r(0)),T=n(r(322)),R=n(r(445)),D=r(52);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var P=(0,_.observer)((f=i=function(e){(0,v.default)(r,e);var a=I(r);function r(e){var t;return(0,p.default)(this,r),(t=a.call(this,e)).handleWorkspaceChange=function(e){(0,S.default)(t.formTemplate,"metadata.annotations['kubesphere.io/creator']",""),t.setState({workspace:e},(function(){t.fetchMembers()}))},t.fetchWorkspaces=function(){var e=(0,d.default)(c.default.mark((function e(a){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.workspaceStore.fetchList(a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.fetchMembers=function(){var e=(0,d.default)(c.default.mark((function e(a){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.workspace){e.next=2;break}return e.abrupt("return",t.memberStore.fetchList(k({workspace:t.state.workspace},a)));case 2:return e.abrupt("return",Promise.resolve({}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={workspace:""},t.formTemplate={},t.workspaceStore=new R.default,t.memberStore=new T.default,t}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"fetchList",value:function(){var e=this.props,t=e.isEdge,a=e.detail,r={labelSelector:"!cluster-role.kubesphere.io/edge"};t&&(r={labelSelector:"cluster-role.kubesphere.io/edge=".concat(a.cluster)}),this.workspaceStore.fetchList(r)}},{key:"getWorkspaces",value:function(){return this.workspaceStore.list.data.map((function(e){return{label:(0,D.showNameAndAlias)(e),value:e.name}}))}},{key:"getUsers",value:function(){return this.memberStore.list.data.map((function(e){return{label:e.username,value:e.username}}))}},{key:"render",value:function(){return C.default.createElement(g.default.Form,(0,o.default)({title:t("ASSIGN_WORKSPACE"),icon:"firewall",width:691,data:this.formTemplate},this.props),C.default.createElement(y.Alert,{className:"margin-b12",type:"info",message:t("PROJECT_ASSIGN_DESC")}),C.default.createElement(y.Form.Item,{label:t("WORKSPACE"),desc:t("SELECT_WORKSPACE_DESC"),rules:[{required:!0,message:t("SELECT_WORKSPACE_DESC")}]},C.default.createElement(y.Select,{name:"metadata.labels['kubesphere.io/workspace']",onChange:this.handleWorkspaceChange,options:this.getWorkspaces(),pagination:(0,b.default)(this.workspaceStore.list,["page","total","limit"]),isLoading:this.workspaceStore.list.isLoading,onFetch:this.fetchWorkspaces,placeholder:" ",searchable:!0,clearable:!0})),C.default.createElement(y.Form.Item,{label:t("PROJECT_ADMINISTRATOR"),desc:t("PROJECT_ADMINISTRATOR_DESC")},C.default.createElement(y.Select,{name:"metadata.annotations['kubesphere.io/creator']",options:this.getUsers(),pagination:(0,b.default)(this.memberStore.list,["page","total","limit"]),isLoading:this.memberStore.list.isLoading,onFetch:this.fetchMembers,placeholder:" ",searchable:!0,clearable:!0})))}}]),r}(C.Component),i.propTypes={visible:O.default.bool,isEdge:O.default.bool,onOk:O.default.func,onCancel:O.default.func},i.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},s=f))||s;a.default=P},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(29),r(18),r(97),r(27),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(17),r(111),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(29),r(18),r(28),r(97),r(42),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(17),r(111),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(26)),m=n(r(1094)),v=n(r(158)),h=n(r(189)),E=n(r(967)),y=n(r(1168)),g=n(r(334)),b=n(r(447)),S=n(r(0)),_=n(r(1)),O=n(r(787)),C=n(r(872)),T=n(r(885)),R=n(r(913)),D=n(r(1095)),N=n(r(1544)),k=r(52);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var w=function(e){(0,i.default)(r,e);var a=A(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleChange=function(e){t.setState({data:{default:e.limits,defaultRequest:e.requests}})},t.handleOk=function(){(0,t.props.onOk)(t.state.data)},t.handleError=function(e){return t.setState({error:e})},t.availableQuota_memory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=P({},e);return Object.keys(e).forEach((function(a){a.endsWith("memory")&&(t[a]=(0,k.memoryFormat)(e[a])),a.endsWith("cpu")&&(t[a]=(0,k.cpuFormat)(e[a]))})),t},t.singleClusterQuota=function(e,a,r){return new Promise((function(n){Promise.all([t.quotaStore.fetch({cluster:r,namespace:a}),t.workspaceQuotaStore.fetchDetail({name:e,workspace:e,cluster:r})]).then((function(e){var a=(0,p.default)(e[1],"hard"),r=(0,p.default)(e[0],"data.hard");n({workspaceQuota:t.availableQuota_memory(a),namespaceQuota:t.availableQuota_memory(r)})}))}))},t.multiClusterQuota=function(e,a){var r=[],n={"limits.cpu":void 0,"limits.memory":void 0};t.props.clusters.forEach((function(n){return r.push(t.singleClusterQuota(e,a,n))})),Promise.all(r).then((function(e){var a=e.map((function(e){return(0,p.default)(e,"workspaceQuota",n)})),r=e.map((function(e){return(0,p.default)(e,"namespaceQuota",n)})),l=e.map((function(e){return(0,h.default)((0,p.default)(e,"namespaceQuota",{}),k.resourceLimitKey)}));t.setState({availableQuota:{workspace:t.transformQuota(a),namespace:P(P({},t.transformQuota(r)),t.transformGpu(l))}})}))},t.transformQuota=function(e){return{"limits.cpu":t.findCpuOrMemoryMin(e,"limits.cpu"),"limits.memory":t.findCpuOrMemoryMin(e,"limits.memory"),"requests.cpu":t.findCpuOrMemoryMin(e,"requests.cpu"),"requests.memory":t.findCpuOrMemoryMin(e,"requests.memory")}},t.findCpuOrMemoryMin=function(e,t){var a=e.map((function(e){return e[t]}));return(0,E.default)(a)},t.transformGpu=function(e){var t=globals.config.supportGpuType,a=e.map((function(e){return(0,g.default)(e,(function(e,a){return t.some((function(e){return(0,b.default)(a,e)}))}))}));return(0,y.default)(a,(function(e,t){var a=(0,p.default)(e,"".concat(Object.keys(t)[0]));return a?Number(a)>Number(Object.values(t)[0])?P(P({},e),t):P({},e):P(P({},e),t)}),{})},t.fetchQuota=(0,o.default)(l.default.mark((function e(){var a,r,n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.workspace,n=a.cluster,o=a.namespace,a.isFederated){e.next=8;break}return e.next=4,t.singleClusterQuota(r,o,n);case 4:u=e.sent,t.setState({availableQuota:{workspace:(0,p.default)(u,"workspaceQuota"),namespace:(0,p.default)(u,"namespaceQuota")}}),e.next=9;break;case 8:t.multiClusterQuota(r,o);case 9:case"end":return e.stop()}}),e)}))),t.getQuotaInfo=function(e){return(0,p.default)(t.workspaceQuota,e,void 0)},t.handleOk=function(){(0,t.props.onOk)(t.state.data)},t.handleError=function(e){return t.setState({error:e})},t.getQuotaInfo=function(e){return(0,p.default)(t.workspaceQuota,e,void 0)},t.quotaStore=e.isEdgeWize?new D.default:new T.default,t.workspaceQuotaStore=e.isEdgeWize?new N.default:new R.default,t.state={data:(0,p.default)(e.detail,"limit",{}),error:"",availableQuota:{}},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchQuota()}},{key:"componentDidUpdate",value:function(e){var t=this.props.detail;t.limit&&t.limit!==e.detail.limit&&this.setState({data:t.limit})}},{key:"getGpuLimit",value:function(){return(0,k.gpuLimitsArr)(this.workspaceQuota)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state.error;return S.default.createElement(O.default,{width:960,title:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),icon:"firewall",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n,disableSubmit:!!l},S.default.createElement(C.default,{defaultValue:this.resourceLimit,onChange:this.handleChange,onError:this.handleError,supportGpuSelect:this.props.supportGpuSelect||!1,workspaceLimitProps:this.workspaceLimitProps}))}},{key:"resourceLimit",get:function(){return{requests:(0,p.default)(this.props.detail,"limit.defaultRequest",{}),limits:(0,p.default)(this.props.detail,"limit.default",{})}}},{key:"workspaceQuota",get:function(){var e=(0,p.default)(this.state,"availableQuota.namespace",{}),t=(0,p.default)(this.state,"availableQuota.workspace",{});return(0,m.default)(e,t,(function(e,t){if(e||t)return(0,v.default)(e)?t:e<t?e:t}))}},{key:"workspaceLimitProps",get:function(){return{limits:{cpu:this.getQuotaInfo("limits.cpu"),memory:this.getQuotaInfo("limits.memory")},requests:{cpu:this.getQuotaInfo("requests.cpu"),memory:this.getQuotaInfo("requests.memory")},gpuLimit:this.getGpuLimit()}}}]),r}(S.default.Component);a.default=w,w.propTypes={isEdgeWize:_.default.bool,detail:_.default.object,namespace:_.default.string,visible:_.default.bool,onOk:_.default.func,onCancel:_.default.func,isSubmitting:_.default.bool},w.defaultProps={isEdgeWize:!1,visible:!1,isSubmitting:!1,namespace:"",detail:{},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(824)),d=n(r(3361)),p=n(r(443));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={"resource.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.onOk,o=e.k8sVersion,u=void 0===o?"":o,d=(0,c.default)(e,["store","detail","success","onOk","k8sVersion"]),p=i.default.open(v({onOk:function(){if(l)return null==l?void 0:l().then((function(){i.default.close(p),n&&n()}));a.delete(r,u).then((function(){i.default.close(p),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()}))},store:a,modal:f.default,resource:r.name},d))}},"resource.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,d=e.once,m=e.k8sVersion,h=void 0===m?"":m,E=(0,c.default)(e,["store","success","rowKey","once","k8sVersion"]),y=new p.default,g=r.list,b=g.data,S=g.selectedRowKeys,_=b.filter((function(e){return S.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),O=_.map((function(e){return e.name})),C=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=6;break}return a=b.filter((function(e){return _.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))})),e.next=4,r.batchDelete(v({selectedItems:a},E));case 4:e.next=10;break;case 6:return o=[],b.forEach((function(e){_.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&(o.push(r.delete(e,h)),"statefulsets"===r.module&&o.push(y.delete(v(v({},e),{},{name:e.spec.serviceName}))))})),e.next=10,Promise.all(o);case 10:i.default.close(C),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 14:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:O.join(", "),modal:f.default,store:r},E))}},"resource.batch.stop":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=(0,c.default)(e,["store","success","rowKey"]),p=r.list,m=p.data,h=p.selectedRowKeys,E=m.filter((function(e){return h.includes(e[u])})).map((function(e){return{name:e.name,namespace:e.namespace}})),y=E.map((function(e){return e.name})),g=i.default.open(v({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],m.forEach((function(e){E.find((function(t){return t.name===e.name&&t.namespace===e.namespace}))&&a.push(r.stop(e))})),e.next=4,Promise.all(a);case 4:i.default.close(g),s.default.success({content:"".concat(t("STOP_SUCCESS_DESC"))}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:y.join(", "),modal:d.default,store:r},f))}}};a.default=h},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3362));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={confirm:""},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleOk=function(){e.props.onOk()},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.app,r=e.type,n=e.resource,l=e.visible,o=e.onCancel,u=e.title,c=e.desc,s=e.isSubmitting,f=r||void 0,v=r?"".concat(r,"_LOW"):void 0,h=r?"".concat(r,"_PL"):void 0,E=c||(n&&r?1===n.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{type:t(v),resource:n}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{type:t(v),resource:n}):t.html("STOP_DESC",{resource:n,type:""}));return a&&(E=t.html("STOP_APP_RESOURCE_TIP",{type:r,resource:n,app:a})),i.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:l,isSubmitting:s,onCancel:o,hideHeader:!0,hideFooter:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"close",type:"light",className:m.default.closeIcon}),u||(n&&r?1===n.split(", ").length?t("STOP_TITLE_SI",{type:t(f)}):t("STOP_TITLE_PL",{type:t(h)}):t("STOP"))),i.default.createElement("div",{className:m.default.content},i.default.createElement("p",null,E),n&&i.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:n,autoFocus:!0}))),i.default.createElement("div",{className:m.default.footer},i.default.createElement(d.Button,{onClick:o,"data-test":"modal-cancel"},t("CANCEL")),i.default.createElement(d.Button,{type:"danger",loading:s,disabled:s||!!n&&this.state.confirm!==n,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={type:f.default.string,resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalBody:"V3WE_gCdFFccI6xtK2Ggx",body:"_1zlECIP6AUyOgycNLNcLO0",content:"YrlO8vrb3S-LDnaRDeIJM",closeIcon:"_2Rw7-E0IzpRuCWq8Nbr_QQ",footer:"_1xi-T9pvoKbF80RaXo2H7X"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(74)),f=n(r(240)),d=n(r(787)),p=n(r(1369)),m=n(r(3364)),v=n(r(1080));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"resource.baseinfo.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.k8sVersion,o=void 0===l?"":l,u=(0,c.default)(e,["store","detail","success","k8sVersion"]),i=(0,s.default)(a,"module",""),m=d.default.open(E({onOk:function(e){var l="workspace"===i?null:e;"workspaces"===(0,s.default)(a,"module","")&&(l=[{op:"add",path:"/metadata/annotations",value:(0,s.default)(e,"metadata.annotations")},{op:"add",path:"/spec",value:(0,s.default)(e,"spec")}]);a.patch(r,l,o).then((function(){d.default.close(m),f.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:p.default,store:a},u))}},"resource.annotations.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=d.default.open(E({onOk:function(e){a.update(r,e).then((function(){d.default.close(o),f.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:m.default,store:a},l))}},"resource.yaml.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=e.k8sVersion,p=void 0===s?"":s,m=(0,c.default)(e,["store","detail","success","k8sVersion"]),h=d.default.open(E({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isScheduleProject){e.next=9;break}return(0,i.default)(a[0],"metadata.resourceVersion",n.resourceVersion),e.next=5,r.update(n,a[0],p);case 5:return e.next=7,r.updateScheduleYaml(n,a[1],p);case 7:e.next=12;break;case 9:return(0,i.default)(a,"metadata.resourceVersion",n.resourceVersion),e.next=12,r.update(n,a,p);case 12:f.default.success({content:t("UPDATE_SUCCESSFUL")}),d.default.close(h),u&&u();case 15:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:n,store:r,modal:v.default,k8sVersion:p},m))}}};a.default=y},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=r(14),h=r(239),E=n(r(63)),y=n(r(158)),g=n(r(830)),b=r(186),S=n(r(787)),_=n(r(842)),O=r(52);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=C(r);function r(e){var n;return(0,c.default)(this,r),(n=a.call(this,e)).annotationValidator=function(e,a,r){return(0,y.default)(a)||(0,E.default)(a)?r():(0,O.isValidAnnotation)(a)?void r():r({message:t("ANNOTATION_FORMAT_DESC")})},n.handleOk=function(e){n.props.onOk(e)},n.state={formData:(0,g.default)((0,v.toJS)(e.detail._originData||e.detail))},n}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,g.default)((0,v.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting;return p.default.createElement(S.default.Form,{title:t("EDIT_ANNOTATIONS"),icon:"pen",visible:a,width:960,data:this.state.formData,onOk:this.handleOk,onCancel:r,isSubmitting:n},p.default.createElement(b.Form.Item,{rules:[{validator:this.annotationValidator}]},p.default.createElement(_.default,{name:"metadata.annotations",hiddenKeys:globals.config.preservedAnnotations,addText:t("ADD")})))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={detail:{},isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=T},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(137),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(137),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(74)),c=n(r(135)),s=n(r(240)),i=n(r(787)),f=n(r(3366)),d=n(r(1743)),p=n(r(3369)),m=n(r(435));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"role.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.workspace,u=e.success,c=e.devops,d=(0,o.default)(e,["store","cluster","namespace","workspace","success","devops"]),p=a.module,v=i.default.open(h({onOk:function(e){e?(c&&(e.metadata.namespace=c),a.create(e,{cluster:r,namespace:n,workspace:l,devops:c}).then((function(){i.default.close(v),s.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u()}))):i.default.close(v)},modal:f.default,store:a,module:p,cluster:r,namespace:n,workspace:l,formTemplate:m.default[p]({namespace:n})},d))}},"role.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),f=a.module,p=Object.assign(m.default[f]({namespace:l.namespace}),(0,c.default)(r._originData));(0,u.default)(p,"metadata.resourceVersion",r.resourceVersion);var v=i.default.open(h({onOk:function(e){var l;e?(delete p.roleTemplates,(null==p||null===(l=p.metadata)||void 0===l?void 0:l.annotations)&&delete p.metadata.annotations["iam.kubesphere.io/rego-override"],(0,u.default)(p,"aggregationRoleTemplates.templateNames",e),a.update(r,p).then((function(){i.default.close(v),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))):i.default.close(v)},modal:d.default,store:a,module:f,edit:!0,formTemplate:p},l))}},"role.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=i.default.open(h({onOk:function(){a.delete(r).then((function(){i.default.close(u),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()}))},modal:p.default,module:a.module,detail:r,store:a},l))}}};a.default=E},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(61)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(26)),v=n(r(74)),h=n(r(0)),E=r(239),y=n(r(1)),g=r(186),b=n(r(787)),S=n(r(1743)),_=r(72);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var C=(0,E.observer)((u=o=function(e){(0,f.default)(r,e);var a=O(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={showEditAuthorization:!1},e.showEditAuthorization=function(){e.setState({showEditAuthorization:!0})},e.hideEditAuthorization=function(){e.setState({showEditAuthorization:!1})},e.handleCreate=function(t){var a=e.props.basicRoleTemplates,r=a?a.map((function(e){return e.name})):[];(0,v.default)(e.props.formTemplate,"aggregationRoleTemplates.templateNames",[].concat((0,c.default)(t),(0,c.default)(r))),e.props.onOk(e.props.formTemplate)},e.roleNameValidator=function(a,r,n){if(!r)return n();var l=e.props,o=l.workspace,u=l.cluster,c=l.namespace,s=(0,m.default)(e.props.formTemplate,"metadata.name");if(e.props.edit&&s===r)return n();e.props.store.checkName({name:r,workspace:o,cluster:u,namespace:c}).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e}return(0,i.default)(r,[{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.module,l=e.onCancel,o=e.formTemplate,u=e.roleTemplates,c=e.isSubmitting,s=e.roleModules,i=e.isEdge,f=this.state.showEditAuthorization,d="workspaceroles"===n;return f?h.default.createElement(S.default,{module:n,visible:f,roleModules:s,formTemplate:o,roleTemplates:u,onOk:this.handleCreate,onCancel:this.hideEditAuthorization,isSubmitting:c,isEdge:i}):h.default.createElement(b.default.Form,{width:600,title:a||t("CREATE_ROLE"),icon:"role",data:o,onCancel:l,onOk:this.showEditAuthorization,okText:t("EDIT_PERMISSIONS"),visible:r},h.default.createElement(g.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),tip:d?t("WORKSPACE_ROLE_NAME_TIP"):null,rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:_.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.roleNameValidator}]},h.default.createElement(g.Input,{name:"metadata.name",maxLength:63})),h.default.createElement(g.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},h.default.createElement(g.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),h.default.createElement(g.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},h.default.createElement(g.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})),h.default.createElement(g.Alert,{className:"margin-t12",title:t("NEXT_STEP"),message:t("NEXT_STEP_DESC")}))}}]),r}(h.default.Component),o.propTypes={store:y.default.object,module:y.default.string,roleTemplates:y.default.array,formTemplate:y.default.object,title:y.default.string,visible:y.default.bool,onOk:y.default.func,onCancel:y.default.func,isSubmitting:y.default.bool,roleModules:y.default.array},o.defaultProps={visible:!1,isSubmitting:!1,module:"roles",onOk:function(){},onCancel:function(){}},l=u))||l;a.default=C},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(11),r(6),r(84),r(73),r(18),r(16),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(6),r(84),r(73),r(18),r(28),r(42),r(16),r(4),r(23),r(57),r(17),r(85),r(7);var o=l(r(61)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(26)),m=l(r(63)),v=r(186),h=l(r(240)),E=l(r(790)),y=r(52),g=l(r(1744));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=function(e){(0,s.default)(r,e);var a=b(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=a.call.apply(a,[this].concat(l))).getName=function(t){return(0,p.default)(t,"_originData.spec.displayName[".concat(e.lang,"]"))||(0,p.default)(t,"_originData.spec.displayName.en")},e.getDesc=function(t){return(0,p.default)(t,"_originData.spec.description[".concat(e.lang,"]"))||(0,p.default)(t,"_originData.spec.description.en")},e.handleCheck=function(){var a=e.props,r=a.roleTemplates,n=a.roleTemplatesMap,l=a.data,u=a.onChange,c=(0,o.default)(r);if(c.includes(l.name)){var s=c.filter((function(t){return t!==l.name&&e.getDependencies([t]).includes(l.name)}));0===s.length?c=c.filter((function(e){return e!==l.name})):h.default.warning(t("DESELECT_RESOURCE_FIRST",{resource:s.map((function(t){return e.getName(n[t])})).join("/")}))}else c.push(l.name);u([].concat((0,o.default)(c),(0,o.default)(e.getDependencies(c))))},e.getDependencies=function(t){var a=e.props.roleTemplatesMap,r=[];return(0,m.default)(t)||(t.forEach((function(e){var n=a[e];n&&n.dependencies&&n.dependencies.forEach((function(e){t.includes(e)||r.includes(e)||r.push(e)}))})),r.length>0&&r.push.apply(r,(0,o.default)(e.getDependencies(r)))),r},e}return(0,c.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.roleTemplates,n=a.roleTemplatesMap,l=a.data,o=l.dependencies.length>0?l.dependencies.map((function(t){return e.getName(n[t])})).filter((function(e){return void 0!==e})):[];return d.default.createElement("div",{className:g.default.checkItem},d.default.createElement(v.Checkbox,{checked:r.includes(l.name),onClick:this.handleCheck}),d.default.createElement(E.default,{title:this.getName(l),onClick:this.handleCheck,description:this.getDesc(l)}),o.length>0&&d.default.createElement("div",{className:g.default.extra},t("DEPENDS_ON"),o.map((function(e){return d.default.createElement(v.Tag,{className:g.default.tag,type:"info",key:e},e)}))))}},{key:"lang",get:function(){return(0,p.default)(globals.user,"lang")||(0,y.getBrowserLang)()}}]),r}(d.Component);a.default=S},function(e,t,a){"use strict";a(15),Object.defineProperty(t,"__esModule",{value:!0}),t.ROLE_MODULES_ICON=t.ROLE_MODULES=void 0;var r={globalroles:[{name:"Clusters Management",icon:"cluster"},{name:"Access Control",icon:"key"},{name:"Apps Management",icon:"openpitrix",hide:!globals.app.enableAppStore},{name:"Platform Settings",icon:"cogwheel"}],workspaceroles:[{name:"Projects Management",icon:"project"},{name:"DevOps Management",icon:"strategy-group",hide:!globals.app.hasKSModule("devops")},{name:"Apps Management",icon:"appcenter",hide:!globals.app.hasKSModule("openpitrix")},{name:"Access Control",icon:"key"},{name:"Workspace Settings",icon:"cogwheel"}],roles:[{name:"Application Workloads",icon:"appcenter"},{name:"Storage Management",icon:"storage"},{name:"Configuration Center",icon:"hammer"},{name:"Monitoring & Alerting",icon:"monitor"},{name:"Access Control",icon:"human"},{name:"Project Settings",icon:"project"}],devopsroles:[{name:"Pipelines Management",icon:"application"},{name:"Continuous Deployments Management",icon:"rocket"},{name:"Code Repositories Management",icon:"code"},{name:"Credentials Management",icon:"key"},{name:"Access Control",icon:"human"},{name:"DevOps Settings",icon:"strategy-group"}],clusterroles:[{name:"Cluster Resources Management",icon:"nodes"},{name:"Project Resources Management",icon:"project"},{name:"Network Management",icon:"earth"},{name:"Storage Management",icon:"database"},{name:"Monitoring & Alerting",icon:"monitor"},{name:"Access Control",icon:"human"},{name:"Cluster Settings",icon:"cluster"}]};t.ROLE_MODULES=r;t.ROLE_MODULES_ICON={"cluster-management":"cluster","access-control":"key","apps-management":"openpitrix","platforms-settings":"cogwheel","projects-management":"project","devOps-management":"strategy-group","workspace-settings":"cogwheel","Application Workloads":"appcenter","storage-management":"storage","configuration-center":"hammer","project-settings":"project"}},function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var l=n(r(43)),o=n(r(30));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=n(r(1)),y=r(239),g=n(r(63)),b=n(r(787)),S=n(r(322)),_=n(r(1745)),O=r(72),C=n(r(3370));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var R=(0,y.observer)((s=c=function(e){(0,p.default)(n,e);var a,r=T(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).state={users:[],groups:{},isLoading:!1},t.store=new S.default,t.groupStore=new _.default,t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.visible,a=e.detail;t&&a.name&&this.fetchData()}},{key:"fetchData",value:(a=(0,i.default)(l.default.mark((function e(){var t,a,r,n,u,c,s,i,f;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,r=a.module,n=a.detail.name,u=a.cluster,c=a.workspace,s=a.namespace,this.setState({isLoading:!0}),e.next=4,this.store.fetchList((t={},(0,o.default)(t,O.ROLE_QUERY_KEY[r],n),(0,o.default)(t,"cluster",u),(0,o.default)(t,"workspace",c),(0,o.default)(t,"namespace",s),(0,o.default)(t,"limit",-1),t));case 4:if(i=e.sent,!(0,g.default)(i)||!c){e.next=10;break}return e.next=8,this.groupStore.getWorkspaceRoleBinding("",{cluster:u,workspace:c,namespace:s,rolename:n});case 8:f=e.sent,this.setState({groups:f});case 10:this.setState({users:i,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.visible,n=e.onOk,l=e.onCancel,o=e.isSubmitting,u=this.state,c=u.users,s=u.groups,i=u.isLoading;return h.default.createElement(b.default,{width:504,onOk:i||c.length||s.totalItems?null:n,onCancel:l,visible:r,isSubmitting:o,okButtonType:"danger",hideHeader:!0},h.default.createElement("div",{className:C.default.body},h.default.createElement("div",{className:"h5"},t("DELETE_ROLE")),h.default.createElement("p",null,!i&&c.length?t.html("DELETE_ROLE_USER_TIP".concat(1===c.length?"":"_PL"),{count:c.length}):s.totalItems?t.html("DELETE_ROLE_DEPARTMENT_TIP".concat(1===s.totalItems?"":"_PL"),{count:s.totalItems}):t.html("DELETE_ROLE_TIP",{resource:a.name}))))}}]),n}(h.default.Component),c.propTypes={detail:E.default.object,module:E.default.string,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},c.defaultProps={detail:{},visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},u=s))||u;a.default=R},function(e,t,a){e.exports={body:"_2OPaWn_o79qbwztkINRFGV"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(200),r(29),r(18),r(16),r(9),r(13),r(10),r(4),r(316),r(324),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(200),r(29),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(324),r(38),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(74)),f=n(r(242)),d=n(r(60)),p=n(r(240)),m=n(r(787)),v=n(r(825)),h=n(r(3372)),E=n(r(3373)),y=n(r(3375)),g=n(r(3377)),b=r(72),S=n(r(435)),_=n(r(901)),O=n(r(1606));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={"router.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,o=e.success,d=e.isFederated,h=(0,c.default)(e,["store","cluster","namespace","module","success","isFederated"]),E=b.MODULE_KIND_MAP[l],y=(0,u.default)({},E,S.default[l]({namespace:n}));d&&Object.keys(y).forEach((function(e){y[e]=S.default.federated({data:y[e],clusters:h.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var g=m.default.open(T({onOk:function(e){var u=(0,s.default)(e,E);if(e){var c={cluster:r,namespace:n};if(c.namespace=c.namespace||(0,s.default)(u,"metadata.namespace"),d){var v=(0,s.default)(u,"spec.ingressClassName"),h=(0,s.default)(u,"spec.overrides"),y=[],b={clusters:[]};h.forEach((function(e){0!==(0,s.default)(e,"clusterOverrides[0].value",[]).length&&(b.clusters.push({name:e.clusterName}),y.push(e))})),(0,f.default)(u,"spec.ingressClassName"),(0,i.default)(u,"spec.template.spec.ingressClassName",v),(0,i.default)(u,"spec.overrides",y),(0,i.default)(u,"spec.placement",b)}a.create(u,c).then((function(){m.default.close(g),p.default.success({content:t("CREATE_SUCCESSFUL")}),o&&o(),_.default.delete("".concat(l,"_create_form"))}))}},module:l,cluster:r,namespace:n,name:"Route",formTemplate:y,isFederated:d,steps:O.default,modal:v.default,store:a},h))}},"router.rules.edit":{on:function(e){var a=e.store,r=e.namespace,n=e.detail,l=e.success,o=(0,c.default)(e,["store","namespace","detail","success"]),u=m.default.open(T({onOk:function(e){a.update(n,e).then((function(){m.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},modal:y.default,detail:n,cluster:n.cluster,store:a,namespace:r},o))}},"fedproject.router.rules.edit":{on:function(e){var a=e.store,r=e.namespace,n=e.detail,l=e.success,o=(0,c.default)(e,["store","namespace","detail","success"]),u=m.default.open(T({onOk:function(e){var r=(0,s.default)(e,"spec.template",{}),o=new Set;Object.values(r.spec).forEach((function(e){(0,d.default)(e)&&(null==e||e.forEach((function(e){var t;return null===(t=e.clusters)||void 0===t?void 0:t.forEach((function(e){return o.add(e)}))})))}));var c=Array.from(o).map((function(e){return{name:e}}));(0,i.default)(e,"spec.placement.clusters",c),a.update(n,e).then((function(){m.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},modal:g.default,detail:n,cluster:n.cluster,namespace:r,store:a},o))}},"router.annotations.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(T({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:E.default,detail:r,store:a},l))}},"router.setting.create":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,s,i,f,d;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=e.store,e.detail,n=e.module,u=e.success,s=e.cluster,i=(0,c.default)(e,["store","detail","module","success","cluster"]),f=S.default[n](),d=m.default.open(T({onOk:function(){var e=(0,o.default)(l.default.mark((function e(a){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={cluster:s},r.create(a,n).then((function(){m.default.close(d),p.default.success({content:t("CREATE_SUCCESSFUL")}),u&&u()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),title:t("CREATE_DOMAIN_NAME"),modal:h.default,formTemplate:f,cluster:s,store:r},i));case 3:case"end":return a.stop()}}),a)})))()}},"router.setting.edit":{on:function(e){return(0,o.default)(l.default.mark((function a(){var r,n,u,s,i,f,d,v;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=e.store,n=e.detail,u=e.module,s=e.success,i=e.cluster,f=(0,c.default)(e,["store","detail","module","success","cluster"]),d=S.default[u],v=m.default.open(T({onOk:function(){var e=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.patch(n,a).then((function(){m.default.close(v),p.default.success({content:t("MODIFY_SUCCESSFUL")}),s&&s()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),title:t("EDIT"),modal:h.default,formTemplate:d,cluster:i,store:r,detail:n},f));case 3:case"end":return a.stop()}}),a)})))()}}};a.default=R},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=n(r(26)),p=n(r(830)),m=r(14),v=r(186),h=n(r(787)),E=r(72);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).nameValidator=function(e,a,r){var l=n.props.isEdit;if(!a||l)return r();var o=n.props.cluster||(0,d.default)(n.props.formTemplate,"cluster");n.props.store.checkName({cluster:o},{name:a}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.domainValidator=function(e,a,r){var l=n.props.isEdit;if(!a||l)return r();var o=n.props.cluster||(0,d.default)(n.props.formTemplate,"cluster");n.props.store.checkName({cluster:o},{fieldSelector:"spec.uniqueDomainPattern=".concat(a)}).then((function(a){if(a.exist)return r({message:t("INVALID_CREATE_DOMAIN_NAME"),field:e.field});r()}))},n.handleOk=function(e){var t=n.props,a=t.onOk,r=t.store,l=t.detail,o=r.list,u=(0,m.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";a(e),u&&o.setSelectRowKeys(c)},n.state={formData:e.isEdit?(0,p.default)((0,m.toJS)(e.detail._originData||e.detail)):e.formTemplate},n}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.isEdit,o=this.state.formData;return i.default.createElement(h.default.Form,{data:o,width:691,title:this.props.title,onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},i.default.createElement(v.Form.Item,{label:t("NAME"),desc:l?"":t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:E.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},i.default.createElement(v.Input,{name:"metadata.name",maxLength:63,disabled:l})),i.default.createElement(v.Form.Item,{label:t("DOMAIN_NAME_TCAP"),desc:l?"":t("CREATE_DOMAIN_NAME_DES"),rules:[{required:!0,message:t("DOMAIN_NAME_EMPTY_DESC")},{pattern:E.PATTERN_HOST,message:t("INVALID_DOMAIN_DESC")},{validator:this.domainValidator}]},i.default.createElement(v.Input,{name:"spec.uniqueDomainPattern",maxLength:63,disabled:l})),i.default.createElement(v.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(v.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}}]),r}(i.default.Component);a.default=g,g.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=r(14),h=r(239),E=r(186),y=n(r(787)),g=n(r(1050)),b=n(r(3374));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var _=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=S(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,v.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formTemplate:(0,v.toJS)(e.detail._originData)},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){(0,v.toJS)(this.props.detail._originData)!==e.detail._originData&&this.setState({formTemplate:(0,v.toJS)(this.props.detail._originData)})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting;return p.default.createElement(y.default.Form,{title:t("EDIT_ANNOTATIONS"),icon:"firewall",visible:a,width:960,data:this.state.formTemplate,onOk:this.handleOk,onCancel:r,isSubmitting:n},p.default.createElement("div",{className:b.default.wrapper},p.default.createElement("div",{className:b.default.formWrapper},p.default.createElement(E.Form.Item,null,p.default.createElement(g.default,{name:"metadata.annotations",hiddenKeys:globals.config.preservedAnnotations,addText:t("ADD")})))))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={detail:{},isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=_},function(e,t,a){e.exports={wrapper:"_1Krvo8pJnzz9dd6tFsz7bY",formWrapper:"_313r2ZWWe5GzJhGz_CNWWG"}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(31),r(6),r(84),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(31),r(6),r(84),r(42),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(26)),m=n(r(135)),v=n(r(63)),h=n(r(787)),E=n(r(1329)),y=n(r(3376));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleOk=function(){var e=t.state.subRoute;if(e.onSave)return e.onSave((function(){t.setState({subRoute:{}})}));var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=t.state.formTemplate.Ingress,u=n.list,c=(0,d.toJS)(u.selectedRowKeys).filter((function(e){return e!==l.uid}));r(o),u.setSelectRowKeys(c)},t.handleCancel=function(){var e=t.state.subRoute;if(e.onCancel)return e.onCancel(),void t.setState({subRoute:{}});(0,t.props.onCancel)()},t.form=i.default.createRef(),t.state={subRoute:{},formTemplate:t.getFormTemplate((0,d.toJS)(e.detail._originData))},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,d.toJS)(this.props.detail._originData)!==e.detail._originData&&this.setState({formTemplate:this.getFormTemplate((0,d.toJS)(this.props.detail._originData))})}},{key:"getFormTemplate",value:function(e){var t=(0,m.default)(e),a=(0,p.default)(t,"spec.tls",[]),r=(0,p.default)(t,"spec.rules",[]);return a.length>0&&r.length>0&&r.forEach((function(e){var t=a.find((function(t){return t.hosts&&t.hosts.includes(e.host)}));t?(e.protocol="https",e.secretName=t.secretName):e.protocol="http"})),{Ingress:t}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.cluster,n=e.isSubmitting,l=e.namespace,o=this.state,u=o.subRoute,c=o.formTemplate;return i.default.createElement(h.default,{width:960,title:t("EDIT_ROUTING_RULES"),icon:"firewall",onOk:this.handleOk,okText:t("OK"),cancelText:(0,v.default)(u)?null:t("PREVIOUS"),onCancel:this.handleCancel,visible:a,isSubmitting:n},i.default.createElement("div",{className:y.default.wrapper},i.default.createElement(E.default,{module:"ingresses",formRef:this.form,formTemplate:c,cluster:r,namespace:l})))}}]),r}(i.default.Component);b.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},b.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},b.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func};var S=b;a.default=S},function(e,t,a){e.exports={wrapper:"_2wf3cNZWhIeqht7bbNiU00"}},function(e,a,r){"use strict";r(15);var n=r(20);r(31),r(6),r(84),r(4),r(23),r(17),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(31),r(6),r(84),r(42),r(4),r(23),r(57),r(17),r(85),r(7);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(26)),m=n(r(135)),v=n(r(63)),h=n(r(806)),E=n(r(787)),y=n(r(1329)),g=n(r(3378));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleOk=function(){var e=t.state.subRoute;if(e.onSave)return e.onSave((function(){t.setState({subRoute:{}})}));(0,t.props.onOk)(t.state.formTemplate.Ingress)},t.handleCancel=function(){var e=t.state.subRoute;if(e.onCancel){var a=e.onCancel();if(!a)return;return a(),void t.setState({subRoute:{}})}(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={subRoute:{},formTemplate:t.getFormTemplate((0,d.toJS)(e.detail._originData))},t}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){(0,h.default)((0,d.toJS)(this.props.detail._originData),(0,d.toJS)(e.detail._originData))||this.setState({formTemplate:this.getFormTemplate((0,d.toJS)(this.props.detail._originData))})}},{key:"getFormTemplate",value:function(e){var t=(0,m.default)(e),a=(0,p.default)(t,"spec.tls",[]),r=(0,p.default)(t,"spec.rules",[]);return a.length>0&&r.length>0&&r.forEach((function(e){var t=a.find((function(t){return t.hosts&&t.hosts.includes(e.host)}));t?(e.protocol="https",e.secretName=t.secretName):e.protocol="http"})),{Ingress:t}}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.cluster,n=e.isSubmitting,l=e.isFederated,o=e.projectDetail,u=e.detail,c=this.state,s=c.subRoute,f=c.formTemplate;return i.default.createElement(E.default,{width:960,title:t("EDIT_ROUTING_RULES"),icon:"firewall",onOk:this.handleOk,okText:t("OK"),cancelText:(0,v.default)(s)?null:t("PREVIOUS"),onCancel:this.handleCancel,visible:a,isSubmitting:n},i.default.createElement("div",{className:g.default.wrapper},i.default.createElement(y.default,{module:"ingresses",formRef:this.formRef,formTemplate:f,cluster:r,detail:u,isFederated:l,projectDetail:o})))}}]),r}(i.default.Component);S.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},S.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},S.childContextTypes={registerSubRoute:f.default.func,resetSubRoute:f.default.func};var _=S;a.default=_},function(e,t,a){e.exports={wrapper:"_2SvyqGEvoXG9IXqxRtZsU7"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(241)),f=n(r(74)),d=n(r(240)),p=n(r(787)),m=n(r(825)),v=n(r(3380)),h=r(72),E=n(r(435)),y=n(r(901)),g=n(r(3389)),b=n(r(3390));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={"secret.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,i=e.module,f=e.isFederated,v=e.success,b=(e.prevDefault,(0,c.default)(e,["store","cluster","namespace","module","isFederated","success","prevDefault"])),S=h.MODULE_KIND_MAP[i],O=(0,u.default)({},S,E.default[i]({namespace:n}));f&&Object.keys(O).forEach((function(e){O[e]=E.default.federated({data:O[e],clusters:b.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var C,T=p.default.open(_({onOk:(C=(0,o.default)(l.default.mark((function e(o){var u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,s.default)(o,S)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,R(a,u,{cluster:r,namespace:n||(0,s.default)(u,"metadata.namespace")});case 5:a.create(u,{cluster:r,namespace:n||(0,s.default)(u,"metadata.namespace")}).then((function(){p.default.close(T),d.default.success({content:t("CREATE_SUCCESSFUL")}),v&&v(u),y.default.delete("".concat(i,"_create_form"))}));case 6:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),module:i,cluster:r,namespace:n,name:S,isFederated:f,formTemplate:O,steps:g.default,modal:m.default,store:a},b))}},"secret.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=(0,c.default)(e,["store","detail","success"]),i=p.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.default)(a,"metadata.resourceVersion",n.resourceVersion),s.isFederated&&((0,f.default)(a,"apiVersion",r.version),(0,f.default)(a,"kind",r.secretKind)),e.next=4,R(r,a,{cluster:n.cluster,namespace:n.namespace});case 4:r.update(n,a).then((function(){p.default.close(i),d.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u()}));case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,modal:v.default,disableSelect:!0},s))}},"secret.default":{on:function(e){var a,r=e.store,n=e.detail,u=e.cluster,s=e.success,i=(0,c.default)(e,["store","detail","cluster","success"]),f=p.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(r,{cluster:u,namespace:n.namespace});case 2:return a=e.sent,e.next=5,r.setDefault({cluster:u,namespace:n.namespace,name:n.name},{cluster:u,namespace:a.namespace,name:a.name});case 5:p.default.close(f),d.default.success({content:t("SET_DEFAULT_REGISTRY_SUCCESSFUL")}),s&&s();case 8:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r,detail:n,modal:b.default},i))}}};function C(e,t){return T.apply(this,arguments)}function T(){return(T=(0,o.default)(l.default.mark((function e(t,a){var r,n,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.cluster,n=a.namespace,e.next=3,t.fetchList({cluster:r,namespace:n,annotation:"secret.kubesphere.io/is-default-class=true"});case 3:return o=e.sent,e.abrupt("return",(null==o?void 0:o.find((function(e){return e.isDefault})))||{});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a){return D.apply(this,arguments)}function D(){return(D=(0,o.default)(l.default.mark((function e(t,a,r){var n,o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.cluster,o=r.namespace,e.next=3,C(t,{cluster:n,namespace:o});case 3:if(u=e.sent,"true"!==(0,s.default)(a,'metadata.annotations["secret.kubesphere.io/is-default-class"]')||!u.name||u.name===a.metadata.name){e.next=7;break}return e.next=7,t.patch((0,i.default)(u,["cluster","namespace","name"]),{metadata:{annotations:{"secret.kubesphere.io/is-default-class":"false"}}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.default=O},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(1)),p=r(14),m=n(r(63)),v=n(r(787)),h=n(r(828)),E=n(r(1747)),y=n(r(3388));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=S(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).registerSubRoute=function(e,a){t.setState({subRoute:{onSave:e,onCancel:a}})},t.resetSubRoute=function(){t.setState({subRoute:{}})},t.handleSubFormSave=function(){var e=t.state.subRoute;e&&e.onSave&&e.onSave((function(){t.setState({subRoute:{}})}))},t.handleSubFormCancel=function(){var e=t.state.subRoute;e&&e.onCancel&&(e.onCancel(),t.setState({subRoute:{}}))},t.handleOk=function(){(0,t.props.onOk)(t.state.formTemplate)},t.state={formTemplate:t.getFormTemplate(e.detail),subRoute:{}},t}return(0,u.default)(r,[{key:"getChildContext",value:function(){return{registerSubRoute:this.registerSubRoute,resetSubRoute:this.resetSubRoute}}}]),(0,u.default)(r,[{key:"getFormTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,p.toJS)(e._originData);return b({},t)}},{key:"renderSaveBar",value:function(){var e=this.state.subRoute;return(0,m.default)(e)?null:f.default.createElement(h.default,{className:y.default.confirm,onOk:this.handleSubFormSave,onCancel:this.handleSubFormCancel})}},{key:"render",value:function(){var e=this.state,a=e.subRoute,r=e.formTemplate,n=this.props,l=n.visible,o=n.isSubmitting,u=n.onCancel,c=n.isFederated,s=n.disableSelect,i=n.detail,d=n.isEdgeWize;return f.default.createElement(v.default,{width:960,title:t("EDIT_SETTINGS"),icon:"pen",bodyClassName:y.default.body,onOk:this.handleOk,okText:t("OK"),onCancel:u,visible:l,disableSubmit:!(0,m.default)(a),isSubmitting:o},f.default.createElement(E.default,{formTemplate:r,isFederated:c,cluster:i.cluster,mode:"edit",isEdgeWize:d,disableSelect:s}),this.renderSaveBar())}}]),r}(f.default.Component);a.default=_,_.propTypes={isEdgeWize:d.default.bool,detail:d.default.object,visible:d.default.bool,onOk:d.default.func,onCancel:d.default.func,isSubmitting:d.default.bool,disableSelect:d.default.bool},_.defaultProps={detail:{},visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1,disableSelect:!1,isEdgeWize:!1},_.childContextTypes={registerSubRoute:d.default.func,resetSubRoute:d.default.func}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(98),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(98),r(4),r(23),r(57),r(17);var l=n(r(96)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(189)),p=n(r(812)),m=r(440),v=n(r(3382));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(r,e);var a=h(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).handleDelete=function(t){return function(){var a=e.props,r=a.value;(0,a.onChange)((0,d.default)(r,t))}},e.handleEdit=function(t){return function(){(0,e.props.onEdit)(t)}},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this,a=this.props,r=a.value,n=a.onAdd;return f.default.createElement(p.default,null,Object.entries(r).map((function(t){var a=(0,l.default)(t,2),r=a[0],n=a[1];return f.default.createElement(p.default.Item,{key:r,icon:"key",title:r,description:(0,m.safeAtob)(n)||"-",onDelete:e.handleDelete(r),onEdit:e.handleEdit(r)})})),f.default.createElement(p.default.Add,{title:t("ADD_DATA_TCAP"),description:t("ADD_DATA_DESC"),onClick:n}))}},{key:"render",value:function(){return f.default.createElement("div",{className:v.default.wrapper},this.renderContent())}}]),r}(f.default.Component);a.default=E,E.defaultProps={value:{}}},function(e,t,a){e.exports={wrapper:"-jwoKUpfEA_iKuklHFsVt"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(972)),p=n(r(1)),m=r(186),v=r(881),h=r(440),E=n(r(3384));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.state={formData:e.getFormData()},e.registerForm=function(){var t=e.context.registerSubRoute,a=e.props.onCancel;t&&t(e.handleSubmit,a)},e.handleGoBack=function(){var t=e.context.resetSubRoute;t&&t(),e.props.onCancel()},e.handleSubmit=function(t){var a=e.props.onOk,r=e.formRef&&e.formRef.current;r&&r.validate((function(){var e=r.getData(),n=e.key,o=e.value;a((0,l.default)({},(0,d.default)(n),(0,h.safeBtoa)(o))),t&&t()}))},e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){this.registerForm()}},{key:"getFormData",value:function(){var e=this.props,t=e.detail,a=e.selectKey;return{key:a||"",value:(0,h.safeAtob)(t[a]||"")}}},{key:"render",value:function(){var e=this.props,a=e.detail,r=e.selectKey;return f.default.createElement("div",{className:E.default.wrapper},f.default.createElement("div",{className:"h6"},f.default.createElement("a",{className:"custom-icon",onClick:this.handleGoBack},f.default.createElement(v.ReactComponent,null)),a[r]?t("EDIT_DATA_TCAP"):t("ADD_DATA_TCAP")),f.default.createElement("div",{className:E.default.formWrapper},f.default.createElement(m.Form,{data:this.state.formData,ref:this.formRef},f.default.createElement(m.Form.Item,{label:t("DATA_KEY")},f.default.createElement(m.Input,{name:"key"})),f.default.createElement(m.Form.Item,{label:t("DATA_VALUE")},f.default.createElement(m.TextArea,{name:"value",rows:4,autoResize:!0})))))}}]),r}(f.default.Component);a.default=g,g.defaultProps={detail:{},selectKey:""},g.contextTypes={registerSubRoute:p.default.func,resetSubRoute:p.default.func}},function(e,t,a){e.exports={wrapper:"_1UlfrF0XQcQAvMsWWcTR1w",formWrapper:"_1Nq08DNhRDjFIGATy_iM_m",confirm:"_1BpCYDDpzOGUjDrFZPDMRN"}},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var l=n(a(36)),o=n(a(37)),u=n(a(55)),c=n(a(56)),s=n(a(51)),i=n(a(26)),f=r(a(0)),d=a(440);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=(0,i.default)(t,"target.value",t);return(0,e.props.onChange)((0,d.safeBtoa)(a))},e}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.children,r=e.value;return f.default.cloneElement(a,{name:t,value:(0,d.safeAtob)(r||""),onChange:this.handleChange})}}]),a}(f.Component);t.default=m},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(5),r(11),r(6),r(97),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(111),r(64),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(28),r(97),r(191),r(42),r(16),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(111),r(64),r(7);var o=n(r(43));r(41);var u,c=n(r(44)),s=n(r(30)),i=n(r(36)),f=n(r(37)),d=n(r(55)),p=n(r(56)),m=n(r(51)),v=n(r(26)),h=n(r(800)),E=l(r(0)),y=r(239),g=r(14),b=r(186),S=n(r(1685)),_=r(52),O=r(440),C=n(r(851)),T=n(r(438)),R=n(r(955)),D=n(r(933)),N=n(r(3387)),k=n(r(1748));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,p.default)(this,a)}}var w=(0,y.observer)(u=function(e){(0,d.default)(r,e);var a=A(r);function r(){var e;(0,i.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).getStateFromProps=function(e){var t=(0,_.safeParseJSON)(e),a=Object.keys((0,v.default)(t,"auths",{}))[0]||"";return{url:a,username:(0,v.default)(t,'auths["'.concat(a,'"].username'),""),password:(0,v.default)(t,'auths["'.concat(a,'"].password'),""),email:(0,v.default)(t,'auths["'.concat(a,'"].email'),"")}},e.store=e.props.isEdgeWize?new D.default:new C.default,e.hostStore=e.props.isEdgeWize?new R.default:new T.default,e.state=P(P({},e.getStateFromProps(e.props.value)),{},{isValidating:!1,default:!1}),e.triggerChange=(0,h.default)((function(){var t=e.props,a=t.onChange,r=t.onChangeState,n=e.state,l=n.url,o=n.username,u=n.password,c=n.email;e.setState({errorMsg:""}),l&&o&&u&&(a(JSON.stringify({auths:(0,s.default)({},l,{username:o,password:u,email:c,auth:(0,O.safeBtoa)("".concat(o,":").concat(u))})})),r(Math.random()))}),200),e.getHostName=(0,c.default)(o.default.mark((function t(){var a,r,n,l,u=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},t.next=3,e.hostStore.fetchList(P(P({},n),{},{labelSelector:"cluster-role.kubesphere.io/host=",limit:-1}));case 3:return l=(0,g.toJS)(e.hostStore.list.data).filter((function(e){return Object.keys(e.labels).some((function(e){return e.endsWith("cluster-role.kubesphere.io/host")}))})),t.abrupt("return",null!==(a=null===(r=l[0])||void 0===r?void 0:r.name)&&void 0!==a?a:"host");case 5:case"end":return t.stop()}}),t)}))),e.handleValidate=(0,c.default)(o.default.mark((function t(){var a,r,n,l,u,c,s;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.cluster,n=a.isFederated,l=a.namespace,u=a.screatName,c=a.fedFormTemplate,!e.validate()){t.next=23;break}if(e.setState({isValidating:!0}),t.t1=e.store,t.t2=c,t.t3=u,t.t4=l,!n){t.next=13;break}return t.next=10,e.getHostName();case 10:t.t5=t.sent,t.next=14;break;case 13:t.t5=r;case 14:return t.t6=t.t5,t.t7={fedFormTemplate:t.t2,name:t.t3,namespace:t.t4,cluster:t.t6},t.next=18,t.t1.validateImageRegistrySecret.call(t.t1,t.t7);case 18:if(t.t0=t.sent,t.t0){t.next=21;break}t.t0={};case 21:s=t.t0,e.setState({validate:s.validate||!1,reason:s.reason||"",isValidating:!1});case 23:case"end":return t.stop()}}),t)}))),e.handleUrlChange=function(t){e.setState({url:t},e.triggerChange),"http"===t.replace(/^(http(s)?:\/\/)?(.*)$/,"$1").replace("://","")&&e.props.onChangeSkipVerify(!0)},e.handleUserNameChange=function(t){e.setState({username:t.target.value},e.triggerChange)},e.handleEmailChange=function(t){e.setState({email:t.target.value},e.triggerChange)},e.handlePasswordChange=function(t){e.setState({password:t.target.value},e.triggerChange)},e}return(0,f.default)(r,[{key:"validate",value:function(){return!!(this.state.url&&this.state.username&&this.state.password)||(this.setState({errorMsg:t("IMAGE_REGISTRY_REQUIRED_DESC")}),!1)}},{key:"renderTip",value:function(){var e=this.state,a=e.errorMsg,r=e.validate,n=e.reason;return a?E.default.createElement(b.Alert,{className:"margin-t12",type:"error",message:a}):r?E.default.createElement(b.Alert,{type:"info",icon:"success",message:t("REGISTRY_SECRET_VER_SUC")}):n?E.default.createElement(b.Alert,{type:"error",title:t("REGISTRY_SECRET_VER_ERR"),message:n}):E.default.createElement(b.Alert,{type:"info",message:t("IMAGE_REGISTRY_VALIDATE_TIP")})}},{key:"renderDefault",value:function(){var e=this.props,a=e.isDefault,r=e.onChangeDefault;return E.default.createElement("div",{className:k.default.defaultContainer},E.default.createElement(b.Toggle,{checed:a,onChange:r,defaultChecked:a}),E.default.createElement("div",null,E.default.createElement("div",{className:k.default.title},t("SET_AS_DEFAULT")),E.default.createElement("div",{className:k.default.desc},t("SET_AS_DEFAULT_REGISTRY_DESC"))))}},{key:"render",value:function(){var e=this.state,a=e.url,r=e.username,n=e.password,l=e.email,o=e.isValidating,u=this.props,c=u.onChangeSkipVerify,s=u.isSkipVerify;return E.default.createElement("div",null,E.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),E.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),E.default.createElement(b.Columns,null,E.default.createElement(b.Column,null,E.default.createElement(N.default,{label:t("REGISTRY_ADDRESS_TCAP"),desc:t("REGISTRY_ADDRESS_TIP"),required:!0},E.default.createElement(S.default,{value:a,onChange:this.handleUrlChange}))),E.default.createElement(b.Column,null,E.default.createElement(N.default,{label:t("USERNAME"),required:!0},E.default.createElement(b.Input,{value:r,onChange:this.handleUserNameChange,autoComplete:"nope"})))),!this.isHttp&&E.default.createElement(b.Columns,null,E.default.createElement(b.Column,{className:k.default.skip_verify},E.default.createElement(b.Checkbox,{checked:s,onChange:c},t("SKIP_VERIFY")))),E.default.createElement(b.Columns,null,E.default.createElement(b.Column,null,E.default.createElement(N.default,{label:t("EMAIL")},E.default.createElement(b.Input,{value:l,onChange:this.handleEmailChange}))),E.default.createElement(b.Column,null,E.default.createElement(N.default,{label:t("PASSWORD"),required:!0},E.default.createElement("div",{className:k.default.password},E.default.createElement(b.InputPassword,{type:"password",value:n,onChange:this.handlePasswordChange,autoComplete:"new-password"}),E.default.createElement(b.Button,{onClick:this.handleValidate,loading:o},t("VALIDATE")))))),this.renderDefault(),E.default.createElement("div",{className:k.default.tip},this.renderTip()))}},{key:"isHttp",get:function(){return"http"===this.state.url.replace(/^(http(s)?:\/\/)?(.*)$/,"$1").replace("://","")}}]),r}(E.Component))||u;a.default=w},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var l=n(a(36)),o=n(a(37)),u=n(a(55)),c=n(a(56)),s=n(a(51)),i=r(a(0)),f=n(a(1748));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var p=function(e){(0,u.default)(a,e);var t=d(a);function a(){return(0,l.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.desc,r=e.required,n=e.children;return i.default.createElement("div",{className:f.default.wrapper},t&&i.default.createElement("label",{className:f.default.label,htmlFor:name},t,r?i.default.createElement("span",{className:f.default.requiredIcon},"*"):null),i.default.createElement("div",{className:f.default.control},n,a&&i.default.createElement("div",{className:f.default.desc},a)))}}]),a}(i.Component);t.default=p},function(e,t,a){e.exports={body:"ok_C6WKg4I2-lgwUuNM-G",confirm:"_3kOQ-5ctupyU0pPCq4MU3E"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(974)),o=r(a(1747)),u=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"DATA_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3391));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.onOk,l=e.isSubmitting;return i.default.createElement(p.default,{width:520,onOk:n,onCancel:r,visible:a,okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:l,hideHeader:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"information",color:{primary:"#ffffff",secondary:"#41b1ea"},size:18}),"  ",t("SET_AS_DEFAULT")),i.default.createElement("p",null,t("SET_AS_DEFAULT_REGISTRY_DESC"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"twiD94s0MsB7Hfd8Ws7nW"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(84),r(16),r(9),r(13),r(10),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(31),r(6),r(84),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(63)),f=n(r(74)),d=r(14),p=n(r(240)),m=n(r(787)),v=n(r(825)),h=n(r(3393)),E=n(r(3395)),y=n(r(3398)),g=n(r(1625)),b=n(r(3402)),S=r(72),_=r(3404),O=n(r(901)),C=n(r(435)),T=n(r(1334)),R=n(r(1179)),D=n(r(1389));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={"service.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,o=e.success,u=(0,c.default)(e,["store","cluster","namespace","module","success"]),s=S.MODULE_KIND_MAP[l],i=m.default.open(k({onOk:function(e){var u=e;u&&(s&&1===Object.keys(e).length&&e[s]&&(u=e[s]),a.create(u,{cluster:r,namespace:n}).then((function(){m.default.close(i),p.default.success({content:t("CREATE_SUCCESSFUL")}),o&&o(),O.default.delete("".concat(l,"_create_form"))})))},cluster:r,namespace:n,modal:h.default,store:a},u))}},"service.simple.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,l=e.module,o=e.success,i=(0,c.default)(e,["store","cluster","namespace","module","success"]),f=S.MODULE_KIND_MAP[l],d=(0,u.default)({},f,C.default[l]({namespace:n})),h=m.default.open(k({onOk:function(e){var u=(0,s.default)(e,f);u&&a.create(u,{cluster:r,namespace:n||(0,s.default)(u,"metadata.namespace")}).then((function(){m.default.close(h),p.default.success({content:t("CREATE_SUCCESSFUL")}),o&&o(),O.default.delete("".concat(l,"_create_form"))}))},module:l,cluster:r,namespace:n,name:f,formTemplate:d,steps:T.default.simpleservice,modal:v.default,store:a},i))}},"service.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(k({onOk:function(e){a.update(r,e).then((function(){m.default.close(o),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},modal:E.default,detail:r,type:r.type,cluster:r.cluster,store:a},l))}},"service.gateway.edit":{on:function(e){var a=e.store,r=e.detail,n=e.isEdgeWize,l=e.success,o=(0,c.default)(e,["store","detail","isEdgeWize","success"]),u=m.default.open(k({onOk:function(e){a.update(r,e).then((function(){m.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},isEdgeWize:n,modal:y.default,detail:r,store:a},o))}},"fedservice.gateway.edit":{on:function(e){var a=e.store,r=e.cluster,n=e.detail,l=e.resources,o=e.success,u=(0,c.default)(e,["store","cluster","detail","resources","success"]),i=m.default.open(k({onOk:function(e){var l=n.name,u=n.namespace,c=n.template,s=n.overrides,d={},v=s.find((function(e){return e.clusterName===r}));v||(v={clusterName:r,clusterOverrides:[]},s.push(v));v.clusterOverrides=(0,_.getOverrides)(c,e,["metadata.annotations","spec.type","spec.ports"]),(0,f.default)(d,"spec.overrides",s),a.patch({name:l,namespace:u},d).then((function(){m.default.close(i),p.default.success({content:t("UPDATE_SUCCESSFUL")}),o&&o()}))},modal:y.default,detail:(0,s.default)(l,"".concat(r)),store:a},u))}},"service.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=m.default.open(k({onOk:function(){m.default.close(o),p.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()},store:a,modal:b.default,resource:r},l))}},"service.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=(0,c.default)(e,["store","success","rowKey"]),u=(0,d.toJS)(a.list),s=u.data,f=u.selectedRowKeys,v=s.filter((function(e){return f.includes(e[l])}));if(!(0,i.default)(v))var h=m.default.open(k({onOk:function(){m.default.close(h),p.default.success({content:t("DELETED_SUCCESSFULLY")}),r&&r()},modal:b.default,resource:v,store:a},o))}},"service.monitor.edit":{on:function(e){e.store;var t,a=e.cluster,r=e.namespace,n=e.success,u=e.isEdgeWize,d=e.detail,p=(0,c.default)(e,["store","cluster","namespace","success","isEdgeWize","detail"]),v=u?new D.default:new R.default,h=C.default.servicemonitors({name:d.name,namespace:r}),E=m.default.open(k({onOk:(t=(0,o.default)(l.default.mark((function e(t){var o,u;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,s.default)(t,"metadata.name"),e.next=3,v.checkName({name:o,cluster:a,namespace:r});case 3:if(u=e.sent,(0,f.default)(t,"metadata.ownerReferences",[{apiVersion:"v1",kind:"Service",name:d.name,uid:d.uid}]),u.exist){e.next=10;break}return e.next=8,v.create(t,{cluster:a,namespace:r});case 8:e.next=17;break;case 10:if(!(0,i.default)((0,s.default)(t,"spec.endpoints"))){e.next=15;break}return e.next=13,v.delete({name:o,cluster:a,namespace:r});case 13:e.next=17;break;case 15:return e.next=17,v.update({name:o,cluster:a,namespace:r},t);case 17:m.default.close(E),n&&n();case 19:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),isEdgeWize:u,cluster:a,namespace:r,formTemplate:h,detail:d,store:v,modal:g.default},p))}}};a.default=I},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(6),r(18),r(16),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(6),r(18),r(28),r(42),r(16),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(186),v=n(r(74)),h=n(r(787)),E=n(r(825)),y=n(r(1332)),g=n(r(456)),b=n(r(318)),S=n(r(437)),_=n(r(1334)),O=r(52),C=n(r(435)),T=r(982),R=r(72),D=n(r(3394));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var k=function(e){(0,i.default)(r,e);var a=N(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=(0,u.default)(o.default.mark((function e(){var a,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.cluster,e.next=3,t.s2iStore.getS2iSupportLanguage({cluster:a});case 3:r=e.sent,n=t.state.groups.map((function(e){return"b2i"===e.type&&(e.options=r.b2i),"s2i"===e.type&&(e.options=r.s2i),e})),t.setState({groups:n});case 6:case"end":return e.stop()}}),e)}))),t.handleTypeSelect=function(e){t.setState({type:e.currentTarget.dataset.value,s2iType:e.currentTarget.dataset.type})},t.handleWorkloadModuleChange=function(e){t.setState({workloadModule:e})},t.s2iStore=new g.default,t.workloadStore=new b.default,t.showDevOps=!1,t.state={type:"",workloadModule:"deployments",groups:[{name:"SELECT_SERVICE_TYPE",description:"SELECT_SERVICE_TYPE_DESC",options:[{icon:"backup",name:"STATELESS_SERVICE",value:"statelessservice"},{icon:"stateful-set",name:"STATEFUL_SERVICE",value:"statefulservice"}].concat((0,l.default)(t.props.isFederated?[]:[{icon:"ip",name:"EXTERNAL_SERVICE",value:"externalservice"}]))}].concat((0,l.default)(t.showDevOps?[{name:"SERVICE_FROM_CODE",type:"s2i",description:"SERVICE_FROM_CODE_DESC",options:R.S2I_SUPPORTED_TYPES},{name:"SERVICE_FROM_ARTIFACT",type:"b2i",description:"SERVICE_FROM_ARTIFACT_DESC",options:R.B2I_SUPPORTED_TYPES}]:[]),(0,l.default)(t.props.isFederated?[]:[{name:"CUSTOMIZE_SERVICE",description:"CUSTOMIZE_SERVICE_DESC",options:[{icon:"clock",name:"SPECIFY_WORKLOAD",value:"simpleservice"},{icon:"coding",name:"EDIT_YAML",value:"yaml"}]}]))},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.showDevOps&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.visible;this.props.visible||t===e.visible||this.setState({type:"",workloadModule:"deployments"})}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:D.default.header},p.default.createElement("div",{className:"h4 margin-b12"},t("CREATE_SERVICE")),p.default.createElement("p",null,t("CREATE_SERVICE_DESC")),p.default.createElement("img",{src:"/assets/create-service.svg",alt:""}))}},{key:"renderGroups",value:function(){var e=this;return p.default.createElement("div",{className:D.default.groups},this.state.groups.map((function(a){return p.default.createElement("div",{key:a.name,className:D.default.group},p.default.createElement("div",{className:D.default.title},p.default.createElement("div",null,t(a.name)),p.default.createElement("p",null,t(a.description))),p.default.createElement("ul",null,a.options&&a.options.map((function(r){return p.default.createElement("li",{key:r.value||r,"data-value":r.value||r,"data-type":a.type,onClick:e.handleTypeSelect},p.default.createElement("div",null,p.default.createElement(m.Icon,{name:r.icon||(0,T.getLanguageIcon)(r,"radio"),size:48})),p.default.createElement("div",null,t(r.name||r.toUpperCase())))}))))})))}},{key:"renderSubModal",value:function(e,a){var r,n=this.props,o=n.store,u=n.visible,c=n.onOk,s=n.onCancel,i=n.cluster,f=n.namespace,d=n.isFederated,m=n.projectDetail,h=n.isSubmitting;if(a){var g="s2i"===a,b={S2i:C.default.s2ibuilders({namespace:f,isS2i:g,languageType:e}),Deployment:C.default.deployments({namespace:f}),Service:C.default.services({namespace:f})},T=g?_.default.s2iservice:_.default.b2iservice,R=g?t("LANGUAGE_TYPE_VALUE",{value:t(e.toUpperCase())}):t("ARTIFACT_TYPE_VALUE",{value:t(e.toUpperCase())});return this.workloadStore.setModule("deployments"),p.default.createElement(E.default,{icon:e,title:g?t("SERVICE_FROM_CODE"):t("SERVICE_FROM_ARTIFACT"),description:R,width:960,module:this.state.workloadModule,store:this.workloadStore,name:t("STATELESS_SERVICE"),visible:u,steps:T,cluster:i,namespace:f,formTemplate:b,isSubmitting:h,projectDetail:m,updateModule:this.handleWorkloadModuleChange,onOk:c,onCancel:s,noCodeEdit:!0})}switch(e){case"statelessservice":var D={Deployment:C.default.deployments({namespace:f}),Service:C.default.services({namespace:f})};d&&Object.keys(D).forEach((function(e){D[e]=C.default.federated({data:D[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,v.default)(D,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("deployments");var N=this.workloadStore,k=(0,l.default)(_.default[e]);d&&(k.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,O.withProps)(y.default,{withService:!0})}),N=new S.default(this.workloadStore)),r=p.default.createElement(E.default,{width:960,module:"deployments",store:N,name:t("STATELESS_SERVICE"),visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:k,formTemplate:D,isSubmitting:h,onOk:c,onCancel:s});break;case"statefulservice":var I={StatefulSet:C.default.statefulsets({namespace:f}),Service:C.default.services({namespace:f})};d&&Object.keys(I).forEach((function(e){I[e]=C.default.federated({data:I[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})})),(0,v.default)(I,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),this.workloadStore.setModule("statefulsets");var P=this.workloadStore,A=(0,l.default)(_.default[e]);d&&(A.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,O.withProps)(y.default,{withService:!0})}),P=new S.default(this.workloadStore)),r=p.default.createElement(E.default,{width:960,module:"statefulsets",store:P,name:t("STATEFUL_SERVICE"),visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:A,formTemplate:I,isSubmitting:h,onOk:c,onCancel:s});break;case"simpleservice":case"externalservice":var w={Service:C.default.services({namespace:f})};d&&Object.keys(w).forEach((function(e){w[e]=C.default.federated({data:w[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})}));var M="externalservice"===e?t("CREATE_EXTERNAL_SERVICE"):t("SPECIFY_WORKLOAD_TO_CREATE_SERVICE"),L="externalservice"===e?t("CREATE_EXTERNAL_SERVICE_DESC"):t("SPECIFY_WORKLOAD_DESC");"externalservice"===e&&(0,v.default)(w,'Service.metadata.annotations["kubesphere.io/serviceType"]',e),r=p.default.createElement(E.default,{width:960,module:"services",store:o,title:M,description:L,visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,steps:_.default[e],formTemplate:w,isSubmitting:h,onOk:c,onCancel:s});break;case"yaml":var j={Service:C.default.services({namespace:f})};d&&Object.keys(j).forEach((function(e){j[e]=C.default.federated({data:j[e],clusters:m.clusters.map((function(e){return e.name})),kind:e})}));var x=t("EDIT_YAML_TO_CREATE_SERVICE");r=p.default.createElement(E.default,{width:960,module:"services",store:o,title:x,visible:u,cluster:i,namespace:f,isFederated:d,projectDetail:m,formTemplate:j,isSubmitting:h,onOk:c,onCancel:s,onlyCode:!0})}return r}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=this.state,n=r.type,l=r.s2iType;return n?this.renderSubModal(n,l):p.default.createElement(h.default,{bodyClassName:D.default.body,width:960,visible:t,onCancel:a,hideHeader:!0},this.renderHeader(),this.renderGroups())}}]),r}(p.default.Component);a.default=k},function(e,t,a){e.exports={body:"cbNCVjWQhnReqPddm4gee",header:"_3z9Nw7EpOrYUdcFPCf6UQQ",groups:"_2jTLPN_SuLOVUctqK30Adg",group:"Hbk366BfbfqDSt72frwoc",title:"_1k3IuI_W90TycEVQwt3NcK"}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(787)),m=n(r(1337)),v=r(72),h=n(r(3396)),E=n(r(3397));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var g=function(e){(0,u.default)(r,e);var a=y(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props,a=e.onOk,r=e.store,n=e.detail,l=t.formRef.current,o=r.list,u=(0,d.toJS)(o.selectedRowKeys).filter((function(e){return e!==n.uid}));l&&l.validate((function(){a(l.getData()),o.setSelectRowKeys(u)}))},t.handleCancel=function(){(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={formTemplate:(0,d.toJS)(e.detail._originData)},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.detail;t._originData!==e.detail._originData&&this.setState({formTemplate:(0,d.toJS)(t._originData)})}},{key:"renderServiceSettings",value:function(){var e=this.props,t=e.cluster,a=e.type;return i.default.createElement(h.default,{formRef:this.formRef,formTemplate:this.state.formTemplate,onCancel:this.resetState,cluster:t,type:v.SERVICE_TYPES_VALUE[a]})}},{key:"renderExternalName",value:function(){return i.default.createElement(m.default,{formRef:this.formRef,formTemplate:this.state.formTemplate,onCancel:this.resetState})}},{key:"renderEmpty",value:function(){return i.default.createElement("p",{className:E.default.empty},t("UNKNOWN_SERVICE_TYPE"))}},{key:"renderForm",value:function(){var e=null;switch(this.props.type){case v.SERVICE_TYPES.VirtualIP:case v.SERVICE_TYPES.Headless:e=this.renderServiceSettings();break;case v.SERVICE_TYPES.ExternalName:e=this.renderExternalName();break;default:e=this.renderEmpty()}return e}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.type;return i.default.createElement(p.default,{width:1162,title:t("EDIT_SERVICE"),onOk:n!==v.SERVICE_TYPES.Unknown?this.handleOk:null,onCancel:this.handleCancel,visible:a,isSubmitting:r},this.renderForm())}}]),r}(i.default.Component);a.default=g,g.propTypes={visible:f.default.bool,type:f.default.string,detail:f.default.object,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},g.defaultProps={visible:!1,type:"",detail:{},onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1338)),d=r(186),p=n(r(816));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var v=function(e){(0,u.default)(r,e);var a=m(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderTypeSelect",value:function(){return i.default.createElement(d.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(p.default,{className:"margin-b12",value:this.props.type,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}}]),r}(f.default);a.default=v},function(e,t,a){e.exports={empty:"_1iYB_RtQyygADkaCOPvMXp"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(6),r(18),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(6),r(18),r(42),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(61)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(26)),m=n(r(74)),v=n(r(242)),h=n(r(189)),E=n(r(830)),y=n(r(0)),g=r(14),b=n(r(1)),S=r(186),_=n(r(787)),O=n(r(1050)),C=n(r(3399)),T=r(72),R=n(r(1336)),D=n(r(1616)),N=r(1335),k=n(r(3401));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,i.default)(n,e);var a,r=I(n);function n(e){var a;return(0,c.default)(this,n),(a=r.call(this,e)).openELBStore=a.props.isEdgeWize?new D.default:new R.default,a.checkOpenELBStatus=(0,u.default)(o.default.mark((function e(){var t,r,n,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.detail,r=t.cluster,n=t.namespace,e.next=3,a.openELBStore.isActive({clusters:[r],namespace:n});case 3:(l=e.sent)||a.setState({openELBOpened:l});case 5:case"end":return e.stop()}}),e)}))),a.providerOptionRenderer=function(e){return y.default.createElement("div",{className:k.default.selectOption},y.default.createElement(S.Icon,{className:"margin-r8",name:e.icon,type:"light",size:20}),y.default.createElement("span",{className:k.default.text},e.label),e.disabled&&y.default.createElement(S.Tooltip,{content:t("OPENELB_NOT_READY")},y.default.createElement(S.Icon,{name:"question",size:"16"})))},a.handleProvideChange=function(e){a.setState({provider:e})},a.handleTypeChange=function(e){if("LoadBalancer"!==e&&((0,v.default)(a.state.formTemplate,"metadata.annotations['kubesphere.io/annotations']"),Object.keys(globals.config.loadBalancerDefaultAnnotations).forEach((function(e){(0,v.default)(a.state.formTemplate,'metadata.annotations["'.concat(e,'"]'))})),a.providerOptions.forEach((function(e){(0,v.default)(a.state.formTemplate,'metadata.annotations["'.concat(e,'"]'))})),"ClusterIP"===e)){var t=(0,p.default)(a.state.formTemplate,"spec.ports",[]).map((function(e){return(0,h.default)(e,["nodePort"])}));(0,m.default)(a.state.formTemplate,"spec.ports",t)}a.setState({type:e})},a.optionRenderer=function(e){return y.default.createElement("div",{className:k.default.option},y.default.createElement("div",null,e.label),y.default.createElement("p",null,e.desc))},a.handleOk=function(e){var t=a.props,r=t.onOk,n=t.store,l=t.detail,o=n.list,u=(0,g.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},a.state={type:(0,p.default)((0,g.toJS)(e.detail._originData),"spec.type"),formTemplate:(0,E.default)((0,g.toJS)(e.detail._originData)),openELBOpened:!0,provider:"QingCloud Kubernetes Engine"},a}return(0,s.default)(n,[{key:"componentDidMount",value:(a=(0,u.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkOpenELBStatus();case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,o=this.state,u=o.type,c=o.formTemplate,s=o.provider,i=o.openELBOpened,f=[].concat((0,l.default)(T.CLUSTER_PROVIDERS),[{label:"OpenELB",value:"OpenELB",icon:"kubernetes",disabled:!i,tip:""}]);return y.default.createElement(_.default.Form,{width:1162,title:t("EDIT_EXTERNAL_ACCESS"),data:c,onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},y.default.createElement("div",null,y.default.createElement(C.default,{title:t("EXTERNAL_ACCESS"),desc:t("SERVICE_EXTERNAL_ACCESS_DESC")}),y.default.createElement("div",{className:k.default.wrapper},y.default.createElement("div",{className:k.default.contentWrapper},y.default.createElement(S.Columns,null,y.default.createElement(S.Column,null,y.default.createElement(S.Form.Item,{label:t("ACCESS_MODE"),className:k.default.types},y.default.createElement(S.Select,{name:"spec.type",options:this.accessModes,onChange:this.handleTypeChange,optionRenderer:this.optionRenderer}))),"LoadBalancer"===u&&y.default.createElement(S.Column,null,y.default.createElement(S.Form.Item,{label:t("LOAD_BALANCER_PROVIDER")},y.default.createElement(S.Select,{options:f,placeholder:" ",optionRenderer:this.providerOptionRenderer,onChange:this.handleProvideChange,value:s,name:"metadata.annotations['kubesphere.io/annotations']"})))),"LoadBalancer"===u&&y.default.createElement(S.Form.Item,{label:t("ANNOTATION_PL")},y.default.createElement(O.default,{name:"metadata.annotations",options:this.providerOptions,hiddenKeys:[/^kubesphere.io\//,"openpitrix_runtime"],addText:t("ADD")}))))))}},{key:"accessModes",get:function(){return[{label:t("NONE"),desc:t("ACCESS_NONE_TIP"),value:"ClusterIP"},{label:"NodePort",desc:t("ACCESS_NODEPORT_TIP"),value:"NodePort"},{label:"LoadBalancer",desc:t("ACCESS_LOADBALANCER_TIP"),value:"LoadBalancer"}]}},{key:"providerOptions",get:function(){var e=this.state.provider;return""===e?[]:Object.keys(N.CLUSTER_PROVIDERS_ANNOTATIONS[e])}}]),n}(y.default.Component);a.default=P,P.propTypes={isEdgeWize:b.default.bool,visible:b.default.bool,detail:b.default.object,onOk:b.default.func,onCancel:b.default.func,isSubmitting:b.default.bool},P.defaultProps={isEdgeWize:!1,visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),l=r(a(3)),o=r(a(3400)),u=function(e){var t=e.title,a=e.desc,r=e.className;return n.default.createElement("div",{className:(0,l.default)(o.default.title,r)},n.default.createElement("div",{className:"h4"},t),n.default.createElement("p",null,a))};t.default=u},function(e,t,a){e.exports={title:"QATgUSsoGzs-HirGBPJ_o"}},function(e,t,a){e.exports={wrapper:"_3TA3Qz6ifk73ngG3XZqG3_",title:"_2xJakYguvxIfuNLPwECuxz",contentWrapper:"AdN2olZI0P9-CfZJC-oJd",option:"_36a3_8ve0treEjf7MSk9_V",selectOption:"_2iUolxlw4P2wsBc_FfLi0a",text:"_3AWkYRTRQL_YG5rEAb0kgS"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(4),r(22),r(23),r(17),r(85),r(38),r(7),r(32),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(42),r(16),r(4),r(22),r(23),r(57),r(17),r(85),r(38),r(7),r(32),r(110);var l=n(r(315)),o=n(r(58)),u=n(r(30)),c=n(r(61)),s=n(r(43));r(41);var i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=n(r(1)),y=n(r(3)),g=n(r(26)),b=n(r(450)),S=n(r(60)),_=n(r(63)),O=n(r(861)),C=r(186),T=r(52),R=r(72),D=n(r(787)),N=n(r(833)),k=n(r(452)),I=n(r(318)),P=n(r(831)),A=n(r(437)),w=n(r(456)),M=n(r(3403));function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var j=["deployments","daemonsets","statefulsets"],x=function(e){(0,p.default)(n,e);var a,r=L(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).stopPropagation=function(e){return e.stopPropagation()},t.handleOk=(0,i.default)(s.default.mark((function e(){var a,r,n,l,o,u,c,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,r=a.onOk,n=a.store,l=a.resource,o=t.state,u=o.selectedRelatedResourceIds,c=o.relatedResources,i=[],c.forEach((function(e){u.includes(e.uid)&&("persistentvolumeclaims"===e.module?i.push(t.volumeStore.delete(e)):j.includes(e.module)?(t.workloadStore.setModule(e.module),i.push(t.workloadStore.delete(e))):"s2ibuilders"===e.module||"s2i"===e.type?i.push(t.builderStore.delete(e)):"pods"===e.module&&i.push(t.podStore.delete(e)))})),!(0,S.default)(l)){e.next=10;break}return e.next=7,Promise.all(l.map((function(e){return n.delete(e)})));case 7:n.list.setSelectRowKeys([]),e.next=12;break;case 10:return e.next=12,n.delete(l);case 12:return e.next=14,Promise.all(i);case 14:r();case 15:case"end":return e.stop()}}),e)}))),t.handleItemClick=function(e){var a=e.currentTarget.dataset.id;t.setState((function(e){var t=e.selectedRelatedResourceIds;return{selectedRelatedResourceIds:t.includes(a)?t.filter((function(e){return e!==a})):[].concat((0,c.default)(t),[a])}}))},t.state={relatedResources:[],selectedRelatedResourceIds:[],enableConfirm:!1,timer:3},t.workloadStore=new I.default,t.volumeStore=new P.default,t.builderStore=new w.default,t.podStore=new k.default,e.isFederated&&(t.workloadStore=new A.default({module:"deployments"}),t.volumeStore=new A.default({module:t.volumeStore.module})),t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.visible&&(this.fetchRelatedResources(this.props.resource),this.startTimer())}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"startTimer",value:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.setState((function(e){var t=e.timer;return{timer:Math.max(t-1,0),enableConfirm:t<=1}}),(function(){e.state.enableConfirm&&e.timer&&clearInterval(e.timer)}))}),1e3)}},{key:"fetchRelatedResources",value:(a=(0,i.default)(s.default.mark((function e(t){var a,r,n,l,o,u,i,f=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),a=[],(0,S.default)(t)?(a=t.map((function(e){return e.selector||(0,g.default)(e,"resource.selector")})),r=t[0].namespace,n=t[0].cluster):(a.push(t.selector||(0,g.default)(t,"resource.selector")),r=t.namespace,n=t.cluster),l=[],o=this.props.isFederated?["deployments","statefulsets"]:j,a.forEach((function(e){if(!(0,_.default)(e)){var t=(0,T.joinSelector)(e);l.push.apply(l,[f.volumeStore.fetchListByK8s({cluster:n,namespace:r,labelSelector:t}),f.podStore.fetchListByK8s({cluster:n,namespace:r,labelSelector:t})].concat((0,c.default)(o.map((function(e){return f.workloadStore.fetchListByK8s({cluster:n,namespace:r,labelSelector:t,module:e})}))))),e.s2ibuilder&&l.push(f.builderStore.fetchDetail({cluster:n,namespace:r,name:e.s2ibuilder,module:"s2ibuilders"}).then((function(e){return[e]})))}})),e.next=8,Promise.all(l);case 8:u=e.sent,i=(0,O.default)((0,b.default)(u),"uid").filter((function(e){return!(0,_.default)(e.name)})),this.setState({relatedResources:i,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"renderContent",value:function(){var e=this,a=this.state,r=a.isLoading,n=a.relatedResources,l=a.selectedRelatedResourceIds;return!1===r&&(0,_.default)(n)?h.default.createElement(N.default,{icon:"appcenter",className:M.default.empty,title:t("NO_RELATED_RESOURCE_FOUND"),desc:t("NO_SERVICE_RELATED_RESOURCE_DESC")}):h.default.createElement("div",{className:M.default.resources},n.map((function(a){return h.default.createElement("div",{key:a.uid,"data-id":a.uid,className:(0,y.default)(M.default.resource,(0,u.default)({},M.default.selected,l.includes(a.uid))),onClick:e.handleItemClick},h.default.createElement(C.Checkbox,{checked:l.includes(a.uid),onClick:e.stopPropagation}),h.default.createElement(C.Icon,{name:R.ICON_TYPES[a.module],size:20,type:l.includes(a.uid)?"light":"dark"}),h.default.createElement("span",{className:M.default.resourceName},(0,T.getDisplayName)(a)),h.default.createElement("span",{className:M.default.resourceType},t(R.MODULE_KIND_MAP[a.module])))})))}},{key:"render",value:function(){var e=this.state,a=e.enableConfirm,r=e.timer,n=this.props,u=n.resource,c=(n.onOk,n.onCancel),s=n.isSubmitting,i=(0,o.default)(n,["resource","onOk","onCancel","isSubmitting"]),f=(0,S.default)(u)&&1!==u.length?t("DELETE_MULTIPLE_SERVICES"):t("DELETE_SERVICE"),d=(0,S.default)(u)&&1!==u.length?t.html("DELETE_SERVICE_DESC_PL",{resource:u.map((function(e){return e.name})).join(", ")}):(0,S.default)(u)?t.html("DELETE_SERVICE_DESC_SI",{resource:u.map((function(e){return e.name})).join(", ")}):t.html("DELETE_SERVICE_DESC_SI",{resource:u.name});return h.default.createElement(D.default,(0,l.default)({width:520,icon:"question",title:f,description:d,closable:!1,headerClassName:M.default.modalHeader,bodyClassName:M.default.modalBody,hideFooter:!0},i),h.default.createElement("div",{className:M.default.body},this.renderContent()),h.default.createElement("div",{className:M.default.footer},h.default.createElement(C.Button,{onClick:c},t("CANCEL")),h.default.createElement(C.Button,{type:"danger",loading:s,disabled:!a||s,onClick:this.handleOk},t("OK"),!a&&"(".concat(r,"s)"))))}}]),n}(h.default.Component);a.default=x,x.propTypes={resource:E.default.any,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},x.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalHeader:"_26d-mmc1L8YE15w2c5ynj-",modalBody:"OJj3mjDoKuQusJLoJyxm0",body:"xh0ShGgPliDrZ8GV160Qz",resources:"_3pLESr3si_XDoA7Poj1ldk",resource:"LOltHxE-oCwWcX3uKoJ6r",selected:"_1S_nFSv86IHQku-q8oIIuP",resourceName:"_3wA790hRgUadmWOd56JWt3",resourceType:"_3B2I_N_Bhq2bs2Nl5XvfDZ",footer:"_2lXPmmJElrAhBjoXVAlMPI",empty:"_7aUFmc9Af5O59nrGIsW-3"}},function(e,t,a){"use strict";a(15);var r=a(20);a(6),a(24),a(64),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getOverrides=void 0,a(6),a(28),a(191),a(159),a(4),a(24),a(64),a(7);var n=r(a(26));t.getOverrides=function(e,t,a){var r=[];return e&&t?(a.forEach((function(a){var l=(0,n.default)(e,a,{}),o=(0,n.default)(t,a,{});JSON.stringify(l)!==JSON.stringify(o)&&r.push({path:"/".concat(a.replace(/\./g,"/")),value:o})})),r):r}},function(e,a,r){"use strict";(function(e){var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(26)),c=n(r(240)),s=n(r(787)),i=n(r(825)),f=n(r(3406)),d=n(r(3407)),p=r(72),m=n(r(435)),v=n(r(3408));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"serviceaccount.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,f=e.workspace,d=e.module,h=e.success,y=(0,o.default)(e,["store","cluster","namespace","workspace","module","success"]),g=p.MODULE_KIND_MAP[d],b=(0,l.default)({},g,m.default[d]({namespace:n})),S=s.default.open(E({onOk:function(e){var l=(0,u.default)(e,g);l?a.create(l,{cluster:r,namespace:n||(0,u.default)(l,"metadata.namespace")}).then((function(){s.default.close(S),c.default.success({content:t("CREATE_SUCCESSFUL")}),h&&h()})):c.default.error({content:t("INVALID_YAML_FILE_FORMAT")})},modal:i.default,steps:v.default,formTemplate:b,name:"SERVICE_ACCOUNT",store:a,module:d,cluster:r,namespace:n,workspace:f},y))}},"serviceaccount.edit":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,o.default)(e,["store","detail","success"]),u=s.default.open(E({onOk:function(e){a.patch(r,e).then((function(){s.default.close(u),c.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:f.default,namespace:r.namespace,store:a},l))}},"serviceaccount.role.edit":{on:function(a){var r=a.store,n=a.detail,l=a.success,u=(0,o.default)(a,["store","detail","success"]),i=s.default.open(E({onOk:function(e){r.patch(n,e).then((function(){s.default.close(i),c.default.success({content:t("UPDATE_SUCCESSFUL")}),l&&l()}))},detail:n,modal:d.default,store:r,module:e,namespace:n.namespace},u))}}};a.default=y}).call(this,r(138)(e))},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=r(186),m=n(r(787)),v=n(r(830)),h=r(14),E=r(239),y=n(r(1)),g=n(r(0)),b=n(r(441)),S=r(72);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,E.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).roleStore=new b.default,t.handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,h.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formData:(0,v.default)((0,h.toJS)(e.detail._originData||e.detail))},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,v.default)((0,h.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return g.default.createElement(m.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},g.default.createElement(p.Form.Item,{label:t("NAME")},g.default.createElement(p.Input,{name:"metadata.name",disabled:!0})),g.default.createElement(p.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:S.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},g.default.createElement(p.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),g.default.createElement(p.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},g.default.createElement(p.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}}]),r}(g.default.Component),o.propTypes={detail:y.default.object,visible:y.default.bool,onOk:y.default.func,onCancel:y.default.func,isSubmitting:y.default.bool},o.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1},l=u))||l;a.default=O},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=r(14),h=r(239),E=n(r(830)),y=r(186),g=n(r(787)),b=n(r(1365)),S=n(r(441));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,h.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).roleStore=new S.default,t.handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,v.toJS)(o.selectedRowKeys).filter((function(e){return e!==l.uid}));r(e),o.setSelectRowKeys(u)},t.state={formData:(0,E.default)((0,v.toJS)(e.detail._originData))},t}return(0,s.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,E.default)((0,v.toJS)(this.props.detail._originData))})}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onCancel,l=e.isSubmitting,o=e.cluster,u=e.namespace,c=this.state.formData;return p.default.createElement(g.default.Form,{width:600,title:a||t("CHANGE_ROLE"),icon:"client",data:c,onOk:this.handleOk,onCancel:n,visible:r,isSubmitting:l},p.default.createElement(y.Form.Item,{label:t("PROJECT_ROLE_SI"),desc:t("SERVICE_ACCOUNT_PROJECT_ROLE_DESC")},p.default.createElement(b.default,{name:"metadata.annotations['iam.kubesphere.io/role']",cluster:o,namespace:u,placeholder:" "})))}}]),r}(p.default.Component),o.propTypes={detail:m.default.object,title:m.default.string,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(3409)),o=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=r(186),d=n(r(1107)),p=n(r(1365)),m=n(r(26)),v=n(r(74)),h=r(239),E=n(r(0)),y=n(r(441)),g=r(72);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,h.observer)(l=function(e){(0,c.default)(r,e);var a=b(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).roleStore=new y.default,n.nameValidator=function(e,a,r){if(!a)return r();n.props.store.checkName({name:a,namespace:n.state.namespace,cluster:n.state.cluster}).then((function(a){if(a.exist)return r({message:t("NAME_EXIST_DESC"),field:e.field});r()}))},n.handleChange=function(e){(0,v.default)(n.formTemplate,'metadata.annotations["iam.kubesphere.io/role"]',""),n.setState({namespace:e})},n.state={cluster:e.cluster,workspace:e.workspace,namespace:e.namespace},n}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.formRef,a=this.state,r=a.cluster,n=a.namespace;return E.default.createElement(f.Form,{data:this.formTemplate,ref:e},E.default.createElement(f.Columns,null,E.default.createElement(f.Column,null,E.default.createElement(f.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},E.default.createElement(f.Input,{name:"metadata.name",autoFocus:!0,maxLength:63}))),E.default.createElement(f.Column,null,E.default.createElement(f.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:g.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},E.default.createElement(f.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),E.default.createElement(f.Columns,null,!this.props.namespace&&E.default.createElement(f.Column,null,E.default.createElement(f.Form.Item,{label:t("PROJECT"),desc:t("SELECT_PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},E.default.createElement(d.default,{name:"metadata.namespace",cluster:this.props.cluster,onChange:this.handleChange}))),E.default.createElement(f.Column,null,E.default.createElement(f.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},E.default.createElement(f.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),E.default.createElement(f.Columns,null,E.default.createElement(f.Column,null,E.default.createElement(f.Form.Item,{label:t("PROJECT_ROLE_SI"),desc:t("SELECT_PROJECT_ROLE_DESC")},E.default.createElement(p.default,{name:"metadata.annotations['iam.kubesphere.io/role']",cluster:r,namespace:n,placeholder:" "})))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,m.default)(t,g.MODULE_KIND_MAP[a],t)}}]),r}(E.default.Component))||l;a.default=S},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=r(14),c=n(r(74)),s=n(r(26)),i=n(r(240)),f=n(r(787)),d=n(r(825)),p=n(r(3411)),m=n(r(435)),v=n(r(3414));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"servicerouting.create":{on:function(e){var a=e.store,r=e.namespace,n=e.module,l=e.cluster,u=e.gateway,p=e.success,h=(0,o.default)(e,["store","namespace","module","cluster","gateway","success"]),y=f.default.open(E({modal:d.default,onOk:function(e){var n=(0,s.default)(e,"metadata.name");(0,c.default)(e,"spec.routes[0].id",n),a.create(e,{cluster:l,namespace:r}).then((function(){f.default.close(y),i.default.success({content:t("CREATE_SUCCESSFUL")}),p&&p()}))},steps:v.default,formTemplate:m.default[n]({namespace:r,gateway:u}),store:a,namespace:r,cluster:l},h))}},"servicerouting.edit":{on:function(e){var a=e.store,r=e.namespace,n=(e.module,e.cluster),l=e.detail,c=e.title,s=void 0===c?t("EDIT_MICROSERVICE_ROUTE"):c,d=e.success,m=(0,o.default)(e,["store","namespace","module","cluster","detail","title","success"]),v=f.default.open(E({modal:p.default,onOk:function(e){a.update(l,e).then((function(){f.default.close(v),i.default.success({content:t("MODIFY_SUCCESSFUL")}),d&&d()}))},title:s,detail:(0,u.toJS)(l._originData),store:a,namespace:r,cluster:n,isEditMode:!0},m))}}};a.default=y},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1)),p=r(a(830)),m=r(a(787)),v=r(a(1749));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var E=function(e){(0,c.default)(a,e);var t=h(a);function a(){var e;(0,o.default)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).form=f.default.createRef(),e.state={formData:(0,p.default)(e.props.detail)},e.handleOk=function(){var t=e.props.onOk;e.form.current.validator((function(){t(e.form.current.getData())}))},e}return(0,u.default)(a,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)(this.props.detail)})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.title,r=e.onCancel,o=e.isSubmitting,u=(0,l.default)(e,["visible","title","onCancel","isSubmitting"]),c=this.state.formData;return f.default.createElement(m.default,{width:960,title:a,onCancel:r,onOk:this.handleOk,visible:t,isSubmitting:o},f.default.createElement(v.default,(0,n.default)({formRef:this.form,formTemplate:c},u)))}}]),a}(f.default.Component);t.default=E,E.propTypes={visible:d.default.bool,onOk:d.default.func,onCancel:d.default.func,isSubmitting:d.default.bool,isEditMode:d.default.bool},E.defaultProps={visible:!1,isSubmitting:!1,isEditMode:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(191),a(42),a(159),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=r(a(195)),f=a(186),d=r(a(3413));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,o.default)(a,e);var t=p(a);function a(){var e;(0,n.default)(this,a);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).handleChange=function(t){e.props.onChange(t)},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.options;return(0,i.default)(t)?s.default.createElement(f.AutoComplete,{value:t,className:d.default.autocomplete,options:a,onChange:this.handleChange}):s.default.createElement("div",{className:d.default.text},JSON.stringify(t))}}]),a}(s.default.Component);t.default=m},function(e,t,a){e.exports={wrapper:"KfR6-Hi6ChXCC8SEeyfK7",autocomplete:"_3JJmaE8GoZ93yjPsiD1M5V"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{title:"ROUTE_SETTINGS",component:r(a(1749)).default,required:!0}];t.default=n},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(87),r(97),r(9),r(13),r(10),r(75),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(28),r(87),r(97),r(191),r(42),r(159),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(75),r(7);var l=n(r(96)),o=n(r(43));r(41);var u=n(r(44)),c=n(r(30)),s=n(r(58)),i=n(r(240)),f=n(r(825)),d=n(r(74)),p=n(r(26)),m=n(r(135)),v=n(r(787)),h=n(r(3416)),E=n(r(3423)),y=r(479),g=n(r(3425)),b=n(r(435)),S=r(72),_=n(r(1390)),O=n(r(105)),C=n(r(1080));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={"silent-policy.add":{on:function(e){var a,r=e.store,n=e.module,l=e.success,c=(e.namespace,(0,s.default)(e,["store","module","success","namespace"])),d=b.default[n]({}),p=(0,m.default)(S.silentDefaultItem),h=v.default.open(R({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.create(I(a,p));case 4:v.default.close(h),i.default.success({content:t("CREATE_SILENCE_POLICY_SUCCESSFULLY")}),l&&l();case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,form2codeParse:function(e){return I(e,p)},code2formParse:O.default[n],title:t("CREATE_SILENCE_POLICY"),steps:g.default,formTemplate:d,modal:f.default,isAdd:!0,store:r},c))}},"silent-policy.edit":{on:function(e){var a,r=e.store,n=e.module,l=e.success,c=(0,s.default)(e,["store","module","success"]),f=(0,m.default)(c.detail),d=v.default.open(R({onOk:(a=(0,u.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return n=c.detail,e.next=5,r.patch(n,I(a,{},["metadata"]));case 5:i.default.success({content:t("EDIT_SILENCE_POLICY_SUCCESSFULLY")}),v.default.close(d),l&&l();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,formTemplate:f,okBtnText:t("OK"),title:t("EDIT_INFORMATION"),modal:_.default,store:r},c))}},"silent-policy.editCondition":{on:function(e){var a,r=e.store,n=e.module,l=e.success,c=(0,s.default)(e,["store","module","success"]),f=(0,m.default)(c.detail),d=v.default.open(R({onOk:(a=(0,u.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return n=c.detail,e.next=5,r.patch(n,I(a,{},["spec.matcher"]));case 5:i.default.success({content:t("EDIT_SILENCE_POLICY_SUCCESSFULLY")}),v.default.close(d),l&&l();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,formTemplate:f,title:t("EDIT_SILENCE_CONDITIONS"),modal:E.default,store:r},c))}},"silent-policy.editTime":{on:function(e){var a=e.store,r=e.module,n=e.success,l=(0,s.default)(e,["store","module","success"]),c=(0,m.default)(l.detail);c.isDefaultCron=c.isCron;var f,d=v.default.open(R({onOk:(f=(0,u.default)(o.default.mark((function e(r){var u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return u=l.detail,e.next=5,a.patch(u,I(r,{},["spec"]));case 5:i.default.success({content:t("EDIT_SILENCE_POLICY_SUCCESSFULLY")}),v.default.close(d),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),module:r,formTemplate:c,title:t("EDIT_SILENCE_TIME"),modal:h.default,store:a},l))}},"silent-policy.yaml.update":{on:function(e){var a,r=e.store,n=e.detail,c=e.success,f=(0,s.default)(e,["store","detail","success"]),d=v.default.open(R({onOk:(a=(0,u.default)(o.default.mark((function e(a){var u,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,l.default)(a,1),s=u[0],e.next=3,r.update(n,s);case 3:i.default.success({content:t("EDIT_SILENCE_POLICY_SUCCESSFULLY")}),v.default.close(d),c&&c();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:n,store:r,modal:C.default},f))}}};a.default=D;function N(e,t){var a=t-e,r=Math.floor(a/1e3/60/60),n=Math.floor(a/1e3/60%60),l=Math.floor(a/1e3%60);return"".concat(r?"".concat(r,"h"):"").concat(n?"".concat(n,"m"):r?"0m":"").concat(l?"".concat(l,"s"):"0s")}var k=[["metadata.name","name"],["metadata.annotations['kubesphere.io/alias-name']","aliasName"],["metadata.annotations['kubesphere.io/description']","desc"],["spec.matcher.matchExpressions","matchExpressions"],["spec.startsAt",function(e){return 1===e.type||2===e.type?(0,p.default)(e,"dateRange[0]",new Date):null}],["spec.duration",function(e){var t,a,r;return 2===e.type?N(new Date((0,p.default)(e,"dateRange[0]")).getTime(),new Date((0,p.default)(e,"dateRange[1]")).getTime()):3===e.type&&!e.isCron&&(null===(t=e.timeRange)||void 0===t?void 0:t.length)>1&&(null===(a=e.timeRange)||void 0===a?void 0:a[(null===(r=e.timeRange)||void 0===r?void 0:r.length)-1])?N(1e3*(0,p.default)(e,"timeRange[0]",0),1e3*(0,p.default)(e,"timeRange[1]",0)):e.duration?e.duration:null}],["spec.schedule",function(e){var t;if(e.isCron)return e.cron;if(3!==e.type)return null;var a=null!==(t=e.timeRange)&&void 0!==t?t:[],r=(0,l.default)(a,2),n=r[0],o=r[1],u=JSON.parse(JSON.stringify((0,y.parseExpression)("0 * * * *").fields));return o&&(n=Math.floor(n/60/60),o=Math.floor(o/60/60),u.hour=[n]),2===e.timeType&&e.week&&e.week.length&&(u.dayOfWeek=e.week),3===e.timeType&&e.month&&e.month.length&&(u.dayOfMonth=e.month),(0,y.fieldsToExpression)(u).stringify()}]];function I(e,t,a){return k.filter((function(e){var t=(0,l.default)(e,1)[0];return!a||a.some((function(e){return t.startsWith(e)}))})),function(e){return function(t,a){return e.reduce((function(e,a){var r,n=(0,l.default)(a,2),o=n[0],u=n[1];return"string"==typeof u&&(r=(0,p.default)(t,u)),"function"==typeof u&&(r=u(t,e)),void 0!==r&&(0,d.default)(e,o,r),e}),a)}}(k)(e,t)}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n,l=r(a(36)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(1750)),i=r(a(1390));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var d=(0,r(a(936)).default)(["bell-off-duotone"])(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).icon="bell-off-duotone",e.component=s.default,e}return a}(i.default))||n;t.default=d},function(e,t,a){e.exports={wrapper:"nRjz2FNzAh6uTBQ6oqXxD",formContainer:"JFXBI5AS30nGS_OLEcxq8"}},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(827),r(200),r(84),r(86),r(18),r(192),r(4),r(23),r(17),r(85),r(38),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51));r(45),r(827),r(200),r(84),r(86),r(18),r(28),r(192),r(42),r(4),r(23),r(57),r(17),r(85),r(38);var d,p=l(r(0)),m=r(186),v=n(r(3)),h=r(239),E=n(r(201)),y=n(r(3419));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var b=[{label:t("MONDAY"),value:1},{label:t("TUESDAY"),value:2},{label:t("WEDNESDAY"),value:3},{label:t("THURSDAY"),value:4},{label:t("FRIDAY"),value:5},{label:t("SATURDAY"),value:6},{label:t("SUNDAY"),value:0}],S=new Array(31).fill(1).map((function(e,t){return{label:t+1,value:t+1}})),_=(0,h.observer)(d=function(e){(0,s.default)(a,e);var t=g(a);function a(e){var r,n,l;return(0,u.default)(this,a),(l=t.call(this,e)).handleClick=function(e){var t=l.props,a=t.onChange,r=t.multi,n=void 0!==r&&r,o=l.state.value;if(n){var u=o.indexOf(e);u>-1?o.splice(u,1):o.push(e)}else o=[e];l.setState({value:o}),a&&a(o)},l.state={value:Array.from(null!==(r=null!==(n=e.value)&&void 0!==n?n:e.defaultValue)&&void 0!==r?r:[])},l}return(0,c.default)(a,[{key:"render",value:function(){var e=this,t=this.props.type,a=this.state.value,r="zh"===(0,E.default)("lang")?"zh":"en";return p.createElement("div",{className:y.default.wrapper},this.options.map((function(n,l){var u;return p.createElement(m.Button,{className:(0,v.default)(y.default.item,(u={},(0,o.default)(u,y.default.week,"week"===t),(0,o.default)(u,y.default.month,"month"===t),(0,o.default)(u,y.default.enButton,"week"===t&&"zh"!==r),u)),key:l,type:a.includes(n.value)?"control":"default",onClick:function(){return e.handleClick(n.value,n)}},n.label)})))}},{key:"options",get:function(){return"week"===this.props.type?b:S}}]),a}(p.Component))||d;a.default=_},function(e,t,a){e.exports={wrapper:"XZmcIRClmVHOLPXRuiFvg",item:"_3ATYh4oZAXiPyvZAhRjEDk",week:"_3kEoABe-m2t4ezm2s2pI5T",month:"xK5ma088M1lwXtXU4OmtS",enButton:"vD2nGEp1TRRzYsLcbY6qn"}},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);a(827),a(18),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(827),a(18),a(42),a(4),a(23),a(57),a(17);var l=n(a(30)),o=n(a(36)),u=n(a(37)),c=n(a(55)),s=n(a(56)),i=n(a(51)),f=r(a(0)),d=a(186),p=n(a(806)),m=n(a(3421));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=v(a);function a(e){var r;(0,o.default)(this,a),(r=t.call(this,e)).handleChange=function(e,t){var a=r.state,n=a.startTime,o=a.endTime,u=r.props.onChange,c=(0,l.default)({startTime:n,endTime:o},e,t);r.setState((0,l.default)({},e,t)),u([c.startTime,c.endTime])},r.renderTimePicker=function(){var e=r.state,t=e.startTime,a=e.endTime;return f.createElement("div",{className:m.default.wrapper},f.createElement(d.Select,{value:t,defaultValue:t,onChange:function(e){return r.handleChange("startTime",e)},options:new Array(24).fill(0).map((function(e,t){return{value:3600*t,label:t<10?"0".concat(t):t}})),clearable:!0,searchable:!1}),f.createElement("span",null,"–"),f.createElement(d.Select,{value:a,defaultValue:a,onChange:function(e){return r.handleChange("endTime",e)},options:new Array(24).fill(0).map((function(e,t){return{value:3600*(t+1),label:t<10?"0".concat(t):t}})),clearable:!0}))},r.renderDatePicker=function(){var e=r.state,t=e.startTime,a=e.endTime;return f.createElement("div",{className:m.default.wrapper},f.createElement(d.DatePicker,{value:t,dateFormat:"Y-m-d H:i:S",onChange:function(e){r.handleChange("startTime",e[0])},enableTime:!0}),f.createElement("span",null,"–"),f.createElement(d.DatePicker,{value:a,dateFormat:"Y-m-d H:i:S",enableTime:!0,onChange:function(e){return r.handleChange("endTime",e[0])}}))};var n=r.props.value,u=void 0===n?[]:n;return r.state={startTime:u[0],endTime:u[1],value:e.value},r}return(0,u.default)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.value,a=void 0===t?[]:t;(0,p.default)(a,e.value)||(0,p.default)(a,this.state.value)||this.setState({value:a,startTime:a[0],endTime:a[1]})}},{key:"render",value:function(){return"date"===this.props.type?this.renderDatePicker():this.renderTimePicker()}}]),a}(f.Component);t.default=h},function(e,t,a){e.exports={wrapper:"_4Y7QthNjz2h_QCRixWaez",timePicker:"SHh3pyqg08gPiDs1JiP-M",timeInput:"_2wG89BS0l6_fko0YVgH8Z_","is-hover":"_1eWtLiVXH-tZu8fDt6fJXb",isActive:"mMgB1a9fIAeuK9eW5RJzW",timeCloseIcon:"_2P4r9gVOJ3w0jmfDdmrJBk",timeIcon:"r-3lMVm-uygWaJSTU0vAZ",timeContent:"_3LLguW1J-JK5vSqztTVUTA",timeHeader:"_2I64-AObhngFrgHBvlp6Id",timeFields:"_2NnH5NwINte5FTsKIuUeOo",timeItem:"_2Yur1ll1Q_y3B920FlFkmN","is-active":"_1sq9NsV9C-tPDYXqK2XLHE","is-disabled":"_2DmTgBUO1uNvtla6uVTGBS",timeFooter:"_1QgYbx8f-Wrbfso_5wbKM-"}},function(e,t,a){e.exports={wrapper:"_5T9cqusVddZlw43e51Xmi",title:"_d3S2TlF7MtT9KW6k66qi"}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n,l=r(a(36)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(1752)),i=r(a(1390));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var d=(0,r(a(936)).default)(["bell-off-duotone"])(n=function(e){(0,o.default)(a,e);var t=f(a);function a(){var e;(0,l.default)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).icon="bell-off-duotone",e.component=s.default,e}return a}(i.default))||n;t.default=d},function(e,t,a){e.exports={wrapper:"_2xsRF0uqYI17afilpJikSd",conditionContainer:"GBgAhhcFW1TBk9fXuLF-S",annotation:"bNRABKj08s3pTnTK2WRpy",desc:"Y44MOnEy8CKRM3mejdICW"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(1751)),o=r(a(1752)),u=r(a(1750)),c=[{title:"BASIC_INFORMATION",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0,icon:"cdn"},{title:"SILENCE_CONDITIONS",component:o.default,required:!0,icon:"volume-off-duotone"},{title:"SILENCE_TIME",component:u.default,required:!0,icon:"volume-off-duotone"}];t.default=c},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(5),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(26)),i=n(r(74)),f=n(r(158)),d=n(r(1753)),p=n(r(240)),m=n(r(787)),v=n(r(825)),h=n(r(824)),E=n(r(3427)),y=n(r(1754)),g=n(r(3434)),b=n(r(3436)),S=r(72),_=n(r(435)),O=n(r(901)),C=n(r(3438)),T=n(r(3444));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={"storageclass.create":{on:function(e){var a=e.store,r=e.cluster,n=e.module,l=e.success,o=(0,c.default)(e,["store","cluster","module","success"]),f=S.MODULE_KIND_MAP[n],d=(0,u.default)({},f,_.default[n]({})),h=m.default.open(D({onOk:function(e){var o=(0,s.default)(e,f);o&&((0,s.default)(o,'metadata.labels["storage.kubesphere.io/storagetype"]')||(0,i.default)(o,'metadata.labels["storage.kubesphere.io/storagetype"]',"Undefined"),a.createAlongWithSnapshotClasses(o,{cluster:r}).then((function(){m.default.close(h),p.default.success({content:t("CREATE_SUCCESSFUL")}),l&&l(),O.default.delete("".concat(n,"_create_form"))})))},module:n,cluster:r,name:f,steps:C.default,formTemplate:d,modal:v.default,store:a},o))}},"torageclass.update":{on:function(e){var a=e.store,r=(e.cluster,e.detail),n=e.success,l=(0,c.default)(e,["store","cluster","detail","success"]),o=(0,s.default)(a,"module",""),u=m.default.open(D({onOk:function(e){var l="workspace"===o?null:e;a.patch(r,l).then((function(){m.default.close(u),p.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()}))},detail:r,modal:T.default,store:a},l))}},"storageclass.set.default":{on:function(e){var t,a=e.store,r=e.cluster,n=e.detail,u=e.defaultStorageClass,s=e.success,i=(0,c.default)(e,["store","cluster","detail","defaultStorageClass","success"]),f=m.default.open(D({onOk:(t=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return e.next=3,a.patch({name:u,cluster:r},{metadata:{annotations:{"storageclass.kubernetes.io/is-default-class":"false","storageclass.beta.kubernetes.io/is-default-class":"false"}}});case 3:return e.next=5,a.patch(n,{metadata:{annotations:{"storageclass.kubernetes.io/is-default-class":"true","storageclass.beta.kubernetes.io/is-default-class":"true"}}});case 5:m.default.close(f),s&&s();case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),cluster:r,modal:E.default,store:a},i))}},"storageclass.volume.function.update":{on:function(e){var a,r=e.cluster,n=e.store,u=e.detail,s=e.StorageClassStore,v=e.success,h=(0,c.default)(e,["cluster","store","detail","StorageClassStore","success"]),E=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var r,o,c,s;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},o=a.allowClone,c=a.allowSnapshot,s=a.allowVolumeExpansion,(0,f.default)(o)||(0,i.default)(r,'metadata.annotations["storageclass.kubesphere.io/allow-clone"]',String(o)),(0,f.default)(c)||(0,i.default)(r,'metadata.annotations["storageclass.kubesphere.io/allow-snapshot"]',String(c)),(0,f.default)(s)||(0,i.default)(r,"allowVolumeExpansion",(0,d.default)(s)?s:JSON.parse(s)),e.next=7,n.patch(u,r);case 7:return e.next=9,n.fetchDetail({name:u.name,cluster:u.cluster});case 9:p.default.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(E),v&&v();case 12:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:r,store:n,modal:g.default,StorageClassStore:s},h))}},"storageclass.pvc.autoresizer":{on:function(e){var a,r=e.store,n=e.cluster,u=e.detail,s=e.success,f=(0,c.default)(e,["store","cluster","detail","success"]),d=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(a){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u._originData,(0,i.default)(n,"metadata.annotations",D(D({},n.metadata.annotations),a)),e.next=4,r.patch(u,n);case 4:return e.next=6,r.fetchDetail({name:u.name,cluster:u.cluster});case 6:p.default.success({content:t("UPDATE_SUCCESSFUL")}),m.default.close(d),s&&s();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:n,store:r,formData:u._originData,modal:y.default},f))}},"storageclass.accessor":{on:function(e){var a,r=e.cluster,n=e.store,u=e.detail,c=e.storageClassName,s=e.success,i=e.shouldAddCrd,f=m.default.open({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.default.close(f),e.next=3,n.update({cluster:r,name:a.metadata.name},a);case 3:p.default.success({content:t("UPDATE_SUCCESSFUL")}),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),storageClassName:c,cluster:r,store:n,detail:u,shouldAddCrd:i,modal:b.default})}},"storageclass.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,s=void 0===u?"name":u,i=e.accessorStore,f=e.cluster,d=(0,c.default)(e,["store","success","rowKey","accessorStore","cluster"]),v=r.list,E=v.data,y=v.selectedRowKeys,g=E.filter((function(e){return y.includes(e[s])})).map((function(e){return{name:e.name,namespace:e.namespace}})).map((function(e){return e.name})),b=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(){var a,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=[],g.forEach((function(e){a.push(i.silentPatch({cluster:f,name:"".concat(e,"-accessor")},{spec:{storageClassName:"".concat(e,"-accessor-disabled")}})),o.push(r.delete({cluster:f,name:e}))})),e.next=5,Promise.all([].concat(a,o));case 5:m.default.close(b),p.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 9:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),resource:g.join(", "),type:"STORAGE_CLASS",modal:h.default,store:r,desc:t.html("STORAGE_CLASS_DELETE_DESC_PL",{type:t("STORAGE_CLASS_LOW"),resource:g.join(", ")})},d))}},"storageclass.delete":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,s=e.accessorStore,i=e.cluster,f=(0,c.default)(e,["store","detail","success","accessorStore","cluster"]),d=m.default.open(D({onOk:(a=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.silentPatch({cluster:i,name:"".concat(n.name,"-accessor")},{spec:{storageClassName:"".concat(n.name,"-accessor-disabled")}});case 2:r.delete(n).then((function(){m.default.close(d),p.default.success({content:t("DELETED_SUCCESSFULLY")}),u&&u()}));case 3:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),store:r,modal:h.default,resource:n.name,desc:t("STORAGE_CLASS_DELETE_DESC")},f))}}};a.default=N},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3428));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.onOk,l=e.isSubmitting;return i.default.createElement(p.default,{width:520,onOk:n,onCancel:r,visible:a,okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:l,hideHeader:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"information",color:{primary:"#ffffff",secondary:"#41b1ea"},size:18}),"  ",t("SET_DEFAULT_STORAGE_CLASS_TITLE")),i.default.createElement("p",null,t("STORAGE_CLASS_SET_DEFAULT_DESC"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"LVUIJ9uwpeVUggtH-Ho5b"}},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=r(a(1)),f=a(186),d=r(a(799)),p=r(a(3430));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var v=function(e){(0,o.default)(a,e);var t=m(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).handleSliderChange=function(e){r.setState({size:e},(function(){r.props.onChange(e)}))},r.inputChange=function(e){r.setState({size:e},(function(){r.props.onChange(e)}))},r.state={size:e.size},r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.max,a=e.min,r=e.unit,n=e.marks,l=this.state.size;return s.default.createElement("div",{className:p.default.wrapper},s.default.createElement(f.Slider,{value:l,max:t,min:a,marks:n,unit:r,onChange:this.handleSliderChange}),s.default.createElement("div",{className:p.default.inputBox},s.default.createElement(d.default,{className:p.default.input,value:l,max:t,min:a,onChange:this.inputChange}),s.default.createElement("span",{className:p.default.unit},r)))}}]),a}(s.default.Component);t.default=v,v.propTypes={size:i.default.number,max:i.default.number,min:i.default.number,unit:i.default.string,onChange:i.default.func},v.defaultProps={size:10,max:2048,min:0,unit:"Gi",onChange:function(){}}},function(e,t,a){e.exports={wrapper:"_1mvTs5GBM24J0ZC-PZKOqS",inputBox:"_33_mEhm-GlTPmcsAdY4L1N",input:"_2l_4JhXkXDawwXxLZvphsr",unit:"MtGAFnWFj5-7jxF1gChe0"}},function(e,t,a){"use strict";a(15);var r=a(20);a(5),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(17);var n=r(a(36)),l=r(a(37)),o=r(a(55)),u=r(a(56)),c=r(a(51)),s=r(a(0)),i=r(a(1)),f=r(a(972)),d=a(186),p=r(a(799)),m=r(a(3432));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.default)(e);if(t){var n=(0,c.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,u.default)(this,a)}}var h=function(e){(0,o.default)(a,e);var t=v(a);function a(e){var r;return(0,n.default)(this,a),(r=t.call(this,e)).handleSelectChange=function(e){var t=r.state.unit;r.props.onChange("".concat((0,f.default)(e)).concat(t))},r.handleInput=function(e){var t=r.state.unit;r.props.onChange("".concat((0,f.default)(e)).concat(t))},r.renderTail=function(){var e=r.props.options,t=r.state.unit;return e.length>1?s.default.createElement(d.Select,{className:m.default.tailSelect,options:e,value:t,defaultValue:t,onChange:r.handleSelectChange}):s.default.createElement("span",{className:m.default.unit},t)},r.state={unit:e.unit,value:e.value},r}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.min,r=e.max,n=e.value;return s.default.createElement(s.default.Fragment,null,""!==t&&s.default.createElement("div",{className:m.default.title},t),s.default.createElement("div",{className:m.default.wrapper},s.default.createElement(p.default,{className:m.default.input,min:a,value:n,max:r,onChange:this.handleInput}),this.renderTail()))}}]),a}(s.default.Component);t.default=h,h.propTypes={onChange:i.default.func,options:i.default.array,value:i.default.string,min:i.default.number,max:i.default.number,unit:i.default.string,title:i.default.string},h.defaultProps={options:[],value:"",min:0,title:"",unit:"",onChange:function(){}}},function(e,t,a){e.exports={title:"_3gCzFcF7fcPTu22LltCShA",wrapper:"_20nfJFuMfJpHOHE9YDPewL",input:"vaY31bEaxpZlAVRmVYPix",tailSelect:"_2XbNfOs7f_36Ovqjfw_HK9",unit:"flR4Dw7LDIWhIn8tDx9jF"}},function(e,t,a){e.exports={wrapper:"_199UmNQHyBJS0ebwEpIGw8",text:"_3UfJ52LH7FrU0bLw8j0O95",switch:"_2fHHkpPHo-8wuOAbtg_-fy",settings:"_2whYmFUOtrDqPfsDr3UVMW",title:"_1fTGAl2lYYfATlfTHgdLWr",container:"_3Q1kslT3zayxpY8R7UfqIL",limit:"_2P6eNTXyz8rvKC5lg8NgeP",checkItem:"_14y0ciRr89j7e_M0WYMQ9w",des:"uDVdwpV_vBYrKbce_FYfE",group:"_44T5XYn5HzVMT8x5tJZXT"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(11),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(11),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=n(r(1)),v=r(186),h=n(r(787)),E=n(r(26)),y=n(r(158)),g=n(r(195)),b=r(239),S=n(r(3435));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var O=(0,b.observer)((u=o=function(e){(0,i.default)(r,e);var a=_(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state=e.getState,e.dataUndefined=function(e){return!(0,y.default)(e)&&((0,g.default)(e)?JSON.parse(e):e)},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this,a=this.props,r=a.visible,n=a.onCancel,l=a.onOk,o=a.isSubmitting;return p.default.createElement(h.default,{width:600,onOk:function(){return l(e.state)},onCancel:n,visible:r,title:t("SET_VOLUME_OPERATIONS"),icon:"slider",okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:o},p.default.createElement(v.Alert,{type:"warning",className:"margin-b12",message:t.html("SET_VOLUME_OPERATIONS_TIP")}),p.default.createElement("div",{className:S.default.body},this.Items.map((function(t){var a=e.state[t.key],r=e.dataUndefined(a);return p.default.createElement("div",{className:S.default.Item,key:t.title},p.default.createElement("div",{className:S.default.icon},p.default.createElement(v.Toggle,{checked:r,disabled:(0,y.default)(a),onChange:function(){return t.onclick(r)}})),p.default.createElement("div",{className:S.default.textBox},p.default.createElement("span",{className:S.default.title},t.title),p.default.createElement("span",{className:S.default.des},t.des)))}))))}},{key:"getState",get:function(){var e=this.props.StorageClassStore.detail;return{allowClone:(0,E.default)(e.annotations,"storageclass.kubesphere.io/allow-clone",void 0),allowSnapshot:(0,E.default)(e.annotations,"storageclass.kubesphere.io/allow-snapshot",void 0),allowVolumeExpansion:(0,E.default)(e,"allowVolumeExpansion",void 0)}}},{key:"onOkState",get:function(){return{allowClone:this.dataUndefined(this.state.allowClone),allowSnapshot:this.dataUndefined(this.state.allowSnapshot),allowVolumeExpansion:this.dataUndefined(this.state.allowVolumeExpansion)}}},{key:"Items",get:function(){var e=this;return[{title:t("VOLUME_CLONING"),des:t("VOLUME_CLONING_DESC"),key:"allowClone",onclick:function(t){return e.setState({allowClone:!t})}},{title:t("VOLUME_SNAPSHOT_CREATION"),des:t("VOLUME_SNAPSHOT_CREATION_DESC"),key:"allowSnapshot",onclick:function(t){return e.setState({allowSnapshot:!t})},hide:!globals.app.hasKSModule("storage-utils")},{title:t("VOLUME_EXPANSION"),des:t("VOLUME_EXPANSION_DESC"),key:"allowVolumeExpansion",onclick:function(t){return e.setState({allowVolumeExpansion:!t})}}].filter((function(e){return!e.hide}))}}]),r}(p.default.Component),o.propTypes={visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isSubmitting:m.default.bool},o.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},l=u))||l;a.default=O},function(e,t,a){e.exports={body:"_3QyHHg0hisjmcupBh_NvhW",Item:"SRjS5KHQZAgS4V27u_ywn",icon:"_15bRbSgLaZbaSnNzE8iSVC",textBox:"_3kTj8hcDzdP92R5Vjckb4u",title:"_4VY2gXWgMHU_XuA_Ke883",des:"j_xFi_rwmR4ZLJD46Ivr_"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(84),r(29),r(18),r(16),r(4),r(22),r(23),r(17),r(85),r(38),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(84),r(29),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17),r(85),r(38),r(32);var o=l(r(96)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=r(186),p=l(r(787)),m=l(r(850)),v=l(r(790)),h=l(r(135)),E=l(r(26)),y=l(r(74)),g=l(r(1)),b=n(r(0)),S=l(r(439)),_=l(r(445)),O=r(52),C=l(r(3437));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var R=function(e){(0,s.default)(r,e);var a=T(r);function r(e){var t;return(0,u.default)(this,r),(t=a.call(this,e)).workspaceStore=new _.default,t.namespaceStore=new S.default,t.fetchData=function(){var e=t.props.cluster;Promise.all([t.workspaceStore.fetchList({cluster:e,limit:-1}),t.namespaceStore.fetchList({cluster:e,limit:-1})]).then((function(e){var a=(0,o.default)(e,2),r=a[0],n=a[1],l=r.map((function(e){return e.name})),u=n.map((function(e){return e.name}));t.setState({workspace:l,namespace:u})}))},t.handleNsChange=function(e){t.setState({nsValues:e})},t.handleWsChange=function(e){t.setState({wsValues:e})},t.handleEnable=function(){t.setState({enabled:!t.state.enabled})},t.expression=function(e){return{fieldExpressions:[{field:"Name",operator:"In",values:e}]}},t.handleOk=function(){var e=t.props,a=e.onOk,r=e.storageClassName,n=t.state,l=n.enabled,o=n.nsValues,u=n.wsValues,c=n.newObject,s=n.nsOpt,i=n.wsOpt,f=(0,E.default)(c.spec,"namespaceSelector.fieldSelector",[t.expression([])]),d=(0,E.default)(c.spec,"workspaceSelector.fieldSelector",[t.expression([])]),p=l?r:"".concat(r,"-disabled");(0,y.default)(c.spec,"storageClassName",p),(0,y.default)(f[0],"fieldExpressions[0].values",o),(0,y.default)(f[0],"fieldExpressions[0].operator",s),(0,y.default)(d[0],"fieldExpressions[0].values",u),(0,y.default)(d[0],"fieldExpressions[0].operator",i),(0,y.default)(c.spec,"namespaceSelector.fieldSelector",f),(0,y.default)(c.spec,"workspaceSelector.fieldSelector",d),0===o.length&&delete c.spec.namespaceSelector,0===u.length&&delete c.spec.workspaceSelector,a(c)},t.handleNsOptChange=function(e){t.setState({nsOpt:e})},t.handleWsOptChange=function(e){t.setState({wsOpt:e})},t.state={newObject:(0,h.default)(e.detail),enabled:!(0,E.default)(e.detail.spec,"storageClassName","").includes("disabled"),workspace:[],namespace:[],nsOpt:(0,E.default)(e.detail,"spec.namespaceSelector.fieldSelector[0].fieldExpressions[0].operator","In"),wsOpt:(0,E.default)(e.detail,"spec.workspaceSelector.fieldSelector[0].fieldExpressions[0].operator","In"),nsValues:(0,E.default)(e.detail,"spec.namespaceSelector.fieldSelector[0].fieldExpressions[0].values",[]),wsValues:(0,E.default)(e.detail,"spec.workspaceSelector.fieldSelector[0].fieldExpressions[0].values",[])},t}return(0,c.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=e.shouldAddCrd,o=this.state,u=o.enabled,c=o.nsValues,s=o.wsValues,i=o.nsOpt,f=o.wsOpt;return b.default.createElement(p.default,{width:960,onOk:this.handleOk,onCancel:r,visible:a,title:t("SET_AUTHORIZATION_RULES"),okText:t("OK"),cancelText:t("CANCEL"),isSubmitting:n,hideFooter:l},l&&b.default.createElement(d.Alert,{type:"warning",message:(0,O.htmlLinkControl)(t.html("AUTHORIZATION_NOT_SUPPORT"))}),b.default.createElement("div",{className:C.default.wrapper},b.default.createElement(v.default,{className:C.default.text,icon:function(){return b.default.createElement("img",{src:"/assets/storageclass-tree.svg",style:{width:"40px",marginRight:"16px"}})},title:t("AUTHORIZATION_RULES"),description:t("AUTHORIZATION_RULES_DESC")}),b.default.createElement(m.default,{className:C.default.switch,text:u?t("ENABLED"):t("DISABLED"),checked:u,onChange:this.handleEnable})),b.default.createElement("div",{className:C.default.selectBox},b.default.createElement("div",{className:C.default.line},b.default.createElement(d.Select,{className:C.default.labelSelect,options:[{label:t("PROJECT"),value:"namespace"}],defaultValue:"namespace",disabled:!0}),b.default.createElement(d.Select,{className:C.default.operator,options:this.operatorOptions,onChange:this.handleNsOptChange,value:i}),b.default.createElement(d.Select,{multi:!0,className:C.default.labelSelect,options:this.namespaceOptions,onChange:this.handleNsChange,value:c})),b.default.createElement("div",{className:C.default.line},b.default.createElement(d.Select,{className:C.default.labelSelect,options:[{label:t("WORKSPACE"),value:"workspace"}],defaultValue:"workspace",disabled:!0}),b.default.createElement(d.Select,{className:C.default.operator,options:this.operatorOptions,onChange:this.handleWsOptChange,value:f}),b.default.createElement(d.Select,{multi:!0,className:C.default.labelSelect,options:this.workspaceOptions,onChange:this.handleWsChange,value:s}))))}},{key:"namespaceOptions",get:function(){var e=this.state.namespace,t=this.props.cluster;return e.map((function(e){return{label:(0,O.showNameAndAlias)(e,"project",t),value:e}}))}},{key:"workspaceOptions",get:function(){return this.state.workspace.map((function(e){return{label:(0,O.showNameAndAlias)(e,"workspace"),value:e}}))}},{key:"operatorOptions",get:function(){return[{label:t("OPERATOR_IN"),value:"In"},{label:t("OPERATOR_NOT_IN"),value:"NotIn"}]}}]),r}(b.Component);a.default=R,R.propTypes={visible:g.default.bool,onOk:g.default.func,onCancel:g.default.func,isSubmitting:g.default.bool},R.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={wrapper:"_3D_cTNGP8MQC4Uc5eHhLZA",text:"_2GwAeg4xLWT1Ao1HBA2aT",switch:"_1IAyFA7w5XmghrEXWgouQd",selectBox:"_1ksKSMg9kux_MBU1RZ-fq0",line:"HK72SgA9yU7peLgeKlWEO",labelSelect:"FZVIiDuWKdDJRqouL39O0",operator:"tmura1FWwKDbtn1CR9CU4"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1755)),l=r(a(3439)),o=r(a(3441)),u=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"STORAGE_SYSTEM",component:l.default,required:!0},{title:"STORAGE_CLASS_SETTINGS",component:o.default,required:!0}];t.default=u},function(e,a,r){"use strict";r(15);var n=r(20);r(12),r(109),r(5),r(31),r(18),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(31),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var l=n(r(61)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(74)),m=n(r(189)),v=n(r(63)),h=r(186),E=n(r(1680)),y=r(72),g=r(52),b=n(r(3440));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var _=function(e){(0,c.default)(r,e);var a=S(r);function r(e){var n;if((0,o.default)(this,r),(n=a.call(this,e)).provisionersOptions=[].concat((0,l.default)(y.PROVISIONERS.map((function(e){return(0,m.default)(e,["description"])}))),[{label:t("CUSTOM"),value:"",icon:"hammer"}]),n.getDefaultModes=function(e){var a=y.PROVISIONERS.find((function(t){return t.value===e}))||{};return((0,v.default)(a.access_modes)?Object.keys(y.ACCESS_MODES):a.access_modes).map((function(e){return{label:t(e),value:e}})).map((function(e){return e.value}))},n.changeProvisioner=function(e){n.setState({provisioner:e},n.updateParams)},n.formTemplate.provisioner||(n.formTemplate.provisioner=y.PROVISIONERS[0].value,(0,p.default)(n.formTemplate,"metadata.annotations['kubesphere.io/provisioner']",n.formTemplate.provisioner)),n.formTemplate.provisioner){var u=n.getDefaultModes(n.formTemplate.provisioner);(0,p.default)(n.formTemplate,"metadata.annotations['storageclass.kubesphere.io/supported-access-modes']",u)}return n.state={provisioner:n.formTemplate.provisioner},n}return(0,u.default)(r,[{key:"updateParams",value:function(){var e=this.getDefaultModes(this.state.provisioner);this.formTemplate.provisioner=this.state.provisioner,this.formTemplate.metadata.annotations["storageclass.kubesphere.io/supported-access-modes"]=e,this.formTemplate.parameters={}}},{key:"render",value:function(){var e=this.props.formRef,a=this.state.provisioner,r=(y.PROVISIONERS.find((function(e){return e.value===a}))||{}).description,n=t(r);return f.default.createElement(h.Form,{data:this.formTemplate,ref:e},f.default.createElement(h.Form.Item,{label:f.default.createElement("div",{className:b.default.provisioner},f.default.createElement("h3",null,t("CHOOSE_STORAGE_SYSTEM_TIP")),f.default.createElement("p",null,t("PROVISIONER_DEPENDENCE_DESC")))},f.default.createElement(E.default,{onChange:this.changeProvisioner,name:"metadata.annotations['kubesphere.io/provisioner']",options:this.provisionersOptions})),f.default.createElement("p",{className:b.default.description,dangerouslySetInnerHTML:{__html:(0,g.hrefControl)(n)}}))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,y.MODULE_KIND_MAP[a],t)}}]),r}(f.default.Component);a.default=_},function(e,t,a){e.exports={provisioner:"XUh3rWXYiPF6kf28wKkXk",description:"_1ntIXDpZx7uRHczOv_FkZd"}},function(e,a,r){"use strict";r(15);var n=r(20);r(187),r(11),r(31),r(18),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(187),r(11),r(31),r(18),r(28),r(42),r(10),r(4),r(23),r(57),r(24),r(193),r(17);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(26)),d=n(r(189)),p=n(r(63)),m=n(r(0)),v=r(186),h=n(r(842)),E=n(r(3442)),y=r(72);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var b={input:E.default,select:v.Select},S={maxsize:"GiB",stepsize:"GiB",minsize:"GiB"},_=function(e){(0,c.default)(r,e);var a=g(r);function r(e){var t;return(0,o.default)(this,r),(t=a.call(this,e)).isCustomizedProvision=y.PROVISIONERS.every((function(e){return e.value!==t.provisionerValue})),t}return(0,u.default)(r,[{key:"getRules",value:function(e){return this.validators.filter((function(t){return t._key===e})).map((function(e){return(0,d.default)(e,"_key")}))}},{key:"getAccessModesOptions",value:function(){var e=this,a=y.PROVISIONERS.find((function(t){return t.value===e.provisionerValue}))||{};return((0,p.default)(a.access_modes)?Object.keys(y.ACCESS_MODES):a.access_modes).map((function(e){return{label:t(e),value:e}}))}},{key:"renderCustom",value:function(){return m.default.createElement(v.Form.Item,{label:t("PARAMETERS")},m.default.createElement(h.default,{name:"parameters",addText:t("ADD")}))}},{key:"renderParams",value:function(){var e=this,a=y.PROVISIONERS.find((function(t){return t.value===e.provisionerValue}));if((0,p.default)(a)||(0,p.default)(a.params))return this.renderCustom();for(var r=[],n=0;n<a.params.length;n+=2){var o,u,c=a.params[n]||{},s=a.params[n+1]||{},i=c.options?c.options.map((function(e){return{label:t(e.label),value:e.value}})):[],h=b[c.type],E=(0,f.default)(b,s.type||"");r.push(m.default.createElement(v.Columns,{key:n},m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t(c.key.toUpperCase()),desc:t(c.desc.toUpperCase()),rules:this.getRules(c._key)},m.default.createElement(h,(0,l.default)({name:"parameters.".concat(c._key||c.key.toLowerCase())},(0,d.default)(c,["type","key","desc","placeholder","options"]),{unit:null!==(o=S[c.key.toLowerCase()])&&void 0!==o?o:null,options:i,placeholder:t(c.placeholder)})))),s.type&&m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t(s.key.toUpperCase()),desc:t(s.desc.toUpperCase()),rules:this.getRules(s._key)},m.default.createElement(E,(0,l.default)({name:"parameters.".concat(s._key||s.key.toLowerCase()),unit:null!==(u=S[s.key.toLowerCase()])&&void 0!==u?u:null},(0,d.default)(s,["type","key","desc"])))))))}return r}},{key:"render",value:function(){var e=this.props.formRef,a=this.getAccessModesOptions(),r=a.map((function(e){return e.value}));return m.default.createElement("div",null,m.default.createElement(v.Form,{data:this.formTemplate,ref:e},m.default.createElement(v.Columns,null,m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t("VOLUME_EXPANSION")},m.default.createElement(v.Select,{name:"allowVolumeExpansion",options:[{label:t("YES"),value:"true"},{label:t("NO"),value:"false"}]}))),m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t("RECLAIM_POLICY")},m.default.createElement(v.Select,{name:"reclaimPolicy",defaultValue:"Delete",options:this.options})))),m.default.createElement(v.Columns,null,m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t("ACCESS_MODE"),desc:t("ACCESS_MODES_DESC")},m.default.createElement(v.Select,{name:"metadata.annotations['storageclass.kubesphere.io/supported-access-modes']",options:a,defaultValue:r,multi:!0}))),m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{rules:[{required:!0,message:t("PARAM_REQUIRED")}],label:t("PROVISIONER")},m.default.createElement(v.Input,{name:"provisioner"})))),m.default.createElement(v.Columns,null,m.default.createElement(v.Column,null,m.default.createElement(v.Form.Item,{label:t("VOLUME_BINDING_MODE")},m.default.createElement(v.Select,{name:"volumeBindingMode",options:this.volumeBindingMode,defaultValue:"WaitForFirstConsumer"}))),m.default.createElement(v.Column,null)),this.renderParams()))}},{key:"provisionerValue",get:function(){return(0,f.default)(this.formTemplate,'metadata.annotations["kubesphere.io/provisioner"]',this.formTemplate.provisioner)}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,y.MODULE_KIND_MAP[a],t)}},{key:"volumeBindingMode",get:function(){return[{label:t("IMMEDIATE_BINDING"),value:"Immediate"},{label:t("BINDING_WAIT"),value:"WaitForFirstConsumer"}]}},{key:"options",get:function(){return[{label:"Delete",value:"Delete"},{label:"Retain",value:"Retain"}]}},{key:"validators",get:function(){var e=function(e,a,r){return a?/^[0-9]*$/.test(a)?a<2e3||a>2147483647?r({message:t("GID_RANGE_TIP"),field:e.field}):void r():r({message:t("ENTER_POSITIVE_INTEGER_DESC"),field:e.field}):r()};return[{_key:"gidMin",validator:e,checkOnSubmit:!0},{_key:"gidMax",validator:e,checkOnSubmit:!0}]}}]),r}(m.default.Component);a.default=_},function(e,t,a){"use strict";a(15);var r=a(20);a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(16),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1)),p=a(186),m=r(a(3443));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.unit,r=e.onChange,o=(0,l.default)(e,["name","unit","onChange"]);return a?f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.default.wrapper},f.default.createElement(p.Input,(0,n.default)({name:t,className:m.default.input,onChange:r||null},o)),a&&f.default.createElement("span",{className:m.default.unit},a))):f.default.createElement(p.Input,(0,n.default)({name:t,className:m.default.input,onChange:r||null},o))}}]),a}(f.default.Component);t.default=h,h.propTypes={onChange:d.default.func,unit:d.default.string}},function(e,t,a){e.exports={wrapper:"_2kGVdUbWOxTaeyX4b5Z8Q_",input:"qgxKLrXJOh3vbKAcB-CBG",unit:"_2GAL5LSZYi6CYdKZCidXt9"}},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(830)),m=r(186),v=n(r(787));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(e){var a=t.props,r=a.onOk,n=a.store,l=a.detail,o=n.list,u=(0,d.toJS)(o.selectedRowKeys),c=u?u.filter((function(e){return e!==l.uid})):"";r(e),u&&o.setSelectRowKeys(c)},t.state={formData:(0,p.default)((0,d.toJS)(e.detail._originData||e.detail))},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({formData:(0,p.default)((0,d.toJS)(this.props.detail._originData||this.props.detail))})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=this.state.formData;return i.default.createElement(v.default.Form,{data:l,width:691,title:t("EDIT_INFORMATION"),icon:"pen",onOk:this.handleOk,okText:t("OK"),onCancel:n,visible:a,isSubmitting:r},i.default.createElement(m.Form.Item,{label:t("NAME")},i.default.createElement(m.Input,{name:"metadata.name",disabled:!0})),i.default.createElement(m.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_DESC")},i.default.createElement(m.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),i.default.createElement(m.Form.Item,{label:t("storageclasses")},i.default.createElement(m.Select,{name:'metadata.labels["storage.kubesphere.io/storagetype"]',options:this.options,clearable:!0})),i.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},i.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}},{key:"options",get:function(){return[{value:"BlockStorage",label:t("BLOCK_STORAGE")},{value:"ObjectStorage",label:t("OBJECT_STORAGE")},{value:"FileStorage",label:t("FILE_STORAGE")},{value:"Undefined",label:t("UNCLASSIFIED")}]}}]),r}(i.default.Component);a.default=E,E.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},E.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(0)),c=r(186),s=n(r(787)),i=n(r(1756)),f=n(r(1770)),d=n(r(1773)),p=n(r(1068)),m=n(r(1779)),v=n(r(1780));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={"toolbox.logquery":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:i.default,title:t("CONTAINER_LOG_SEARCH")},a))}},"toolbox.eventsearch":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:f.default,title:u.default.createElement("div",null,u.default.createElement(c.Icon,{size:20,name:"thunder",style:{marginRight:7}})," ",u.default.createElement("span",{style:{fontSize:12,fontWeight:600,lineHeight:"20px",height:"20px"}},t("RESOURCE_EVENT_SEARCH")))},a))}},"toolbox.auditingsearch":{on:function(e){e.store;var a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:d.default,title:u.default.createElement("div",null,u.default.createElement(c.Icon,{size:20,name:"login-servers",style:{marginRight:7}})," ",u.default.createElement("span",{style:{fontSize:12,fontWeight:600,lineHeight:"20px",height:"20px"}},t("AUDIT_LOG_SEARCH")))},a))}},"toolbox.kubectl":{on:function(e){e.store;var t=(0,o.default)(e,["store"]),a=s.default.open(E({onOk:function(){s.default.close(a)},modal:p.default,title:"kubectl"},t))}},"toolbox.kubeconfig":{on:function(e){e.store;var t=(0,o.default)(e,["store"]),a=s.default.open(E({onOk:function(){s.default.close(a)},modal:m.default,title:"kubeconfig"},t))}},"toolbox.bill":{on:function(e){var t=e.store,a=(0,o.default)(e,["store"]),r=s.default.open(E({onOk:function(){s.default.close(r)},modal:v.default,store:t},a))}}};a.default=y},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),r(110),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7),r(110);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(3588)),d=n(r(3590)),p=n(r(3592)),m=n(r(74));function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={"user.create":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),d=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(d),e.abrupt("return");case 3:return(0,m.default)(a,'metadata.annotations["iam.kubesphere.io/uninitialized"]',"true"),e.next=6,r.create(a);case 6:i.default.close(d),s.default.success({content:t("CREATE_SUCCESSFUL")}),n&&n();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:f.default,store:r},u))}},"user.edit":{on:function(e){var a,r=e.store,n=e.detail,u=e.success,d=(0,c.default)(e,["store","detail","success"]),p=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(p),e.abrupt("return");case 3:return(0,m.default)(a,"metadata.resourceVersion",n.resourceVersion),e.next=6,r.update(n,a);case 6:i.default.close(p),s.default.success({content:t("UPDATE_SUCCESSFUL")}),u&&u();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:f.default,detail:n,store:r},d))}},"user.setting":{on:function(e){var a,r=e.store,n=e.success,u=(0,c.default)(e,["store","success"]),f=i.default.open(h({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return i.default.close(f),e.abrupt("return");case 3:if(o=a.currentPassword,u=a.password,a.rePassword,d=(0,c.default)(a,["currentPassword","password","rePassword"]),!o||!u){e.next=10;break}return e.next=7,r.modifyPassword({name:globals.user.username},{currentPassword:o,password:u});case 7:setTimeout((function(){location.href="/login"}),1e3),e.next=12;break;case 10:return e.next=12,r.update({name:globals.user.username},d);case 12:i.default.close(f),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 15:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:p.default,store:r},u))}},"user.modifypassword":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(h({onOk:function(e){e?a.modifyPassword(r,e).then((function(){i.default.close(o),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n()})):i.default.close(o)},modal:d.default,detail:r,store:a},l))}}};a.default=E},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(109),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(109),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,u,c,s,i=n(r(315)),f=n(r(58)),d=n(r(30)),p=n(r(36)),m=n(r(37)),v=n(r(55)),h=n(r(56)),E=n(r(51)),y=n(r(49)),g=n(r(26)),b=l(r(0)),S=n(r(1)),_=r(14),O=r(239),C=r(186),T=n(r(787)),R=n(r(1122)),D=r(52),N=r(72),k=n(r(441)),I=n(r(3589));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,d.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,E.default)(e);if(t){var n=(0,E.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,h.default)(this,a)}}var M=(0,O.observer)((s=c=function(e){(0,v.default)(r,e);var a=w(r);function r(){var e;(0,p.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={formTemplate:A({apiVersion:"iam.kubesphere.io/v1alpha2",kind:"User"},(0,g.default)(e.props,"detail._originData",{}))},e.globalRoleStore=new k.default("globalroles"),e.userNameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r}).then((function(e){if(e.exist)return n({message:t("USERNAME_EXISTS"),field:a.field});n()}))},e.emailValidator=function(a,r,n){if(!r)return n();e.props.store.checkEmail(r).then((function(e){if(e.exist)return n({message:t("EMAIL_EXISTS"),field:a.field});n()}))},e.optionRenderer=function(e){return b.default.createElement("div",{className:I.default.option},b.default.createElement("div",null,e.item.name),b.default.createElement("p",null,e.item.description))},e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){this.globalRoleStore.fetchList({limit:-1,sortBy:"createTime"})}},{key:"render",value:function(){var e=this.props,a=(e.store,e.detail),r=(0,f.default)(e,["store","detail"]),n=a?"EDIT_USER":"CREATE_USER",l=a?[{required:!0,message:t("USERNAME_EMPTY_DESC")}]:[{required:!0,message:t("USERNAME_EMPTY_DESC")},{pattern:N.PATTERN_USER_NAME,message:t("USERNAME_INVALID",{message:t("USERNAME_DESC")})},{validator:this.userNameValidator}],o=a?[{required:!0,message:t("EMAIL_EMPTY_DESC")}]:[{required:!0,message:t("EMAIL_EMPTY_DESC")},{type:"email",message:t("INVALID_EMAIL")},{validator:this.emailValidator}];return b.default.createElement(T.default.Form,(0,i.default)({title:t(n),icon:"human",width:691,data:this.state.formTemplate},r),b.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),b.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),b.default.createElement(C.Form.Item,{label:t("USERNAME"),desc:t("USERNAME_DESC"),rules:l},b.default.createElement(C.Input,{name:"metadata.name",autoComplete:"nope",disabled:!!a,autoFocus:!0,maxLength:32})),b.default.createElement(C.Form.Item,{label:t("EMAIL"),desc:t("EMAIL_DESC"),rules:o},b.default.createElement(C.Input,{name:"spec.email",placeholder:"user@example.com",autoComplete:"nope"})),b.default.createElement(C.Form.Item,{label:t("PLATFORM_ROLE"),desc:t("PLATFORM_ROLE_DESC")},b.default.createElement(C.Select,{name:"metadata.annotations['iam.kubesphere.io/globalrole']",optionRenderer:this.optionRenderer,options:this.globalRoles,placeholder:" "})),!a&&b.default.createElement(C.Form.Item,{className:I.default.password,label:t("PASSWORD"),desc:t("PASSWORD_DESC"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:N.PATTERN_PASSWORD,message:t("PASSWORD_INVALID_DESC")}]},b.default.createElement(R.default,{name:"spec.password",autoComplete:"nope",withStrength:!0})),b.default.createElement(C.Form.Item,{className:I.default.textarea,label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},b.default.createElement(C.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256,rows:"3"})))}},{key:"globalRoles",get:function(){return this.globalRoleStore.list.data.filter((function(e){return!(0,D.isSystemRole)(e.name)})).map((function(e){return{label:e.name,value:e.name,item:e}}))}}]),r}(b.Component),c.propTypes={store:S.default.object,detail:S.default.object,visible:S.default.bool,onOk:S.default.func,onCancel:S.default.func,isSubmitting:S.default.bool},c.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}},u=s,(0,y.default)(u.prototype,"globalRoles",[_.computed],Object.getOwnPropertyDescriptor(u.prototype,"globalRoles"),u.prototype),o=u))||o;a.default=M},function(e,t,a){e.exports={password:"_1ADG5zIrZxFGThHw8n2EmT",textarea:"_3AQG3DTgv4CDYCBILVvos",option:"iR3e_Ox7Wx4eRyBl51gWs"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(58)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(1)),v=r(186),h=l(r(787)),E=l(r(1122)),y=r(72),g=l(r(3591));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var S=function(e){(0,i.default)(r,e);var a=b(r);function r(){var e;(0,c.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={password:"",formData:{}},e.handlePassswordChange=function(t){e.setState({password:t})},e.passwordValidator=function(a,r,n){if(!r)return n();r!==e.state.password&&n({message:t("PASSWORD_NOT_SAME_DESC"),field:a.field}),n()},e}return(0,s.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=(0,u.default)(e,["detail"]);return p.default.createElement(h.default.Form,(0,o.default)({title:t("CHANGE_PASSWORD"),icon:"pen",width:691,data:this.state.formData},r),p.default.createElement("input",{name:"username",className:"hidden-input",type:"text",disabled:!0}),p.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),p.default.createElement(v.Form.Item,{label:t("EMAIL")},p.default.createElement(v.Input,{disabled:!0,value:a.email})),p.default.createElement(v.Form.Item,{className:g.default.password,label:t("NEW_PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:y.PATTERN_PASSWORD,message:t("PASSWORD_DESC")}]},p.default.createElement(E.default,{name:"password",autoComplete:"new-password",onChange:this.handlePassswordChange,withStrength:!0})),p.default.createElement(v.Form.Item,{className:g.default.password,label:t("CONFIRM_PASSWORD"),rules:[{required:!0,message:t("CONFIRM_PASSWORD_TIP")},{validator:this.passwordValidator}]},p.default.createElement(E.default,{name:"rePassword",placeholder:" ",autoComplete:"new-password"})),p.default.createElement("div",{style:{height:200}}))}}]),r}(p.Component);a.default=S,S.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func},S.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={password:"_1Y4vNVcj5FUe5828ELzjaG",textarea:"_3qpHbW3KqGgth2GS-KMzr1",option:"_1z2QQj33fVWgBm8KRBy7H0"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(315)),o=n(r(58)),u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(26)),m=n(r(74)),v=n(r(198)),h=n(r(135)),E=n(r(63)),y=n(r(0)),g=n(r(3)),b=n(r(1)),S=r(14),_=r(186),O=n(r(787)),C=n(r(828)),T=n(r(322)),R=n(r(3593)),D=n(r(3598));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var P=function(e){(0,i.default)(r,e);var a=I(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).registerUpdate=function(e,a){var r=t.state.updatedTabs;(0,v.default)(r,e)||t.setState({updatedTabs:k(k({},r),{},(0,u.default)({},e,a))})},t.handleChangeTab=function(e){var a=e.currentTarget.dataset.name;a&&t.setState({activeTab:a,subRoute:{}})},t.handleSaveChanges=function(e){return function(){var a=t.props.onOk,r=t["".concat(e,"FormRef")].current;r&&r.validate((function(){var n=r.getData();a(n),t.cancelUpdate(e)}))}},t.handleDiscardChanges=function(e){return function(){var a=t["".concat(e,"Ref")].current;a&&(a.resetData(),t.cancelUpdate(e))}},t.cancelUpdate=function(e){var a=k({},t.state.updatedTabs);delete a[e],t.setState({updatedTabs:a})},t.renderForm=function(e){var a=e.name,r=e.component,n=t.props.store,l=t.state.activeTab,o=r;if(!o)return null;var c="".concat(a,"Ref");t[c]||(t[c]=y.default.createRef());var s="".concat(a,"FormRef");return t[s]||(t[s]=y.default.createRef()),y.default.createElement("div",{key:a,className:(0,g.default)(D.default.form,(0,u.default)({},D.default.active,a===l))},y.default.createElement(o,{store:n,ref:t[c],formRef:t[s],formData:t.state.formData}))},t.state={formData:{},activeTab:(0,p.default)(t.tabs,"[0].name"),updatedTabs:{}},t.store=new T.default,t}return(0,s.default)(r,[{key:"getChildContext",value:function(){return{registerUpdate:this.registerUpdate}}}]),(0,s.default)(r,[{key:"componentDidMount",value:function(){var e=this;this.store.fetchDetail({name:globals.user.username}).then((function(){var t=k({apiVersion:"iam.kubesphere.io/v1beta1",kind:"User"},(0,h.default)((0,S.toJS)(e.store.detail._originData)));(0,m.default)(t,"metadata.resourceVersion",e.store.detail.resourceVersion),e.setState({formData:t})}))}},{key:"renderTabs",value:function(){var e=this;return y.default.createElement("ul",{className:D.default.tabs},this.tabs.map((function(a){var r=a.icon,n=void 0===r?"appcenter":r,l=a.title,o=a.name,c=e.state,s=c.activeTab,i=c.updatedTabs,f=o===s,d=f?"light":"dark";return y.default.createElement("li",{onClick:e.handleChangeTab,key:l,"data-name":o,className:(0,g.default)((0,u.default)({},D.default.active,f))},y.default.createElement(_.Tooltip,{placement:"bottomLeft",content:(0,v.default)(i,o)?e.updateTip:""},y.default.createElement("span",{className:D.default.tooltipTrigger},y.default.createElement(_.Icon,{name:n,size:16,type:d}),(0,v.default)(i,o)&&y.default.createElement("span",{className:D.default.tipIcon}))),y.default.createElement("p",null,t(l)))})))}},{key:"renderFormComponents",value:function(){var e=this.state,t=e.activeTab,a=e.updatedTabs;return y.default.createElement("div",{className:D.default.formWrapper},this.tabs.map(this.renderForm),y.default.createElement("div",{className:(0,g.default)(D.default.operations,(0,u.default)({},D.default.active,(0,v.default)(a,t)))},y.default.createElement(C.default,{className:D.default.confirm,onOk:this.handleSaveChanges(t),onCancel:this.handleDiscardChanges(t)})))}},{key:"renderContent",value:function(){return y.default.createElement("div",{className:D.default.content},y.default.createElement("div",{className:D.default.forms},this.renderTabs(),this.renderFormComponents()))}},{key:"renderFooter",value:function(){var e=this.state.subRoute,a=void 0===e?{}:e,r=a.onCancel,n=a.onSave;return y.default.createElement("div",{className:D.default.footer},r&&y.default.createElement(_.Button,{onClick:this.handlePrev},t("PREVIOUS")),n&&y.default.createElement(_.Button,{type:"control",onClick:this.handleSubFormSave},t("OK")),(0,E.default)(a)&&y.default.createElement(_.Button,{onClick:this.props.onCancel},t("CLOSE")))}},{key:"render",value:function(){var e=this.props,a=(e.detail,e.onOk,(0,o.default)(e,["detail","onOk"]));return y.default.createElement(O.default,(0,l.default)({bodyClassName:D.default.body,title:t("USER_SETTINGS"),icon:"wrench",width:1162,hideFooter:!0},a),y.default.createElement("div",{className:D.default.main},this.renderContent(),this.renderFooter()))}},{key:"updateTip",get:function(){return y.default.createElement("div",{className:D.default.tip},y.default.createElement("h6",null,t("CONTENT_NOT_SAVED_TIPS")),y.default.createElement("p",null,t("SAVE_EDIT_HINTS")))}},{key:"tabs",get:function(){return R.default}}]),r}(y.default.Component);a.default=P,P.propTypes={visible:b.default.bool,onOk:b.default.func,onCancel:b.default.func},P.defaultProps={visible:!1,onOk:function(){},onCancel:function(){}},P.childContextTypes={registerUpdate:b.default.func}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(3594)),l=r(a(3596)),o=[{icon:"paper",name:"basicInfo",title:"BASIC_INFORMATION",component:n.default},{icon:"ssh",name:"passwordSetting",title:"PASSWORD_SETTINGS",component:l.default}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(11),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(11),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(135)),m=r(52),v=n(r(201)),h=n(r(3595));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).resetData=function(){t.setState({formData:t.getInitialData()})},t.handleFormChange=function(e,a){t.context.registerUpdate(t.name,{name:e,value:a})},t.state={formData:t.getInitialData()},t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){e.formData!==this.props.formData&&this.setState({formData:this.getInitialData()})}},{key:"getInitialData",value:function(){return(0,p.default)(this.props.formData)}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement("div",{className:"h4"},t("BASIC_INFORMATION")),i.default.createElement(d.Form,{ref:e,data:this.state.formData,onChange:this.handleFormChange},i.default.createElement(d.Columns,null,i.default.createElement(d.Column,null,i.default.createElement(d.Form.Item,{label:t("USERNAME")},i.default.createElement(d.Input,{name:"metadata.name",placeholder:"username",disabled:!0})),i.default.createElement(d.Form.Item,{label:t("EMAIL"),desc:t("USER_SETTING_EMAIL_DESC")},i.default.createElement(d.Input,{name:"spec.email",placeholder:"user@example.com"})),globals.config.supportLangs&&i.default.createElement(d.Form.Item,{label:t("LANGUAGE")},i.default.createElement(d.Select,{name:"spec.lang",options:this.languageOptions,defaultValue:(0,v.default)("lang")||(0,m.getBrowserLang)()}))))))}},{key:"name",get:function(){return"basicInfo"}},{key:"languageOptions",get:function(){return globals.config.showAllLangs?globals.config.supportLangs:globals.config.supportLangs.filter((function(e){return e.recommend}))}}]),r}(i.default.Component);a.default=y,y.contextTypes={registerUpdate:f.default.func}},function(e,t,a){e.exports={wrapper:"KH3XnMu-MyTWhxyHf4gKd",upload:"XPPHp2BX0rE0skRKK08bd"}},function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(1122)),m=r(72),v=n(r(3597));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var E=function(e){(0,u.default)(r,e);var a=h(r);function r(e){var n;return(0,l.default)(this,r),(n=a.call(this,e)).resetData=function(){n.setState({formData:n.getInitialData()})},n.handlePassswordChange=function(e){n.setState({password:e})},n.passwordValidator=function(e,a,r){if(!a)return r();a!==n.state.password&&r({message:t("PASSWORD_NOT_SAME_DESC"),field:e.field}),r()},n.handleFormChange=function(e,t){n.context.registerUpdate(n.name,{name:e,value:t})},n.state={password:"",formData:n.getInitialData()},n}return(0,o.default)(r,[{key:"getInitialData",value:function(){return{}}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:v.default.wrapper},i.default.createElement("div",{className:"h4"},t("PASSWORD_SETTINGS")),i.default.createElement(d.Form,{data:this.state.formData,ref:e,onChange:this.handleFormChange},i.default.createElement("input",{name:"password",className:"hidden-input",type:"password",disabled:!0}),i.default.createElement(d.Form.Item,{className:v.default.password,label:t("CURRENT_PASSWORD"),desc:t("ENTER_CURRENT_PASSWORD_DESC"),rules:[{required:!0,message:t("ENTER_CURRENT_PASSWORD_TIP")}]},i.default.createElement(p.default,{name:"currentPassword",placeholder:" ",autoComplete:"cur-password"})),i.default.createElement(d.Alert,{className:v.default.alert,type:"warning",message:t("PASSWORD_DESC")}),i.default.createElement(d.Form.Item,{className:v.default.password,label:t("NEW_PASSWORD"),rules:[{required:!0,message:t("PASSWORD_EMPTY_DESC")},{pattern:m.PATTERN_PASSWORD,message:t("PASSWORD_DESC")}]},i.default.createElement(p.default,{name:"password",placeholder:" ",autoComplete:"new-password",onChange:this.handlePassswordChange,tipClassName:v.default.dropdown,withStrength:!0})),i.default.createElement(d.Form.Item,{className:v.default.password,label:t("CONFIRM_PASSWORD"),rules:[{required:!0,message:t("CONFIRM_PASSWORD_TIP")},{validator:this.passwordValidator}]},i.default.createElement(p.default,{name:"rePassword",placeholder:" ",autoComplete:"new-password"}))))}},{key:"name",get:function(){return"passwordSetting"}}]),r}(i.default.Component);a.default=E,E.contextTypes={registerUpdate:f.default.func}},function(e,t,a){e.exports={wrapper:"_2f4Qwu-aMyuY2ayX60i3ow",alert:"-_vzO0gm8FRdolTnAgsKg",dropdown:"_1TOazrxPrE_VC7-rCUL3hs"}},function(e,t,a){e.exports={body:"_2uy1Nvc6heNC1CQwLvuQ2W",content:"_1lIeNHjQF9epWT-t_pShYu",forms:"_1EYYubFoXjSqfCjzgX9Q50",tabs:"_2VGusla4E1VhutBTSGrvSM",active:"_1MraCQa1kAyWnXL8dYc2-Y",tip:"_16cTW_hbIG4oYAeKmcdeA0",tooltipTrigger:"W04a-7w5uJhmQLBSzFoHC",tipIcon:"NaXnqKjzZHomE5MS--Al6",updateIcon:"_2uuOmNVwdkIagfgwWbkjW3",formWrapper:"_11NMns_UUFIN1rWN6bM5fc",operations:"_2kvFauDLN_uSqSa4uDFXj0",form:"_3ADJ1Bq3FvjzSuEDV1io3m",footer:"_1UfFR3uKyIYBgEQbDxFr8D"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(7);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(61)),s=l(r(30)),i=l(r(58)),f=l(r(26)),d=l(r(63)),p=l(r(74)),m=l(r(240)),v=l(r(787)),h=r(14),E=l(r(825)),y=l(r(3600)),g=l(r(3601)),b=l(r(3603)),S=l(r(1784)),_=l(r(3609)),O=l(r(1080)),C=l(r(1369)),T=r(72),R=l(r(435)),D=l(r(901)),N=n(r(3615)),k=l(r(3619)),I=l(r(1754));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={"volume.create":{on:function(e){var a=e.fromSnapshot,r=e.store,n=e.cluster,l=e.namespace,d=e.module,p=e.isFederated,h=e.extendformTemplate,y=e.success,g=(0,i.default)(e,["fromSnapshot","store","cluster","namespace","module","isFederated","extendformTemplate","success"]),b=T.MODULE_KIND_MAP[d],_=(0,s.default)({},b,A(A({},R.default.volumes({namespace:l})),h));p&&Object.keys(_).forEach((function(e){_[e]=R.default.federated({data:_[e],clusters:g.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var O=(0,c.default)(N.default);p&&O.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:S.default,required:!0});var C,k=v.default.open(A({onOk:(C=(0,u.default)(o.default.mark((function e(a){var u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,f.default)(a,b)){e.next=3;break}return e.abrupt("return");case 3:return(c={cluster:n,namespace:l}).namespace=c.namespace||(0,f.default)(u,"metadata.namespace"),e.next=7,r.create(u,c);case 7:v.default.close(k),m.default.success({content:t("CREATE_SUCCESSFUL")}),y&&y(),D.default.delete("".concat(d,"_create_form"));case 11:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),module:d,cluster:n,namespace:l,name:b,title:t("CREATE_PERSISTENT_VOLUME_CLAIM"),formTemplate:_,isFederated:p,steps:a?N.APPLY_SNAPSHOT_FORM_STEPS:O,modal:E.default,store:r},g))}},"volume.clone":{on:function(e){var a,r=e.store,n=(0,i.default)(e,["store"]),l=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.cloneVolume(a);case 2:v.default.close(l),m.default.success({content:t("CREATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CLONE_VOLUME"),modal:y.default,store:r},n))}},"volume.create.snapshot":{on:function(e){return(0,u.default)(o.default.mark((function a(){var r,n,l,c,s,d,p;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.store,n=e.detail,l=e.provisioner,c=(0,i.default)(e,["store","detail","provisioner"]),s=null!=l?l:(0,f.default)(n,"annotations['volume.beta.kubernetes.io/storage-provisioner']","-"),a.next=4,r.getSnapshotType({cluster:c.cluster});case 4:d=[],r.snapshotType.items.forEach((function(e){e.driver===s&&d.push({label:e.metadata.name,value:e.metadata.name})})),p=v.default.open(A({onOk:function(){var e=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.createSnapshot(a);case 2:v.default.close(p),m.default.success({content:t("CREATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),title:t("CREATE_SNAPSHOT"),modal:g.default,store:r,options:d},c));case 7:case"end":return a.stop()}}),a)})))()}},"create.snapshot":{on:function(e){var a,r=e.store,n=e.cluster,l=e.namespace,c=e.success,s=(0,i.default)(e,["store","cluster","namespace","success"]),f=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){var l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.namespace,u=(0,i.default)(a,["namespace"]),e.next=3,r.createSnapshot(A(A({},u),{},{cluster:n,namespace:l}));case 3:v.default.close(f),m.default.success({content:t("CREATE_SUCCESSFUL")}),c&&c();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),title:t("CREATE_SNAPSHOT"),modal:g.default,store:r,cluster:n,namespace:l,volumeSelect:!0},s))}},"volume.expand":{on:function(e){var a,r=e.store,n=(0,i.default)(e,["store"]),l=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(r.detail,a);case 2:v.default.close(l),m.default.success({content:t("UPDATE_SUCCESSFUL")});case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),modal:b.default,store:r},n))}},"volume.template.edit":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=e.module,l=e.isFederated,o=e.namespace,u=e.extendformTemplate,c=(0,i.default)(e,["store","detail","success","module","isFederated","namespace","extendformTemplate"]),p=T.MODULE_KIND_MAP[n],m=(0,s.default)({},p,A(A({},R.default.volumes({namespace:o})),u));l&&Object.keys(m).forEach((function(e){m[e]=R.default.federated({data:m[e],clusters:c.projectDetail.clusters.map((function(e){return e.name})),kind:e})}));var E=v.default.open(A(A({onOk:function(e){var n=(0,f.default)(e,"spec.template.spec.customMode",{});(0,d.default)(n)||delete e.spec.template.spec.customMode,t.update(a,e).then((function(){v.default.close(E),r&&r()}))},store:t,detail:(0,h.toJS)(a._originData),modal:_.default},c),{},{formTemplate:m,isFederated:l}))}},"volume.snapshot.yaml.edit":{on:function(e){var a,r=e.store,n=e.detail,l=e.success,c=e.namespace,s=e.cluster,f=(0,i.default)(e,["store","detail","success","namespace","cluster"]),d=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.update(A({namespace:c,cluster:s},r.detail),a);case 2:m.default.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(d),l&&l();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,modal:O.default,yaml:n},f))}},"volume.snapshotContent.baseInfo.edit":{on:function(e){var a,r=e.store,n=e.detail,l=e.cluster,c=e.namespace,s=e.success,f=(0,i.default)(e,["store","detail","cluster","namespace","success"]),d=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.patch(A(A({},n),{},{cluster:l,namespace:c}),a);case 2:m.default.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(d),s&&s();case 5:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),store:r,detail:n,modal:C.default},f))}},"snapshotClasses.create":{on:function(e){var a,r=e.store,n=e.module,l=e.name,f=e.detail,d=e.cluster,p=e.success,h=(0,i.default)(e,["store","module","name","detail","cluster","success"]),y=T.MODULE_KIND_MAP[n],g=(0,c.default)(k.default),b=(0,s.default)({},y,A({},R.default.volumesnapshotclass())),S=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a[y],e.next=3,r.create(n,{cluster:d});case 3:v.default.close(S),m.default.success({content:t("CREATE_SUCCESSFUL")}),p&&p();case 6:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),module:n,name:l,store:r,detail:f,formTemplate:b,steps:g,modal:E.default,cluster:d},h))}},"volume.autoresizer":{on:function(e){var a,r=e.store,n=e.cluster,l=e.detail,c=e.success,s=(0,i.default)(e,["store","cluster","detail","success"]),f=v.default.open(A({onOk:(a=(0,u.default)(o.default.mark((function e(a){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l._originData,(0,p.default)(n,"metadata.annotations",A(A({},n.metadata.annotations),a)),e.next=4,r.patch(l,n);case 4:return e.next=6,r.fetchDetail({name:l.name,cluster:l.cluster,namespace:l.namespace});case 6:m.default.success({content:t("UPDATE_SUCCESSFUL")}),v.default.close(f),c&&c();case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),cluster:n,store:r,formData:l._originData,modal:I.default},s))}}};a.default=w},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(72),p=r(186),m=n(r(787));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.onOk,o=e.title;return i.default.createElement(m.default.Form,{icon:"pen",width:691,title:o,onOk:l,onCancel:n,visible:a,isSubmitting:r},i.default.createElement(p.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:d.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})}],desc:t("LONG_NAME_DESC")},i.default.createElement(p.Input,{name:"name",maxLength:253})))}}]),r}(i.default.Component);a.default=h,h.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";var n=r(20);r(12),r(5),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(5),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var l=n(r(43)),o=n(r(30));r(41);var u,c,s,i=n(r(44)),f=n(r(36)),d=n(r(37)),p=n(r(55)),m=n(r(56)),v=n(r(51)),h=n(r(0)),E=n(r(1)),y=r(72),g=r(186),b=n(r(787)),S=n(r(831)),_=n(r(866)),O=n(r(910)),C=r(14),T=r(239),R=n(r(26)),D=n(r(76)),N=n(r(3602));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var A=(0,T.observer)((s=c=function(e){(0,p.default)(n,e);var a,r=P(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).volumeStore=new S.default,e.storageclass=new _.default,e.snapShotClassStore=new O.default,e.form=h.default.createRef(),e.testRef=h.default.createRef(),e.state={pagination:{page:0,total:0,limit:10},selectedVolume:"",volumeInfo:"",formData:{},snapShotClass:[],isLoading:!1,storageClassBan:!1,allowSnapshot:!0},e.fetchList=(0,i.default)(l.default.mark((function t(){var a,r,n=arguments;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.length>0&&void 0!==n[0]?n[0]:{},r=e.state.pagination,e.setState({isLoading:!0,pagination:I(I({},r),{},{page:r.page+1})},(function(){var t=e.state.pagination,r=t.page,n=t.limit,l=e.props,o=I(I({namespace:l.namespace,cluster:l.cluster},a),{},{limit:n*r,page:1,more:!1,sortBy:"createTime"});e.volumeStore.fetchList(o).then((function(){var t=e.volumeStore.list.total;e.setState({pagination:I(I({},e.state.pagination),{},{total:t}),isLoading:!1})}))}));case 3:case"end":return t.stop()}}),t)}))),e.volumeChange=function(t){e.setState({selectedVolume:t},(function(){e.saveVolumeInfo()}))},e.volumeValidator=function(a,r,n){var l=e.state,o=l.allowSnapshot,u=l.volumeInfo;!o&&(0,D.default)(u)&&n({message:t("STORAGECLASS_NOT_ALLOW_CREATE_SNAPSHOT"),field:a.field}),n()},e.optionRenderer=function(a){return h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:N.default.option},a.isFedManaged?h.default.createElement("img",{className:N.default.indicator,src:"/assets/cluster.svg"}):h.default.createElement(g.Icon,{type:"light",name:"storage"}),a.label," (",a.namespace,")"),a.isFedManaged&&h.default.createElement(g.Tooltip,{content:e.props.tipMessage||t("FEDPROJECT_RESOURCE_TIP")},h.default.createElement(g.Icon,{className:N.default.tip,name:"question"})))},e.handleOk=function(){var t,a=e.props.onOk,r=e.state,n=r.allowSnapshot,l=r.selectedVolume;e.form.current.validator((function(){if(n){var r=e.form.current.props.data;""!==l&&(t=(0,C.toJS)(e.volumeStore.list.data).filter((function(e){return e.name===l}))[0].namespace),a(I(I({},r),{},{namespace:t}))}}))},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.volumeSelect&&(this.fetchList(),this.getSnapShotClassList())}},{key:"getSnapShotClassList",value:function(){var e=this.props,t={namespace:e.namespace,cluster:e.cluster,limit:-1};this.snapShotClassStore.fetchList(t)}},{key:"saveVolumeInfo",value:function(){var e=this,t=this.state.selectedVolume;if(t){var a=(0,C.toJS)(this.volumeStore.list.data).filter((function(e){return e.name===t}))[0];a&&this.setState({volumeInfo:a},(function(){e.getStorageClassInfo()}))}}},{key:"getSnapShotClass",value:function(e){if(e){var t=(0,C.toJS)(this.snapShotClassStore.list.data),a=[];t.forEach((function(t){t.driver===e&&a.push({label:t.name,value:t.name})})),this.setState({snapShotClass:a})}}},{key:"getStorageClassInfo",value:(a=(0,i.default)(l.default.mark((function e(){var t,a,r,n,o,u,c,s=this;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.cluster,r=t.namespace,n=this.state.volumeInfo,o=n.storageClassName,e.prev=3,e.next=6,this.storageclass.fetchDetail({cluster:a,namespace:r,name:o});case 6:u=(0,R.default)((0,C.toJS)(this.storageclass).detail.annotations,"storageclass.kubesphere.io/allow-snapshot","false"),this.getSnapShotClass(null===(c=this.storageclass.detail)||void 0===c?void 0:c.provisioner),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),u="false";case 13:this.setState({allowSnapshot:JSON.parse(u)},(function(){s.testRef.current.validate({sourceName:s.state.selectedVolume})}));case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return a.apply(this,arguments)})},{key:"renderVolumeSelect",value:function(){var e=this.state,a=e.pagination,r=e.isLoading;return h.default.createElement(g.Form.Item,{ref:this.testRef,label:t("PERSISTENT_VOLUME_CLAIM"),rules:[{required:!0,message:t("PVC_NOT_SELECT")},{validator:this.volumeValidator}],desc:t("SELECT_A_VOLUME_DESC")},h.default.createElement(g.Select,{searchable:!0,name:"sourceName",className:N.default.input,options:this.volumeList,pagination:a,onFetch:this.fetchList,onChange:this.volumeChange,isLoading:r,optionRenderer:this.optionRenderer,clearable:!0}))}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.onCancel,l=e.title,o=e.options,u=e.volumeSelect,c=this.state,s=c.snapShotClass,i=c.formData;return h.default.createElement(b.default,{icon:"pen",width:600,title:l,onOk:this.handleOk,onCancel:n,visible:a,isSubmitting:r},h.default.createElement(g.Form,{data:i,ref:this.form},u&&this.renderVolumeSelect(),h.default.createElement(g.Form.Item,{label:t("NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:y.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("LONG_NAME_DESC")})}],desc:t("LONG_NAME_DESC")},h.default.createElement(g.Input,{name:"name",maxLength:253,className:N.default.input})),h.default.createElement(g.Form.Item,{label:t("VOLUME_SNAPSHOT_CLASS"),rules:[{required:!0,message:t("SNAPSHOT_EMPTY_TIP")}],desc:t("SELECT_VOLUME_SNAPSHOT_CLASS_DESC")},h.default.createElement(g.Select,{name:"type",options:u?s:o,placeholder:" ",className:N.default.input}))))}},{key:"volumeList",get:function(){return(0,C.toJS)(this.volumeStore.list.data).map((function(e){return{value:e.name,label:e.name,disabled:!e.inUse||e.isFedManaged,isFedManaged:e.isFedManaged,namespace:e.namespace}}))}}]),n}(h.default.Component),c.propTypes={detail:E.default.object,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool,snapshotOption:E.default.array,volumeSelect:E.default.bool},c.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1,snapshotOption:[],volumeSelect:!1},u=s))||u;a.default=A},function(e,t,a){e.exports={input:"zvTsfyLRc9lqKCZ7OH12O",option:"_3FKGkuuhvdnSIGOarex_36",tip:"_3L7C3cYavlloj_j_uwkS9I"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(87),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(87),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o=l(r(30)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(1084)),m=l(r(1)),v=r(186),h=l(r(787)),E=l(r(966)),y=l(r(3604));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var _=function(e){(0,s.default)(r,e);var a=S(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"getMarks",value:function(){var e=this.props.max;return(0,p.default)(5).reduce((function(t,a){var r=e*a/4,n=0===r?"0":"".concat(Math.floor(r),"Gi");return b(b({},t),{},(0,o.default)({},r,n))}),{})}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.visible,n=e.onOk,l=e.okText,o=e.onCancel,u=e.detail;return d.default.createElement(h.default.Form,{title:t(a),visible:r,icon:"scaling",data:u,okText:t(l),onCancel:o,onOk:n},this.renderInput())}},{key:"renderAlert",value:function(){return d.default.createElement(v.Alert,{className:y.default.alert,type:"warning",title:t("EXPAND_VOLUME"),icon:"exclamation",message:t("VOLUME_EXPAND_TIP")})}},{key:"renderInput",value:function(){var e=this.props,a=e.max,r=e.min,n=e.unit,l=this.getMarks();return d.default.createElement(v.Form.Item,{label:t("VOLUME_CAPACITY")},d.default.createElement(E.default,{name:"spec.resources.requests.storage",max:a,min:r,marks:l,unit:n,withInput:!0,onChange:this.handleChange}))}}]),r}(d.Component);a.default=_,_.propTypes={value:m.default.oneOfType([m.default.string,m.default.number]),detail:m.default.object,max:m.default.number,min:m.default.number,visible:m.default.bool,title:m.default.string,okText:m.default.string},_.defaultProps={detail:{},min:0,max:1024,unit:"Gi",title:"EXPAND_VOLUME",okText:"OK"}},function(e,t,a){e.exports={alert:"_27aGi1qudoX_elTsZw4M-y"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(31),r(6),r(48),r(10),r(4),r(23),r(24),r(17),r(64),r(75),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(31),r(6),r(28),r(48),r(42),r(10),r(4),r(23),r(57),r(24),r(17),r(64),r(75),r(7);var o=l(r(30)),u=l(r(61)),c=l(r(36)),s=l(r(37)),i=l(r(55)),f=l(r(56)),d=l(r(51)),p=n(r(0)),m=l(r(26)),v=l(r(74)),h=l(r(63)),E=l(r(135)),y=l(r(861)),g=l(r(3)),b=l(r(3606)),S=l(r(1101)),_=l(r(3608));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=function(e){(0,i.default)(r,e);var a=O(r);function r(){var e;(0,c.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={formData:e.getFormData(),isEdit:!1},e.showEdit=function(){e.setState({isEdit:!0}),e.props.onSelect(e.props.cluster)},e.hideEdit=function(){e.setState({isEdit:!1})},e.handleSubmit=function(t){var a=e.props,r=a.cluster,n=a.formTemplate,l=[];Object.keys(t.spec).forEach((function(e){var a="spec.".concat(e),r=(0,m.default)(t,a);(0,m.default)(n,"spec.template.".concat(a))!==r&&l.push({path:"/".concat(a.replace(/\./g,"/")),value:r})}));var o=(0,m.default)(n,"spec.overrides",[]),c=o.find((function(e){return e.clusterName===r}));c?c.clusterOverrides=(0,y.default)([].concat(l,(0,u.default)(c.clusterOverrides||[])),"path"):o.push({clusterName:r,clusterOverrides:l}),(0,v.default)(n,"spec.overrides",o),e.setState({formData:e.getFormData(),isEdit:!1})},e}return(0,s.default)(r,[{key:"getFormData",value:function(){var e=this.props,t=e.cluster,a=e.formTemplate,r=(0,m.default)(a,"spec.overrides",[]).find((function(e){return e.clusterName===t}))||{},n={spec:(0,E.default)((0,m.default)(a,"spec.template.spec"))};return r&&!(0,h.default)(r.clusterOverrides)&&r.clusterOverrides.forEach((function(e){if(e.path.startsWith("/spec")){var t=e.path.slice(1).replace(/\//g,".");(0,v.default)(n,t,e.value)}})),n}},{key:"render",value:function(){var e=this.props,a=e.cluster,r=e.namespace,n=e.selected,l=e.editModalTitle,u=e.title,c=e.onChange,s=this.state,i=s.formData,f=s.isEdit;return p.default.createElement("div",{className:(0,g.default)(_.default.wrapper,(0,o.default)({},_.default.selected,n))},p.default.createElement(b.default,{title:t("STORAGE_CLASS_VALUE",{value:(0,m.default)(i,"spec.storageClassName")}),formData:i,isEdit:f,showEdit:this.showEdit,hideEdit:this.hideEdit,onOk:this.handleSubmit,onChange:c},p.default.createElement(S.default,{cluster:a,namespace:r,editModalTitle:l,tabTitle:u})))}}]),r}(p.Component);a.default=C},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(828)),m=l(r(3607));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(r,e);var a=v(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).formRef=f.default.createRef(),e.handleSubmit=function(){var t=e.props,a=t.onOk,r=t.onChange,n=e.formRef.current;n&&n.validate((function(){a(n.getData()),r&&r()}))},e.handleCancel=function(){e.props.hideEdit()},e.handleOpen=function(){e.props.showEdit()},e}return(0,u.default)(r,[{key:"renderContent",value:function(){var e=this.props,t=e.formData,a=e.children;return f.default.createElement("div",{className:m.default.form},f.default.createElement(d.Form,{ref:this.formRef,type:"inner",data:t},f.default.createElement("div",{className:m.default.formContent},a)),f.default.createElement(p.default,{className:m.default.confirm,onOk:this.handleSubmit,onCancel:this.handleCancel}))}},{key:"render",value:function(){var e=this.props,a=e.title,r=e.selected,n=e.isEdit;return f.default.createElement(d.Dropdown,{visible:n,placement:"bottom",closeAfterClick:!1,onOpen:this.handleOpen,content:this.renderContent(),modifiers:this.modifiers,always:n},f.default.createElement("div",null,a,r&&f.default.createElement("span",{className:m.default.modify},f.default.createElement("span",null,t("EDIT")),f.default.createElement(d.Icon,{type:"light",size:20,name:"chevron-down"}))))}},{key:"modifiers",get:function(){return{computeStyle:{gpuAcceleration:!1}}}}]),r}(f.Component);a.default=h},function(e,t,a){e.exports={form:"msLppgLb31XNV2hAROzCF",formContent:"_2xXYl-4VecOZE86XX4THRo",modify:"vDTqlA_zC32lqD74tLyOO",confirm:"_32-qEsVwZwtGn6Ascvmi8G"}},function(e,t,a){e.exports={wrapper:"TPiC3uwJ6U_CLbzP1ZfsI",selected:"_2UTVKEKjjbtfJVJTiP3sww"}},function(e,t,a){"use strict";a(15);var r=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1)),p=r(a(1123)),m=r(a(3610));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module]}}]),a}(f.default.Component);t.default=h,h.propTypes={module:d.default.string},h.defaultProps={module:"deployments"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(1784)),o=r(a(3611)),u={deployments:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:l.default}],statefulsets:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:(0,n.withProps)(l.default,{withService:!0})}],daemonsets:[{icon:"storage",name:"volumeSettings",title:"STORAGE_SETTINGS",component:o.default},{icon:"blue-green-deployment",name:"diffSettings",title:"CLUSTER_DIFF",component:(0,n.withProps)(l.default,{withService:!0})}]};t.default=u},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=r(186),m=n(r(816)),v=n(r(1101)),h=n(r(1785)),E=n(r(1786));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=[{icon:"snapshot",value:!0,get label(){return t("CREATE_VOLUME_BY_SNAPSHOT")},get description(){return t("SELECT_SNAPSHOT_TO_CREATE_VOLUME")}},{icon:"database",value:!1,get label(){return t("CREATE_VOLUME_BY_STORAGE_CLASS")},get description(){return t("SELECT_STORAGE_CLASS_CREATE_VOLUME")}}],b=function(e){(0,c.default)(r,e);var a=y(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.isFederated,n=e.cluster,o=e.formProps,u=e.isEdit,c=this.state.fromSnapshot;return f.default.createElement(p.Form,(0,l.default)({data:this.fedFormTemplate,ref:a},o),!r&&f.default.createElement(p.Form.Item,{label:t("CREATION_METHOD")},f.default.createElement(m.default,{value:c,options:this.createTypeOption,onChange:this.handleChange})),c?f.default.createElement(h.default,{namespace:(0,d.default)(this.formTemplate,"metadata.namespace"),cluster:n}):f.default.createElement(v.default,{cluster:n,isFederated:r,isEdit:u}))}},{key:"createTypeOption",get:function(){var e=g;return globals.app.hasKSModule("storage-utils")||e.shift(),e}}]),r}(E.default);a.default=b},function(e,t,a){e.exports={snapshot:"Q_j-P1zbmXBVWMfs9s-An",selected:"_3rYCc2IQL6MTwzE1TSkA9J",snapshotContainer:"_2aQDxEL3MZKJw-6JxlVL2L",snapshots:"_3sCkMrQKrGRc8hr3259-Ra"}},function(e,t,a){"use strict";var r=a(157),n=a(20);a(12),a(11),a(31),a(6),a(18),a(16),a(9),a(13),a(10),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(11),a(31),a(6),a(18),a(28),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(7);var l=n(a(315)),o=n(a(43)),u=n(a(30));a(41);var c=n(a(44)),s=n(a(96)),i=n(a(58)),f=a(186),d=a(239),p=r(a(0)),m=n(a(907)),v=n(a(241)),h=a(14);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=(0,d.observer)((function(e){var t=e.onChange,a=(0,i.default)(e,["onChange"]),r=(0,d.useLocalStore)((function(){return new m.default})),n=(0,p.useState)([]),u=(0,s.default)(n,2),E=u[0],g=u[1],b=function(){var e=(0,c.default)(o.default.mark((function e(){var t,a,n=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,r.fetchList(y(y({},t),{},{status:"available"}));case 3:a=r.list.data.map((function(e){return{label:e.name,value:e.name}})),g(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){b()}),[]);var S=r.list;return p.default.createElement(f.Select,(0,l.default)({pagination:(0,v.default)(S,["page","limit","total"]),isLoading:S.isLoading,onChange:function(e){if(e){var a=r.list.data.find((function(t){return t.name===e}));t(e,(0,h.toJS)(a))}else t(e)},options:E,onFetch:b,searchable:!0,clearable:!0},a))}));t.default=g},function(e,t,a){e.exports={wrapper:"_2a9sRw3e8FcMiSbR4y1l_2",action:"_3DAwICPafejRhgveWMIef7"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.APPLY_SNAPSHOT_FORM_STEPS=t.default=void 0;var n=r(a(974)),l=r(a(1786)),o=r(a(3616)),u=r(a(3618)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:l.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.default=c;var s=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:u.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:o.default,required:!0}];t.APPLY_SNAPSHOT_FORM_STEPS=s},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=r(72),p=r(186),m=n(r(3617));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.store,r=e.formRef;return i.default.createElement(p.Form,{data:this.fedFormTemplate,ref:r},i.default.createElement(p.Form.Group,{label:t("ADD_METADATA"),desc:t("VOLUME_ADD_METADATA_DESC"),keepDataWhenUnCheck:!0,checkable:!0},i.default.createElement(m.default,{store:a,cluster:this.cluster,namespace:this.namespace,formTemplate:this.fedFormTemplate})))}},{key:"cluster",get:function(){return this.props.cluster}},{key:"namespace",get:function(){return(0,f.default)(this.formTemplate,"metadata.namespace")}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}},{key:"fedFormTemplate",get:function(){return this.props.isFederated?(0,f.default)(this.formTemplate,"spec.template"):this.formTemplate}}]),r}(i.default.Component);a.default=h},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(842));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var m=function(e){(0,u.default)(r,e);var a=p(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(i.default.Fragment,null,i.default.createElement(f.Form.Item,{label:t("LABEL_PL")},i.default.createElement(d.default,{name:"metadata.labels",addText:t("ADD")})),i.default.createElement(f.Form.Item,{label:t("ANNOTATION_PL")},i.default.createElement(d.default,{name:"metadata.annotations",addText:t("ADD")})))}}]),r}(i.default.Component);a.default=m},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=r(72),p=r(186),m=n(r(1363));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=["ReadWriteOnce","ReadOnlyMany","ReadWriteMany"],E=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement(p.Form,{data:this.formTemplate,ref:e},i.default.createElement(p.Form.Item,{label:t("ACCESS_MODE_TCAP"),rules:[{required:!0}]},i.default.createElement(m.default,{name:"spec.accessModes[0]",defaultValue:(0,f.default)(h,"[0]",""),supportedAccessModes:h})))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,f.default)(t,d.MODULE_KIND_MAP[a],t)}}]),r}(i.default.Component);a.default=E},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1755)),l=r(a(3620)),o=[{title:"BASIC_INFORMATION",component:n.default,required:!0},{title:"SNAPSHOT_CLASS_SETTINGS",component:l.default,required:!0}];t.default=o},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var l,o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(26)),p=n(r(247)),m=r(186),v=r(72),h=n(r(866)),E=r(14);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var g=(0,r(239).observer)(l=function(e){(0,c.default)(r,e);var a=y(r);function r(){var e;(0,o.default)(this,r);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).storageClass=new h.default,e}return(0,u.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.cluster;this.storageClass.fetchList({cluster:e,limit:-1})}},{key:"render",value:function(){var e=this.props.formRef;return f.default.createElement("div",null,f.default.createElement(m.Form,{data:this.formTemplate,ref:e},f.default.createElement(m.Columns,null,f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("PROVISIONER"),desc:t("SNAPSHOT_CLASS_PROVISIONER_DESC"),rules:[{required:!0,message:t("SNAPSHOT_CLASS_PROVISIONER_EMPTY_DESC")}]},f.default.createElement(m.Select,{name:"driver",options:this.provisionerOption}))),f.default.createElement(m.Column,null,f.default.createElement(m.Form.Item,{label:t("DELETION_POLICY")},f.default.createElement(m.Select,{name:"deletionPolicy",defaultValue:"Delete",options:this.options}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,d.default)(t,v.MODULE_KIND_MAP[a],t)}},{key:"options",get:function(){return[{label:"Delete",value:"Delete"},{label:"Retain",value:"Retain"}]}},{key:"provisionerOption",get:function(){var e=(0,E.toJS)(this.storageClass.list.data).map((function(e){return e.provisioner}));return(0,p.default)(e).map((function(e){return{label:e,value:e}}))}}]),r}(f.default.Component))||l;a.default=g},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(28),r(34),r(15),r(9),r(13),r(10),r(4),r(7);var l=n(r(30)),o=n(r(58)),u=n(r(240)),c=n(r(787)),s=n(r(63)),i=n(r(3622)),f=n(r(824));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={"whizard.storage.delete":{on:function(e){var a=e.store,r=(e.detail,e.success),n=(0,o.default)(e,["store","detail","success"]),l=function(){c.default.close(i),u.default.success({content:t("DISABLE_SUCCESSFUL")}),r&&r()},i=c.default.open(p({onOk:function(){(0,s.default)(a.storage.data)?l():a.deleteStorage().then((function(){l()}))},store:a,modal:f.default,title:t("DISABLE_STORAGE"),desc:t("DISABLE_STORAGE_DESC"),type:"STORAGE"},n))}},"whizard.create":{on:function(e){var a=e.store,r=e.success,n=(0,o.default)(e,["store","success"]),l=c.default.open(p({onOk:function(e){a.updateConfigs(e).then((function(){c.default.close(l),u.default.success({content:t("UPDATE_SUCCESSFUL")}),r&&r()}))},store:a,modal:i.default,icon:"cogwheel",title:t("COMPONENT_PARAMETER_CONFIG"),type:"STORAGE"},n))}}};a.default=m},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(18),r(87),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(87),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(30)),d=n(r(36)),p=n(r(37)),m=n(r(55)),v=n(r(56)),h=n(r(51)),E=l(r(0)),y=r(239),g=n(r(26)),b=n(r(198)),S=n(r(63)),_=n(r(199)),O=r(14),C=n(r(1)),T=n(r(3)),R=r(186),D=n(r(787)),N=n(r(828)),k=n(r(435)),I=n(r(3623)),P=n(r(3640));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var L=(0,y.observer)((s=c=function(e){(0,m.default)(n,e);var a,r=M(n);function n(e){var t;return(0,d.default)(this,n),(t=r.call(this,e)).setError=function(e){t.setState({error:e})},t.handleSubFormSave=function(e){t.state.error||t["ref".concat(e)].current&&t["ref".concat(e)].current.handleSubmit((function(){t.cancelUpdate(e)}))},t.handleDiscardChanges=function(e){t.handleSubFormCancel(e),t.cancelUpdate(e)},t.cancelUpdate=function(e){var a=w({},t.state.updatedTabs);delete a[e],t.setState({updatedTabs:a})},t.handleSubFormCancel=function(e){t["ref".concat(e)].current&&t["ref".concat(e)].current.resetData()},t.registerUpdate=function(e,a){var r=t.state.updatedTabs;t.setState({updatedTabs:w(w({},r),{},(0,f.default)({},e,a))})},t.handleCancel=function(){t.props.onCancel()},t.handleOk=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.onOk(t.state.formTemplate);case 1:case"end":return e.stop()}}),e)}))),t.handleChangeTab=function(e){var a=e.currentTarget.dataset.name;a&&t.setState({activeTab:a,error:!1})},t.onSave=function(e,a){t.setState({formTemplate:a.reduce((function(t,a){return(0,_.default)(t,(0,f.default)({},a,(0,g.default)(e,a,{})))}),w({},t.state.formTemplate))})},t.renderTabs=function(){var e=t.state,a=e.activeTab,r=e.updatedTabs;return E.default.createElement("ul",{className:P.default.tabs},t.tabs.map((function(e){var n=e.icon,l=void 0===n?"appcenter":n,o=e.title,u=e.name,c=u===a,s=c?"light":"dark";return E.default.createElement("li",{onClick:t.handleChangeTab,key:o,"data-name":u,className:(0,T.default)((0,f.default)({},P.default.active,c))},E.default.createElement(R.Tooltip,{placement:"bottomLeft",content:(0,b.default)(r,u)?t.updateTip:""},E.default.createElement("span",{className:P.default.tooltipTrigger},E.default.createElement(R.Icon,{name:l,size:20,type:s}),(0,b.default)(r,u)&&E.default.createElement("span",{className:P.default.tipIcon}))),E.default.createElement("p",null,o))})))},t.renderContent=function(){var e=t.state,a=e.activeTab,r=e.formTemplate,n=e.updatedTabs,l=t.tabs.filter((function(e){return e.name===a}))[0];return(0,S.default)(r)||!l?null:(t["ref".concat(a)]=(0,E.createRef)(),(0,E.createElement)(l.component,{updatedData:(0,g.default)(n,a,null),formTemplate:r,onSave:t.onSave,cancelUpdate:t.cancelUpdate,store:t.store,ref:t["ref".concat(a)],rootStore:t.props.rootStore}))},t.state={activeTab:"dataAccess",error:!1,formTemplate:{},updatedTabs:{}},t}return(0,p.default)(n,[{key:"getChildContext",value:function(){return{registerUpdate:this.registerUpdate,setError:this.setError}}}]),(0,p.default)(n,[{key:"componentDidMount",value:function(){this.fetchConfigs()}},{key:"fetchConfigs",value:(a=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.store.fetchConfigs();case 2:this.setState({formTemplate:(0,_.default)({},k.default.whizard(),(0,O.toJS)(this.store.configs.data))});case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this,a=this.props.visible,r=this.state,n=r.activeTab,l=r.updatedTabs,o=this.store.configs.isLoading;return E.default.createElement(D.default,{bodyClassName:P.default.body,width:1162,title:t("COMPONENT_PARAMETER_CONFIG"),icon:"cogwheel",visible:a,onCancel:this.handleCancel,hideFooter:!0},E.default.createElement(R.Loading,{spinning:o},E.default.createElement("div",{className:P.default.wrapper},this.renderTabs(),E.default.createElement("div",{className:P.default.content},E.default.createElement("div",{className:P.default.main},this.renderContent()),E.default.createElement(N.default,{className:(0,T.default)(P.default.confirm,(0,f.default)({},P.default.confirmActive,(0,b.default)(l,n))),onOk:function(){return e.handleSubFormSave(n)},onCancel:function(){return e.handleDiscardChanges(n)}})))),E.default.createElement("div",{className:P.default.formFooter},E.default.createElement(R.Button,{type:"default",onClick:this.handleCancel,"data-test":"modal-cancel"},t("CANCEL")),E.default.createElement(R.Button,{type:"control",htmlType:"submit",loading:this.store.isSubmitting,disabled:!(0,S.default)(l),onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}},{key:"updateTip",get:function(){return E.default.createElement("div",{className:P.default.tip},E.default.createElement("h6",null,t("CONTENT_NOT_SAVED_TIPS")),E.default.createElement("p",null,t("SAVE_EDIT_HINTS")))}},{key:"tabs",get:function(){return I.default}},{key:"store",get:function(){return this.props.store}}]),n}(E.Component),c.propTypes={store:C.default.object,rootStore:C.default.object,title:C.default.string,visible:C.default.bool,onOk:C.default.func,onCancel:C.default.func,isSubmitting:C.default.bool},c.childContextTypes={registerUpdate:C.default.func,setError:C.default.func},u=s))||u;a.default=L},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(3624)),o=n(r(3628)),u=n(r(3631)),c=n(r(3639)),s=[{title:t("DATA_ACCESS"),name:"dataAccess",icon:"object-storage-duotone",component:l.default},{title:t("DATA_QUERY"),name:"dataQuery",icon:"magnifier",component:o.default},{title:t("LONG_TERM_STORAGE"),name:"storage",icon:"storage",component:u.default},{title:t("RULE_CALCULATION"),name:"ruler",icon:"computing",component:c.default}];a.default=s},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o,u,c,s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=l(r(0)),v=r(239),h=n(r(1)),E=r(186),y=n(r(135)),g=n(r(3625)),b=n(r(3626)),S=n(r(3627));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var O=E.Tabs.TabPanel,C=(0,v.observer)((c=u=function(e){(0,f.default)(r,e);var a=_(r);function r(e){var t;(0,s.default)(this,r),(t=a.call(this,e)).handleFormChange=function(){var e=t.state.formTemplate;(0,t.context.registerUpdate)(t.name,e)},t.handleSubmit=function(e){var a=t.props.onSave,r=t.state.formTemplate;t.formRef.current&&t.formRef.current.validate((function(){a(r,["gateway","ingester","router"]),e&&e()}))},t.resetData=function(){t.setState({formTemplate:(0,y.default)(t.props.formTemplate)})};var n=t.props,l=n.updatedData,o=n.formTemplate,u=l||o;return t.state={formTemplate:(0,y.default)(u)},t.formRef=(0,m.createRef)(),t}return(0,i.default)(r,[{key:"name",get:function(){return"dataAccess"}}]),(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.updatedData,r=t.formTemplate,n=a||r;e.formTemplate===r&&e.updatedData===a||this.setState({formTemplate:(0,y.default)(n)})}},{key:"render",value:function(){var e=this.state.formTemplate;return m.default.createElement(E.Form,{onChange:this.handleFormChange,data:e,ref:this.formRef},m.default.createElement(E.Tabs,{type:"button"},this.tabs.map((function(t){var a=t.label,r=t.value,n=t.Component;return m.default.createElement(O,{label:a,name:r,key:r},m.default.createElement(n,{formTemplate:e}))}))))}},{key:"tabs",get:function(){return[{label:t("GATEWAY_SETTINGS"),value:"gateway",Component:g.default},{label:t("DATA_ROUTER"),value:"router",Component:b.default},{label:t("LOCAL_STORAGE"),value:"ingester",Component:S.default}]}}]),r}(m.default.Component),u.contextTypes={registerUpdate:h.default.func,setError:h.default.func},o=c))||o;a.default=C},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(26)),h=r(239),E=r(1),y=r(186),g=n(r(799)),b=n(r(872));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(y.Form.Group,null,m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("COMPONENT_REPLICA_COUNT"),desc:t("REPLICA_DESC",{default:2,resource:t("GATEWAY_COMPONENT_LOW")})},m.default.createElement(g.default,{name:"gateway.replicas",integer:!0,min:0,defaultValue:2,controls:!0}))),m.default.createElement(y.Column,null)),m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(b.default,(0,c.default)({name:"gateway.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,v.default)(t,'gateway.resources["limits.cpu"]'),memory:(0,v.default)(t,'gateway.resources["limits.memory"]')},requests:{cpu:(0,v.default)(t,'gateway.resources["requests.cpu"]'),memory:(0,v.default)(t,'gateway.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:E.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(18),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(26)),h=r(239),E=r(1),y=r(186),g=n(r(799)),b=n(r(872));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).replicasValidator=function(a,r,n){return r>(0,v.default)(e.props.formTemplate,"ingester.replicas")?n({message:t("LOCAL_STORAGE_ERROR_MESSAGE")}):n()},e}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(y.Form.Group,null,m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("DATA_RETENTION_REPLICA_COUNT"),desc:t("REPLICA_DESC",{resource:t("DATA_RETENTION_LOW"),default:1}),rules:[{validator:this.replicasValidator}]},m.default.createElement(y.Select,{name:"router.replicationFactor",options:this.replicationFactorOpts,defaultValue:1}))),m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("COMPONENT_REPLICA_COUNT"),desc:t("REPLICA_DESC",{resource:t("ROUTER_COMPONENT_LOW"),default:2})},m.default.createElement(g.default,{name:"router.replicas",integer:!0,min:0,defaultValue:2,controls:!0})))),m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(b.default,(0,c.default)({name:"router.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,v.default)(t,'router.resources["limits.cpu"]'),memory:(0,v.default)(t,'router.resources["limits.memory"]')},requests:{cpu:(0,v.default)(t,'router.resources["requests.cpu"]'),memory:(0,v.default)(t,'router.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}},{key:"replicationFactorOpts",get:function(){return[1,2,3].map((function(e){return{label:e,value:e}}))}}]),r}(m.default.Component),o.contextTypes={setError:E.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(26)),h=r(239),E=r(1),y=r(186),g=n(r(799)),b=n(r(872));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){var e;(0,s.default)(this,r);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).replicasValidator=function(a,r,n){return r<(0,v.default)(e.props.formTemplate,"router.replicationFactor")?n({message:t("LOCAL_STORAGE_ERROR_MESSAGE")}):n()},e}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(y.Form.Group,null,m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("LOCAL_STORAGE_TIME"),desc:t("LOCAL_STORAGE_TIME_DESC")},m.default.createElement(g.default,{name:"ingester.localTsdbRetention",min:3,unit:"d",integer:!0,defaultValue:7}))),m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("COMPONENT_REPLICA_COUNT"),desc:t("REPLICA_DESC",{resource:t("LOCAL_STORAGE_LOW"),default:2}),rules:[{validator:this.replicasValidator}]},m.default.createElement(g.default,{name:"ingester.replicas",integer:!0,min:0,defaultValue:2,controls:!0})))),m.default.createElement(y.Columns,null,m.default.createElement(y.Column,null,m.default.createElement(y.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(b.default,(0,c.default)({name:"ingester.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,v.default)(t,'ingester.resources["limits.cpu"]'),memory:(0,v.default)(t,'ingester.resources["limits.memory"]')},requests:{cpu:(0,v.default)(t,'ingester.resources["requests.cpu"]'),memory:(0,v.default)(t,'ingester.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:E.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20),l=r(157);r(18),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(17);var o,u,c,s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=l(r(0)),v=r(239),h=n(r(1)),E=r(186),y=n(r(135)),g=n(r(3629)),b=n(r(3630));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=E.Tabs.TabPanel,O=(0,v.observer)((c=u=function(e){(0,f.default)(r,e);var a=S(r);function r(e){var t;(0,s.default)(this,r),(t=a.call(this,e)).handleFormChange=function(){var e=t.state.formTemplate;(0,t.context.registerUpdate)(t.name,e)},t.handleSubmit=function(e){var a=t.props.onSave,r=t.state.formTemplate;t.formRef.current&&t.formRef.current.validate((function(){a(r,["query","queryFrontend"]),e&&e()}))},t.resetData=function(){t.setState({formTemplate:(0,y.default)(t.props.formTemplate)})};var n=t.props,l=n.updatedData,o=n.formTemplate;return t.state={formTemplate:(0,y.default)(l||o)},t.formRef=(0,m.createRef)(),t}return(0,i.default)(r,[{key:"name",get:function(){return"dataQuery"}}]),(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.updatedData,r=t.formTemplate;e.formTemplate===r&&e.updatedData===a||this.setState({formTemplate:(0,y.default)(a||r)})}},{key:"render",value:function(){var e=this.state.formTemplate;return m.default.createElement(E.Form,{onChange:this.handleFormChange,data:e,ref:this.formRef},m.default.createElement(E.Tabs,{type:"button"},this.tabs.map((function(t){var a=t.label,r=t.value,n=t.Component;return m.default.createElement(_,{label:a,name:r,key:r},m.default.createElement(n,{formTemplate:e}))}))))}},{key:"tabs",get:function(){return[{label:t("BASIC_SETTING"),value:"basic",Component:g.default},{label:t("CACHE_SETTING"),value:"cache",Component:b.default}]}}]),r}(m.default.Component),u.contextTypes={registerUpdate:h.default.func,setError:h.default.func},o=c))||o;a.default=O},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=r(239),h=r(1),E=n(r(26)),y=n(r(799)),g=n(r(872)),b=r(186);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,v.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(b.Form.Group,null,m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("COMPONENT_REPLICA_COUNT"),desc:t("REPLICA_DESC",{resource:t("QUERY_COMPONENT_LOW"),default:2})},m.default.createElement(y.default,{name:"query.replicas",integer:!0,min:0,defaultValue:2,controls:!0}))),m.default.createElement(b.Column,null)),m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(g.default,(0,c.default)({name:"query.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,E.default)(t,'query.resources["limits.cpu"]'),memory:(0,E.default)(t,'query.resources["limits.memory"]')},requests:{cpu:(0,E.default)(t,'query.resources["requests.cpu"]'),memory:(0,E.default)(t,'query.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:h.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=r(239),h=r(1),E=n(r(26)),y=n(r(799)),g=n(r(872)),b=r(186);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,v.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(b.Form.Group,null,m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("COMPONENT_REPLICA_COUNT"),desc:t("REPLICA_DESC",{resource:t("CACHE_COMPONENT_LOW"),default:2})},m.default.createElement(y.default,{name:"queryFrontend.replicas",integer:!0,min:0,defaultValue:2,controls:!0}))),m.default.createElement(b.Column,null)),m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(g.default,(0,c.default)({name:"queryFrontend.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,E.default)(t,'queryFrontend.resources["limits.cpu"]'),memory:(0,E.default)(t,'queryFrontend.resources["limits.memory"]')},requests:{cpu:(0,E.default)(t,'queryFrontend.resources["requests.cpu"]'),memory:(0,E.default)(t,'queryFrontend.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:h.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(87),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(87),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(7);var o=n(r(43));r(41);var u,c,s,i=n(r(44)),f=n(r(30)),d=n(r(36)),p=n(r(37)),m=n(r(55)),v=n(r(56)),h=n(r(51)),E=l(r(0)),y=r(239),g=n(r(1)),b=n(r(135)),S=n(r(60)),_=n(r(63)),O=n(r(806)),C=r(186),T=n(r(790)),R=n(r(850)),D=n(r(884)),N=r(791),k=r(14),I=n(r(435)),P=n(r(3632)),A=n(r(3634)),w=n(r(3635)),M=n(r(3636)),L=n(r(3638));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,h.default)(e);if(t){var n=(0,h.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,v.default)(this,a)}}var F=C.Tabs.TabPanel,V=(0,N.trigger)(u=(0,y.observer)((s=c=function(e){(0,m.default)(n,e);var a,r=U(n);function n(e){var t;(0,d.default)(this,n),(t=r.call(this,e)).getFormDataFromCode=function(e){var a=t.props.code2formParse;return(void 0===a?function(e){return e}:a)((0,S.default)(e)?e.reduce((function(e,t){return x(x({},e),t)}),{}):e)},t.handleModeChange=function(){var e=t.props.form2codeParse,a=void 0===e?function(e){return e}:e;t.setState((function(e){var r=e.isCodeMode,n=e.storageFormTemplate,l={storageFormTemplate:a(n),isCodeMode:!r};return r&&(l.storageFormTemplate=t.getFormDataFromCode(t.getData())),l}))},t.handleFormChange=function(){var e=t.state,a=e.formTemplate,r=e.storageFormTemplate,n=e.enabledStorage;(0,t.context.registerUpdate)(t.name,{enabledStorage:n,formTemplate:a,storageFormTemplate:r})},t.handleStorageChange=function(){var e=t.state,a=e.formTemplate,r=e.storageFormTemplate,n=e.enabledStorage,l=t.context.registerUpdate;t.setState({hasObjectSet:!1}),l(t.name,{enabledStorage:n,formTemplate:a,storageFormTemplate:r})},t.verifyStorage=function(){var e=(0,i.default)(o.default.mark((function e(a){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.store,e.abrupt("return",r.verifyStorage(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleStorageSubmit=function(){var e=(0,i.default)(o.default.mark((function e(a){var r,n,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.state.isCodeMode,n=t.props.store,l=!(0,_.default)(t.storageData),!r){e.next=7;break}e.t0=t.getFormDataFromCode(t.getData()),e.next=10;break;case 7:return e.next=9,t.getFormData();case 9:e.t0=e.sent;case 10:return u=e.t0,e.next=13,t.verifyStorage(u);case 13:if(!l){e.next=18;break}return e.next=16,n.updateStorage(u);case 16:e.next=20;break;case 18:return e.next=20,n.createStorage(u);case 20:t.setState({hasObjectSet:!0}),a();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleSubmit=function(e){var a=t.props.onSave,r=t.state,n=r.formTemplate;"objectStorage"===r.type?t.handleStorageSubmit(e):t.formRef.current&&t.formRef.current.validate((function(){a(n,["store","compactor"]),e()}))},t.handleTabChange=function(e){return t.setState({type:e})},t.resetData=function(){var e=t.props.formTemplate,a=(0,b.default)(t.storageData);t.setState({formTemplate:(0,b.default)(e),storageFormTemplate:(0,_.default)(a)?(0,b.default)(I.default[t.name]()):a,hasObjectSet:!(0,_.default)(a)})},t.handleStorageEnabledChange=function(e){var a=t.props,r=a.store,n=a.cancelUpdate;e||t.trigger("whizard.storage.delete",{store:t.props.store,success:function(){r.storage.data={},t.resetData(),n(t.name),t.setState({enabledStorage:e})}})},t.handleEnabledStorage=function(){var e=t.state,a=e.formTemplate,r=e.storageFormTemplate,n=e.enabledStorage;(0,t.context.registerUpdate)(t.name,{enabledStorage:n,formTemplate:a,storageFormTemplate:r}),t.setState(x(x({},t.state),{},{enabledStorage:!0}))};var a=t.props,l=a.updatedData,u=a.formTemplate,c=l||{},s=c.formTemplate,f=c.storageFormTemplate,p=c.enabledStorage,m=f||t.storageData,v=s||u;return t.state={type:"objectStorage",isCodeMode:!1,enabledStorage:p||!(0,_.default)(m),hasObjectSet:(0,O.default)(f,t.storageData),formTemplate:(0,b.default)(v),storageFormTemplate:(0,b.default)(m)},t.formRef=(0,E.createRef)(),t.storageFormRef=(0,E.createRef)(),t.editor=(0,E.createRef)(),t}return(0,p.default)(n,[{key:"name",get:function(){return"storage"}},{key:"storageData",get:function(){return(0,k.toJS)(this.props.store.storage.data)}}]),(0,p.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.updatedData,r=t.formTemplate,n=this.state.storageFormTemplate,l=a||{},o=l.formTemplate,u=l.storageFormTemplate;e.formTemplate===r&&e.updatedData===a||this.setState({formTemplate:(0,b.default)(o||r),storageFormTemplate:u?(0,b.default)(u):n})}},{key:"componentDidMount",value:function(){this.fetchStorage()}},{key:"getData",value:function(){return this.editor.current.getData()}},{key:"fetchStorage",value:(a=(0,i.default)(o.default.mark((function e(){var t,a,r,n,l,u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.updatedData,r=t.store,l=(n=a||{}).storageFormTemplate,u=n.enabledStorage,!l&&!u){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r.fetchStorage();case 6:c=(0,b.default)(this.storageData),this.setState(x(x({},this.state),{},{enabledStorage:!(0,_.default)(c),hasObjectSet:!(0,_.default)(c),storageFormTemplate:(0,_.default)(c)?(0,b.default)(I.default[this.name]()):c}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getFormData",value:function(){var e=this;return new Promise((function(t){e.storageFormRef.current&&e.storageFormRef.current.validate((function(){t(e.storageFormRef.current.getData())}))}))}},{key:"renderForms",value:function(){var e=this.state.storageFormTemplate;return E.default.createElement(C.Form,{data:e,ref:this.storageFormRef,onChange:this.handleStorageChange},E.default.createElement(M.default,null))}},{key:"renderCodeEditor",value:function(){var e=this.state.storageFormTemplate;return E.default.createElement(D.default,{ref:this.editor,value:{formTemplate:e},onChange:this.handleStorageChange})}},{key:"renderOperations",value:function(){var e=this.state,a=e.isCodeMode;return"objectStorage"!==e.type?null:E.default.createElement(R.default,{className:L.default.yamlSwitch,text:t("EDIT_YAML"),onChange:this.handleModeChange,checked:a})}},{key:"render",value:function(){var e=this.state,a=e.enabledStorage,r=e.type,n=e.isCodeMode,l=e.formTemplate,o=e.hasObjectSet,u=this.props.store;return a?E.default.createElement(E.default.Fragment,null,E.default.createElement("div",{className:L.default.wrapper},E.default.createElement("div",{className:L.default.textWrapper},E.default.createElement(T.default,{className:L.default.text,icon:function(){return E.default.createElement(C.Icon,{name:"storage",size:40,style:{marginRight:"12px"}})},title:t("LONG_TERM_STORAGE"),description:t("LONG_TERM_STORAGE_TIPS")}),E.default.createElement(R.default,{className:L.default.switch,text:a?t("ENABLED"):t("DISABLED"),checked:a,onChange:this.handleStorageEnabledChange}))),E.default.createElement("div",{className:L.default.form},E.default.createElement(C.Tabs,{type:"button",value:r,onChange:this.handleTabChange},E.default.createElement(F,{label:t("OBJECT_STORAGE"),name:"objectStorage"},n?this.renderCodeEditor():this.renderForms()),E.default.createElement(F,{label:o?t("STORE_GATEWAY"):E.default.createElement(C.Tooltip,{className:L.default.tooltip,content:t("OBJECT_STORAGE_TIPS"),placement:"top"},E.default.createElement("span",null,t("STORE_GATEWAY"))),name:"store",disabled:!o},E.default.createElement(C.Form,{ref:this.formRef,data:l,onChange:this.handleFormChange},E.default.createElement(w.default,{formTemplate:l}))),E.default.createElement(F,{label:o?t("COMPRESSION_DOWNSAMPLING"):E.default.createElement(C.Tooltip,{className:L.default.tooltip,content:t("OBJECT_STORAGE_TIPS"),placement:"top"},E.default.createElement("span",null,t("COMPRESSION_DOWNSAMPLING"))),disabled:!o,name:"compactor"},E.default.createElement(C.Form,{ref:this.formRef,data:l,onChange:this.handleFormChange},E.default.createElement(A.default,{formTemplate:l})))),this.renderOperations())):E.default.createElement(C.Loading,{spinning:u.storage.isLoading},E.default.createElement(P.default,{handleEnabledStorage:this.handleEnabledStorage}))}}]),n}(E.default.Component),c.contextTypes={registerUpdate:g.default.func,setError:g.default.func},u=s))||u)||u;a.default=V},function(e,a,r){"use strict";r(15);var n=r(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(r(0)),o=r(186),u=n(r(789)),c=n(r(3633)),s=function(e){var a=e.handleEnabledStorage;return l.default.createElement(u.default,{className:"margin-t12 margin-b12"},l.default.createElement("div",{className:c.default.empty},l.default.createElement("div",{className:c.default.icon},l.default.createElement(o.Icon,{name:"loadbalancer",size:48})),l.default.createElement("div",{className:c.default.text},l.default.createElement("div",null,t("STORAGE_NOT_ENABLED")),l.default.createElement("p",null,t("STORAGE_ENABLE_GATEWAY_DESC"))),l.default.createElement(o.Button,{type:"control",onClick:a},t("ON"))))};a.default=s},function(e,t,a){e.exports={empty:"_1KuEIP87-KKKXfPMrdGslD",icon:"_1jT-9TQc8N822zZ45lFYKG",text:"_1f0xp4mnQb8j9cp3VYC7Ln"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=n(r(26)),h=r(239),E=r(1),y=n(r(799)),g=n(r(872)),b=r(186);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=S(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(b.Form.Group,null,m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("RETENTION_RAW"),desc:t("RETENTION_RAW_DESC")},m.default.createElement(y.default,{name:"compactor.retention.retentionRaw",unit:"d",integer:!0,min:0,defaultValue:60}))),m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("RETENTION_FIVE_MIN"),desc:t("RETENTION_FIVE_MIN_DESC")},m.default.createElement(y.default,{name:"compactor.retention.retention5m",unit:"d",integer:!0,min:0,defaultValue:180})))),m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("RETENTION_ONE_HOUR"),desc:t("RETENTION_ONE_HOUR_DESC")},m.default.createElement(y.default,{name:"compactor.retention.retention1h",unit:"d",integer:!0,min:0,defaultValue:360})))),m.default.createElement(b.Columns,null,m.default.createElement(b.Column,null,m.default.createElement(b.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(g.default,(0,c.default)({name:"compactor.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,v.default)(t,'compactor.resources["limits.cpu"]'),memory:(0,v.default)(t,'compactor.resources["limits.memory"]')},requests:{cpu:(0,v.default)(t,'compactor.resources["requests.cpu"]'),memory:(0,v.default)(t,'compactor.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:E.PropTypes.func},l=u))||l;a.default=_},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(315)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=r(239),h=r(1),E=n(r(26)),y=n(r(872)),g=r(186);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,v.observer)((u=o=function(e){(0,f.default)(r,e);var a=b(r);function r(){return(0,s.default)(this,r),a.apply(this,arguments)}return(0,i.default)(r,[{key:"render",value:function(){return m.default.createElement(g.Form.Group,null,m.default.createElement(g.Columns,null,m.default.createElement(g.Column,null,m.default.createElement(g.Form.Item,{label:t("CONTAINER_QUOTA")},m.default.createElement(y.default,(0,c.default)({name:"store.resources"},this.resourceLimitProps))))))}},{key:"resourceLimitProps",get:function(){var e=this,t=this.props.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,E.default)(t,'store.resources["limits.cpu"]'),memory:(0,E.default)(t,'store.resources["limits.memory"]')},requests:{cpu:(0,E.default)(t,'store.resources["requests.cpu"]'),memory:(0,E.default)(t,'store.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(m.default.Component),o.contextTypes={setError:h.PropTypes.func},l=u))||l;a.default=S},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(1099)),p=n(r(842)),m=r(1),v=n(r(3)),h=n(r(3637));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).toggleAdvanced=function(){t.setState({showAdvanced:!t.state.showAdvanced})},t.handleError=function(e){t.context.setError(!!e)},t.state={showAdvanced:!1},t}return(0,o.default)(r,[{key:"render",value:function(){return i.default.createElement(f.Form.Group,null,i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("BUCKET"),desc:t("BUCKET_NAME_DESC"),rules:[{required:!0,message:t("BUCKET_NAME_EMPTY_TIP")}]},i.default.createElement(f.Input,{name:"bucket"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("REGION"),desc:t("REGION_DESC")},i.default.createElement(f.Input,{name:"region"})))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("ENDPOINT"),desc:t("ENDPOINT_DESC"),rules:[{required:!0,message:t("ENDPOINT_EMPTY_TIP")}]},i.default.createElement(f.Input,{name:"endpoint"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("ACCESS_KEY"),desc:t("ACCESS_KEY_DESC"),rules:[{required:!0,message:t("ACCESS_KEY_EMPTY_TIP")}]},i.default.createElement(f.Input,{name:"access_key"})))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("SECRET_KEY"),desc:t("SECRET_KEY_DESC"),rules:[{required:!0,message:t("SECRET_KEY_EMPTY_TIP")}]},i.default.createElement(f.Input,{name:"secret_key"})))),i.default.createElement("div",{className:h.default.advanced,onClick:this.toggleAdvanced},i.default.createElement("span",null,t("ADVANCED_SETTINGS")),i.default.createElement(f.Icon,{name:this.state.showAdvanced?"chevron-up":"chevron-down",size:"20"})),this.state.showAdvanced&&i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"margin-b12"},i.default.createElement("div",{className:h.default.content},i.default.createElement(f.Form.Item,null,i.default.createElement(d.default,{name:"insecure",title:t("HTTP_PROTOCOL"),description:t("HTTP_PROTOCOL_DESC")})))),i.default.createElement("div",{className:"margin-b12"},i.default.createElement(f.Form.Group,{label:t("ADD_STORAGE_CLASS"),desc:t("ADD_STORAGE_CLASS_DESC"),checkable:!0},i.default.createElement("div",{className:h.default.expandContent},i.default.createElement(f.Form.Item,{label:t("OBJECT_STORAGE_PARAMETERS")},i.default.createElement(p.default,{name:"put_user_metadata",addText:t("ADD"),onError:this.handleError}))))),i.default.createElement(f.Form.Group,{label:t("HTTP_CONFIGURATION"),desc:t("HTTP_CONFIGURATION_DESC"),checkable:!0},i.default.createElement("div",{className:h.default.expandContent},i.default.createElement("div",{className:"margin-b12"},i.default.createElement("div",{className:h.default.title},t("TLS_CERTIFICATE")),i.default.createElement("div",{className:h.default.content},i.default.createElement(f.Form.Item,null,i.default.createElement(d.default,{name:"http_config.insecure_skip_verify",title:t("TLS_CERTIFICATE_VERIFY"),description:t("TLS_CERTIFICATE_VERIFY_DESC")})))),i.default.createElement("div",null,i.default.createElement("div",{className:h.default.title},t("TLS_CONNECTION")),i.default.createElement("div",{className:(0,v.default)(h.default.content,"padding-12")},i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("CA_CERTIFICATE"),desc:t("CA_CERTIFICATE_DESC")},i.default.createElement(f.Input,{name:"http_config.tls_config.ca_file"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("CERT_CERTIFICATE"),desc:t("CERT_CERTIFICATE_DESC")},i.default.createElement(f.Input,{name:"http_config.tls_config.cert_file"})))),i.default.createElement(f.Columns,null,i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("KEY_FILE"),desc:t("KEY_FILE_DESC")},i.default.createElement(f.Input,{name:"http_config.tls_config.key_file"}))),i.default.createElement(f.Column,null,i.default.createElement(f.Form.Item,{label:t("SERVER_NAME"),desc:t("SERVER_NAME_DESC")},i.default.createElement(f.Input,{name:"http_config.tls_config.server_name"})))),i.default.createElement("div",{className:h.default.content},i.default.createElement(f.Form.Item,null,i.default.createElement(d.default,{name:"http_config.tls_config.insecure_skip_verify",title:t("SERVER_CERTIFICATE_VERFICATION"),description:t("SERVER_CERTIFICATE_VERFICATION_DESC")})))))))))}}]),r}(i.default.Component);a.default=y,y.contextTypes={setError:m.PropTypes.func}},function(e,t,a){e.exports={title:"xlrctHqAGoM3-7wqCWawl",content:"_16xmHwEuS7d71mxiRU9TNN",expandContent:"_2yoxiaDukOzg3T2rtX3viR",advanced:"_1SjsNWLnhAANRQ6yQGMh0S",checkable:"_1LzxCfNNo8Os7t3E83hijQ"}},function(e,t,a){e.exports={switch:"_3139AgLry0KT0AKnrNHwTY",yamlSwitch:"_1I3fsLusd2MeDsi_847tTM",wrapper:"_3v5DnglM2JGzVR-VTZfZQm",textWrapper:"_9_V5Fp0d6irvfeDFuTifE",text:"_1QuglDCimaTalkZt2SrU7L",form:"_1WkcONaZMAeyzaEnELOl_m"}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var o=l(r(315)),u=l(r(36)),c=l(r(37)),s=l(r(55)),i=l(r(56)),f=l(r(51)),d=n(r(0)),p=l(r(872)),m=l(r(1)),v=r(186),h=l(r(135)),E=l(r(26));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var g=function(e){(0,s.default)(r,e);var a=y(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e)).handleFormChange=function(){var e=t.state.formTemplate;(0,t.context.registerUpdate)(t.name,e)},t.handleSubmit=function(e){var a=t.props.onSave,r=t.state.formTemplate;t.formRef.current&&t.formRef.current.validate((function(){a(r,["ruler"]),e&&e()}))},t.resetData=function(){t.setState({formTemplate:(0,h.default)(t.props.formTemplate)})};var n=t.props,l=n.updatedData,o=n.formTemplate;return t.state={formTemplate:(0,h.default)(l||o)},t.formRef=(0,d.createRef)(),t}return(0,c.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.updatedData,r=t.formTemplate;e.formTemplate===r&&e.updatedData===a||this.setState({formTemplate:(0,h.default)(a||r)})}},{key:"render",value:function(){return d.default.createElement(v.Form,{onChange:this.handleFormChange,data:this.state.formTemplate,ref:this.formRef},d.default.createElement(v.Form.Group,null,d.default.createElement(v.Form.Item,{label:t("CONTAINER_QUOTA")},d.default.createElement(p.default,(0,o.default)({name:"ruler.resources"},this.resourceLimitProps)))))}},{key:"name",get:function(){return"ruler"}},{key:"resourceLimitProps",get:function(){var e=this,t=this.state.formTemplate;return{memoryProps:{unit:"Gi"},defaultValue:{limits:{cpu:(0,E.default)(t,'ruler.resources["limits.cpu"]'),memory:(0,E.default)(t,'ruler.resources["limits.memory"]')},requests:{cpu:(0,E.default)(t,'ruler.resources["requests.cpu"]'),memory:(0,E.default)(t,'ruler.resources["requests.memory"]')}},onError:function(t){e.context.setError(!!t)}}}}]),r}(d.default.Component);a.default=g,g.contextTypes={registerUpdate:m.default.func,setError:m.default.func}},function(e,t,a){e.exports={body:"RDttHAMF2fro2rtZaH58l",wrapper:"_3euUglLYcVcJz8uhrpyhnZ",tabs:"p61-5CAC0HoCHoWjkbxnU",active:"_2Jz2sDF6YCMLekW5WbLApi",tip:"_1ZiYOI9tpyps-7SM1xUlC3",tooltipTrigger:"_11QxqKiBLxiuqt0cBEVbA4",tipIcon:"WMMuPo2sW-g8RqQ4SELLX",updateIcon:"_1fpvpxqpnchJ6cfOJTD_cn",content:"_3cOzqla_AvDSZAP_FrqMbT",main:"_4SBgKZ1OaxAr3QsBWtiFi",confirm:"_1lWSfda-M2WG_C7dsSA3oo",confirmActive:"_2XBZlke0tmO5RpKmbfOqQb",footer:"_2cLE_gXmH1U5DZ5kS1dOuV",formFooter:"_2qoB3osIu-rchZXVsllB8r"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(85),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(7);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(61)),c=n(r(30)),s=n(r(58)),i=n(r(26)),f=n(r(63)),d=n(r(189)),p=n(r(199)),m=r(14),v=r(52),h=n(r(240)),E=n(r(787)),y=n(r(825)),g=n(r(3642)),b=n(r(3644)),S=n(r(3645)),_=n(r(3647)),O=n(r(3650)),C=n(r(1332)),T=n(r(1586)),R=r(72),D=n(r(435)),N=n(r(901)),k=n(r(1699)),I=n(r(3653)),P=n(r(3654)),A=n(r(3655)),w=n(r(3656)),M=n(r(468)),L=n(r(443)),j=n(r(1090)),x=n(r(1091)),U=r(362);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G={deployments:k.default,statefulsets:I.default,daemonsets:P.default,jobs:A.default,cronjobs:w.default},B={"workload.create":{on:function(e){var a=e.store,r=e.cluster,n=e.namespace,g=e.module,b=e.success,S=e.isFederated,_=e.renderScheduleTab,O=void 0!==_&&_,T=e.supportGpuSelect,k=void 0!==T&&T,I=e.isAdmin,P=e.isProject,A=e.isEdge,w=e.k8sVersion,M=void 0===w?"":w,L=(0,s.default)(e,["store","cluster","namespace","module","success","isFederated","renderScheduleTab","supportGpuSelect","isAdmin","isProject","isEdge","k8sVersion"]),j=R.MODULE_KIND_MAP[g],x=(0,c.default)({},j,D.default[g]({namespace:n}));"cronjobs"===g&&(x[j].apiVersion=(0,U.isK8sVersionAbove)("v1.21.0",M)?"batch/v1":"batch/v1beta1");var F={};"statefulsets"===g&&(x.Service=D.default.services({namespace:n,selector:x[j].metadata.labels})),S&&(Object.keys(x).forEach((function(e){x[e]=D.default.federated({data:x[e],clusters:L.projectDetail.clusters.map((function(e){return e.name})),kind:e}),F=D.default.deploymentsSchedule({data:x[e],includeClusters:L.projectDetail.clusters.map((function(e){return e.name}))})})),a.setScheduleTemplate(F));var B=(0,u.default)(G[g]);S&&B.push({title:"CLUSTER_DIFF",icon:"blue-green-deployment",component:(0,v.withProps)(C.default,{withService:"statefulsets"===g})}),O&&a.ifRenderScheduleTab(O);var Y=E.default.open(V({onOk:function(e){if(S&&("deployments"===g?(0,v.multiCluster_overrides_Dot)((0,i.default)(e,"Deployment.spec.overrides",[])):"statefulsets"===g&&(0,v.multiCluster_overrides_Dot)((0,i.default)(e,"StatefulSet.spec.overrides",[]))),"jobs"!==g||(0,i.default)(e,"Job.metadata.namespace")){var u=e=(0,d.default)(e,(0,R.OMIT_TOTAL_REPLICAS)(j));if(u){var c=(0,i.default)(u,"spec.template.spec.customMode",{});if((0,f.default)(c)||delete u.spec.template.spec.customMode,j&&1===Object.keys(e).length&&e[j]&&(u=e[j]),A){if((0,p.default)(u,{spec:{template:{spec:{tolerations:[{key:"node.kubernetes.io/unreachable",operator:"Exists"},{key:"node-role.kubernetes.io/edge",operator:"Exists"}]}}}}),I){var s,y,_,C,T={labels:{"apps.edgewize.io/created":"admin"}},D={metadata:T,spec:{template:{metadata:T}}};if((0,p.default)(u,D),L.isEdgeWize);else if((0,f.default)(null===(s=u)||void 0===s||null===(y=s.spec)||void 0===y||null===(_=y.template)||void 0===_||null===(C=_.spec)||void 0===C?void 0:C.nodeSelector))return h.default.error(t("PLEASE_SELECT_NODES"))}}a.create(u,{cluster:r,namespace:n},M).then((0,o.default)(l.default.mark((function e(){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isScheduleDeployment||!O){e.next=7;break}return o=(0,m.toJS)(a.scheduleTemplate),e.next=5,a.scheduleCreate(o,{cluster:r,namespace:n});case 5:return e.next=7,a.switchSchedule(!1);case 7:E.default.close(Y),h.default.success({content:t("CREATE_SUCCESSFUL")}),b&&b(),N.default.delete("".concat(g,"_create_form"));case 11:case"end":return e.stop()}}),e)}))))}}else h.default.error({content:t("PROJECT_NOT_SELECT_DESC")})},onCancel:function(){a.isScheduleDeployment&&O&&a.switchSchedule(!1)},steps:B,module:g,cluster:r,namespace:n,name:j,isFederated:S,formTemplate:x,modal:y.default,store:a,supportGpuSelect:k,isProject:P,isEdge:A},L))}},"workload.redeploy":{on:function(e){var a=e.store,r=e.detail,n=e.module,l=(e.success,(0,s.default)(e,["store","detail","module","success"])),o=R.MODULE_KIND_MAP[n],u=E.default.open(V({onOk:function(){a.patch(r,{spec:{template:{metadata:{annotations:{"kubesphere.io/restartedAt":new Date}}}}}).then((function(){E.default.close(u),h.default.success({content:t("RECREATE_SUCCESS_DESC")})}))},detail:r,type:o,modal:g.default,store:a},l))}},"workload.revision.rollback":{on:function(e){var t=e.store,a=e.detail,r=e.isEdgeWize,n=e.success,l=(0,s.default)(e,["store","detail","isEdgeWize","success"]),o=E.default.open(V({onOk:function(e){t.rollBack(V(V({},a),{},{module:t.module}),e).then((function(){E.default.close(o),n&&n()}))},detail:a,isEdgeWize:r,modal:b.default,store:t},l))}},"workload.hpa.edit":{on:function(e){var t=e.store,a=e.detail,r=e.isEdgeWize,n=e.success,u=e.k8sVersion,c=(0,s.default)(e,["store","detail","isEdgeWize","success","k8sVersion"]),f=r?new j.default:new M.default,d=E.default.open(V({onOk:function(e,r){r?f.patch(a,e,u).then((function(){E.default.close(d),n&&n()})):f.create(e,a,u).then((0,o.default)(l.default.mark((function r(){return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return E.default.close(d),r.next=3,t.patch(a,{metadata:{annotations:{"kubesphere.io/relatedHPA":(0,i.default)(e,"metadata.name",a.name)}}});case 3:n&&n();case 4:case"end":return r.stop()}}),r)}))))},detail:a,store:f,modal:S.default},c))}},"workload.template.edit":{on:function(e){var t=e.store,a=e.detail,r=e.success,n=e.isEdgeWize,l=e.supportGpuSelect,o=void 0!==l&&l,u=(0,s.default)(e,["store","detail","success","isEdgeWize","supportGpuSelect"]),c=E.default.open(V({onOk:function(e){var n=(0,i.default)(e,"spec.template.spec.customMode",{});(0,f.default)(n)||delete e.spec.template.spec.customMode,t.update(a,e).then((function(){E.default.close(c),r&&r()}))},isEdgeWize:n,store:t,module:t.module,detail:(0,m.toJS)(a._originData),modal:_.default,supportGpuSelect:o,hideVolumeSetting:"statefulsets"===t.module},u))}},"workload.service.edit":{on:function(e){e.store;var t=e.detail,a=e.isEdgeWize,r=e.success,n=(0,s.default)(e,["store","detail","isEdgeWize","success"]),l=a?new x.default:new L.default,o={type:"Headless(Selector)",name:(0,i.default)(t,"_originData.spec.serviceName",""),namespace:t.namespace,cluster:t.cluster},u=E.default.open(V({onOk:function(e){l.update(o,e).then((function(){E.default.close(u),r&&r()}))},isEdgeWize:a,detail:o,store:l,modal:O.default},n))}},"workload.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=e.k8sVersion,o=(0,s.default)(e,["store","detail","success","k8sVersion"]),u=E.default.open(V({onOk:function(){E.default.close(u),h.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()},store:a,modal:T.default,resource:r,k8sVersion:l},o))}},"workload.batch.delete":{on:function(e){var a=e.store,r=e.success,n=e.rowKey,l=void 0===n?"name":n,o=e.k8sVersion,u=(0,s.default)(e,["store","success","rowKey","k8sVersion"]),c=a.list,i=c.data,f=c.selectedRowKeys,d=i.filter((function(e){return f.includes(e[l])})),p=E.default.open(V({onOk:function(){E.default.close(p),h.default.success({content:t("DELETED_SUCCESSFULLY")}),r&&r()},modal:T.default,resource:d,k8sVersion:o,store:a},u))}}};a.default=B},function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(315)),o=n(r(58)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=n(r(0)),p=n(r(1)),m=r(186),v=n(r(787)),h=n(r(3643));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var y=function(e){(0,s.default)(r,e);var a=E(r);function r(){return(0,u.default)(this,r),a.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.detail,r=e.type,n=(0,o.default)(e,["detail","type"]);return d.default.createElement(v.default,(0,l.default)({width:520,hideHeader:!0},n),d.default.createElement("div",{className:h.default.wrapper},d.default.createElement(m.Icon,{name:"question",size:40}),d.default.createElement("div",{className:h.default.text},d.default.createElement("div",null,t("RECREATE")),d.default.createElement("p",null,t("RECREATE_CONFIRM_DESC",{resource:a.name,type:t("".concat(r.toUpperCase(),"_LOW"))})))))}}]),r}(d.default.Component);a.default=y,y.propTypes={detail:p.default.object,visible:p.default.bool,onOk:p.default.func,onCancel:p.default.func,isSubmitting:p.default.bool},y.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,t,a){e.exports={wrapper:"_3gb5XWpq8vzH4mrGry7uxR",text:"_1YDX9cVd-P4aUdI_eBcLhl"}},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(31),r(6),r(18),r(16),r(27),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(31),r(6),r(18),r(28),r(42),r(16),r(27),r(34),r(15),r(9),r(13),r(10),r(4),r(319),r(23),r(57),r(17),r(7);var l,o,u,c=n(r(30)),s=n(r(36)),i=n(r(37)),f=n(r(55)),d=n(r(56)),p=n(r(51)),m=n(r(0)),v=r(14),h=r(239),E=n(r(1)),y=n(r(446)),g=n(r(26)),b=r(186),S=n(r(787)),_=r(248),O=n(r(1207)),C=n(r(1399));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,h.observer)((u=o=function(e){(0,f.default)(r,e);var a=D(r);function r(e){var t;return(0,s.default)(this,r),(t=a.call(this,e)).fetchData=function(e){t.revisionStore.fetchList(e)},t.getFormData=function(){return{name:t.props.detail.name,currentRevision:"#".concat(t.curRevision)}},t.getRevisionOps=function(){return(0,y.default)(t.revisions,(function(e){return parseInt(e.revision,10)})).map((function(e){var t=e.revision;return{label:"#".concat(t),value:Number(t)}})).filter((function(e){return e.value!==t.curRevision}))},t.handleOk=function(){var e=t.props,a=e.detail,r=e.store,n=e.onOk;if(t.form&&t.form.current){var l=t.form.current;l&&l.validate((function(){var e,o=l.getData(),u=t.revisions.find((function(e){return Number(e.revision)===o.revision}));e="deployments"===r.module?[{op:"replace",path:"/spec/template",value:(0,v.toJS)((0,g.default)(u,"spec.template"))},{op:"replace",path:"/metadata/annotations",value:a.annotations}]:{spec:{template:R({$patch:"replace"},(0,v.toJS)((0,g.default)(u,"spec.template")))}},n(e)}))}},t.revisionStore=e.isEdgeWize?new C.default(e.store.module):new O.default(e.store.module),t.form=m.default.createRef(),t}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.props.visible&&this.fetchData(this.props.detail)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.getFormData();return m.default.createElement(S.default.Form,{formRef:this.form,data:l,width:691,title:t("ROLL_BACK"),icon:"timed-task",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},m.default.createElement(b.Form.Item,{label:t("RESOURCE_NAME")},m.default.createElement(b.Input,{name:"name",disabled:!0})),m.default.createElement(b.Form.Item,{label:t("CURRENT_REVISION_RECORD")},m.default.createElement(b.Input,{name:"currentRevision",disabled:!0})),m.default.createElement(b.Form.Item,{label:t("TARGET_REVISION_RECORD"),rules:[{required:!0,message:t("TARGET_REVISION_EMPTY_DESC")}]},m.default.createElement(b.Select,{name:"revision",placeholder:" ",options:this.getRevisionOps()})))}},{key:"revisions",get:function(){var e=this.revisionStore.list,t=e.data;return e.isLoading?[]:t}},{key:"curRevision",get:function(){var e=this.props,t=e.store,a=e.detail;return(0,_.getCurrentRevision)(a,this.revisions,t.module)}}]),r}(m.default.Component),o.propTypes={isEdgeWize:E.default.bool,visible:E.default.bool,detail:E.default.object,onOk:E.default.func,onCancel:E.default.func},o.defaultProps={isEdgeWize:!1,visible:!1,detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=N},function(e,a,r){"use strict";r(15);var n=r(20);r(31),r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(31),r(42),r(16),r(4),r(23),r(57),r(17);var l,o,u,c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=n(r(0)),m=r(14),v=r(239),h=n(r(1)),E=n(r(74)),y=n(r(199)),g=r(186),b=n(r(787)),S=n(r(799)),_=n(r(3646));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var C=(0,v.observer)((u=o=function(e){(0,i.default)(r,e);var a=O(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(e){var a,r,n=e.detail,l=n.namespace,o=n.cluster,u=n.annotations,c={name:(void 0===u?{}:u)["kubesphere.io/relatedHPA"]||e.detail.name,cluster:o,namespace:l},s=null===(a=globals.clusterConfig)||void 0===a||null===(r=a[o])||void 0===r?void 0:r.k8sVersion;t.setState({loading:!0},(function(){t.store.checkName(c,"",s).then((function(e){t.isEdit=e.exist,e.exist?t.store.fetchDetail(c,s).then((function(){t.setState({loading:!1,formData:t.getFormData()})})):t.setState({loading:!1,formData:t.getFormData()})}))}))},t.getFormData=function(){var e,a,r,n,l,o,u,c,s,i,f,d,p,v,h,E,g,b,S,_,O,C,T=t.props.detail,R=T.name,D=T.namespace,N=T.uid,k=T.kind,I=(0,m.toJS)(t.store.detail),P=(null==I||null===(e=I._originData)||void 0===e||null===(a=e.spec)||void 0===a||null===(r=a.metrics)||void 0===r||null===(n=r.find((function(e){return"Resource"===e.type&&"cpu"===e.resource.name})))||void 0===n||null===(l=n.resource)||void 0===l||null===(o=l.target)||void 0===o?void 0:o.averageUtilization)||"",A=(null==I||null===(u=I._originData)||void 0===u||null===(c=u.spec)||void 0===c||null===(s=c.metrics)||void 0===s||null===(i=s.find((function(e){return"Resource"===e.type&&"memory"===e.resource.name})))||void 0===i||null===(f=i.resource)||void 0===f||null===(d=f.target)||void 0===d?void 0:d.averageValue)||"",w=(null==I||null===(p=I.status)||void 0===p||null===(v=p.currentMetrics)||void 0===v||null===(h=v.find((function(e){return"Resource"===e.type&&"cpu"===e.resource.name})))||void 0===h||null===(E=h.resource)||void 0===E||null===(g=E.current)||void 0===g?void 0:g.averageUtilization)||"",M=(null==I||null===(b=I.status)||void 0===b||null===(S=b.currentMetrics)||void 0===S||null===(_=S.find((function(e){return"Resource"===e.type&&"memory"===e.resource.name})))||void 0===_||null===(O=_.resource)||void 0===O||null===(C=O.current)||void 0===C?void 0:C.averageValue)||"";return(0,y.default)({},I._originData,{metadata:{name:R,namespace:D,annotations:{cpuCurrentUtilization:w,cpuTargetUtilization:P,memoryCurrentValue:M,memoryTargetValue:A},ownerReferences:[{apiVersion:"apps/v1",blockOwnerDeletion:!0,controller:!0,kind:k,name:R,uid:N}]},spec:{scaleTargetRef:{apiVersion:"apps/v1",kind:k,name:R}}})},t.handleOk=function(){var e=t.form.current;e&&e.validate((function(){var a=e.getData();t.isEdit&&(0,E.default)(a,"metadata.resourceVersion",null),t.props.onOk(a,t.isEdit)}))},t.form=p.default.createRef(),t.state={loading:!0,formData:void 0},t.store=e.store,t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData(this.props)}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=this.store.isSubmitting,l=this.state,o=l.formData,u=l.loading;return p.default.createElement(b.default,{width:691,title:t("AUTOSCALING"),icon:"firewall",onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},p.default.createElement(g.Loading,{spinning:u},p.default.createElement(g.Form,{data:o,ref:this.form},p.default.createElement(g.Alert,{className:_.default.alert,type:"info",message:t("CONFIGURE_AUTOSCALING_DESC")}),p.default.createElement(g.Form.Item,{label:t("RESOURCE_NAME"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")}]},p.default.createElement(g.Input,{name:"metadata.name",disabled:!0})),p.default.createElement(g.Form.Item,{label:t("TARGET_CPU_USAGE_UNIT"),desc:t("TARGET_CPU_USAGE_DESC")},p.default.createElement(S.default,{name:"metadata.annotations.cpuTargetUtilization",integer:!0,min:0,defaultValue:"",onChange:this.handleCPUChange})),p.default.createElement(g.Form.Item,{label:t("TARGET_MEMORY_USAGE_UNIT"),desc:t("TARGET_MEMORY_USAGE_DESC")},p.default.createElement(S.default,{name:"metadata.annotations.memoryTargetValue",integer:!0,unit:"Mi",min:0,defaultValue:"",onChange:this.handleMemoryChange})),p.default.createElement(g.Form.Item,{label:t("MINIMUM_REPLICAS"),desc:t("MINIMUM_REPLICAS_DESC")},p.default.createElement(S.default,{name:"spec.minReplicas",min:1,integer:!0,defaultValue:1})),p.default.createElement(g.Form.Item,{label:t("MAXIMUM_REPLICAS"),desc:t("MAXIMUM_REPLICAS_DESC")},p.default.createElement(S.default,{name:"spec.maxReplicas",min:1,integer:!0,defaultValue:1})))))}}]),r}(p.default.Component),o.propTypes={visible:h.default.bool,store:h.default.object,detail:h.default.object,onOk:h.default.func,onCancel:h.default.func},o.defaultProps={visible:!1,store:{},detail:{},onOk:function(){},onCancel:function(){}},l=u))||l;a.default=C},function(e,t,a){e.exports={alert:"_3edXUM4aRr_6Nn2mRSBgoq"}},function(e,t,a){"use strict";a(15);var r=a(20);a(11),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(11),a(42),a(4),a(23),a(57),a(17);var n=r(a(315)),l=r(a(58)),o=r(a(36)),u=r(a(37)),c=r(a(55)),s=r(a(56)),i=r(a(51)),f=r(a(0)),d=r(a(1)),p=r(a(1123)),m=r(a(3648));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var h=function(e){(0,c.default)(a,e);var t=v(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,t=e.module,a=(0,l.default)(e,["module"]);return f.default.createElement(p.default,(0,n.default)({title:"EDIT_SETTINGS",icon:"storage",module:t,forms:this.forms},a))}},{key:"forms",get:function(){return m.default[this.props.module].filter((function(e){return!e.disabled}))}}]),a}(f.default.Component);t.default=h,h.propTypes={module:d.default.string},h.defaultProps={module:"deployments"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(1691)),l=r(a(3649)),o=r(a(1692)),u=r(a(1695)),c=r(a(1693)),s=r(a(1694)),i={deployments:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:c.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:o.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:s.default},{icon:"group",name:"deploymentMode",title:"POD_SCHEDULING_RULES",component:n.default},{icon:"forbid-right-duotone",name:"podMode",title:"POD_GRACE_PERIOD",component:u.default},{icon:"eip-group",name:"ippools",title:"POD_IP_POOL",component:l.default,disabled:!globals.app.hasKSModule("network")}],statefulsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:c.default},{icon:"container",name:"podTemplate",title:"CONTAINER_PL",component:o.default},{icon:"forbid-right-duotone",name:"podMode",title:"POD_GRACE_PERIOD",component:u.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:s.default},{icon:"group",name:"deploymentMode",title:"POD_SCHEDULING_RULES",component:n.default},{icon:"eip-group",name:"ippools",title:"POD_IP_POOL",component:l.default,disabled:!globals.app.hasKSModule("network")}],daemonsets:[{icon:"dashboard",name:"updateStrategy",title:"UPDATE_STRATEGY",component:c.default},{icon:"container",name:"podTemplate",title:"POD_PL",component:o.default},{icon:"storage",name:"volumeSettings",title:"STORAGE",component:s.default},{icon:"forbid-right-duotone",name:"podMode",title:"POD_GRACE_PERIOD",component:u.default},{icon:"eip-group",name:"ippools",title:"POD_IP_POOL",component:l.default,disabled:!globals.app.hasKSModule("network")}]};t.default=i},function(e,t,a){"use strict";a(15);var r=a(157),n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(315)),o=a(186),u=n(a(1561)),c=r(a(0)),s=function(e){var t,a=e.formTemplate,r=e.formRef,n=e.formProps,s=e.module,i=e.cluster,f=e.namespace,d=e.rootStore;return c.createElement("div",{className:"margin-t12"},c.createElement(o.Form,(0,l.default)({data:a,ref:r},n),c.createElement(u.default,{formProps:n,data:a,module:s,cluster:i,namespace:f,replicas:null==a||null===(t=a.spec)||void 0===t?void 0:t.replicas,rootStore:d})))};t.default=s},function(e,a,r){"use strict";r(15);var n=r(20);r(16),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(14),p=n(r(74)),m=r(72),v=n(r(443)),h=r(186),E=n(r(787)),y=n(r(3651));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var b=function(e){(0,u.default)(r,e);var a=g(r);function r(e){var t;return(0,l.default)(this,r),(t=a.call(this,e)).handleOk=function(){var e=t.props.onOk,a=t.formRef.current;a&&a.validate((function(){var r=a.getData();(0,p.default)(r,"metadata.resourceVersion",t.store.detail.resourceVersion),e(r)}))},t.handleCancel=function(){(0,t.props.onCancel)()},t.formRef=i.default.createRef(),t.state={formTemplate:{}},t.store=e.store||new v.default,t.fetchData(e.detail),t}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&this.fetchData(r)}},{key:"fetchData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.name&&t.namespace&&this.store.fetchDetail(t).then((function(){e.setState({formTemplate:(0,d.toJS)(e.store.detail._originData)})}))}},{key:"renderForm",value:function(){return i.default.createElement(y.default,{formRef:this.formRef,formTemplate:this.state.formTemplate})}},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.isSubmitting,n=e.detail;return i.default.createElement(E.default,{width:1162,title:t("EDIT_SERVICE"),onOk:n.type!==m.SERVICE_TYPES.Unknown?this.handleOk:null,onCancel:this.handleCancel,okText:t("OK"),visible:a,isSubmitting:r},i.default.createElement(h.Loading,{spinning:this.store.isLoading},this.renderForm()))}}]),r}(i.default.Component);a.default=b,b.propTypes={visible:f.default.bool,detail:f.default.object,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},b.defaultProps={visible:!1,detail:{},onOk:function(){},onCancel:function(){},isSubmitting:!1}},function(e,a,r){"use strict";r(15);var n=r(20);r(18),r(10),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(26)),d=n(r(1338)),p=r(186),m=n(r(1045)),v=n(r(816)),h=n(r(3652));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var y=function(e){(0,u.default)(r,e);var a=E(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"renderName",value:function(){return i.default.createElement(p.Form.Item,{label:t("NAME")},i.default.createElement(p.Input,{name:"metadata.name",disabled:!0}))}},{key:"renderSelectorLabels",value:function(){var e=(0,f.default)(this.props.formTemplate,"spec.selector",{});return i.default.createElement(p.Form.Item,{label:t("SELECTOR")},i.default.createElement("div",{className:h.default.selectors},Object.keys(e).map((function(t){return i.default.createElement(m.default,{key:t,name:t,value:e[t]})}))))}},{key:"renderTypeSelect",value:function(){return i.default.createElement(p.Form.Item,{label:t("INTERNAL_ACCESS_MODE")},i.default.createElement(v.default,{className:"margin-b12",value:this.state.serviceType,onChange:this.handleTypeChange,options:this.types,disabled:!0}))}},{key:"render",value:function(){var e=this.props.formRef;return i.default.createElement("div",{className:h.default.wrapper},i.default.createElement(p.Form,{data:this.formTemplate,ref:e},this.renderName(),this.renderTypeSelect(),this.renderSelectorLabels(),this.renderPorts()))}}]),r}(d.default);a.default=y},function(e,t,a){e.exports={card:"_1RshJt8HTq5HgEme5DfSMo",tabs:"wyrLrVtofUNlEaiwxIeFK",label:"QqDn4rm7cZu-6-D4Z5tTh",selectors:"_3_DdQN134r--ART1Vr6ZI9"}},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(974)),o=r(a(932)),u=r(a(971)),c=r(a(1043)),s=[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(o.default,{withService:!0}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:u.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:c.default,required:!0}];t.default=s},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(974)),l=r(a(932)),o=r(a(971)),u=r(a(1043)),c=[{title:"BASIC_INFORMATION",icon:"cdn",component:n.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:l.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=c},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(974)),o=r(a(971)),u=r(a(1043)),c=r(a(1787)),s=r(a(1788)),i=[{title:"BASIC_INFORMATION",icon:"cdn",component:(0,n.withProps)(l.default,{maxNameLength:63}),required:!0},{title:"STRATEGY_SETTINGS",icon:"job",component:c.default,required:!0},{title:"POD_SETTINGS",icon:"docker",component:s.default,required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:o.default,required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:u.default,required:!0}];t.default=i},function(e,t,a){"use strict";a(15);var r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(52),l=r(a(3657)),o=r(a(1787)),u=r(a(1788)),c=r(a(971)),s=r(a(1043)),i=[{title:"BASIC_INFORMATION",icon:"cdn",component:l.default,required:!0},{title:"STRATEGY_SETTINGS",icon:"cron-job",component:(0,n.withProps)(o.default,{prefix:"spec.jobTemplate.spec."}),required:!0},{title:"POD_SETTINGS",icon:"docker",component:(0,n.withProps)(u.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0},{title:"STORAGE_SETTINGS",icon:"storage",component:(0,n.withProps)(c.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0},{title:"ADVANCED_SETTINGS",icon:"slider",component:(0,n.withProps)(s.default,{prefix:"spec.jobTemplate.spec.template."}),required:!0}];t.default=i},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(48),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(48),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=r(186),f=n(r(799)),d=n(r(1107)),p=n(r(951)),m=n(r(800)),v=n(r(26)),h=n(r(74)),E=n(r(0)),y=r(52),g=r(72);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var S=function(e){(0,u.default)(r,e);var a=b(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).handleNameChange=(0,m.default)((function(t){var a=(0,v.default)(e.formTemplate,"metadata.labels",{});a.app=t.slice(0,63),(0,h.default)(e.formTemplate,"spec.jobTemplate.metadata.labels",a)}),200),e.nameValidator=function(a,r,n){if(!r)return n();e.props.store.checkName({name:r,namespace:e.namespace,cluster:e.props.cluster},"",e.k8sVersion).then((function(e){if(e.exist)return n({message:t("NAME_EXIST_DESC"),field:a.field});n()}))},e.getConcurrencyPolicyOptions=function(){return[{label:t("RUN_JOBS_CONCURRENTLY"),value:"Allow"},{label:t("SKIP_NEW_JOB"),value:"Forbid"},{label:t("SKIP_OLD_JOB"),value:"Replace"}]},e}return(0,o.default)(r,[{key:"getCronOptions",value:function(){return[{label:t("EVERY_HOUR"),value:"0 * * * *"},{label:t("EVERY_DAY"),value:"0 0 * * *"},{label:t("EVERY_WEEK"),value:"0 0 * * 0"},{label:t("EVERY_MONTH"),value:"0 0 1 * *"}]}},{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.isEdgeWize,n=t.html("CRONJOB_CRON_DESC");return E.default.createElement(i.Form,{data:this.formTemplate,ref:a},E.default.createElement(i.Columns,null,E.default.createElement(i.Column,null,E.default.createElement(i.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("NAME_EMPTY_DESC")},{pattern:g.PATTERN_NAME,message:t("INVALID_NAME_DESC",{message:t("NAME_DESC")})},{validator:this.nameValidator}]},E.default.createElement(i.Input,{name:"metadata.name",onChange:this.handleNameChange,autoFocus:!0,maxLength:52}))),E.default.createElement(i.Column,null,E.default.createElement(i.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:g.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},E.default.createElement(i.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})))),E.default.createElement(i.Columns,{className:"is-multiline"},!this.props.namespace&&E.default.createElement(i.Column,{className:"is-6"},E.default.createElement(i.Form.Item,{label:t("PROJECT"),desc:t("PROJECT_DESC"),rules:[{required:!0,message:t("PROJECT_NOT_SELECT_DESC")}]},E.default.createElement(d.default,{isEdgeWize:r,name:"metadata.namespace",cluster:this.props.cluster,defaultValue:this.namespace}))),E.default.createElement(i.Column,{className:"is-6"},E.default.createElement(i.Form.Item,{label:t("SCHEDULE"),desc:(0,y.learnMoreTip)(n),rules:[{required:!0,message:t("ENTER_SCHEDULE_TIP")}]},E.default.createElement(i.Select,{name:"spec.schedule",options:this.getCronOptions(),searchable:!0,placeholder:" "}))),E.default.createElement(i.Column,{className:"is-6"},E.default.createElement(i.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},E.default.createElement(i.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))),E.default.createElement(p.default,null,E.default.createElement(i.Columns,{className:"margin-t8"},E.default.createElement(i.Column,null,E.default.createElement(i.Form.Item,{label:t("MAXIMUM_DELAY"),desc:t("MAXIMUM_DELAY_DESC")},E.default.createElement(f.default,{min:0,name:"spec.startingDeadlineSeconds",integer:!0})),E.default.createElement(i.Form.Item,{label:t("FAILED_JOBS_RETAINED"),desc:t("FAILED_JOBS_RETAINED_DESC")},E.default.createElement(f.default,{min:0,name:"spec.failedJobsHistoryLimit",integer:!0}))),E.default.createElement(i.Column,null,E.default.createElement(i.Form.Item,{label:t("SUCCESSFUL_JOBS_RETAINED"),desc:t("SUCCESSFUL_JOBS_RETAINED_DESC")},E.default.createElement(f.default,{min:0,name:"spec.successfulJobsHistoryLimit",integer:!0})),E.default.createElement(i.Form.Item,{label:t("CONCURRENCY_POLICY"),desc:t("CONCURRENCY_POLICY_DESC")},E.default.createElement(i.Select,{name:"spec.concurrencyPolicy",options:this.getConcurrencyPolicyOptions()}))))))}},{key:"formTemplate",get:function(){var e=this.props,t=e.formTemplate,a=e.module;return(0,v.default)(t,g.MODULE_KIND_MAP[a],t)}},{key:"namespace",get:function(){return(0,v.default)(this.formTemplate,"metadata.namespace")}},{key:"k8sVersion",get:function(){var e,t;return null===(e=globals.clusterConfig)||void 0===e||null===(t=e[this.props.cluster])||void 0===t?void 0:t.k8sVersion}}]),r}(E.default.Component);a.default=S},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(84),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(11),r(6),r(84),r(29),r(73),r(18),r(28),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(85),r(38),r(7),r(32);var l=n(r(43));r(41);var o=n(r(44)),u=n(r(30)),c=n(r(58)),s=n(r(240)),i=n(r(787)),f=n(r(26)),d=n(r(457)),p=n(r(63)),m=n(r(74)),v=n(r(189)),h=n(r(3659)),E=n(r(3670)),y=n(r(3672)),g=r(52),b=n(r(913));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={"workspace.create":{on:function(e){var a=e.store,r=e.success,n=(0,c.default)(e,["store","success"]),l=i.default.open(_({onOk:function(e){if(e){(0,f.default)(globals,"ksConfig.springcloud",!1)&&(0,m.default)(e,'metadata.labels["springcloud.kubesphere.io/enabled"]',"true");var n=(0,f.default)(e,"clusterType"),o=(0,f.default)(e,"spec.placement.clusters.[0].name");"edge"===n&&o&&((0,m.default)(e,["metadata","labels","cluster-role.kubesphere.io/edge"],o),(0,m.default)(e,["spec","template","metadata","labels","cluster-role.kubesphere.io/edge"],o)),a.create((0,v.default)(e,"clusterType")).then((function(){i.default.close(l),s.default.success({content:t("CREATE_SUCCESSFUL")}),r&&r()}))}else i.default.close(l)},modal:h.default,store:a},n))}},"workspace.quota.edit":{on:function(e){e.store;var a,r=e.detail,n=e.success,u=(0,c.default)(e,["store","detail","success"]),m=new b.default,v=i.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o,u,c,h,E;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={name:r.name,workspace:r.name,cluster:r.cluster},u=(0,f.default)(a,"spec",{}),c=(0,f.default)(a,"storageLimit",{}),e.next=5,m.checkName(o);case 5:if(h=e.sent,(0,g.quota_limits_requests_Dot)(u),E={apiVersion:"quota.kubesphere.io/v1alpha2",kind:"ResourceQuota",metadata:_(_({},o),{},{name:r.name}),spec:{quota:{hard:_(_({},(0,d.default)(u,p.default)),c)}}},!h.exist){e.next=13;break}return e.next=11,m.update(o,E);case 11:e.next=15;break;case 13:return e.next=15,m.create(E,o);case 15:i.default.close(v),s.default.success({content:t("UPDATE_SUCCESSFUL")}),n&&n();case 18:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),detail:r,store:m,modal:E.default},u))}},"workspace.delete":{on:function(e){var a=e.store,r=e.detail,n=e.success,l=(0,c.default)(e,["store","detail","success"]),o=i.default.open(_({onOk:function(e){a.delete(r,e).then((function(){i.default.close(o),s.default.success({content:t("DELETED_SUCCESSFULLY")}),n&&n()}))},store:a,modal:y.default,resource:r.name},l))}},"workspace.batch.delete":{on:function(e){var a,r=e.store,n=e.success,u=e.rowKey,f=(0,c.default)(e,["store","success","rowKey"]),d=r.list,p=d.data,m=d.selectedRowKeys,v=p.filter((function(e){return m.includes(e[u])})).map((function(e){return e.name})),h=i.default.open(_({onOk:(a=(0,o.default)(l.default.mark((function e(a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],p.forEach((function(e){v.includes(e.name)&&o.push(r.delete(e,a))})),e.next=4,Promise.all(o);case 4:i.default.close(h),s.default.success({content:t("DELETED_SUCCESSFULLY")}),r.setSelectRowKeys([]),n&&n();case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),resource:v.join(", "),modal:y.default,store:r},f))}}};a.default=O},function(e,a,r){"use strict";var n=r(20);r(12),r(11),r(6),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(28),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l=n(r(30)),o=n(r(36)),u=n(r(37)),c=n(r(55)),s=n(r(56)),i=n(r(51)),f=n(r(0)),d=n(r(135)),p=n(r(1)),m=r(186),v=n(r(240)),h=n(r(787)),E=n(r(435)),y=n(r(3660)),g=n(r(3662)),b=n(r(3664)),S=n(r(3669));function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var C=function(e){(0,c.default)(r,e);var a=O(r);function r(e){var n;return(0,o.default)(this,r),(n=a.call(this,e)).handleOk=function(){n.emptyCluster?v.default.info(t("CLUSTER_FIELD_EMPTY")):n.props.onOk(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n.state.formTemplate))},n.handlePrev=function(){n.setState((function(e){var t=e.currentStep;return{currentStep:Math.max(0,t-1)}}))},n.handleNext=function(){var e=n.formRef.current;e&&e.validate((function(){n.setState((function(e){var t=e.currentStep;return{currentStep:Math.min(n.steps.length-1,t+1)}}))}))},n.state={currentStep:0,formTemplate:(0,d.default)(E.default.workspaces())},n.formRef=f.default.createRef(),n}return(0,u.default)(r,[{key:"renderForm",value:function(){var e=this.props,t=e.store,a=e.form,r=this.state,n=r.formTemplate,l=r.currentStep,o=this.steps[l],u=o.component,c={store:t,formTemplate:n,defaultClusterType:a.defaultClusterType};return o.isForm?c.formRef=this.formRef:c.ref=this.formRef,f.default.createElement("div",{className:S.default.formWrapper},f.default.createElement("div",{className:S.default.wrapper},f.default.createElement("div",{className:S.default.form},f.default.createElement(u,c))))}},{key:"renderHeader",value:function(){var e=this.props,t=e.title,a=e.onCancel,r=this.state.currentStep;return f.default.createElement("div",{className:S.default.header},f.default.createElement("div",{className:S.default.title},f.default.createElement(m.Icon,{name:"close",size:20,clickable:!0,onClick:a}),f.default.createElement("span",null),f.default.createElement(m.Icon,{name:"enterprise",size:20}),f.default.createElement("span",null,t)),f.default.createElement("div",{className:S.default.wrapper},this.steps.length>1&&f.default.createElement(y.default,{steps:this.steps,current:r})),f.default.createElement("div",{className:S.default.headerBottom}))}},{key:"renderFooter",value:function(){var e=this.props,a=e.onCancel,r=e.isSubmitting,n=this.state.currentStep,l=this.steps.length-1;return f.default.createElement("div",{className:S.default.footer},f.default.createElement("div",{className:S.default.wrapper},f.default.createElement("div",{className:"text-right"},f.default.createElement(m.Button,{onClick:a},t("CANCEL")),n>0&&f.default.createElement(m.Button,{type:"control",onClick:this.handlePrev},t("PREVIOUS")),n<l?f.default.createElement(m.Button,{type:"control",onClick:this.handleNext},t("NEXT")):f.default.createElement(m.Button,{type:"control",onClick:this.handleOk,loading:r},t("CREATE")))))}},{key:"render",value:function(){var e=this.props.visible;return f.default.createElement(h.default,{className:S.default.modal,bodyClassName:S.default.body,visible:e,hideHeader:!0,hideFooter:!0,fullScreen:!0},this.renderHeader(),this.renderForm(),this.renderFooter())}},{key:"steps",get:function(){return globals.app.isMultiCluster?[{title:"BASIC_INFORMATION",component:g.default,required:!0,isForm:!0},{title:"CLUSTER_SETTINGS",component:b.default,required:!0}]:[{title:"BASIC_INFORMATION",component:g.default,required:!0,isForm:!0}]}},{key:"emptyCluster",get:function(){var e=this.state.formTemplate;return!(e&&e.spec&&e.spec.placement&&e.spec.placement.clusters)}}]),r}(f.default.Component);a.default=C,C.propTypes={visible:p.default.bool,title:p.default.string.isRequired,form:p.default.shape({defaultClusterType:p.default.string}),namespace:p.default.string,sampleApp:p.default.string,onOk:p.default.func,onCancel:p.default.func},C.defaultProps={visible:!1,form:{defaultClusterType:""},onOk:function(){},onCancel:function(){}}},function(e,a,r){"use strict";r(15);var n=r(157),l=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var o=l(r(36)),u=l(r(37)),c=l(r(55)),s=l(r(56)),i=l(r(51)),f=n(r(0)),d=r(186),p=l(r(3661));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.default)(this,a)}}var v=function(e){(0,c.default)(r,e);var a=m(r);function r(){return(0,o.default)(this,r),a.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,a=e.steps,r=e.current;return f.default.createElement("div",{className:p.default.wrapper},a.map((function(e,a){return f.default.createElement("div",{key:e.title},r>=a?f.default.createElement(d.Icon,{name:"success",type:"coloured",size:12}):f.default.createElement(d.Icon,{name:"dot",type:"light",size:12}),f.default.createElement("span",null,t(e.title)))})))}}]),r}(f.Component);a.default=v},function(e,t,a){e.exports={wrapper:"_2dFP1gLucRGN5yjrJBJ0Wr"}},function(e,a,r){"use strict";var n=r(20);r(12),r(187),r(11),r(6),r(18),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(187),r(11),r(6),r(18),r(28),r(859),r(42),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var l,o=n(r(30)),u=n(r(36)),c=n(r(37)),s=n(r(55)),i=n(r(56)),f=n(r(51)),d=r(186),p=n(r(241)),m=r(239),v=n(r(0)),h=n(r(322)),E=r(72),y=n(r(3663));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,i.default)(this,a)}}var S=(0,m.observer)(l=function(e){(0,s.default)(r,e);var a=b(r);function r(e){var n;return(0,u.default)(this,r),(n=a.call(this,e)).fetchUsers=function(e){return n.userStore.fetchList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},n.nameValidator=function(e,a,r){return a?"workspaces"===a?r({message:t("INVALID_WORKSPACE_NAME"),field:e.field}):void n.props.store.checkName({name:a}).then((function(a){if(a.exist)return r({message:t("WORKSPACE_NAME_EXISTS_DESC"),field:e.field});r()})):r()},n.userStore=new h.default,n.fetchUsers(),n}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n=e.defaultClusterType;return v.default.createElement("div",{className:y.default.wrapper},v.default.createElement("div",{className:y.default.step},v.default.createElement("div",null,t("BASIC_INFORMATION")),v.default.createElement("p",null,t("WORKSPACE_CREATE_DESC"))),v.default.createElement(d.Form,{data:r,ref:a},v.default.createElement(d.Form.Item,{className:y.default.hide,label:t("CLUSTER"),desc:t("WORKSPACE_CLUSTER_DESC")},v.default.createElement(d.Select,{name:"clusterType",defaultValue:n,options:this.clusterTypeOptions,disabled:!0})),v.default.createElement(d.Form.Item,{label:t("NAME"),desc:t("NAME_DESC"),rules:[{required:!0,message:t("WORKSPACE_NAME_EMPTY_DESC")},{pattern:E.PATTERN_NAME,message:t("INVALID_NAME_DESC")},{validator:this.nameValidator}]},v.default.createElement(d.Input,{name:"metadata.name",autoFocus:!0,maxLength:63})),v.default.createElement(d.Form.Item,{label:t("ALIAS"),desc:t("ALIAS_NAME_DESC"),rules:[{pattern:E.PATTERN_ALIAS_NAME,message:t("INVALID_ALIAS_NAME_DESC")}]},v.default.createElement(d.Input,{name:"metadata.annotations['kubesphere.io/alias-name']",maxLength:63})),v.default.createElement(d.Form.Item,{label:t("ADMINISTRATOR")},v.default.createElement(d.Select,{name:"spec.template.spec.manager",options:this.users,pagination:(0,p.default)(this.userStore.list,["page","limit","total"]),isLoading:this.userStore.list.isLoading,onFetch:this.fetchUsers,defaultValue:globals.user.username,onChange:this.handleChange,searchable:!0})),v.default.createElement(d.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},v.default.createElement(d.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256,rows:"3"}))))}},{key:"users",get:function(){var e=globals.user.username,t=this.userStore.list.data.map((function(e){return{label:e.username,value:e.username}}));return t.every((function(t){return t.value!==e}))&&t.unshift({label:e,value:e}),t}},{key:"clusterTypeOptions",get:function(){return[{label:t("KS_CLUSTER"),value:"ks"},{label:t("EDGE_CLUSTER"),value:"edge"}]}}]),r}(v.default.Component))||l;a.default=S},function(e,t,a){e.exports={wrapper:"_1YWQK0YmICh6VF7xYh7F8S",step:"KZcJHL5-wOFRBPuOY-K3S",upload:"_1xozz9MRPzwnFpHQOlyHi4",hide:"G90ob4x_x0cPWQtpwXn0A"}},function(e,a,r){"use strict";r(15);var n=r(20);r(4),r(23),r(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=r(186),d=n(r(1789)),p=n(r(3666)),m=n(r(3668));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){return(0,l.default)(this,r),a.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,a=e.formRef,r=e.formTemplate,n="edge"===r.clusterType,l=n?t("EDGE_CLUSTER"):t("KS_CLUSTER");return i.default.createElement("div",{className:m.default.wrapper},i.default.createElement("div",{className:m.default.step},i.default.createElement("div",null,t("CLUSTER_SETTINGS")),i.default.createElement("p",null,t("SELECT_CLUSTERS_DESC",{type:l}))),i.default.createElement(f.Form,{data:r,ref:a},i.default.createElement(f.Form.Item,{label:t("AVAILABLE_CLUSTERS",{type:l})},n?i.default.createElement(p.default,{name:"spec.placement.clusters"}):i.default.createElement(d.default,{name:"spec.placement.clusters"}))))}}]),r}(i.default.Component);a.default=h},,function(e,a,r){"use strict";var n=r(20),l=r(157);r(12),r(11),r(6),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(17),r(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(23),r(57),r(17),r(7);var o,u=n(r(30)),c=n(r(36)),s=n(r(37)),i=n(r(55)),f=n(r(56)),d=n(r(51)),p=l(r(0)),m=r(14),v=n(r(63)),h=n(r(3)),E=r(239),y=r(186),g=n(r(955)),b=n(r(790)),S=n(r(874)),_=n(r(814)),O=n(r(915)),C=n(r(3667));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,E.observer)(o=function(e){(0,i.default)(r,e);var a=D(r);function r(e){var t;return(0,c.default)(this,r),(t=a.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.clusterStore.fetchList(R(R({limit:-1},e),{},{labelSelector:"cluster-role.kubesphere.io/edge"}))},t.handleEdgeClusterSelectChange=function(e){(0,t.props.onChange)([{name:e}])},t.clearFilter=function(){t.setState({filters:{}}),t.fetchData()},t.handleReset=function(){var e=t.state.filters;t.fetchData(e)},t.clusterStore=new g.default,t.state={filters:{}},t}return(0,s.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,a=t("NO_CLUSTER_AVAILABLE_DESC",{type:t("EDGE_CLUSTER")}),r=this.state.filters,n=(0,m.toJS)(this.clusterStore.list),l=n.data,o=n.isLoading;return(0,v.default)(l)&&(0,v.default)(r)&&!o?p.default.createElement(y.Alert,{type:"warning",message:a}):p.default.createElement("div",{className:C.default.wrapper},p.default.createElement("div",{className:"margin-b12"},p.default.createElement(O.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.columns,onChange:function(t){e.setState({filters:t}),e.fetchData(t)},filters:this.state.filters})),p.default.createElement(y.RadioGroup,{onChange:this.handleEdgeClusterSelectChange},l.map((function(e){return p.default.createElement("div",{key:e.name,className:(0,h.default)(C.default.item,(0,u.default)({},C.default.disabled,!globals.app.isMultiCluster)),"data-cluster":e.name},p.default.createElement(y.Radio,{key:e.name,value:e.name,disabled:!1}),p.default.createElement(_.default,{className:C.default.cluster,cluster:e,isEdgeWize:!0,noTip:!0}),p.default.createElement(b.default,{title:null==e?void 0:e.hostCluster,description:t("HOSTED_IN")}))}))),o&&p.default.createElement(y.Loading,{size:"large",className:C.default.loading}),(0,v.default)(l)&&p.default.createElement(S.default,{icon:"exclamation",title:t("NO_MATCHING_RESULT_FOUND"),desc:null,action:p.default.createElement("p",null,t("YOU_CAN_TRY_TO"),p.default.createElement("span",{className:C.default.action,onClick:this.handleReset,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),p.default.createElement("span",{className:C.default.action,onClick:this.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS")))}))}},{key:"columns",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0}]}}]),r}(p.Component))||o;a.default=N},function(e,t,a){e.exports={wrapper:"KJ3Lh4Xk2htaiyMql_3xh",item:"_26cyMRaHtZ3vk5FVgkMoT3",disabled:"_2bShAyoPylsL23eY3auTzE",cluster:"_3mBe0Id71MqWxKG-hvBcue",action:"_14EnWX5Pi3VX9QCgNTka7y",loading:"_2jSG-qG8YjAe7ytoelW_PZ",radios:"rsVd3xIVOvMbuUOa_Y-45"}},function(e,t,a){e.exports={wrapper:"R1Nn-MWwPOaptPi1tXzA6",step:"_2V9cABkYkEUjC4bpDz2wdo",upload:"_2-sPfwB-LHg4P9mpA3WhAJ"}},function(e,t,a){e.exports={modal:"ydx1TCDzXWsap7ThoXdoN",body:"_38XL2I39TDuD1GVvoZW0LQ",wrapper:"_3XK3SFG_epD4pRJnzaf6o3",header:"_1Gu0OlXBfqMPX3Jx1OqhI1",headerBottom:"_3yGJCycuKnmGI8GEnF1HDl",title:"_1fvkT6ZxavCZQF95V0OIAV",steps:"_2QTdt6PzkIwGCb1f8zjB_4",formWrapper:"-HzNn2kxNzffyKGd7DRFU",footer:"_2G9tgA343D1vegacgEoqAc"}},function(e,a,r){"use strict";var n=r(157),l=r(20);r(12),r(11),r(6),r(84),r(29),r(16),r(27),r(190),r(98),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(324),r(85),r(38),r(136),r(7),r(32),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(12),r(45),r(11),r(6),r(84),r(29),r(28),r(42),r(16),r(27),r(190),r(34),r(15),r(98),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(17),r(324),r(85),r(38),r(460),r(461),r(462),r(463),r(464),r(465),r(466),r(7),r(32);var o=l(r(43));r(41);var u=l(r(44)),c=l(r(96)),s=l(r(61)),i=l(r(30)),f=l(r(36)),d=l(r(37)),p=l(r(55)),m=l(r(56)),v=l(r(51)),h=l(r(0)),E=l(r(1)),y=r(14),g=l(r(26)),b=l(r(74)),S=l(r(1739)),_=l(r(457)),O=l(r(189)),C=r(186),T=l(r(787)),R=l(r(872)),D=r(52),N=l(r(913)),k=l(r(866)),I=n(r(1388)),P=l(r(3671));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,v.default)(e);if(t){var n=(0,v.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.default)(this,a)}}var L=function(e){(0,p.default)(n,e);var a,r=M(n);function n(e){var t;return(0,f.default)(this,n),(t=r.call(this,e)).getWorkspaceSpec=function(){var e=t.state.spec,a=e["requests.storage"],r=e.persistentvolumeclaims,n=(0,D.memoryFormat)(a,"Gi");return{storage:isNaN(n)?1/0:n,persistentvolumeclaims:""===r?1/0:Number(r)}},t.omitKey=["requests.storage","persistentvolumeclaims"],t.countTotalRelatedResource=function(){var e=t.state.spec,a=w({},(0,O.default)(e,t.omitKey)),r={totalStorage:0,totalVolumeClaims:0,addedItems:[]},n=new Set;return Object.keys(a).forEach((function(e){if(e.includes("requests.storage")){n.add(e.split(".storageclass.storage.k8s.io/requests.storage")[0]);var t=(0,D.memoryFormat)(a[e],"Gi");isNaN(t)||(r.totalStorage+=t)}if(e.includes("persistentvolumeclaims")){n.add(e.split(".storageclass.storage.k8s.io/persistentvolumeclaims")[0]);var l=a[e],o=Number(l);""===l||isNaN(o)||(r.totalVolumeClaims+=o)}})),r.addedItems=(0,s.default)(n.values()),r},t.validInputStorage=function(){var e=t.getWorkspaceSpec(),a=e.storage,r=e.persistentvolumeclaims,n=t.countTotalRelatedResource(),l=n.totalStorage,o=n.totalVolumeClaims,u=!1;(a<l||0===a&&0===l)&&(u=!0),(r<o||0===r&&0===o)&&(u=!0),t.setState({disableSave:u,totalStorageError:a<l,totalVolumeClaimsError:r<o})},t.setRelateSourceResult=function(){var e=t.countTotalRelatedResource(),a=e.totalStorage,r=e.totalVolumeClaims,n=e.addedItems;t.setState({currentRelatedStorageTotal:a,currentRelatedVolumeClaimsTotal:r,addedItems:n})},t.handleOnChange=function(e){var a=e.actionType,r=e.data,n=e.originName,l=w({},t.state.spec);switch(a){case"delete":Object.keys(r).forEach((function(e){delete l[e]})),t.setState({spec:w({},l)},(function(){t.setRelateSourceResult()}));break;case"edit":delete l["".concat(n,".storageclass.storage.k8s.io/persistentvolumeclaims")],delete l["".concat(n,".storageclass.storage.k8s.io/requests.storage")],t.setState({spec:w(w({},l),r)},(function(){t.validInputStorage(),t.setRelateSourceResult()}));break;default:t.setState({spec:w(w({},t.state.spec),r)},(function(){t.validInputStorage(),t.setRelateSourceResult()}))}},t.handleOk=function(){var e=t.props.onOk,a=w({},t.state.spec);Object.entries(a).forEach((function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];"InfinityGi"!==n&&""!==n||delete a[r]}));var r=w({},(0,g.default)(t.state.formTemplate,"spec.quota.hard",{})),n=["persistentvolumeclaims","requests.storage"],l=(0,_.default)(r,(function(e,t){return t.includes(n[0])||t.includes(n[1])}));e({name:t.state.formTemplate.name,spec:w({},l),storageLimit:w({},a)})},t.form=h.default.createRef(),t.store=new N.default,t.state={formTemplate:{},error:"",allStorageClass:[],spec:{},availableQuota:{storage:void 0,persistentvolumeclaims:void 0},disableSave:!1,currentRelatedStorageTotal:0,currentRelatedVolumeClaimsTotal:0,totalStorageError:!1,totalVolumeClaimsError:!1,addedItems:[]},t.storageStore=new k.default,t}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.props.detail&&this.props.detail.name&&this.fetchData(this.props.detail)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.visible,r=t.detail;a&&a!==e.visible&&r&&r.name&&this.fetchData(r)}},{key:"fetchData",value:(a=(0,u.default)(o.default.mark((function e(){var t,a,r,n,l,u,c,i,f,d,p,m=this,v=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},a={storage:1/0,persistentvolumeclaims:1/0},e.next=4,this.storageStore.fetchList({cluster:t.cluster});case 4:return r=e.sent,e.next=7,this.store.fetchDetail({name:t.name,workspace:t.name,cluster:t.cluster});case 7:n=(0,y.toJS)(this.store.detail),l=(0,g.default)(n,"status.total.used",{}),u=(0,g.default)(n,"spec.quota.hard",{}),c=(0,g.default)(u,["requests.storage"],null),i=(0,g.default)(u,"persistentvolumeclaims",null),f=(0,g.default)(l,"persistentvolumeclaims","0"),d=(0,g.default)(l,["requests.storage"],"0Gi"),c&&(c=(0,D.memoryFormat)(c,"Gi"),d=(0,D.memoryFormat)(d,"Gi"),a.storage=(0,S.default)(c,d)),i&&(a.persistentvolumeclaims=(0,S.default)(Number(i),Number(f))),p={"requests.storage":c?"".concat(c,"Gi"):"InfinityGi",persistentvolumeclaims:i||""},Object.keys(u).forEach((function(e){(e.includes(I.STORAGE_CLASS_STORAGE)||e.includes(I.STORAGE_CLASS_VOLUME_CLAIMS))&&(p[e]=u[e])})),this.setState({formTemplate:(0,y.toJS)(this.store.detail),spec:p,allStorageClass:(0,s.default)(r),availableQuota:w({},a)},(function(){m.setRelateSourceResult()}));case 19:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,a=e.visible,r=e.onCancel,n=e.isSubmitting,l=this.state,o=l.error,u=l.spec,c=l.allStorageClass,s=l.availableQuota,i=l.disableSave,f=l.currentRelatedStorageTotal,d=l.currentRelatedVolumeClaimsTotal,p=l.totalStorageError,m=l.totalVolumeClaimsError,v=l.addedItems;return h.default.createElement(T.default.Form,{width:960,title:t("EDIT_WORKSPACE_QUOTAS"),icon:"pen",data:this.state.formTemplate,onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n,disableOk:!!o||i},h.default.createElement("div",{className:P.default.body,id:"viewBox"},h.default.createElement(C.Form.Item,null,h.default.createElement(R.default,this.resourceLimitProps)),h.default.createElement(C.Form.Item,null,h.default.createElement(I.default,{quota:u,isWorkspace:!0,availableQuota:s,allStorageClass:c,onChange:this.handleOnChange,renderOutOfLimitTip:p||m,totalStorageError:p,totalVolumeClaimsError:m,currentRelatedStorageTotal:f,currentRelatedVolumeClaimsTotal:d,addedItems:v}))))}},{key:"resourceLimitProps",get:function(){var e=this,a=this.state.formTemplate;return{cpuProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:1,label:1,weight:4},{value:2,label:2,weight:2},{value:3,label:3,weight:2},{value:4,label:4},{value:5,label:5},{value:6,label:6},{value:7,label:7},{value:8,label:8},{value:1/0,label:t("NO_LIMIT")}]},memoryProps:{marks:[{value:0,label:t("NO_REQUEST"),weight:4},{value:2,label:2,weight:4},{value:4,label:4,weight:2},{value:6,label:6,weight:2},{value:8,label:8},{value:10,label:10},{value:12,label:12},{value:14,label:14},{value:16,label:16},{value:1/0,label:t("NO_LIMIT")}],unit:"Gi",valueFormatter:function(e){return e>0&&e<1?e.toFixed(2):e>1&&e!==1/0?e.toFixed(1):e}},defaultValue:{limits:{cpu:(0,g.default)(a,'spec.quota.hard["limits.cpu"]'),memory:(0,g.default)(a,'spec.quota.hard["limits.memory"]')},requests:{cpu:(0,g.default)(a,'spec.quota.hard["requests.cpu"]'),memory:(0,g.default)(a,'spec.quota.hard["requests.memory"]')}},onChange:function(e){(0,b.default)(a,'spec.quota.hard["limits.cpu"]',(0,g.default)(e,"limits.cpu",null)),(0,b.default)(a,'spec.quota.hard["limits.memory"]',(0,g.default)(e,"limits.memory",null)),(0,b.default)(a,'spec.quota.hard["requests.cpu"]',(0,g.default)(e,"requests.cpu",null)),(0,b.default)(a,'spec.quota.hard["requests.memory"]',(0,g.default)(e,"requests.memory",null))},onError:function(t){e.setState({error:t})}}}}]),n}(h.default.Component);a.default=L,L.propTypes={detail:E.default.object,visible:E.default.bool,onOk:E.default.func,onCancel:E.default.func,isSubmitting:E.default.bool},L.defaultProps={visible:!1,isSubmitting:!1,detail:{},onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={body:"_3gx-epim1LPGcKH75fP9Qu",quotaItem:"_3WPJPpKpsaYoGbWbJfWdgZ",label:"_1Gv6t_kWjdKJhsCfZ6sKDp"}},function(e,a,r){"use strict";r(15);var n=r(20);r(5),r(4),r(23),r(24),r(17),r(136),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,r(45),r(5),r(42),r(4),r(23),r(57),r(17);var l=n(r(36)),o=n(r(37)),u=n(r(55)),c=n(r(56)),s=n(r(51)),i=n(r(0)),f=n(r(1)),d=r(186),p=n(r(787)),m=n(r(3673));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,c.default)(this,a)}}var h=function(e){(0,u.default)(r,e);var a=v(r);function r(){var e;(0,l.default)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={confirm:"",checked:!1},e.handleInputChange=function(t){e.setState({confirm:t.target.value})},e.handleDeleteCheckboxChange=function(t){e.setState({checked:t})},e.handleOk=function(){e.state.checked?e.props.onOk():e.props.onOk({kind:"DeleteOptions",apiVersion:"v1",propagationPolicy:"Orphan"})},e}return(0,o.default)(r,[{key:"componentDidUpdate",value:function(e){this.props.visible&&this.props.visible!==e.visible&&this.setState({confirm:""})}},{key:"render",value:function(){var e=this.props,a=e.type,r=e.resource,n=e.visible,l=e.onCancel,o=e.title,u=e.desc,c=e.isSubmitting,s=a||void 0,f=a?"".concat(a,"_LOW"):void 0,v=a?"".concat(a,"_PL"):void 0,h=u||(r&&a?1===r.split(", ").length?t.html("DELETE_RESOURCE_TYPE_DESC_SI",{type:t(f),resource:r}):t.html("DELETE_RESOURCE_TYPE_DESC_PL",{type:t(f),resource:r}):t.html("DELETE_DESC"));return i.default.createElement(p.default,{width:504,bodyClassName:m.default.modalBody,visible:n,isSubmitting:c,onCancel:l,hideHeader:!0,hideFooter:!0},i.default.createElement("div",{className:m.default.body},i.default.createElement("div",{className:"h5"},i.default.createElement(d.Icon,{name:"close",type:"light",className:m.default.closeIcon}),o||(r&&a?1===r.split(", ").length?t("DELETE_TITLE_SI",{type:t(s)}):t("DELETE_TITLE_PL",{type:t(v)}):t("DELETE"))),i.default.createElement("div",{className:m.default.content},i.default.createElement("p",null,h),r&&i.default.createElement(d.Input,{name:"confirm",value:this.state.confirm,onChange:this.handleInputChange,placeholder:r,autoFocus:!0}),i.default.createElement(d.Checkbox,{onChange:this.handleDeleteCheckboxChange,checked:this.state.checked},t("DELETE_WORKSPACE_PROJECTS_DESC")))),i.default.createElement("div",{className:m.default.footer},i.default.createElement(d.Button,{onClick:l,"data-test":"modal-cancel"},t("CANCEL")),i.default.createElement(d.Button,{type:"danger",loading:c,disabled:c||!!r&&this.state.confirm!==r,onClick:this.handleOk,"data-test":"modal-ok"},t("OK"))))}}]),r}(i.default.Component);a.default=h,h.propTypes={type:f.default.string,resource:f.default.string,visible:f.default.bool,title:f.default.oneOfType([f.default.string,f.default.node]),desc:f.default.oneOfType([f.default.string,f.default.node]),onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},h.defaultProps={visible:!1,isSubmitting:!1,onOk:function(){},onCancel:function(){}}},function(e,t,a){e.exports={modalBody:"LMLXNreroioTPzZNBqI9P",body:"_11Lplgt-TPvmkVmIdHTC4F",content:"ydfzqfBYg_v0MAgK_cnl7",closeIcon:"_3jLtp35AZVNm24GTz4bZ76",footer:"UfSyRU5mQyye1fWDUyy8n"}}])]);