(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1250:function(e,t,r){e.exports={wrapper:"kovAnOBWnbXq-JlHU_VIP",cluster:"_1EpYMYludH_-IxTiJcMxz9",clusterLoading:"_34gsmPuVBqBUQYLF0aIvhy",scheduleCluster:"_2OBXZfvycGRODoc0s1-hEi",textWrapper:"_3gsJia0vEPvoV7rgPknk8Q",text:"_2CXdP5tWoZH9kLsqcMPgcE",icon:"_2kS7w0oWU2DFVal4VccUBf",bottom:"_14eMAldCS16L3-7wubxaT4",replicas:"_33X2z00tn1dxC0EsdKdhJL",readyNum:"_320Vw2qukVGKtVdJervk-4",pods:"_15U9Wo9GBtMtHz8A-LlO1h",more:"_1f6XH6RYJh3c9S47msjdY-",control:"_1-Fpu3XPZbpUJ-H33NUUKA",edit:"_3M72A2m-pBAJOiDIx5mXRK",indicator:"_1nLuS9q7OmVhqUNjpxd3qx",group:"_37Fw1BhM-BGh6-xHbB0ROe",titleBox:"Wm3KmLgy9-ioc64zaskqN",IconBox:"_1n51J1JGBYFqdhwNkK5K9c",right:"_1P23ECXnSY2rhW0yCLFiN5",totalBox:"_2CPRqwvpCEZvprHOxGKGxC",total:"_1xUqFi1s3g33Ut6ocGucZa",replicasInput:"_3b0Vhu1VlRb2r4ov1N_bG4",weight:"f92ZLYqLza7lGjiQIUNdl",value:"_1KAVXLkO7U9W4bOfF-bfZ4",spanText:"_1bXQGKTI9jGHqGEvmX_V9b",subText:"_2qOz41ujpcsfHRrFygnY16"}},1978:function(e,r,a){"use strict";a(15);var n=a(157),o=a(20);a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var c=o(a(36)),u=o(a(37)),l=o(a(55)),i=o(a(56)),s=o(a(51)),f=o(a(26)),d=o(a(321)),p=n(a(0)),m=a(186),h=o(a(804)),v=a(72),y=a(434),g=o(a(4942));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var S=function(e){(0,l.default)(a,e);var r=E(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.data,a=e.clusters,n=e.module,o=(0,d.default)(a,"name");return p.default.createElement("div",{className:g.default.wrapper},p.default.createElement("div",{className:g.default.tags},r.clusters.map((function(e){var t=o[e.name];if(!t)return null;var a=(0,f.default)(r,"resources[".concat(t.name,"]"),{}),c=(0,f.default)(r,"clusterTemplates[".concat(t.name,"].spec.replicas"),0),u=(0,y.getWorkloadStatus)(a,n),l=u.status,i=u.reason;return p.default.createElement(m.Tag,{key:t.name,type:v.CLUSTER_GROUP_TAG_TYPE[t.group],className:g.default.tag},p.default.createElement(m.Icon,{name:v.CLUSTER_PROVIDER_ICON[t.provider]||"kubernetes",size:16,type:"light"}),p.default.createElement("span",null,a.availablePodNums||a.readyPodNums||0," /"," ",c)," ",i&&p.default.createElement(h.default,{status:l,data:a}))}))),p.default.createElement("p",null,t("REPLICAS_CURRENT"),"/",t("REPLICAS_DESIRED")))}}]),a}(p.Component);r.default=S},1979:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(31),a(84),a(18),a(16),a(85),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(5),a(31),a(84),a(18),a(16),a(4),a(85);var o=n(a(0)),c=n(a(1)),u=a(433),l=a(186),i=n(a(790)),s=n(a(4976)),f=function(e){var r=e.gateway,a=e.rule,n=e.tls,c=void 0===n?{}:n,f=e.prefix,d=c.hosts&&c.hosts.includes(a.host)?"https":"http",p=a.host;if(r&&r.ports&&"NodePort"===r.type){var m=r.ports.find((function(e){return e.name===d}));m&&("http"===d&&80!==m.nodePort||"https"===d&&443!==m.nodePort)&&(p="".concat(p,":").concat(m.nodePort))}var h=o.default.createElement(o.default.Fragment,null,o.default.createElement("span",null,t("PROTOCOL_VALUE",{value:d.toUpperCase()})),"  ","https"===d&&o.default.createElement("span",null,t("CERTIFICATE_VALUE",{value:c.secretName})));return o.default.createElement("div",{className:s.default.card},o.default.createElement("span",{className:s.default.tip},t("UNABLE_TO_ACCESS"),"  ",o.default.createElement(l.Tooltip,{content:t.html("UNABLE_TO_ACCESS_TIP")},o.default.createElement(l.Icon,{name:"question"}))),o.default.createElement(i.default,{icon:"ip",title:p,description:h}),a.http.paths.map((function(e){return o.default.createElement("div",{key:e.path,className:s.default.path},o.default.createElement(l.Columns,null,o.default.createElement(l.Column,null,o.default.createElement("span",null,t.html("ROUTE_PATH_VALUE",{value:e.path}))),o.default.createElement(l.Column,null,o.default.createElement("span",null,t("SERVICE_COLON"),o.default.createElement("strong",null,o.default.createElement(u.Link,{to:"".concat(f,"/services/").concat(e.backend.service.name)},e.backend.service.name)))),o.default.createElement(l.Column,null,o.default.createElement("span",null,t.html("ROUTE_PORT_VALUE",{value:e.backend.service.port.number}))),o.default.createElement(l.Column,null,o.default.createElement("a",{href:"".concat(d,"://").concat(p).concat(e.path),target:"_blank",rel:"noreferrer noopener"},o.default.createElement(l.Button,{className:s.default.access},t("ACCESS_SERVICE"))))))})))};f.propTypes={rule:c.default.object};var d=f;r.default=d},1980:function(e,r,a){"use strict";a(15);var n=a(157),o=a(20);a(5),a(31),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(31),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var c=o(a(36)),u=o(a(37)),l=o(a(55)),i=o(a(56)),s=o(a(51)),f=a(186),d=o(a(789)),p=n(a(0)),m=a(52),h=a(72),v=o(a(4980));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var g=function(e){(0,l.default)(a,e);var r=y(a);function a(){var e;(0,c.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={showOptions:!1},e.optionsRef=p.default.createRef(),e.handleDOMClick=function(t){e.optionsRef&&e.optionsRef.current&&!e.optionsRef.current.contains(t.target)&&e.setState({showOptions:!1})},e.handleClick=function(t){e.setState({showOptions:!1},(function(){(0,e.props.onChange)(t)}))},e.toggleOptions=function(){e.setState((function(e){return{showOptions:!e.showOptions}}))},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDOMClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDOMClick)}},{key:"renderValue",value:function(e){var r=this.props.extra;return p.default.createElement("div",{key:e.name,className:v.default.option,onClick:this.toggleOptions},p.default.createElement(f.Icon,{name:h.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",size:20,type:"light"}),p.default.createElement("span",{className:v.default.name},(0,m.getDisplayNameNew)(e)),e.group&&p.default.createElement(f.Tag,{key:e.name,type:h.CLUSTER_GROUP_TAG_TYPE[e.group]},t("ENV_".concat(e.group.toUpperCase()),{defaultValue:e.group})),r&&r(e),p.default.createElement(f.Icon,{className:v.default.indicator,name:"chevron-down",type:"light"}))}},{key:"renderOption",value:function(e){var r=this,a=this.props.extra;return p.default.createElement("div",{key:e.name,className:v.default.option,onClick:function(){return r.handleClick(e)}},p.default.createElement(f.Icon,{name:h.CLUSTER_PROVIDER_ICON[e.provider]||"kubernetes",size:20,type:"light"}),p.default.createElement("span",{className:v.default.name},(0,m.getDisplayNameNew)(e)),e.group&&p.default.createElement(f.Tag,{key:e.name,type:h.CLUSTER_GROUP_TAG_TYPE[e.group]},t("ENV_".concat(e.group.toUpperCase()),{defaultValue:e.group})),a&&a(e))}},{key:"render",value:function(){var e=this,r=this.props,a=r.value,n=r.options,o=this.state.showOptions,c=n.find((function(e){return e.name===a.name}));return c?p.default.createElement(d.default,{title:t("CLUSTER")},p.default.createElement("div",{className:v.default.wrapper,ref:this.optionsRef},p.default.createElement("div",{className:v.default.value},this.renderValue(c)),o&&p.default.createElement("div",{className:v.default.options},n.map((function(t){return e.renderOption(t)}))))):null}}]),a}(p.Component);r.default=g},1981:function(e,t,r){"use strict";var a=r(20);r(12),r(5),r(11),r(6),r(84),r(18),r(48),r(16),r(9),r(13),r(10),r(4),r(316),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.default=void 0,r(12),r(45),r(5),r(11),r(6),r(84),r(18),r(28),r(48),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(316),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var n=a(r(61)),o=a(r(43)),c=a(r(30));r(41);var u=a(r(44)),l=a(r(36)),i=a(r(37)),s=a(r(55)),f=a(r(56)),d=a(r(51)),p=a(r(0)),m=r(14),h=r(239),v=a(r(63)),y=a(r(450)),g=a(r(861)),E=a(r(321)),S=a(r(854)),_=a(r(26)),O=a(r(135)),k=a(r(849)),b=a(r(1071)),C=a(r(1982)),R=a(r(4989));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var D=function(e){(0,s.default)(r,e);var t=w(r);function r(){var e;(0,l.default)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={resources:{}},e.fetchReplica=(0,S.default)((0,u.default)(o.default.mark((function t(){var r,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetailSilent(P({clusters:e.store.detail.clusters.map((function(e){return e.name}))},r));case 3:a=t.sent,e.setState({resources:a});case 5:case"end":return t.stop()}}),t)}))),1e3),e}return(0,i.default)(r,[{key:"renderReplicaInfo",value:function(){var e=this.store,t=e.detail,r=void 0===t?{}:t,a=e.resources,n=e.isResourcesLoading,o=(0,O.default)((0,m.toJS)(a)),c=this.state.resources,u=(0,E.default)(this.props.projectStore.detail.clusters,"name");return(0,v.default)(c)||Object.keys(o).forEach((function(e){o[e]=P(P({},o[e]),(0,_.default)(c,e,{}))})),p.default.createElement(C.default,{module:this.module,store:this.store,detail:r,resources:o,clustersDetail:u,clusters:r.clusters,isLoading:n,canEdit:this.enabledActions.includes("edit"),projectStore:this.props.projectStore})}},{key:"renderContainerPorts",value:function(){if(this.props.noPorts)return null;var e=this.store,t=e.resources,r=e.isResourcesLoading,a=[];return Object.values(t).forEach((function(e){e&&e.containers&&a.push.apply(a,(0,n.default)((0,g.default)((0,y.default)(e.containers.map((function(e){return(0,v.default)(e.ports)?[]:e.ports.slice()}))),"name").map((function(t){return P(P({},t),{},{cluster:e.cluster})}))))})),(0,v.default)(a)?null:p.default.createElement(b.default,{ports:a,loading:r,isFederated:!0})}},{key:"renderPods",value:function(){var e=this.store,t=e.detail,r=e.resources,a=(0,E.default)(this.props.projectStore.detail.clusters,"name"),n=t.clusters.filter((function(e){return a[e.name]})).map((function(e){return e.name}));return p.default.createElement(k.default,{prefix:this.prefix,details:(0,m.toJS)(r),clusters:n,getReplica:this.fetchReplica,isFederated:!0})}},{key:"renderContent",value:function(){return p.default.createElement("div",null,this.renderReplicaInfo(),this.renderContainerPorts(),this.renderPods())}},{key:"render",value:function(){return p.default.createElement("div",{className:R.default.main},this.renderContent())}},{key:"module",get:function(){return this.props.detailStore.module}},{key:"store",get:function(){return this.props.detailStore}},{key:"prefix",get:function(){var e=this.props.match.params.workspace;return e?"/".concat(e):""}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.module,project:this.props.match.params.namespace,fedproject:!0})}}]),r}(p.default.Component),A=(0,h.inject)("projectStore","detailStore")((0,h.observer)(D));t.default=A;var j=D;t.Component=j},1982:function(e,r,a){"use strict";var n=a(157),o=a(20);a(12),a(5),a(11),a(31),a(6),a(18),a(16),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(31),a(6),a(18),a(28),a(42),a(16),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var c=o(a(43)),u=o(a(30));a(41);var l=o(a(44)),i=o(a(36)),s=o(a(37)),f=o(a(55)),d=o(a(56)),p=o(a(51)),m=n(a(0)),h=o(a(789)),v=o(a(1783)),y=o(a(74)),g=o(a(26)),E=a(14),S=o(a(4986)),_=o(a(4987)),O=o(a(4988)),k=o(a(1250));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var T=function(e){(0,f.default)(a,e);var r=R(a);function a(){var e;(0,i.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).getWeight=function(t){var r=e.props.store;return(0,g.default)(r.deployedScheduleTemplate,"spec.clusters.".concat(t,".weight"),0)},e.handleReplicasChange=function(){var t=(0,l.default)(c.default.mark((function t(r,a){var n,o,u,l,i,s,f;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,o=n.detail,u=n.store,l=o.overrides,(s=(i=void 0===l?[]:l).find((function(e){return e.clusterName===r})))?(f=s.clusterOverrides.find((function(e){return"/spec/replicas"===e.path})))?f.value=a:s.clusterOverrides.push({path:"/spec/replicas",value:a}):i.push({clusterName:r,clusterOverrides:[{path:"/spec/replicas",value:a}]}),t.next=6,u.patch(o,{spec:{overrides:i}});case 6:return t.next=8,u.resourceStore.patch(C(C({},o),{},{cluster:r}),{spec:{replicas:a}});case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.updateSchedule=(0,l.default)(c.default.mark((function t(){var r,a,n,o,u,l,i;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.store,n=r.detail,o=r.projectStore,u=r.clustersDetail,l=Object.keys((0,E.toJS)(u)),i={name:n.name,namespace:o.detail.namespace,workspace:o.detail.workspace},t.next=5,a.updateScheduleYaml(n,a.deployedScheduleTemplate);case 5:return t.next=7,a.fetchResources(C({clusters:l},i));case 7:case"end":return t.stop()}}),t)}))),e.handleWeightChange=function(){var t=(0,l.default)(c.default.mark((function t(r,a){var n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.store,(0,y.default)(n.deployedScheduleTemplate,"spec.clusters.".concat(r,".weight"),a),t.next=4,e.updateSchedule();case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.totalChange=function(){var t=(0,l.default)(c.default.mark((function t(r){var a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.store,(0,y.default)(a.deployedScheduleTemplate,"spec.totalReplicas",Number(r)),t.next=4,e.updateSchedule();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.default)(a,[{key:"renderTittleText",value:function(){var e=this.props.store.isScheduleProject?{Icon:"stretch",title:t("WEIGHTS"),des:t("SPECIFY_WEIGHTS_DESC")}:{Icon:"backup",title:t("REPLICA_COUNT"),des:t("SPECIFY_REPLICAS_DESC")};return m.default.createElement("div",{className:k.default.titleBox},m.default.createElement("div",{className:k.default.IconBox},m.default.createElement(v.default,{name:e.Icon,size:"40"})),m.default.createElement("div",{className:k.default.right},m.default.createElement("span",{className:k.default.title},e.title),m.default.createElement("span",{className:k.default.des},e.des)))}},{key:"render",value:function(){var e=this,r=this.props,a=r.store,n=r.resources,o=r.clusters,c=r.clustersDetail,u=r.canEdit,l=r.projectStore;return o?m.default.createElement(h.default,{title:t("POD_REPLICAS")},this.renderTittleText(),m.default.createElement("div",{className:k.default.wrapper},a.isScheduleProject&&m.default.createElement("div",{className:k.default.totalBox},m.default.createElement(v.default,{name:"pod",size:"40"}),m.default.createElement("div",{className:k.default.total},t("TOTAL_REPLICAS")),m.default.createElement(O.default,{desire:this.getTotalReplicas,onChange:this.totalChange})),o.map((function(t){return c[t.name]?a.isScheduleProject?m.default.createElement(_.default,{key:t.name,cluster:c[t.name],workload:n[t.name],store:a,projectStore:l,onWeightChange:e.handleWeightChange,onReplicasChange:u?e.handleReplicasChange:null}):m.default.createElement(S.default,{key:t.name,cluster:c[t.name],workload:n[t.name],onReplicasChange:u?e.handleReplicasChange:null,store:a}):null})))):null}},{key:"getTotalReplicas",get:function(){var e=this.props.store;return(0,g.default)(e.deployedScheduleTemplate,"spec.totalReplicas",0)}}]),a}(m.Component);r.default=T},1983:function(e,r,a){"use strict";var n=a(20);a(12),a(11),a(6),a(18),a(320),a(16),a(9),a(13),a(10),a(4),a(316),a(23),a(17),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(11),a(6),a(18),a(28),a(320),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(316),a(23),a(57),a(17),a(7);var o,c=n(a(315)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(88)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=n(a(0)),h=a(14),v=a(239),y=n(a(3)),g=n(a(63)),E=n(a(26)),S=a(52),_=a(794),O=n(a(989)),k=a(186),b=a(798),C=a(822),R=n(a(1831)),T=n(a(4990));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var A={cpu_usage:"pod_cpu_usage",memory_usage:"pod_memory_usage_wo_cache",gpu_usage:"pod_gpu_usage",gpu_memory_usage:"pod_gpu_memory_usage",net_transmitted:"pod_net_bytes_transmitted",net_received:"pod_net_bytes_received"},j={deployments:"deployment",statefulsets:"statefulset",daemonsets:"daemonset"},N=(0,v.inject)("detailStore")(o=(0,v.observer)(o=function(e){(0,f.default)(a,e);var r=D(a);function a(e){var t;return(0,l.default)(this,a),(t=r.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.state,a=r.cluster,n=r.pods;(0,g.default)(n)||e.cluster!==a?t.resourceStore.fetchSortedMetrics(w(w({},t.resourceParams),{},{cluster:e.cluster,metrics:[A.cpu_usage],limit:6})).then((function(r){var a=((0,E.default)(r[A.cpu_usage],"data.result")||[]).map((function(e){return(0,E.default)(e,"metric.pod")}));t.setState({pods:a,cluster:e.cluster},(function(){t.fetchMetrics(w({resources:a},e))}))})):t.fetchMetrics(w({resources:n},e))},t.fetchMetrics=function(e){t.monitorStore.fetchMetrics(w(w({resources:[],metrics:Object.values((0,S.hideGPUByLicense)(A,t.state.cluster))},t.resourceParams),e))},t.getMonitoringCfgs=function(){return[{type:"cpu",title:"CPU_USAGE",unitType:"cpu",metricType:A.cpu_usage},{type:"memory",title:"MEMORY_USAGE",unitType:"memory",metricType:A.memory_usage},{type:"gpu",title:"GPU_USAGE",unitType:"gpu",metricType:A.gpu_usage},{type:"gpu_memory",title:"GPU_MEMORY_USAGE",unitType:"memory",metricType:A.gpu_memory_usage},{type:"bandwidth",title:"OUTBOUND_TRAFFIC",unitType:"bandwidth",metricType:A.net_transmitted},{type:"bandwidth",title:"INBOUND_TRAFFIC",unitType:"bandwidth",metricType:A.net_received}]},t.showMultipleModal=function(e){return(0,S.cacheFunc)("_showMultipleModal_".concat(e.title),(function(){t.setState({showMultipleModal:!0,selectItem:w(w({},e),{},{legend:["USAGE"]})})}),(0,s.default)(t))},t.hideMultipleModal=function(){t.setState({showMultipleModal:!1,selectItem:{}})},t.state={showMultipleModal:!1,selectItem:{},pods:[],cluster:""},t.monitorStore=new O.default,t.resourceStore=new O.default,t}return(0,i.default)(a,[{key:"renderCard",value:function(){var e=this,r=this.store.detail,a=r.createTime,n=r.clusters,o=this.monitorStore,u=o.isLoading,l=o.isRefreshing,i=(0,S.hideGPUByLicense)(this.getMonitoringCfgs(),this.state.cluster),s=this.isMore;return m.default.createElement(C.Controller,{createTime:a,onFetch:this.fetchData,loading:u,refreshing:l,clusters:n,isEmpty:(0,g.default)(this.metrics),isFederated:!0},s&&m.default.createElement(k.Alert,{message:t.html("MONITORING_ALERT_DESC"),type:"info"}),i.map((function(r){r.data=(0,E.default)(e.metrics,"".concat(r.metricType,".data.result"))||[{values:(0,_.getZeroValues)()}],r.legend=r.data.map((function(e,t){return(0,E.default)(e,"metric.pod","pod".concat(t))})),r.workload_kind=e.monitoringModule;var a=(0,_.getAreaChartOps)(r);return m.default.createElement("div",{key:r.title,className:(0,y.default)(T.default.item)},s&&m.default.createElement("div",{className:T.default.more,onClick:e.showMultipleModal(r)},t("VIEW_ALL_REPLICAS")),m.default.createElement(b.MultiArea,(0,c.default)({width:"100%"},a)))})))}},{key:"renderModal",value:function(){var e=this.state,t=e.showMultipleModal,r=e.selectItem,a=this.store.detail,n=a.name,o=a.namespace;return m.default.createElement("div",null,m.default.createElement(R.default,{visible:t,module:this.monitoringModule,name:n,namespace:o,config:r,onCancel:this.hideMultipleModal}))}},{key:"render",value:function(){return m.default.createElement("div",null,this.renderCard(),this.renderModal())}},{key:"store",get:function(){return this.props.detailStore}},{key:"monitoringModule",get:function(){return j[this.store.module]}},{key:"metrics",get:function(){return this.monitorStore.data}},{key:"resourceParams",get:function(){var e=this.store.detail,t=e.namespace,r=e.name;return{namespace:t,workload_kind:this.monitoringModule,workload_name:r}}},{key:"isMore",get:function(){return((0,E.default)((0,h.toJS)(this.resourceStore.sort),"data[".concat(A.cpu_usage,"].data.result"))||[]).length>5}}]),a}(m.default.Component))||o)||o;r.default=N},4923:function(e,t,r){"use strict";r(15);var a=r(20);r(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5);var n=a(r(61)),o=r(317),c=a(r(4924)),u=a(r(4925)),l=a(r(4940)),i=a(r(4941)),s=a(r(4943)),f=a(r(4944)),d=a(r(4945)),p=a(r(4946)),m=a(r(4948)),h=a(r(4953)),v=a(r(4954)),y=a(r(4955)),g=a(r(4961)),E=a(r(4964)),S=a(r(4965)),_="/:workspace/federatedprojects/:namespace",O=[].concat((0,n.default)((0,S.default)(_)),[{path:_,component:c.default,routes:[{path:"".concat(_,"/overview"),component:u.default,exact:!0},{path:"".concat(_,"/applications"),component:l.default,exact:!0},{path:"".concat(_,"/deployments"),component:i.default,exact:!0},{path:"".concat(_,"/statefulsets"),component:s.default,exact:!0},{path:"".concat(_,"/services"),component:f.default,exact:!0},{path:"".concat(_,"/ingresses"),component:d.default,exact:!0},{path:"".concat(_,"/volumes"),component:p.default,exact:!0},{path:"".concat(_,"/base-info"),component:m.default,exact:!0},{path:"".concat(_,"/configmaps"),component:h.default,exact:!0},{path:"".concat(_,"/secrets"),component:v.default,exact:!0},{path:"".concat(_,"/quota"),component:y.default,exact:!0},{path:"".concat(_,"/gateways"),component:E.default,exact:!0},{path:"".concat(_,"/log-collections"),component:g.default,exact:!0},(0,o.getIndexRoute)({path:"".concat(_,"/workloads"),to:"".concat(_,"/deployments"),exact:!0}),(0,o.getIndexRoute)({path:_,to:"".concat(_,"/overview"),exact:!0}),(0,o.getIndexRoute)({path:"*",to:"/404",exact:!0})]}]);t.default=O},4924:function(e,t,r){"use strict";r(15);var a=r(20),n=r(157);r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(28),r(42),r(4),r(23),r(57),r(24),r(17),r(62);var o,c=a(r(36)),u=a(r(37)),l=a(r(55)),i=a(r(56)),s=a(r(51)),f=r(239),d=n(r(0)),p=a(r(438)),m=r(317);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var v=(0,f.inject)("rootStore","projectStore")(o=(0,f.observer)(o=function(e){(0,l.default)(r,e);var t=h(r);function r(e){var a;return(0,c.default)(this,r),(a=t.call(this,e)).state={fetchFin:!1},a.handleChange=function(e){return a.routing.push(e)},a.store=new p.default,a}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props.route;return d.default.createElement(d.default.Fragment,null,(0,m.renderRoutes)(e.routes))}},{key:"project",get:function(){return this.props.match.params.namespace}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),r}(d.Component))||o)||o;t.default=v},4925:function(e,r,a){"use strict";var n=a(20);a(12),a(5),a(11),a(6),a(84),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(85),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(6),a(84),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(85),a(62),a(7);var o,c=n(a(30)),u=n(a(315)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=a(186),m=n(a(26)),h=a(14),v=a(239),y=n(a(0)),g=a(52),E=n(a(4926)),S=n(a(4928)),_=n(a(4930)),O=n(a(4938));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,v.inject)("rootStore","projectStore")(o=(0,v.observer)(o=function(e){(0,s.default)(a,e);var r=C(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={cluster:(0,m.default)(e.project,"detail.clusters[0].name")},e.handleClusterChange=function(t){e.setState({cluster:t})},e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.project.detail,r={cluster:this.state.cluster,clusters:this.clusters,onClusterChange:this.handleClusterChange};return y.default.createElement("div",null,y.default.createElement("div",{className:"h3 margin-b12"},t("OVERVIEW")),y.default.createElement(p.Columns,null,y.default.createElement(p.Column,{className:"is-8"},y.default.createElement(E.default,{className:"margin-b12",detail:e,workspace:this.workspace}),this.enabledActions.includes("edit")&&y.default.createElement(S.default,{match:this.props.match}),y.default.createElement(_.default,(0,u.default)({match:this.props.match},r))),y.default.createElement(p.Column,{className:"is-4"},y.default.createElement(O.default,(0,u.default)({match:this.props.match},r)))))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,m.default)(this.props.match,"params.namespace")}},{key:"workspace",get:function(){return(0,m.default)(this.props.match,"params.workspace")}},{key:"project",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return(0,h.toJS)(this.project.detail.clusters).map((function(e){return{label:(0,g.showNameAndAlias)(e),value:e.name}}))}},{key:"enabledActions",get:function(){return globals.app.getActions(b(b({module:"project-settings"},this.props.match.params),{},{project:this.namespace,fedproject:!0}))}}]),a}(y.default.Component))||o)||o;r.default=R},4926:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(42),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),u=n(a(55)),l=n(a(56)),i=n(a(51)),s=n(a(0)),f=n(a(3)),d=a(433),p=a(186),m=n(a(790)),h=a(52),v=n(a(4927));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var g=function(e){(0,u.default)(a,e);var r=y(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,r=e.className,a=e.detail,n=void 0===a?{}:a,o=e.workspace;return s.default.createElement("div",{className:(0,f.default)(v.default.wrapper,r)},s.default.createElement("div",{className:v.default.header},s.default.createElement(p.Icon,{name:"project",size:40}),s.default.createElement(m.default,{title:(0,h.getDisplayName)(n),description:n.description||"-"})),s.default.createElement("div",{className:v.default.content},s.default.createElement(m.default,{title:s.default.createElement(d.Link,{to:"/workspaces/".concat(o)},o),description:t("WORKSPACE")}),s.default.createElement(m.default,{title:n.creator||"-",description:t("CREATOR")})),s.default.createElement("img",{className:v.default.background,src:"/assets/project-overview.svg"}))}}]),a}(s.default.Component);r.default=g},4927:function(e,t,r){e.exports={wrapper:"_1cCsVSrWXIaWdV8emflgLc",header:"_3CY3ZlrDR0I7YC4OIdZDkI",content:"_3ghCMfU_PDmm9szX-QX-92",background:"_3s5SVx8hwpIVXZJU0dXOME"}},4928:function(e,r,a){"use strict";var n=a(20),o=a(157);a(12),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var c,u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=o(a(0)),m=a(239),h=n(a(26)),v=a(186),y=n(a(790)),g=n(a(789)),E=n(a(437)),S=a(791),_=n(a(4929));function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,m.inject)("rootStore","projectStore")(c=(0,m.observer)(c=(0,S.trigger)(c=function(e){(0,s.default)(a,e);var r=b(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={showTip:!1},e.store=new E.default({module:"limitranges"}),e.showSetting=function(){var t=e.params,r=t.namespace,a=t.workspace,n=e.store.list.data;e.trigger("project.default.resource",k(k({},e.params),{},{detail:n[0],isFederated:!0,workspace:a,name:r,clusters:e.clusters,projectDetail:e.props.projectStore.detail,success:function(){return e.setState({showTip:!1})}}))},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.params.namespace;this.store.fetchListByK8s({namespace:t}).then((function(){var t=e.store.list.total;e.setState({showTip:0===t})}))}},{key:"render",value:function(){return this.state.showTip?p.default.createElement(g.default,{className:_.default.wrapper},p.default.createElement(y.default,{className:_.default.text,icon:"exclamation",title:t("DEFAULT_CONTAINER_QUOTAS_NOT_SET"),description:t("DEFAULT_CONTAINER_QUOTAS_DESC")}),p.default.createElement(v.Button,{type:"control",onClick:this.showSetting},t("EDIT_QUOTAS"))):null}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"clusters",get:function(){return(0,h.default)(this.props.projectStore,"detail.clusters",[]).map((function(e){return e.name}))}}]),a}(p.Component))||c)||c)||c;r.default=C},4929:function(e,t,r){e.exports={wrapper:"_2FvSeMzYYesvhX-ejJ42KX",text:"_3DdMVlXygCEhz8eMoaWaSB"}},4930:function(e,r,a){"use strict";var n=a(20);a(12),a(11),a(31),a(6),a(18),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(11),a(31),a(6),a(18),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(315)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=a(186),m=n(a(789)),h=n(a(26)),v=a(14),y=a(239),g=n(a(0)),E=n(a(837)),S=n(a(959)),_=n(a(1420)),O=a(52),k=a(72),b=a(794),C=n(a(4931)),R=n(a(4934)),T=n(a(4935));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var A=["namespace_pod_count","namespace_deployment_count","namespace_statefulset_count","namespace_daemonset_count","namespace_job_count","namespace_cronjob_count","namespace_pvc_count","namespace_service_count","namespace_secret_count","namespace_configmap_count","namespace_ingresses_extensions_count","namespace_s2ibuilder_count"],j=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage"],N=(0,y.inject)("rootStore")(o=(0,y.observer)(o=function(e){(0,s.default)(a,e);var r=D(a);function a(e){var n;return(0,l.default)(this,a),(n=r.call(this,e)).fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.fetchMetrics(),n.overviewStore.fetchResourceStatus(w(w(w({},e),n.props.match.params),{},{cluster:n.props.cluster}))},n.fetchMetrics=function(e){var t=n.state,r=t.resourceType,a=t.range;"application"===r?n.appResourceMonitorStore.fetchMetrics(w(w(w({},n.props.match.params),{},{cluster:n.props.cluster,metrics:A,step:"".concat(Math.floor(a/10),"s"),times:10,fillZero:!0},e),{},{autoRefresh:!1})):n.physicalResourceMonitorStore.fetchMetrics(w(w(w({},n.props.match.params),{},{cluster:n.props.cluster,metrics:(0,O.hideGPUByLicense)(j,n.props.cluster),step:"".concat(Math.floor(a/40),"s"),times:40,fillZero:!0},e),{},{autoRefresh:!1}))},n.getResourceData=function(){var e=(0,v.toJS)(n.overviewStore.resource),t=e.quota,r=void 0===t?{}:t,a=e.status,o=void 0===a?{}:a,c=r.used||{};return[{key:"deployments",icon:k.ICON_TYPES.deployments,name:"DEPLOYMENT",routeName:"deployments",num:c["count/deployments.apps"],warnNum:o.deployments,metric:"namespace_deployment_count"},{key:"statefulsets",icon:k.ICON_TYPES.statefulsets,name:"STATEFULSET",routeName:"statefulsets",num:c["count/statefulsets.apps"],warnNum:o.statefulsets,metric:"namespace_statefulset_count"},{key:"volumes",icon:k.ICON_TYPES.volumes,name:"PERSISTENT_VOLUME_CLAIM",routeName:"volumes",num:c.persistentvolumeclaims||c["count/persistentvolumeclaims"],warnNum:o["persistent-volume-claims"],metric:"namespace_pvc_count"},{key:"services",icon:k.ICON_TYPES.services,name:"SERVICE",routeName:"services",num:c["count/services"],metric:"namespace_service_count"},{key:"ingresses",icon:k.ICON_TYPES.ingresses,name:"ROUTE",routeName:"ingresses",num:c["count/ingresses.extensions"],metric:"namespace_ingresses_extensions_count"}]},n.handleResouceTypeChange=function(e){n.setState({resourceType:e},(function(){n.fetchMetrics()}))},n.handleRangeChange=function(e){n.setState({range:e},(function(){n.fetchMetrics()}))},n.clusterRenderer=function(e){return t("CLUSTER_VALUE",{value:e.label})},n.state={resourceType:"application",range:43200},n.overviewStore=new _.default,n.appResourceMonitorStore=new S.default,n.physicalResourceMonitorStore=new S.default,n.fetchData(),n}return(0,i.default)(a,[{key:"componentDidUpdate",value:function(e){(0,E.default)(e.match.params,this.props.match.params)&&this.props.cluster===e.cluster||this.fetchData()}},{key:"componentDidMount",value:function(){(0,b.startAutoRefresh)(this,{method:"fetchMetrics",interval:1e4,leading:!1})}},{key:"componentWillUnmount",value:function(){(0,b.stopAutoRefresh)(this)}},{key:"renderApplicationResource",value:function(){var e=this,t=(0,v.toJS)(this.overviewStore.resource).isLoading,r=this.appResourceMonitorStore,a=r.data,n=r.isLoading,o=r.isRefreshing,u=this.getResourceData();return g.default.createElement(p.Loading,{spinning:t},g.default.createElement("div",{className:R.default.resources},u.filter((function(e){return!e.disabled})).map((function(t){return g.default.createElement(C.default,(0,c.default)({},e.props.match.params,t,{metrics:(0,h.default)(a,"".concat(t.metric,".data.result")),isMetricsLoading:n||o}))}))))}},{key:"renderPhysicalResource",value:function(){var e=this,r=this.physicalResourceMonitorStore,a=r.data,n=r.isLoading,o=r.isRefreshing,c=this.timeOptions.find((function(t){return t.value===e.state.range}))||{};return g.default.createElement("div",null,g.default.createElement(T.default,{type:"cpu",title:t("CPU_USAGE_TIME",{time:c.label}),metrics:(0,h.default)(a,"namespace_cpu_usage.data.result"),isLoading:n||o,showDay:c.value>=172800}),g.default.createElement(T.default,{type:"memory",title:t("MEMORY_USAGE_TIME",{time:c.label}),metrics:(0,h.default)(a,"namespace_memory_usage_wo_cache.data.result"),isLoading:n||o,showDay:c.value>=172800}))}},{key:"renderHeader",value:function(){var e=this.props,r=e.cluster,a=e.clusters,n=e.onClusterChange;return g.default.createElement("div",{className:R.default.header},g.default.createElement(p.RadioGroup,{mode:"button",value:this.state.resourceType,onChange:this.handleResouceTypeChange,size:"small"},g.default.createElement(p.RadioButton,{value:"application"},t("APPLICATION_RESOURCE_PL")),g.default.createElement(p.RadioButton,{value:"physical"},t("PHYSICAL_RESOURCE_PL"))),g.default.createElement(p.Select,{className:R.default.timeSelect,defaultValue:this.state.range,options:this.timeOptions,onChange:this.handleRangeChange}),g.default.createElement(p.Select,{className:R.default.cluster,value:r,options:a,onChange:n,valueRenderer:this.clusterRenderer,showTip:!0}))}},{key:"render",value:function(){var e=this.state.resourceType;return g.default.createElement(m.default,{className:R.default.wrapper,title:t("RESOURCE_STATUS")},this.renderHeader(),"application"===e?this.renderApplicationResource():this.renderPhysicalResource())}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"namespace",get:function(){return(0,h.default)(this.props.match,"params.namespace")}},{key:"timeOptions",get:function(){return[{label:t("LAST_TIME_H",{num:1}),value:3600},{label:t("LAST_TIME_H",{num:2}),value:7200},{label:t("LAST_TIME_H",{num:5}),value:18e3},{label:t("LAST_TIME_H",{num:12}),value:43200},{label:t("LAST_TIME_D",{num:1}),value:86400},{label:t("LAST_TIME_D",{num:2}),value:172800},{label:t("LAST_TIME_D",{num:3}),value:259200},{label:t("LAST_TIME_D",{num:7}),value:604800}]}}]),a}(g.default.Component))||o)||o;r.default=N},4931:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(28),a(42),a(16),a(4),a(23),a(57),a(17);var o,c,u,l=n(a(315)),i=n(a(30)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=n(a(0)),v=a(239),y=n(a(1)),g=n(a(3)),E=n(a(194)),S=a(186),_=a(794),O=n(a(4932)),k=n(a(4933));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var C=(0,v.inject)("rootStore")(o=(0,v.observer)((u=c=function(e){(0,d.default)(a,e);var r=b(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).handleClick=function(){var t=e.props,r=t.onClick,a=t.name,n=t.routeName;(0,E.default)(r)?r(a):n&&e.routing.push("".concat(e.prefix,"/").concat(n))},e.handleWarnClick=function(t){t.stopPropagation();var r=e.props,a=r.routeName,n=r.onClick,o=r.name,c="volumes"===a?"pending":"updating";(0,E.default)(n)?n(o,c):a&&e.routing.push("".concat(e.prefix,"/").concat(a,"?status=").concat(c))},e}return(0,f.default)(a,[{key:"renderWarn",value:function(){var e=this.props,r=e.warnNum,a=e.name,n=r>99?h.default.createElement("div",{className:k.default.skip},"..."):r;return r>0?h.default.createElement("div",{className:k.default.warn},h.default.createElement(S.Tooltip,{className:k.default.tips,content:t("RESOURCE_WARNING_TIPS",{warnNum:r,tipName:t("".concat(a,"_PL"))})},h.default.createElement("div",{onClick:this.handleWarnClick},n))):null}},{key:"render",value:function(){var e=this.props,r=e.className,a=e.icon,n=e.iconSize,o=e.name,c=e.routeName,u=e.num,s=e.metrics,f=e.onClick,d=(0,_.getAreaChartOps)({title:"",unit:"",legend:["COUNT"],data:s});return h.default.createElement("div",{"data-name":o,className:(0,g.default)(k.default.card,r)},h.default.createElement("div",{className:k.default.icon},h.default.createElement(S.Icon,{name:a,size:n}),this.renderWarn()),h.default.createElement("div",{className:(0,g.default)(k.default.info,(0,i.default)({},k.default.cursor,c||f)),onClick:this.handleClick},h.default.createElement("strong",null,u),h.default.createElement("span",null,"1"===u?t(o):t("".concat(o,"_PL")))),h.default.createElement(O.default,(0,l.default)({width:330,height:44,bgColor:"transparent"},d)))}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"prefix",get:function(){var e=this.props,t=e.namespace,r=e.workspace;return"/".concat(r,"/federatedprojects/").concat(t)}}]),a}(h.default.Component),c.propTypes={className:y.default.string,icon:y.default.string,iconSize:y.default.number,name:y.default.string,namespace:y.default.string,routeName:y.default.string,num:y.default.oneOfType([y.default.number,y.default.string]),warnNum:y.default.number,onClick:y.default.func},c.defaultProps={icon:"appcenter",iconSize:40,name:"deployment",namespace:"default",routeName:"",num:0,warnNum:0},o=u))||o)||o;r.default=C},4932:function(e,t,r){"use strict";r(15);var a=r(20);r(827),r(11),r(18),r(10),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(827),r(11),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var n=a(r(36)),o=a(r(37)),c=a(r(55)),u=a(r(56)),l=a(r(51)),i=a(r(0)),s=a(r(1)),f=r(72),d=a(r(900)),p=a(r(869)),m=a(r(870)),h=a(r(947)),v=a(r(929)),y=a(r(871)),g=a(r(862));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}var S=function(e){(0,c.default)(r,e);var t=E(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"getVeticalPoints",value:function(){var e=this.props.width,t=(e-10)/10;return Array(10).fill("").map((function(e,r){return 5+t*r}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,r=e.areaColors,a={stroke:"#55bc8a",strokeWidth:1,fill:"#fff",fillOpacity:1};return this.series.map((function(e,n){var o=f.COLORS_MAP[r[n]];return i.default.createElement(d.default,{key:e,dataKey:e,stroke:o,fillOpacity:"0.1",fill:o,unit:t,dot:a})}))}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,a=e.xKey,n=e.data;return i.default.createElement(y.default,{width:t,height:r,debounce:1},i.default.createElement(h.default,{data:n},i.default.createElement(m.default,{dataKey:a,hide:!0}),i.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:i.default.createElement(g.default,null)}),i.default.createElement(v.default,{strokeDasharray:"3 6",horizontal:!1,verticalPoints:this.getVeticalPoints()}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,r=e.data;return Object.keys(r[0]||{}).filter((function(e){return e!==t}))}}]),r}(i.default.Component);t.default=S,S.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},S.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},4933:function(e,t,r){e.exports={card:"_1aK9M2ABK--zrWKxtSjitf",icon:"_3YStaQCgjfHrr2KxC-qWMb",warn:"_3XD-urPTP4b5kQFF25P1J3",tips:"_2wOcbgucGsMTTwMP340_w3",skip:"_2aj89OYDD2fNhMuJdOsLks",info:"_3NX2xvd1JmwoMSQCsNAUZl",cursor:"_2gjwCxV06MFwZ28jZgAfB0"}},4934:function(e,t,r){e.exports={wrapper:"lhAYr_BvqflK6AH06NHDs",header:"fVrL2jWvbuvVpeFLdHh-5",timeSelect:"YQNUYGZd1XHRdL2_iF1TK",cluster:"_12WK-EhzeFn2BXYZ1E4kwL"}},4935:function(e,t,r){"use strict";r(15);var a=r(20);r(27),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(27),r(4),r(23),r(57),r(17);var n=a(r(315)),o=a(r(36)),c=a(r(37)),u=a(r(55)),l=a(r(56)),i=a(r(51)),s=a(r(0)),f=r(52),d=r(794),p=a(r(4936)),m=a(r(4937));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.type,r=e.title,a=e.metrics,o=e.showDay,c=(0,d.getAreaChartOps)({title:r,unitType:t,legend:["COUNT"],data:a,xFormatter:function(e){return(0,f.getLocalTime)(1e3*Number(e)).format(o?"MM-DD HH:mm":"HH:mm")}});return s.default.createElement("div",{className:m.default.wrapper},s.default.createElement("div",{className:m.default.chartWrapper},s.default.createElement("div",{className:m.default.title},r),s.default.createElement("div",{className:m.default.chart},s.default.createElement(p.default,(0,n.default)({width:"100%",height:120,bgColor:"transparent"},c)))))}}]),r}(s.default.Component);t.default=v},4936:function(e,t,r){"use strict";r(15);var a=r(20);r(5),r(827),r(11),r(18),r(10),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(827),r(11),r(18),r(42),r(10),r(4),r(23),r(57),r(17);var n=a(r(36)),o=a(r(37)),c=a(r(55)),u=a(r(56)),l=a(r(51)),i=a(r(0)),s=a(r(1)),f=r(72),d=a(r(900)),p=a(r(869)),m=a(r(912)),h=a(r(870)),v=a(r(947)),y=a(r(929)),g=a(r(871)),E=a(r(862));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var n=(0,l.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}var _=function(e){(0,c.default)(r,e);var t=S(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,a=e.payload;return i.default.createElement("g",{transform:"translate(".concat(t,",").concat(r,")")},i.default.createElement("text",{x:0,y:0,dy:12,fill:"#79879c",textAnchor:"middle"},a.value))}}]),r}(i.default.PureComponent),O=function(e){(0,c.default)(r,e);var t=S(r);function r(){return(0,n.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"getHorizontalPoints",value:function(){var e=this.props.height,t=(e-30-6)/4;return Array(4).fill("").map((function(e,r){return 30+t*r}))}},{key:"renderArea",value:function(){var e=this.props,t=e.unit,r=e.areaColors;return this.series.map((function(e,a){var n=f.COLORS_MAP[r[a]];return i.default.createElement(d.default,{key:e,dataKey:e,stroke:n,fillOpacity:"1",fill:"url(#colorPv)",unit:t})}))}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,a=e.xKey,n=e.data;return i.default.createElement(g.default,{width:t,height:r,debounce:1},i.default.createElement(v.default,{data:n,margin:{top:32,left:16,right:16,bottom:0}},i.default.createElement("defs",null,i.default.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},i.default.createElement("stop",{offset:"5%",stopColor:"#55bc8a",stopOpacity:.2}),i.default.createElement("stop",{offset:"95%",stopColor:"#55bc8a",stopOpacity:0}))),i.default.createElement(y.default,{vertical:!1,stroke:"#36435c",strokeDasharray:"2 2",horizontalPoints:this.getHorizontalPoints()}),i.default.createElement(h.default,{dataKey:a,axisLine:!1,tickLine:!1,height:30,interval:"preserveStart",tick:i.default.createElement(_,null),minTickGap:20}),i.default.createElement(m.default,{hide:!0,type:"number",domain:[function(e){return 0-Math.abs(e)},function(e){return 1.6*e}]}),i.default.createElement(p.default,{wrapperStyle:{zIndex:1e3},content:i.default.createElement(E.default,null)}),this.renderArea()))}},{key:"series",get:function(){var e=this.props,t=e.xKey,r=e.data;return Object.keys(r[0]||{}).filter((function(e){return e!==t}))}}]),r}(i.default.Component);t.default=O,O.propTypes={width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),xKey:s.default.string,unit:s.default.string,data:s.default.array,bgColor:s.default.string,areaColors:s.default.array},O.defaultProps={width:180,height:56,xKey:"time",unit:"",bgColor:f.COLORS_MAP.lightest,areaColors:["green","blue","yellow","red"],data:[]}},4937:function(e,t,r){e.exports={wrapper:"_2R06eiyotdeGIx5OLhFonz",chartWrapper:"_29Puefj9SAxjkMV22wykzX",chart:"_2eHSIdMS6vT3QPzHyRq6Jw",title:"_1iV5AwK5s6o9oLhbG6ft6A"}},4938:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(18),a(48),a(190),a(4),a(23),a(24),a(17),a(62),a(64),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(18),a(48),a(42),a(190),a(4),a(23),a(57),a(24),a(17),a(62),a(64);var o,c=n(a(36)),u=n(a(37)),l=n(a(55)),i=n(a(56)),s=n(a(51)),f=a(186),d=n(a(789)),p=n(a(26)),m=n(a(63)),h=a(14),v=a(239),y=n(a(0)),g=n(a(837)),E=a(433),S=n(a(1434)),_=a(52),O=a(794),k=n(a(4939));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var C={workload_cpu_usage:"cpu",workload_memory_usage_wo_cache:"memory",workload_net_bytes_transmitted:"bandwidth",workload_net_bytes_received:"bandwidth"},R=(0,v.inject)("rootStore")(o=(0,v.observer)(o=function(e){(0,l.default)(a,e);var r=b(a);function a(e){var n;return(0,c.default)(this,a),(n=r.call(this,e)).clusterRenderer=function(e){return y.default.createElement("span",null,t("CLUSTER_VALUE",{value:(0,_.showNameAndAlias)(e.value,"cluster",{},!0)}))},n.store=new S.default({cluster:e.cluster,namespaces:(0,p.default)(e.match,"params.namespace")}),n}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"componentDidUpdate",value:function(e){(0,g.default)(e.match.params,this.props.match.params)&&this.props.cluster===e.cluster||(this.store.cluster=this.props.cluster,this.store.namespaces=(0,p.default)(this.props.match,"params.namespace"),this.store.fetchAll())}},{key:"getWorkloadLink",value:function(e){var t=e.workload_type;if("Pod"!==t){var r=e.workload,a=(void 0===r?"":r).replace(/\w+:/,""),n=this.props.match.params,o=n.workspace,c=n.namespace;return{deployment:"/".concat(o,"/federatedprojects/").concat(c,"/deployments/").concat(a),statefulset:"/".concat(o,"/federatedprojects/").concat(c,"/statefulsets/").concat(a),daemonset:"/".concat(o,"/federatedprojects/").concat(c,"/daemonsets/").concat(a)}[t]}}},{key:"renderHeader",value:function(){var e=this.props,t=e.cluster,r=e.clusters,a=e.onClusterChange;return y.default.createElement("div",{className:k.default.header},y.default.createElement(f.Select,{className:k.default.select,value:t,options:r,onChange:a,valueRenderer:this.clusterRenderer,showTip:!0}),y.default.createElement(f.Select,{className:k.default.select,value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options}))}},{key:"renderEmpty",value:function(){return y.default.createElement("div",{className:k.default.empty},y.default.createElement(f.Icon,{name:"backup",size:32}),y.default.createElement("div",null,t("NO_DATA")))}},{key:"renderContent",value:function(){var e=this,r=(0,h.toJS)(this.store.data);return!this.store.isLoading&&(0,m.default)(r)?this.renderEmpty():y.default.createElement("div",{className:k.default.content},r.slice(0,5).map((function(a){var n,o={deployment:"backup",dtatefulset:"stateful-set",dataaemonset:"deamon-set",pod:"pod",default:"backup"},c=e.getWorkloadLink(a),u=a.workload.replace(/\w+:/,""),l=100*a[e.store.sort_metric]/r[0][e.store.sort_metric],i=(0,O.getSuitableUnit)(a[e.store.sort_metric],C[e.store.sort_metric]),s=(0,O.getValueByUnit)(a[e.store.sort_metric],i)||0,d=(0,_.coreUnitTS)(s,i);return y.default.createElement("div",{className:k.default.app,key:"".concat(a.workload_type,"-").concat(u)},y.default.createElement("div",{className:k.default.appContent},y.default.createElement(f.Icon,{name:o[a.workload_type]||o.Default,type:"dark",size:40}),y.default.createElement("div",{className:k.default.text},y.default.createElement("div",{className:"relative","data-tooltip":u},y.default.createElement("div",null,c?y.default.createElement(E.Link,{to:c},u):u)),y.default.createElement("p",null,t(null===(n=a.workload_type)||void 0===n?void 0:n.toUpperCase()))),y.default.createElement("div",{className:k.default.value},s,y.default.createElement("span",{style:{fontSize:12}}," ",t(d)))),y.default.createElement("div",{className:k.default.background,style:{width:"".concat(l.toFixed(2),"%")}}))})))}},{key:"render",value:function(){return y.default.createElement(d.default,{className:k.default.wrapper,title:t("TOP_5_FOR_RESOURCE_USAGE")},this.renderHeader(),this.renderContent())}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),a}(y.default.Component))||o)||o;r.default=R},4939:function(e,t,r){e.exports={wrapper:"ALy60QWv9PJIlLpSJ93tc",header:"_14neEM1YWcy8Yl_HhRXBZ9",title:"_3rcJ-P4KglVtAGgB47VOBC",select:"_1trHAxO9VXo4shhZWhZYRD",app:"_65oCruiMj4nUJACfdPg73",value:"_3L2-Jvn7GOtsJBEIGhLbAs",appContent:"W5UocK9-pHzxLPhMojqCP",text:"_3GdnxTROCHfv5IKMzw0yhW",background:"_2lDLZkYMWHYxOFFEZZYilE",empty:"JDSFBvlabhdgjVzNCAOt9"}},4940:function(e,r,a){"use strict";var n=a(20);a(12),a(5),a(11),a(6),a(84),a(73),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(85),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(6),a(84),a(73),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(85),a(62),a(7);var o,c=n(a(30)),u=n(a(315)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=n(a(0)),m=n(a(26)),h=a(239),v=a(14),y=n(a(795)),g=n(a(788)),E=a(793),S=n(a(796)),_=n(a(792)),O=n(a(1108)),k=a(52),b=n(a(437)),C=n(a(961));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var w=(0,h.inject)("projectStore")(o=(0,E.withProjectList)({store:new b.default(new C.default),module:"applications",name:"APP"})(o=function(e){(0,s.default)(a,e);var r=P(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return p.default.createElement(g.default,{title:(0,k.getDisplayName)(r),avatar:r.icon||"/assets/default-app.svg",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),desc:(0,m.default)(r,'annotations["kubesphere.io/description"]',"-")})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(r,a){return"Deleting"===r?p.default.createElement(y.default,{type:r,name:t(r.toUpperCase()),flicker:!0}):p.default.createElement(O.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(t){return e.renderStatus({cluster:t,record:a})}))}},{title:t("VERSION"),dataIndex:"version",isHideable:!0,width:"20%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:180,render:function(e){return(0,k.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.getData,o=t.projectStore;return e.props.trigger("crd.app.create",{module:a,isFederated:!0,namespace:r.params.namespace,projectDetail:o.detail,cluster:e.cluster,success:n})},e}return(0,i.default)(a,[{key:"renderStatus",value:function(e){var r,a=e.cluster,n=e.record,o=(0,m.default)(n,"resources[".concat(a.name,"]"));return o?p.default.createElement(y.default,{name:t(null===(r=o.status)||void 0===r?void 0:r.toUpperCase()),type:o.status}):t("WAITING")}},{key:"getTableProps",value:function(){return{tableActions:this.tableActions,emptyProps:{title:t("NO_COMPOSED_APP_FOUND"),desc:t("COMPOSED_APP_EMPTY_DESC")},searchType:"name"}}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,a=e.tableProps;return p.default.createElement(E.ListPage,(0,u.default)({},this.props,{isFederated:!0}),p.default.createElement(_.default,(0,u.default)({},r,{tips:this.tips,description:t("APPLICATIONS_DESC")})),p.default.createElement(S.default,(0,u.default)({},a,this.getTableProps(),{columns:this.getColumns()})))}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_APP_GOVERN_Q"),description:t("HOW_TO_USE_APP_GOVERN_A"),closable:!1}]}},{key:"project",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return(0,v.toJS)(this.project.detail.clusters).map((function(e){return e.name}))}},{key:"cluster",get:function(){return this.clusters.includes("host")?"host":this.clusters[0]}},{key:"canCreate",get:function(){var e=this.props.match.params.namespace,t=this.clusters.join("_"),r=globals.app.getActions({cluster:t,project:e,module:"deployments",fedproject:!0}).includes("create"),a=globals.app.getActions({cluster:t,project:e,module:"services",fedproject:!0}).includes("create");return r&&a}},{key:"tableActions",get:function(){var e=this.props.tableProps,r=this.canCreate?[{key:"create",type:"control",text:t("CREATE"),onClick:this.showCreate}]:[];return T(T({},e.tableActions),{},{actions:r,onCreate:null,selectActions:[]})}}]),a}(p.default.Component))||o)||o;r.default=w},4941:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(30)),u=n(a(61)),l=n(a(315)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=n(a(0)),h=n(a(26)),v=n(a(788)),y=n(a(795)),g=n(a(792)),E=a(793),S=n(a(796)),_=n(a(1978)),O=a(52),k=a(72),b=n(a(437)),C=n(a(318));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var w=(0,E.withProjectList)({store:new b.default(new C.default("deployments")),module:"deployments",name:"DEPLOYMENT",rowKey:"uid"})(o=function(e){(0,f.default)(a,e);var r=P(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getColumns=function(){var r=e.props,a=r.module,n=r.projectStore;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return m.default.createElement(v.default,{icon:k.ICON_TYPES[a],iconSize:40,isMultiCluster:r.isFedManaged,title:(0,O.getDisplayName)(r),desc:r.description||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e,r){return"Deleting"===e?m.default.createElement(y.default,{type:e,name:t(e.toUpperCase()),flicker:!0}):m.default.createElement(_.default,{data:r,module:a,clusters:n.detail.clusters})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace,renderScheduleTab:!0,supportGpuSelect:!0})},e}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,r=e.bannerProps,a=e.tableProps;return m.default.createElement(E.ListPage,(0,l.default)({},this.props,{isFederated:!0}),m.default.createElement(g.default,(0,l.default)({},r,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),m.default.createElement(S.default,(0,l.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")}]}}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:a,detail:e,isFederated:!0})}}]}},{key:"selectActions",get:function(){var e=this.props,r=e.tableProps,a=e.trigger,n=e.name,o=e.rootStore;return[].concat((0,u.default)((0,h.default)(r,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),action:"edit",onClick:function(){return a("resource.batch.stop",{type:n,rowKey:"uid",success:o.routing.query()})}}])}},{key:"tableActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return T(T({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(m.default.Component))||o;r.default=w},4942:function(e,t,r){e.exports={wrapper:"_3vfbX3W9MN6NoSM26C_PUM",tags:"_1J5vlSwYc2sSMZG3BALMr7",tag:"_3MVQc8OY7AwLCjXUT7wXis"}},4943:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(30)),u=n(a(61)),l=n(a(315)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=n(a(0)),h=n(a(26)),v=n(a(788)),y=n(a(795)),g=n(a(792)),E=a(793),S=n(a(796)),_=n(a(1978)),O=a(52),k=a(434),b=a(72),C=n(a(437)),R=n(a(318));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,E.withProjectList)({store:new C.default(new R.default("statefulsets")),module:"statefulsets",name:"STATEFULSET",rowKey:"uid"})(o=function(e){(0,f.default)(a,e);var r=w(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).handleTabChange=function(t){e.props.routing.push("".concat(e.prefix,"/").concat(t))},e.getItemDesc=function(r){var a=(0,k.getWorkloadStatus)(r,e.props.module),n=a.status,o=a.reason;return o?m.default.createElement(StatusReason,{status:n,reason:t(o),data:r}):r.description||"-"},e.getColumns=function(){var r=e.props,a=r.module,n=r.projectStore;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return m.default.createElement(v.default,{icon:b.ICON_TYPES[a],iconSize:40,isMultiCluster:r.isFedManaged,title:(0,O.getDisplayName)(r),desc:e.getItemDesc(r),to:r.deletionTime?null:"".concat(e.prefix,"/").concat(a,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e,r){return"Deleting"===e?m.default.createElement(y.default,{type:e,name:t(e.toUpperCase()),flicker:!0}):m.default.createElement(_.default,{data:r,module:a,clusters:n.detail.clusters})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("workload.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,s.default)(a,[{key:"getStatus",value:function(){return b.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,r=e.bannerProps,a=e.tableProps;return m.default.createElement(E.ListPage,(0,l.default)({},this.props,{isFederated:!0}),m.default.createElement(g.default,(0,l.default)({},r,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),m.default.createElement(S.default,(0,l.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"prefix",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,r=e.tableProps,a=e.trigger,n=e.name,o=e.rootStore;return[].concat((0,u.default)((0,h.default)(r,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),action:"edit",onClick:function(){return a("resource.batch.stop",{type:n,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("workload.delete",{type:a,detail:e,isFederated:!0})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return P(P({},e.tableProps.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return r("workload.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(m.default.Component))||o;r.default=D},4944:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(43)),c=n(a(30));a(41);var u,l=n(a(44)),i=n(a(315)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=n(a(0)),v=n(a(788)),y=n(a(795)),g=n(a(790)),E=n(a(792)),S=a(793),_=n(a(796)),O=a(52),k=a(72),b=n(a(437)),C=n(a(443));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var w=(0,S.withProjectList)({store:new b.default(new C.default),module:"services",name:"SERVICE"})(u=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){var r=e.props,a=r.module,n=r.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,r){return h.default.createElement(v.default,{icon:k.ICON_TYPES[a],iconSize:40,title:(0,O.getDisplayName)(r),desc:r.description||"-",isMultiCluster:!0,to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return h.default.createElement(y.default,{type:e,name:t(e.toUpperCase()),flicker:!0})}},{title:t("SERVICE_TYPE_TCAP"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,render:function(e,r){return h.default.createElement(g.default,{title:e?t("SERVICE_TYPE_".concat(e.toUpperCase())):t("CUSTOM_SERVICE"),description:t(r.type)||"-"})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("service.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,f.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return h.default.createElement(S.ListPage,(0,i.default)({},this.props,{isFederated:!0}),h.default.createElement(E.default,(0,i.default)({},t,{tips:this.tips})),h.default.createElement(_.default,(0,i.default)({},r,{itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("SERVICE_TYPES_Q"),description:t("SERVICE_TYPES_A")},{title:t("SCENARIOS_FOR_SERVICES_Q"),description:t("SCENARIOS_FOR_SERVICES_A")}]}},{key:"itemActions",get:function(){var e,r=this,a=this.props,n=a.trigger,c=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:(e=(0,l.default)(o.default.mark((function e(t){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.store.fetchDetail(t);case 2:a=e.sent,n("federated.workload.template.edit",T(T({detail:a,projectDetail:r.props.projectStore.detail,module:"service"},r.props.match.params),{},{name:t.name,isFederated:!0,withService:!0}));case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("service.delete",{type:c,detail:e,isFederated:!0})}}]}},{key:"tableActions",get:function(){var e=this.props,r=e.tableProps,a=e.name,n=e.trigger;return T(T({},r.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return n("service.batch.delete",{type:a,rowKey:"name",isFederated:!0})}}]})}}]),a}(h.default.Component))||u;r.default=w},4945:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(5),a(187),a(84),a(18),a(16),a(4),a(23),a(24),a(17),a(85),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(187),a(84),a(18),a(42),a(16),a(4),a(22),a(23),a(57),a(24),a(17),a(85),a(62);var o=n(a(43));a(41);var c,u=n(a(44)),l=n(a(315)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=n(a(0)),h=a(239),v=a(14),y=n(a(788)),g=n(a(795)),E=n(a(792)),S=n(a(796)),_=a(793),O=a(52),k=a(72),b=n(a(437)),C=n(a(917)),R=n(a(240)),T=n(a(834)),P=n(a(26));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var D=(0,h.inject)("projectStore")(c=(0,_.withProjectList)({store:new b.default(new C.default),module:"ingresses",name:"ROUTE"})(c=function(e){(0,f.default)(a,e);var r=w(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).gatewayStore=new T.default,e.getColumns=function(){var r=e.props,a=r.module,n=r.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,r){return m.default.createElement(y.default,{icon:k.ICON_TYPES[a],iconSize:40,title:(0,O.getDisplayName)(r),desc:r.description||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"22%",render:function(e){return m.default.createElement(g.default,{type:e,name:t(e.toUpperCase()),flicker:!0})}},{title:t("APP"),dataIndex:"app",isHideable:!0,width:"22%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var r=e.props,a=r.match,n=r.module,o=r.projectStore;if(o.detail.clusters.map((function(e){return e.name})).map((function(e){return(0,P.default)(globals,"ksConfig.enabledExtensionModulesStatus.gateway.clusterSchedulingStatuses.".concat(e),!1)})).every((function(e){return e})))return e.props.trigger("router.create",{module:n,isFederated:!0,projectDetail:o.detail,namespace:a.params.namespace,cluster:e.cluster,gatewayStore:e.gatewayStore});R.default.warning({content:t("PLEASE_INSTALL_GATEWAY")})},e}return(0,s.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return m.default.createElement(_.ListPage,(0,l.default)({},this.props,{isFederated:!0}),m.default.createElement(E.default,(0,l.default)({},t,{tips:this.tips})),m.default.createElement(S.default,(0,l.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("PREREQUESTS_FOR_USE_ROUTE_Q"),description:t("PREREQUESTS_FOR_USE_ROUTE_A")},{title:t("ACCESS_TYPES_OF_ROUTE_Q"),description:t("ACCESS_TYPES_OF_ROUTE_A")}]}},{key:"project",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return(0,v.toJS)(this.project.detail.clusters).map((function(e){return e.name}))}},{key:"cluster",get:function(){var e=(0,O.getHostClusterName)();return this.clusters.includes(e)?e:this.clusters[0]}},{key:"itemActions",get:function(){var e,r,a=this,n=this.props,c=n.trigger,l=n.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){c("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return c("resource.yaml.edit",{detail:e})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:(r=(0,u.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.store.fetchDetail(t);case 2:r=e.sent,c("fedproject.router.rules.edit",{isFederated:!0,detail:r,projectDetail:a.props.projectStore.detail});case 4:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:(e=(0,u.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.store.fetchDetail(t);case 2:r=e.sent,c("router.annotations.edit",{detail:r});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return c("resource.delete",{type:l,detail:e})}}]}}]),a}(m.default.Component))||c)||c;r.default=D},4946:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(73),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(73),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=a(186),p=n(a(788)),m=n(a(795)),h=n(a(792)),v=n(a(1108)),y=a(793),g=n(a(796)),E=n(a(26)),S=n(a(63)),_=n(a(804)),O=n(a(0)),k=n(a(437)),b=n(a(831)),C=a(52),R=a(434),T=n(a(907)),P=n(a(4947));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var D=(0,y.withProjectList)({store:new k.default(new b.default),module:"persistentvolumeclaims",authKey:"persistentvolumeclaims",name:"PERSISTENT_VOLUME_CLAIM",rowKey:"uid"})(o=function(e){(0,i.default)(a,e);var r=w(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).pvStore=new T.default,e.renderAccessTitle=function(){var e=O.default.createElement("div",null,O.default.createElement("div",null,t("RWO_DESC")),O.default.createElement("div",null,t("ROX_DESC")),O.default.createElement("div",null,t("RWX_DESC")));return O.default.createElement("div",{className:P.default.mode_title},t("ACCESS_MODE_TCAP"),O.default.createElement(d.Tooltip,{content:e},O.default.createElement(d.Icon,{name:"question",size:16,className:P.default.question})))},e.mapperAccessMode=function(e){var t=(0,C.map_accessModes)(e);return O.default.createElement("span",null,t.join(","))},e.renderStatus=function(e){var r=e.cluster,a=e.record,n=(0,E.default)(a,"resources[".concat(r.name,"]"));if(!n)return t("WAITING");var o=(0,R.getVolumeStatus)(n),c=(n.status||{}).phase,u=void 0===c?"":c;return(0,S.default)(o)?O.default.createElement(m.default,{type:u,className:P.default.status,name:t("VOLUME_STATUS_".concat(u.toUpperCase()))}):O.default.createElement(_.default,{reason:o,data:n,type:"volume"})},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("volume.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace,onAddPv:function(){return e.props.trigger("pv.create",{store:e.pvStore})}})},e}return(0,l.default)(a,[{key:"getColumns",value:function(){var e=this;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return O.default.createElement(p.default,{icon:"storage",iconSize:40,title:(0,C.getDisplayName)(r),desc:r.storageClassName||"-",to:r.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(r,a){return"Deleting"===r?O.default.createElement(m.default,{type:r,name:t(r.toUpperCase()),flicker:!0}):O.default.createElement(v.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(t){return e.renderStatus({cluster:t,record:a})}))}},{title:t("MOUNT_STATUS"),dataIndex:"inUse",isHideable:!0,width:"14%",render:function(r,a){return O.default.createElement(v.default,{clusters:a.clusters,clustersDetail:e.props.projectStore.detail.clusters},(function(e){return(0,E.default)(a,"resources[".concat(e.name,"].inUse"))?t("MOUNTED"):t("NOT_MOUNTED")}))}},{title:this.renderAccessTitle(),dataIndex:"accessModes",isHideable:!1,render:function(t){return e.mapperAccessMode(t)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,C.getLocalTime)(e).format("YYYY-MM-DD HH:mm")}}]}},{key:"render",value:function(){var e=this.props,t=e.query,r=e.match,a=e.bannerProps,n=e.tableProps;return O.default.createElement(y.ListPage,(0,c.default)({},this.props,{isFederated:!0}),O.default.createElement(h.default,(0,c.default)({},a,{tips:this.tips})),O.default.createElement(g.default,(0,c.default)({},n,{className:"table-2-5",itemActions:this.itemActions,namespace:t.namespace,columns:this.getColumns(),onCreate:this.showCreate,cluster:r.params.cluster,searchType:"name"})))}},{key:"tips",get:function(){return[{title:t("WHAT_IS_STORAGE_CLASS_Q"),description:t("WHAT_IS_STORAGE_CLASS_A")},{title:t("WHAT_IS_LOCAL_VOLUME_Q"),description:t("WHAT_IS_LOCAL_VOLUME_A")}]}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),a}(O.default.Component))||o;r.default=D},4947:function(e,t,r){e.exports={capacity:"iBZ0-sFnB5X4qtbfRm500",status:"_2KeXCGUnopa84_M0KKIaeZ"}},4948:function(e,r,a){"use strict";var n=a(20);a(12),a(5),a(11),a(31),a(6),a(84),a(18),a(192),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(85),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(31),a(6),a(84),a(18),a(28),a(192),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(85),a(62),a(7);var o,c=n(a(30)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=a(14),m=a(239),h=n(a(26)),v=n(a(437)),y=a(791),g=n(a(792)),E=n(a(1219)),S=n(a(445)),_=n(a(4949)),O=n(a(4951));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var R=(0,m.inject)("rootStore","projectStore")(o=(0,m.observer)(o=(0,y.trigger)(o=function(e){(0,i.default)(a,e);var r=C(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).limitRangeStore=new v.default({module:"limitranges"}),e.workspaceStore=new S.default,e.getData=function(){var t=e.params.namespace;e.store.fetchDetail({namespace:t,name:t})},e.handleMoreMenuClick=function(t,r){var a=e.enabledItemActions.find((function(e){return e.key===r}));a&&a.onClick&&a.onClick()},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.limitRangeStore.fetchListByK8s(this.params),this.workspaceStore.fetchClusters(this.params)}},{key:"render",value:function(){var e=(0,p.toJS)(this.store.detail),r=(0,h.default)(this.limitRangeStore,"list.data[0]");return d.default.createElement("div",null,d.default.createElement(g.default,{icon:"cdn",title:t("BASIC_INFORMATION"),description:t("PROJECT_BASIC_INFO_DESC"),module:"project_base_info",tips:this.tips}),d.default.createElement(_.default,{detail:e,workspace:this.params.workspace,actions:this.enabledItemActions,onMenuClick:this.handleMoreMenuClick}),d.default.createElement(O.default,{detail:r}),d.default.createElement(E.default,{annotations:e.annotations,hiddenKeys:globals.config.preservedAnnotations}))}},{key:"isClusterManage",get:function(){return globals.app.isPlatformAdmin||globals.app.hasPermission({module:"clusters",action:"manage"})}},{key:"store",get:function(){return this.props.projectStore}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"params",get:function(){return(0,h.default)(this.props.match,"params",{})}},{key:"tips",get:function(){return[{title:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_Q"),description:t("WHAT_ARE_DEFAULT_CONTAINER_QUOTAS_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.params.namespace,fedproject:!0,cluster:this.params.cluster})}},{key:"itemActions",get:function(){var e=this,r=this.store.detail,a=(0,p.toJS)(this.limitRangeStore.list.data),n=(0,p.toJS)(this.props.projectStore.detail.clusters).map((function(e){return e.name})),o=[{key:"edit",icon:"pen",action:"edit",text:t("EDIT_INFORMATION"),onClick:function(){return e.trigger("resource.baseinfo.edit",{detail:r,success:e.getData})}},{key:"add",icon:"add",text:t("ADD_CLUSTER"),action:"edit",onClick:function(){return e.trigger("federated.project.add.cluster",{detail:r,store:e.store,clusters:e.workspaceStore.clusters.data,success:e.getData})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",b(b({},e.props.match.params),{},{store:e.limitRangeStore,detail:(0,h.default)(a,0,{}),isFederated:!0,projectDetail:r,clusters:n,success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",action:"delete",text:t("DELETE_PROJECT"),onClick:function(){return e.trigger("federated.project.delete",{detail:r,success:function(){return e.props.rootStore.routing.push("/workspaces/".concat(e.params.workspace,"/federatedprojects"))}})}}];return this.isClusterManage&&o.splice(1,0,{key:"edit-annotations",icon:"pen",action:"manage",text:t("EDIT_ANNOTATIONS"),onClick:function(){return e.trigger("resource.annotations.edit",{detail:r,success:e.getData})}}),o}},{key:"enabledItemActions",get:function(){var e=this;return this.itemActions.filter((function(t){return!t.action||e.enabledActions.includes(t.action)}))}}]),a}(d.default.Component))||o)||o)||o;r.default=R},4949:function(e,r,a){"use strict";a(15);var n=a(20);a(18),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(42),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),u=n(a(55)),l=n(a(56)),i=n(a(51)),s=a(186),f=n(a(3)),d=n(a(789)),p=n(a(790)),m=n(a(26)),h=n(a(63)),v=n(a(1216)),y=n(a(0)),g=a(433),E=a(52),S=n(a(4950));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var O=function(e){(0,u.default)(a,e);var r=_(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,c.default)(a,[{key:"renderMoreMenu",value:function(){var e=this.props,t=e.actions,r=e.onMenuClick;return y.default.createElement(s.Menu,{onClick:r},t.map((function(e){return y.default.createElement(s.Menu.MenuItem,{key:e.key},y.default.createElement(s.Icon,{name:e.icon,type:"light"})," ",e.text)})))}},{key:"render",value:function(){var e=this.props,r=e.detail,a=e.workspace,n=e.actions;return y.default.createElement(d.default,{className:S.default.wrapper,title:t("PROJECT_INFO")},y.default.createElement("div",{className:S.default.header},y.default.createElement(p.default,{icon:"project",title:(0,E.getDomTitle)((0,E.getDisplayNameNew)(r)),description:t("PROJECT_NAME"),ellipsis:!0}),y.default.createElement("div",{className:(0,f.default)(S.default.item,"ellipsis")},y.default.createElement("div",null,y.default.createElement(g.Link,{className:"ellipsis block",to:"/workspaces/".concat(a)},(0,E.showNameAndAlias)(a,"workspace",{},!1,void 0,!0))),y.default.createElement("p",null,t("WORKSPACE"))),y.default.createElement("div",{className:S.default.item},y.default.createElement("div",null,(0,m.default)(r,"creator")||"-"),y.default.createElement("p",null,t("CREATOR"))),y.default.createElement("div",{className:S.default.item},y.default.createElement("div",null,(0,E.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")),y.default.createElement("p",null,t("CREATION_TIME"))),!(0,h.default)(n)&&y.default.createElement(v.default,{content:this.renderMoreMenu()})))}}]),a}(y.default.Component);r.default=O},4950:function(e,t,r){e.exports={wrapper:"_1OoRSXI9AaH-1pF0uVUoIA",header:"_2uA5GBAHHtwRgU51d1wP3G",item:"OIHmcMQG8LKBCOt5hlkmU",content:"Ya_oEvC_R5nxTIQyKATBc",contentItem:"_4VWupvp5oiq4Ey4tIByoZ"}},4951:function(e,r,a){"use strict";a(15);var n=a(20);a(11),a(97),a(10),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(11),a(97),a(42),a(10),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),u=n(a(55)),l=n(a(56)),i=n(a(51)),s=n(a(26)),f=n(a(447)),d=n(a(63)),p=n(a(0)),m=a(186),h=n(a(789)),v=a(52),y=n(a(4952));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var E=function(e){(0,u.default)(a,e);var r=g(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props.detail,r=(0,v.cpuFormat)((0,s.default)(e,"limit.default.cpu")),a=(0,v.cpuFormat)((0,s.default)(e,"limit.defaultRequest.cpu")),n=(0,v.memoryFormat)((0,s.default)(e,"limit.default.memory")),o=(0,v.memoryFormat)((0,s.default)(e,"limit.defaultRequest.memory")),c=globals.config.supportGpuType,u=(0,s.default)(e,"limit.defaultRequest",{}),l=c.filter((function(e){return Object.keys(u).some((function(t){return(0,f.default)(t,e)}))})),i=(0,d.default)(l)?{}:{value:u["".concat(l[0])],type:l};return p.default.createElement(h.default,{title:t("DEFAULT_CONTAINER_QUOTA_PL")},p.default.createElement("div",{className:y.default.content},p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"cpu",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,a?"".concat(a," Core"):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("CPU_REQUEST_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,r?"".concat(r," Core"):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("CPU_LIMIT_SCAP")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement(m.Icon,{name:"memory",size:40}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,o?"".concat(o," Mi"):t("NO_REQUEST_TCAP")),p.default.createElement("p",null,t("MEMORY_REQUEST_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,n?"".concat(n," Mi"):t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("MEMORY_LIMIT_SCAP")))),p.default.createElement("div",{className:y.default.contentItem},p.default.createElement("img",{src:"/assets/GPU.svg",size:48}),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,i.value?i.type:t("NONE")),p.default.createElement("p",null,t("GPU_TYPE_SCAP"))),p.default.createElement("div",{className:y.default.item},p.default.createElement("div",null,i.value?i.value:t("NO_LIMIT_TCAP")),p.default.createElement("p",null,t("GPU_LIMIT_SCAP"))))))}}]),a}(p.default.Component);r.default=E},4952:function(e,t,r){e.exports={item:"_1Ldmn-GeDglbBOMJrDBw9S",content:"_1WPVCAg1EyfGv2B_FJqVeQ",contentItem:"_1ARjXQw-_8avbwYcyo8cZK"}},4953:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(5),a(73),a(16),a(10),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(73),a(42),a(16),a(10),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=n(a(788)),m=n(a(795)),h=n(a(792)),v=a(793),y=n(a(796)),g=a(52),E=a(72),S=n(a(437));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,v.withProjectList)({store:new S.default({module:"configmaps"}),module:"configmaps",name:"CONFIGMAP"})(o=function(e){(0,i.default)(a,e);var r=_(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).getColumns=function(){var r=e.props.module;return[{title:t("NAME"),dataIndex:"name",render:function(t,a){return d.default.createElement(p.default,{icon:E.ICON_TYPES[r],iconSize:40,title:(0,g.getDisplayName)(a),desc:a.description||"-",to:a.deletionTime?null:"".concat(e.props.match.url,"/").concat(t),isMultiCluster:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return d.default.createElement(m.default,{type:e,name:t(e),flicker:!0})}},{title:t("DATA"),dataIndex:"data",isHideable:!0,width:"33%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,r=t.match,a=t.module,n=t.projectStore;return e.props.trigger("configmap.create",{module:a,isFederated:!0,projectDetail:n.detail,namespace:r.params.namespace})},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return d.default.createElement(v.ListPage,(0,c.default)({},this.props,{isFederated:!0}),d.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),d.default.createElement(y.default,(0,c.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,a=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(e){return r("configmap.edit",{detail:e,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:a,detail:e})}}]}}]),a}(d.default.Component))||o;r.default=O},4954:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(5),a(16),a(10),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(42),a(16),a(10),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=n(a(788)),m=n(a(795)),h=n(a(792)),v=a(793),y=n(a(796)),g=a(52),E=a(72),S=n(a(437));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var O=(0,v.withProjectList)({store:new S.default({module:"secrets"}),module:"secrets",name:"SECRET"})(o=function(e){(0,i.default)(a,e);var r=_(a);function a(e){var n;return(0,u.default)(this,a),(n=r.call(this,e)).getColumns=function(){var e=n.props.module;return[{title:t("NAME"),dataIndex:"name",render:function(t,r){return d.default.createElement(p.default,{icon:E.ICON_TYPES[e],iconSize:40,title:(0,g.getDisplayName)(r),desc:r.description||"-",to:r.deletionTime?null:"".concat(n.props.match.url,"/").concat(t),isMultiCluster:r.isFedManaged})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"12%",render:function(e){return d.default.createElement(m.default,{type:e,name:t(e),flicker:!0})}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"12%",render:function(e){return t(E.SECRET_TYPES[e]||e)}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"12%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",isHideable:!0,width:150,render:function(e){return(0,g.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},n.fetchData=function(){n.store.fetchList(n.props.match.params)},n.showCreate=function(){var e=n.props,t=e.match,r=e.module,a=e.getData,o=e.projectStore;return n.props.trigger("secret.create",{module:r,isFederated:!0,projectDetail:o.detail,namespace:t.params.namespace,success:a})},n.store=e.store,n}return(0,l.default)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,r=e.tableProps;return d.default.createElement(v.ListPage,(0,c.default)({},this.props,{isFederated:!0}),d.default.createElement(h.default,(0,c.default)({},t,{tabs:this.tabs})),d.default.createElement(y.default,(0,c.default)({},r,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,r=this.props,a=r.trigger,n=r.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(t){return a("secret.edit",{detail:t,isFederated:!0,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e})}}]}}]),a}(d.default.Component))||o;r.default=O},4955:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(31),a(84),a(18),a(16),a(4),a(23),a(24),a(17),a(85),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(31),a(84),a(18),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(85),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=a(239),m=n(a(26)),h=n(a(792)),v=n(a(4956)),y=n(a(4960));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("projectStore")(o=function(e){(0,i.default)(a,e);var r=g(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).getData=function(){e.store.fetchDetail(e.params)},e.handleMoreMenuClick=function(t,r){var a=e.enabledItemActions.find((function(e){return e.key===r}));a&&a.onClick&&a.onClick()},e}return(0,l.default)(a,[{key:"render",value:function(){var e=this,r=this.props.projectStore.detail.clusters;return d.default.createElement("div",null,d.default.createElement(h.default,{icon:"cdn",title:t("PROJECT_QUOTA_PL"),description:t("PROJECT_QUOTAS_DESC")}),d.default.createElement("div",{className:y.default.title},t("RESOURCE_QUOTA_PL")),r.map((function(t){return d.default.createElement(v.default,(0,c.default)({key:t.name,cluster:t},e.props.match.params,{canEdit:e.canEdit}))})))}},{key:"store",get:function(){return this.props.projectStore}},{key:"params",get:function(){return(0,m.default)(this.props.match,"params",{})}},{key:"tips",get:function(){return[{title:t("HOW_TO_USE_QUOTA_Q"),description:t.html("HOW_TO_USE_QUOTA_A")}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.params.namespace,cluster:this.params.cluster,fedproject:!0})}},{key:"canEdit",get:function(){return this.enabledActions.includes("edit")}}]),a}(d.default.Component))||o;r.default=E},4956:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(11),a(84),a(86),a(73),a(18),a(48),a(16),a(27),a(98),a(10),a(4),a(316),a(23),a(24),a(17),a(85),a(136),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(11),a(84),a(86),a(73),a(18),a(48),a(42),a(16),a(27),a(98),a(10),a(4),a(316),a(23),a(57),a(17),a(85);var o,c=n(a(61)),u=n(a(96)),l=n(a(315)),i=n(a(30)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=n(a(0)),v=a(14),y=a(239),g=n(a(3)),E=n(a(26)),S=n(a(447)),_=n(a(855)),O=n(a(63)),k=n(a(195)),b=a(186),C=a(52),R=a(72),T=n(a(789)),P=n(a(814)),w=a(791),D=n(a(885)),A=n(a(866)),j=n(a(1422)),N=n(a(1421)),I=n(a(4957)),M=n(a(4959));function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var L=["limits.cpu","limits.memory","pods"],U=["requests.storage","persistentvolumeclaims"],Y="storageclass.storage.k8s.io/requests.storage",F="storageclass.storage.k8s.io/persistentvolumeclaims",G=(0,y.inject)("rootStore")(o=(0,y.observer)(o=(0,w.trigger)(o=function(e){(0,d.default)(a,e);var r=x(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).store=new D.default,e.storageClassStore=new A.default,e.state={isFold:!0},e.showEdit=function(){var t=e.props,r=t.namespace,a=t.cluster,n=t.workspace;e.trigger("project.quota.edit",{detail:{name:r,namespace:r,cluster:a.name,workspace:n},success:e.fetchData,isFederated:!0})},e.toggleFold=function(){e.setState((function(e){return{isFold:!e.isFold}}))},e.fetchData=function(){var t=e.props,r=t.namespace,a=t.cluster;e.store.fetch({namespace:r,cluster:a.name})},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.cluster;this.fetchData(),this.storageClassStore.fetchList({cluster:e.name})}},{key:"render",value:function(){var e=this,r=this.state.isFold,a=this.props,n=a.cluster,o=a.canEdit;return h.default.createElement(T.default,null,h.default.createElement("div",{className:M.default.cluster},h.default.createElement(P.default,{cluster:n,theme:"light"})),o&&h.default.createElement("div",{className:M.default.actions},h.default.createElement(b.Button,{onClick:this.showEdit},t("EDIT_QUOTAS"))),h.default.createElement("div",{className:(0,g.default)(M.default.content,(0,i.default)({},M.default.fold,r))},this.items.map((function(e){return h.default.createElement(I.default,e)}))),this.storageClassResource.map((function(e){var t=-1!==e.name.indexOf("requests.storage"),r=e.used,a=e.total;return t&&(0,k.default)(e.used)&&(r=(0,C.memoryFormat)(e.used,"Gi")),t&&(0,k.default)(e.total)&&(a=(0,C.memoryFormat)(e.total,"Gi")),h.default.createElement(j.default,(0,l.default)({iconName:"storage"},e,{used:r,total:a}))})),!(0,O.default)(this.relateStorageClass)&&Object.entries(this.relateStorageClass).map((function(t){var r=(0,u.default)(t,2),a=r[0],n=r[1];return h.default.createElement(N.default,{key:a,name:a,data:n,allStorageClass:e.allStorageClass})})),this.items.length>3&&h.default.createElement("div",{className:M.default.folder},h.default.createElement(b.Button,{icon:r?"chevron-down":"chevron-up",onClick:this.toggleFold},r?t("UNFOLD"):t("FOLD"))))}},{key:"allSpec",get:function(){var e=this.store.data,t=(0,E.default)(e,"hard",{}),r=Object.values(R.QUOTAS_MAP).map((function(e){return e.name})),a=Object.keys(t).filter((function(e){return-1===r.indexOf(e)})).map((function(e){return[e,{name:e,type:"userDefined"}]}));return Object.entries(R.QUOTAS_MAP).concat(a).map((function(t){var r,a=(0,u.default)(t,2),n=a[0],o=a[1];return{key:n,name:n,total:(0,E.default)(e,'hard["'.concat(o.name,'"]')),used:(0,E.default)(e,'used["'.concat(o.name,'"]'),0),left:(0,E.default)(e,'left["'.concat(o.name,'"]')),type:null!==(r=null==o?void 0:o.type)&&void 0!==r?r:"system"}})).filter((function(e){var t=e.total,r=e.used,a=e.name;return!(!t&&!Number(r)&&-1===L.indexOf(a))}))}},{key:"allStorageClass",get:function(){return(0,v.toJS)(this.storageClassStore.list.data)}},{key:"items",get:function(){return this.allSpec.filter((function(e){return-1===e.name.indexOf(U[0])&&-1===e.name.indexOf(U[1])}))}},{key:"storageLimit",get:function(){return this.allSpec.filter((function(e){return-1!==e.name.indexOf(U[0])||-1!==e.name.indexOf(U[1])}))}},{key:"storageClassResource",get:function(){var e=(0,v.toJS)(this.store.data),t=e.hard,r=e.used;return U.map((function(e){var a=(0,E.default)(t,[e],e.includes("claims")?"0":"0Gi"),n=(0,E.default)(r,[e],e.includes("claims")?"0":"0Gi"),o=e.includes("claims")?a:(0,C.memoryFormat)(a,"Gi");return{key:e,name:e,total:o>0?e.includes("claims")?o:"".concat(o,"Gi"):void 0,used:e.includes("claims")?n:(0,C.memoryFormat)(n,"Gi")}}))}},{key:"relateStorageClass",get:function(){var e=(0,v.toJS)(this.store.data),t=(0,E.default)(e,"hard",{}),r=(0,E.default)(e,"used",{}),a=Object.entries(t).filter((function(e){var t=(0,u.default)(e,1)[0];return(0,S.default)(t,Y)||(0,S.default)(t,F)})).map((function(e){var t=(0,u.default)(e,2),r=t[0],a=t[1];return(0,i.default)({},r,a)})),n=a.map((function(e){var t=Object.keys(e)[0];return(0,i.default)({},t,(0,E.default)(r,t))})),o={total:(0,c.default)(a),used:(0,c.default)(n)};if(o.total.length>0){var l,s=(0,_.default)((0,c.default)(o.total),(function(e){return Object.keys(e)[0].split(".").slice(1).join(".")}));return l={},(0,i.default)(l,Y,(0,E.default)(s,[Y],[]).map((function(e){var t=Object.keys(e)[0],r=o.used.filter((function(e){return Object.keys(e)[0]===t}))[0];return{name:t,total:Object.values(e)[0],used:Object.values(r)[0]}}))),(0,i.default)(l,F,(0,E.default)(s,[F],[]).map((function(e){var t=Object.keys(e)[0],r=o.used.filter((function(e){return Object.keys(e)[0]===t}))[0];return{name:t,total:Object.values(e)[0],used:Object.values(r)[0]}}))),l}return{}}}]),a}(h.default.Component))||o)||o)||o;r.default=G},4957:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(84),a(86),a(16),a(27),a(190),a(24),a(85),a(64),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(5),a(84),a(86),a(16),a(27),a(190),a(24),a(85),a(64);var o=n(a(0)),c=n(a(158)),u=a(186),l=n(a(1044)),i=a(52),s=a(72),f=n(a(4958)),d=function(e){var r,a=e.name,n=e.total,d=e.used,p=e.type,m=0;"limits.cpu"===a||"requests.cpu"===a?n&&(m=Number((0,i.cpuFormat)(d))/Number((0,i.cpuFormat)(n)),d="".concat((0,i.cpuFormat)(d)," Core"),n="".concat((0,i.cpuFormat)(n)," Core")):"limits.memory"===a||"requests.memory"===a?n&&(m=Number((0,i.memoryFormat)(d))/Number((0,i.memoryFormat)(n)),d="".concat((0,i.memoryFormat)(d,"Gi")," Gi"),n="".concat((0,i.memoryFormat)(n,"Gi")," Gi")):n&&(m=Number(d)/Number(n)),m=Math.min(Math.max(m,0),1);var h=a.indexOf("gpu")>-1?"gpu":a,v="gpu"===h?"".concat(h,".limit"):h,y=a.indexOf("gpu")>-1?s.ICON_TYPES.gpu:null!==(r=s.ICON_TYPES[a])&&void 0!==r?r:"resource";return o.default.createElement("div",{className:f.default.quota},o.default.createElement(u.Icon,{name:y,size:40}),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return"userDefined"!==r||e.includes("gpu")?t(e.replace(/[. ]/g,"_").toUpperCase()):e}(v,p)),o.default.createElement("p",null,t("RESOURCE_TYPE_SCAP"))),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,d),o.default.createElement("p",null,t("USED"))),o.default.createElement("div",{className:f.default.item},o.default.createElement("div",null,(0,c.default)(n)?t("NO_LIMIT_TCAP"):n),o.default.createElement("p",null,t("RESOURCE_LIMIT"))),o.default.createElement("div",{className:f.default.item,style:{flex:3}},o.default.createElement("div",null,t("USAGE")),o.default.createElement(l.default,{value:Math.min(m,1),className:f.default.bar,rightText:n?"":t("NO_LIMIT_TCAP"),text:"".concat(t("USED")," ").concat(Number((100*m).toFixed(2)),"%")})))};r.default=d},4958:function(e,t,r){e.exports={quota:"_3aPySvZFwKu_aUOuXKtt74",item:"_1I77wNxk4MpwyW4BbGhuWc",bar:"_20tiwfV8cet9kU4Rdqy-5W"}},4959:function(e,t,r){e.exports={cluster:"_367EWtp2wSigDOnEmf2wJ1",content:"_3viW1x9EZrOJRuO9ZV0ET3",fold:"_1NbZfknGRDsuW3_iIyJJqu",actions:"oVUaKu42SlFyUhxdx-1fg",folder:"VIGCh0w9Q5Nq0WhR95pi-"}},4960:function(e,t,r){e.exports={title:"_20BGuNk4qt2X7yCCXLVwpk"}},4961:function(e,r,a){"use strict";a(15);var n=a(20);a(84),a(16),a(4),a(23),a(24),a(17),a(85),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(84),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(85),a(62);var o,c=n(a(36)),u=n(a(37)),l=n(a(55)),i=n(a(56)),s=n(a(51)),f=n(a(0)),d=a(239),p=n(a(63)),m=n(a(792)),h=n(a(4962));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=(0,d.inject)("rootStore","projectStore")(o=(0,d.observer)(o=function(e){(0,l.default)(a,e);var r=v(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.store.detail.name;return f.default.createElement("div",null,f.default.createElement(m.default,{icon:"log",title:t("LOG_COLLECTION"),description:t("DISK_LOG_COLLECTION_DESC"),tips:this.tips}),!this.disabledLoggingSideCar&&f.default.createElement(h.default,{namespace:e,actions:this.enableActions}))}},{key:"store",get:function(){return this.props.projectStore}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enableActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.namespace,fedproject:!0,cluster:this.cluster})}},{key:"disabledLoggingSideCar",get:function(){return!(0,p.default)(globals.config.disabledLoggingSidecarNamespace)&&globals.config.disabledLoggingSidecarNamespace.includes(this.namespace)}},{key:"tips",get:function(){return[{title:t("COLLECT_LOGS_ON_VOLUMES_Q"),description:t("COLLECT_LOGS_ON_VOLUMES_A")}]}}]),a}(f.default.Component))||o)||o;r.default=y},4962:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(84),a(16),a(4),a(23),a(17),a(85),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(84),a(42),a(16),a(4),a(23),a(57),a(17),a(85);var o,c=n(a(36)),u=n(a(37)),l=n(a(55)),i=n(a(56)),s=n(a(51)),f=n(a(0)),d=n(a(3)),p=n(a(26)),m=n(a(74)),h=a(239),v=a(186),y=n(a(850)),g=n(a(789)),E=n(a(787)),S=n(a(437)),_=n(a(4963));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var k=(0,h.observer)(o=function(e){(0,l.default)(a,e);var r=O(a);function a(){var e;(0,c.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).state={showCloseConfirm:!1},e.store=new S.default({module:"namespaces"}),e.handleSwitch=function(){var t=e.store.detail;return"enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]')?e.setState({showCloseConfirm:!0}):e.handleToggle()},e.handleToggle=function(){var t=e.store.detail,r="enabled"===(0,p.default)(t,'labels["logging.kubesphere.io/logsidecar-injection"]'),a={metadata:{labels:{"logging.kubesphere.io/logsidecar-injection":r?"disabled":"enabled"}}};(0,m.default)(a,'spec.template.metadata.labels["logging.kubesphere.io/logsidecar-injection"]',r?"disabled":"enabled"),e.store.patch(t,a).then((function(){e.hideCloseConfirm(),e.store.fetchDetail({name:t.name,namespace:t.name})}))},e.hideCloseConfirm=function(){e.setState({showCloseConfirm:!1})},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.namespace;this.store.fetchDetail({namespace:e,name:e})}},{key:"render",value:function(){var e=this.state.showCloseConfirm,r=this.store.detail,a="enabled"===(0,p.default)(r,'labels["logging.kubesphere.io/logsidecar-injection"]');return f.default.createElement(f.default.Fragment,null,f.default.createElement(g.default,{title:t("COLLECT_LOGS_ON_VOLUMES")},f.default.createElement("div",{className:_.default.header},f.default.createElement(v.Icon,{name:"log",size:40}),f.default.createElement("div",{className:_.default.item},f.default.createElement("div",null,a?t("ENABLED"):t("DISABLED")),f.default.createElement("p",null,t("LOG_COLLECTION_ENABLED_DESC"))),this.canEdit&&f.default.createElement("div",{className:(0,d.default)(_.default.item,"text-right")},f.default.createElement(y.default,{type:"control",text:a?t("ENABLED"):t("DISABLED"),onChange:this.handleSwitch,checked:a})))),this.canEdit&&f.default.createElement(E.default,{visible:e,onOk:this.handleToggle,onCancel:this.hideCloseConfirm,width:520,hideHeader:!0},f.default.createElement("div",{className:_.default.modalHeader},f.default.createElement(v.Icon,{name:"question",size:40,color:{primary:"#fff",secondary:"#329dce"}}),f.default.createElement("div",{className:_.default.title},f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION")))),f.default.createElement("div",null,t("DISABLE_LOG_COLLECTION_TIP"))))}},{key:"canEdit",get:function(){return this.props.actions.includes("manage")}}]),a}(f.default.Component))||o;r.default=k},4963:function(e,t,r){e.exports={header:"KfRfc7XHnyKrIMG2WD7yY",item:"_1gCe0R2KaOu3PvBcpH-MNm",modalHeader:"_2Lsdh1r2v7JH_39s7jt8FO",title:"_1t58beq3U0qAO0Dd6Xwakq"}},4964:function(e,r,a){"use strict";a(15);var n=a(20);a(18),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=a(239),m=a(791),h=n(a(792)),v=n(a(1880));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var g=(0,p.inject)("rootStore","projectStore")(o=(0,p.observer)(o=(0,m.trigger)(o=function(e){(0,i.default)(a,e);var r=y(a);function a(){return(0,u.default)(this,a),r.apply(this,arguments)}return(0,l.default)(a,[{key:"render",value:function(){var e=this;return d.default.createElement(d.default.Fragment,null,d.default.createElement(h.default,{icon:"loadbalancer",title:t("GATEWAY_SETTINGS"),description:t("PROJECT_GATEWAY_DESC"),tabs:this.tabs}),d.default.createElement("div",null,this.clusters.map((function(t){return d.default.createElement(v.default,(0,c.default)({key:t.name,cluster:t},e.props,{actions:e.enableActions}))}))))}},{key:"store",get:function(){return this.props.projectStore}},{key:"clusters",get:function(){return this.store.detail.clusters}},{key:"namespace",get:function(){return this.props.match.params.namespace}},{key:"enableActions",get:function(){return globals.app.getActions({module:"project-settings",project:this.namespace,fedproject:!0})}}]),a}(d.default.Component))||o)||o)||o;r.default=g},4965:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1235)),o=a(r(4966)),c=a(r(4984)),u=a(r(4991)),l=a(r(4996)),i=a(r(5006)),s=a(r(5013)),f=a(r(5023)),d=a(r(5027));t.default=function(e){return[{path:"".concat(e,"/deployments/:name"),component:c.default},{path:"".concat(e,"/statefulsets/:name"),component:u.default},{path:"".concat(e,"/services/:name"),component:l.default},{path:"".concat(e,"/ingresses/:name"),component:i.default},{path:"".concat(e,"/volumes/:name"),component:s.default},{path:"".concat(e,"/secrets/:name"),component:f.default},{path:"".concat(e,"/configmaps/:name"),component:d.default},{path:"".concat(e,"/applications/:name"),component:o.default},{path:"".concat(e,"/gateways/:gatewayName"),component:n.default}]}},4966:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(315)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=a(186),m=n(a(26)),h=n(a(63)),v=a(14),y=a(239),g=n(a(805)),E=n(a(0)),S=n(a(961)),_=n(a(437)),O=a(52),k=a(791),b=n(a(4967));function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var P=(0,y.inject)("rootStore","projectStore")(o=(0,y.observer)(o=(0,k.trigger)(o=function(e){(0,s.default)(a,e);var r=T(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new _.default(new S.default),e.fetchData=function(){var t=e.props.match.params;e.store.fetchDetail(t)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,v.toJS)(e.store.detail),success:e.fetchData})}},{key:"addComponent",icon:"add",text:t("ADD_SERVICE"),action:"edit",onClick:function(){return e.trigger("crd.app.addservice",R({isFederated:!0,detail:(0,v.toJS)(e.store.detail),projectDetail:e.props.projectStore.detail,success:e.fetchData},e.props.match.params))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,v.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,h.default)(r)){var n=(0,m.default)(r,'labels["app.kubernetes.io/name"]');return[{name:t("PROJECT"),value:(0,O.showNameAndAlias)(a,"federatedProject")},{name:t("APP"),value:n},{name:t("VERSION"),value:r.version},{name:t("CREATION_TIME_TCAP"),value:(0,O.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,O.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store,fedDetailStore:this.fedStore};if(this.store.isLoading&&!this.store.detail.name)return E.default.createElement(p.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,O.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("APP_PL"),url:this.listUrl}]};return E.default.createElement(g.default,(0,c.default)({stores:e},r,{routes:b.default}))}},{key:"module",get:function(){return"applications"}},{key:"name",get:function(){return"APP"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(E.default.Component))||o)||o)||o;r.default=P},4967:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(4968)),c=a(r(4973)),u=a(r(4979)),l=a(r(4982)),i="/:workspace/federatedprojects/:namespace/applications/:name",s=[{path:"".concat(i,"/components"),title:"RESOURCE_STATUS",component:o.default,exact:!0},{path:"".concat(i,"/ingresses"),title:"EXTERNAL_ACCESS",component:c.default,exact:!0},{path:"".concat(i,"/traffic"),title:"TRAFFIC_MANAGEMENT",component:u.default,exact:!0},{path:"".concat(i,"/tracing"),title:"TRACING",component:l.default,exact:!0},(0,n.getIndexRoute)({path:i,to:"".concat(i,"/components"),exact:!0})];t.default=s},4968:function(e,t,r){"use strict";r(15);var a=r(20);r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var n,o=a(r(36)),c=a(r(37)),u=a(r(55)),l=a(r(56)),i=a(r(51)),s=a(r(0)),f=r(239),d=a(r(4969));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var a;return(0,o.default)(this,r),(a=t.call(this,e)).store=e.detailStore,a}return(0,c.default)(r,[{key:"render",value:function(){var e=this,t=this.props.match.params.workspace,r=this.store.detail,a=r.clusters,n=r.namespace;return a.map((function(r){return s.default.createElement(d.default,{key:r.name,cluster:r.name,namespace:n,workspace:t,detail:e.store.detail})}))}}]),r}(s.default.Component))||n)||n;t.default=m},4969:function(e,r,a){"use strict";a(15);var n=a(20),o=a(157);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var c,u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=o(a(0)),p=n(a(321)),m=n(a(63)),h=a(239),v=a(52),y=a(186),g=n(a(789)),E=n(a(814)),S=n(a(443)),_=n(a(4970)),O=n(a(4972));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,h.inject)("projectStore")(c=(0,h.observer)(c=function(e){(0,i.default)(a,e);var r=k(a);function a(){var e;(0,u.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).serviceStore=new S.default,e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this.props,t=e.cluster,r=e.namespace,a=e.detail.selector;if(a){var n={cluster:t,namespace:r,labelSelector:(0,v.joinSelector)(a)};this.serviceStore.fetchListByK8s(n)}}},{key:"renderServices",value:function(){var e=this,r=this.serviceStore.list.data;return(0,m.default)(r)?d.default.createElement("div",{className:O.default.empty},t("NO_SERVICE_FOUND")):d.default.createElement("div",null,r.map((function(t){return d.default.createElement(_.default,{key:t.name,data:t,prefix:e.prefix})})))}},{key:"render",value:function(){var e=this.props.cluster,t=this.serviceStore.list.isLoading,r=(0,p.default)(this.props.projectStore.detail.clusters,"name");return d.default.createElement(g.default,null,d.default.createElement("div",{className:O.default.header},d.default.createElement("div",{className:O.default.cluster},d.default.createElement(E.default,{cluster:r[e],theme:"light",tagClass:"float-right"}))),d.default.createElement("div",{className:O.default.content},d.default.createElement(y.Loading,{spinning:t},this.renderServices())))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}}]),a}(d.Component))||c)||c;r.default=b},4970:function(e,r,a){"use strict";a(15);var n=a(157),o=a(20);a(5),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(42),a(16),a(4),a(23),a(57),a(17);var c=o(a(36)),u=o(a(37)),l=o(a(55)),i=o(a(56)),s=o(a(51)),f=n(a(0)),d=a(433),p=o(a(26)),m=o(a(790)),h=o(a(4971));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=function(e){(0,l.default)(a,e);var r=v(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.data,a=e.prefix,n=(0,p.default)(r,'annotations["kubesphere.io/serviceType"]',"");return f.default.createElement("div",{className:h.default.wrapper},f.default.createElement(m.default,{icon:"appcenter",title:f.default.createElement(d.Link,{to:"".concat(a,"/services/").concat(r.name)},r.name),description:t("SERVICE_TYPE_".concat(n.toUpperCase()))}),f.default.createElement(m.default,{title:"".concat(r.name,".").concat(r.namespace,".svc"),description:t("INTERNAL_DOMAIN_NAME_SCAP")}),f.default.createElement(m.default,{title:r.clusterIP,description:t("VIRTUAL_IP_ADDRESS")}))}}]),a}(f.Component);r.default=y},4971:function(e,t,r){e.exports={wrapper:"_31OJuz5r5AHhbccBVYa6H5"}},4972:function(e,t,r){e.exports={cluster:"_2BNy9Cg2ZRIap12UQoiAE1",content:"_1rbLrTDiFx5rAIDJqkd_qJ",empty:"ZbMlb4dh66orSttwdSUBZ"}},4973:function(e,t,r){"use strict";r(15);var a=r(20);r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var n,o=a(r(36)),c=a(r(37)),u=a(r(55)),l=a(r(56)),i=a(r(51)),s=a(r(0)),f=r(239),d=a(r(4974));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var m=(0,f.inject)("detailStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=p(r);function r(e){var a;return(0,o.default)(this,r),(a=t.call(this,e)).store=e.detailStore,a}return(0,c.default)(r,[{key:"render",value:function(){var e=this,t=this.props.match.params.workspace,r=this.store.detail,a=r.clusters,n=r.namespace;return a.map((function(r){return s.default.createElement(d.default,{key:r.name,cluster:r.name,namespace:n,workspace:t,detail:e.store.detail})}))}}]),r}(s.default.Component))||n)||n;t.default=m},4974:function(e,r,a){"use strict";a(15);var n=a(20),o=a(157);a(5),a(73),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(73),a(18),a(42),a(16),a(4),a(22),a(23),a(57),a(17);var c=n(a(43));a(41);var u,l=n(a(44)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=o(a(0)),h=n(a(321)),v=n(a(63)),y=a(239),g=a(52),E=a(186),S=n(a(789)),_=n(a(790)),O=n(a(814)),k=n(a(834)),b=n(a(917)),C=n(a(4975)),R=n(a(4978));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,y.inject)("projectStore")(u=(0,y.observer)(u=function(e){(0,f.default)(o,e);var r,a,n=T(o);function o(){var e;(0,i.default)(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).gatewayStore=new k.default,e.ingressStore=new b.default,e.state={gateway:{}},e}return(0,s.default)(o,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:(a=(0,l.default)(c.default.mark((function e(){var t,r,a,n,o,u;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,n=t.detail,(o=n.selector)&&(u={cluster:r,namespace:a,labelSelector:(0,g.joinSelector)(o)},this.ingressStore.fetchListByK8s(u)),e.next=5,this.getGateway();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getGateway",value:(r=(0,l.default)(c.default.mark((function e(){var t,r,a,n;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,e.next=3,this.gatewayStore.getGatewayByProject({cluster:r,namespace:a});case 3:n=e.sent,this.setState({gateway:n[0]||n[1]||n[2]||{}});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat(e.nodePort)})).join("/"):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,v.default)(e.loadBalancerIngress)?(0,v.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t}},{key:"render",value:function(){var e=this,r=this.props.cluster,a=this.ingressStore.list,n=a.data,o=a.isLoading,c=(0,h.default)(this.props.projectStore.detail.clusters,"name"),u=this.state.gateway||{};return m.default.createElement(S.default,null,m.default.createElement("div",{className:R.default.header},m.default.createElement("div",{className:R.default.cluster},m.default.createElement(O.default,{cluster:c[r],theme:"light",tagClass:"float-right"})),m.default.createElement(_.default,{icon:"eip-pool",title:u.type,description:t("GATEWAY_ACCESS_MODE")}),"NodePort"===u.type?m.default.createElement(m.default.Fragment,null,m.default.createElement(_.default,{title:u.loadBalancerIngress||"-",description:t("GATEWAY_IP_ADDRESS")}),m.default.createElement(_.default,{title:this.getNodePorts(u),description:t("NODE_PORTS_SCAP")})):m.default.createElement(_.default,{title:this.getExternalIP(u),description:t("LOAD_BALANCER_SCAP")})),m.default.createElement("div",{className:R.default.content},m.default.createElement(E.Loading,{spinning:o},m.default.createElement(m.default.Fragment,null,n.map((function(t){return m.default.createElement(C.default,{key:t.name,detail:t,prefix:e.prefix,gateway:u})}))))))}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,r=e.namespace;return"/".concat(t,"/federatedprojects/").concat(r)}}]),o}(m.Component))||u)||u;r.default=P},4975:function(e,t,r){"use strict";r(15);var a=r(157),n=r(20);r(18),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(18),r(42),r(4),r(23),r(57),r(17);var o=n(r(36)),c=n(r(37)),u=n(r(55)),l=n(r(56)),i=n(r(51)),s=a(r(0)),f=n(r(63)),d=n(r(1979)),p=n(r(4977));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var h=function(e){(0,u.default)(r,e);var t=m(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props,t=e.prefix,r=e.gateway,a=e.detail,n=a.tls||[];return(0,f.default)(a.rules)?null:s.default.createElement("div",{className:p.default.wrapper},a.rules.map((function(e){return s.default.createElement(d.default,{key:e.host,tls:n,rule:e,gateway:r,prefix:t})})))}}]),r}(s.Component);t.default=h},4976:function(e,t,r){e.exports={card:"_3wmUeEURYvA5xtwTXjVHRT",content:"_3jNrdQ3d7V_wvVOr60E7xz",path:"_3l9pH5J25i4CyckpZ8-NCs",access:"_3VXXBX7de0ACzsnT4tO93F",tip:"n2-K-kA40a2F9ikKcSTbB"}},4977:function(e,t,r){e.exports={wrapper:"_1jxGr6tCLB26gXUGEygyp1"}},4978:function(e,t,r){e.exports={header:"_1Hq3ZUKxyIGwPN95tbYvFw",more:"IOiz0R3Znlki4BfPZ9-4r",cluster:"_1SQ_xP5Rc1PTPxVQJxR35j",content:"_766CB2j_qtHIG_WF7UTpG"}},4979:function(e,r,a){"use strict";a(15);var n=a(20);a(31),a(16),a(4),a(23),a(24),a(17),a(62),a(110),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(31),a(42),a(16),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(110);var o=n(a(58)),c=n(a(43));a(41);var u,l=n(a(44)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=a(186),h=n(a(833)),v=n(a(949)),y=n(a(1912)),g=n(a(1980)),E=n(a(26)),S=n(a(63)),_=a(239),O=n(a(0)),k=n(a(961)),b=a(845),C=n(a(4981));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,_.inject)("detailStore","projectStore")(u=(0,_.observer)(u=function(e){(0,f.default)(n,e);var r,a=R(n);function n(e){var r;(0,i.default)(this,n),(r=a.call(this,e)).fetchApplicationsData=function(){var e=r.props.match.params,t=e.workspace,a=e.namespace,n=e.name,o={cluster:r.state.cluster.name,workspace:t,namespace:a,name:n};r.store.fetchDetail(o)},r.handleRefresh=function(){r.getData()},r.handleClusterChange=function(e){r.setState({cluster:e},(0,l.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchApplicationsData();case 2:return e.next=4,r.getData();case 4:case"end":return e.stop()}}),e)}))))},r.handleAutoFetch=function(){var e=r.state.autoFetch;r.setState({autoFetch:!e},(function(){r.state.autoFetch?r.interval=setInterval((function(){r.getData()}),1e4):r.interval&&clearInterval(r.interval)}))},r.handleLookbackChange=function(e){var t=e.step,a=e.times,n=(0,o.default)(e,["step","times"]),c=(0,b.getTimeRange)({step:(0,b.getMinuteValue)(t),times:a}),u=c.start,l=c.end,i=n.start||u,s=n.end||l,f=Math.floor(s-i);r.setState({duration:f},(function(){r.getData()}))},r.operations=function(){var e=r.state.autoFetch;return O.default.createElement("div",{className:C.default.operations},O.default.createElement(v.default,{className:C.default.timeSelect,onChange:r.handleLookbackChange,showStep:!1,dark:!0,arrowIcon:"chevron-down",step:"1m",times:1}),O.default.createElement(m.Button,{type:"flat",icon:e?"pause":"start",onClick:r.handleAutoFetch}),O.default.createElement(m.Button,{type:"flat",icon:"refresh",onClick:r.handleRefresh}))},r.renderHeader=function(){return O.default.createElement("div",{className:C.default.cardHeader},r.operations(),t("TRAFFIC_MONITORING"))},r.renderMicroServiceTip=function(e){var a=r.getServiceMeshEnabled(e);return O.default.createElement("span",{className:C.default.tag},O.default.createElement(m.Icon,{name:a?"success":"exclamation",color:a?{primary:"#00aa72",secondary:"#90e0c5"}:{primary:"#d0a406",secondary:"#f0c426"}})," ",O.default.createElement("span",null,a?t("APPLICATION_GOVERNANCE_ENABLED"):t("APPLICATION_GOVERNANCE_DISABLED")))};var u=(0,E.default)(r.props.projectStore,"detail.clusters",[]),s=u.find((function(e){return(0,E.default)(e,"configz.servicemesh")}))||u[0]||{};return r.state={cluster:s,isGraphLoading:!0,duration:60,autoFetch:!1},r.detailStore=e.detailStore,r.store=new k.default,r.module=e.module,r}return(0,s.default)(n,[{key:"componentDidMount",value:(r=(0,l.default)(c.default.mark((function e(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchApplicationsData();case 2:return e.next=4,this.getData();case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.interval&&clearInterval(this.interval)}},{key:"getServiceMeshEnabled",value:function(e){var t=globals.app.hasClusterModule(e.name,"servicemesh");return(0,E.default)(this.detailStore,"detail.serviceMeshEnable",!1)&&t}},{key:"getData",value:function(){var e=this,t=this.props.match.params,r=t.namespace,a=t.name,n=this.state,o=n.cluster,c=n.duration,u=this.getServiceMeshEnabled(o);o&&u&&(this.setState({isGraphLoading:!0}),this.store.fetchGraph({cluster:o.name,namespace:r,app:a,duration:c}).then((function(){e.unmount||e.setState({isGraphLoading:!1})})))}},{key:"renderContent",value:function(){var e=this.state,r=e.isGraphLoading,a=e.cluster,n=this.store.graph,o=n.data,c=n.health,u=this.getServiceMeshEnabled(a);return a&&u?(0,S.default)(o)||(0,S.default)(o.nodes)?r?O.default.createElement(m.Loading,{className:C.default.loading}):O.default.createElement(h.default,{image:"/assets/traffic-management.svg",title:t("NO_DATA"),desc:t("TRAFFIC_MONITORING_UNAVAILABLE_DESC"),actions:O.default.createElement(m.Button,{onClick:this.handleRefresh},t("REFRESH"))}):O.default.createElement("div",{className:C.default.main},O.default.createElement(y.default,{data:o,health:c,store:this.store,loading:r,onFetch:this.handleRefresh})):O.default.createElement(h.default,{image:"/assets/traffic-management.svg",title:t("TRAFFIC_MANAGEMENT_UNAVAILABLE"),desc:t("APPLICATION_GOVERNANCE_NOT_ENABLED")})}},{key:"render",value:function(){var e=this.props.projectStore.detail.clusters;return O.default.createElement("div",null,O.default.createElement(g.default,{value:this.state.cluster,options:e,onChange:this.handleClusterChange,extra:this.renderMicroServiceTip}),this.renderHeader(),this.renderContent())}}]),n}(O.default.Component))||u)||u;r.default=T},4980:function(e,t,r){e.exports={wrapper:"_yrS4mpDD17eVrLFVo423",name:"hdUK_2xviMy_yssn3iCip",options:"_3shur80ViRlCoFi-pmKPuf",option:"_18gh_7CC4MN2fi8DcjaJLC",indicator:"rQf5ufF7H8AvO2rPG2nRX"}},4981:function(e,t,r){e.exports={main:"_1fa3VMP8C8ZSul8tBwMN62",loading:"_2zBr9xlut9cRpsys4HZOdF",tag:"_2NvG0X9ZEkRQC4EuGS87HJ",cardHeader:"_23xEZfpVkA0aQEoQX1gkTt",operations:"Ik7Mp90rKsS8V-lG71sT6",timeSelect:"_2e783591o4U507-s5muwJg"}},4982:function(e,r,a){"use strict";var n=a(20);a(12),a(11),a(31),a(6),a(18),a(48),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(188),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(11),a(31),a(6),a(18),a(28),a(48),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(188),a(7);var o,c=n(a(58)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=n(a(63)),m=n(a(26)),h=n(a(0)),v=a(14),y=a(239),g=a(244),E=a(52),S=a(186),_=n(a(833)),O=n(a(1915)),k=n(a(1917)),b=n(a(1980)),C=n(a(949)),R=a(845),T=n(a(443)),P=n(a(4983));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var j=(0,y.inject)("detailStore","projectStore")(o=(0,y.observer)(o=function(e){(0,s.default)(a,e);var r=A(a);function a(e){var n;(0,l.default)(this,a),(n=r.call(this,e)).fetchTracing=function(){var e=(0,v.toJS)(n.detailStore.detail).namespace,t=n.state.cluster,r=n.getServiceMeshEnabled(t);if(t&&r){var a=D({namespace:e,cluster:t.name,service:n.state.serviceName},n.state.query);n.resourceStore.fetchTracing(a)}},n.showDetailModal=function(e){n.setState({showDetailModal:!0,selectItem:e})},n.hideDetailModal=function(){n.setState({showDetailModal:!1,selectItem:{}})},n.handleClusterChange=function(e){n.setState({cluster:e},(function(){n.getData()}))},n.handleServiceChange=function(e){n.setState({serviceName:e},(function(){n.fetchTracing()}))},n.handleRefresh=function(){n.fetchTracing()},n.handleLookbackChange=function(e){var t=e.step,r=e.times,a=(0,c.default)(e,["step","times"]),o=(0,R.getTimeRange)({step:(0,R.getMinuteValue)(t),times:r}),u=o.start,l=o.end,i=1e3*(a.start||u),s=1e3*(a.end||l);n.setState((function(e){return{query:D(D({},e.query),{},{start:i,end:s})}}),(function(){return n.fetchTracing()}))},n.handleLimitChange=function(e){n.setState((function(t){return{query:D(D({},t.query),{},{limit:e})}}),(function(){return n.fetchTracing()}))},n.serviceRenderer=function(e){return h.default.createElement("span",null,t("SERVICE_VALUE",{value:e.label}))},n.renderMicroServiceTip=function(e){var r=n.getServiceMeshEnabled(e);return h.default.createElement("span",{className:P.default.tag},h.default.createElement(S.Icon,{name:r?"success":"exclamation",color:r?{primary:"#00aa72",secondary:"#90e0c5"}:{primary:"#d0a406",secondary:"#f0c426"}})," ",h.default.createElement("span",null,r?t("APPLICATION_GOVERNANCE_ENABLED"):t("APPLICATION_GOVERNANCE_DISABLED")))},n.detailStore=e.detailStore,n.resourceStore=n.detailStore.resourceStore,n.serviceStore=new T.default;var o=(0,g.parse)(location.search.slice(1)),u=(0,m.default)(n.props.projectStore,"detail.clusters",[]),i=u.find((function(e){return(0,m.default)(e,"configz.servicemesh")}))||u[0]||{},s=(0,R.getTimeRange)({step:(0,R.getMinuteValue)("5m"),times:60}),f=s.start,d=s.end;return n.state={cluster:i,showDetailModal:!1,selectItem:{},serviceName:"",query:{limit:5,start:1e3*f,end:1e3*d},defaultService:o.service},n}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getServiceMeshEnabled",value:function(e){var t=globals.app.hasClusterModule(e.name,"servicemesh");return(0,m.default)(this.detailStore,"detail.serviceMeshEnable",!1)&&t}},{key:"getData",value:function(){var e=this,t=this.detailStore.detail,r=t.selector,a=t.namespace,n=this.state.cluster,o=this.getServiceMeshEnabled(n);if(n&&o&&r){var c={namespace:a,cluster:n.name,labelSelector:(0,E.joinSelector)(r)};this.serviceStore.fetchListByK8s(c).then((function(){var t=(0,v.toJS)(e.serviceStore.list.data);t.length>0&&e.setState({serviceName:t[0].name},(function(){return e.fetchTracing()}))}))}}},{key:"renderOperations",value:function(){var e=this.state.query;return h.default.createElement("div",{className:P.default.operations},h.default.createElement(S.Select,{options:this.services,value:this.state.serviceName,prefixIcon:h.default.createElement(S.Icon,{name:"appcenter"}),onChange:this.handleServiceChange,valueRenderer:this.serviceRenderer}),h.default.createElement(C.default,{className:P.default.timeSelect,dark:!0,onChange:this.handleLookbackChange,showStep:!1,arrowIcon:"chevron-down"}),h.default.createElement(S.Select,{value:e.limit,options:this.limitOptions,onChange:this.handleLimitChange}),h.default.createElement(S.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh}))}},{key:"renderTracing",value:function(){var e=this.state.cluster,r=this.resourceStore,a=r.tracing,n=r.isTracingLoading,o=this.serviceStore.list,c=o.isLoading,u=o.data,l=this.getServiceMeshEnabled(e);return e&&l?!c&&(0,p.default)(u)?null:h.default.createElement(O.default,{loading:n,data:a.data,operations:this.renderOperations(),onItemClick:this.showDetailModal}):h.default.createElement(_.default,{image:"/assets/traffic-management.svg",title:t("TRACING_UNAVAILABLE"),desc:t("APPLICATION_GOVERNANCE_NOT_ENABLED")})}},{key:"render",value:function(){var e=this.props.projectStore.detail.clusters;return h.default.createElement("div",null,h.default.createElement(b.default,{value:this.state.cluster,options:e,onChange:this.handleClusterChange,extra:this.renderMicroServiceTip}),this.renderTracing(),h.default.createElement(k.default,{detail:this.state.selectItem,visible:this.state.showDetailModal,onCancel:this.hideDetailModal}))}},{key:"limitOptions",get:function(){return[{label:t("LAST_NUM_RECORDS",{num:5}),value:5},{label:t("LAST_NUM_RECORDS",{num:10}),value:10},{label:t("LAST_NUM_RECORDS",{num:20}),value:20},{label:t("LAST_NUM_RECORDS",{num:50}),value:50}]}},{key:"services",get:function(){return this.serviceStore.list.data.map((function(e){return{label:e.name,value:e.name,type:e.type}}))}}]),a}(h.default.Component))||o)||o;r.default=j},4983:function(e,t,r){e.exports={operations:"_2fBARiAJfc0bUaFE4VVXcr",timeSelect:"_7qmxRpeY2a6F31i4lij_w",tag:"_3CFHSBCbScJIVlfHH4u_w7"}},4984:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(315)),c=n(a(43)),u=n(a(30));a(41);var l,i=n(a(44)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=a(186),v=n(a(63)),y=a(14),g=a(239),E=n(a(805)),S=n(a(0)),_=n(a(437)),O=n(a(318)),k=a(52),b=a(791),C=n(a(4985));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var w=(0,g.inject)("rootStore","projectStore")(l=(0,g.observer)(l=(0,b.trigger)(l=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new _.default(new O.default(e.module)),e.fetchData=(0,i.default)(c.default.mark((function t(){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(T(T({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,y.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",T(T({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:e.module},e.props.match.params),{},{success:e.fetchData,isFederated:!0,supportGpuSelect:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,y.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,v.default)(r))return[{name:t("PROJECT"),value:(0,k.showNameAndAlias)(a,"federatedProject")},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,k.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,k.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return S.default.createElement(h.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,k.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("DEPLOYMENT_PL"),url:this.listUrl}]};return S.default.createElement(E.default,(0,o.default)({stores:e},r,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"deployments"}},{key:"name",get:function(){return"DEPLOYMENT"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(S.default.Component))||l)||l)||l;r.default=w},4985:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(813)),c=a(r(821)),u=a(r(1981)),l=a(r(1983));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:c.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:l.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4986:function(e,t,r){"use strict";r(15);var a=r(20),n=r(157);r(5),r(827),r(18),r(16),r(4),r(23),r(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(827),r(18),r(42),r(16),r(4),r(22),r(23),r(57),r(17);var o=a(r(43));r(41);var c,u=a(r(44)),l=a(r(36)),i=a(r(37)),s=a(r(55)),f=a(r(56)),d=a(r(51)),p=n(r(0)),m=r(14),h=r(239),v=a(r(26)),y=a(r(800)),g=r(186),E=a(r(814)),S=a(r(804)),_=r(434),O=a(r(325)),k=a(r(1250));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var C=(0,h.observer)(c=function(e){(0,s.default)(r,e);var t=b(r);function r(){var e;(0,l.default)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).websocket=new O.default,e.state={replicas:(0,v.default)(e.props,"workload.podNums",0)},e.triggerReplicasChange=(0,y.default)((0,u.default)(o.default.mark((function t(){var r,a,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.cluster,n=r.onReplicasChange,t.next=3,n(a.name,e.state.replicas);case 3:case"end":return t.stop()}}),t)}))),1e3),e.handleAdd=function(){e.setState((function(e){return{replicas:e.replicas+1}}),e.triggerReplicasChange)},e.handleSubStract=function(){e.setState((function(e){var t=e.replicas;return{replicas:Math.max(t-1,0)}}),e.triggerReplicasChange)},e}return(0,i.default)(r,[{key:"componentDidUpdate",value:function(e){(0,v.default)(this.props.workload,"name")!==(0,v.default)(e.workload,"name")&&(this.setState({replicas:(0,v.default)(this.props,"workload.podNums",0)}),this.unInitWebsocket(),this.initWebsocket())}},{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.unInitWebsocket()}},{key:"initWebsocket",value:function(){var e=this,t=this.props,r=t.workload,a=t.store,n=a.resourceStore.getWatchUrl(r);r&&n&&(this.websocket.watch(n),this.disposer=(0,m.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.updateResource(r.cluster,e.object)})))}},{key:"unInitWebsocket",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"render",value:function(){var e=this.props,t=e.cluster,r=e.workload,a=void 0===r?{}:r,n=e.store,o=e.onReplicasChange,c=this.state.replicas,u=a.podNums,l=void 0===u?0:u,i=a.readyPodNums,s=void 0===i?0:i,f=l-s,d=(0,_.getWorkloadStatus)(a,n.resourceStore.module),m=d.status,h=d.reason;return p.default.createElement("div",{className:k.default.cluster},p.default.createElement(E.default,{cluster:t,tagClass:"float-right",theme:"light"}),p.default.createElement("div",{className:k.default.bottom},p.default.createElement("div",{className:k.default.replicas},p.default.createElement("span",{className:k.default.readyNum},s)," /"," ",p.default.createElement("span",{className:k.default.readyNum},c)," ",h&&p.default.createElement(S.default,{status:m,data:a})),p.default.createElement("div",{className:k.default.pods},Array(Math.min(l,6)).fill("").map((function(e,t){return p.default.createElement("img",{key:t,src:t<f?"/assets/pod-waiting.svg":"/assets/pod-ready.svg",alt:""})})),l>6&&p.default.createElement(g.Icon,{name:"more",className:k.default.more,size:28,color:f>6?{primary:"#f5a623",secondary:"#f5a623"}:{primary:"#479e88",secondary:"#479e88"}})),o&&p.default.createElement("div",{className:k.default.control},p.default.createElement(g.Icon,{name:"add",type:"light",size:24,clickable:!0,onClick:this.handleAdd}),p.default.createElement(g.Icon,{name:"substract",type:"light",size:24,clickable:!0,onClick:this.handleSubStract}))))}}]),r}(p.Component))||c;t.default=C},4987:function(e,r,a){"use strict";a(15);var n=a(20),o=a(157);a(5),a(827),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(827),a(18),a(42),a(16),a(4),a(22),a(23),a(57),a(17);var c=n(a(43));a(41);var u,l=n(a(44)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=o(a(0)),h=a(14),v=a(239),y=n(a(26)),g=n(a(800)),E=a(186),S=n(a(814)),_=n(a(804)),O=a(434),k=n(a(325)),b=n(a(3)),C=n(a(1250));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var T=(0,v.observer)(u=function(e){(0,f.default)(a,e);var r=R(a);function a(){var e;(0,i.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).websocket=new k.default,e.state={replicas:(0,y.default)(e.props,"workload.podNums",0),weight:e.getWeight},e.triggerWeightChange=(0,g.default)((0,l.default)(c.default.mark((function t(){var r,a,n,o;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.cluster,n=r.onWeightChange,o=e.state.weight,t.next=4,n(a.name,o);case 4:case"end":return t.stop()}}),t)}))),1e3),e.handleAdd=function(){e.setState((function(e){return{weight:e.weight+1}}),e.triggerWeightChange)},e.handleSubStract=function(){e.setState((function(e){var t=e.weight;return{weight:Math.max(t-1,0)}}),e.triggerWeightChange)},e}return(0,s.default)(a,[{key:"componentDidUpdate",value:function(e){(0,y.default)(this.props.workload,"name")===(0,y.default)(e.workload,"name")&&(0,y.default)(this.props.workload,"podNums")===(0,y.default)(e.workload,"podNums")||(this.setState({replicas:(0,y.default)(this.props,"workload.podNums",0)}),this.unInitWebsocket(),this.initWebsocket())}},{key:"componentDidMount",value:function(){this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.unInitWebsocket()}},{key:"initWebsocket",value:function(){var e=this,t=this.props,r=t.workload,a=t.store,n=a.resourceStore.getWatchUrl(r);r&&n&&(this.websocket.watch(n),this.disposer=(0,h.reaction)((function(){return e.websocket.message}),(function(e){"MODIFIED"===e.type&&a.updateResource(r.cluster,e.object)})))}},{key:"unInitWebsocket",value:function(){this.disposer&&this.disposer(),this.websocket.close()}},{key:"render",value:function(){var e=this.props,r=e.cluster,a=e.workload,n=void 0===a?{}:a,o=e.store,c=this.state.replicas,u=n.podNums,l=void 0===u?0:u,i=n.readyPodNums,s=void 0===i?0:i,f=l-s,d=(0,O.getWorkloadStatus)(n,o.resourceStore.module),p=d.status,h=d.reason;return m.default.createElement("div",{className:(0,b.default)(C.default.scheduleCluster)},m.default.createElement(S.default,{cluster:r,tagClass:"float-right",theme:"light"}),m.default.createElement("div",{className:C.default.bottom},m.default.createElement("div",{className:C.default.replicas},m.default.createElement("span",{className:C.default.readyNum},s)," /"," ",m.default.createElement("span",{className:C.default.readyNum},c)," ",h&&m.default.createElement(_.default,{status:p,data:n})),m.default.createElement("div",{className:C.default.pods},Array(Math.min(l,6)).fill("").map((function(e,t){return m.default.createElement("img",{key:t,src:t<f?"/assets/pod-waiting.svg":"/assets/pod-ready.svg",alt:""})})),l>6&&m.default.createElement(E.Icon,{name:"more",className:C.default.more,size:28,color:f>6?{primary:"#f5a623",secondary:"#f5a623"}:{primary:"#479e88",secondary:"#479e88"}}))),m.default.createElement("div",{className:C.default.weight,onClick:this.stopPropagation},m.default.createElement(E.Icon,{name:"add",type:"light",size:20,clickable:!0,onClick:this.handleAdd}),m.default.createElement("span",{className:C.default.value},m.default.createElement("span",{className:C.default.spanText},this.getWeight),m.default.createElement("span",{className:C.default.subText}," ",t("WEIGHT"))),m.default.createElement(E.Icon,{name:"substract",type:"light",size:20,clickable:!0,onClick:this.handleSubStract})))}},{key:"getWeight",get:function(){var e=this.props,t=e.store,r=e.cluster;return(0,y.default)(t.deployedScheduleTemplate,"spec.clusters.".concat(r.name,".weight"),0)}}]),a}(m.Component))||u;r.default=T},4988:function(e,r,a){"use strict";a(15);var n=a(157),o=a(20);a(16),a(27),a(4),a(23),a(17),a(110),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=o(a(36)),u=o(a(37)),l=o(a(55)),i=o(a(56)),s=o(a(51));a(45),a(42),a(16),a(27),a(4),a(23),a(57),a(24),a(193),a(17),a(110);var f=n(a(0)),d=o(a(1102)),p=o(a(1250));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var h=function(e){(0,l.default)(a,e);var r=m(a);function a(e){var t;(0,c.default)(this,a),(t=r.call(this,e)).handleScale=function(e){var r=e.target.value;(/^\+?[1-9][0-9]*$/.test(r)||""===r)&&t.setState({desire:r,seconds:5},(function(){t.showConfirm()}))},t.showConfirm=function(){t.setState({showConfirm:!0},(function(){t.startTimer()}))},t.startTimer=function(){t.timer&&t.stopTimer(),t.updateTime()},t.stopTimer=function(){clearTimeout(t.timer),t.timer=null},t.updateTime=function(){var e=t.state.seconds;t.timer=setTimeout((function(){e>0?t.setState({seconds:e-1},(function(){t.updateTime()})):(t.handleConfirm(),t.handleCancel())}),1e3)},t.handleConfirm=function(){t.props.onChange(t.state.desire),t.hideConfirm()},t.handleCancel=function(){t.setState({desire:t.props.desire},(function(){t.hideConfirm()}))},t.hideConfirm=function(){t.setState({showConfirm:!1},(function(){t.stopTimer()}))};var n=e.desire;return t.state={prevPropDesire:n,desire:n,seconds:5,showConfirm:!1},t}return(0,u.default)(a,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){var e=this.props.name,r=this.state,a=r.desire,n=r.showConfirm,o=r.seconds;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:p.default.replicasInput},f.default.createElement("input",{name:e,value:a,onChange:this.handleScale})),f.default.createElement(d.default,{visible:n,width:400,title:t("ADJUST_REPLICAS"),content:t.html("REPLICAS_SCALE_NOTIFY_CONTENT",{num:Number(a)}),cancelText:t("REPLICAS_SCALE_NOTIFY_CANCEL"),confirmText:t("REPLICAS_SCALE_NOTIFY_CONFIRM",{seconds:o}),onCancel:this.handleCancel,onConfirm:this.handleConfirm}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.desire!==t.prevPropDesire){var r=(a=e.desire,Number(a||0));return{prevPropDesire:r,desire:r}}var a;return null}}]),a}(f.Component);r.default=h},4989:function(e,t,r){e.exports={deployment_codeResource:"_2v3CnaMI4WQFjBr1rH10IK"}},4990:function(e,t,r){e.exports={item:"_3xQ6tn2XzgaF-fxJRZeGll",more:"_2kE7aMEkAa23Y-oMSAo89T"}},4991:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(315)),c=n(a(43)),u=n(a(30));a(41);var l,i=n(a(44)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=a(186),v=n(a(63)),y=a(14),g=a(239),E=n(a(805)),S=n(a(0)),_=n(a(437)),O=n(a(318)),k=a(52),b=a(791),C=n(a(4992));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var w=(0,g.inject)("rootStore","projectStore")(l=(0,g.observer)(l=(0,b.trigger)(l=function(e){(0,d.default)(a,e);var r=P(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new _.default(new O.default(e.module)),e.fetchData=(0,i.default)(c.default.mark((function t(){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(T(T({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,y.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",T(T({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:e.module},e.props.match.params),{},{success:e.fetchData,isFederated:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,y.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,v.default)(r))return[{name:t("PROJECT"),value:(0,k.showNameAndAlias)(a,"federatedProject")},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,k.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return S.default.createElement(h.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,k.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("STATEFULSET_PL"),url:this.listUrl}]};return S.default.createElement(E.default,(0,o.default)({stores:e},r,{routes:(0,C.default)(this.props.match.path)}))}},{key:"module",get:function(){return"statefulsets"}},{key:"name",get:function(){return"STATEFULSET"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}},{key:"routing",get:function(){return this.props.rootStore.routing}}]),a}(S.default.Component))||l)||l)||l;r.default=w},4992:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(813)),c=a(r(821)),u=a(r(1983)),l=a(r(4993));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:c.default,exact:!0},{path:"".concat(e,"/monitors"),title:"MONITORING",component:u.default,exact:!0,ksModule:"whizard-monitoring"},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},4993:function(e,t,r){"use strict";r(15);var a=r(20);r(5),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(42),r(16),r(4),r(22),r(23),r(57),r(24),r(17),r(62);var n=a(r(43));r(41);var o,c=a(r(44)),u=a(r(36)),l=a(r(37)),i=a(r(55)),s=a(r(56)),f=a(r(51)),d=a(r(0)),p=r(239),m=a(r(26)),h=r(1981),v=a(r(437)),y=a(r(4994));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("projectStore","detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(r,e);var t=g(r);function r(){var e;(0,u.default)(this,r);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).serviceStore=new v.default({module:"services"}),e.fetchService=(0,c.default)(n.default.mark((function t(){var r,a,o,c;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store.detail,a=r.namespace,o=r.template,c=(0,m.default)(o,"spec.serviceName",""),t.next=4,e.serviceStore.checkName({name:c,namespace:a});case 4:if(!t.sent.exist){t.next=8;break}return t.next=8,e.serviceStore.fetchDetail({name:c,namespace:a});case 8:case"end":return t.stop()}}),t)}))),e}return(0,l.default)(r,[{key:"componentDidMount",value:function(){this.fetchService()}},{key:"renderServices",value:function(){var e=this.serviceStore,t=e.detail,r=e.isLoading,a=this.props.match.params.workspace;return t.name?d.default.createElement(y.default,{service:t,workspace:a,loading:r}):null}},{key:"renderContent",value:function(){return d.default.createElement("div",null,this.renderReplicaInfo(),this.renderServices(),this.renderContainerPorts(),this.renderPods())}}]),r}(h.Component))||o)||o;t.default=E},4994:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(18),a(42),a(16),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),u=n(a(55)),l=n(a(56)),i=n(a(51)),s=n(a(0)),f=a(433),d=n(a(1)),p=n(a(3)),m=n(a(63)),h=n(a(26)),v=a(72),y=n(a(789)),g=n(a(790)),E=n(a(4995));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var _=function(e){(0,u.default)(a,e);var r=S(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,c.default)(a,[{key:"renderContent",value:function(){var e=this.props,r=e.service,a=e.workspace;if((0,m.default)(r))return null;var n=r.name,o=r.namespace;return s.default.createElement("div",{className:E.default.item},s.default.createElement(g.default,{icon:v.ICON_TYPES.services,title:s.default.createElement(f.Link,{to:"/".concat(a,"/federatedprojects/").concat(o,"/services/").concat(n)},n),description:t(r.type)}))}},{key:"render",value:function(){var e=this.props.className,r=this.props.title||t("SERVICE_PL");return s.default.createElement(y.default,{className:(0,p.default)(E.default.main,e),title:r},this.renderContent())}},{key:"ports",get:function(){return(0,h.default)(this.props.service,"ports",[]).map((function(e){var t=e.targetPort?":".concat(e.targetPort):"";return"".concat(e.port).concat(t,"/").concat(e.protocol)}))}}]),a}(s.default.Component);r.default=_,_.propTypes={className:d.default.string,title:d.default.string,service:d.default.object,loading:d.default.bool},_.defaultProps={service:{},loading:!0}},4995:function(e,t,r){e.exports={item:"_1PQmBPdox2JqW3SmBv5687",info:"_11C0kbv64rWlWaLgQxMISN",record:"_2Jz3fdG2xJbV9Rhnq2hW_s",text:"_3M8bcgDVHqm5yDxsiosn2v",base:"_1kgonhTfjWg8Iwy7F9DQpf"}},4996:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(315)),c=n(a(43)),u=n(a(30));a(41);var l,i=n(a(44)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=a(186),v=n(a(26)),y=n(a(63)),g=a(14),E=a(239),S=n(a(805)),_=n(a(0)),O=n(a(437)),k=n(a(443)),b=a(52),C=a(791),R=n(a(4997));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,E.inject)("rootStore","projectStore")(l=(0,E.observer)(l=(0,C.trigger)(l=function(e){(0,d.default)(a,e);var r=w(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new O.default(new k.default),e.fetchData=(0,i.default)(c.default.mark((function t(){var r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,t.next=3,e.store.fetchDetail(r);case 3:return t.next=5,e.store.fetchResources(P(P({},r),{},{clusters:e.store.detail.clusters.map((function(e){return e.name}))}));case 5:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:e.store.detail,success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("federated.workload.template.edit",P(P({detail:e.store.detail,projectDetail:e.props.projectStore.detail,module:"service"},e.props.match.params),{},{success:e.fetchData,isFederated:!0,withService:!0}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,g.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,y.default)(r)){var n=(0,v.default)(r,'annotations["kubesphere.io/serviceType"]');return[{name:t("PROJECT"),value:(0,b.showNameAndAlias)(a,"federatedProject")},{name:t("TYPE"),value:_.default.createElement("span",null,"".concat(n?t("SERVICE_TYPE_".concat(n.toUpperCase())):t("CUSTOM_SERVICE")),_.default.createElement("span",{className:"text-desc"}," (",t(r.type),")"))},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,b.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return _.default.createElement(h.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return _.default.createElement(S.default,(0,o.default)({stores:e},r,{routes:(0,R.default)(this.props.match.path,this.store.detail)}))}},{key:"module",get:function(){return"services"}},{key:"name",get:function(){return"SERVICE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(_.default.Component))||l)||l)||l;r.default=D},4997:function(e,t,r){"use strict";r(15);var a=r(20);r(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(5);var n=a(r(61)),o=r(317),c=a(r(813)),u=a(r(821)),l=a(r(4998)),i=a(r(5e3));t.default=function(e,t){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:l.default,exact:!0}].concat((0,n.default)(t.isFedManaged?[{path:"".concat(e,"/access"),title:"ACCESS_INFORMATION",component:i.default,exact:!0}]:[]),[{path:"".concat(e,"/metadata"),title:"METADATA",component:u.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:c.default,exact:!0},(0,o.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})])}},4998:function(e,t,r){"use strict";var a=r(20);r(12),r(11),r(6),r(84),r(18),r(16),r(9),r(13),r(10),r(4),r(23),r(24),r(17),r(85),r(62),r(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(11),r(6),r(84),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(85),r(62),r(7);var n=a(r(30)),o=a(r(43));r(41);var c,u=a(r(44)),l=a(r(36)),i=a(r(37)),s=a(r(55)),f=a(r(56)),d=a(r(51)),p=a(r(0)),m=r(14),h=r(239),v=a(r(26)),y=a(r(321)),g=a(r(135)),E=a(r(63)),S=a(r(854)),_=a(r(318)),O=a(r(437)),k=a(r(849)),b=a(r(1982)),C=a(r(4999));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var w=(0,h.inject)("detailStore","projectStore")(c=(0,h.observer)(c=function(e){(0,s.default)(r,e);var t=P(r);function r(e){var a;(0,l.default)(this,r),(a=t.call(this,e)).fetchData=(0,u.default)(o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.namespace,r=a.state.workloadName,n=a.store.detail.clusters.map((function(e){return e.name})),e.next=5,a.workloadStore.checkName({name:r,namespace:t});case 5:e.sent.exist?(a.workloadStore.fetchDetail({name:r,namespace:t}),a.workloadStore.fetchResources({name:r,namespace:t,clusters:n}),a.setState({workloadExist:!0})):a.setState({workloadExist:!1});case 7:case"end":return e.stop()}}),e)}))),a.fetchReplica=(0,S.default)((0,u.default)(o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.workloadExist,r=a.props.match.params,!t){e.next=7;break}return e.next=5,a.workloadStore.fetchDetailSilent(T(T({clusters:a.workloadStore.detail.clusters.map((function(e){return e.name}))},r),{},{name:a.state.workloadName}));case 5:n=e.sent,a.setState({resources:n});case 7:case"end":return e.stop()}}),e)}))),2e3),a.store=e.detailStore,a.state={workloadExist:!0,workloadName:(0,v.default)(a.store.detail.annotations,'["kubesphere.io/workloadName"]'),resources:{}};var n=(0,v.default)(a.store.detail.annotations,'["kubesphere.io/workloadModule"]',"deployments");return a.workloadStore=new O.default(new _.default(n)),a}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.detailStore.detail,a=t.workloadName,n=(0,v.default)(r,'annotations["kubesphere.io/workloadName"]');a!==n&&(this.setState({workloadName:n}),this.fetchData())}},{key:"renderReplicaInfo",value:function(){var e=(this.store.detail||{}).clusters,t=this.workloadStore,r=t.detail,a=t.resources,n=t.isResourcesLoading,o=(0,y.default)(this.props.projectStore.detail.clusters,"name"),c=(0,g.default)((0,m.toJS)(a)),u=this.state.resources;return(0,E.default)(u)||Object.keys(c).forEach((function(e){c[e]=T(T({},c[e]),(0,v.default)(u,e,{}))})),p.default.createElement(b.default,{module:this.workloadStore.module,store:this.workloadStore,detail:r,resources:c,clusters:e,clustersDetail:o,isLoading:n,canEdit:this.enabledActions.includes("edit")})}},{key:"renderWorkloadPods",value:function(){var e=this.workloadStore.resources,t=this.store.detail.clusters.map((function(e){return e.name}));return p.default.createElement(k.default,{prefix:this.prefix,details:(0,m.toJS)(e),clusters:t,getReplica:this.fetchReplica,isFederated:!0})}},{key:"renderPods",value:function(){var e=this.store,t=e.resources,r=e.isResourcesLoading,a=this.store.detail.clusters.map((function(e){return e.name}));return p.default.createElement(k.default,{prefix:this.prefix,details:(0,m.toJS)(t),clusters:a,isLoading:r,isFederated:!0})}},{key:"renderContent",value:function(){var e=this.state,t=e.workloadName,r=e.workloadExist;return t&&r?p.default.createElement("div",null,this.renderReplicaInfo(),this.renderWorkloadPods()):this.renderPods()}},{key:"render",value:function(){return p.default.createElement("div",{className:C.default.main},this.renderContent())}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.store.module,project:this.props.match.params.namespace,fedproject:!0})}},{key:"prefix",get:function(){var e=this.props.match.params.workspace;return e?"/".concat(e):""}}]),r}(p.default.Component))||c)||c;t.default=w},4999:function(e,t,r){e.exports={access:"_1bjGKOVZKOXRIF6nQlyOhA"}},5e3:function(e,r,a){"use strict";var n=a(20);a(12),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(58)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=n(a(0)),m=n(a(321)),h=a(239),v=a(186),y=a(791),g=a(14),E=n(a(5001)),S=n(a(5005));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var b=(0,h.inject)("rootStore","detailStore","projectStore")(o=(0,h.observer)(o=(0,y.trigger)(o=function(e){(0,s.default)(a,e);var r=k(a);function a(){var e;(0,l.default)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).store=e.props.detailStore,e.fetchData=function(){var t=e.props.match.params,r=e.store.detail.clusters.map((function(e){return e.name}));e.store.fetchDetail(t),e.store.fetchResources(O(O({},t),{},{clusters:r}))},e.handleUpdateService=function(t){var r=e.store,a=r.detail,n=r.resources;e.trigger("fedservice.gateway.edit",{cluster:t,detail:(0,g.toJS)(a),resources:(0,g.toJS)(n),success:e.fetchData})},e}return(0,i.default)(a,[{key:"renderServiceAccess",value:function(){var e=this,r=this.store,a=r.resources,n=void 0===a?[]:a,o=r.isResourcesLoading,c=(0,m.default)(this.props.projectStore.detail.clusters,"name");return p.default.createElement(v.Loading,{spinning:o},p.default.createElement("div",null,p.default.createElement("div",{className:S.default.title},t("ACCESS_INFORMATION")),Object.keys(n).map((function(t){return p.default.createElement(E.default,{key:t,store:e.store,detail:n[t],cluster:c[t],enabledActions:e.enabledActions,updateService:e.handleUpdateService})}))))}},{key:"render",value:function(){return p.default.createElement("div",{className:S.default.main},this.renderServiceAccess())}},{key:"enabledActions",get:function(){var e=this.props.match.params,t=e.namespace,r=(0,c.default)(e,["namespace"]);return globals.app.getActions(O(O({module:"services"},r),{},{project:t,fedproject:!0}))}}]),a}(p.default.Component))||o)||o)||o;r.default=b},5001:function(e,r,a){"use strict";a(15);var n=a(20),o=a(157);a(5),a(11),a(84),a(16),a(4),a(23),a(17),a(85),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(11),a(84),a(42),a(16),a(4),a(22),a(23),a(57),a(17),a(85);var c=n(a(43));a(41);var u,l=n(a(44)),i=n(a(36)),s=n(a(37)),f=n(a(55)),d=n(a(56)),p=n(a(51)),m=o(a(0)),h=a(239),v=n(a(834)),y=n(a(789)),g=n(a(790)),E=n(a(814)),S=n(a(1704)),_=n(a(26)),O=n(a(5002)),k=n(a(5004));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var C=(0,h.inject)("rootStore")(u=(0,h.observer)(u=function(e){(0,f.default)(a,e);var r=b(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).gatewayStore=new v.default,e.state={gateway:{}},e.getProjectGateway=function(){var t=e.props.detail.namespace;return e.gatewayStore.getGatewayByProject({namespace:t,cluster:e.cluster})},e.getInitGateway=function(){var t=(0,l.default)(c.default.mark((function t(r){var a,n;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProjectGateway(r);case 2:a=t.sent,n=a[0]||a[1]||a[2]||{},e.setState({gateway:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOperations=function(){return[{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",onClick:function(){return e.props.updateService(e.cluster)}}]},e.getEnabledOperations=function(){return(e.isStateless?e.getOperations():[]).filter((function(t){return!t.action||e.props.enabledActions.includes(t.action)}))},e}return(0,s.default)(a,[{key:"componentDidMount",value:function(){this.getInitGateway()}},{key:"renderPorts",value:function(){var e=this.props.detail,t=this.state.gateway;return m.default.createElement(O.default,{gateway:t,detail:e})}},{key:"render",value:function(){var e=this.props,r=e.cluster,a=e.detail;return m.default.createElement(y.default,null,m.default.createElement("div",{className:k.default.header},m.default.createElement("div",{className:k.default.cluster},m.default.createElement(E.default,{cluster:r,theme:"light",tagClass:"float-right"})),m.default.createElement(g.default,{icon:"eip-pool",title:"".concat(a.name,".").concat(a.namespace,".svc"),description:t("INTERNAL_DOMAIN_NAME_SCAP")}),m.default.createElement(g.default,{title:a.clusterIP,description:t("VIRTUAL_IP_ADDRESS")}),m.default.createElement(S.default,{className:k.default.more,options:this.getEnabledOperations()})),m.default.createElement("div",{className:k.default.content},this.renderPorts()))}},{key:"cluster",get:function(){return this.props.cluster.name}},{key:"isStateless",get:function(){return"statelessservice"===(0,_.default)(this.props.store.detail,'annotations["kubesphere.io/serviceType"]')}}]),a}(m.Component))||u)||u;r.default=C},5002:function(e,r,a){"use strict";a(15);var n=a(157),o=a(20);a(5),a(18),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(18),a(42),a(4),a(23),a(57),a(17);var c=o(a(36)),u=o(a(37)),l=o(a(55)),i=o(a(56)),s=o(a(51)),f=n(a(0)),d=a(186),p=o(a(63)),m=o(a(5003));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var v=function(e){(0,l.default)(a,e);var r=h(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this.props,r=e.detail,a=e.gateway;return(0,p.default)(r.ports)?null:f.default.createElement("div",{className:m.default.portsWrapper},r.ports.map((function(e,r){return f.default.createElement("div",{key:r,className:m.default.ports},f.default.createElement(d.Icon,{name:"pod",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.targetPort)),f.default.createElement("p",null,t("CONTAINER_PORT_SCAP"))),f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"network-router",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.port)),f.default.createElement("p",null,t("SERVICE_PORT_SCAP"))),e.nodePort&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.default.protocol},"→ ",e.protocol," → "),f.default.createElement(d.Icon,{name:"nodes",size:40}),f.default.createElement("div",{className:m.default.port},f.default.createElement("p",null,f.default.createElement("strong",null,e.nodePort)),f.default.createElement("div",null,t("NODE_PORT_SCAP"),f.default.createElement(d.Tooltip,{content:t("SERVICE_NODE_PORT_DESC"),trigger:"hover"},f.default.createElement(d.Icon,{name:"information"})))),a&&a.defaultIngress&&f.default.createElement("a",{href:"http://".concat(a.defaultIngress,":").concat(e.nodePort),target:"_blank",rel:"noreferrer noopener"},f.default.createElement(d.Button,{className:m.default.access},t("ACCESS_SERVICE")))))})))}}]),a}(f.Component);r.default=v},5003:function(e,t,r){e.exports={portsWrapper:"_1Pcu-345c_wl9yf38ivhQo",ports:"LDS1ia--XQVpIU-3yHPn5",port:"_1zJo48cJRGI6RNUL5es3tt",protocol:"_18xFWD0Op7w-JssVhsXPea",access:"VDdVC7yvlMXTJWX89VPiu"}},5004:function(e,t,r){e.exports={header:"_2wGtWVSqTnbMZptbrMvl8t",more:"_3nn1DlOJ8i93Lx92yk96rg",cluster:"dj9gdTQUx6gxxPOYtRxfg",icon:"_1JDtWb_pMP87aE1hTCyDVp",indicator:"_1C_oKLQioGrnjsLHfgKJZ",content:"_1-RHEin7EVlSnYzIKUJx_Q",group:"or5rEBIKrfmFv3_DJ4syj"}},5005:function(e,t,r){e.exports={title:"_3U-BsUjQkTwiUO_R0nKbi0"}},5006:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var o,c=n(a(315)),u=n(a(30)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=a(186),m=n(a(63)),h=a(14),v=a(239),y=n(a(805)),g=n(a(0)),E=n(a(437)),S=n(a(917)),_=a(52),O=a(791),k=n(a(5007));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var T=(0,v.inject)("rootStore","projectStore")(o=(0,v.observer)(o=(0,O.trigger)(o=function(e){(0,s.default)(a,e);var r=R(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new E.default(new S.default),e.fetchData=function(){var t=e.props.match.params,r=e.props.projectStore.detail.clusters.map((function(e){return e.name}));e.store.fetchDetail(t),e.store.fetchResources(C(C({},t),{},{clusters:r}))},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,h.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editRules",icon:"firewall",text:t("EDIT_ROUTING_RULES"),action:"edit",onClick:function(){return e.trigger("fedproject.router.rules.edit",{isFederated:!0,detail:(0,h.toJS)(e.store.detail),projectDetail:(0,h.toJS)(e.props.projectStore.detail),success:e.fetchData})}},{key:"editAnnotations",icon:"firewall",text:t("EDIT_ANNOTATIONS"),action:"edit",onClick:function(){return e.trigger("router.annotations.edit",{detail:(0,h.toJS)(e.store.detail),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,h.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,m.default)(r))return[{name:t("PROJECT"),value:(0,_.showNameAndAlias)(a,"federatedProject")},{name:t("APP"),value:r.app},{name:t("CREATION_TIME_TCAP"),value:(0,_.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return g.default.createElement(p.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,_.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("".concat(this.name,"_PL")),url:this.listUrl}]};return g.default.createElement(y.default,(0,c.default)({stores:e},r,{routes:(0,k.default)(this.props.match.path)}))}},{key:"module",get:function(){return"ingresses"}},{key:"name",get:function(){return"ROUTE"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(g.default.Component))||o)||o)||o;r.default=T},5007:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(813)),c=a(r(821)),u=a(r(5008));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",component:u.default,exact:!0},{path:"".concat(e,"/metadata"),title:"METADATA",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},5008:function(e,t,r){"use strict";r(15);var a=r(20);r(5),r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(5),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var n,o=a(r(315)),c=a(r(36)),u=a(r(37)),l=a(r(55)),i=a(r(56)),s=a(r(51)),f=a(r(0)),d=a(r(321)),p=r(239),m=r(186),h=a(r(5009));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var y=(0,p.inject)("detailStore","projectStore")(n=(0,p.observer)(n=function(e){(0,l.default)(r,e);var t=v(r);function r(){var e;(0,c.default)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).store=e.props.detailStore,e}return(0,u.default)(r,[{key:"render",value:function(){var e=this,t=this.store,r=t.detail,a=t.resources,n=void 0===a?{}:a,c=t.isResourcesLoading,u=(0,d.default)(this.props.projectStore.detail.clusters,"name");return f.default.createElement(m.Loading,{spinning:c},f.default.createElement("div",null,r.clusters.map((function(t){return f.default.createElement(h.default,(0,o.default)({key:t.name},e.props.match.params,{detail:n[t.name],cluster:u[t.name]}))}))))}}]),r}(f.default.Component))||n)||n;t.default=y},5009:function(e,r,a){"use strict";a(15);var n=a(20);a(5),a(73),a(18),a(16),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(5),a(73),a(18),a(42),a(16),a(4),a(22),a(23),a(57),a(17);var o=n(a(43));a(41);var c,u=n(a(44)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=n(a(189)),m=n(a(63)),h=n(a(0)),v=a(14),y=a(239),g=n(a(789)),E=n(a(790)),S=n(a(814)),_=n(a(5010)),O=n(a(834)),k=n(a(1979)),b=n(a(5012));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R=(0,y.observer)(c=function(e){(0,s.default)(n,e);var r,a=C(n);function n(){var e;(0,l.default)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).store=new O.default,e.state={gateway:{}},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.getGateway()}},{key:"getGateway",value:(r=(0,u.default)(o.default.mark((function e(){var t,r,a,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.cluster,a=t.namespace,e.next=3,this.store.getGatewayByProject({cluster:r.name,namespace:a});case 3:n=e.sent,this.setState({gateway:n[0]||n[1]||n[2]||{}});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getNodePorts",value:function(e){return e.ports?e.ports.map((function(e){return"".concat(e.name.toUpperCase(),": ").concat(e.nodePort)})).join("/"):"-"}},{key:"getExternalIP",value:function(e){var t="-";return(0,m.default)(e.loadBalancerIngress)?(0,m.default)(e.externalIPs)||(t=e.externalIPs.join("; ")):t=e.loadBalancerIngress.join("; "),t||"-"}},{key:"renderRules",value:function(){var e=this.props,r=e.workspace,a=e.namespace,n=e.detail,o=(0,v.toJS)(this.state.gateway)||{};if(!n||(0,m.default)(n.rules))return t("NO_DATA");var c=n.tls||[];return h.default.createElement("div",{className:b.default.rules},n.rules.map((function(e){return h.default.createElement(k.default,{key:e.host,tls:c,rule:e,gateway:o,prefix:"/".concat(r,"/federatedprojects/").concat(a)})})))}},{key:"renderAnnotations",value:function(){var e=this.props.detail;return e?h.default.createElement(_.default,{data:(0,p.default)(e.annotations,["displayName","desc","creator"])}):null}},{key:"render",value:function(){var e=this.props.cluster,r=(0,v.toJS)(this.state.gateway)||{};return h.default.createElement(g.default,null,h.default.createElement("div",{className:b.default.header},h.default.createElement("div",{className:b.default.cluster},h.default.createElement(S.default,{cluster:e,theme:"light",tagClass:"float-right"})),h.default.createElement(E.default,{icon:"eip-pool",title:r.type,description:t("GATEWAY_ACCESS_MODE")}),"NodePort"===r.type?h.default.createElement(h.default.Fragment,null,h.default.createElement(E.default,{title:r.loadBalancerIngress||"-",description:t("GATEWAY_IP_ADDRESS")}),h.default.createElement(E.default,{title:this.getNodePorts(r),description:t("NODE_PORTS_SCAP")})):h.default.createElement(E.default,{title:this.getExternalIP(r),description:t("EXTERNAL_IP_ADDRESS")})),h.default.createElement("div",{className:b.default.content},this.renderRules(),this.renderAnnotations()))}}]),n}(h.default.Component))||c;r.default=R},5010:function(e,r,a){"use strict";a(15);var n=a(20);a(11),a(18),a(10),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(11),a(18),a(42),a(10),a(4),a(23),a(57),a(17);var o=n(a(36)),c=n(a(37)),u=n(a(55)),l=n(a(56)),i=n(a(51)),s=n(a(0)),f=n(a(1)),d=n(a(63)),p=a(186),m=n(a(801)),h=n(a(5011));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(a,e);var r=v(a);function a(){return(0,o.default)(this,a),r.apply(this,arguments)}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,r=e.className,a=e.data;return(0,d.default)(a)?null:s.default.createElement(m.default,{className:r,title:t("ANNOTATION_PL")},s.default.createElement("ul",{className:h.default.annotations},Object.keys(a).filter((function(e){return!(0,d.default)(a[e])})).map((function(e){return s.default.createElement("li",{key:e},s.default.createElement(p.Columns,null,s.default.createElement(p.Column,{className:"is-narrow"},s.default.createElement("p",{style:{width:317}},e)),s.default.createElement(p.Column,null,s.default.createElement("p",null,a[e]))))}))))}}]),a}(s.default.Component);r.default=y,y.propTypes={className:f.default.string,data:f.default.object},y.defaultProps={data:{}}},5011:function(e,t,r){e.exports={annotations:"_2_w63cUNkbWlOS0ZfqQkUh"}},5012:function(e,t,r){e.exports={header:"_2cRBeNhJ-QdGg_gm6Odlxt",more:"_2wydp9JkD2wSruuza5W-jL",cluster:"_2JQdd4abYvPgPiCpTe_tDE",icon:"_1wTNTYrqEQ2DbwCADkOyII",indicator:"_3ydyXdOIJE8B8VMPMX2bdU",content:"_1E9FTzaLJLWLHtCczzZhqj",rules:"_3spDU78xh15rAxlioee3wW"}},5013:function(e,r,a){"use strict";var n=a(20);a(12),a(109),a(5),a(11),a(6),a(18),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(315)),c=n(a(43)),u=n(a(30));a(41);var l,i=n(a(44)),s=n(a(36)),f=n(a(37)),d=n(a(55)),p=n(a(56)),m=n(a(51)),h=a(186),v=n(a(63)),y=a(14),g=a(239),E=n(a(805)),S=n(a(0)),_=n(a(437)),O=n(a(866)),k=n(a(831)),b=a(52),C=a(791),R=n(a(5014));function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,m.default)(e);if(t){var n=(0,m.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.default)(this,r)}}var D=(0,g.inject)("rootStore","projectStore")(l=(0,g.observer)(l=(0,C.trigger)(l=function(e){(0,d.default)(a,e);var r=w(a);function a(){var e;(0,s.default)(this,a);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(e=r.call.apply(r,[this].concat(o))).store=new _.default(new k.default),e.storageclass=new O.default,e.fetchData=(0,i.default)(c.default.mark((function t(){var r,a;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.match.params,a=e.props.projectStore.detail.clusters.map((function(e){return e.name})),e.store.fetchDetail(r),e.store.fetchResources(P(P({},r),{},{clusters:a}));case 4:case"end":return t.stop()}}),t)}))),e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,y.toJS)(e.store.detail),success:e.fetchData})}},{key:"editConfigTemplate",icon:"storage",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("volume.template.edit",P(P({module:e.module,detail:e.store.detail},e.props.match.params),{},{success:e.fetchData,isFederated:!0,isEdit:!0,projectDetail:e.props.projectStore.detail}))}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:(0,y.toJS)(e.store.detail),success:e.returnTolist})}}]},e.getAttrs=function(){var r=e.store.detail,a=void 0===r?{}:r;if((0,v.default)(a))return null;var n=a.createTime,o=a.creator,c=a.namespace,u=a.capacity,l=a.accessMode,i=a.storageClassName,s=a.annotations,f=void 0===s?{}:s;return[{name:t("PROJECT"),value:(0,b.showNameAndAlias)(c,"federatedProject")},{name:t("CAPACITY"),value:"".concat((0,b.memoryFormat)(u,"Gi"),"Gi")},{name:t("ACCESS_MODE_TCAP"),value:l},{name:t("STORAGE_CLASS"),value:i||f["volume.beta.kubernetes.io/storage-class"]},{name:t("PROVISIONER"),value:f["volume.beta.kubernetes.io/storage-provisioner"]||"-"},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:o}]},e.returnTolist=function(){e.props.rootStore.routing.push(e.listUrl)},e}return(0,f.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return S.default.createElement(h.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,attrs:this.getAttrs(),operations:this.getOperations(),icon:"storage",breadcrumbs:[{label:t("PERSISTENT_VOLUME_CLAIM_PL"),url:this.listUrl}]};return S.default.createElement(E.default,(0,o.default)({stores:e},r,{routes:(0,R.default)(this.props.match.path)}))}},{key:"name",get:function(){return"PERSISTENT_VOLUME_CLAIM"}},{key:"module",get:function(){return"volumes"}},{key:"authKey",get:function(){return"persistentvolumeclaims"}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(S.default.Component))||l)||l)||l;r.default=D},5014:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(813)),c=a(r(821)),u=a(r(5015)),l=a(r(5019));t.default=function(e){return[{path:"".concat(e,"/resource-status"),title:"RESOURCE_STATUS",exact:!0,component:u.default},{path:"".concat(e,"/volume-mounts"),title:"MOUNT_INFORMATION",exact:!0,component:l.default},{path:"".concat(e,"/metadata"),title:"METADATA",component:c.default,exact:!0},{path:"".concat(e,"/events"),title:"EVENT_PL",exact:!0,component:o.default},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/resource-status"),exact:!0})]}},5015:function(e,r,a){"use strict";a(15);var n=a(20);a(18),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(36)),u=n(a(37)),l=n(a(55)),i=n(a(56)),s=n(a(51)),f=n(a(0)),d=a(239),p=n(a(321)),m=a(186),h=a(52),v=n(a(5016)),y=n(a(5018));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,s.default)(e);if(t){var n=(0,s.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,i.default)(this,r)}}var E=(0,d.inject)("detailStore","projectStore")(o=(0,d.observer)(o=function(e){(0,l.default)(a,e);var r=g(a);function a(){return(0,c.default)(this,a),r.apply(this,arguments)}return(0,u.default)(a,[{key:"render",value:function(){var e=this,r=this.store.detail.clusters,a=t.html("VOLUME_MONITORING_TIP");return f.default.createElement("div",{className:y.default.main},f.default.createElement(m.Alert,{type:"info",className:"margin-b12",message:(0,h.learnMoreTip)(a)}),r.map((function(t){return f.default.createElement(v.default,{key:t.name,match:e.props.match,cluster:e.clusterMap[t.name]||t})})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"clusterMap",get:function(){return(0,p.default)(this.props.projectStore.detail.clusters,"name")}}]),a}(f.default.Component))||o)||o;r.default=E},5016:function(e,r,a){"use strict";a(15);var n=a(20),o=a(157);a(12),a(109),a(16),a(27),a(4),a(316),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(42),a(16),a(27),a(4),a(316),a(23),a(57),a(24),a(17),a(62);var c,u=n(a(315)),l=n(a(36)),i=n(a(37)),s=n(a(55)),f=n(a(56)),d=n(a(51)),p=o(a(0)),m=a(239),h=a(186),v=n(a(26)),y=a(794),g=n(a(1845)),E=n(a(862)),S=n(a(789)),_=a(798),O=n(a(814)),k=n(a(1844)),b=n(a(5017));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,d.default)(e);if(t){var n=(0,d.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,f.default)(this,r)}}var R={inodeUsage:"pvc_inodes_used",inodeTotal:"pvc_inodes_total",inodeUtilisation:"pvc_inodes_utilisation",capacityAvailable:"pvc_bytes_available",capacityTotal:"pvc_bytes_total",capacityUtilisation:"pvc_bytes_utilisation"},T=(0,m.observer)(c=function(e){(0,s.default)(a,e);var r=C(a);function a(e){var t;(0,l.default)(this,a);var n=(t=r.call(this,e)).props.match.params,o=n.namespace,c=n.name,u=t.props.cluster;return t.monitor=new k.default({cluster:u.name,namespace:o,pvc:c}),t}return(0,i.default)(a,[{key:"componentDidMount",value:function(){this.timer=this.monitor.monitoringMetrics({step:"1m",times:60,metrics:Object.values(R)},{interval:6e4})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"parseMetrics",value:function(e,t){var r=(0,y.getSuitableUnit)(e,t);return{unit:r,count:(0,y.getValueByUnit)(e,r)}}},{key:"render",value:function(){var e=this.monitor,t=e.isLoading,r=e.isRefreshing;return p.default.createElement(S.default,null,p.default.createElement(h.Loading,{spinning:t},p.default.createElement("div",{"data-refreshing":r},this.renderStatus(),this.renderMonitor())))}},{key:"renderStatus",value:function(){var e=this.props.cluster,r=this.monitor.data,a=(0,y.getLastMonitoringData)(r),n=(0,v.default)(a,"".concat(R.capacityAvailable,".value[1]"),0),o=(0,v.default)(a,"".concat(R.capacityTotal,".value[1]"),0),c=this.parseMetrics(n,"memory"),u=this.parseMetrics(o,"memory"),l=(0,v.default)(a,"".concat(R.capacityUtilisation,".value[1]"),0);return p.default.createElement("header",{className:b.default.header},p.default.createElement("div",{className:b.default.cluster},p.default.createElement(O.default,{cluster:e,theme:"light",tagClass:"float-right"})),p.default.createElement("div",{className:b.default.space}),p.default.createElement("div",{className:b.default.card},p.default.createElement(g.default,{rate:Number(l)})),p.default.createElement("div",{className:b.default.description},p.default.createElement("h3",null,c.count,p.default.createElement("small",null,c.unit)),p.default.createElement("p",null,t("AVAILABLE_CAPACITY"))),p.default.createElement("div",{className:b.default.description},p.default.createElement("h3",null,u.count,p.default.createElement("small",null,u.unit)),p.default.createElement("p",null,t("TOTAL_CAPACITY"))))}},{key:"renderMonitor",value:function(){if(!globals.app.hasKSModule("whizard-monitoring"))return null;var e=this.monitor.data,r=(0,v.default)(e,"".concat(R.inodeUtilisation,".data.result")),a=(0,v.default)(e,"".concat(R.inodeUsage,".data.result[0].values"),[]),n=(0,v.default)(e,"".concat(R.inodeTotal,".data.result[0].values"),[]),o=(0,y.getAreaChartOps)({title:t("INODE_USAGE"),unit:"%",legend:["USAGE"],data:r,renderTooltip:function(){var e=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[a]}),t=(0,y.getChartData)({unit:"",legend:["USAGE"],valuesData:[n]});return p.default.createElement(E.default,{usageData:e,totalData:t})}});return p.default.createElement(_.SimpleArea,(0,u.default)({width:"100%",theme:"dark"},o))}}]),a}(p.Component))||c;r.default=T},5017:function(e,t,r){e.exports={header:"_3Z4KUGmNUgVr4-y-komZ9K",space:"_2H48QuNUOvOnGq50OPjASq",description:"_3p6pmqlaHGqn0QYisabFSf",card:"_3fv7ZUwuOo2YeImgsK-K5a",cluster:"SWO2uJpaFLpUCiYol7TtI"}},5018:function(e,t,r){e.exports={ports:"_3b2RR6bcGe40UHeXGC9Br0",card:"_1EGCXddyEqqsPWIeiIdsg4",content:"_2XcnUCITfye82yE9ZTWKZB",title:"zeaK6s92HSCAqhu-YYqlZ",path:"_2C-Kf038TvUyk7wvxs1_AR",access:"_3yZMwNYFSKHnpiWv7qAqC3"}},5019:function(e,t,r){"use strict";r(15);var a=r(20);r(18),r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(18),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var n,o=a(r(36)),c=a(r(37)),u=a(r(55)),l=a(r(56)),i=a(r(51)),s=a(r(0)),f=r(239),d=a(r(321)),p=a(r(5020)),m=a(r(5022));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=(0,f.inject)("detailStore","projectStore")(n=(0,f.observer)(n=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this,t=this.store.detail.clusters;return s.default.createElement("div",{className:m.default.main},t.map((function(t){return s.default.createElement(p.default,{key:t.name,match:e.props.match,cluster:e.clusterMap[t.name]||t})})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"clusterMap",get:function(){return(0,d.default)(this.props.projectStore.detail.clusters,"name")}}]),r}(s.default.Component))||n)||n;t.default=v},5020:function(e,t,r){"use strict";r(15);var a=r(157),n=r(20);r(16),r(4),r(23),r(24),r(17),r(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(45),r(42),r(16),r(4),r(23),r(57),r(24),r(17),r(62);var o=n(r(36)),c=n(r(37)),u=n(r(55)),l=n(r(56)),i=n(r(51)),s=a(r(0)),f=n(r(789)),d=n(r(849)),p=n(r(814)),m=n(r(5021));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,i.default)(e);if(t){var n=(0,i.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,l.default)(this,r)}}var v=function(e){(0,u.default)(r,e);var t=h(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return(0,c.default)(r,[{key:"render",value:function(){var e=this.props.cluster,t=this.props.match.params,r=t.namespace,a=t.workspace,n=t.name,o={kind:"PVC",cluster:e.name,namespace:r,workspace:a,name:n};return s.default.createElement(f.default,null,s.default.createElement("div",{className:m.default.cluster},s.default.createElement(p.default,{cluster:e,theme:"light",tagClass:"float-right"})),s.default.createElement("div",{className:m.default.content},s.default.createElement(d.default,{detail:o,hideHeader:!0,hideFooter:!0,noWrapper:!0})))}},{key:"prefix",get:function(){return"/".concat(this.props.match.params.workspace)}}]),r}(s.Component);t.default=v},5021:function(e,t,r){e.exports={cluster:"_1KjuQ8goIKUHRa3R-iuBX4",content:"_3XpAsS8jkQ4Fw6ny0rzFEZ"}},5022:function(e,t,r){e.exports={ports:"_1W6aOQmbR_TDUl-4XI5cqb",card:"eXYzvyUJJVLQJMgIXqDJX",content:"ANDh5NFl5HpZ-esvdF1mg",title:"_3MWtGl2UjycAya8PZmy1Q-",path:"_2loC4j2Lt1B_2UqWFzCvrn",access:"_19sCDCBcH0h9bYP-ViNz9Y"}},5023:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(5),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(28),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=a(186),p=n(a(63)),m=a(14),h=a(239),v=n(a(805)),y=n(a(0)),g=n(a(437)),E=a(52),S=a(791),_=a(72),O=n(a(5024));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var b=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,S.trigger)(o=function(e){(0,i.default)(a,e);var r=k(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new g.default({module:e.module}),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("secret.edit",{detail:e.store.detail,success:e.fetchData,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,p.default)(r)){var n=r.type;return[{name:t("PROJECT"),value:(0,E.showNameAndAlias)(a,"federatedProject")},{name:t("TYPE"),value:t(_.SECRET_TYPES[n]||n)},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("UPDATE_TIME_TCAP"),value:(0,E.getLocalTime)(r.updateTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]}},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return y.default.createElement(d.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("SECRET_PL"),url:this.listUrl}]};return y.default.createElement(v.default,(0,c.default)({stores:e},r,{routes:(0,O.default)(this.props.match.path)}))}},{key:"module",get:function(){return"secrets"}},{key:"name",get:function(){return"SECRET"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(y.default.Component))||o)||o)||o;r.default=b},5024:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(5025));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},5025:function(e,r,a){"use strict";a(15);var n=a(20);a(18),a(98),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(191),a(42),a(159),a(98),a(4),a(23),a(57),a(17);var o,c=n(a(96)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=a(239),m=a(186),h=n(a(801)),v=n(a(26)),y=n(a(5026));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var E=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(a,e);var r=g(a);function a(e){var t;return(0,u.default)(this,a),(t=r.call(this,e)).convert=function(e,r){return t.state.showSecret?e:(0,v.default)(t.originData,r,"")},t.changeSecretState=function(){t.setState((function(e){return{showSecret:!e.showSecret}}))},t.store=e.detailStore,t.module=e.module,t.state={showSecret:!1},t}return(0,l.default)(a,[{key:"renderTLS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.tlsWrapper},d.default.createElement("div",{className:y.default.tlsItem},d.default.createElement("div",{className:"h6"},t("CREDENTIAL_SI")),d.default.createElement("pre",null,this.convert(e["tls.crt"],"tls.crt"))),d.default.createElement("div",{className:y.default.tlsItem},d.default.createElement("div",{className:"h6"},t("PRIVATE_KEY_TCAP")),d.default.createElement("pre",null,this.convert(e["tls.key"],"tls.key"))))}},{key:"renderImageRepositorySecret",value:function(e){var r=this,a=e[".dockerconfigjson"];return a&&a.auths?d.default.createElement("div",{className:y.default.imageWrapper},d.default.createElement("ul",null,Object.entries(a.auths).map((function(e){var n=(0,c.default)(e,1)[0];return d.default.createElement("li",{key:n},d.default.createElement("div",{className:"h6"},d.default.createElement(m.Icon,{name:"earth"}),n),d.default.createElement("ul",null,d.default.createElement("li",null,d.default.createElement("span",null,t(".dockerconfigjson"),":"),d.default.createElement("span",null,r.convert(JSON.stringify(a),".dockerconfigjson")))))})))):null}},{key:"renderDefault",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(t).map((function(t){var r=(0,c.default)(t,2),a=r[0],n=r[1];return d.default.createElement("li",{key:a},d.default.createElement("span",null,a,":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(n,a))))}))))}},{key:"renderBasicAuth",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:y.default.defaultWrapper},d.default.createElement("ul",null,Object.entries(r).map((function(r){var a=(0,c.default)(r,2),n=a[0],o=a[1];return d.default.createElement("li",{key:n},d.default.createElement("span",null,t(n.toUpperCase()),":"),d.default.createElement("span",null,d.default.createElement("pre",null,e.convert(o,n))))}))))}},{key:"renderContent",value:function(e){if(!e.type)return null;var t=null;switch(e.type){case"kubernetes.io/tls":t=this.renderTLS(e.data);break;case"kubernetes.io/dockerconfigjson":t=this.renderImageRepositorySecret(e.data);break;case"kubernetes.io/basic-auth":t=this.renderBasicAuth(e.data);break;default:t=this.renderDefault(e.data)}return t}},{key:"renderOperations",value:function(){var e=this.state.showSecret;return d.default.createElement(m.Button,{type:"flat",icon:e?"eye-closed":"eye",onClick:this.changeSecretState})}},{key:"render",value:function(){var e=this.store.detail,r=void 0===e?{}:e;return d.default.createElement(h.default,{title:t("DATA"),operations:this.renderOperations()},this.renderContent(r))}},{key:"originData",get:function(){var e,t;return null!==(e=null===(t=this.store.detail._originData)||void 0===t?void 0:t.data)&&void 0!==e?e:{}}}]),a}(d.default.Component))||o)||o;r.default=E},5026:function(e,t,r){e.exports={defaultWrapper:"_2dy4CtwnVPBdVDSZHW9BOl",tlsWrapper:"iJYavjSaC9ppprl7BQSi8",tlsItem:"_2v7AIMJ0uI9fm8cKo5w1-x",imageWrapper:"_1Uipq-ALr1lKHarcyPzNTP"}},5027:function(e,r,a){"use strict";a(15);var n=a(20);a(12),a(109),a(5),a(16),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(12),a(109),a(45),a(5),a(28),a(42),a(16),a(4),a(23),a(57),a(24),a(17),a(62);var o,c=n(a(315)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=a(186),p=n(a(63)),m=a(14),h=a(239),v=n(a(805)),y=n(a(0)),g=n(a(437)),E=a(52),S=a(791),_=n(a(5028));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var k=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,S.trigger)(o=function(e){(0,i.default)(a,e);var r=O(a);function a(){var e;(0,u.default)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=r.call.apply(r,[this].concat(o))).store=new g.default({module:e.module}),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,m.toJS)(e.store.detail),success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("resource.yaml.edit",{detail:e.store.detail,success:e.fetchData})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",onClick:function(){return e.trigger("configmap.edit",{detail:e.store.detail,success:e.fetchData,isFederated:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("resource.delete",{type:e.name,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,m.toJS)(e.store.detail),a=e.props.match.params.namespace;if(!(0,p.default)(r))return[{name:t("PROJECT"),value:(0,E.showNameAndAlias)(a,"federatedProject")},{name:t("CREATION_TIME_TCAP"),value:(0,E.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading)return y.default.createElement(d.Loading,{className:"ks-page-loading"});var r={module:this.module,name:(0,E.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CONFIGMAP_PL"),url:this.listUrl}]};return y.default.createElement(v.default,(0,c.default)({stores:e},r,{routes:(0,_.default)(this.props.match.path)}))}},{key:"module",get:function(){return"configmaps"}},{key:"name",get:function(){return"CONFIGMAP"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"listUrl",get:function(){var e=this.props.match.params,t=e.workspace,r=e.cluster,a=e.namespace;return t?"/".concat(t,"/federatedprojects/").concat(a,"/").concat(this.module):"/clusters/".concat(r,"/").concat(this.module)}}]),a}(y.default.Component))||o)||o)||o;r.default=k},5028:function(e,t,r){"use strict";r(15);var a=r(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(317),o=a(r(5029));t.default=function(e){return[{path:"".concat(e,"/detail"),title:"DATA",component:o.default,exact:!0},(0,n.getIndexRoute)({path:e,to:"".concat(e,"/detail"),exact:!0})]}},5029:function(e,r,a){"use strict";a(15);var n=a(20);a(18),a(98),a(4),a(23),a(17),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,a(45),a(18),a(42),a(98),a(4),a(23),a(57),a(17);var o,c=n(a(96)),u=n(a(36)),l=n(a(37)),i=n(a(55)),s=n(a(56)),f=n(a(51)),d=n(a(0)),p=a(239),m=n(a(801)),h=n(a(5030));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,f.default)(e);if(t){var n=(0,f.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var y=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,i.default)(a,e);var r=v(a);function a(e){var t;return(0,u.default)(this,a),(t=r.call(this,e)).store=e.detailStore,t.module=e.module,t}return(0,l.default)(a,[{key:"renderContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.default.createElement("div",{className:h.default.wrapper},d.default.createElement("ul",null,Object.entries(e).map((function(e){var t=(0,c.default)(e,2),r=t[0],a=t[1];return d.default.createElement("li",{key:r},d.default.createElement("div",{className:"h6"},r),d.default.createElement("pre",{className:h.default.value},a))}))))}},{key:"render",value:function(){var e=this.store,r=e.detail,a=e.isLoading;return d.default.createElement(m.default,{title:t("DATA"),loading:a},this.renderContent(r.data))}}]),a}(d.default.Component))||o)||o;r.default=y},5030:function(e,t,r){e.exports={wrapper:"_28vsYz12ZPwpoPNgzqPOo9",value:"-jWVKnn0uXD_hecvNvLnq"}},782:function(e,t,r){"use strict";var a=r(20),n=r(157);r(12),r(11),r(6),r(29),r(73),r(18),r(16),r(9),r(13),r(10),r(4),r(22),r(23),r(24),r(17),r(38),r(62),r(7),r(32),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(12),r(45),r(11),r(6),r(29),r(73),r(18),r(28),r(42),r(16),r(34),r(15),r(9),r(13),r(10),r(4),r(22),r(23),r(57),r(24),r(17),r(38),r(62),r(7),r(32);var o=a(r(43)),c=a(r(30));r(41);var u,l=a(r(44)),i=a(r(36)),s=a(r(37)),f=a(r(55)),d=a(r(56)),p=a(r(51)),m=n(r(0)),h=a(r(74)),v=r(14),y=r(239),g=r(186),E=r(317),S=a(r(437)),_=a(r(438)),O=a(r(4923));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,p.default)(e);if(t){var n=(0,p.default)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,d.default)(this,r)}}var R=(0,y.inject)("rootStore")(u=(0,y.observer)(u=function(e){(0,f.default)(a,e);var t,r=C(a);function a(e){var t;return(0,i.default)(this,a),(t=r.call(this,e)).store=new S.default({module:"namespaces"}),t.clusterStore=new _.default,t.init(e.match.params),t}return(0,s.default)(a,[{key:"componentDidUpdate",value:function(e){this.project!==e.match.params.namespace&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,Promise.all([this.store.fetchDetail(b(b({},t),{},{name:t.namespace})),this.props.rootStore.getRules({workspace:t.workspace})]);case 3:return e.next=5,this.props.rootStore.getRules(b(b({},t),{},{fedProCluster:this.store.detail.clusters.map((function(e){return e.name})).join("_")}));case 5:return e.next=7,this.clusterStore.fetchList({names:this.store.detail.clusters.map((function(e){return e.name})).join(","),sortBy:"createTime",ascending:!0,limit:-1});case 7:this.store.detail.clusters=(0,v.toJS)(this.clusterStore.list.data),this.store.detail.clusters.forEach((function(e){(0,h.default)(globals,"clusterConfig.".concat(e.name),e.configz)})),globals.app.cacheHistory(this.props.match.url,{type:"Multi-cluster Project",name:this.store.detail.name,aliasName:this.store.detail.aliasName,isFedManaged:!0}),this.store.initializing=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(g.Loading,{className:"ks-page-loading"}):m.default.createElement(y.Provider,{projectStore:this.store},(0,E.renderRoutes)(O.default))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),a}(m.Component))||u)||u;t.default=R}}]);