(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1996:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var r=n(a(36)),o=n(a(55)),i=n(a(56)),u=n(a(51));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}var c=function(e){(0,o.default)(a,e);var t=l(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return a}(n(a(1128)).default);t.default=c},1997:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var r=n(a(36)),o=n(a(55)),i=n(a(56)),u=n(a(51));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}var c=function(e){(0,o.default)(a,e);var t=l(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return a}(n(a(1014)).default);t.default=c},1998:function(e,t,a){"use strict";var n=a(20);a(12),a(134),a(5),a(11),a(6),a(18),a(16),a(27),a(9),a(13),a(10),a(4),a(23),a(17),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(134),a(45),a(5),a(11),a(6),a(18),a(28),a(42),a(16),a(27),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(17),a(7);var r=n(a(43)),o=n(a(31)),i=n(a(58));a(41);var u,l=n(a(44)),c=n(a(36)),s=n(a(37)),d=n(a(55)),f=n(a(56)),p=n(a(51)),m=n(a(49)),h=n(a(26)),g=n(a(63)),y=a(14),v=a(983);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var S=(u=function(e){(0,d.default)(o,e);var t,a,n=b(o);function o(){return(0,c.default)(this,o),n.apply(this,arguments)}return(0,s.default)(o,[{key:"mapper",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,h.default)(t,"nodeStatus",""),n=(0,h.default)(t,"createTime",""),r=(0,h.default)(t,"agentUpdateTime",""),o=(0,h.default)(t,"agentInfo.modules.nodeInfo",{}),i=(0,h.default)(t,"taskList.tasks",[]),u=o.alias,l=o.nodeIP,c=o.hostName,s=o.description,d=o.systemHardInfo,f=(0,h.default)(t,"agentInfo.modules.nodeInfo.tags.versionList",{}),p=(0,h.default)(d,"os",""),m=(0,h.default)(d,"arch",""),y=(0,h.default)(d,"osVersion",""),_=(0,h.default)(d,"timesync",""),E=(0,h.default)(d,"kernelRelease",""),b=(null!==(e=(0,h.default)(o,"systemSoftInfo.softInfo",[]))&&void 0!==e?e:[]).filter((function(e){return"uninstalled"!==e.installationStatus})),S=(0,v.getContainerEngineSofts)(b),O=(0,v.getEdgeSofts)(b);return{name:c,arch:m,alias:u,status:a,nodeIP:l,osType:p,taskList:i,timesync:_,edgeSofts:O,osVersion:y,createTime:n,description:s,versionList:f,kernelVersion:E,agentUpdateTime:r,containerEngineSofts:S,specification:(0,g.default)(d)?"-":(0,v.getNodeSpecification)(d)}}},{key:"fetchList",value:(a=(0,l.default)(r.default.mark((function e(){var t,a,n,o,u,l,c,s,d,f,p,m=this,g=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>0&&void 0!==g[0]?g[0]:{},n=a.silentLoading,o=a.cluster,u=a.limit,l=void 0===u?10:u,c=a.page,s=void 0===c?1:c,d=(0,i.default)(a,["silentLoading","cluster","limit","page"]),!(g.length>1?g[1]:void 0)&&n||(this.list.isLoading=!0),l===1/0||-1===l?(d.limit=-1,d.page=1):(d.limit=l,d.page=s),e.next=6,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:o}),"/").concat(this.module),d);case 6:return f=e.sent,p=(0,h.default)(f,"data.items",[]).map((function(e){return E(E({},m.mapper(e)),{},{cluster:o})})),this.list.update(E({data:p,total:null==f||null===(t=f.data)||void 0===t?void 0:t.totalItems,limit:Number(d.limit),page:Number(d.page),isLoading:!1},this.list.silent?{}:{selectedRowKeys:[]})),e.abrupt("return",p);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fetchDetail",value:(t=(0,l.default)(r.default.mark((function e(t,a){var n,o,i,u,l,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cluster,o=t.name,a&&(this.isLoading=!0),i={limit:10,page:1,nodeName:o},e.next=5,request.get("".concat(this.apiVersion).concat(this.getPath({cluster:n}),"/").concat(this.module),i);case 5:return u=e.sent,l=(0,h.default)(u,"data.items.[0]"),c=E(E({},this.mapper(l)),{},{cluster:n}),this.detail=c,this.isLoading=!1,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"nodeRegister",value:function(e){var t="".concat(this.apiVersion).concat(this.getPath({cluster:e.clusterName}),"/").concat(this.module,"/register");return this.submitting(request.post(t,e))}},{key:"patchNode",value:function(e,t){var a="".concat(this.apiVersion).concat(this.getPath({cluster:e}),"/").concat(this.module,"/tasks");return request.post(a,t)}},{key:"apiVersion",get:function(){return"kapis/ota.edgewize.io/v1alpha1"}}]),o}(n(a(1039)).default),(0,m.default)(u.prototype,"mapper",[y.action],Object.getOwnPropertyDescriptor(u.prototype,"mapper"),u.prototype),(0,m.default)(u.prototype,"fetchList",[y.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchList"),u.prototype),(0,m.default)(u.prototype,"fetchDetail",[y.action],Object.getOwnPropertyDescriptor(u.prototype,"fetchDetail"),u.prototype),(0,m.default)(u.prototype,"nodeRegister",[y.action],Object.getOwnPropertyDescriptor(u.prototype,"nodeRegister"),u.prototype),(0,m.default)(u.prototype,"patchNode",[y.action],Object.getOwnPropertyDescriptor(u.prototype,"patchNode"),u.prototype),u);t.default=S},1999:function(e,t,a){e.exports={header:"_1dtSSEAZZ6i6k8qHu0b9Zr",search:"_2XrdLxtFQDa12evnk4mX-0",actions:"_1R9ZAeZSYt7rpNXuVDVHMt",item:"_1qzHpkk2vTvc2aTCp97SDH",content:"_33_QIBmXr8IIB9kZDh-iCT",head:"_2Lp7QI0d6Hk0ZPaynFR6OC",headIcon:"xGiSZyOA982BtorplFzPQ",headLine:"_2kmHtQw8aGHx9cjLW7PkIs",severity:"_2b1l9tw0lgDBS1X-gStCNg",statusLine:"_1np7kgamHbmPy9mEzmmp3x",target:"_1k_Kp7POmfehKP9YXqwuE3",timeLabel:"_3RliTXiOSiFw3qlc0bho4q",time:"AzpGNicS5AfTk9WmP3d-_",time_white:"X6g4wb8zdviz5_sZQsupB",title:"_1kRMPhDnB-Z0GuSFY9p4bX",desc:"_22v7rZ_BLbmJanDShJs-z5",expanded:"_3AqrQ6m2lP-vU1FIEg_T1k",itemExtra:"_3v1A-2912_P5C1Nilyp9Uf",ms_content:"_2u3T53m-OP2QC-qjtg5wL3",ruleExpr:"YmM1pYCslrfMrE5u-pbXx",label:"gOR7QElm-46YMGNdKs_dG",value:"S7RDhqwsNoRz3CVwBkvN2",itemExtraShow:"_3wcF7y1ifEdCqPkQNmRAd9",status_disabled:"_3E3qiiTY8UPksnZV38Hr7S",status_pending:"Klc2prjxVLU3pQzWurV3l",status_firing:"_1D-ovgKVuvozv-TBLyC_M9",status_inactive:"_3WanQn9TymPniJ7kgpEZkl",info_disabled:"_1WTz8nAyEoZYzNbQIry2GB",info_pending:"_2pZGHT52XFF58kyIUB6H7Y",info_firing:"crQzDWpkF3jIjtlOQzZ3T",info_inactive:"_3C0DHoHNm01q91OiTAlf1P",critical:"_1TNKz_qZT7XJXW6cqyPhra",error:"Ev8-y2tGEFf27TMzwhJKj",footer:"_3n-Mp25-HUWl3E9OQ5VqV9",pageSizeBox:"_2j2lmlWad1y86enW5FnR0S",pagesize:"_3qQlfKSFdQ6OK7tCryq3mI",text:"_2A5oOZLluEyJIkGRbYuod4",gap:"_2dEs2IrRMr7UAj0lBu0gnm",pageSizeMenu:"_1E7zOFq2Uqxq4uCs1tr5F_",pageSizeMenuitem:"_3PASTmHE3QRBPjuyMNlu96"}},5165:function(e,t,a){"use strict";a(15);var n=a(20);a(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(5);var r=n(a(61)),o=a(317),i=n(a(5166)),u=n(a(5168)),l=n(a(5172)),c=n(a(5174)),s=n(a(5177)),d=n(a(5178)),f=n(a(5179)),p=n(a(5181)),m=n(a(5182)),h=n(a(5185)),g=n(a(5189)),y=n(a(5190)),v=n(a(5191)),_=n(a(5192)),E=n(a(5193)),b=n(a(5206)),S=n(a(5207)),O=n(a(5208)),k=n(a(5209)),T=n(a(5211)),C=n(a(5216)),N=n(a(5217)),A=n(a(5261)),R=n(a(5262)),D=n(a(2002)),P="/v2/edgewize/clusters/:cluster",w=[{path:"/v2/edgewize",component:h.default,exact:!0},{path:"/workspaces/:workspace/v2/edgewize",component:h.default,exact:!0},{path:"/v2/edgewize/create",component:R.default,exact:!0},{path:P,component:v.default,routes:[].concat((0,r.default)(N.default),[{component:_.default,routes:[{path:"".concat(P,"/fota"),component:m.default,exact:!0},{path:"".concat(P,"/nodes"),component:k.default,exact:!0},{path:"".concat(P,"/node-groups"),component:c.default,exact:!0},{path:"".concat(P,"/projects"),component:s.default,exact:!0},{path:"".concat(P,"/deployments"),component:S.default,exact:!0},{path:"".concat(P,"/statefulsets"),component:O.default,exact:!0},{path:"".concat(P,"/daemonsets"),component:b.default,exact:!0},{path:"".concat(P,"/jobs"),component:d.default,exact:!0},{path:"".concat(P,"/cronjobs"),component:y.default,exact:!0},{path:"".concat(P,"/pods"),component:f.default,exact:!0},{path:"".concat(P,"/services"),component:g.default,exact:!0},{path:"".concat(P,"/secrets"),component:l.default,exact:!0},{path:"".concat(P,"/configmaps"),component:p.default,exact:!0},{path:"".concat(P,"/resource-usage"),component:E.default},{path:"".concat(P,"/alerts"),component:i.default,exact:!0},{path:"".concat(P,"/rule-group"),component:u.default,exact:!0},{path:"".concat(P,"/base-info"),component:T.default,exact:!0},{path:"".concat(P,"/members"),component:C.default,exact:!0},{path:"".concat(P,"/roles"),component:A.default,exact:!0},{path:"".concat(P,"/edgeippool"),component:D.default,exact:!0},(0,o.getIndexRoute)({path:P,to:"".concat(P,"/fota"),exact:!0}),(0,o.getIndexRoute)({path:"".concat(P,"/workloads"),to:"".concat(P,"/deployments"),exact:!0})]}])}];t.default=w},5166:function(e,a,n){"use strict";var r=n(20),o=n(157);n(12),n(5),n(11),n(29),n(6),n(86),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(188),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(29),n(6),n(86),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(188),n(7);var i,u=r(n(315)),l=r(n(31)),c=r(n(36)),s=r(n(37)),d=r(n(55)),f=r(n(56)),p=r(n(51)),m=r(n(0)),h=r(n(3)),g=r(n(451)),y=r(n(26)),v=n(433),_=r(n(796)),E=r(n(792)),b=r(n(795)),S=r(n(790)),O=o(n(793)),k=r(n(1151)),T=n(72),C=n(878),N=n(52),A=n(832),R=r(n(1996)),D=r(n(5167));function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var x=(0,O.default)({store:new R.default,module:"alerts",name:"ALERTING_MESSAGE"})(i=function(e){(0,d.default)(n,e);var a=I(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=function(t){e.props.store.fetchList(w(w(w({},e.props.match.params),t),{},{sortBy:"activeAt",type:e.state.type}))},e.getResourceType=function(e){var a=(0,g.default)(e);return t("ALERT_TYPE",{type:t(a)})},e.getColumns=function(){var a=e.props,n=a.getFilteredValue,r=a.getSortOrder;return[{title:t("MESSAGE"),dataIndex:"name",render:function(e,t){return m.default.createElement(S.default,{icon:"loudspeaker",title:(0,y.default)(t,"annotations.summary"),description:(0,y.default)(t,"annotations.message")||(0,y.default)(t,"annotations.description","-")})}},{title:t("STATUS"),dataIndex:"state",filters:e.getStatus(),filteredValue:n("state"),isHideable:!0,search:!0,width:"12%",render:function(e){return m.default.createElement(b.default,{type:e,name:t("ALERT_RULE_".concat(e.toUpperCase()),{defaultValue:e})})}},{title:t("SEVERITY"),dataIndex:"labels.severity",filters:e.getAlertingTypes(),filteredValue:n("labels.severity"),isHideable:!0,search:!0,width:"12%",render:function(e){var a=k.default.find((function(t){return t.value===e}));return a?m.default.createElement("span",{style:{backgroundColor:a.bgColor,color:a.color,fontWeight:600,padding:"0px 4px"}},t(a.label)):"-"}},{title:t("ALERTING_POLICY"),dataIndex:"ruleName",isHideable:!0,width:"12%",render:function(t,a){var n=(0,y.default)(a,"labels.rule_group");return m.default.createElement(v.Link,{to:"builtin"===e.state.type?"".concat(e.getPrefix(),"/alert-rules/builtin/").concat(n):"".concat(e.getPrefix(),"/alert-rules/").concat(n)},n)}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"16%",render:function(a){var n=(0,C.getAlertingResource)(a),r=n.module,o=n.name,i=n.namespace;return r?"hpas"===r?m.default.createElement("span",null,t(T.MODULE_KIND_MAP[r]),": ",o):m.default.createElement(v.Link,{to:"".concat(e.getPrefix({namespace:i}),"/").concat(r,"/").concat(o)},t(T.MODULE_KIND_MAP[r]),": ",o):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,sorter:!0,sortOrder:r("activeAt"),render:function(e){return(0,N.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t})}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,n=this.props.match.params,r=n.cluster,o=n.namespace,i=n.workspace;return t=t||r,a=a||o,"/v2/edgewize".concat(i?"/".concat(i):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"getTableProps",value:function(){return{tableActions:w(w({},this.props.tableProps.tableActions),{},{selectActions:[]}),emptyProps:{desc:t("ALERTING_MESSAGE_EMPTY_DESC")}}}},{key:"getAlertingTypes",value:function(){return A.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"getStatus",value:function(){return["pending","firing"].map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,n=e.tableProps;return m.default.createElement(O.ListPage,(0,u.default)({},this.props,{getData:this.getData,noWatch:!0}),m.default.createElement(E.default,(0,u.default)({},a,{tips:this.tips,tabs:this.tabs,icon:"loudspeaker",title:t("ALERTING_MESSAGE_PL"),description:t("ALERT_MESSAGE_DESC"),className:(0,h.default)(D.default.tab_button,a.className)})),m.default.createElement(_.default,(0,u.default)({},n,this.getTableProps(),{rowKey:"id",itemActions:[],columns:this.getColumns()})))}},{key:"tabs",get:function(){var e=this.props.match.params.namespace;globals.app.hasKSModule("whizard"),(0,y.default)(globals,"ksConfig.multicluster",!1);if(e)return{};var a={value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("ALERTS_FROM_CUSTOM_POLICIES"),count:this.props.store.ruleCount}]};(0,N.checkComponentAuthorized)({componentName:"whizard",componentConstraints:(0,y.default)(globals,"licenseInfo.componentConstraints",[])});return a}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_TRIGGER_AN_ALARM_Q"),description:t("REQUESTS_FOR_TRIGGER_AN_ALARM_A")}]}}]),n}(m.default.Component))||i;a.default=x},5167:function(e,t,a){e.exports={tab_button:"_3TwronK3Y8Qo-B879UAiYJ"}},5168:function(e,a,n){"use strict";(function(e){var r=n(20),o=n(157);n(12),n(134),n(5),n(187),n(11),n(6),n(84),n(86),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(188),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(187),n(11),n(6),n(84),n(86),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(85),n(62),n(188),n(7);var i=r(n(61)),u=r(n(315)),l=r(n(43)),c=r(n(31)),s=r(n(58));n(41);var d,f=r(n(44)),p=r(n(36)),m=r(n(37)),h=r(n(55)),g=r(n(56)),y=r(n(51)),v=r(n(0)),_=n(14),E=r(n(26)),b=r(n(3)),S=r(n(788)),O=r(n(795)),k=r(n(792)),T=o(n(793)),C=r(n(796)),N=n(878),A=r(n(1997)),R=n(832),D=n(52),P=r(n(5169)),w=r(n(5171));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,c.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,y.default)(e);if(t){var r=(0,y.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,g.default)(this,a)}}var L=(0,T.default)({store:new A.default,module:"rules",authKey:"alert-rules",name:"ALERTING_POLICY"})(d=function(a){(0,h.default)(r,a);var n=M(r);function r(){var e;(0,p.default)(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).state={type:location.search.indexOf("type=builtin")>0?"builtin":"custom"},e.handleTabChange=function(t){e.setState({type:t},(function(){e.props.store.list.reset(),e.getData()}))},e.getData=(0,f.default)(l.default.mark((function t(){var a,n,r,o,i=arguments;return l.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},n=a.silent,r=(0,s.default)(a,["silent"]),o=e.props.store,n&&(o.list.silent=!0),t.next=5,o.fetchList(x(x(x({},e.props.match.params),r),{},{type:e.state.type}));case 5:o.list.silent=!1;case 6:case"end":return t.stop()}}),t)}))),e.getColumns=function(){var a=e.props.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",search:!0,render:function(t,a){return v.default.createElement(S.default,{avatar:"/assets/bell_gear_duotone.svg",title:(0,D.getDisplayName)(a),desc:a.description,className:w.default["table-icon"],to:"builtin"===e.state.type?"".concat(e.props.match.url,"/builtin/").concat(a.name):"".concat(e.props.match.url,"/").concat(t)})}},{title:t("POLICY_STATUS"),dataIndex:"enable",filters:e.getEnableFilter(),filteredValue:a("enable"),isHideable:!0,search:!0,width:"16%",render:function(e,a){return v.default.createElement(O.default,{className:w.default.status_icon,type:a.enabled&&JSON.parse(a.enabled)?"active":"disabled",name:a.enabled&&JSON.parse(a.enabled)?t("ENABLED"):t("DISABLED")})}},{title:t("RULE_STATUS"),dataIndex:"state",search:!0,filters:e.getStatus(),isHideable:!0,width:"16%",render:function(e,t){return v.default.createElement(P.default,{rulesStats:t.rulesStats})}},{title:t("TIME_SPENT"),dataIndex:"evaluationTime",isHideable:!0,width:"12%",render:function(e){return v.default.createElement("span",null,"-"!==e?t("TIME_S",{num:e}):e)}},{title:t("RECENT_DETECT_TIME"),dataIndex:"lastEvaluation",isHideable:!0,width:"15.8%",render:function(e,t){var a=(0,E.default)(t._originDataWithStatus,"status.lastEvaluation");return v.default.createElement("span",null,a?(0,D.getLocalTime)(a).format("YYYY-MM-DD HH:mm:ss"):"-")}}]},e.showCreate=function(){var a=e.props,n=a.match,r=a.routing,o=a.module;return e.props.trigger("alerting.policy.create",{module:o,isEdgeWize:!0,cluster:n.params.cluster,namespace:n.params.namespace,title:t("CREATE_ALERTING_POLICY"),success:r.query})},e}return(0,m.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.cluster;!e.namespace&&this.props.store.fetchCount({cluster:t}),localStorage.removeItem("alert-policy-detail-referrer")}},{key:"getStatus",value:function(){return N.ALERTING_STATUS.map((function(e){return{text:t("ALERT_RULE_".concat(e.toUpperCase())),value:e}}))}},{key:"getEnableFilter",value:function(){return[{text:t("ENABLED"),value:"true"},{text:t("DISABLED"),value:"false"}]}},{key:"getAlertingTypes",value:function(){return R.SEVERITY_LEVEL.map((function(e){return{text:t(e.label),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,n=this.showCreate,r=this.tableActions;return"builtin"===this.state.type&&(r.selectActions=r.selectActions.filter((function(e){return"delete"!==e.action})).concat(this.resetPolicy),n=null),v.default.createElement(T.ListPage,(0,u.default)({},this.props,{getData:this.getData,noWatch:!0}),v.default.createElement(k.default,(0,u.default)({},t,{icon:function(){return v.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"})},tips:this.tips,tabs:this.tabs,className:(0,b.default)(w.default.tab_button,t.className)})),v.default.createElement(C.default,(0,u.default)({},a,{rowKey:"name",itemActions:this.itemActions,columns:this.getColumns(),tableActions:r,onCreate:n})))}},{key:"tabs",get:function(){var e=this.props.match.params.namespace;globals.app.hasKSModule("whizard"),(0,E.default)(globals,"ksConfig.multicluster",!1);if(e)return{};var a={value:this.state.type,onChange:this.handleTabChange,options:[{value:"custom",label:t("CUSTOM_POLICIES"),count:this.props.store.ruleCount}]};(0,D.checkComponentAuthorized)({componentName:"whizard",componentConstraints:(0,E.default)(globals,"licenseInfo.componentConstraints",[])});return a}},{key:"tips",get:function(){return[{title:t("REQUESTS_FOR_PUSH_AN_ALARM_Q"),description:t("REQUESTS_FOR_PUSH_AN_ALARM_A")}]}},{key:"itemActions",get:function(){var a=this.props,n=a.trigger,r=a.routing,o=a.match,i=a.name,u=this.state.type,l=[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(a){n("alerting.baseinfo.edit",{type:u,detail:a,module:e,cluster:o.params.cluster,namespace:o.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:r.query})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return n("alerting.yaml.edit",{type:u,detail:e,cluster:o.params.cluster,namespace:o.params.namespace,title:t("EDIT_ALERTING_POLICY"),success:r.query})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),action:"edit",onClick:function(e){n("alerting.rule.edit",{type:u,detail:e,isEdgeWize:!0,cluster:o.params.cluster,namespace:o.params.namespace,success:r.query})}},{key:"disablePolicy",icon:function(e){return JSON.parse(e.enabled)?"stop":"start"},text:function(e){return JSON.parse(e.enabled)?t("DISABLE"):t("ENABLE")},action:"edit",onClick:function(e){var a=JSON.parse(e.enabled);n(a?"alerting.rule.update":"enable.alerting.rule",{type:u,detail:e,cluster:o.params.cluster,namespace:o.params.namespace,resourceName:i,success:r.query,title:a?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY"),enabled:a})}}];return"builtin"===u?l.push(this.resetPolicy):l.push({key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return n("alerting.rule.delete",{type:u,name:i,cluster:o.params.cluster,namespace:o.params.namespace,detail:e,success:r.query})}}),l}},{key:"tableActions",get:function(){var e=this.props,a=e.tableProps,n=e.trigger,r=e.name,o=e.store,u=e.match,l=e.routing,c=this.state.type,s=(0,_.toJS)(o.list.data),d=(0,_.toJS)(o.list.selectedRowKeys),f=s.filter((function(e){return d.includes(e.name)})).every((function(e){return!JSON.parse(e.enabled)})),p=s.filter((function(e){return d.includes(e.name)})).every((function(e){return JSON.parse(e.enabled)}));return x(x({},a.tableActions),{},{selectActions:[].concat((0,i.default)(a.tableActions.selectActions),[{key:"enable",text:t("ENABLE"),action:"edit",disabled:p,onClick:function(){n("enable.alerting.rule",{type:c,resourceName:r,cluster:u.params.cluster,namespace:u.params.namespace,title:t("ENABLE_ALERTING_POLICY"),enabled:!1,success:l.query,batchMode:!0})}},{key:"disable",text:t("DISABLE"),action:"edit",disabled:f,onClick:function(){n("alerting.rule.update",{type:c,resourceName:r,cluster:u.params.cluster,namespace:u.params.namespace,enabled:!0,success:l.query,batchMode:!0})}}])})}},{key:"resetPolicy",get:function(){var e=this.props,a=e.match,n=e.trigger,r=e.routing,o=this.state.type;return{key:"reset",icon:"restart",text:t("RESET"),action:"edit",onClick:function(e){return n("alerting.rule.reset",{type:o,cluster:a.params.cluster,detail:e,success:r.query})}}}}]),r}(v.default.Component))||d;a.default=L}).call(this,n(138)(e))},5169:function(e,a,n){"use strict";n(15);var r=n(20);n(18),n(98),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(n(31)),i=r(n(96));n(18),n(98);var u=r(n(0)),l=n(186),c=r(n(3)),s=r(n(5170)),d=function(e){var a=e.rulesStats,n={pending:t("ALERT_RULE_PENDING"),inactive:t("ALERT_RULE_INACTIVE"),firing:t("ALERT_RULE_FIRING"),disabled:t("DISABLED")},r=Object.entries(a).map((function(e){var t=(0,i.default)(e,2),a=t[0],r=t[1];return{label:n[a],type:a,value:r}}));return u.default.createElement(l.Tooltip,{content:u.default.createElement(u.default.Fragment,null,r.map((function(e,t){return u.default.createElement("div",{key:t,className:(0,c.default)(s.default.tipContent,[s.default[e.type]],(0,o.default)({},s.default.disabled,0===e.value))},u.default.createElement("span",null,e.label),u.default.createElement("span",null,e.value))}))),placement:"right"},u.default.createElement("ul",{className:s.default.statusBox},r.map((function(e,t){return u.default.createElement("li",{key:t,className:(0,c.default)([s.default["li-".concat(e.type)]],(0,o.default)({},s.default.iconDisabled,0===e.value))},e.value)}))))};a.default=d},5170:function(e,t,a){e.exports={statusBox:"_1ifBF6uR3piHmnGKy2KeOF",tipContent:"_3l80VIQfA1pKw9v6EiYkzK","li-inactive":"_3ecrJy4W7YhbEEsiLO5ENs","li-pending":"_3_PsZRK47V8kEpDYsaJyvu","li-firing":"_2ihayyQZ2h2THkmoV93dw7","li-disabled":"_3O2bP5_W6mtZSuiIRB9ogv",pending:"Qododr5F_fjRDdxajUxgI",inactive:"_3B_vcVe6pcr-JTxv5Kbq9R",firing:"_2RlAl_U2bFzsRhmPwSoevW",disabled:"_1bpqcIWHC4pCdP3mpABoYm",iconDisabled:"_1HhVa4_F79hgktZOZgAAlA"}},5171:function(e,t,a){e.exports={wrapper:"_3zs_CJyIWC71XuROA_HGK_",header:"_1Wy5h4COvZNxR87_drxa2v",banner:"_3T4NcsqU688GRDEPiT9neu",toolbar:"_3skWeeDoFMfgVdcHEuZE20",keyword:"_3Zc1VKV1bygx_F9RC2WrDN",loading:"_2LSD5jajUtejwRMR0ZNi-j",bottomLine:"_1fR9vfeSt10x5s8i0KPflb","table-icon":"_2nbD58szANtmvukQz-QYk6",status_icon:"_1PC_QEU_4OzIdAGjMHG3oe",tab_button:"_3TpcGtc6krQu0FH_SROs9a"}},5172:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(16),n(10),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(42),n(16),n(10),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=r(n(788)),h=r(n(792)),g=n(793),y=r(n(810)),v=r(n(933)),_=n(52),E=n(72),b=r(n(5173));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var O=(0,g.withClusterList)({store:new v.default,module:"secrets",name:"SECRET",rowKey:"uid"})(o=function(e){(0,c.default)(n,e);var a=S(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getDefaultLabel=function(e,a){return a.isDefault?f.default.createElement("div",{className:b.default.titleRow},f.default.createElement("span",{className:b.default.title},e),f.default.createElement("span",{className:b.default.tag},t("DEFAULT_IMAGE_REGISTRY"))):e},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(t,a){return f.default.createElement(m.default,{icon:E.ICON_TYPES[r],iconSize:40,title:e.getDefaultLabel((0,_.getDisplayName)(a),a),desc:a.description||"-",to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(a.namespace,"/").concat(r,"/").concat(t),isMultiCluster:a.isFedManaged})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"16%",render:function(e){return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(e)},e)}},{title:t("TYPE"),dataIndex:"type",isHideable:!0,width:"20%",render:function(e){return E.SECRET_TYPES[e]?t(E.SECRET_TYPES[e]):e}},{title:t("SECRET_FIELD_COUNT"),dataIndex:"data",isHideable:!0,width:"16%",render:function(e){return Object.keys(e).length}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showAction=function(e){return!e.isFedManaged},e.showSetDefault=function(e){return"kubernetes.io/dockerconfigjson"===e.type&&!e.isDefault},e.showCreate=function(){var t=e.props,a=t.match,n=t.module,r=t.getData;return e.props.trigger("secret.create",{module:n,isEdgeWize:!0,cluster:a.params.cluster,namespace:a.params.namespace,success:function(){return r()}})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(g.ListPage,this.props,f.default.createElement(h.default,a),f.default.createElement(y.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,n=e.name,r=e.getData;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editSecret",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){a("secret.edit",{detail:e,success:r})}},{key:"default",icon:"star",text:t("SET_AS_DEFAULT"),action:"edit",show:this.showSetDefault,onClick:function(e){a("secret.default",{detail:e,success:r})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){a("resource.delete",{type:n,detail:e,success:r})}}]}}]),n}(f.default.Component))||o;a.default=O},5173:function(e,t,a){e.exports={baseTag:"_1VAV0yE0hgdMVOq3frEtjQ",titleRow:"_3KhtUR9Ts-nxsvVZ6_n_1E",tag:"xMZQrJxLLUMgMdRJFfe5A",title:"_1YS-xFOXtm7vAzsI2uj_aP"}},5174:function(e,a,n){"use strict";var r=n(20);n(12),n(5),n(11),n(6),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(136),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(6),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,i=r(n(315)),u=r(n(31)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=r(n(26)),h=r(n(449)),g=r(n(3)),y=r(n(792)),v=n(186),_=r(n(788)),E=r(n(796)),b=n(52),S=n(793),O=r(n(852)),k=r(n(953)),T=n(5175),C=r(n(1320));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var D=(0,S.withClusterList)({store:new O.default,module:"node-groups",name:"NODE_GROUP",authKey:"nodegroups",rowKey:"uid",skipAuth:!0})(o=function(e){(0,s.default)(n,e);var a=R(n);function n(e){var r;return(0,l.default)(this,n),(r=a.call(this,e)).nodeTreeStore=new k.default,r.handleTabChange=function(e){var t=r.props.match.params.cluster;r.setState({tab:e}),r.props.routing.push("/v2/edgewize/clusters/".concat(t,"/node-groups"))},r.getColumns=function(){var e=r.props,a=e.getSortOrder,n=e.location,o=r.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sortOrder:a("name"),render:function(e,t){var a=t.metadata,r=null==a?void 0:a.annotations["kubesphere.io/alias-name"],i=(null==a?void 0:a.annotations["kubesphere.io/description"])||"-",u=r?"".concat(r,"（").concat(e,"）"):void 0;return p.default.createElement(_.default,{to:"Terminating"===t.status?null:"/node-groups/clusters/".concat(o,"/").concat(e,"/nodes?path=").concat(n.pathname),avatar:"/assets/disk_group.svg",iconSize:40,isMultiCluster:t.isFedHostNamespace,desc:i,title:u||e})}},{title:t("NODE_COUNT"),dataIndex:"count",isHideable:!0,width:"12.5%",render:function(e,t){return(0,m.default)(t,'_originData.metadata.labels["apps.edgewize.io/nodes-count"]')}},{title:t("PROJECT_COUNT"),dataIndex:"project",isHideable:!0,width:"12.5%",render:function(e,t){return(0,m.default)(t,'_originData.metadata.labels["apps.edgewize.io/namespaces-count"]')}},{title:t("NODE_GROUP"),dataIndex:"group",isHideable:!0,width:"12.5%",render:function(e,t){var a=((null==t?void 0:t.metadata)||{}).annotations||{},n=a["nodetree.kubesphere.io/path"],r=void 0===n?"":n,o=a["nodetree.kubesphere.io/alias-path"],i=void 0===o?"":o;if(r){var u=r.split("/"),l=i.split("/");u.shift(),l.shift();var c=p.default.createElement("div",{className:C.default["node-tooltip"]},u.map((function(e,t){return p.default.createElement("div",{key:t,className:(0,g.default)(C.default["node-tooltip-item"],t===u.length-1&&C.default["node-tooltip-active"]),style:{marginLeft:8*t}},t>0&&p.default.createElement("span",null,">"," "),p.default.createElement("span",null,e),l[t]&&p.default.createElement("span",null,"（",l[t],"）"))})));return p.default.createElement(v.Tooltip,{content:c,placement:"bottom"},p.default.createElement("span",null,p.default.createElement("span",null,"".concat((0,h.default)(u))),(0,h.default)(l)&&p.default.createElement("span",null,"（","".concat((0,h.default)(l)),"）")))}return"-"}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:"17.8%",render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},r.showCreate=function(){r.props.trigger("node.group.create",A(A({store:r.nodeTreeStore,module:r.props.module},r.props.match.params),{},{success:function(){return r.props.getData()}}))},r.state={tab:"list"},r}return(0,c.default)(n,[{key:"renderContent",value:function(){if("tree"===this.state.tab){var e=this.props.match.params.cluster;return p.default.createElement(T.NodeTree,(0,i.default)({cluster:e},this.props))}var t=this.props.tableProps;return p.default.createElement(E.default,(0,i.default)({},t,{columns:this.getColumns(),itemActions:this.itemActions,onCreate:this.showCreate,searchType:"name"}))}},{key:"render",value:function(){var e=this.props.bannerProps;return p.default.createElement(S.ListPage,(0,i.default)({},this.props,{noWatch:!0}),p.default.createElement(y.default,(0,i.default)({},e,{icon:"node-group",tabs:this.tabs})),this.renderContent())}},{key:"tabs",get:function(){return{value:this.state.tab,onChange:this.handleTabChange,options:[{value:"list",label:t("NODE_GROUP_LIST")},{value:"tree",label:t("NODE_GROUP_TREE")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,n=e.name,r=e.getData,o=e.match;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("node.group.baseinfo.edit",A(A({detail:e},o.params),{},{success:r}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){a("resource.delete",{type:n,detail:e,success:r})}}]}}]),n}(p.default.Component))||o;a.default=D},5175:function(e,a,n){"use strict";var r=n(157),o=n(20);n(12),n(134),n(5),n(11),n(6),n(18),n(16),n(9),n(13),n(10),n(24),n(62),n(188),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.NodeTree=A,a.default=void 0;var i=o(n(315)),u=o(n(43));n(41);var l=o(n(31)),c=o(n(44)),s=o(n(96));n(12),n(134),n(5),n(11),n(6),n(18),n(28),n(859),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(24),n(62),n(188),n(7);var d=r(n(0)),f=o(n(26)),p=o(n(63)),m=n(433),h=o(n(3)),g=n(186),y=o(n(240)),v=o(n(1176)),_=o(n(953)),E=o(n(1318)),b=n(5176),S=o(n(1584)),O=o(n(1320));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=new _.default,N=new v.default;function A(e){var a,n,r=(0,d.createRef)(),o=(0,m.useLocation)(),l=(0,m.useParams)(),v=l.cluster,_=(0,d.useState)([]),k=(0,s.default)(_,2),A=k[0],R=k[1],D=(0,d.useState)([]),P=(0,s.default)(D,2),w=P[0],I=P[1],x=(0,d.useState)({page:1,searchValue:""}),M=(0,s.default)(x,2),L=M[0],j=M[1],U=(0,d.useState)(!0),z=(0,s.default)(U,2),G=z[0],Y=z[1],F=(0,d.useState)({}),H=(0,s.default)(F,2),V=H[0],B=H[1];function W(){return K.apply(this,arguments)}function K(){return(K=(0,c.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getAllNodeTree(v);case 2:t=e.sent,R(t),!(null==V?void 0:V.metadata)&&t.length&&B(t[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=(0,c.default)(u.default.mark((function a(n){return u.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.trigger("resource.delete",{type:"NODE_GROUP_TREE",detail:T(T({},n),{},{name:n.metadata.name}),onOk:function(){return C.deleteNodeTree(v,n.key)},success:function(){W(),y.default.success({content:t("DELETED_SUCCESSFULLY")})}});case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function q(){return(q=(0,c.default)(u.default.mark((function t(a){return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.trigger("node.group.tree.baseinfo.edit",T(T({detail:T(T({name:a.key},a),{},{metadata:a.metadata,spec:{alias:(0,f.default)(a,'metadata.annotations["kubesphere.io/alias-name"]'),description:(0,f.default)(a,'metadata.annotations["kubesphere.io/description"]')}})},e.match.params),{},{onOk:function(){var e=(0,c.default)(u.default.mark((function e(t){var n,r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getNodeTree(v,a.key);case 2:return n=e.sent,r=n.metadata,e.abrupt("return",C.updateNodeTree(T(T({cluster:v,nodetree:a.key},n),{},{kind:"NodeTree",apiVersion:"infra.kubesphere.io/v1alpha1",metadata:T(T({},r),{},{annotations:T(T({},r.annotations),{},{"kubesphere.io/alias-name":t.alias,"kubesphere.io/description":t.description})})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),success:W}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,d.useEffect)((function(){if(G){var e=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null==t||t.forEach((function(t){var n,r;(a.push(t.metadata.name),null===(n=t.spec)||void 0===n?void 0:n.children)&&e(null===(r=t.spec)||void 0===r?void 0:r.children,a)})),a}(A);I(e)}else I([])}),[G,A]),(0,d.useEffect)((function(){!function(){(null==this?void 0:this.props)&&(this.props=e)}(),W()}),[]),d.default.createElement(g.Columns,{className:O.default["node-tree"]},d.default.createElement(g.Column,{className:(0,h.default)(O.default["node-tree-left"],"is-4")},d.default.createElement("div",{className:O.default["node-tree-bg"]},d.default.createElement(g.InputSearch,{className:O.default.search,name:"search",value:L.searchValue,placeholder:t("SEARCH_BY_NAME"),onChange:function(e,t){j({searchValue:t,page:1})},autoComplete:"off"}),d.default.createElement("div",null,d.default.createElement("div",{className:(0,h.default)(O.default["node-group__tree-item"],O.default["node-group__tree-item-margin"])},d.default.createElement("img",{className:O.default.icon,width:20,src:"/assets/disk_group.svg",alt:""}),d.default.createElement("span",{className:O.default["node-group__tree-item-title"],onClick:W},"全部节点组"),d.default.createElement("img",{className:O.default["node-group__tree-item-icon-hover"],name:G?"sort-ascending":"sort-descending",width:20,src:"/assets/".concat(G?"close_all":"expand_all",".svg"),onClick:function(){return Y(!G)},alt:""}),d.default.createElement("span",{className:O.default["node-group__tree-item-add"]},d.default.createElement(g.Icon,{onClick:function(){e.trigger("node.group.create",T(T({store:C,module:e.module},e.match.params),{},{success:function(){W()}}))},className:O.default["node-group__tree-item-icon-hover"],type:"light",name:"add",size:20}))),d.default.createElement(E.default,{treeData:A,expandedKeys:w,onSelect:function(e){B(e),C.setSelectRowKeys([e])},autoExpandParent:G,renderMenu:function(a){var n,r=[d.default.createElement(g.Menu.MenuItem,{key:"edit"},t("EDIT_INFORMATION"))];return(null===(n=a.spec.children)||void 0===n?void 0:n.length)||(r.unshift(d.default.createElement(g.Menu.MenuItem,{key:"move"},t("MOVE_NODE_GROUP_TREE"))),r.push(d.default.createElement(g.Menu.MenuItem,{key:"delete"},t("DELETE")))),d.default.createElement(g.Dropdown,{content:d.default.createElement(g.Menu,{onClick:function(t,n){switch(n){case"delete":!function(e){J.apply(this,arguments)}(a);break;case"move":!function(t){var a;e.trigger("node.group.tree.move",T(T({},e.match.params),{},{onOk:(a=(0,c.default)(u.default.mark((function e(a){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.moveTreeNode({cluster:v,nodetree:t.key,params:[{op:"replace",path:"/spec/parent",value:a}]}));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),required:!1,visible:!0,success:W}))}(a);break;case"edit":!function(e){q.apply(this,arguments)}(a)}}},r.map((function(e){return e})))},d.default.createElement(g.Icon,{name:"more",size:"20"}))},filterName:L.searchValue})))),d.default.createElement(g.Column,{className:O.default["node-tree-right"]},!(0,p.default)(V)&&d.default.createElement(S.default,{handleBindIp:function(){var t;e.trigger("edge.nodegroup.ippool.add",T(T({module:"ippools"},l),{},{group:null===(t=V.metadata)||void 0===t?void 0:t.name,store:N,success:function(e){var t;W(),(null===(t=V.metadata)||void 0===t?void 0:t.annotations)&&(V.metadata.annotations["infra.kubesphere.io/ippool-".concat(e.namespace)]=e.ippool)}}))},cluster:v,detail:V,renderBtn:d.default.createElement(g.Button,null,d.default.createElement(m.Link,{to:"/node-groups/clusters/".concat(v,"/").concat(null==V||null===(a=V.metadata)||void 0===a?void 0:a.name,"/nodes?path=").concat(o.pathname),className:"ellipsis block"},t("管理节点组")))}),d.default.createElement(b.EdgewizeNodeTable,(0,i.default)({ref:r},e,{node:V,cluster:v,itemActions:[{key:"delete",icon:"trash",text:t("UNBOUND_NODE_GROUP"),action:"delete",onClick:(n=(0,c.default)(u.default.mark((function t(a){var n,o;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.checkNodeGroupEdgeNode({cluster:v,nodegroup:V.key,name:a.metadata.name});case 2:if((o=t.sent).metadata.annotations["apps.edgewize.io/drain-nodegroup"]===(null===(n=V.metadata)||void 0===n?void 0:n.name)){t.next=6;break}return y.default.error("无法移出该节点，节点上存在 非系统项目空间的 pod"),t.abrupt("return");case 6:e.trigger("edgeNode.unbound.nodeGroup",{resource:a.metadata.name,params:{cluster:v,nodegroup:V.key,name:a.metadata.name,params:o},store:C,success:function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.getData)||void 0===t||t.call(e)}});case 7:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)})}]}))))}var R=A;a.default=R},5176:function(e,a,n){"use strict";var r=n(157),o=n(20);n(12),n(5),n(11),n(29),n(6),n(18),n(16),n(9),n(13),n(10),n(24),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.EdgewizeNodeTable=void 0,n(12),n(5),n(11),n(29),n(6),n(18),n(28),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(436),n(22),n(24),n(62),n(7);var i=o(n(43)),u=o(n(31));n(41);var l=o(n(315)),c=o(n(44)),s=o(n(96)),d=r(n(0)),f=o(n(26)),p=o(n(63)),m=n(186),h=o(n(796)),g=o(n(788)),y=o(n(795)),v=o(n(790)),_=n(444),E=n(72),b=n(794),S=o(n(954)),O=o(n(953)),k=o(n(1585));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota",gpu_used:"edge_node_gpu_usage",gpu_total:"edge_node_gpu_total",gpu_utilization:"edge_node_gpu_utilization",gpu_memory_usage:"edge_node_gpu_memory_usage",gpu_memory_total:"edge_node_gpu_memory_total",gpu_memory_utilization:"edge_node_gpu_memory_utilization",npu_used:"edge_node_npu_usage",npu_total:"edge_node_npu_total",npu_utilization:"edge_node_npu_utilization",npu_memory_usage:"edge_node_npu_memory_usage",npu_memory_total:"edge_node_npu_memory_total",npu_memory_utilization:"edge_node_npu_memory_utilization"},A=new O.default,R=(0,d.forwardRef)((function(e,a){var n,r=this,o=e.node,u=e.prefix,O=e.getSortOrder,T=e.getFilteredValue,R=e.itemActions,D=void 0===R?[]:R,P=e.tableActions,w=e.cluster,I=new S.default({cluster:w}),x=(0,d.useState)({order:void 0,reverse:void 0}),M=(0,s.default)(x,2),L=(M[0],M[1],(0,d.useState)({data:[],name:"EDGE_NODE",module:"edgenodes",authKey:"nodes",enabledActions:null==e||null===(n=e.tableProps)||void 0===n?void 0:n.enabledActions,rowKey:"metadata.name",tableId:"",isEmptyList:!1,pagination:{page:1,limit:10,total:0}})),j=(0,s.default)(L,2),U=j[0],z=j[1];function G(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,c.default)(i.default.mark((function t(a){var n,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.getTreeNode(C(C(C({},null==e||null===(n=e.match)||void 0===n?void 0:n.params),a),{},{cluster:w,nodetree:null==o?void 0:o.key}));case 2:r=t.sent,z(C(C({},U),{},{data:r.items,pagination:C(C({},U.pagination),{},{data:r.items,total:r.totalItems})}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(e,t){var a={};return t.forEach((function(t){a[t.type]=parseFloat(function(e,t,a){var n=I.data,r=((0,f.default)(n[t],"data.result")||[]).find((function(t){return(0,f.default)(t,"metric.node")===e.name}));return(0,b.getValueByUnit)((0,f.default)(r,"value[1]",0),a)}(e,N[t.type],t.unit))})),a}return(0,d.useEffect)((function(){r&&(r.getData=G,r.props=e),(null==o?void 0:o.key)&&G({})}),[o]),d.default.createElement(h.default,(0,l.default)({ref:a},U,{onFetch:G,onCreate:!(0,p.default)(o)&&function(){return e.trigger("node.bound.node.group",{parentKey:null==o?void 0:o.key,cluster:w,success:G})},itemActions:D,tableActions:P,columns:[{title:t("NAME"),dataIndex:"metadata.name",sorter:!0,sortOrder:null==O?void 0:O("name"),search:!0,render:function(e,t){var a,n=(t||{}).metadata,r=t.ip,o=(t.labels,t.importStatus),i=(null===(a=n.labels)||void 0===a?void 0:a["kubeedge.io/internal-ip"])||r;return d.default.createElement(g.default,{icon:"edge-node",iconSize:40,to:"success"!==o?null:"".concat(u,"/").concat(e),title:e,desc:null!=i?i:"-"})}},{title:t("STATUS"),dataIndex:"status",filters:E.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}})),filteredValue:null==T?void 0:T("status"),isHideable:!0,search:!0,render:function(e,a){var n,r=(0,_.getNodeStatus)(a),o=a.taints;return d.default.createElement("div",{className:k.default.status},d.default.createElement(y.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),!(0,p.default)(o)&&"success"===a.importStatus&&d.default.createElement(m.Tooltip,{content:(n=o,d.default.createElement("div",null,d.default.createElement("div",null,t("TAINTS"),":"),d.default.createElement("div",null,n.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return d.default.createElement("div",{key:t},t)})))))},d.default.createElement("span",{className:k.default.taints},o.length)))}},{title:t("CPU"),key:"cpu",isHideable:!0,render:function(e){var t=F(e,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return d.default.createElement(v.default,{title:d.default.createElement("div",{className:k.default.resource},d.default.createElement("span",null,"".concat(Math.round(100*t.cpu_utilisation),"%")),t.cpu_utilisation>=.9&&d.default.createElement(m.Icon,{name:"exclamation"})),description:"".concat(t.cpu_used,"/").concat(t.cpu_total," Core")})}},{title:t("MEMORY"),key:"memory",isHideable:!0,render:function(e){var t=F(e,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return d.default.createElement(v.default,{title:d.default.createElement("div",{className:k.default.resource},d.default.createElement("span",null,"".concat(Math.round(100*t.memory_utilisation),"%")),t.memory_utilisation>=.9&&d.default.createElement(m.Icon,{name:"exclamation"})),description:"".concat(t.memory_used,"/").concat(t.memory_total," GiB")})}},{title:t("POD_PL"),key:"pods",isHideable:!0,render:function(e){var t=F(e,[{type:"pod_used"},{type:"pod_total"}]),a=t.pod_total?parseFloat(t.pod_used/t.pod_total):0;return d.default.createElement(v.default,{title:"".concat(Math.round(100*a),"%"),description:"".concat(t.pod_used,"/").concat(t.pod_total)})}},{title:t("FROM_NODE_GROUP"),dataIndex:"nodegroup",isHideable:!1,search:!1,render:function(e,t){var a=(t||{}).metadata;return(null==a?void 0:a.labels["apps.edgewize.io/nodegroup"])||""}}],isLoading:null==U?void 0:U.isLoading}))}));a.EdgewizeNodeTable=R;var D=R;a.default=D},5177:function(e,a,n){"use strict";var r=n(20),o=n(157);n(12),n(134),n(5),n(11),n(29),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(29),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(7);var i=r(n(315)),u=r(n(43)),l=r(n(31)),c=r(n(58));n(41);var s,d=r(n(44)),f=r(n(36)),p=r(n(37)),m=r(n(55)),h=r(n(56)),g=r(n(51)),y=r(n(0)),v=r(n(26)),_=r(n(189)),E=r(n(788)),b=r(n(795)),S=r(n(792)),O=r(n(796)),k=o(n(793)),T=n(52),C=n(794),N=r(n(970)),A=r(n(1197)),R=n(1195);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,g.default)(e);if(t){var r=(0,g.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,h.default)(this,a)}}var I=(0,k.default)({store:new N.default,name:"PROJECT",module:"projects"})(s=function(e){(0,m.default)(n,e);var a=w(n);function n(){var e;(0,f.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).monitoringStore=new A.default,e.getData=(0,d.default)(u.default.mark((function t(){var a,n,r,o,i=arguments;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:{},n=a.silent,r=(0,c.default)(a,["silent"]),e.query=r,r.type=r.type||"user",e.type=r.type,o=e.props.store,n&&(o.list.silent=!0),t.next=8,o.fetchList(P(P({},e.props.match.params),r));case 8:o.list.silent=!1;case 9:case"end":return t.stop()}}),t)}))),e.getLastValue=function(t,a){var n=e.monitoringStore.data,r=((0,v.default)(n,"".concat(a,".data.result"))||[]).find((function(e){return(0,v.default)(e,"metric.namespace")===t.name}));return(0,v.default)(r,"value[1]",0)},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.prefix;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(e,t){return y.default.createElement(E.default,{to:"Terminating"===t.status?null:"".concat(r,"/").concat(e),icon:"project",iconSize:40,isMultiCluster:t.isFedHostNamespace,desc:t.description||"-",title:(0,T.getDisplayName)(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,render:function(e){return y.default.createElement(b.default,{type:e,name:t(e.toUpperCase()),flicker:!0})}},{title:t("WORKSPACE"),dataIndex:"workspace",isHideable:!0},{title:t("CPU_USAGE"),key:"namespace_cpu_usage",isHideable:!0,render:function(t){return(0,C.getSuitableValue)(e.getLastValue(t,R.MetricTypes.cpu),"cpu","-")}},{title:t("MEMORY_USAGE"),key:"namespace_memory_usage_wo_cache",isHideable:!0,render:function(t){return(0,C.getSuitableValue)(e.getLastValue(t,R.MetricTypes.memory),"memory","-")}},{title:t("GPU_USAGE"),key:"namespace_gpu_usage",isHideable:!0,render:function(t){return(0,C.getSuitableValue)(e.getLastValue(t,R.MetricTypes.gpu),"gpu","-")}},{title:t("GPU_MEMORY_USAGE"),key:"namespace_gpu_memory_usage",isHideable:!0,render:function(t){return(0,C.getSuitableValue)(e.getLastValue(t,R.MetricTypes.gpu_memory),"memory","-")}},{title:t("POD_PL"),key:"namespace_pod_count",isHideable:!0,render:function(t){return e.getLastValue(t,R.MetricTypes.pod)}}]},e.handleFetch=function(t,a){e.props.routing.query(P(P({},t),{},{type:e.type}),a)},e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/projects?type=").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.showCreate=function(){return e.props.trigger("project.create",P(P({},e.props.match.params),{},{isEdgeWize:!0,success:function(){return e.getData()}}))},e}return(0,p.default)(n,[{key:"render",value:function(){var e=this.props,t=e.bannerProps,a=e.tableProps,n=this.monitoringStore.isLoading,r=(0,T.hideGPUByLicense)(this.getColumns(),this.cluster);return y.default.createElement(k.ListPage,(0,i.default)({},this.props,{getData:this.getData,module:"namespaces"}),y.default.createElement(S.default,(0,i.default)({},t,{tabs:this.tabs})),y.default.createElement(O.default,(0,i.default)({},a,{itemActions:this.itemActions,tableActions:this.tableActions,columns:r,onCreate:"system"===this.type?null:this.showCreate,isLoading:a.isLoading||n,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,n=a.trigger,r=a.routing,o=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:(0,_.default)(e,"workspace"),success:r.query})}},{key:"edit-annotations",icon:"pen",text:t("EDIT_ANNOTATIONS"),action:"manage",show:function(t){return t.workspace!==globals.config.systemWorkspace&&e.showAction(t)},onClick:function(e){return n("resource.annotations.edit",{detail:e})}},{key:"modify",icon:"restart",text:t("ASSIGN_WORKSPACE"),action:"manage",show:function(t){return!t.workspace&&e.showAction(t)},onClick:function(e){return n("project.assignworkspace",{isEdge:!0,detail:e,success:r.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(t){return t.workspace!==globals.config.systemWorkspace&&e.showAction(t)},onClick:function(e){return n("resource.delete",{type:o,resource:e.name,detail:(0,_.default)(e,"workspace"),success:r.query})}}]}},{key:"tabs",get:function(){return{value:this.type||"user",onChange:this.handleTabChange,options:[{value:"user",label:t("USER_PROJECTS")},{value:"system",label:t("SYSTEM_PROJECTS")}]}}},{key:"tableActions",get:function(){return P(P({},this.props.tableProps.tableActions),{},{onFetch:this.handleFetch})}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(y.default.Component))||s;a.default=I},5178:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=r(n(788)),h=r(n(792)),g=n(793),y=r(n(1069)),v=r(n(804)),_=r(n(810)),E=n(52),b=n(434),S=n(72),O=r(n(858));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,g.withClusterList)({store:new O.default("jobs"),module:"jobs",name:"JOB",rowKey:"uid"})(o=function(e){(0,c.default)(n,e);var a=k(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(a){var n=(0,b.getWorkloadStatus)(a,e.props.module),r=n.status,o=n.reason;return o?f.default.createElement(v.default,{status:r,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.getFilteredValue,o=a.module,i=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,a){return f.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:r("status"),isHideable:!0,search:!0,width:"20%",render:function(e,t){return f.default.createElement(y.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(e)},e)}},{title:t("LAST_RUN_TIME"),dataIndex:"updateTime",sorter:!0,sortOrder:n("updateTime"),isHideable:!0,width:"20%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/").concat(t))},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster})},e}return(0,l.default)(n,[{key:"getStatus",value:function(){return S.JOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(g.ListPage,this.props,f.default.createElement(h.default,(0,i.default)({},a,{tabs:this.tabs})),f.default.createElement(_.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,n=e.name,r=e.store;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"rerun",icon:"refresh",text:t("RERUN"),action:"edit",onClick:function(e){return r.rerun(e)}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e})}}]}}]),n}(f.default.Component))||o;a.default=T},5179:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=n(186),h=r(n(838)),g=r(n(792)),y=r(n(936)),v=r(n(804)),_=r(n(810)),E=n(793),b=n(52),S=n(72),O=r(n(858)),k=r(n(5180));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var C=(0,E.withClusterList)({store:new O.default("pods"),module:"pods",name:"POD",rowKey:"uid"})(o=(0,y.default)(["event"])(o=function(e){(0,c.default)(n,e);var a=T(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(a){var n=a.podStatus,r=n.status,o=n.type;return"running"!==o&&"completed"!==o?f.default.createElement(v.default,{status:o,reason:t(r),data:a,type:"pod",onShowEvents:function(){return e.showEvents(a)}}):t(o.toUpperCase())},e.getColumns=function(){var a=e.props.getSortOrder;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:a("name"),search:!0,render:e.renderAvatar},{title:t("STATUS"),dataIndex:"status",filters:e.getPodsStatus(),isHideable:!0,search:!0,with:"5%",render:function(e,a){var n=a.podStatus;return f.default.createElement("span",null,t(n.type.toUpperCase()))}},{title:t("NODE_SI"),dataIndex:"node",isHideable:!0,width:"18%",render:e.renderNode},{title:t("POD_IP_ADDRESS"),dataIndex:"podIp",isHideable:!0,width:"15%"},{title:t("UPDATE_TIME_TCAP"),dataIndex:"startTime",sorter:!0,sortOrder:a("startTime"),isHideable:!0,width:150,render:function(e){return(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showEvents=function(a){e.props.trigger("pod.events",{detail:a,title:f.default.createElement("span",null,f.default.createElement(m.Icon,{name:"event"}),t("VIEW_EVENTS")),isEdgeWize:!0,cluster:e.props.match.params.cluster})},e.renderAvatar=function(t,a){var n=e.props.module,r=e.props.match.params.cluster,o=a.podStatus;return f.default.createElement("div",{className:k.default.avatar},f.default.createElement("div",{className:k.default.icon},f.default.createElement(m.Icon,{name:S.ICON_TYPES[n],size:40}),f.default.createElement(h.default,{className:k.default.indicator,type:o.type,flicker:!0})),f.default.createElement("div",null,f.default.createElement(p.Link,{className:k.default.title,to:"/v2/edgewize/clusters/".concat(r,"/projects/").concat(a.namespace,"/").concat(n,"/").concat(t)},t),f.default.createElement("div",{className:k.default.desc},e.getItemDesc(a))))},e.renderNode=function(a,n){var r=e.props.match.params.cluster,o=n.node,i=n.nodeIp;if(!o)return"-";var u=t("NODE_IP",{node:o,ip:i});return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(r,"/nodes/").concat(o)},u)},e.renderStatus=function(e){return f.default.createElement(Status,{type:e.type,name:t(e.type),flicker:!0})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){localStorage.setItem("pod-detail-referrer",location.pathname)}},{key:"getPodsStatus",value:function(){return S.PODS_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(E.ListPage,this.props,f.default.createElement(g.default,a),f.default.createElement(_.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),hideColumn:["status"],onCreate:null,cluster:t.params.cluster})))}},{key:"itemActions",get:function(){var e=this.props,a=e.getData,n=e.name,r=e.trigger;return[{key:"viewYaml",icon:"eye",text:t("VIEW_YAML"),action:"view",onClick:function(e){return r("resource.yaml.edit",{detail:e,readOnly:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e,success:a})}}]}}]),n}(f.default.Component))||o)||o;a.default=C},5180:function(e,t,a){e.exports={avatar:"_2i6UJDNVIgXRdgTapG2uIi",icon:"_37lp9ofS4-TbsB866X2V2n",indicator:"_2KDKl_VqhcBd3KT-tHwYKF",title:"_2831QQ1BDJfY_qndbjjmTN",desc:"QSoMptjl6fy5W1__JMDVP"}},5181:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(73),n(16),n(10),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(73),n(42),n(16),n(10),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=r(n(788)),h=r(n(792)),g=n(793),y=r(n(810)),v=n(52),_=n(72),E=r(n(1169));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var S=(0,g.withClusterList)({store:new E.default,module:"configmaps",name:"CONFIGMAP",rowKey:"uid"})(o=function(e){(0,c.default)(n,e);var a=b(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),render:function(e,t){return f.default.createElement(m.default,{icon:_.ICON_TYPES[r],iconSize:40,title:(0,v.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(r,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(e)},e)}},{title:t("FIELDS"),dataIndex:"data",isHideable:!0,width:"13%",render:function(e){return Object.keys(e).join(",")}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,v.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showAction=function(e){return!e.isFedManaged},e.showCreate=function(){var t=e.props,a=t.match,n=t.module;return e.props.trigger("configmap.create",{module:n,namespace:a.params.namespace,isEdgeWize:!0,cluster:a.params.cluster})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(g.ListPage,this.props,f.default.createElement(h.default,a),f.default.createElement(y.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps,searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{key:"editConfigMap",icon:"pen",text:t("EDIT_SETTINGS"),action:"edit",show:this.showAction,onClick:function(e){return a("configmap.edit",{detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return a("resource.delete",{type:n,detail:e})}}]}}]),n}(f.default.Component))||o;a.default=S},5182:function(e,a,n){"use strict";var r=n(20);n(12),n(5),n(187),n(11),n(6),n(84),n(73),n(18),n(97),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(64),n(188),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(187),n(11),n(6),n(84),n(73),n(18),n(28),n(97),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(64),n(188),n(7);var o,i=r(n(315)),u=r(n(61)),l=r(n(31)),c=r(n(58)),s=r(n(36)),d=r(n(37)),f=r(n(55)),p=r(n(56)),m=r(n(51)),h=r(n(0)),g=r(n(3)),y=n(14),v=n(239),_=r(n(454)),E=r(n(26)),b=r(n(63)),S=r(n(806)),O=r(n(247)),k=n(186),T=r(n(240)),C=n(791),N=n(794),A=n(983),R=r(n(795)),D=r(n(792)),P=r(n(874)),w=r(n(886)),I=r(n(1998)),x=r(n(5183)),M=r(n(5184));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var z=(0,v.inject)("rootStore")(o=(0,v.observer)(o=(0,C.trigger)(o=function(e){(0,f.default)(n,e);var a=U(n);function n(e){var r;if((0,s.default)(this,n),(r=a.call(this,e)).canDelete=function(e){var t=e.status;return["registerFail","unmanaged"].includes(t)},r.canCancelManaged=function(e){var t=e.status;return["running","warning","unschedulable"].includes(t)},r.canManage=function(e){return"unmanaged"===e.status},r.canEditSoftInfo=function(e){var t=e.status;return!["registering","registerFail"].includes(t)},r.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFirst,a=(0,c.default)(e,["isFirst"]),n=r.store.list,o=n.limit,i=n.page;r.store.fetchList(j(j(j({limit:o,page:i},r.props.match.params),r.state.filters),a),t)},r.handleRegistry=function(){r.trigger("node.edge.register",{cluster:r.cluster,store:r.store,success:r.getData})},r.handleManageNodes=function(){r.setState({isManaging:!r.state.isManaging})},r.changeUnmanagedNodesFilter=function(e){r.setState({filters:e?{status:"unmanaged"}:{}}),r.handleFetch({status:e?"unmanaged":""})},r.handleCardCheckChange=function(e,t){var a,n=null!==(a=r.state.selectedKeys)&&void 0!==a?a:[];r.setState({selectedKeys:e?(0,O.default)([].concat((0,u.default)(n),[t])):n.filter((function(e){return e!==t}))})},r.handleCancelSelect=function(){r.setState({selectedKeys:[],isManaging:!1})},r.handleSelectAll=function(e){if(e)return r.setState({selectedKeys:r.allAllowedNodes.map((function(e){return e.name}))});r.setState({selectedKeys:[]})},r.handleFilterInput=function(e){(0,S.default)(e,r.state.filters)||(r.setState({filters:e}),r.handleFetch(e,!0))},r.clearFilter=function(){r.setState({filters:{}}),r.handleFetch({},!0)},r.handleFetch=function(e){r.getData(e)},r.handleManage=function(){r.selectedNodes.every(r.canManage)?r.trigger("node.batch.manage",{cluster:r.cluster,selectedNodes:r.selectedNodes,success:function(){r.setState({selectedKeys:[]}),r.getData()}}):r.trigger("node.filter.confirm",{title:t("BATCH_ACTION",{action:t("ACCESS_MANAGE")}),okText:t("NEXT_OP",{action:t("ACCESS_MANAGE")}),nodes:r.selectedNodes.filter(r.canManage),nextStep:function(e){r.trigger("node.batch.manage",{cluster:r.cluster,selectedNodes:e,success:function(){r.setState({selectedKeys:[]}),r.getData()}})}})},r.handleDelete=function(){r.selectedNodes.every(r.canDelete)?r.trigger("node.batch.delete",{cluster:r.cluster,type:"ACCESS_NODE",selectedNodes:r.selectedNodes,resource:r.state.selectedKeys.join(", "),success:function(){r.setState({selectedKeys:[]}),r.getData()}}):r.trigger("node.filter.confirm",{title:t("BATCH_ACTION",{action:t("DELETE")}),okText:t("NEXT_OP",{action:t("DELETE")}),nodes:r.selectedNodes.filter(r.canDelete),nextStep:function(e){r.trigger("node.batch.delete",{cluster:r.cluster,type:"ACCESS_NODE",selectedNodes:e,resource:e.map((function(e){return e.name})).join(", "),success:function(){r.setState({selectedKeys:[]}),r.getData()}})}})},r.handleCancelManaged=function(){r.selectedNodes.every(r.canCancelManaged)?r.trigger("node.batch.cancel.managed",{cluster:r.cluster,selectedNodes:r.selectedNodes,success:function(){r.setState({selectedKeys:[]}),r.getData()}}):r.trigger("node.filter.confirm",{title:t("BATCH_ACTION",{action:t("CANCEL_MANAGED")}),okText:t("NEXT_OP",{action:t("CANCEL_MANAGED")}),nodes:r.selectedNodes.filter(r.canCancelManaged),nextStep:function(e){r.trigger("node.batch.cancel.managed",{cluster:r.cluster,selectedNodes:e,success:function(){r.setState({selectedKeys:[]}),r.getData()}})}})},r.handleEditSoftInfo=function(){if(r.selectedNodes.every(r.canEditSoftInfo)){var e=r.selectedNodes[0].versionList;r.trigger("node.batch.softInfo",{cluster:r.cluster,versionList:e,batchMode:!0,formData:{containerEngineSofts:[],edgeSofts:[]},selectedNodes:r.selectedNodes,success:function(){r.setState({selectedKeys:[],isManaging:!1}),r.getData()}})}else r.trigger("node.filter.confirm",{title:t("BATCH_ACTION",{action:t("EDIT_SOFTWARE_INFO")}),okText:t("NEXT_OP",{action:t("EDIT_SOFTWARE_INFO")}),nodes:r.selectedNodes.filter(r.canEditSoftInfo),nextStep:function(e){var t=e[0].versionList;r.trigger("node.batch.softInfo",{cluster:r.cluster,versionList:t,batchMode:!0,formData:{containerEngineSofts:[],edgeSofts:[]},selectedNodes:e,success:function(){r.setState({selectedKeys:[],isManaging:!1}),r.getData()}})}})},r.handleCardLink=function(e){"registering"!==e.status&&r.routing.push("".concat(r.prefix,"/").concat(e.name))},r.batchActions=function(){return h.default.createElement(h.default.Fragment,null,h.default.createElement(k.Checkbox,{checked:r.allAllowedNodes.every((function(e){var t=e.name;return r.state.selectedKeys.includes(t)})),onChange:r.handleSelectAll},h.default.createElement("span",{className:M.default.selectAll},t("SELECT_ALL"))),h.default.createElement(k.Button,{key:"delete",type:"danger",disabled:!r.selectedNodes.some(r.canDelete),onClick:r.handleDelete,"data-test":"table-batch-delete"},t("DELETE")),h.default.createElement(k.Button,{key:"cancel_managed",type:"danger",disabled:!r.selectedNodes.some(r.canCancelManaged),onClick:r.handleCancelManaged,"data-test":"table-cancel-manage"},t("CANCEL_MANAGED")),h.default.createElement(k.Button,{key:"access_manage",disabled:!r.selectedNodes.some(r.canManage),onClick:r.handleManage,"data-test":"table-access-manage"},t("ACCESS_MANAGE")),h.default.createElement(k.Button,{key:"edit_software_info",disabled:!r.selectedNodes.some(r.canEditSoftInfo),onClick:r.handleEditSoftInfo,"data-test":"table-edit-software-info"},t("EDIT_SOFTWARE_INFO")))},r.renderActions=function(){if(r.enabledActions.includes("create"))return h.default.createElement(k.Button,{key:"register",type:"control",onClick:r.handleRegistry,"data-test":"table-register"},t("REGISTER"))},r.renderToolbar=function(){return h.default.createElement(k.Level,{className:M.default.toolbar},h.default.createElement(k.LevelItem,null,h.default.createElement(x.default,{className:M.default.search,columns:r.filterColumns,filters:r.state.filters,onChange:r.handleFilterInput})),h.default.createElement(k.LevelRight,{style:{marginLeft:"12px"}},h.default.createElement(k.Button,{type:"flat",icon:"refresh",onClick:function(){return r.handleFetch(r.state.filters)},"data-test":"table-refresh"}),r.renderActions()))},r.renderBatchActions=function(){var e=r.state.isManaging;return h.default.createElement(k.Level,{style:{marginBottom:"8px"},className:(0,g.default)((0,l.default)({},M.default.batchActions,e))},h.default.createElement(k.LevelLeft,null,e?r.batchActions():h.default.createElement("div",{onClick:r.handleManageNodes,className:M.default.batchBtn},h.default.createElement(k.Icon,{name:"cogwheel"}),t("BATCH_ACCESS_NODE"))),h.default.createElement(k.LevelRight,null,e?h.default.createElement(k.Button,{type:"flat",className:M.default.cancelSelect,onClick:r.handleCancelSelect,"data-test":"table-cancel-select"},t("DESELECT")):h.default.createElement(k.Checkbox,{onChange:r.changeUnmanagedNodesFilter},t("NODE_STATUS_UNMANAGED"))))},r.renderSoftwareAvatar=function(e,a){var n=e.name,r=e.softIcon,o=e.status,u=e.title,l=e.softwares,c=e.edgeSoft;return h.default.createElement(k.Tooltip,{key:"".concat(n,"_").concat(a),className:M.default.statusTip,content:h.default.createElement(h.default.Fragment,null,h.default.createElement("strong",null,t("STATUS_INFORMATION")),l?l.map((function(e){var a=e.status,n=e.title;return h.default.createElement("div",{key:n},h.default.createElement("p",{className:M.default.info},h.default.createElement(k.Icon,(0,A.getSoftStatus)(a)),n),h.default.createElement("p",{className:M.default.statusInfo},t("STATUS_VALUE",{value:t("NODE_SOFT_STATUS_".concat(a.toLocaleUpperCase()))})))})):h.default.createElement(h.default.Fragment,null,h.default.createElement("p",{className:M.default.info},h.default.createElement(k.Icon,(0,A.getSoftStatus)(o)),u),h.default.createElement("p",{className:M.default.statusInfo},t("STATUS_VALUE",{value:t("NODE_SOFT_STATUS_".concat(o.toLocaleUpperCase()))}))))},h.default.createElement("div",{className:M.default.flex},h.default.createElement("div",{className:M.default.software},h.default.createElement(k.Icon,{name:r,size:20}),h.default.createElement(k.Icon,(0,i.default)({size:12,className:M.default.softwareStatus},(0,A.getSoftStatus)(o)))),c&&h.default.createElement("div",{className:M.default.connect})))},r.renderEdgeSofts=function(e){return(0,b.default)(e)?r.renderSoftwareAvatar({name:"edge-soft",title:t("EDGE_SOFT"),softIcon:"turn-dot-delta-duotone",status:"uninstalled"}):e.map((function(e){var a=e.name,n=e.installationStatus;return r.renderSoftwareAvatar({name:a,title:t("SOFT",{value:a}),softIcon:(0,A.getSoftIconName)(a),status:n,edgeSoft:!0})}))},r.renderContainerEngineSofts=function(e){if((0,b.default)(e))return r.renderSoftwareAvatar({key:"container-engine",title:t("CONTAINER_ENGINE"),softIcon:"turn-dot-duotone",status:"uninstalled"});if(1===e.length){var a=e[0],n=a.name,o=a.installationStatus;return r.renderSoftwareAvatar({name:n,title:t("SOFT",{value:n}),softIcon:(0,A.getSoftIconName)(n),status:o})}return r.renderSoftwareAvatar({key:"container-engine",title:t("CONTAINER_ENGINE"),softIcon:"turn-dot-duotone",status:"installed",softwares:e.map((function(e){var a=e.name,n=e.installationStatus;return{name:a,title:t("SOFT",{value:a}),softIcon:(0,A.getSoftIconName)(a),status:n}}))})},r.renderNoMatchDataTips=function(){return h.default.createElement("div",{className:M.default.emptyText},h.default.createElement("span",{className:M.default.emptyTipIcon},h.default.createElement(k.Icon,{name:"exclamation",size:48})),h.default.createElement("div",null,t("NO_MATCHING_RESULT_FOUND")),h.default.createElement("p",null,t("YOU_CAN_TRY_TO"),h.default.createElement("span",{className:M.default.action,onClick:function(){return r.handleFetch(r.state.filters,!0)},"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),h.default.createElement("span",{className:M.default.action,onClick:r.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS"))))},r.renderNodeCards=function(){var e=r.store.list,a=e.isLoading,n=e.data;return a||(0,b.default)(n)?h.default.createElement("div",{className:M.default.emptyText},r.renderNoMatchDataTips()):h.default.createElement("div",{className:M.default.nodeCards},(0,y.toJS)(n).map((function(e,a){var n=e.name,o=e.status,i=e.nodeIP,u=e.edgeSofts,c=e.containerEngineSofts,s="registering"===o;return h.default.createElement("div",{key:"".concat(n,"_").concat(a),className:(0,g.default)(M.default.card,(0,l.default)({},M.default.notAllowed,s))},h.default.createElement("div",{className:M.default.operators},h.default.createElement("div",{className:M.default.avatar},h.default.createElement(k.Icon,{name:"edge-node",size:40}),r.state.isManaging&&h.default.createElement(k.Checkbox,{className:M.default.checkBox,checked:r.state.selectedKeys.includes(n),disabled:r.enabledActions,onChange:function(e){r.handleCardCheckChange(e,n)}})),!s&&r.renderMoreMenu(e)),h.default.createElement("div",{className:(0,g.default)(M.default.title,(0,l.default)({},M.default.notAllowed,s)),onClick:function(){return r.handleCardLink(e)}},(0,A.getAccessNodeDisplayName)(e)),h.default.createElement("div",{className:M.default.desc},i),h.default.createElement(R.default,{className:M.default.status,type:o,name:t("NODE_STATUS_".concat(o.toLocaleUpperCase()))}),h.default.createElement("div",{className:M.default.softwares},r.renderContainerEngineSofts(c),h.default.createElement("div",{className:M.default.edgeSofts},r.renderEdgeSofts(u))))})))},r.getItemActions=function(e){var a=e.status;if("registering"===a)return[];if("registerFail"===a)return[{key:"reRegister",icon:"login-left-duotone",text:t("RE_REGISTER"),action:"edit",onClick:function(e){r.trigger("node.edge.register",{cluster:r.cluster,detail:e,title:t("RE_REGISTER"),reRegister:!0,success:r.getData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){r.trigger("resource.delete",{type:"ACCESS_NODE",detail:e,resource:e.name,onOk:function(){var t=[{nodeName:e.name,taskName:"del_node"}];return r.store.patchNode(r.cluster,t)},success:function(){r.setState({selectedKeys:[]}),T.default.success(t("DELETED_SUCCESSFULLY")),r.getData()}})}}];var n=[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:"registerFail"!==a,onClick:function(e){return r.trigger("node.baseinfo.edit",{detail:e,success:r.getData})}},{key:"editSoftwareInfo",icon:"pen",text:t("EDIT_SOFTWARE_INFO"),action:"edit",show:["registerFail","unmanaged"].includes(a),onClick:function(e){var t=e.name,a=e.edgeSofts,n=e.versionList,o=e.containerEngineSofts;r.trigger("node.softInfo",{cluster:r.cluster,nodeName:t,versionList:n,formData:{containerEngineSofts:o,edgeSofts:a},success:r.getData})}},{key:"syncTime",icon:"loading-circle-duotone",text:t("SYNC_TIME"),action:"edit",onClick:function(e){return r.trigger("node.sync.time",{detail:e,success:r.getData})}}];return"unmanaged"===a?n.concat([{key:"manage",icon:"download-box-2-duotone",text:t("ACCESS_MANAGE"),action:"edit",onClick:function(e){return r.trigger("node.edge.manage",{detail:e,success:r.getData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){r.trigger("resource.delete",{type:"ACCESS_NODE",detail:e,resource:e.name,onOk:function(){var t=[{nodeName:e.name,taskName:"del_node"}];return r.store.patchNode(r.cluster,t)},success:function(){r.setState({selectedKeys:[]}),T.default.success(t("DELETED_SUCCESSFULLY")),r.getData()}})}}]):n.concat([{key:"cancelManage",icon:"trash",text:t("CANCEL_MANAGED"),action:"delete",onClick:function(e){return r.trigger("resource.delete",{title:t("CANCEL_MANAGED"),type:"ACCESS_NODE",detail:e,resource:e.name,onOk:function(){var t=[{nodeName:e.name,taskName:"cancel_managed"}];return r.store.patchNode(r.cluster,t)},success:function(){T.default.success({content:t("CANCEL_MANAGED_SUCCESSFULLY")}),r.getData}})}}])},r.renderItemActions=function(e){var t=r.getItemActions(e).filter((function(e){return r.enabledActions.includes(e.action)}));return(0,b.default)(t)?null:t.map((function(t,a){var n=t.key,r=t.text,o=t.icon,i=t.onClick;return h.default.createElement("div",{key:"".concat(n,"_").concat(a),onClick:function(){return null==i?void 0:i(e)},className:M.default.menuItem},h.default.createElement(k.Icon,{name:o}),h.default.createElement("span",null,r))}))},r.renderMoreMenu=function(e){var t=r.renderItemActions(e);return(0,b.default)(r.enabledActions)||(0,b.default)(t)?null:h.default.createElement(k.Dropdown,{placement:"bottomRight",modifiers:{preventOverflow:{boundariesElement:"viewport"}},content:h.default.createElement("div",{className:M.default.menu},t)},h.default.createElement(k.Button,{type:"flat",className:M.default.more},h.default.createElement(k.Icon,{name:"more"})))},r.renderPagination=function(){var e=r.store.list,t=e.page,a=e.total,n=e.limit;return h.default.createElement(w.default,{page:t,total:a,limit:n,onChange:r.handleFetch})},r.renderList=function(){return(0,b.default)(r.allAllowedNodes)&&(0,b.default)(r.state.filters)?h.default.createElement(P.default,{icon:"edge-node",title:t("EMPTY_WRAPPER",{resource:t("EDGE_NODE")}),desc:t("NODE_ACCESS_EMPTY_DESC"),action:r.renderActions()}):h.default.createElement(k.Loading,{spinning:r.store.list.isLoading},h.default.createElement(h.default.Fragment,null,r.renderToolbar(),r.enabledActions.includes("edit")&&r.renderBatchActions(),r.renderNodeCards(),r.renderPagination()))},!(0,_.default)(r.edgeClusterNavs,(function(e){var t=(0,E.default)(e,"items");return(0,_.default)(t,["name","nodes"])}))){var o=e.location.pathname.replace("fota","node-groups");e.history.replace(o)}return r.store=new I.default,r.state={isLoading:!1,isManaging:!1,filters:{},selectedKeys:[]},r}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.getData({isFirst:!0}),(0,N.startAutoRefresh)(this,{method:"getData",leading:!1,interval:5e3})}},{key:"componentWillUnmount",value:function(){(0,N.stopAutoRefresh)(this)}},{key:"render",value:function(){return h.default.createElement(h.default.Fragment,null,h.default.createElement(D.default,{className:M.default.banner,icon:"edge-fota",title:t("NODE_ACCESS_PL"),description:t("NODE_ACCESS_DESC")}),this.renderList())}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"edgeClusterNavs",get:function(){return globals.app.getEdgeCalculationNavs(this.cluster)}},{key:"filterColumns",get:function(){var e=[{text:t("NODE_STATUS_REGISTERING"),value:"registering"},{text:t("NODE_STATUS_REGISTERFAIL"),value:"registerFail"},{text:t("NODE_STATUS_RUNNING"),value:"running"},{text:t("NODE_STATUS_WARNING"),value:"warning"},{text:t("NODE_STATUS_UNMANAGED"),value:"unmanaged"},{text:t("NODE_STATUS_UNSCHEDULABLE"),value:"unschedulable"}];return[{dataIndex:"nodeName",title:t("NAME"),search:!0},{dataIndex:"status",title:t("STATUS"),search:!0,filters:e}]}},{key:"prefix",get:function(){return"/v2/edgewize/clusters/".concat(this.cluster,"/fota")}},{key:"allAllowedNodes",get:function(){return(0,y.toJS)(this.store.list.data)}},{key:"selectedNodes",get:function(){var e=this;return(0,y.toJS)(this.store.list.data).filter((function(t){var a=t.name;return e.state.selectedKeys.includes(a)}))}},{key:"enabledActions",get:function(){var e=this.props.match.params;return globals.app.getActions(j({module:"nodes"},e))}}]),n}(h.default.Component))||o)||o)||o;a.default=z},5183:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var r=n(a(36)),o=n(a(37)),i=n(a(55)),u=n(a(56)),l=n(a(51)),c=n(a(0)),s=n(a(1)),d=n(a(806)),f=n(a(915));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var m=function(e){(0,i.default)(a,e);var t=p(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.filters;return!(0,d.default)(t,e.filters)}},{key:"render",value:function(){return c.default.createElement(f.default,this.props)}}]),a}(c.default.Component);t.default=m,m.propTypes={className:s.default.string,columns:s.default.array.isRequired,filters:s.default.object.isRequired,onChange:s.default.func.isRequired}},5184:function(e,t,a){e.exports={banner:"_120aAclmohEJDefGl8wO-U",loading:"bgW65Pfc6UCS7QjbQG1hW",toolbar:"_25x5bYmMBVDAgqD5_6H9_Z",operators:"VWNzl2AtH1gu7vFsQPZlV",batchActions:"f4gLRu2zs--Q4dXYfB0dg",selectAll:"pdM6TO89ZNy9uKqG7vhE5",batchBtn:"QmKzsU8NRbMn9-c1xWyrp",unmanagedNodes:"_2rvJxF6zDRhJ9wa0CO-Vkt",nodeCards:"_3dzDaODBcirwPkoWeGmmcq",notAllowed:"_2jHpDZxDGZ9flIMlMJmXrc",card:"hkN4jpRB1_lsQZwLGrKkF",avatar:"_1SFLzNoU75s_3Scs3k4E0G",checkBox:"_2YnStu0FSR5h25WAxHhm1N",title:"_1PvEPuT4VK5Aw4zfzazHtG",desc:"_2_813SAMqEE6RxKKn3hUYG",status:"Ko5ps9XohK-sVRDb44g5D",inners:"_3Gu_vfDdwJx0ecHl239M6N",softwares:"tr3A6xAbOR8vAI4V2naLU",flex:"am7Gfc2Fa3v1q44eEYtvK",edgeSofts:"_27hPNppX-HjZOR8DaLFSpU",connect:"_3oVKX5eOXk5r8qEEj5FjwO",cancelSelect:"_1ZEPTZridaBX6fG13LHc9K",software:"oe6ttll26NkGkLQd0aAIR",softwareStatus:"oz93fg-ETLjx6bXQtal-k",statusTip:"_2gjoo7At5q_3gRebAxAa61",info:"_1K09AsnYEq59Qij-5UOxZ-",statusInfo:"_3fQAVfzJvl8zQqCIFVhNF1",menu:"_1rf9E-ukbu86GgtexNdXWA",menuItem:"u5kadt6oK_tPU5WRgdVvk",emptyText:"Cv-9qvc3c0QvsvImUyBOz",emptyTipIcon:"_3H_roUWYg-eEdvnzxspi8y",action:"_11KFg95hQ8giX04M5B8xPz",more:"_3zqWn5QClhjOLJS7KqvKRC"}},5185:function(e,a,n){"use strict";var r=n(20);n(12),n(5),n(11),n(29),n(6),n(84),n(73),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(85),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(29),n(6),n(84),n(160),n(73),n(18),n(28),n(191),n(42),n(16),n(159),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(17),n(85),n(7);var o=r(n(43));n(41);var i,u=r(n(44)),l=r(n(31)),c=r(n(61)),s=r(n(36)),d=r(n(37)),f=r(n(55)),p=r(n(56)),m=r(n(51)),h=r(n(0)),g=n(14),y=n(239),v=r(n(26)),_=r(n(63)),E=r(n(189)),b=r(n(446)),S=r(n(854)),O=n(186),k=n(52),T=n(791),C=r(n(105)),N=r(n(438)),A=r(n(955)),R=r(n(325)),D=r(n(1400)),P=r(n(792)),w=r(n(833)),I=r(n(874)),x=r(n(886)),M=r(n(915)),L=r(n(1047)),j=r(n(5186)),U=r(n(5188));function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var F="edge_cluster_overview_hide_columns",H=(0,y.inject)("rootStore")(i=(0,y.observer)(i=(0,T.trigger)(i=function(e){(0,f.default)(n,e);var a=Y(n);function n(e){var r;(0,s.default)(this,n),(r=a.call(this,e)).initData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.fetchHostData(e),r.fetchMemberData(e),r.fetchData(e)},r.getClusterParamsLabel=function(e,t){var a=t?"cluster-role.kubesphere.io/host=":"!cluster-role.kubesphere.io/host",n=e.group,r=e.tags,o=void 0===r?[]:r;return n&&(n="cluster.kubesphere.io/group=".concat(n)),o=Array.isArray(o)?o.map((function(e){return"label.cluster.kubesphere.io/".concat(e)})):"cluster.kubesphere.io/group=".concat(o),[n].concat((0,c.default)(o),[a,"!cluster-role.kubesphere.io/edge"]).filter(Boolean).join(",")},r.fetchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.store.fetchList(G(G({},(0,E.default)(e,"group","tags","__index")),{},{limit:e.limit||10,labelSelector:"cluster-role.kubesphere.io/edge"}))},r.fetchMemberData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.memberStore.fetchListByUser(G(G({},(0,E.default)(e,"group","tags","__index")),{},{limit:-1,labelSelector:r.getClusterParamsLabel(e,!1)}))},r.fetchHostData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.hostStore.fetchListByUser(G(G({},(0,E.default)(e,"group","tags","__index")),{},{labelSelector:r.getClusterParamsLabel(e,!0),limit:-1}))},r.handlePagination=function(e){r.fetchData(e)},r.handleRefresh=function(){r.fetchData({page:1})},r.handleSearch=function(e){r.fetchData(e),r.fetchHostData(e)},r.enterEdgewizeCluster=function(){var e=(0,u.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.routing.push("/v2/edgewize/clusters/".concat(t,"/nodes"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showAddCluster=function(){r.trigger("edge.cluster.add",{module:"clusters",title:t("CREATE_EDGEWIZE_CLUSTER"),hostedInOptions:r.hostedInOptions,success:function(){r.routing.push(),r.initData()}})},r.getItemActions=function(e){return[{key:"pen",icon:"pen",text:t("EDIT_INFORMATION"),show:!0,onClick:function(e){r.trigger("resource.baseinfo.edit",{detail:e,modal:j.default,hostedInOptions:r.hostedInOptions,success:r.initData})}},{key:"data",icon:"data",text:t("VIEW_KUBECONFIG"),show:!1,onClick:function(e){r.trigger("cluster.viewKubeConfig",{detail:e,isEdgeWize:!0,success:r.initData})}},{key:"trash",icon:"trash",text:t("DELETE_CLUSTER"),show:!0,onClick:function(e){r.trigger("cluster.unbind",{detail:G(G({},e),{},{tags:(e.tags||[]).map((function(e){return(r.tagsStore.tags||[]).find((function(t){return t.name===e.name}))})).filter(Boolean)}),isEdgeWize:!0,success:r.initData})}}].filter((function(e){return e.show}))},r.handleReset=function(){r.initData(r.state.filters)},r.clearFilter=function(){r.setState({filters:{}}),r.initData()},r.handleColumnsHide=function(e){r.setState({hideColumns:e},(function(){var e=(0,k.safeParseJSON)(localStorage.getItem("hide-columns"),{});e[F]=r.state.hideColumns,localStorage.setItem("hide-columns",JSON.stringify(e))}))},r.handleFilterChange=function(e){r.setState({filters:e}),r.handleSearch(e)};var i=(0,v.default)((0,k.safeParseJSON)(localStorage.getItem("hide-columns"),{}),F,[]);return r.store=new A.default,r.hostStore=new N.default,r.memberStore=new N.default,r.state={filters:{},hideColumns:i},r}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.initData(),this.websocket=new R.default,this.initWebsocket()}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"initWebsocket",value:function(){var e=this,t=(0,k.getHostClusterName)();this.websocket.watch("/apis/cluster.kubesphere.io/v1alpha1/watch/clusters"),this.fetchData=(0,S.default)(this.fetchData,500),this.disposer=(0,g.reaction)((function(){return e.websocket.message}),(function(a){if("Cluster"===a.object.kind){var n=C.default.clusters(a.object);"MODIFIED"===a.type&&e.store.list.updateItem(n),"ADDED"!==a.type||n.name===t||(0,g.toJS)(e.store.list.data).find((function(e){return e.name===n.name}))||e.store.list.addItem(n),"DELETED"===a.type&&e.store.list.deleteItem(n)}}))}},{key:"renderListDataNotFound",value:function(){return h.default.createElement(I.default,{icon:"exclamation",title:t("NO_MATCHING_RESULT_FOUND"),desc:null,action:h.default.createElement("p",null,t("YOU_CAN_TRY_TO"),h.default.createElement("span",{className:U.default.emptyAction,onClick:this.handleReset,"data-test":"table-empty-refresh"},t("REFRESH_DATA")),t("OR"),h.default.createElement("span",{className:U.default.emptyAction,onClick:this.clearFilter,"data-test":"table-empty-clear-filter"},t("CLEAR_SEARCH_CONDITIONS")))})}},{key:"renderEmptyList",value:function(){return h.default.createElement(w.default,{icon:"cluster",title:t("NO_CLUSTER_TIP"),desc:t("NO_CLUSTER_TIP_DESC"),actions:this.isOperation?h.default.createElement(O.Button,{type:"control",onClick:this.showAddCluster},t("ADD_CLUSTER")):null})}},{key:"renderList",value:function(){var e=this,t=this.store.list,a=t.data,n=t.page,r=t.total,o=t.limit,i=this.state.hideColumns,u=(0,b.default)(a,(function(e){return e.expiredDay}));return(0,_.default)(a)?(0,_.default)(this.state.filters)?this.renderEmptyList():this.renderListDataNotFound():h.default.createElement("ul",{className:U.default.cards},!(0,_.default)(u)&&h.default.createElement("div",null,u.map((function(t){return h.default.createElement(D.default,{isEdgeWize:!0,key:t.name,data:t,onEnter:e.enterEdgewizeCluster,isOperation:e.isOperation,itemActions:e.getItemActions(t),hideColumns:i})})),h.default.createElement("div",{className:"text-right margin-t12"},h.default.createElement(x.default,{page:n,total:r,limit:o,onChange:this.handlePagination}))))}},{key:"renderSearch",value:function(){var e=this.state.hideColumns;return h.default.createElement("div",{className:U.default.searchPanel},h.default.createElement(M.default,{placeholder:t("SEARCH_BY_NAME"),columns:this.filterColumns,onChange:this.handleFilterChange,filters:this.state.filters}),h.default.createElement(O.Button,{type:"flat",icon:"refresh",onClick:this.handleRefresh,"data-test":"cluster-refresh"}),h.default.createElement(L.default,{className:U.default.columnMenu,title:t("CUSTOM_COLUMNS"),columns:this.clusterColumns,value:e,onChange:this.handleColumnsHide}),this.enabledActions.includes("create")&&h.default.createElement(O.Button,{type:"control",onClick:this.showAddCluster,"data-test":"edgewize-cluster-create"},t("CREATE_EDGEWIZE_CLUSTER")))}},{key:"render",value:function(){var e=this.store.list.isLoading;return h.default.createElement("div",{className:U.default.wrapper},h.default.createElement(P.default,{className:U.default.banner,icon:"edge-cluster",title:t("EDGEWIZE_MANAGEMENT"),description:t("EDGEWIZE_MANAGEMENT_DESC"),tabs:this.tabs,tabsActions:this.renderSearch()}),e?h.default.createElement(O.Loading,{className:U.default.loading}):this.renderList())}},{key:"authKey",get:function(){return"clusters"}},{key:"tabs",get:function(){return{value:"clusters",options:[]}}},{key:"filterColumns",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0}]}},{key:"clusterColumns",get:function(){return[{title:t("CLUSTER_NAME"),dataIndex:"name"},{title:t("NODE_COUNT"),dataIndex:"nodeCount",isHideable:!0},{title:t("KUBERNETES_VERSION"),dataIndex:"version",isHideable:!0},{title:t("HOSTED_IN"),dataIndex:"hostCluster",isHideable:!0},{title:t("CREATION_TIME"),dataIndex:"createTime",isHideable:!0}]}},{key:"enabledActions",get:function(){return globals.app.getActions({module:this.authKey})}},{key:"isOperation",get:function(){return this.enabledActions.includes("create")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"hostedInOptions",get:function(){if(globals.app.isMultiCluster){var e=[];return(0,_.default)((0,g.toJS)(this.hostStore.list.data))||e.push({label:t("HOST_CLUSTER"),options:(0,g.toJS)(this.hostStore.list.data).map((function(e){var t=e.name;return{label:t,value:t}}))}),(0,_.default)((0,g.toJS)(this.memberStore.list.data))||e.push({label:t("MEMBER_CLUSTER"),options:(0,g.toJS)(this.memberStore.list.data).map((function(e){var t=e.name;return{label:t,value:t}}))}),e}}}]),n}(h.default.Component))||i)||i)||i;a.default=H},5186:function(e,a,n){"use strict";n(15);var r=n(20);n(16),n(4),n(23),n(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(42),n(16),n(4),n(23),n(57),n(17);var o=r(n(315)),i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(14),p=r(n(830)),m=r(n(1)),h=r(n(787)),g=r(n(1633)),y=r(n(5187));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var _=function(e){(0,l.default)(n,e);var a=v(n);function n(e){var t;return(0,i.default)(this,n),(t=a.call(this,e)).handleOk=function(){var e=t.props.onOk,a=t.formRef.current;null==e||e(a.getData())},t.formRef=d.default.createRef(),t.formTemplateData=(0,p.default)((0,f.toJS)(e.detail._originData)),t}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,a=e.visible,n=e.isSubmitting,r=e.onCancel;return d.default.createElement(h.default,{width:691,title:t("EDIT_INFORMATION"),description:t("EDIT_CLUSTER_INFO_DESC"),icon:"cluster",okText:t("OK"),onOk:this.handleOk,onCancel:r,visible:a,isSubmitting:n},d.default.createElement(g.default,(0,o.default)({},this.props,{isEdit:!0,formRef:this.formRef,formTemplate:this.formTemplateData,onOk:this.handleOk,className:y.default.editForm})))}},{key:"isMultiCluster",get:function(){return globals.app.isMultiCluster}},{key:"clusterName",get:function(){return this.formTemplateData.metadata.name}},{key:"options",get:function(){var e=this.props.hostedInOptions;return!this.isMultiCluster&&this.clusterName?[{label:this.clusterName,value:this.clusterName}]:e}}]),n}(d.default.Component);a.default=_,_.propTypes={detail:m.default.object,visible:m.default.bool,onOk:m.default.func,onCancel:m.default.func,isEdit:m.default.bool,isSubmitting:m.default.bool},_.defaultProps={visible:!1,isEdit:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},5187:function(e,t,a){e.exports={editForm:"_3C9ReB8lgP4VHd4kW5ntN4"}},5188:function(e,t,a){e.exports={searchPanel:"_1Rw29JFUkK3eggqbOSAG4C",search:"_13tvMYzWCovTyJFZ69Mrq6",banner:"_306-At1hJfEdBdukKk02BM",wrapper:"_1kyvVhOjwVAT07LIgrIW4x",cards:"_2N0Xziba4msOtEu4FOrU_3",total:"_20BmCIxjYZQbVIOqq2EsVD",noData:"h_R36WYsCa61LUVXwB83T",title:"_3bbuwNwMiv3F3ac_dcmrCH",batchManage:"_3Bsxk-s7yX_q6WKUtgtMBj",loading:"_1FKNwtG86uOVvgiAk1_3Lr",action:"_19zD045lPYiYMl7NYRUfQF",clusterGroupTag:"_23Ibi3vICXh_Hw_b4ynuJd",production:"_1XKELE7vePTkiL_UN0dSbi",development:"eUxyYWO4c8hmfHqvvL8LB",testing:"-lZYywCf9kKcQTXtnuh2M",demo:"_283Aj0gD4CBZDkOWRGXabK",emptyAction:"_2-RCSIUUn_fPbGlNSUdAK6"}},5189:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(11),n(73),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(73),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=n(186),h=r(n(788)),g=r(n(790)),y=r(n(792)),v=n(793),_=r(n(810)),E=n(52),b=n(72),S=r(n(1091));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,v.withClusterList)({store:new S.default,module:"services",name:"SERVICE",rowKey:"uid"})(o=function(e){(0,c.default)(n,e);var a=O(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!e.isFedManaged},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.renderExternalService=function(e){var a={des:"-",title:"-"};return"NodePort"===e.specType&&(a.des=t("PORT_PL"),a.title=e.ports.filter((function(e){return e.nodePort})).map((function(e){return"".concat(e.nodePort,"/").concat(e.protocol)})).join("; ")),"LoadBalancer"===e.specType&&(a.des=e.loadBalancerIngress.length>1?t("LOAD_BALANCERS_SCAP"):t("LOAD_BALANCER_SCAP"),a.title=e.loadBalancerIngress.join("; ")),e.externalName?f.default.createElement(g.default,{description:a.des,title:function(){return f.default.createElement(m.Tooltip,{content:e.externalName},f.default.createElement("span",null,a.title))}}):f.default.createElement(g.default,{description:t("".concat(a.des)),title:a.title})},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.module,o=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,width:"20%",render:function(e,t){return f.default.createElement(h.default,{icon:b.ICON_TYPES[r],iconSize:40,title:(0,E.getDisplayName)(t),desc:t.description||"-",isMultiCluster:t.isFedManaged,to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(t.namespace,"/").concat(r,"/").concat(e)})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"15%",render:function(e){return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(o,"/projects/").concat(e)},e)}},{title:t("INTERNAL_ACCESS"),dataIndex:'annotations["kubesphere.io/serviceType"]',isHideable:!0,width:"15%",render:function(e,a){return f.default.createElement(g.default,{title:a.clusterIP||"",description:t("".concat(a.type))})}},{title:t("EXTERNAL_ACCESS"),dataIndex:"specType",isHideable:!0,width:"20%",render:function(t,a){return e.renderExternalService(a)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"10%",render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module,o=t.getData;return e.props.trigger("service.simple.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster,success:o})},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(v.ListPage,this.props,f.default.createElement(y.default,a),f.default.createElement(_.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),cluster:t.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"itemActions",get:function(){var e=this,a=this.props,n=a.trigger,r=a.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"editService",icon:"network-router",text:t("EDIT_SERVICE"),action:"edit",show:this.showAction,onClick:function(e){return n("service.edit",{detail:e,isEdgeWize:!0})}},{key:"editGateway",icon:"ip",text:t("EDIT_EXTERNAL_ACCESS"),action:"edit",show:function(t){return e.showAction(t)&&t.type===b.SERVICE_TYPES.VirtualIP},onClick:function(e){return n("service.gateway.edit",{detail:e,isEdgeWize:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return n("resource.delete",{type:r,detail:e})}}]}}]),n}(f.default.Component))||o;a.default=k},5190:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(433),m=r(n(788)),h=r(n(795)),g=r(n(792)),y=n(793),v=r(n(804)),_=r(n(810)),E=n(52),b=n(434),S=n(72),O=r(n(858));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var T=(0,y.withClusterList)({store:new O.default("cronjobs"),module:"cronjobs",name:"CRONJOB",rowKey:"uid"})(o=function(e){(0,c.default)(n,e);var a=k(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(a){var n=(0,b.getWorkloadStatus)(a,e.props.module),r=n.status,o=n.reason;return o?f.default.createElement(v.default,{status:r,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.getFilteredValue,o=a.module,i=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,a){return f.default.createElement(m.default,{icon:S.ICON_TYPES[o],iconSize:40,title:(0,E.getDisplayName)(a),desc:e.getItemDesc(a),to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:r("status"),isHideable:!0,search:!0,width:"15%",render:function(e,a){var n=(0,b.getWorkloadStatus)(a,o).status;return f.default.createElement(h.default,{type:n,name:t("CRONJOB_".concat(n.toUpperCase()))})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"18%",render:function(e){return f.default.createElement(p.Link,{to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(e)},e)}},{title:t("SCHEDULE"),dataIndex:"spec.schedule",isHideable:!0,width:"15%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,E.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/").concat(t))},e.handleSwitch=function(t){return function(a){e.props.store.switch(a,t).then((function(){e.props.routing.query()}))}},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster})},e}return(0,l.default)(n,[{key:"getStatus",value:function(){return S.CRONJOB_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.bannerProps,n=e.tableProps;return f.default.createElement(y.ListPage,this.props,f.default.createElement(g.default,(0,i.default)({},a,{tabs:this.tabs})),f.default.createElement(_.default,(0,i.default)({},n,{itemActions:this.itemActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:t.params.cluster})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"jobs",label:t("JOB_PL")},{value:"cronjobs",label:t("CRONJOB_PL")}]}}},{key:"itemActions",get:function(){var e=this.props,a=e.trigger,n=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return a("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return a("resource.yaml.edit",{detail:e})}},{show:function(e){return e.suspend},key:"start",icon:"start",text:t("START"),action:"edit",onClick:this.handleSwitch(!0)},{show:function(e){return!e.suspend},key:"pause",icon:"stop",text:t("PAUSE"),action:"edit",onClick:this.handleSwitch(!1)},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return a("resource.delete",{type:n,detail:e})}}]}}]),n}(f.default.Component))||o;a.default=T},5191:function(e,t,a){"use strict";var n=a(20),r=a(157);a(12),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var o=n(a(43)),i=n(a(31));a(41);var u,l=n(a(44)),c=n(a(36)),s=n(a(37)),d=n(a(55)),f=n(a(56)),p=n(a(51)),m=r(a(0)),h=a(239),g=n(a(74)),y=n(a(26)),v=n(a(241)),_=a(186),E=a(317),b=n(a(955));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,h.inject)("rootStore")(u=(0,h.observer)(u=function(e){(0,d.default)(n,e);var t,a=k(n);function n(e){var t;return(0,c.default)(this,n),(t=a.call(this,e)).store=new b.default,t}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.init(this.props.match.params)}},{key:"componentDidUpdate",value:function(e){e.match.params.cluster!==this.cluster&&this.init(this.props.match.params)}},{key:"init",value:(t=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,this.props.rootStore.getRules(t);case 3:if(!t.cluster){e.next=12;break}return e.next=6,this.store.fetchDetail({name:t.cluster});case 6:if(!this.store.detail.isReady){e.next=9;break}return e.next=9,this.store.fetchProjects({cluster:t.cluster});case 9:(0,g.default)(globals,"edgeClusterConfig.".concat(t.cluster),this.store.detail.configz),""===(0,y.default)(this.store.detail.configz,"ksVersion")&&(0,g.default)(globals,"need_rebuild_".concat(this.cluster,"_nav"),!0),globals.app.cacheHistory(this.props.match.url,O({type:"Cluster"},(0,v.default)(this.store.detail,["name","aliasName","group","isHost"])));case 12:this.store.initializing=!1;case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?m.default.createElement(_.Loading,{className:"ks-page-loading"}):m.default.createElement(h.Provider,{clusterStore:this.store},(0,E.renderRoutes)(this.props.route.routes))}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(m.Component))||u)||u;t.default=T},5192:function(e,t,a){"use strict";a(15);var n=a(20),r=a(157);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(22),a(23),a(57),a(24),a(17),a(62);var o=n(a(43));a(41);var i,u=n(a(44)),l=n(a(36)),c=n(a(37)),s=n(a(55)),d=n(a(56)),f=n(a(51)),p=r(a(0)),m=a(239),h=n(a(800)),g=n(a(26)),y=n(a(242)),v=a(317),_=a(1076),E=n(a(1856));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var S=(0,m.inject)("rootStore","clusterStore")(i=(0,m.observer)(i=function(e){(0,s.default)(a,e);var t=b(a);function a(){var e;(0,l.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).enterCluster=function(){var e=(0,u.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="/v2/edgewize/clusters/".concat(t,"/nodes");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.fetchConfigz=(0,h.default)((0,u.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.clusterStore.fetchClusterConfigz({cluster:e.cluster});case 2:t.sent&&(e.edgeClusterNavs,(0,y.default)(globals,"need_rebuild_".concat(e.cluster,"_nav")),e.forceUpdate());case 4:case"end":return t.stop()}}),t)}))),3e3),e}return(0,c.default)(a,[{key:"componentDidUpdate",value:function(){(0,g.default)(globals,"need_rebuild_edgewize_".concat(this.cluster,"_nav"),!1)&&this.fetchConfigz()}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.route,n=e.location,r=this.props.clusterStore.detail,o=r.aliasName,i="".concat(this.cluster).concat(o&&" (".concat(o,")"));return p.default.createElement("div",{className:"ks-page"},p.default.createElement("div",{className:"ks-page-side"},p.default.createElement(E.default,{isEdgeWize:!0,icon:r.icon||"edge-cluster",value:i,onChange:this.enterCluster}),p.default.createElement(_.Nav,{className:"ks-page-nav",navs:this.edgeClusterNavs,location:n,match:t})),p.default.createElement("div",{className:"ks-page-main",style:{height:"calc(100vh - 68px )"}},(0,v.renderRoutes)(a.routes)))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"edgeClusterNavs",get:function(){return globals.app.getEdgeCalculationNavs(this.cluster)}}]),a}(p.Component))||i)||i;t.default=S},5193:function(e,a,n){"use strict";var r=n(20);n(12),n(11),n(6),n(18),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(136),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(11),n(6),n(18),n(28),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,i=r(n(31)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(239),m=r(n(792)),h=n(317),g=r(n(5194));function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var E=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,c.default)(n,e);var a=_(n);function n(){return(0,u.default)(this,n),a.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){return f.default.createElement("div",null,f.default.createElement(m.default,{icon:"linechart",title:t("RESOURCE_USAGE"),description:t("RESOURCE_USAGE_DESC"),routes:this.routes}),(0,h.renderRoutes)(g.default))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"routes",get:function(){return g.default.filter((function(e){return!!e.title})).map((function(e){return v(v({},e),{},{name:e.path.split("/").pop()})}))}}]),n}(f.default.Component))||o)||o;a.default=E},5194:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(5195)),i=n(a(5200)),u="/v2/edgewize/clusters/:cluster/resource-usage",l=[{path:"".concat(u,"/node"),title:"NODE_USAGE_RANKING",component:o.default,exact:!0},{path:"".concat(u,"/project"),title:"PROJECTS_USAGE_RANKING",component:i.default,exact:!0},(0,r.getIndexRoute)({path:u,to:"".concat(u,"/node"),exact:!0})];t.default=l},5195:function(e,a,n){"use strict";n(15);var r=n(20);n(18),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(18),n(42),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=r(n(3)),p=n(239),m=n(186),h=n(52),g=r(n(5196)),y=r(n(886)),v=r(n(5197)),_=r(n(5199));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b=["node_cpu_utilisation","node_load1","node_memory_utilisation","node_gpu_utilization","node_gpu_memory_utilization","node_disk_size_utilisation","node_disk_inode_utilisation","node_pod_utilisation"],S=(0,p.inject)("rootStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var a=E(n);function n(e){var t;return(0,i.default)(this,n),(t=a.call(this,e)).download=function(){t.store.download("node.usage.rank.json")},t.store=new g.default({cluster:t.cluster,sort_metric_options:(0,h.hideGPUByLicense)(b,t.cluster),sort_metric:b[0]}),t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"renderToolbar",value:function(){return d.default.createElement("div",{className:(0,f.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(m.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options})),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(m.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,n=e.limit;return d.default.createElement("div",{className:(0,f.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(y.default,{page:t,total:a,limit:n,onChange:this.store.changePagination}))}},{key:"renderList",value:function(){return d.default.createElement(m.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(v.default,{store:this.store,prefix:"/v2/edgewize/clusters",isEdgeWize:!0,cluster:this.cluster}),this.renderPagination()))}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"options",get:function(){return this.store.sort_metric_options.map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),n}(d.default.Component))||o)||o;a.default=S},5196:function(e,t,a){"use strict";a(15);var n=a(20);a(73),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(73),a(42),a(4),a(23),a(57),a(17);var r,o,i=n(a(65)),u=n(a(36)),l=n(a(88)),c=n(a(55)),s=n(a(56)),d=n(a(51)),f=n(a(49)),p=(n(a(66)),a(14)),m=a(52),h=n(a(1208));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var y=["node_cpu_usage","node_cpu_utilisation","node_load1","node_load5","node_load15","node_memory_utilisation","node_memory_usage_wo_cache","node_gpu_utilization","node_gpu_memory_utilization"],v=["node_cpu_utilisation","node_cpu_usage","node_cpu_total","node_memory_utilisation","node_memory_usage_wo_cache","node_memory_total","node_gpu_utilization","node_gpu_usage","node_gpu_total","node_gpu_memory_utilization","node_gpu_memory_usage","node_gpu_memory_total","node_disk_size_utilisation","node_disk_size_usage","node_disk_size_capacity","node_pod_utilisation","node_pod_running_count","node_pod_quota","node_disk_inode_utilisation","node_disk_inode_total","node_disk_inode_usage","node_load1","node_load5","node_load15"],_=(r=function(e){(0,c.default)(a,e);var t=g(a);function a(e){var n;return(0,u.default)(this,a),n=t.call(this,e),(0,i.default)(n,"sort_metric",o,(0,l.default)(n)),n.sort_metric_options=(0,m.hideGPUByLicense)(y,n.cluster),n.metrics_filter=(0,m.hideGPUByLicense)(v,n.cluster).join("|"),n}return a}(h.default),o=(0,f.default)(r.prototype,"sort_metric",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y[0]}}),r);t.default=_},5197:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(84),n(27),n(190),n(4),n(23),n(17),n(85),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(84),n(42),n(27),n(190),n(4),n(23),n(57),n(17),n(85);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(239),p=r(n(26)),m=r(n(158)),h=n(186),g=n(52),y=n(794),v=r(n(1810)),_=r(n(846)),E=r(n(987)),b=r(n(5198));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var O=(0,f.observer)(o=function(e){(0,l.default)(n,e);var a=S(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).IconWidth=40,e.rankTdWidth=124,e.handleValue=function(e){return null==e||isNaN(e)?0:e},e.setUnitText=function(e){return"core"===e?"CORE_PL":e},e.columns=[{width:e.IconWidth,key:"icon",render:function(){return d.default.createElement(h.Icon,{name:e.isEdgeWizePage?"edge-node":"nodes",type:"dark",size:40})}},{title:t("NODE"),key:"node",render:function(a){var n=e.props.cluster,r=e.isEdgeWizePage||!(0,p.default)(a,"role",[]).includes("edge")?"".concat(e.prefix,"/").concat(n,"/nodes/").concat(a.node):"".concat(e.prefix,"/").concat(n,"/edgenodes/").concat(a.node);return d.default.createElement("div",null,d.default.createElement("h3",null,d.default.createElement(v.default,{to:r,auth:e.canViewNode},a.node),"master"===a.role&&d.default.createElement("span",{className:b.default.label},t("CONTROL_PLANE"))),d.default.createElement("p",null,(0,p.default)(a,"host_ip","-")))}},{key:"cpu",width:e.rankTdWidth,sort_metric:"node_cpu_utilisation",title:t("CPU_USAGE"),render:function(a){var n=(0,y.getSuitableUnit)(a.node_cpu_total,"cpu"),r=(0,y.getValueByUnit)(a.node_cpu_usage,n),o=(0,y.getValueByUnit)(a.node_cpu_total,n),i=e.setUnitText(n);return d.default.createElement("div",null,d.default.createElement("h3",null,e.toPercentage(a.node_cpu_utilisation)),d.default.createElement("div",null,e.handleValue(r),"/",e.handleValue(o),t(i)))}},{width:e.rankTdWidth,key:"node_load1",title:d.default.createElement("span",{className:b.default.averageload},t("AVERAGE_CPU_LOAD")),sort_metric:"node_load1",render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,e.node_load1&&Number(e.node_load1).toFixed(2)||"-"))}},{width:e.rankTdWidth,sort_metric:"node_memory_utilisation",title:t("MEMORY_USAGE"),key:"Memory",render:function(t){var a=(0,y.getValueByUnit)(t.node_memory_usage_wo_cache,"Gi"),n=(0,y.getValueByUnit)(t.node_memory_total,"Gi");return d.default.createElement("div",null,d.default.createElement("h3",null,e.toPercentage(t.node_memory_utilisation)),d.default.createElement("div",null,e.handleValue(a),"/",e.handleValue(n)," Gi"))}},{width:e.rankTdWidth,sort_metric:"node_gpu_utilization",title:t("GPU_USAGE"),key:"GPU",render:function(t){var a=(0,y.getSuitableUnit)(t.node_gpu_total,"gpu"),n=(0,y.getValueByUnit)(t.node_gpu_usage,a),r=(0,y.getValueByUnit)(t.node_gpu_total,a);return d.default.createElement("div",null,d.default.createElement("h3",null,e.toPercentage(t.node_gpu_utilization)),d.default.createElement("div",null,e.handleValue(n),"/",e.handleValue(r)," ","GPU"))}},{width:e.rankTdWidth,sort_metric:"node_gpu_memory_utilization",title:t("GPU_MEMORY_USAGE"),key:"gpu_memory",render:function(t){var a=(0,y.getValueByUnit)(t.node_gpu_memory_usage,"Gi"),n=(0,y.getValueByUnit)(t.node_gpu_memory_total,"Gi");return d.default.createElement("div",null,d.default.createElement("h3",null,e.toPercentage(t.node_gpu_memory_utilization)),d.default.createElement("div",null,e.handleValue(a),"/",e.handleValue(n)," ","Gi"))}},{title:t("POD_USAGE"),key:"Pod",width:e.rankTdWidth,sort_metric:"node_pod_utilisation",render:function(t){return d.default.createElement("div",null,d.default.createElement("h3",null,e.toPercentage(t.node_pod_utilisation)),d.default.createElement("div",null,t.node_pod_running_count||"-","/",t.node_pod_quota||"-"))}}],e}return(0,u.default)(n,[{key:"toPercentage",value:function(e){var t=(0,m.default)(e)||isNaN(e)?0:Number(e);return"".concat(Math.ceil(100*t),"%")}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.store,n=e.cluster,r=this.props.store.data,o=(0,g.hideGPUByLicense)(this.columns,n);return d.default.createElement(E.default,{theme:t,columns:o,store:a,dataSource:r.toJS(),emptyText:d.default.createElement(_.default,null)})}},{key:"isEdgeWizePage",get:function(){return this.props.isEdgeWize}},{key:"canViewNode",get:function(){var e=this.props.cluster;return globals.app.hasPermission({skipAuth:this.isEdgeWizePage,cluster:e,module:"nodes",action:"view"})}},{key:"prefix",get:function(){return this.props.prefix||"/clusters"}}]),n}(d.default.Component))||o;a.default=O},5198:function(e,t,a){e.exports={averageload:"_1GAyLO6XoFebV9o7QlTtrD",label:"rMVcjRgO2xJwVr0WcPYUC"}},5199:function(e,t,a){e.exports={wrapper:"_2gLg_FUxG2nvIsEHEbyV4i",pane:"_2alIjzg-x6sXJ82ebwIbNY",pane__toolbar:"_8fpdHIvgaHASypopCo_iq",pane__pagination:"NICHtg1hVxwySVRdK-U2P",title:"_1_o2AEdae1LRH9n1HbuDOM",toolbar:"_11uNpQE-jkPSuH0U6ePAVj",toolbar_buttons:"_1ic7s2gOYg7so8lYdfgt7G",toolbar_filter:"_4Uc3RzrA0VD894Yv71975",sort_button:"_2KBKnh24SMdjTu1V4ZYRVc",table:"JWNQ3oxEaRtzHUO6hqC8q",table_rank:"zjATwxRDZMcCiLnbfAiAO",table_no_border:"_27vfODY19ZESPjXDR4CHdy",rankList_row:"_3jBckvCXWnyEFIWb4f29jY",rankCol:"_1CUP8Y5Pbfh4e3_X2tlO8c"}},5200:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var r=n(a(36)),o=n(a(37)),i=n(a(55)),u=n(a(56)),l=n(a(51)),c=n(a(0)),s=n(a(5201)),d=n(a(5205));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,u.default)(this,a)}}var p=function(e){(0,i.default)(a,e);var t=f(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return(0,o.default)(a,[{key:"render",value:function(){return c.default.createElement("div",{className:d.default.wrapper},c.default.createElement(s.default,{cluster:this.props.match.params.cluster}))}}]),a}(c.default.Component);t.default=p},5201:function(e,a,n){"use strict";n(15);var r=n(20);n(11),n(18),n(4),n(23),n(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(11),n(18),n(42),n(4),n(23),n(57),n(17);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(239),p=r(n(3)),m=r(n(886)),h=n(186),g=r(n(5202)),y=n(52),v=r(n(5203)),_=r(n(5204));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b=["namespace_cpu_usage","namespace_memory_usage_wo_cache","namespace_gpu_usage","namespace_gpu_memory_usage","namespace_pod_count","namespace_net_bytes_received","namespace_net_bytes_transmitted"],S=(0,f.observer)(o=function(e){(0,l.default)(n,e);var a=E(n);function n(e){var t;return(0,i.default)(this,n),(t=a.call(this,e)).download=function(){t.store.download("project.usage.rank.json")},t.store=new g.default({limit:10,sort_type:"desc",cluster:e.cluster,sort_metric_options:(0,y.hideGPUByLicense)(b,e.cluster)}),t}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.store.fetchAll()}},{key:"renderToolbar",value:function(){return d.default.createElement("div",{className:(0,p.default)(_.default.toolbar,_.default.pane__toolbar,_.default.pane)},d.default.createElement("div",{className:_.default.toolbar_filter},d.default.createElement(h.Select,{value:this.store.sort_metric,onChange:this.store.changeSortMetric,options:this.options})),d.default.createElement("div",{className:_.default.toolbar_buttons},d.default.createElement(h.Button,{onClick:this.download},t("EXPORT"))))}},{key:"renderList",value:function(){return d.default.createElement(h.Loading,{spinning:this.store.isLoading},d.default.createElement("div",null,d.default.createElement(v.default,{cluster:this.props.cluster,prefix:"/v2/edgewize/clusters",store:this.store}),this.renderPagination()))}},{key:"renderPagination",value:function(){var e=this.store,t=e.page,a=e.total,n=e.limit;return d.default.createElement("div",{className:(0,p.default)(_.default.pane,_.default.pane__pagination)},d.default.createElement(m.default,{page:t,total:a,limit:n,onChange:this.store.changePagination}))}},{key:"render",value:function(){return d.default.createElement("div",{className:_.default.wrapper},this.renderToolbar(),this.renderList())}},{key:"options",get:function(){return this.store.sort_metric_options.filter((function(e){return"namespace_pvc_bytes_used"!==e})).map((function(e){return{value:e,label:t("SORT_BY_".concat(e.toUpperCase()))}}))}}]),n}(d.default.Component))||o;a.default=S},5202:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var r=n(a(36)),o=n(a(55)),i=n(a(56)),u=n(a(51));function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.default)(this,a)}}var c=function(e){(0,o.default)(a,e);var t=l(a);function a(){return(0,r.default)(this,a),t.apply(this,arguments)}return a}(n(a(1130)).default);t.default=c},5203:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(27),n(4),n(23),n(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(42),n(27),n(4),n(23),n(57),n(17);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(239),p=n(794),m=n(52),h=r(n(987)),g=r(n(788)),y=r(n(846));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var _=(0,f.inject)("rootStore")(o=(0,f.observer)(o=function(e){(0,l.default)(n,e);var a=v(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).IconWidth=40,e.rankTdWidth=124,e.columns=[{dataIndex:"namespace",title:t("PROJECT"),key:"avatar",render:function(t){return d.default.createElement(g.default,{icon:"project",iconSize:40,title:t,to:"".concat(e.prefix,"/").concat(t)})}},{sort_metric:"namespace_cpu_usage",key:"cpu",width:e.rankTdWidth,title:d.default.createElement("div",null,t("CPU_USAGE")),render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_cpu_usage,"cpu","-")),d.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,p.getSuitableValue)(e.namespace_cpu_limit_hard,"cpu","-")})))}},{sort_metric:"namespace_memory_usage_wo_cache",width:e.rankTdWidth,title:d.default.createElement("div",null,t("MEMORY_USAGE")),key:"memory",render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_memory_usage_wo_cache,"memory","-")),d.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,p.getSuitableValue)(e.namespace_memory_limit_hard,"memory","-")})))}},{sort_metric:"namespace_gpu_usage",key:"gpu",width:e.rankTdWidth,title:d.default.createElement("div",null,t("GPU_USAGE")),render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_gpu_usage,"gpu","-")),d.default.createElement("div",null,t("QUOTA_VALUE",{value:(0,p.getSuitableValue)(e.namespace_gpu_limit_hard,"gpu","-")})))}},{sort_metric:"namespace_gpu_memory_usage",width:e.rankTdWidth,title:d.default.createElement("div",null,t("GPU_MEMORY_USAGE")),key:"gpu_memory",render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_gpu_memory_usage,"memory","-")))}},{sort_metric:"namespace_pod_count",title:t("POD_COUNT"),key:"pod",width:e.rankTdWidth,render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,e.namespace_pod_count||"-"),d.default.createElement("div",null,t("QUOTA_VALUE",{value:e.namespace_pods_hard||"-"})))}},{sort_metric:"namespace_net_bytes_transmitted",title:t("OUTBOUND_TRAFFIC"),key:"namespace_net_bytes_transmitted",width:e.rankTdWidth,render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_net_bytes_transmitted,"bandwidth","-")))}},{sort_metric:"namespace_net_bytes_received",title:t("INBOUND_TRAFFIC"),key:"namespace_net_bytes_received",width:e.rankTdWidth,render:function(e){return d.default.createElement("div",null,d.default.createElement("h3",null,(0,p.getSuitableValue)(e.namespace_net_bytes_received,"bandwidth","-")))}}],e}return(0,u.default)(n,[{key:"toPercentage",value:function(e){var t=Number(e)||0;return"".concat(Math.ceil(100*t),"%")}},{key:"toUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNaN(e)?"-":"".concat(e," ").concat(t)}},{key:"render",value:function(){var e=this.props,t=e.theme,a=e.store,n=e.cluster,r=this.props.store.data,o=(0,m.hideGPUByLicense)(this.columns,n);return d.default.createElement(h.default,{rowKey:"namespace",theme:t,columns:o,store:a,dataSource:r.toJS(),emptyText:d.default.createElement(y.default,null)})}},{key:"prefix",get:function(){var e=this.props,t=e.workspace,a=e.cluster;return t?"/".concat(t,"/clusters/").concat(a,"/projects"):(0,m.isEdgeWizePage)()?"/v2/edgewize/clusters/".concat(a,"/projects"):"/clusters/".concat(a,"/projects")}}]),n}(d.default.Component))||o)||o;a.default=_},5204:function(e,t,a){e.exports={wrapper:"_e5fmdJWnJ0QOQZJcCVUn",pane:"_1eJxJG0aVZtYyz3GDR_ZR_",pane__toolbar:"j1zwlJVD42xGeaYh7dK4i",pane__pagination:"_2HmdHospbTYFJI9TlaR34l",title:"_1k1gAmEYjCqP7BrSiENkh6",toolbar:"_1FWU5qUC8uuujJw6d2l65x",toolbar_buttons:"_2LIzJ64kqvBLuZZE61UvP7",toolbar_filter:"_2Z8Trv-1eNjdlaX8r5WZST",sort_button:"uoSjuNhFB8P8g3tMb3Lxk",table:"_19GZKNCZYjDNKSNnF7cNeH",table_rank:"_3iqV5YZScGpLLHwZ0HZbEZ",table_no_border:"ShtMcJ1EGg_b4SA5fgyV7",rankList_row:"_26zYIroWfOqZKnyRv1Yx7J",rankLink__sort_col:"_37lju7-H5Pp-RNF4l1X1FM"}},5205:function(e,t,a){e.exports={wrapper:"_1avbBwdk0YDRcmr2lKxT_s",pane:"_2k4E0DPmYnUKa820YSBXTA",tabs:"_2FS1EN8g7vjL7CzoUmGKmC",selected:"_1WHzTov_2_-DO-ExFAK9gE"}},5206:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(61)),u=r(n(315)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=r(n(26)),h=n(433),g=r(n(788)),y=r(n(792)),v=n(793),_=r(n(865)),E=r(n(804)),b=r(n(810)),S=n(434),O=n(52),k=n(72),T=r(n(858));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,v.withClusterList)({store:new T.default("daemonsets"),module:"daemonsets",name:"DAEMONSET",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var a=C(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/").concat(t))},e.getItemDesc=function(a){var n=(0,S.getWorkloadStatus)(a,e.props.module),r=n.status,o=n.reason;return o?p.default.createElement(E.default,{status:r,reason:t(o),data:a}):a.description||"-"},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.getFilteredValue,o=a.module,i=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,a){return p.default.createElement(g.default,{icon:k.ICON_TYPES[o],iconSize:40,title:(0,O.getDisplayName)(a),desc:e.getItemDesc(a),to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:r("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(_.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return p.default.createElement(h.Link,{to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(e)},e)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,O.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster})},e}return(0,c.default)(n,[{key:"getStatus",value:function(){return k.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.match,n=e.bannerProps,r=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(y.default,(0,u.default)({},n,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),p.default.createElement(b.default,(0,u.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),cluster:a.params.cluster,emptyProps:{desc:null}})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,n=e.trigger,r=e.name,o=e.rootStore;return[].concat((0,i.default)((0,m.default)(a,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),action:"edit",onClick:function(){return n("resource.batch.stop",{type:r,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,a=e.module,n=e.name,r=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(p.default.Component))||o;a.default=N},5207:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(61)),u=r(n(315)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=r(n(26)),h=n(433),g=r(n(788)),y=r(n(792)),v=n(793),_=r(n(865)),E=r(n(804)),b=r(n(810)),S=n(52),O=n(434),k=n(72),T=r(n(858));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,v.withClusterList)({store:new T.default("deployments"),module:"deployments",name:"DEPLOYMENT",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var a=C(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).getItemDesc=function(a){var n=(0,O.getWorkloadStatus)(a,e.props.module),r=n.status,o=n.reason;return o?p.default.createElement(E.default,{status:r,reason:t(o),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.getFilteredValue,o=a.module,i=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,a){return p.default.createElement(g.default,{icon:k.ICON_TYPES[o],iconSize:40,title:(0,S.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:r("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(_.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return p.default.createElement(h.Link,{to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(e)},e)}},{title:t("UPDATE_TIME_TCAP"),dataIndex:"updateTime",sorter:!0,sortOrder:n("updateTime"),isHideable:!0,width:150,render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster,supportGpuSelect:!0,isEdge:!0,isAdmin:!0})},e}return(0,c.default)(n,[{key:"getStatus",value:function(){return k.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.match,n=e.bannerProps,r=e.tableProps;return p.default.createElement(v.ListPage,this.props,p.default.createElement(y.default,(0,u.default)({},n,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),p.default.createElement(b.default,(0,u.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),onCreate:this.showCreate,cluster:a.params.cluster,getCheckboxProps:this.getCheckboxProps})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,n=e.trigger,r=e.name,o=e.rootStore;return[].concat((0,i.default)((0,m.default)(a,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),action:"edit",onClick:function(){return n("resource.batch.stop",{type:r,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,a=e.module,n=e.name,r=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return r("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return r("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return r("resource.delete",{type:n,detail:e})}}]}}]),n}(p.default.Component))||o;a.default=N},5208:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(18),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(61)),u=r(n(315)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=n(433),h=r(n(788)),g=r(n(792)),y=n(793),v=r(n(865)),_=r(n(804)),E=r(n(810)),b=r(n(26)),S=n(52),O=n(434),k=n(72),T=r(n(858));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,y.withClusterList)({store:new T.default("statefulsets"),module:"statefulsets",name:"STATEFULSET",authKey:"jobs",rowKey:"uid"})(o=function(e){(0,s.default)(n,e);var a=C(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).handleTabChange=function(t){var a=e.props.match.params.cluster;e.props.routing.push("/v2/edgewize/clusters/".concat(a,"/").concat(t))},e.showAction=function(e){return!e.isFedManaged},e.getItemDesc=function(a){var n=(0,O.getWorkloadStatus)(a,e.props.module),r=n.status,o=n.reason;return o?p.default.createElement(_.default,{status:r,reason:t(o),data:a}):a.description||"-"},e.getCheckboxProps=function(e){return{disabled:e.isFedManaged,name:e.name}},e.getColumns=function(){var a=e.props,n=a.getSortOrder,r=a.getFilteredValue,o=a.module,i=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:n("name"),search:!0,render:function(t,a){return p.default.createElement(h.default,{icon:k.ICON_TYPES[o],iconSize:40,title:(0,S.getDisplayName)(a),desc:e.getItemDesc(a),isMultiCluster:a.isFedManaged,to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(a.namespace,"/").concat(o,"/").concat(t)})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:r("status"),isHideable:!0,search:!0,width:"22%",render:function(e,t){return p.default.createElement(v.default,{data:t,module:o})}},{title:t("PROJECT"),dataIndex:"namespace",isHideable:!0,width:"22%",render:function(e){return p.default.createElement(m.Link,{to:"/v2/edgewize/clusters/".concat(i,"/projects/").concat(e)},e)}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:150,render:function(e){return(0,S.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster})},e}return(0,c.default)(n,[{key:"getStatus",value:function(){return k.WORKLOAD_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.match,n=e.bannerProps,r=e.tableProps;return p.default.createElement(y.ListPage,this.props,p.default.createElement(g.default,(0,u.default)({},n,{title:t("WORKLOAD_PL"),description:t("WORKLOAD_DESC"),tabs:this.tabs})),p.default.createElement(E.default,(0,u.default)({},r,{itemActions:this.itemActions,selectActions:this.selectActions,columns:this.getColumns(),cluster:a.params.cluster,getCheckboxProps:this.getCheckboxProps,emptyProps:{desc:null},onCreate:this.showCreate})))}},{key:"tabs",get:function(){return{value:this.props.module,onChange:this.handleTabChange,options:[{value:"deployments",label:t("DEPLOYMENTS")},{value:"statefulsets",label:t("STATEFULSETS")},{value:"daemonsets",label:t("DAEMONSETS")}]}}},{key:"selectActions",get:function(){var e=this.props,a=e.tableProps,n=e.trigger,r=e.name,o=e.rootStore;return[].concat((0,i.default)((0,b.default)(a,"tableActions.selectActions",{})),[{key:"stop",text:t("STOP"),action:"edit",onClick:function(){return n("resource.batch.stop",{type:r,rowKey:"uid",success:o.routing.query()})}}])}},{key:"itemActions",get:function(){var e=this.props,a=e.module,n=e.trigger,r=e.name;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.yaml.edit",{detail:e})}},{key:"redeploy",icon:"restart",text:t("RECREATE"),action:"edit",show:this.showAction,onClick:function(e){return n("workload.redeploy",{module:a,detail:e})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(e){return n("resource.delete",{type:r,detail:e})}}]}}]),n}(p.default.Component))||o;a.default=N},5209:function(e,a,n){"use strict";var r=n(20);n(12),n(5),n(11),n(29),n(6),n(84),n(18),n(97),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(29),n(6),n(84),n(18),n(28),n(97),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(436),n(22),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o=r(n(315)),i=r(n(43)),u=r(n(31));n(41);var l,c=r(n(44)),s=r(n(36)),d=r(n(37)),f=r(n(55)),p=r(n(56)),m=r(n(51)),h=r(n(0)),g=n(14),y=r(n(26)),v=r(n(63)),_=n(186),E=r(n(796)),b=r(n(792)),S=r(n(1068)),O=r(n(788)),k=r(n(787)),T=r(n(795)),C=r(n(790)),N=n(793),A=n(444),R=n(72),D=n(794),P=r(n(1008)),w=r(n(954)),I=r(n(5210));function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,p.default)(this,a)}}var j={cpu_used:"node_cpu_usage",cpu_total:"node_cpu_total",cpu_utilisation:"node_cpu_utilisation",memory_used:"node_memory_usage_wo_cache",memory_total:"node_memory_total",memory_utilisation:"node_memory_utilisation",pod_used:"node_pod_running_count",pod_total:"node_pod_quota",gpu_used:"edge_node_gpu_usage",gpu_total:"edge_node_gpu_total",gpu_utilization:"edge_node_gpu_utilization",gpu_memory_usage:"edge_node_gpu_memory_usage",gpu_memory_total:"edge_node_gpu_memory_total",gpu_memory_utilization:"edge_node_gpu_memory_utilization",npu_used:"edge_node_npu_usage",npu_total:"edge_node_npu_total",npu_utilization:"edge_node_npu_utilization",npu_memory_usage:"edge_node_npu_memory_usage",npu_memory_total:"edge_node_npu_memory_total",npu_memory_utilization:"edge_node_npu_memory_utilization"},U=(0,N.withClusterList)({store:new P.default,name:"EDGE_NODE",module:"edgenodes",authKey:"nodes"})(l=function(e){(0,f.default)(n,e);var a=L(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).store=e.props.store,e.monitoringStore=new w.default({cluster:e.cluster}),e.getData=function(){var t=(0,c.default)(i.default.mark((function t(a){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.store.fetchList(M(M(M({},a),e.props.match.params),{},{labelSelector:"node-role.kubernetes.io/edge",type:""}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getReady=function(e){return e.conditions.some((function(e){return"Ready"===e.type&&"True"===e.status}))},e.handleOpenTerminal=function(t){var a=k.default.open({onOk:function(){k.default.close(a)},isEdgeWize:!0,modal:S.default,isEdgeNode:!0,cluster:e.cluster,title:t.name,nodename:t.name})},e.getLastValue=function(t,a,n){var r=e.monitoringStore.data,o=((0,y.default)(r[a],"data.result")||[]).find((function(e){return(0,y.default)(e,"metric.node")===t.name}));return(0,D.getValueByUnit)((0,y.default)(o,"value[1]",0),n)},e.getRecordMetrics=function(t,a){var n={};return a.forEach((function(a){n[a.type]=parseFloat(e.getLastValue(t,j[a.type],a.unit))})),n},e.renderTaintsTip=function(e){return h.default.createElement("div",null,h.default.createElement("div",null,t("TAINTS"),":"),h.default.createElement("div",null,e.map((function(e){var t="".concat(e.key,"=").concat(e.value||"",":").concat(e.effect);return h.default.createElement("div",{key:t},t)}))))},e.getColumns=function(){var a=e.props,n=a.prefix,r=a.getSortOrder,o=a.getFilteredValue;return[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),search:!0,render:function(e,t){var a=t.ip,r=t.labels,o=t.importStatus,i=t.aliasName,u=r["kubeedge.io/internal-ip"]||a,l=i?"".concat(i,"（").concat(e,"）"):e;return h.default.createElement(O.default,{icon:"edge-node",iconSize:40,to:"success"!==o?null:"".concat(n,"/").concat(e),title:l,desc:null!=u?u:"-"})}},{title:t("STATUS"),dataIndex:"status",filters:e.getStatus(),filteredValue:o("status"),isHideable:!0,search:!0,render:function(a,n){var r=(0,A.getNodeStatus)(n),o=n.taints;return h.default.createElement("div",{className:I.default.status},h.default.createElement(T.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))}),!(0,v.default)(o)&&"success"===n.importStatus&&h.default.createElement(_.Tooltip,{content:e.renderTaintsTip(o)},h.default.createElement("span",{className:I.default.taints},o.length)))}},{title:t("CPU"),key:"cpu",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"cpu_used",unit:"Core"},{type:"cpu_total",unit:"Core"},{type:"cpu_utilisation"}]);return h.default.createElement(C.default,{title:h.default.createElement("div",{className:I.default.resource},h.default.createElement("span",null,"".concat(Math.round(100*a.cpu_utilisation),"%")),a.cpu_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.cpu_used,"/").concat(a.cpu_total," Core")})}},{title:t("MEMORY"),key:"memory",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"memory_used",unit:"Gi"},{type:"memory_total",unit:"Gi"},{type:"memory_utilisation"}]);return h.default.createElement(C.default,{title:h.default.createElement("div",{className:I.default.resource},h.default.createElement("span",null,"".concat(Math.round(100*a.memory_utilisation),"%")),a.memory_utilisation>=.9&&h.default.createElement(_.Icon,{name:"exclamation"})),description:"".concat(a.memory_used,"/").concat(a.memory_total," GiB")})}},{title:t("POD_PL"),key:"pods",isHideable:!0,render:function(t){var a=e.getRecordMetrics(t,[{type:"pod_used"},{type:"pod_total"}]),n=a.pod_total?parseFloat(a.pod_used/a.pod_total):0;return h.default.createElement(C.default,{title:"".concat(Math.round(100*n),"%"),description:"".concat(a.pod_used,"/").concat(a.pod_total)})}},{title:t("NODE_GROUP_PL"),dataIndex:"nodegroup",isHideable:!1,search:!1,render:function(e,t){return t.labels["apps.edgewize.io/nodegroup"]||""}}]},e.showCreate=function(){var t=e.props,a=t.query,n=t.match,r=t.module;return e.props.trigger("workload.create",{module:r,isEdgeWize:!0,namespace:a.namespace,cluster:n.params.cluster})},e}return(0,d.default)(n,[{key:"getStatus",value:function(){return R.NODE_STATUS.map((function(e){return{text:t(e.text),value:e.value}}))}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,n=e.tableProps;return h.default.createElement(N.ListPage,(0,o.default)({},this.props,{getData:this.getData,noWatch:!0}),h.default.createElement(b.default,(0,o.default)({},a,{title:t("EDGE_NODE_PL"),icon:"edge-node",tips:this.tips})),h.default.createElement(E.default,(0,o.default)({},n,{onCreate:this.showCreate,itemActions:this.itemActions,tableActions:this.tableActions,columns:this.getColumns(),isLoading:n.isLoading})))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"isExpired",get:function(){return!1}},{key:"isOverLimit",get:function(){return!1}},{key:"itemActions",get:function(){var e=this,a=this.props,n=a.store,r=a.clusterStore,o=a.routing,i=a.trigger,u=a.name;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",onClick:function(e){return i("resource.baseinfo.edit",{detail:e,success:o.query})}},{key:"uncordon",icon:"start",text:t("UNCORDON"),action:"edit",show:function(e){return"success"===e.importStatus&&e.unschedulable},onClick:function(e){return n.uncordon(e).then(o.query)}},{key:"cordon",icon:"stop",text:t("CORDON"),action:"edit",show:function(e){return"success"===e.importStatus&&!e.unschedulable},onClick:function(e){return n.cordon(e).then(o.query)}},{key:"terminal",icon:"terminal",text:t("OPEN_TERMINAL"),action:"edit",show:function(t){return"success"===t.importStatus&&e.getReady(t)},onClick:function(t){return e.handleOpenTerminal(t)}},{key:"nodegroup",icon:"restart",text:t("BOUND_NODE_GROUP"),action:"edit",show:function(e){return""===(0,y.default)(e,'labels["apps.edgewize.io/nodegroup"]',"")},onClick:function(t){return i("bound.node.group",{detail:t,cluster:e.cluster,success:e.getData})}},{key:"logs",icon:"eye",text:t("VIEW_LOG"),action:"edit",show:function(e){return"success"!==e.importStatus},onClick:function(){return i("node.add.log",{detail:(0,g.toJS)(r.detail),isEdgeWize:!0})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:function(e){return"failed"===e.importStatus},onClick:function(e){return i("resource.delete",{type:u,detail:e,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,n=a.trigger,r=a.routing,o=a.tableProps,i=[];i.push({key:"add",type:"control",text:t("ADD"),action:"create",tooltip:void 0,forbidden:!1,onClick:function(){return n("node.edge.add",{cluster:e.cluster,store:e.store,isEdgeWize:!0})}});var u=(0,g.toJS)(this.store.list),l=u.data,c=u.selectedRowKeys,s=null==l?void 0:l.find((function(e){var t;return(null==e||null===(t=e.labels)||void 0===t?void 0:t["apps.edgewize.io/nodegroup"])&&(null==c?void 0:c.includes(e.name))}));return M(M({},o.tableActions),{},{actions:i,selectActions:[{key:"taint",type:"default",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return n("node.taint.batch",{success:r.query})}},{key:"nodegroup",icon:"restart",text:t("BOUND_NODE_GROUP"),action:"edit",disabled:!!s,show:function(e){return""===(0,y.default)(e,'labels["apps.edgewize.io/nodegroup"]',"")},onClick:function(){return n("bound.node.group",{cluster:e.cluster,success:e.getData})}}]})}},{key:"tips",get:function(){return[{title:t("WHAT_IS_NODE_TAINTS_Q"),description:t("WHAT_IS_NODE_TAINTS_A")}]}}]),n}(h.default.Component))||l;a.default=U},5210:function(e,t,a){e.exports={taints:"vPrV6PEs5hvmijmtArMc1",overview:"_2eG7fE4qm3Q3CL4aFykyAi",resource:"_5xiDlxpP50TQM_7KhctwB"}},5211:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(11),n(29),n(84),n(18),n(16),n(4),n(316),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(11),n(29),n(84),n(18),n(28),n(42),n(16),n(4),n(316),n(23),n(57),n(24),n(17),n(85),n(62);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(26)),f=r(n(0)),p=n(239),m=n(186),h=r(n(789)),g=r(n(790)),y=r(n(792)),v=n(52),_=n(791),E=n(794),b=r(n(890)),S=r(n(945)),O=r(n(438)),k=r(n(5212)),T=r(n(5213)),C=r(n(5215));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var A={cpu_usage:"cluster_cpu_total",memory_usage:"cluster_memory_total",gpu_usage:"cluster_gpu_usage",gpu_memory_usage:"cluster_gpu_memory_usage",disk_size_usage:"cluster_disk_size_capacity",node_count:"cluster_node_total"},R=(0,p.inject)("rootStore")(o=(0,p.observer)(o=(0,_.trigger)(o=function(e){(0,l.default)(n,e);var a=N(n);function n(){var e;(0,i.default)(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=a.call.apply(a,[this].concat(o))).state={confirm:!1},e.monitorStore=new b.default,e.tagsStore=new S.default,e.clusterStore=new O.default,e.fetchTagGroupList=function(){e.tagsStore.fetchGroupList()},e.getValue=function(e,a){var n=(0,d.default)(e,"value[1]",0),r=(0,E.getSuitableUnit)(n,a)||r,o=(0,E.getValueByUnit)(n,r),i=(0,v.coreUnitTS)(o,r);return"".concat(o," ").concat(t(i))},e.fetchData=function(){var t=e.props.match.params.cluster;e.store.fetchDetail({name:t}),e.store.fetchVersion({cluster:t}),e.monitorStore.fetchMetrics({cluster:t,metrics:Object.values((0,v.hideGPUByLicense)(A,t)),last:!0})},e.getResourceOptions=function(){if(e.monitorStore.isLoading)return[];var t=(0,E.getLastMonitoringData)(e.monitorStore.data),a=e.store.detail.name,n=[{name:1===e.getValue(t[A.node_count])?"NODE":"NODES",icon:"nodes",value:e.getValue(t[A.node_count])},{name:"CPU",icon:"cpu",value:e.getValue(t[A.cpu_usage],"cpu")},{name:"MEMORY",icon:"memory",value:e.getValue(t[A.memory_usage],"memory")},{name:"GPU",icon:"gpu",value:e.getValue(t[A.gpu_usage],"cpu")},{name:"GPU_MEMORY",icon:"computing",value:e.getValue(t[A.gpu_memory_usage],"memory")}];return(0,v.hideGPUByLicense)(n,a)},e.showEdit=function(){e.trigger("resource.baseinfo.edit",{detail:e.store.detail,modal:k.default,success:e.fetchClusterDetail})},e.showTags=function(){e.trigger("cluster.tag.clusterItemTags",{detail:e.store.detail,success:e.fetchClusterDetail,defaultValue:e.store.detail.tags.map((function(t){return(e.tagsStore.tags||[]).find((function(e){return e.name===t.name}))})).filter(Boolean),tagsGroup:e.tagsStore.tagsGroup,store:e.tagsStore,onAddTags:e.showAddTags,tags:[e.store.detail]})},e.showAddTags=function(){e.trigger("cluster.tag.add",{success:e.tagsStore.fetchGroupList,store:e.tagsStore})},e.handleChange=function(t){e.setState({confirm:t})},e.handleUnbind=function(){e.trigger("cluster.unbind",{store:e.store,detail:e.store.detail,success:function(){return e.props.rootStore.routing.push("/clusters")}})},e.updateKubeConfig=function(){e.trigger("cluster.updateKubeConfig",{detail:e.store.detail,success:e.fetchClusterDetail})},e.manageButtonClick=function(t,a){var n=e.enableManageAction.filter((function(e){return e.actionName===a}))[0];n&&n.onClick()},e.renderManageButton=function(){var t=e.enableManageAction,a=f.default.createElement(m.Menu,{onClick:e.manageButtonClick},t.map((function(e){return f.default.createElement(m.Menu.MenuItem,{key:e.actionName},f.default.createElement(m.Icon,{name:e.icon,type:"light"}),e.text)})));return t.length>1?f.default.createElement(T.default,{className:C.default.manage,content:a}):t.length>0&&f.default.createElement(m.Button,{className:C.default.singleButton,onClick:function(){return t[0].onClick()}},t[0].text)},e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.store.detail.kubernetesVersion,a=this.getResourceOptions();return f.default.createElement(f.default.Fragment,null,f.default.createElement(y.default,{icon:"cdn",title:t("BASIC_INFORMATION"),description:t("CLUSTER_BASE_INFO_DESC")}),f.default.createElement(h.default,{title:t("CLUSTER_INFORMATION")},f.default.createElement("div",{className:C.default.header},f.default.createElement(g.default,{icon:"edge-node",title:(0,v.getDisplayName)(this.store.detail),description:t("EDGE_CLUSTER")}),f.default.createElement(g.default,{title:e||this.store.version,description:t("KUBERNETES_VERSION")}),this.editPromission&&this.renderManageButton()),f.default.createElement("div",{className:C.default.content},a.map((function(e){return f.default.createElement(g.default,{key:e.name,icon:e.icon,title:e.value,description:t(e.name)})})))))}},{key:"store",get:function(){return this.clusterStore}},{key:"enabledActions",get:function(){return globals.app.getActions({module:"cluster-settings",cluster:this.props.match.params.cluster})}},{key:"editPromission",get:function(){var e;return null===(e=globals.user.globalRules.clusters)||void 0===e?void 0:e.includes("manage")}},{key:"enableManageAction",get:function(){return[{actionName:"resource.baseinfo.edit",onClick:this.showEdit,icon:"pen",text:t("EDIT_INFORMATION")}]}}]),n}(f.default.Component))||o)||o)||o;a.default=R},5212:function(e,a,n){"use strict";n(15);var r=n(20);n(29),n(18),n(16),n(4),n(23),n(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(29),n(18),n(42),n(16),n(4),n(23),n(57),n(17);var o=r(n(36)),i=r(n(37)),u=r(n(55)),l=r(n(56)),c=r(n(51)),s=r(n(0)),d=r(n(26)),f=r(n(1)),p=r(n(830)),m=n(186),h=r(n(787)),g=n(14),y=n(72);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var _=function(e){(0,u.default)(n,e);var a=v(n);function n(e){var r;return(0,o.default)(this,n),(r=a.call(this,e)).groupOptionRenderer=function(e){return s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Tag,{type:y.CLUSTER_GROUP_TAG_TYPE[e.value]},t("ENV_".concat(e.label.toUpperCase()))),"  ",e.label)},r.providerOptionRenderer=function(e){return s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Icon,{name:e.icon,type:"light",size:20}),e.label)},r.handleOk=function(e){(0,r.props.onOk)(e)},r.handleRegionSelect=function(e){r.setState({region:e})},r.state={region:(0,d.default)(e.detail,'metadata.labels["topology.kubernetes.io/region"]',""),formData:(0,p.default)((0,g.toJS)(e.detail._originData))},r}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,a=e.visible,n=e.isSubmitting,r=e.onCancel,o=this.state.formData;return s.default.createElement(h.default.Form,{data:o,width:691,title:t("EDIT_INFORMATION"),description:t("EDIT_CLUSTER_INFO_DESC"),icon:"cluster",onOk:this.handleOk,okText:t("OK"),onCancel:r,visible:a,isSubmitting:n},s.default.createElement(m.Form.Item,{label:t("CLUSTER_NAME"),desc:t("NAME_DESC")},s.default.createElement(m.Input,{name:"metadata.name",disabled:!0})),s.default.createElement(m.Form.Item,{label:t("DESCRIPTION"),desc:t("DESCRIPTION_DESC")},s.default.createElement(m.TextArea,{name:"metadata.annotations['kubesphere.io/description']",maxLength:256})))}},{key:"regions",get:function(){return(0,d.default)(globals.config,"regionZones",[]).map((function(e){return{label:e.alias,value:e.name}}))}},{key:"zones",get:function(){var e=this,t=(0,d.default)(globals.config,"regionZones",[]).find((function(t){return t.name===e.state.region}));return t&&t.zones?t.zones.map((function(e){return{label:e.alias,value:e.name}})):[]}}]),n}(s.default.Component);a.default=_,_.propTypes={detail:f.default.object,visible:f.default.bool,onOk:f.default.func,onCancel:f.default.func,isSubmitting:f.default.bool},_.defaultProps={visible:!1,onOk:function(){},onCancel:function(){},isSubmitting:!1}},5213:function(e,a,n){"use strict";n(15);var r=n(157),o=n(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){var a=e.className,n=void 0===a?"":a,r=e.content,o=(0,u.useState)(!0),d=(0,i.default)(o,2),f=d[0],p=d[1];return u.default.createElement("div",{className:(0,c.default)(s.default.manage,n)},u.default.createElement(l.Dropdown,{theme:"dark",content:r,trigger:"click",placement:"bottomRight",onClick:function(){return p(!f)}},u.default.createElement("div",{className:s.default.button},u.default.createElement("span",null,t("MANAGE")),u.default.createElement(l.Icon,{name:f?"caret-down":"caret-up",type:"dark"}))))};var i=o(n(96)),u=r(n(0)),l=n(186),c=o(n(3)),s=o(n(5214))},5214:function(e,t,a){e.exports={manage:"_1O2d_xKFhPOBZ771CH2E1o",button:"_1EZifAFmYeUjyOiG4fxwXC"}},5215:function(e,t,a){e.exports={header:"_2UlMIR4rJkP07aE6AxE6c5",content:"hqTgeqYbmFi5a2C59o2Ar",tip:"_8dnO4vN9_srhaHqur5a7t",unbind:"_2a5V2c8M9tko1wORYs7TQq",manage:"_2xE0Qi4HWwzjYqQP5p3gPz",singleButton:"_1ojbkCTiEJ_i7AalX38tbo",tags:"_1cXZDj8Bn4RXnM8Ph0DYO0"}},5216:function(e,a,n){"use strict";var r=n(20),o=n(157);n(12),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var i,u=r(n(315)),l=r(n(31)),c=r(n(36)),s=r(n(37)),d=r(n(55)),f=r(n(56)),p=r(n(51)),m=r(n(0)),h=n(14),g=r(n(788)),y=r(n(795)),v=r(n(792)),_=o(n(793)),E=r(n(796)),b=n(52),S=r(n(322)),O=r(n(441));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var N=(0,_.default)({store:new S.default,module:"users",authKey:"members",name:"CLUSTER_MEMBER"})(i=function(e){(0,d.default)(n,e);var a=C(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).roleStore=new O.default("clusterroles"),e.getColumns=function(){return[{title:t("USERNAME"),dataIndex:"username",sorter:!0,render:function(e,t){return m.default.createElement(g.default,{avatar:t.avatar_url||"/assets/default-user.svg",title:e,desc:t.email||"-",noLink:!0})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"19%",render:function(e){return m.default.createElement(y.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("ROLE"),dataIndex:"clusterrole",isHideable:!0,width:"19%"},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:150,render:function(e){return m.default.createElement("p",null,e?(0,b.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET"))}}]},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.roleStore.fetchList(T(T({},this.props.match.params),{},{limit:-1}))}},{key:"showAction",value:function(e){return globals.user.username!==e.name}},{key:"render",value:function(){var e=this.props,a=e.bannerProps,n=e.tableProps;return m.default.createElement(_.ListPage,this.props,m.default.createElement(v.default,(0,u.default)({},a,{tabs:this.tabs,title:t("EDGE_CLUSTER_MEMBER"),description:t("INVITE_EDGE_CLUSTER_MEMBER_DESC")})),m.default.createElement(E.default,(0,u.default)({},n,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"canViewRoles",get:function(){var e=this.props.match.params.cluster;return globals.app.hasPermission({cluster:e,module:"roles",action:"view"})}},{key:"itemActions",get:function(){var e=this,a=this.props,n=a.getData,r=a.trigger;return[{key:"modify",icon:"pen",text:t("CHANGE_ROLE"),action:"edit",show:this.showAction,onClick:function(t){return r("member.edit",T(T({detail:t},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),role:t.clusterrole,success:n}))}},{key:"delete",icon:"trash",text:t("REMOVE"),action:"delete",show:this.showAction,onClick:function(t){return r("member.remove",T({detail:t,success:n},e.props.match.params))}}]}},{key:"tableActions",get:function(){var e=this,a=this.props,n=a.trigger,r=a.getData,o=a.routing;return T(T({},a.tableProps.tableActions),{},{actions:[{key:"invite",type:"control",text:t("INVITE"),action:"create",onClick:function(){return n("member.invite",T(T({},e.props.match.params),{},{roles:(0,h.toJS)(e.roleStore.list.data),roleModule:e.roleStore.module,title:t("INVITE_MEMBER"),desc:t("INVITE_CLUSTER_MEMBER_DESC"),searchPlaceholder:t("INVITE_MEMBER_SEARCH_PLACEHOLDER"),success:o.query}))}}],selectActions:[{key:"delete",type:"danger",text:t("REMOVE"),action:"delete",onClick:function(){return n("member.remove.batch",T({success:r},e.props.match.params))}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}}})}},{key:"emptyProps",get:function(){return{desc:t("INVITE_EDGE_CLUSTER_MEMBER_DESC")}}}]),n}(m.default.Component))||i;a.default=N},5217:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(1217)),o=n(a(1411)),i=n(a(1222)),u=n(a(1223)),l=n(a(1225)),c=n(a(1226)),s=n(a(1228)),d=n(a(1413)),f=n(a(1414)),p=n(a(1415)),m=n(a(1229)),h=n(a(1230)),g=n(a(1843)),y=n(a(1231)),v=n(a(1418)),_=n(a(5218)),E=n(a(5224)),b=n(a(5228)),S=n(a(5229)),O=n(a(5240)),k=n(a(5248)),T=n(a(2e3)),C="/v2/edgewize/clusters/:cluster",N=[{path:"".concat(C,"/nodes/:node"),component:S.default},{path:"".concat(C,"/fota/:node"),component:E.default},{path:["".concat(C,"/rule-group/builtin/:name"),"".concat(C,"/rule-group/:name")],component:O.default},{path:"".concat(C,"/roles/:name"),component:k.default},{path:"".concat(C,"/edgeippool/:name"),component:T.default},{path:"".concat(C,"/projects/:namespace"),component:b.default,routes:[{path:"".concat(C,"/projects/:namespace/deployments/:name"),component:r.default},{path:"".concat(C,"/projects/:namespace/statefulsets/:name"),component:o.default},{path:"".concat(C,"/projects/:namespace/daemonsets/:name"),component:i.default},{path:"".concat(C,"/projects/:namespace/jobs/:name"),component:u.default},{path:"".concat(C,"/projects/:namespace/cronjobs/:name"),component:l.default},{path:"".concat(C,"/projects/:namespace/services/:name"),component:c.default},{path:"".concat(C,"/projects/:namespace/ingresses/:name"),component:s.default},{path:"".concat(C,"/projects/:namespace/secrets/:name"),component:d.default},{path:"".concat(C,"/projects/:namespace/configmaps/:name"),component:f.default},{path:"".concat(C,"/projects/:namespace/serviceaccounts/:name"),component:p.default},{path:"".concat(C,"/projects/:namespace/pods/:podName/containers/:containerName"),component:h.default},{path:"".concat(C,"/projects/:namespace/pods/:podName"),component:m.default},{path:"".concat(C,"/projects/:namespace/volume-snapshots/:name"),component:v.default},{path:"".concat(C,"/projects/:namespace/volumes/:name"),component:y.default},{path:"".concat(C,"/projects/:namespace/networkpolicies/:name"),component:g.default},{path:"".concat(C,"/projects/:namespace"),component:_.default}]}];t.default=N},5218:function(e,a,n){"use strict";var r=n(20);n(12),n(134),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,i=r(n(315)),u=r(n(31)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=n(14),h=n(239),g=r(n(26)),y=r(n(63)),v=r(n(189)),_=n(186),E=r(n(795)),b=r(n(823)),S=n(791),O=n(52),k=r(n(1095)),T=r(n(970)),C=r(n(1543)),N=r(n(5219));function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var P=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,S.trigger)(o=function(e){(0,s.default)(n,e);var a=D(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new T.default,e.quotaStore=new k.default,e.limitRangeStore=new C.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){var a=e.name,n=(0,m.toJS)(e.store.detail),r=e.limitRangeStore.list.data;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",type:"control",onClick:function(){return e.trigger("resource.baseinfo.edit",{type:a,detail:(0,v.default)(n,"workspace"),success:e.fetchData})}},{key:"edit-annotations",icon:"pen",action:"manage",text:t("EDIT_ANNOTATIONS"),show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.annotations.edit",{detail:n,success:e.fetchData})}},{key:"editQuota",icon:"pen",text:t("EDIT_PROJECT_QUOTAS"),action:"edit",onClick:function(){return e.trigger("project.quota.edit",{type:a,detail:n,isEdgeWize:!0,success:function(){return e.quotaStore.fetch(e.params)}})}},{key:"edit-default-resource",icon:"pen",action:"edit",text:t("EDIT_DEFAULT_CONTAINER_QUOTAS"),onClick:function(){return e.trigger("project.default.resource",R(R({},e.props.match.params),{},{store:e.limitRangeStore,detail:r[0],isEdgeWize:!0,success:function(){return e.limitRangeStore.fetchListByK8s(e.params)}}))}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.store.detail.workspace!==globals.config.systemWorkspace,onClick:function(){return e.trigger("resource.delete",{type:a,detail:(0,v.default)(n,"workspace"),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail);if(!(0,y.default)(a))return[{name:t("STATUS"),value:p.default.createElement(E.default,{type:a.status,name:t(a.status)})},{name:t("CLUSTER"),value:e.props.match.params.cluster},{name:t("WORKSPACE"),value:a.workspace},{name:t("CREATION_TIME_TCAP"),value:(0,O.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator||"-"}]},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.quotaStore.fetch(this.params),this.limitRangeStore.fetchListByK8s(this.params)}},{key:"render",value:function(){var e={detailStore:this.store,quotaStore:this.quotaStore,limitRangeStore:this.limitRangeStore};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(_.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,O.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.isFedManaged?[]:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PROJECT_PL"),url:this.listUrl}]};return p.default.createElement(b.default,(0,i.default)({stores:e,routes:N.default},a))}},{key:"module",get:function(){return"projects"}},{key:"name",get:function(){return"PROJECT"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/v2/edgewize/clusters/".concat(e,"/projects")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"isFedManaged",get:function(){return this.store.detail.isFedManaged}},{key:"params",get:function(){return(0,g.default)(this.props.match,"params",{})}}]),n}(p.default.Component))||o)||o)||o;a.default=P},5219:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(821)),i=n(a(5220)),u=n(a(5222)),l=n(a(5223)),c="/v2/edgewize/clusters/:cluster/projects/:namespace",s=[{path:"".concat(c,"/overview"),title:"OVERVIEW",component:i.default,exact:!0},{path:"".concat(c,"/pods"),title:"POD_PL",component:u.default,exact:!0},{path:"".concat(c,"/quota"),title:"QUOTA_PL",component:l.default,exact:!0},{path:"".concat(c,"/metadata"),title:"METADATA",component:o.default,exact:!0},(0,r.getIndexRoute)({path:c,to:"".concat(c,"/overview"),exact:!0})];t.default=s},5220:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(18),n(16),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(433),p=n(239),m=r(n(321)),h=n(186),g=r(n(789)),y=r(n(814)),v=r(n(1419)),_=r(n(955)),E=r(n(999)),b=r(n(5221));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var O=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var a=S(n);function n(){var e;(0,i.default)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).fedStore=new E.default({module:"namespaces"}),e.clusterStore=new _.default,e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){if(this.isFedManaged){var e=this.props.detailStore.detail.name;this.fedStore.fetchDetail({name:e,namespace:e}),this.clusterStore.fetchList({limit:-1})}}},{key:"renderPlacement",value:function(){var e=this.fedStore.detail,a=e.clusters,n=void 0===a?[]:a,r=e.name,o=(0,m.default)(this.clusterStore.list.data,"name");return d.default.createElement(g.default,{title:t("CLUSTER_PL")},d.default.createElement(h.Alert,{type:"warning",message:t("MULTI_CLUSTER_PROJECT_TIP"),hideIcon:!0}),d.default.createElement("div",{className:b.default.clusters},n.map((function(e){return o[e.name]?d.default.createElement(f.Link,{key:e.name,className:b.default.cluster,to:"/v2/edgewize/clusters/".concat(e.name,"/projects/").concat(r)},d.default.createElement(y.default,{cluster:o[e.name],theme:"light",tagClass:"float-right"})):null}))))}},{key:"render",value:function(){var e=this.props.detailStore.detail;return d.default.createElement(d.default.Fragment,null,this.isFedManaged&&this.renderPlacement(),d.default.createElement(v.default,{isEdgeWize:!0,match:this.props.match,workspace:e.workspace}))}},{key:"isFedManaged",get:function(){return this.props.detailStore.detail.isFedManaged}}]),n}(d.default.Component))||o)||o;a.default=O},5221:function(e,t,a){e.exports={clusters:"_1Hly9bm_OKvl8I6tmoVLUq",cluster:"_1-9zwfKJLtuxfn4LjrxyOP"}},5222:function(e,t,a){"use strict";a(15);var n=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var r,o=n(a(36)),i=n(a(37)),u=n(a(55)),l=n(a(56)),c=n(a(51)),s=n(a(0)),d=a(239),f=n(a(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var m=(0,d.inject)("detailStore")(r=(0,d.observer)(r=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).store=e.props.detailStore,e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{isEdgeWize:!0,detail:this.store.detail,limit:6,prefix:"/v2/edgewize/clusters/".concat(e)})}}]),a}(s.default.Component))||r)||r;t.default=m},5223:function(e,t,a){"use strict";a(15);var n=a(20);a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(23),a(57),a(17);var r,o=n(a(36)),i=n(a(37)),u=n(a(55)),l=n(a(56)),c=n(a(51)),s=n(a(0)),d=a(14),f=a(239),p=n(a(1233)),m=n(a(1234));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var g=(0,f.inject)("quotaStore","limitRangeStore")(r=(0,f.observer)(r=function(e){(0,u.default)(a,e);var t=h(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"render",value:function(){var e=(0,d.toJS)(this.props.limitRangeStore.list.data)[0],t=(0,d.toJS)(this.props.quotaStore.data);return s.default.createElement(s.default.Fragment,null,s.default.createElement(p.default,{detail:e}),s.default.createElement(m.default,{detail:t}))}}]),a}(s.default.Component))||r)||r;t.default=g},5224:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(11),n(18),n(16),n(4),n(23),n(24),n(17),n(62),n(109),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(18),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(62),n(109);var o,i=r(n(315)),u=r(n(61)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=n(14),h=r(n(63)),g=n(239),y=n(186),v=r(n(240)),_=r(n(795)),E=r(n(823)),b=n(52),S=n(791),O=n(983),k=r(n(1998)),T=r(n(5225));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var N=(0,g.inject)("rootStore")(o=(0,g.observer)(o=(0,S.trigger)(o=function(e){(0,s.default)(n,e);var a=C(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new k.default,e.startPolling=function(){e.interval=setInterval((function(){e.fetchData()}),1e3)},e.fetchData=function(t){var a=e.props.match.params,n=a.cluster,r=a.node;e.store.fetchDetail({name:r,cluster:n},t)},e.renderSoftUninstalledStatus=function(){return p.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},p.default.createElement(y.Icon,{name:"information",color:{primary:"#ffffff"}}),p.default.createElement("span",null,t("NODE_SOFT_STATUS_UNINSTALLED")))},e.getSoftsInfo=function(a,n){return(0,h.default)(a)?[{name:n,value:e.renderSoftUninstalledStatus()}]:a.map((function(e){var a=e.name,n=e.version;return{name:t("SOFT_VERSION_DESC",{name:a}),value:n}}))},e.enabledActions=function(){var a=e.store.detail.status;if("registering"===a)return[];if("registerFail"===a)return[{key:"reRegister",icon:"login-left-duotone",text:t("RE_REGISTER"),action:"edit",onClick:function(){e.trigger("node.edge.register",{cluster:e.cluster,detail:e.store.detail,title:t("RE_REGISTER"),reRegister:!0,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("resource.delete",{type:"ACCESS_NODE",cluster:e.cluster,detail:e.store.detail,resource:e.store.detail.name,onOk:function(){var t=[{nodeName:e.store.detail.name,taskName:"del_node"}];return e.store.patchNode(e.cluster,t)},success:function(){v.default.success(t("DELETED_SUCCESSFULLY")),e.fetchData()}})}}];var n=[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:"registerFail"!==a,onClick:function(){return e.trigger("node.baseinfo.edit",{cluster:e.cluster,detail:e.store.detail,success:e.fetchData})}},{key:"editSoftwareInfo",icon:"pen",text:t("EDIT_SOFTWARE_INFO"),action:"edit",onClick:function(){var t=(0,m.toJS)(e.store.detail),a=t.name,n=t.edgeSofts,r=t.versionList,o=t.containerEngineSofts;e.trigger("node.softInfo",{cluster:e.cluster,nodeName:a,versionList:r,formData:{containerEngineSofts:o,edgeSofts:n},success:e.fetchData})}},{key:"syncTime",icon:"loading-circle-duotone",text:t("SYNC_TIME"),action:"edit",onClick:function(){return e.trigger("node.sync.time",{cluster:e.cluster,detail:e.store.detail,success:e.fetchData})}}];return"unmanaged"===a?n.concat([{key:"manage",icon:"download-box-2-duotone",text:t("ACCESS_MANAGE"),action:"edit",onClick:function(){return e.trigger("node.edge.manage",{cluster:e.cluster,detail:e.store.detail,success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",onClick:function(){e.trigger("resource.delete",{type:"ACCESS_NODE",cluster:e.cluster,detail:e.store.detail,resource:e.store.detail.name,onOk:function(){var t=[{nodeName:e.store.detail.name,taskName:"del_node"}];return e.store.patchNode(e.cluster,t)},success:function(){v.default.success(t("DELETED_SUCCESSFULLY")),e.fetchData()}})}}]):n.concat([{key:"cancelManage",icon:"trash",text:t("CANCEL_MANAGED"),action:"delete",onClick:function(){return e.trigger("resource.delete",{title:t("CANCEL_MANAGED"),type:"ACCESS_NODE",cluster:e.cluster,detail:e.store.detail,resource:e.store.detail.name,onOk:function(){var t=[{nodeName:e.store.detail.name,taskName:"cancel_managed"}];return e.store.patchNode(e.cluster,t)},success:function(){v.default.success({content:t("CANCEL_MANAGED_SUCCESSFULLY")}),e.fetchData}})}}])},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail);if(!(0,h.default)(a)){var n=a.arch,r=a.status,o=a.nodeIP,i=a.osType,l=a.timesync,c=a.osVersion,s=a.edgeSofts,d=a.createTime,f=a.kernelVersion,g=a.specification,y=a.agentUpdateTime,v=a.containerEngineSofts;return[{name:t("STATUS"),value:p.default.createElement(_.default,{type:r,name:t("NODE_STATUS_".concat(r.toUpperCase()))})},{name:t("NODE_ACCESS_IP"),value:o},{name:t("CREATION_TIME"),value:d?(0,b.getLocalTime)(d).format("YYYY-MM-DD HH:mm:ss"):"-"},{name:t("ARCHITECTURE"),value:n},{name:t("OS_TYPE"),value:i},{name:t("OS_VERSION"),value:c},{name:t("SPECIFICATION"),value:g},{name:t("EDGE_NODE_TIME"),value:l?(0,b.getLocalTime)(l).format("YYYY-MM-DD HH:mm:ss"):"-"},{name:t("KERNEL_VERSION"),value:f}].concat((0,u.default)(e.getSoftsInfo(v,t("CONTAINER_ENGINE"))),(0,u.default)(e.getSoftsInfo(s,t("EDGE_SOFT"))),[{name:t("SYNC_TIME_LATELY"),value:(0,b.getLocalTime)(y).format("YYYY-MM-DD HH:mm:ss")}]).filter((function(e){return!!e.value}))}},e.handleCordon=function(){var t=(0,m.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(!0),setTimeout(this.startPolling,1e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,O.getAccessNodeDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.enabledActions(),attrs:this.getAttrs(),breadcrumbs:[{label:t("NODE_ACCESS_PL"),url:this.listUrl}]};return p.default.createElement(E.default,(0,i.default)({icon:"edge-node",stores:e,routes:T.default},a))}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"module",get:function(){return"edgenodes"}},{key:"name",get:function(){return"EDGE_NODE"}},{key:"listUrl",get:function(){return"/v2/edgewize/clusters/".concat(this.cluster,"/fota")}}]),n}(p.default.Component))||o)||o)||o;a.default=N},5225:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(5226)),i="/v2/edgewize/clusters/:cluster/fota/:node",u=[{path:"".concat(i,"/tasks"),title:"TASK_EXE_INFO",component:o.default,exact:!0},(0,r.getIndexRoute)({path:i,to:"".concat(i,"/tasks"),exact:!0})];t.default=u},5226:function(e,a,n){"use strict";n(15);var r=n(20);n(4),n(23),n(17),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(245),n(42),n(4),n(23),n(57),n(17);var o,i=r(n(36)),u=r(n(37)),l=r(n(55)),c=r(n(56)),s=r(n(51)),d=r(n(0)),f=n(14),p=n(239),m=n(186),h=n(52),g=r(n(789)),y=r(n(795)),v=r(n(788)),_=r(n(5227));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var b={Failure:"error",Succeeded:"success",processing:"running",process_wait:"waiting",process_end:"success"},S=(0,p.inject)("detailStore")(o=(0,p.observer)(o=function(e){(0,l.default)(n,e);var a=E(n);function n(e){var r;return(0,i.default)(this,n),(r=a.call(this,e)).renderMessage=function(e){return e?d.default.createElement(m.Tooltip,{content:e.toString(),className:_.default.tooltip},d.default.createElement("div",{className:_.default.message},e.toString())):"-"},r.getColumns=function(){return[{title:t("TASK_EXE_STATUS"),dataIndex:"taskStatus",width:"10%",render:function(e){return d.default.createElement(y.default,{type:b[e],name:t("".concat(e.toUpperCase()))})}},{title:t("TASK_KEY"),dataIndex:"taskId",width:"16%",render:function(e,t){return d.default.createElement(v.default,{icon:null,to:null,title:t.taskName,desc:t.taskId})}},{title:t("TASK_INFO"),dataIndex:"taskDefinition",width:"18%",render:r.renderMessage},{title:t("TASK_EXE_INFO"),dataIndex:"taskMessage",render:r.renderMessage},{title:t("TASK_EXE_TIME"),dataIndex:"taskTime",width:160,render:function(e){return e?(0,h.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):"-"}}]},r.store=e.detailStore,r}return(0,u.default)(n,[{key:"render",value:function(){var e=this.store.detail;return d.default.createElement(g.default,null,d.default.createElement(m.Table,{rowKey:"taskId",className:_.default.table,dataSource:(0,f.toJS)(null==e?void 0:e.taskList.reverse()),columns:this.getColumns()}))}}]),n}(d.default.Component))||o)||o;a.default=S},5227:function(e,t,a){e.exports={table:"_1sOtciuCYVIm_if0YTkkKN",message:"_3m5znSjG9ojlBqghubPxD0",tooltip:"nmjTqYbmXBy024ENp3k42"}},5228:function(e,t,a){"use strict";a(15);var n=a(20),r=a(157);a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(4),a(22),a(23),a(57),a(24),a(17),a(62);var o=n(a(43));a(41);var i,u=n(a(44)),l=n(a(36)),c=n(a(37)),s=n(a(55)),d=n(a(56)),f=n(a(51)),p=r(a(0)),m=a(239),h=a(186),g=a(317),y=n(a(970));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var _=(0,m.inject)("rootStore")(i=(0,m.observer)(i=function(e){(0,s.default)(n,e);var t,a=v(n);function n(e){var t;return(0,l.default)(this,n),(t=a.call(this,e)).store=new y.default,t.init(e.match.params),t}return(0,c.default)(n,[{key:"init",value:(t=(0,u.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.initializing=!0,e.next=3,this.store.fetchDetail(t);case 3:this.store.initializing=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return this.store.initializing?p.default.createElement(h.Loading,{className:"ks-page-loading"}):p.default.createElement(m.Provider,{projectStore:this.store},(0,g.renderRoutes)(this.props.route.routes))}},{key:"project",get:function(){return this.props.match.params.namespace}}]),n}(p.Component))||i)||i;t.default=_},5229:function(e,a,n){"use strict";var r=n(20);n(12),n(134),n(5),n(11),n(6),n(84),n(73),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(64),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(6),n(84),n(73),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(64),n(7);var o=r(n(31)),i=r(n(315)),u=r(n(43));n(41);var l,c=r(n(44)),s=r(n(36)),d=r(n(37)),f=r(n(88)),p=r(n(55)),m=r(n(56)),h=r(n(51)),g=r(n(0)),y=n(14),v=n(239),_=r(n(26)),E=r(n(63)),b=r(n(1023)),S=n(186),O=r(n(795)),k=r(n(823)),T=n(791),C=n(52),N=n(444),A=r(n(1039)),R=r(n(5230));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,m.default)(this,a)}}var w=(0,v.inject)("rootStore")(l=(0,v.observer)(l=(0,T.trigger)(l=function(e){(0,p.default)(n,e);var a=P(n);function n(){var e;(0,s.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new A.default,e.init=(0,c.default)(u.default.mark((function t(){var a;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:if(a=(0,f.default)(e),!a.nodegroup){t.next=6;break}return t.next=6,e.store.fetchNodeGroupEdgeNodeDetail(e.nodegroupEdgeNodeParams);case 6:case"end":return t.stop()}}),t)}))),e.fetchData=(0,c.default)(u.default.mark((function t(){var a,n,r;return u.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params,n=a.cluster,r=a.node,t.next=3,e.store.fetchDetail({name:r,cluster:n});case 3:case"end":return t.stop()}}),t)}))),e.getOperations=function(){var a,n,r=e.store.detail.unschedulable,o=[{key:"cordon",type:r?"control":"danger",text:r?t("UNCORDON"):t("CORDON"),action:"edit",onClick:e.handleCordon},{key:"eidtLabel",icon:"pen",text:t("EDIT_LABELS"),action:"edit",onClick:function(){return e.trigger("node.labels",{title:t("LABEL_PL"),detail:e.store.detail,success:e.fetchData})}},{key:"taintManagement",icon:"wrench",text:t("EDIT_TAINTS"),action:"edit",onClick:function(){return e.trigger("node.taint",{detail:e.store.detail,success:e.fetchData})}}],i=null===(a=e.store.nodegroupEdgeNodeDetail)||void 0===a||null===(n=a.annotations)||void 0===n?void 0:n["apps.edgewize.io/drain-nodegroup"];return i&&i===e.nodegroup&&o.push({key:"delete",icon:"trash",text:t("UNBOUND_NODE_GROUP"),action:"delete",onClick:function(){return e.trigger("edgeNode.unbound.nodeGroup",{resource:e.nodegroupEdgeNodeParams.name,params:e.nodegroupEdgeNodeParams,store:e.store,success:e.init})}}),o},e.getAttrs=function(){var a=(0,y.toJS)(e.store.detail);if(!(0,E.default)(a)){var n=(0,N.getNodeStatus)(a),r=g.default.createElement(O.default,{type:n,name:t("NODE_STATUS_".concat(n.toUpperCase()))}),o=(0,_.default)(a,"status.addresses[0].address","-"),i=a.nodeInfo||{};return[{name:t("STATUS"),value:r},{name:t("IP_ADDRESS"),value:o},{name:t("ROLE"),value:(0,N.getNodeRoles)(a.labels).map((function(e){return t(e.replace(/[- ]/g,"_").toUpperCase())})).join("/")||"-"},{name:t("OS_VERSION"),value:i.osImage},{name:t("OS_TYPE"),value:t(i.operatingSystem.toUpperCase())},{name:t("KERNEL_VERSION"),value:i.kernelVersion},{name:t("CONTAINER_RUNTIME"),value:i.containerRuntimeVersion},{name:t("KUBELET_VERSION"),value:i.kubeletVersion},{name:t("ARCHITECTURE"),value:i.architecture.toUpperCase()},{name:t("CREATION_TIME_TCAP"),value:(0,C.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")}]}},e.handleCordon=function(){var t=(0,y.toJS)(e.store.detail);t.unschedulable?e.store.uncordon(t).then(e.fetchData):e.store.cordon(t).then(e.fetchData)},e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return g.default.createElement(S.Loading,{className:"ks-page-loading"});var t={module:this.module,name:(0,C.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[this.breadcrumb]},a=this.canViewEvents?R.default:R.default.filter((function(e){return!["EVENT_PL","POD_PL"].includes(e.title)}));return g.default.createElement(k.default,(0,i.default)({icon:"edge-node",stores:e,routes:a},t))}},{key:"module",get:function(){return"edgenodes"}},{key:"name",get:function(){return"EDGE_NODE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/v2/edgewize/clusters/".concat(e,"/nodes")}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"enabledActions",get:function(){return globals.app.getActions(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.match.params))}},{key:"canViewEvents",get:function(){return(0,b.default)(this.enabledActions)>1}},{key:"nodegroup",get:function(){return(0,_.default)(this.store.detail,'labels.["apps.edgewize.io/nodegroup"]',"")}},{key:"nodegroupEdgeNodeParams",get:function(){var e=this.props.match.params,t=e.cluster,a=e.node;return{cluster:t,nodegroup:this.nodegroup,name:a}}},{key:"breadcrumb",get:function(){var e={label:t("EDGE_NODE_PL"),url:this.listUrl};return this.canViewEvents?e:this.nodegroup?{label:t("NODE_ADMINISTRATION_PL"),url:"/node-groups/clusters/".concat(this.cluster,"/").concat(this.nodegroup,"/nodes")}:e}}]),n}(g.default.Component))||l)||l)||l;a.default=w},5230:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(821)),i=n(a(5231)),u=n(a(5232)),l=n(a(5233)),c=n(a(5234)),s="/v2/edgewize/clusters/:cluster/nodes/:node",d=[{path:"".concat(s,"/status"),title:"RUNNING_STATUS",component:c.default,exact:!0},{path:"".concat(s,"/pods"),title:"POD_PL",component:i.default,exact:!0},{path:"".concat(s,"/metadata"),title:"METADATA",component:o.default,exact:!0},{path:"".concat(s,"/monitors"),title:"MONITORING",component:l.default,exact:!0,clusterModule:"whizard-monitoring"},{path:"".concat(s,"/events"),title:"EVENT_PL",component:u.default,exact:!0},(0,r.getIndexRoute)({path:s,to:"".concat(s,"/status"),exact:!0})];t.default=d},5231:function(e,t,a){"use strict";a(15);var n=a(20);a(5),a(4),a(23),a(24),a(17),a(62),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(5),a(42),a(4),a(23),a(57),a(24),a(17),a(62);var r,o=n(a(36)),i=n(a(37)),u=n(a(55)),l=n(a(56)),c=n(a(51)),s=n(a(0)),d=a(239),f=n(a(849));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var m=(0,d.inject)("detailStore")(r=(0,d.observer)(r=function(e){(0,u.default)(a,e);var t=p(a);function a(){var e;(0,o.default)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).store=e.props.detailStore,e}return(0,i.default)(a,[{key:"render",value:function(){var e=this.props.match.params.cluster;return s.default.createElement(f.default,{isEdgeWize:!0,detail:this.store.detail,limit:6,prefix:"/v2/edgewize/clusters/".concat(e)})}}]),a}(s.default.Component))||r)||r;t.default=m},5232:function(e,t,a){"use strict";a(15);var n=a(20);a(16),a(4),a(23),a(17),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(45),a(42),a(16),a(4),a(23),a(57),a(17);var r,o=n(a(36)),i=n(a(37)),u=n(a(55)),l=n(a(56)),c=n(a(51)),s=a(239),d=a(52),f=a(813);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.default)(this,a)}}var m=(0,s.inject)("detailStore")(r=(0,s.observer)(r=function(e){(0,u.default)(a,e);var t=p(a);function a(){return(0,o.default)(this,a),t.apply(this,arguments)}return(0,i.default)(a,[{key:"fetchData",value:function(){var e={"involvedObject.name":this.store.detail.name,"involvedObject.kind":this.kind};this.eventStore.fetchList({cluster:this.cluster,fieldSelector:(0,d.joinSelector)(e)})}}]),a}(f.Component))||r)||r;t.default=m},5233:function(e,a,n){"use strict";var r=n(20);n(12),n(11),n(6),n(84),n(18),n(16),n(9),n(13),n(10),n(4),n(316),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(11),n(6),n(84),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(316),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o,i=r(n(315)),u=r(n(61)),l=r(n(31)),c=r(n(36)),s=r(n(37)),d=r(n(55)),f=r(n(56)),p=r(n(51)),m=r(n(0)),h=n(239),g=r(n(26)),y=r(n(63)),v=n(794),_=r(n(954)),E=n(798),b=n(822);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var T={cpu_utilisation:"node_cpu_utilisation",cpu_load1:"node_load1",cpu_load5:"node_load5",cpu_load15:"node_load15",memory_utilisation:"node_memory_utilisation",disk_read_iops:"node_disk_read_iops",disk_write_iops:"node_disk_write_iops",disk_read_throughput:"node_disk_read_throughput",disk_write_throughput:"node_disk_write_throughput",net_transmitted:"node_net_bytes_transmitted",net_received:"node_net_bytes_received",gpu_utilisation:"edge_node_gpu_utilization",gpu_memory_utilisation:"edge_node_gpu_memory_utilization",gpu_temp:"edge_node_gpu_temp",gpu_power_usage:"edge_node_gpu_power_usage",gpu_memory_usage:"edge_node_gpu_memory_usage",gpu_memory_available:"edge_node_gpu_memory_available",npu_utilization:"edge_node_npu_utilization",npu_memory_utilization:"edge_node_npu_memory_utilization",npu_temp:"edge_node_npu_temp",npu_power_usage:"edge_node_npu_power",npu_voltage_usage:"edge_node_npu_voltage",npu_memory_available:"edge_node_npu_memory_available",npu_health_status:"edge_node_npu_health_status"},C=(0,h.inject)("detailStore")(o=(0,h.observer)(o=function(e){(0,d.default)(n,e);var a=k(n);function n(e){var r;return(0,c.default)(this,n),(r=a.call(this,e)).fetchData=function(e){var t=r.store.detail,a=t.name,n=t.role,o=void 0===n?[]:n;r.monitorStore.fetchMetrics(O(O({},r.props.match.params),{},{resources:[a],metrics:Object.values(T),fillZero:!o.includes("edge")},e))},r.getMonitoringCfgs=function(){return[{type:"utilisation",title:"CPU_USAGE",unit:"%",legend:["CPU_USAGE"],data:(0,g.default)(r.metrics,"".concat(T.cpu_utilisation,".data.result"))},{type:"load",title:"AVERAGE_CPU_LOAD",legend:[t("TIME_M",{num:1}),t("TIME_M",{num:5}),t("TIME_M",{num:15})],data:[(0,g.default)(r.metrics,"".concat(T.cpu_load1,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.cpu_load5,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.cpu_load15,".data.result[0]"),{})]},{type:"utilisation",title:"MEMORY_USAGE",unit:"%",legend:["USAGE"],data:(0,g.default)(r.metrics,"".concat(T.memory_utilisation,".data.result"))},{type:"utilisation",title:"GPU_USAGE",unit:"%",legend:["GPU_USAGE"],data:(0,g.default)(r.metrics,"".concat(T.gpu_utilization,".data.result"))},{type:"utilisation",title:"EDGE_GPU_MEMORY_USAGE",unit:"%",legend:["EDGE_GPU_MEMORY_USAGE"],data:(0,g.default)(r.metrics,"".concat(T.gpu_memory_utilization,".data.result"))},{type:"usage",title:"GPU_TEMP",unit:"℃",legend:["GPU_TEMP"],data:(0,g.default)(r.metrics,"".concat(T.gpu_temp,".data.result"))},{type:"usage",title:"GPU_ENERGY_NO_PERCENT_TCAP",unit:"W",legend:["GPU_ENERGY_NO_PERCENT_TCAP"],data:(0,g.default)(r.metrics,"".concat(T.gpu_power_usage,".data.result"))},{type:"usage",title:"EDGE_GPU_MEMORY_USAGE_STATUS",unitType:"memory",legend:["EDGE_NODE_GPU_MEMORY_USAGED","EDGE_NODE_GPU_MEMORY_UNUSAGED"],data:[(0,g.default)(r.metrics,"".concat(T.gpu_memory_usage,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.gpu_memory_available,".data.result[0]"),{})]},{type:"utilisation",title:"NPU_USAGE",unit:"%",legend:["NPU_USAGE"],data:(0,g.default)(r.metrics,"".concat(T.npu_utilization,".data.result"))},{type:"utilisation",title:"NPU_MEMORY_USAGE",unit:"%",legend:["NPU_MEMORY_USAGE"],data:(0,g.default)(r.metrics,"".concat(T.npu_memory_utilization,".data.result"))},{type:"usage",title:"NPU_TEMP",unit:"℃",legend:["NPU_TEMP"],data:(0,g.default)(r.metrics,"".concat(T.npu_temp,".data.result"))},{type:"usage",title:"NPU_ENERGY_NO_PERCENT_TCAP",unit:"W",legend:["NPU_ENERGY_NO_PERCENT_TCAP"],data:(0,g.default)(r.metrics,"".concat(T.npu_power_usage,".data.result"))},{type:"usage",title:"NPU_VOLTAGE",unit:"V",legend:["NPU_VOLTAGE"],data:(0,g.default)(r.metrics,"".concat(T.npu_voltage_usage,".data.result"))},{type:"usage",title:"NPU_MEMORY_USAGE_STATUS",unitType:"memory",legend:["EDGE_NODE_NPU_MEMORY_USAGED","EDGE_NODE_NPU_MEMORY_UNUSAGED"],data:[(0,g.default)(r.metrics,"".concat(T.npu_memory_usage,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.npu_memory_available,".data.result[0]"),{})]},{type:"usage",title:"NPU_HEALTH_STATUS",unitType:"",legend:(0,g.default)(r.metrics,"".concat(T.npu_health_status,".data.result"),[]).map((function(e){return"chip".concat(e.metric.id)})),data:(0,u.default)((0,g.default)(r.metrics,"".concat(T.npu_health_status,".data.result"),[]))},{type:"iops",title:"IOPS",legend:["READ","WRITE"],data:[(0,g.default)(r.metrics,"".concat(T.disk_read_iops,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.disk_write_iops,".data.result[0]"),{})]},{type:"throughput",title:"DISK_THROUGHPUT",unitType:"throughput",legend:["READ","WRITE"],data:[(0,g.default)(r.metrics,"".concat(T.disk_read_throughput,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.disk_write_throughput,".data.result[0]"),{})]},{type:"bandwidth",title:"NETWORK_TRAFFIC",unitType:"bandwidth",legend:["OUT","IN"],data:[(0,g.default)(r.metrics,"".concat(T.net_transmitted,".data.result[0]"),{}),(0,g.default)(r.metrics,"".concat(T.net_received,".data.result[0]"),{})]}]},r.monitorStore=new _.default({cluster:r.cluster}),r}return(0,s.default)(n,[{key:"render",value:function(){var e=this.store.detail.createTime,t=this.monitorStore,a=t.isLoading,n=t.isRefreshing,r=this.getMonitoringCfgs();return m.default.createElement(b.Controller,{createTime:e,onFetch:this.fetchData,loading:a,refreshing:n,isEmpty:(0,y.default)(this.metrics)},r.map((function(e){e.data=(0,y.default)(e.data)?[{values:(0,v.getZeroValues)()}]:e.data;var t=(0,v.getAreaChartOps)(e);return m.default.createElement(E.SimpleArea,(0,i.default)({key:t.title,width:"100%"},t))})))}},{key:"store",get:function(){return this.props.detailStore}},{key:"cluster",get:function(){return this.props.match.params.cluster}},{key:"metrics",get:function(){return this.monitorStore.data}}]),n}(m.default.Component))||o)||o;a.default=C},5234:function(e,a,n){"use strict";var r=n(20);n(12),n(11),n(6),n(84),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(11),n(6),n(84),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var o,i=r(n(31)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(14),m=n(239),h=r(n(26)),g=r(n(63)),y=r(n(954)),v=n(52),_=r(n(789)),E=r(n(790)),b=r(n(1136)),S=r(n(5235)),O=r(n(5237)),k=r(n(5239));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var A=["node_cpu_utilisation","node_memory_utilisation","node_disk_size_utilisation","node_pod_utilisation","edge_node_gpu_utilization","edge_node_gpu_memory_utilization","edge_node_npu_utilization","edge_node_npu_memory_utilization"],R=(0,m.inject)("detailStore")(o=(0,m.observer)(o=function(e){(0,c.default)(n,e);var a=N(n);function n(e){var t;return(0,u.default)(this,n),(t=a.call(this,e)).store=e.detailStore,t.monitoringStore=new y.default({cluster:t.cluster}),t}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.store.detail,t=e.name,a=e.role,n=void 0===a?[]:a;this.monitoringStore.fetchMetrics(C(C({},this.props.match.params),{},{resources:[t],metrics:A,step:"180s",fillZero:!n.includes("edge")}))}},{key:"renderResourceStatus",value:function(){var e=(0,p.toJS)(this.monitoringStore.data);return f.default.createElement(_.default,{className:k.default.resources,title:t("RESOURCE_USAGE"),loading:this.monitoringStore.isLoading},f.default.createElement(b.default,{tabs:[{key:"cpu",icon:"cpu",unit:"%",legend:["CPU_USAGE"],title:"CPU_USAGE",data:(0,h.default)(e,"node_cpu_utilisation.data.result")},{key:"memory",icon:"memory",unit:"%",legend:["MEMORY_USAGE"],title:"MEMORY_USAGE",data:(0,h.default)(e,"node_memory_utilisation.data.result")},{key:"gpu",icon:"gpu",unit:"%",legend:["GPU_USAGE"],title:"GPU_USAGE",data:(0,h.default)(e,"edge_node_gpu_utilization.data.result")},{key:"gpu_memory",icon:"computing",unit:"%",legend:["GPU_MEMORY_USAGE"],title:"GPU_MEMORY_USAGE",data:(0,h.default)(e,"edge_node_gpu_memory_utilization.data.result")},{key:"npu",icon:function(){return f.default.createElement("img",{className:k.default.icon,src:"/assets/ai_duotone.svg"})},unit:"%",legend:["NPU_USAGE"],title:"NPU_USAGE",data:(0,h.default)(e,"edge_node_npu_utilization.data.result")},{key:"npu_memory",icon:function(){return f.default.createElement("img",{className:k.default.icon,src:"/assets/computing_lamp_duotone.svg"})},unit:"%",legend:["NPU_MEMORY_USAGE"],title:"NPU_MEMORY_USAGE",data:(0,h.default)(e,"edge_node_npu_memory_utilization.data.result")},{key:"pod",icon:"pod",unit:"%",legend:["MAXIMUM_PODS"],title:"MAXIMUM_PODS",data:(0,h.default)(e,"node_pod_utilisation.data.result")}]}))}},{key:"renderAllocatedResources",value:function(){var e=this.store.detail;return f.default.createElement(_.default,{className:k.default.allocated,title:t("ALLOCATED_RESOURCES")},f.default.createElement(E.default,{title:1===(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-requests"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,h.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-requests"]')),percent:(0,h.default)(e,'annotations["node.kubesphere.io/cpu-requests-fraction"]')}),description:t("CPU_REQUEST_SCAP")}),f.default.createElement(E.default,{title:1===(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-limits"]'))?t("CPU_CORE_PERCENT_SI",{core:(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,h.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}):t("CPU_CORE_PERCENT_PL",{core:(0,v.cpuFormat)((0,h.default)(e,'annotations["node.kubesphere.io/cpu-limits"]')),percent:(0,h.default)(e,'annotations["node.kubesphere.io/cpu-limits-fraction"]')}),description:t("CPU_LIMIT_SCAP")}),f.default.createElement(E.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,v.memoryFormat)((0,h.default)(e,'annotations["node.kubesphere.io/memory-requests"]'),"Gi"),percent:(0,h.default)(e,'annotations["node.kubesphere.io/memory-requests-fraction"]')}),description:t("MEMORY_REQUEST_SCAP")}),f.default.createElement(E.default,{title:t("MEMORY_GIB_PERCENT",{gib:(0,v.memoryFormat)((0,h.default)(e,'annotations["node.kubesphere.io/memory-limits"]'),"Gi"),percent:(0,h.default)(e,'annotations["node.kubesphere.io/memory-limits-fraction"]')}),description:t("MEMORY_LIMIT_SCAP")}))}},{key:"renderConditions",value:function(){var e=this.store.detail.conditions;return f.default.createElement(_.default,{title:t("HEALTH_STATUS")},f.default.createElement("div",{className:k.default.conditions},e.map((function(e,t){return f.default.createElement(S.default,{key:e.type||t,data:e})}))))}},{key:"renderTanits",value:function(){var e=this.store.detail.taints;return(0,g.default)(e)?null:f.default.createElement(_.default,{title:t("TAINTS"),empty:t("NO_TAINTS_TIPS")},e&&f.default.createElement("div",null,e.map((function(e,t){return f.default.createElement(O.default,{key:e.type||t,data:e})}))))}},{key:"render",value:function(){return f.default.createElement("div",{className:k.default.main},this.renderResourceStatus(),this.renderAllocatedResources(),this.renderConditions(),this.renderTanits())}},{key:"cluster",get:function(){return this.props.match.params.cluster}}]),n}(f.default.Component))||o)||o;a.default=R},5235:function(e,a,n){"use strict";n(15);var r=n(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(n(0)),i=n(186),u=n(52),l=n(444),c=r(n(790)),s=r(n(5236)),d=function(e){var a=e.data;if(!l.NODE_CONDITION_ICONS[a.type])return null;var n=(0,l.getConditionsStatus)(a),r=o.default.createElement("div",null,o.default.createElement("div",{className:"tooltip-title"},a.reason),o.default.createElement("p",{className:"tooltip-desc"},a.message),o.default.createElement("p",{className:"tooltip-desc"},t("LATEST_UPDATE_VALUE",{value:(0,u.getLocalTime)(a.lastHeartbeatTime).format("YYYY-MM-DD HH:mm:ss")})));return o.default.createElement("div",{className:s.default.card},o.default.createElement("div",{className:s.default.icon},o.default.createElement(i.Icon,{name:l.NODE_CONDITION_ICONS[a.type],size:40}),o.default.createElement(i.Tooltip,{content:r},"Running"===n?o.default.createElement(i.Icon,{className:s.default.check,name:"check",type:"light",size:12}):o.default.createElement(i.Icon,{className:s.default.substract,name:"substract",type:"light",size:12}))),o.default.createElement(c.default,{title:t("NODE_".concat(a.type.toUpperCase())),description:t("NODE_".concat(a.type.toUpperCase(),"_DESC"))}))};a.default=d},5236:function(e,t,a){e.exports={card:"j3sGrSlL0vneRsNxHBFc5",icon:"YkZukd9HBcuCp9hI1LY1c",check:"_1J1jPnAU7HWESAI18CNZrb",substract:"_2FT-vo6XqXEwuwTjmEyvAH"}},5237:function(e,a,n){"use strict";n(15);var r=n(20);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=r(n(0)),i=n(186),u=r(n(5238)),l=function(e){var a=e.data;return o.default.createElement("div",{className:u.default.card},o.default.createElement(i.Columns,null,o.default.createElement(i.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("KEY"),":"),a.key)),o.default.createElement(i.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("VALUE"),":"),a.value)),o.default.createElement(i.Column,null,o.default.createElement("p",null,o.default.createElement("span",null,t("POLICY"),":")," ",t(a.effect.toUpperCase())))))};a.default=l},5238:function(e,t,a){e.exports={card:"_3DlYbXYTxiRBqDrips3dgo"}},5239:function(e,t,a){e.exports={charts:"_15a3BzAFfZXWih7PucnLV4",resources:"_3H98u3M3amb6uOM_OPp7kW",allocated:"_23XPxMjCaKFo6xggA_NbEi",conditions:"_2xjGbiC1iu1nwzyHzX7nS8",icon:"_1UXXZzHZzEFixn25NKFD_1"}},5240:function(e,a,n){"use strict";var r=n(20);n(12),n(134),n(5),n(11),n(6),n(86),n(48),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(11),n(6),n(86),n(28),n(48),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,i=r(n(315)),u=r(n(31)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=n(14),h=n(239),g=r(n(26)),y=r(n(63)),v=n(186),_=r(n(795)),E=n(791),b=n(52),S=r(n(823)),O=r(n(1997)),k=r(n(5241)),T=r(n(5247));function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var R=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,E.trigger)(o=function(e){(0,s.default)(n,e);var a=A(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new O.default,e.fetchData=function(t){var a=e.props.match.params,n=a.cluster,r=a.namespace,o=a.name;e.store.fetchDetail&&e.store.fetchDetail(N({cluster:n,namespace:r,name:o,type:e.type},t))},e.getOperations=function(){var a=e.props.match.params,n=a.cluster,r=a.namespace,o=(0,m.toJS)(e.store.detail),i=JSON.parse(o.enabled),u=[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",onClick:function(){return e.trigger("alerting.baseinfo.edit",{type:e.type,cluster:n,namespace:r,detail:(0,m.toJS)(e.store.detail),module:e.store.module,title:t("EDIT_ALERTING_POLICY"),success:e.fetchData})}},{key:"disablePolicy",icon:i?"stop":"start",text:i?t("DISABLE"):t("ENABLE"),action:"edit",onClick:function(){e.trigger(i?"alerting.rule.update":"enable.alerting.rule",{type:e.type,resourceName:e.name,cluster:n,namespace:r,detail:o,success:e.fetchData,enabled:i,title:i?t("DISABLE_ALERTING_POLICY"):t("ENABLE_ALERTING_POLICY")})}},{key:"editRule",icon:"wrench",text:t("EDIT_ALERT_RULES"),action:"edit",onClick:function(){e.trigger("alerting.rule.edit",{type:e.type,isEdgeWize:!0,cluster:n,namespace:r,detail:o,success:e.fetchData})}},{key:"editYaml",icon:"pen",text:t("EDIT_YAML"),action:"edit",onClick:function(){return e.trigger("alerting.yaml.edit",{type:e.type,detail:o,cluster:n,namespace:r,title:t("EDIT_ALERTING_POLICY"),success:e.fetchData})}}];return"builtin"===e.type?u.push(e.resetPolicy):u.push({key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",onClick:function(){return e.trigger("alerting.rule.delete",{type:e.name,cluster:n,namespace:r,detail:e.store.detail,success:function(){return e.routing.push(e.listUrl)}})}}),u},e.getAttrs=function(){var a=(0,m.toJS)(e.store.detail);if(!(0,y.default)(a)){var n=(0,g.default)(a,"enabled"),r=(0,g.default)(a,"createTime"),o=(0,g.default)(a,"interval",""),i=(0,g.default)(a,"creator"),u=(0,g.default)(a,"evaluationTime");return[{name:t("POLICY_STATUS"),value:p.default.createElement(_.default,{className:T.default.icon,type:JSON.parse(n)?"active":"disabled",name:JSON.parse(n)?t("ENABLED"):t("DISABLED")})},{name:t("CHECK_INTERVAL"),value:""!==o?t({s:"TIME_S",m:"TIME_M",h:"TIME_H"}[o.slice(-1)],{num:o.slice(0,-1)}):"-"},{name:t("TIME_SPENT"),value:"-"!==u?t("TIME_S",{num:u}):"-"},{name:t("CREATION_TIME_TCAP"),value:(0,b.getLocalTime)(r).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:""!==i?i:"-"}]}},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return p.default.createElement(v.Loading,{className:"ks-page-loading"});var a={module:this.module,name:(0,b.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),icon:p.default.createElement("img",{src:"/assets/bell_gear_duotone.svg"}),breadcrumbs:[{label:t("ALERTING_POLICY_PL"),url:this.listUrl}]};return p.default.createElement(S.default,(0,i.default)({stores:e,routes:(0,k.default)(this.props.match.path)},a))}},{key:"module",get:function(){return"alert-rules"}},{key:"name",get:function(){return"ALERTING_POLICY"}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"listUrl",get:function(){var e=localStorage.getItem("alert-policy-detail-referrer");if(e)return e;var t=this.props.match.params,a=t.cluster,n=t.namespace,r=t.workspace,o=this.type;return"/v2/edgewize".concat(r?"/".concat(r):"","/clusters/").concat(a).concat(n?"/projects/".concat(n):"","/rule-group").concat(o?"?type=".concat(o):"")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"resetPolicy",get:function(){var e=this,a=this.props.match,n=(0,m.toJS)(this.store.detail);return{key:"reset",icon:"restart",text:t("RESET"),action:"edit",onClick:function(){return e.trigger("alerting.rule.reset",{type:e.type,cluster:a.params.cluster,detail:n,success:e.fetchData})}}}}]),n}(p.default.Component))||o)||o)||o;a.default=R},5241:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(5242)),i=n(a(5245));t.default=function(e){return[{path:"".concat(e,"/rules"),title:"ALERTING_RULE",component:o.default,exact:!0},{path:"".concat(e,"/messages"),title:"ALERTING_MESSAGE_PL",component:i.default,exact:!0},(0,r.getIndexRoute)({path:e,to:"".concat(e,"/rules"),exact:!0})]}},5242:function(e,t,a){"use strict";var n=a(20);a(12),a(5),a(11),a(6),a(86),a(16),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(5),a(11),a(6),a(86),a(28),a(42),a(16),a(34),a(15),a(9),a(13),a(10),a(4),a(23),a(57),a(24),a(17),a(62),a(7);var r,o=n(a(31)),i=n(a(36)),u=n(a(37)),l=n(a(55)),c=n(a(56)),s=n(a(51)),d=n(a(0)),f=a(14),p=a(239),m=n(a(26)),h=n(a(5243));function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var _=(0,p.inject)("detailStore")(r=(0,p.observer)(r=function(e){(0,l.default)(a,e);var t=v(a);function a(){var e;(0,i.default)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).fetchData=function(t){var a=e.props.match.params,n=a.cluster,r=a.namespace,o=a.name;e.store.fetchDetail&&e.store.fetchDetail(y({cluster:n,namespace:r,name:o,type:e.type},t))},e}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.props.match.params,t=e.cluster,a=e.namespace;return d.default.createElement(h.default,{store:this.store,cluster:t,namespace:a,rules:this.rules,handleRefresh:this.fetchData})}},{key:"store",get:function(){return this.props.detailStore}},{key:"module",get:function(){return this.store.module}},{key:"params",get:function(){return this.props.match.params}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"rules",get:function(){return(0,f.toJS)((0,m.default)(this.store,"detail._originDataWithStatus.spec.rules",[]))}}]),a}(d.default.Component))||r)||r;t.default=_},5243:function(e,a,n){"use strict";var r=n(20);n(12),n(11),n(6),n(18),n(48),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(188),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(11),n(6),n(18),n(28),n(48),n(42),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(188),n(7);var o,i=r(n(31)),u=r(n(315)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=n(14),h=r(n(3)),g=n(239),y=r(n(135)),v=r(n(26)),_=r(n(250)),E=n(186),b=r(n(789)),S=n(72),O=r(n(5244)),k=r(n(1999));function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var A=(0,g.observer)(o=function(e){(0,s.default)(n,e);var a=N(n);function n(e){var r;return(0,l.default)(this,n),(r=a.call(this,e)).getRules=function(){var e=r.state,t=e.searchValue,a=e.page,n=e.limit,o=r._rules;return""!==t&&(o=r._rules.filter((function(e){return(0,_.default)(e.alert,t)}))),o=(0,y.default)(o).slice((a-1)*n,a*n)},r.handleExpandClick=function(e){r.setState((function(t){return{expandIndex:t.expandIndex===e?"":e}}))},r.handleSearch=function(e,t){r.setState({searchValue:t,page:1})},r.handleRefresh=function(){r.setState({searchValue:""},(function(){r.props.handleRefresh()}))},r.handlePage=function(e){r.setState({page:e})},r.handlePageSizeClick=function(e,t){r.setState({limit:t})},r.renderHeader=function(){var e=r.state.searchValue;return p.default.createElement("div",{className:k.default.header},p.default.createElement(E.InputSearch,{className:k.default.search,name:"search",value:e,placeholder:t("SEARCH_BY_NAME"),onChange:r.handleSearch,autoComplete:"off"}),p.default.createElement("div",{className:k.default.actions},p.default.createElement(E.Button,{type:"flat",icon:"refresh",onClick:r.handleRefresh})))},r.renderFooter=function(){var e=r.pagination,a=e.total,n=e.limit;return p.default.createElement(E.Level,{className:k.default.footer},p.default.createElement(E.LevelLeft,null,p.default.createElement("div",{className:k.default.pageSizeBox},p.default.createElement(E.Dropdown,{placement:"top",trigger:"hover",content:p.default.createElement(E.Menu,{className:k.default.pageSizeMenu,onClick:r.handlePageSizeClick},S.PAGESIZE_OPTION.map((function(e){return p.default.createElement(E.Menu.MenuItem,{className:(0,h.default)(k.default.pageSizeMenuitem),key:e},p.default.createElement("span",null,e))})))},p.default.createElement("div",{className:k.default.pagesize},p.default.createElement("span",{className:k.default.text},t("SHOW_NUM",{num:n})),p.default.createElement(E.Icon,{name:"caret-down",size:16}))),p.default.createElement("div",{className:k.default.gap}),p.default.createElement("span",null,t("TOTAL_ITEMS",{num:a})))),p.default.createElement(E.LevelRight,null,p.default.createElement(E.Pagination,(0,u.default)({},e,{onChange:r.handlePage}))))},r.state={page:1,limit:10,expandIndex:"",searchValue:""},r}return(0,c.default)(n,[{key:"render",value:function(){var e=this,a=this.state.expandIndex,n=this.props,r=n.store,o=n.cluster,i=n.namespace,u=this.getRules();return p.default.createElement(b.default,{title:t("ALERTING_RULE")},this.renderHeader(),u.map((function(t,n){return p.default.createElement(O.default,{key:n,rule:t,index:n,store:r,isExpand:a===n,status:t.state,onExpandClick:e.handleExpandClick,cluster:o,namespace:i})})),this.renderFooter())}},{key:"store",get:function(){return this.props.store}},{key:"_rules",get:function(){var e=this;return this.props.rules.map((function(t,a){return C(C({},t),{},{state:e.status[a]})}))}},{key:"status",get:function(){var e=(0,v.default)(this.store,"detail._originDataWithStatus.status.rulesStatus",[]);return(0,m.toJS)(e)}},{key:"pagination",get:function(){var e=this.state;return{page:e.page,limit:e.limit,total:""!==e.searchValue?this.getRules().length:this._rules.length}}}]),n}(p.default.Component))||o;a.default=A},5244:function(e,a,n){"use strict";n(15);var r=n(20);n(5),n(11),n(73),n(18),n(48),n(16),n(27),n(10),n(4),n(23),n(24),n(17),n(64),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(45),n(5),n(11),n(73),n(18),n(48),n(42),n(16),n(27),n(10),n(4),n(23),n(57),n(24),n(17),n(64);var o,i=r(n(31)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=r(n(3)),m=r(n(63)),h=r(n(26)),g=n(239),y=n(186),v=n(52),_=n(791),E=n(832),b=n(923),S=n(1232),O=r(n(1999));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var T={cpu:"cpu",pod:"pod",memory:"memory",disk:"storage",network:"network"},C={s:t("SECONDS"),m:t("MINUTES"),h:t("HOURS")},N={disabled:t("DISABLED"),firing:t("ALERT_RULE_FIRING"),inactive:t("ALERT_RULE_INACTIVE"),pending:t("ALERT_RULE_PENDING")},A={Deployment:"DEPLOYMENTS_VALUES",StatefulSet:"STATEFULSETS_VALUES",DaemonSet:"DAEMONSETS_VALUES"},R=(0,g.inject)("rootStore")(o=(0,g.observer)(o=(0,_.trigger)(o=function(e){(0,c.default)(n,e);var a=k(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=a.call.apply(a,[this].concat(o))).handleExpandClick=function(){var t=e.props,a=t.index;(0,t.onExpandClick)(a)},e.renderIcon=function(){var t,a=e.props,n=a.status,r=a.isExpand,o=n.state,i=e.disabled?O.default.status_disabled:O.default["status_".concat(o)];if("Custom"===e.ruleType)return f.default.createElement("div",{className:(0,p.default)(O.default.headIcon,i)},r?f.default.createElement(S.ReactComponent,{width:40,height:40}):f.default.createElement(y.Icon,{name:"computing-setting",size:40}));var u=Object.keys(e.metricThreshold)[0],l=null!==(t=T[u])&&void 0!==t?t:"pod";return f.default.createElement("div",{className:(0,p.default)(O.default.headIcon,[O.default["status_".concat(o)]])},f.default.createElement(y.Icon,{type:r?"light":"dark",name:l,size:40}))},e.handleMonitor=function(t){var a=e.props,n=a.rule,r=a.store,o=a.cluster,i=a.namespace,u=a.status;e.trigger("alerting.rule.monitor",{rule:n,store:r,cluster:o,namespace:i,ruleStatus:u,expr:n.expr}),t.stopPropagation()},e.renderHead=function(){var a,n,r=e.props,o=r.status,i=r.rule,u=o.state,l=null!==(a=null===(n=e.severityConfig.filter((function(e){return e.value===i.severity}))[0])||void 0===n?void 0:n.label)&&void 0!==a?a:"WARNING_ALERT",c=e.disabled?O.default.info_disabled:O.default["info_".concat(u)];return f.default.createElement("div",{className:O.default.head},e.renderIcon(),f.default.createElement("div",null,f.default.createElement("div",{className:O.default.headLine},f.default.createElement("div",{className:O.default.title},i.alert),e.hasMonitoring&&f.default.createElement(y.Tooltip,{content:t("VIEW_METRIC_DATA")},f.default.createElement("img",{src:"/assets/monitor.svg",onClick:e.handleMonitor})),f.default.createElement("div",{className:(0,p.default)(O.default.severity,O.default[i.severity])},t(l))),f.default.createElement("div",{className:(0,p.default)(O.default.statusLine,c)},("inactive"!==u||e.disabled)&&f.default.createElement(y.Icon,{name:"information",size:16}),f.default.createElement("div",{className:O.default.desc},e.disabled?t("DISABLED"):N[u]))))},e.renderMonitorTarget=function(){var a=e.props.rule;if("Custom"===e.ruleType)return f.default.createElement("div",{className:O.default.target});var n=(0,h.default)(a,"exprBuilder.".concat(e.monitorType,".names"),[]),r=(0,h.default)(a,"exprBuilder.".concat(e.monitorType,".kind"));return f.default.createElement("div",{className:O.default.target},f.default.createElement("div",{className:O.default.title},"node"===e.monitorType?t("NODES_VALUES",{values:n.join(",")}):t(A[r],{values:n.join(",")})),f.default.createElement("div",{className:O.default.desc},t("MONITORING_TARGETS")))},e.renderAlertRule=function(){var a="Custom"===e.ruleType;return f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},a?t("DURATION"):t("TRIGGER_CONDITION"),"："),f.default.createElement("span",null,e.ruleExpr))},e.renderExtraContent=function(){var a=e.props,n=a.rule,r=a.isExpand,o=(0,h.default)(n,"annotations.message",""),u=(0,h.default)(n,"annotations.description","-"),l=""!==o?o:u;return f.default.createElement("div",{className:(0,p.default)(O.default.itemExtra,(0,i.default)({},O.default.itemExtraShow,r))},f.default.createElement("div",{className:O.default.ms_content},e.renderAlertRule(),f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("RULE_EXPRESSION"),":"),f.default.createElement("span",{className:O.default.ruleExpr},n.expr))),f.default.createElement("div",{className:O.default.ms_content},f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("MESSAGE_SUMMARY"),":"),f.default.createElement("span",null,(0,h.default)(n,"annotations.summary",""))),f.default.createElement("p",null,f.default.createElement("span",{className:O.default.label},t("MESSAGE_DETAILS"),":"),f.default.createElement("span",null,l))))},e.renderTime=function(){var a=e.props.status,n=(0,h.default)(a,"lastEvaluation",!1);return f.default.createElement("div",{className:O.default.timeLabel},f.default.createElement("span",{className:(0,p.default)(O.default.time,(0,i.default)({},O.default.time_white,e.props.isExpand))},n?(0,v.getLocalTime)(n).format("YYYY-MM-DD HH:mm:ss"):"-"),f.default.createElement("div",{className:O.default.desc},t("RECENT_DETECT_TIME")))},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props.isExpand;return f.default.createElement("div",{className:O.default.item},f.default.createElement("div",{className:(0,p.default)(O.default.content,(0,i.default)({},O.default.expanded,e)),onClick:this.handleExpandClick},this.renderHead(),this.renderMonitorTarget(),this.renderTime(),f.default.createElement(y.Icon,{name:"chevron-down",type:e?"light":"",size:20})),this.renderExtraContent())}},{key:"ruleType",get:function(){var e=this.props.rule,t=(0,h.default)(e,"exprBuilder",{});return(0,m.default)(t)?"Custom":"Template"}},{key:"monitorType",get:function(){var e=this.props.rule;return Object.keys((0,h.default)(e,"exprBuilder",{}))[0]}},{key:"severityConfig",get:function(){return E.SEVERITY_LEVEL.map((function(e){return{value:e.value,label:e.label}}))}},{key:"resourceType",get:function(){var e=this.props.rule;return Object.keys(e.exprBuilder)[0]}},{key:"metricThreshold",get:function(){var e=this.props.rule;return(0,h.default)(e.exprBuilder[this.resourceType],"metricThreshold",{})}},{key:"disabled",get:function(){var e=this.props.rule;return JSON.parse((0,h.default)(e,"disable","false"))}},{key:"ruleExpr",get:function(){var e=this.props.rule,a="Custom"===this.ruleType;if(!e.for)return"-";var n=(0,h.default)(e,"for",""),r=n.slice(0,-1);if(a)return"".concat(r).concat(C[n.slice(-1)]);var o=Object.keys(this.metricThreshold)[0],i=Object.keys(this.metricThreshold[o])[0],u="".concat(o,":").concat(i),l=b.RESOURCE_METRICS_CONFIG[this.monitorType][u],c=t("".concat(l.label)).replace(/[(（]%[)）]/g,"").replace(/\s$/,""),s=l.ruleConfig.filter((function(e){return"thresholds"===e.name}))[0].reverser,d=(0,h.default)(e,"exprBuilder.".concat(this.monitorType,".comparator")),f=(0,h.default)(e,"exprBuilder.".concat(this.monitorType,".metricThreshold.").concat(o,".").concat(i)),p=s(Number(f)),m="core"===l.ruleConfig[1].unit?1===p?t("CORE"):t("CORE_PL"):l.ruleConfig[1].unit,g=e.for.slice(0,-1),y=e.for.slice(-1);return"%"===m?t({s:"ALERT_RULE_TEXT_PERCENT_SECOND",m:"ALERT_RULE_TEXT_PERCENT_MINUTE",h:"ALERT_RULE_TEXT_PERCENT_HOUR"}[y],{alterTypeText:c,comparator:d,thresholds:p,durationValue:g}):t({s:"ALERT_RULE_TEXT_SECOND",m:"ALERT_RULE_TEXT_MINUTE",h:"ALERT_RULE_TEXT_HOUR"}[y],{alterTypeText:c,comparator:d,thresholds:p,unit:m,durationValue:g})}},{key:"hasMonitoring",get:function(){var e=this.props.cluster;return globals.app.hasClusterModule(e,"whizard-monitoring")}}]),n}(f.default.Component))||o)||o)||o;a.default=R},5245:function(e,a,n){"use strict";var r=n(20);n(12),n(5),n(11),n(29),n(6),n(86),n(18),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(29),n(6),n(86),n(18),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(62),n(7);var o,i=r(n(315)),u=r(n(31)),l=r(n(36)),c=r(n(37)),s=r(n(55)),d=r(n(56)),f=r(n(51)),p=r(n(0)),m=r(n(3)),h=n(239),g=n(433),y=r(n(26)),v=r(n(451)),_=r(n(63)),E=n(186),b=r(n(789)),S=r(n(790)),O=r(n(873)),k=n(1151),T=n(52),C=n(878),N=n(72),A=r(n(1996)),R=r(n(5246));function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.default)(this,a)}}var I=(0,h.observer)(o=function(e){(0,s.default)(n,e);var a=w(n);function n(e){var r;return(0,l.default)(this,n),(r=a.call(this,e)).fetchData=function(e){var t=r.props.match.params,a=t.cluster,n=t.namespace,o=t.name,i=r.state,u=i.limit,l=i.page,c=i.sortBy,s=i.ascending,d=P(P({},e),{},{cluster:a,namespace:n,ruleName:o,type:r.type,limit:u,page:l,sortBy:c,ascending:s,label_filters:"rule_group=".concat(o)});r.store.fetchList(d)},r.getResourceType=function(e){var a=(0,v.default)(e);return t("ALERT_TYPE",{type:t(a)})},r.getColumns=function(){return[{title:t("MESSAGE"),dataIndex:"value",render:function(e,t){return p.default.createElement(S.default,{icon:"loudspeaker",title:(0,y.default)(t,"annotations.summary"),description:(0,y.default)(t,"annotations.message")||(0,y.default)(t,"annotations.description","-")})}},{title:t("SEVERITY"),dataIndex:"labels.severity",width:"15%",render:function(e){var a=k.severityOptions.find((function(t){return t.value===e}));return a?p.default.createElement("span",{style:{backgroundColor:a.bgColor,color:a.color,fontWeight:600,padding:"0px 4px"}},t(a.label)):"-"}},{title:t("MONITORING_TARGET"),dataIndex:"labels",isHideable:!0,width:"20%",render:function(e){var a=(0,C.getAlertingResource)(e),n=a.module,o=a.name,i=a.namespace;return n?"hpas"===n?p.default.createElement("span",null,t(N.MODULE_KIND_MAP[n]),": ",o):p.default.createElement(g.Link,{to:"".concat(r.getPrefix({namespace:i}),"/").concat(n,"/").concat(o)},t(N.MODULE_KIND_MAP[n]),": ",o):"-"}},{title:t("TRIGGER_TIME"),dataIndex:"activeAt",isHideable:!0,width:200,render:function(e){return(0,T.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},r.handlePage=function(e){r.setState({page:e},(function(){r.fetchData()}))},r.handlePageSizeClick=function(e,t){r.setState({limit:t},(function(){r.fetchData()}))},r.renderFooter=function(){var e=r.pagination,a=e.total,n=e.limit;return p.default.createElement(E.Level,{className:R.default.footer},p.default.createElement(E.LevelLeft,null,p.default.createElement("div",{className:R.default.pageSizeBox},p.default.createElement(E.Dropdown,{placement:"top",trigger:"hover",content:p.default.createElement(E.Menu,{className:R.default.pageSizeMenu,onClick:r.handlePageSizeClick},N.PAGESIZE_OPTION.map((function(e){return p.default.createElement(E.Menu.MenuItem,{className:(0,m.default)(R.default.pageSizeMenuitem),key:e},p.default.createElement("span",null,e))})))},p.default.createElement("div",{className:R.default.pagesize},p.default.createElement("span",{className:R.default.text},t("SHOW_NUM",{num:n})),p.default.createElement(E.Icon,{name:"caret-down",size:16}))),p.default.createElement("div",{className:R.default.gap}),p.default.createElement("span",null,t("TOTAL_ITEMS",{num:a})))),p.default.createElement(E.LevelRight,null,p.default.createElement(E.Pagination,(0,i.default)({},e,{onChange:r.handlePage}))))},r.store=new A.default,r.state={page:1,limit:10,sortBy:"activeAt",ascending:!1},r}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getPrefix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cluster,a=e.namespace,n=this.props.match.params,r=n.cluster,o=n.namespace,i=n.workspace;return t=t||r,a=a||o,"".concat(i?"/".concat(i):"","/clusters/").concat(t).concat(a?"/projects/".concat(a):"")}},{key:"render",value:function(){var e=this.store.list,a=e.data,n=e.isLoading,r=e.filters;return p.default.createElement(b.default,{title:t("ALERTING_MESSAGE_PL"),loading:n},(0,_.default)(a)?p.default.createElement("div",null,t("NO_DATA_DESC")):p.default.createElement(p.default.Fragment,null,p.default.createElement(O.default,{className:R.default.table,filters:r,data:a,name:"Alerting Message",rowKey:"value",columns:this.getColumns(),selectedRowKeys:[],selectActions:[],hideHeader:!0,hideFooter:!0}),this.renderFooter()))}},{key:"type",get:function(){return this.props.match.url.indexOf("alert-rules/builtin")>0?"builtin":""}},{key:"pagination",get:function(){var e=this.state;return{page:e.page,limit:e.limit,total:this.store.list.total}}}]),n}(p.default.Component))||o;a.default=I},5246:function(e,t,a){e.exports={table:"AG_qM41gf6QH6rWrxxX1I",footer:"bJwbNqt-nsyyNbpbx6tO0",pageSizeBox:"DKz1C7wmIoV0NdR3gvIhI",pagesize:"_2HQRF4QyzRCk6oOPVhiZuP",text:"IEe-JLXtS86SfykLWhqpW",gap:"_iYAtpzgrxIVf5HBe6P_4",pageSizeMenu:"_29fm1z6RupXOKBkGtWkpDg",pageSizeMenuitem:"c1A1KCKi7BaRCLW5SXUUS"}},5247:function(e,t,a){e.exports={icon:"_3przOWA8oS6hX0Lex0ZtXg"}},5248:function(e,a,n){"use strict";n(15);var r=n(20);n(12),n(134),n(5),n(84),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(134),n(45),n(5),n(84),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,i=r(n(315)),u=r(n(36)),l=r(n(37)),c=r(n(55)),s=r(n(56)),d=r(n(51)),f=r(n(0)),p=n(14),m=n(239),h=r(n(26)),g=r(n(63)),y=n(186),v=n(52),_=n(791),E=r(n(441)),b=r(n(823)),S=r(n(5249));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.default)(this,a)}}var k=(0,m.inject)("rootStore")(o=(0,m.observer)(o=(0,_.trigger)(o=function(e){(0,c.default)(n,e);var a=O(n);function n(){var e;(0,u.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).store=new E.default("clusterroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),cluster:e.props.match.params.cluster,success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var a=(0,p.toJS)(e.store.detail);if(!(0,g.default)(a))return[{name:t("CREATION_TIME_TCAP"),value:(0,v.getLocalTime)(a.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:a.creator}]},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates(this.props.match.params)}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return f.default.createElement(y.Loading,{className:"ks-page-loading"});var a={module:this.module,authKey:this.authKey,name:(0,h.default)(this.store.detail,"name"),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("CLUSTER_ROLE_PL"),url:this.listUrl}]};return f.default.createElement(b.default,(0,i.default)({stores:e,routes:S.default},a))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"clusterroles"}},{key:"name",get:function(){return"CLUSTER_ROLE"}},{key:"listUrl",get:function(){var e=this.props.match.params.cluster;return"/v2/edgewize/clusters/".concat(e,"/roles")}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var e=this.props.match.params.name;return!globals.config.presetClusterRoles.includes(e)}}]),n}(f.default.Component))||o)||o)||o;a.default=k},5249:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(317),o=n(a(1022)),i=n(a(1074)),u="/v2/edgewize/clusters/:cluster/roles/:name",l=[{path:"".concat(u,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(u,"/users"),title:"AUTHORIZED_USER_PL",component:i.default,exact:!0},(0,r.getIndexRoute)({path:u,to:"".concat(u,"/authorizations"),exact:!0})];t.default=l},5261:function(e,a,n){"use strict";var r=n(20),o=n(157);n(12),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(85),n(62),n(7),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n(12),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(24),n(17),n(85),n(62),n(7);var i,u=r(n(31)),l=r(n(315)),c=r(n(36)),s=r(n(37)),d=r(n(55)),f=r(n(56)),p=r(n(51)),m=r(n(0)),h=r(n(788)),g=r(n(792)),y=r(n(796)),v=o(n(793)),_=n(52),E=n(72),b=r(n(441));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var T=(0,v.default)({store:new b.default("clusterroles"),module:"clusterroles",name:"CLUSTER_ROLE"})(i=function(e){(0,d.default)(n,e);var a=k(n);function n(){var e;(0,c.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).showAction=function(e){return!globals.config.presetClusterRoles.includes(e.name)},e.getColumns=function(){var a=e.props.getSortOrder,n=e.props.match.params.cluster;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t){return m.default.createElement(h.default,{icon:E.ICON_TYPES[e.module],to:"/v2/edgewize/clusters/".concat(n,"/roles/").concat(t),title:t})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:a("createTime"),isHideable:!0,width:"19%",render:function(e){return(0,_.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss")}}]},e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,a=e.bannerProps,n=e.tableProps;return m.default.createElement(v.ListPage,(0,l.default)({},this.props,{noWatch:!0}),m.default.createElement(g.default,(0,l.default)({},a,{tabs:this.tabs,title:t("EDGE_CLUSTER_ROLE"),desc:t("EDGE_CLUSTER_ROLE_DESC")})),m.default.createElement(y.default,(0,l.default)({},n,{emptyProps:this.emptyProps,tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this,a=this.props,n=a.trigger,r=a.name,o=a.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(e){return n("resource.baseinfo.edit",{detail:e,success:o.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("role.delete",{detail:t,type:r,success:o.query,cluster:e.props.match.params.cluster})}}]}},{key:"tableActions",get:function(){return O(O({},this.props.tableProps.tableActions),{},{onCreate:void 0,selectActions:[]})}},{key:"emptyProps",get:function(){return{desc:t("EDGE_CLUSTER_ROLE_DESC")}}}]),n}(m.default.Component))||i;a.default=T},5262:function(e,t,a){"use strict";var n=a(20);a(12),a(11),a(6),a(9),a(13),a(10),a(4),a(23),a(24),a(17),a(62),a(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(12),a(45),a(11),a(6),a(28),a(42),a(34),a(15),a(9),a(13),a(10),a(4),a(22),a(23),a(57),a(24),a(17),a(62),a(7);var r=n(a(43));a(41);var o,i=n(a(44)),u=n(a(31)),l=n(a(36)),c=n(a(37)),s=n(a(88)),d=n(a(55)),f=n(a(56)),p=n(a(51)),m=n(a(0)),h=a(791),g=n(a(1296)),y=n(a(481)),v=n(a(318)),_=n(a(482)),E=n(a(469));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,u.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,f.default)(this,a)}}var k=(0,h.trigger)(o=function(e){(0,d.default)(a,e);var t=O(a);function a(e){var n;return(0,l.default)(this,a),(n=t.call(this,e)).rootStore=new y.default,n.showCreateApp=function(){var e=(0,s.default)(n),t=e.match,a=e.trigger;n.trigger("app.template.create.v2",S(S({module:"apptemplates",workspace:"app",cluster:"11-45-edge"},null==t?void 0:t.params),{},{trigger:a}))},n.showEditApp=function(){var e=(0,s.default)(n),t=e.match,a=e.trigger;n.trigger("openpitrix.template.edit.v2",S(S({module:"apptemplates",workspace:"apps",detail:{name:"demo",description:"sdasdas",appName:"ttes1",workspace:"edgewize",cluster:"edge-11-45",categoryName:"charge",aliasName:"aaa",appHome:"detail?.spec?.appHome",attachments:["atty53lv9n072op6o"],abstraction:"detail?.spec?.abstraction"},store:n.appStore},null==t?void 0:t.params),{},{trigger:a}))},n.showCreateInstance=(0,i.default)(r.default.mark((function e(){var t,a,o,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,s.default)(n),a=t.match,o=t.trigger,i=t.rootStore,n.trigger("batch.deploy.app.create.v2",S(S({module:"edgeappsets"},null==a?void 0:a.params),{},{appName:"ttes1",versionId:"configyaml-ttes1-1.0.0",routing:i.routing,trigger:o,namespace:"monitor",workspace:"edgewize",cluster:"edge-11-45",onCancel:function(){console.log(22222)},success:function(){}}));case 2:case"end":return e.stop()}}),e)}))),n.showCreateTemplate=function(){var e=(0,s.default)(n),t=e.match,a=e.trigger,r=e.rootStore;n.trigger("batch.deploy.app.create",S(S({module:"edgeappsets"},t.params),{},{routing:r.routing,trigger:a}))},n.deleteWorkspace=function(){var e=(0,s.default)(n),t=e.match,a=e.trigger,r=e.rootStore;n.trigger("workload.batch.delete.v2",S(S({module:"deployments",resource:[{cluster:"11-45-edge",namespace:"monitor",workspace:"app",kind:"Deployment",apiVersion:"apps/v1",metadata:{name:"hahhahahahah-1-kldx5",namespace:"monitor",uid:"ccdf6979-0ad3-4558-8f15-a3cc507048e1",resourceVersion:"4405142",generation:1,creationTimestamp:"2023-12-26T06:20:52Z",labels:{app:"hahhahahahah-1-kldx5","application.kubesphere.io/app-id":"cjb","apps.edgewize.io/appset":"hahhahahahah-1","apps.edgewize.io/apptemplate":"configyaml-cjb-1.0.0","apps.edgewize.io/apptemplateversion":"1.0.0","apps.edgewize.io/node":"11-45-edge03","apps.edgewize.io/nodegroup":"ccc"},annotations:{"application.kubesphere.io/app-alias-name":"采集宝","deployment.kubernetes.io/revision":"1"},managedFields:[{manager:"controller-manager",operation:"Update",apiVersion:"apps/v1",time:"2023-12-26T06:20:52Z",fieldsType:"FieldsV1",fieldsV1:{"f:metadata":{"f:annotations":{".":{},"f:application.kubesphere.io/app-alias-name":{}},"f:labels":{".":{},"f:app":{},"f:application.kubesphere.io/app-id":{},"f:apps.edgewize.io/appset":{},"f:apps.edgewize.io/apptemplate":{},"f:apps.edgewize.io/apptemplateversion":{},"f:apps.edgewize.io/node":{},"f:apps.edgewize.io/nodegroup":{}}},"f:spec":{"f:progressDeadlineSeconds":{},"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{},"f:strategy":{"f:rollingUpdate":{".":{},"f:maxSurge":{},"f:maxUnavailable":{}},"f:type":{}},"f:template":{"f:metadata":{"f:annotations":{".":{},"f:kubesphere.io/imagepullsecrets":{}},"f:labels":{".":{},"f:app":{},"f:apps.edgewize.io/appset":{},"f:apps.edgewize.io/apptemplate":{},"f:apps.edgewize.io/apptemplateversion":{},"f:apps.edgewize.io/node":{},"f:apps.edgewize.io/nodegroup":{}}},"f:spec":{"f:containers":{'k:{"name":"container-vd8s4r"}':{".":{},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:ports":{".":{},'k:{"containerPort":80,"protocol":"TCP"}':{".":{},"f:containerPort":{},"f:name":{},"f:protocol":{}}},"f:resources":{},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:nodeName":{},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:serviceAccount":{},"f:serviceAccountName":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}}}},{manager:"kube-controller-manager",operation:"Update",apiVersion:"apps/v1",time:"2023-12-26T06:21:05Z",fieldsType:"FieldsV1",fieldsV1:{"f:metadata":{"f:annotations":{"f:deployment.kubernetes.io/revision":{}}},"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},'k:{"type":"Available"}':{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}},'k:{"type":"Progressing"}':{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:updatedReplicas":{}}},subresource:"status"}]},spec:{replicas:1,selector:{matchLabels:{app:"hahhahahahah-1-kldx5","apps.edgewize.io/appset":"hahhahahahah-1"}},template:{metadata:{creationTimestamp:null,labels:{app:"hahhahahahah-1-kldx5","apps.edgewize.io/appset":"hahhahahahah-1","apps.edgewize.io/apptemplate":"configyaml-cjb-1.0.0","apps.edgewize.io/apptemplateversion":"1.0.0","apps.edgewize.io/node":"11-45-edge03","apps.edgewize.io/nodegroup":"ccc"},annotations:{"kubesphere.io/imagepullsecrets":"{}"}},spec:{containers:[{name:"container-vd8s4r",image:"nginx:latest",ports:[{name:"http-0",containerPort:80,protocol:"TCP"}],resources:{},terminationMessagePath:"/dev/termination-log",terminationMessagePolicy:"File",imagePullPolicy:"IfNotPresent"}],restartPolicy:"Always",terminationGracePeriodSeconds:30,dnsPolicy:"ClusterFirst",serviceAccountName:"default",serviceAccount:"default",nodeName:"11-45-edge03",securityContext:{},schedulerName:"default-scheduler",tolerations:[{key:"node.kubernetes.io/unreachable",operator:"Exists"}]}},strategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:"25%",maxSurge:"25%"}},revisionHistoryLimit:10,progressDeadlineSeconds:600},status:{observedGeneration:1,replicas:1,updatedReplicas:1,readyReplicas:1,availableReplicas:1,conditions:[{type:"Available",status:"True",lastUpdateTime:"2023-12-26T06:21:05Z",lastTransitionTime:"2023-12-26T06:21:05Z",reason:"MinimumReplicasAvailable",message:"Deployment has minimum availability."},{type:"Progressing",status:"True",lastUpdateTime:"2023-12-26T06:21:05Z",lastTransitionTime:"2023-12-26T06:20:53Z",reason:"NewReplicaSetAvailable",message:'ReplicaSet "hahhahahahah-1-kldx5-5844dc9d5d" has successfully progressed.'}]},uid:"ccdf6979-0ad3-4558-8f15-a3cc507048e1",name:"hahhahahahah-1-kldx5",creator:"",description:"",aliasName:"",createTime:"2023-12-26T06:20:52Z",resourceVersion:"4405142",isFedManaged:!1,updateTime:1703571665e3,labels:{app:"hahhahahahah-1-kldx5","application.kubesphere.io/app-id":"cjb","apps.edgewize.io/appset":"hahhahahahah-1","apps.edgewize.io/apptemplate":"configyaml-cjb-1.0.0","apps.edgewize.io/apptemplateversion":"1.0.0","apps.edgewize.io/node":"11-45-edge03","apps.edgewize.io/nodegroup":"ccc"},annotations:{"application.kubesphere.io/app-alias-name":"采集宝","deployment.kubernetes.io/revision":"1"},availablePodNums:1,readyPodNums:1,podNums:1,selector:{app:"hahhahahahah-1-kldx5","apps.edgewize.io/appset":"hahhahahahah-1"},containers:[{name:"container-vd8s4r",image:"nginx:latest",ports:[{name:"http-0",containerPort:80,protocol:"TCP"}],resources:{},terminationMessagePath:"/dev/termination-log",terminationMessagePolicy:"File",imagePullPolicy:"IfNotPresent"}],strategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:"25%",maxSurge:"25%"}},availableCondition:{type:"Available",status:"True",lastUpdateTime:"2023-12-26T06:21:05Z",lastTransitionTime:"2023-12-26T06:21:05Z",reason:"MinimumReplicasAvailable",message:"Deployment has minimum availability."},ownerReference:{},hasS2i:!1,builderNames:[],_originData:{kind:"Deployment",apiVersion:"apps/v1",metadata:{name:"hahhahahahah-1-kldx5",namespace:"monitor",labels:{app:"hahhahahahah-1-kldx5","application.kubesphere.io/app-id":"cjb","apps.edgewize.io/appset":"hahhahahahah-1","apps.edgewize.io/apptemplate":"configyaml-cjb-1.0.0","apps.edgewize.io/apptemplateversion":"1.0.0","apps.edgewize.io/node":"11-45-edge03","apps.edgewize.io/nodegroup":"ccc"},annotations:{"application.kubesphere.io/app-alias-name":"采集宝","deployment.kubernetes.io/revision":"1"}},spec:{replicas:1,selector:{matchLabels:{app:"hahhahahahah-1-kldx5","apps.edgewize.io/appset":"hahhahahahah-1"}},template:{metadata:{creationTimestamp:null,labels:{app:"hahhahahahah-1-kldx5","apps.edgewize.io/appset":"hahhahahahah-1","apps.edgewize.io/apptemplate":"configyaml-cjb-1.0.0","apps.edgewize.io/apptemplateversion":"1.0.0","apps.edgewize.io/node":"11-45-edge03","apps.edgewize.io/nodegroup":"ccc"},annotations:{"kubesphere.io/imagepullsecrets":"{}"}},spec:{containers:[{name:"container-vd8s4r",image:"nginx:latest",ports:[{name:"http-0",containerPort:80,protocol:"TCP"}],resources:{},terminationMessagePath:"/dev/termination-log",terminationMessagePolicy:"File",imagePullPolicy:"IfNotPresent"}],restartPolicy:"Always",terminationGracePeriodSeconds:30,dnsPolicy:"ClusterFirst",serviceAccountName:"default",serviceAccount:"default",nodeName:"11-45-edge03",securityContext:{},schedulerName:"default-scheduler",tolerations:[{key:"node.kubernetes.io/unreachable",operator:"Exists"}]}},strategy:{type:"RollingUpdate",rollingUpdate:{maxUnavailable:"25%",maxSurge:"25%"}},revisionHistoryLimit:10,progressDeadlineSeconds:600}}}],type:"DEPLOYMENT"},null==t?void 0:t.params),{},{routing:r.routing,trigger:a,store:n.workloadStore}))},n.store=new _.default,n.workloadStore=new v.default("deployments"),n.appStore=new E.default,n.state={delete_workloads:!1},n}return(0,c.default)(a,[{key:"componentDidMount",value:function(){this.rootStore.registerActions(g.default)}},{key:"render",value:function(){return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{onClick:this.showCreateApp},"创建应用"),m.default.createElement("div",{onClick:this.showEditApp},"编辑应用"),m.default.createElement("div",{onClick:this.deleteWorkspace},"删除部署数据"),m.default.createElement("div",{onClick:this.showCreateInstance},"创建实例"),m.default.createElement("div",{onClick:this.showCreateTemplate},"选择边缘模板创建"))}},{key:"namespace",get:function(){return this.props.match.params.namespace}}]),a}(m.default.Component))||o;t.default=k},785:function(e,t,a){"use strict";a(15);var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(239),o=a(317),i=n(a(5165)),u=(0,r.inject)("rootStore")((function(){return(0,o.renderRoutes)(i.default)}));t.default=u}}]);