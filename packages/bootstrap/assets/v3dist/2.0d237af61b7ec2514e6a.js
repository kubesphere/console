(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{4384:function(t,e,r){"use strict";r(15);var n=r(20);r(5),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r(5);var a=n(r(61)),o=n(r(4385)),s=n(r(4387)),c=n(r(4388)),i=n(r(4389)),u=n(r(4390)),l="/access",f=[].concat((0,a.default)(u.default),[{path:l,component:o.default,routes:[{path:"".concat(l,"/accounts"),component:s.default,exact:!0},{path:"".concat(l,"/roles"),component:c.default,exact:!0},{path:"".concat(l,"/workspaces"),component:i.default,exact:!0},{path:"".concat(l,"/edge-workspaces"),component:i.default,exact:!0}]}]);e.default=f},4385:function(e,r,n){"use strict";n(15);var a=n(157),o=n(20);n(5),n(4),n(23),n(24),n(17),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(42),n(4),n(23),n(57),n(24),n(17),n(62);var s=o(n(61)),c=o(n(36)),i=o(n(37)),u=o(n(55)),l=o(n(56)),f=o(n(51)),d=a(n(0)),p=o(n(26)),h=n(317),m=n(1076),g=n(186),y=o(n(4386));function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var b=function(e){(0,u.default)(n,e);var r=v(n);function n(){return(0,c.default)(this,n),r.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,r=e.match,n=e.route,a=e.location,o=globals.app.getAccessNavs(),c=(0,p.default)(o,"[0].items[0].name");return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:"ks-page-side"},d.default.createElement("div",{className:y.default.titleWrapper},d.default.createElement("div",{className:y.default.icon},d.default.createElement(g.Icon,{name:"key",size:40,type:"light"})),d.default.createElement("div",{className:y.default.text},d.default.createElement("div",{className:"h6"},t("ACCESS_CONTROL")))),d.default.createElement(m.Nav,{className:"ks-page-nav",navs:o,location:a,match:r})),d.default.createElement("div",{className:"ks-page-main"},(0,h.renderRoutes)([].concat((0,s.default)(n.routes),[(0,h.getIndexRoute)({path:n.path,to:"".concat(n.path,"/").concat(c),exact:!0})]))))}}]),n}(d.Component);r.default=b},4386:function(t,e,r){t.exports={titleWrapper:"_2adpYWeRak0FrcqKrz3smo",icon:"_2qvGJPBfPdvhB7ZEApDrml",text:"dc4ENhhIri-ghqJz_Y-DY"}},4387:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(187),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(85),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(187),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(17),n(85),n(7);var s=a(n(61)),c=a(n(30)),i=a(n(315)),u=a(n(43));n(41);var l,f=a(n(44)),d=a(n(36)),p=a(n(37)),h=a(n(55)),m=a(n(56)),g=a(n(51)),y=a(n(0)),v=a(n(322)),b=a(n(240)),E=a(n(788)),O=a(n(795)),S=a(n(792)),w=a(n(796)),k=o(n(793)),A=a(n(26)),P=n(52);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){(0,c.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,g.default)(t);if(e){var a=(0,g.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}var T=(0,k.default)({store:new v.default,module:"users",name:"USER"})(l=function(e){(0,h.default)(n,e);var r=R(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).handleStatus=function(){var r=(0,f.default)(u.default.mark((function r(n){var a,o,s;return u.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.props,o=a.routing,s=a.store,r.next=3,s.handlechangeStatus(n);case 3:b.default.success({content:t("UPDATE_SUCCESSFUL")}),o.query();case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.handleBatchOperation=function(){var r=(0,f.default)(u.default.mark((function r(n){var a,o,s;return u.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.props,o=a.store,s=a.routing,r.next=3,o.batchChangeStatus(n);case 3:b.default.success({content:t("UPDATE_SUCCESSFUL")}),s.query();case 5:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),e.handledisabled=function(){var t=e.props.tableProps,r=t.selectedRowKeys,n=t.data.filter((function(t){return r.includes(t.name)}));return n.every((function(t){return"Active"===t.status}))?{activeStatus:!0,disabledStatus:!1}:n.every((function(t){return"Disabled"===t.status}))?{activeStatus:!1,disabledStatus:!0}:{activeStatus:!1,disabledStatus:!1}},e.getColumns=function(){return[{title:t("USERNAME"),dataIndex:"username",render:function(t,e){return y.default.createElement(E.default,{avatar:e.avatar_url||"/assets/default-user.svg",title:t,desc:e.email,to:"/access/accounts/".concat(t)})}},{title:t("STATUS"),dataIndex:"status",isHideable:!0,width:"20%",render:function(e){return y.default.createElement(O.default,{type:e,name:t("USER_".concat(e.toUpperCase()))})}},{title:t("PLATFORM_ROLE"),dataIndex:"globalrole",isHideable:!0,width:"20%",render:function(t){return t||"-"}},{title:t("LAST_LOGIN"),dataIndex:"lastLoginTime",isHideable:!0,width:"20%",render:function(e){return e?(0,P.getLocalTime)(e).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET")}}]},e.showCreate=function(){return e.props.trigger("user.create",{success:e.props.getData})},e}return(0,p.default)(n,[{key:"showAction",value:function(t){return!globals.config.presetUsers.includes(t.name)&&globals.user.username!==t.name}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps;return y.default.createElement(k.ListPage,this.props,y.default.createElement(S.default,(0,i.default)({},e,{tabs:this.tabs})),y.default.createElement(w.default,(0,i.default)({},r,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.name,n=e.trigger,a=e.getData,o=e.routing;return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",show:this.showAction,onClick:function(t){return n("user.edit",{detail:t,success:a})}},{key:"status",icon:function(t){return"Active"===t.status?"stop":"start"},text:function(e){return"Active"===e.status?t("DISABLE"):t("ENABLE")},action:"edit",show:this.showAction,onClick:this.handleStatus},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return n("resource.delete",{type:r,resource:t.username,detail:t,success:o.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props.tableProps,n=this.handledisabled(),a=n.activeStatus,o=n.disabledStatus;return C(C({},r.tableActions),{},{onCreate:this.showCreate,selectActions:[].concat((0,s.default)((0,A.default)(r,"tableActions.selectActions",{})),[{key:"active",type:"default",text:t("ENABLE"),action:"edit",disabled:a,onClick:function(){e.handleBatchOperation("active")}},{key:"disabled",type:"default",text:t("DISABLE"),action:"edit",disabled:o,onClick:function(){e.handleBatchOperation("disabled")}}]),getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}}})}}]),n}(y.default.Component))||l;r.default=T},4388:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(5),n(11),n(6),n(84),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(85),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(84),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(85),n(7);var s,c=a(n(30)),i=a(n(315)),u=a(n(36)),l=a(n(37)),f=a(n(55)),d=a(n(56)),p=a(n(51)),h=a(n(0)),m=n(14),g=a(n(788)),y=a(n(792)),v=a(n(796)),b=o(n(793)),E=n(52),O=n(72),S=a(n(441));function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){(0,c.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,p.default)(t);if(e){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var P=(0,b.default)({store:new S.default("globalroles"),module:"globalroles",authKey:"roles",name:"PLATFORM_ROLE"})(s=function(e){(0,f.default)(n,e);var r=A(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).showAction=function(t){return!globals.config.presetGlobalRoles.includes(t.name)},e.getColumns=function(){var r=e.props,n=r.getSortOrder,a=r.module;return[{title:t("NAME"),dataIndex:"name",width:"25%",render:function(t,e){return h.default.createElement(g.default,{icon:O.ICON_TYPES[a],to:"/access/roles/".concat(t),title:t,desc:e.aliasName})}},{title:t("DESCRIPTION"),key:"description",dataIndex:"description",isHideable:!0,width:"55%"},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:n("createTime"),isHideable:!0,width:"19%",render:function(t){return(0,E.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}}]},e.showCreate=function(){var r=e.props,n=r.store,a=r.trigger,o=r.getData;return a("role.create",{title:t("CREATE_PLATFORM_ROLE"),roleTemplates:(0,m.toJS)(n.roleTemplates.data),roleModules:(0,m.toJS)(n.roleCategory),success:o})},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.props.store.fetchRoleTemplates("global"),this.props.store.fetchTemplatesCategory("global")}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps;return h.default.createElement(b.ListPage,(0,i.default)({},this.props,{noWatch:!0}),h.default.createElement(y.default,(0,i.default)({},e,{tabs:this.tabs})),h.default.createElement(v.default,(0,i.default)({},r,{tableActions:this.tableActions,itemActions:this.itemActions,columns:this.getColumns(),searchType:"name"})))}},{key:"itemActions",get:function(){var e=this.props,r=e.trigger,n=e.store,a=e.name,o=e.module,s=e.routing;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(t){return r("resource.baseinfo.edit",{detail:t,success:s.query})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:this.showAction,onClick:function(t){return r("role.edit",{module:o,detail:t,roleTemplates:(0,m.toJS)(n.roleTemplates.data),roleModules:(0,m.toJS)(n.roleCategory),success:s.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return r("role.delete",{detail:t,type:a,success:s.query})}}]}},{key:"tableActions",get:function(){return k(k({},this.props.tableProps.tableActions),{},{onCreate:this.showCreate,selectActions:[]})}}]),n}(h.default.Component))||s;r.default=P},4389:function(e,r,n){"use strict";var a=n(20),o=n(157);n(12),n(109),n(5),n(11),n(31),n(6),n(18),n(192),n(16),n(9),n(13),n(10),n(4),n(23),n(24),n(17),n(62),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(11),n(31),n(6),n(18),n(28),n(192),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(22),n(23),n(57),n(24),n(17),n(62),n(7);var s=a(n(315)),c=a(n(43)),i=a(n(30)),u=a(n(58));n(41);var l,f,d=a(n(44)),p=a(n(36)),h=a(n(37)),m=a(n(55)),g=a(n(56)),y=a(n(51)),v=a(n(49)),b=n(186),E=a(n(788)),O=a(n(792)),S=a(n(1108)),w=o(n(793)),k=a(n(796)),A=n(14),P=a(n(0)),D=a(n(438)),C=a(n(445)),R=n(52);function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){(0,i.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,y.default)(t);if(e){var a=(0,y.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,g.default)(this,r)}}var I=(0,w.default)({store:new C.default,module:"workspaces",name:"WORKSPACE"})((f=function(e){(0,m.default)(n,e);var r=L(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).clusterStore=new D.default,e.getClusters=function(){e.clusterStore.fetchList({limit:-1})},e.getColumns=function(){var r=e.props.getSortOrder,n=[{title:t("NAME"),dataIndex:"name",sorter:!0,sortOrder:r("name"),render:function(t,e){return P.default.createElement(E.default,{icon:"enterprise",iconSize:40,title:(0,R.getDomTitle)((0,R.getDisplayNameNew)(e)),desc:(0,R.getDomTitle)(e.description||"-"),to:"/workspaces/".concat(t)})}},{title:t("CREATION_TIME_TCAP"),dataIndex:"createTime",sorter:!0,sortOrder:r("createTime"),isHideable:!0,width:250,render:function(t){return(0,R.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}}];return globals.app.isMultiCluster&&n.splice(1,0,{title:t("CLUSTER_PL"),dataIndex:"clusters",width:"30%",render:function(r,n){return"system-workspace"===n.name?P.default.createElement(b.Tag,{type:"secondary"},t("ALL_CLUSTERS")):P.default.createElement(S.default,{clusters:r,clustersDetail:e.clusters})}}),n},e.showCreate=function(){var t=e.workspaceConfig,r=t.key,n=t.createModal;return e.props.trigger("workspace.create",{title:n.title,form:{defaultClusterType:r},success:e.getData})},e.workspaceConfigs=[{key:"ks",path:"/access/workspaces",title:t("KS_WORKSPACE_PL"),description:t("KS_WORKSPACE_DESC"),requestParams:{labelSelector:"!cluster-role.kubesphere.io/edge"},createModal:{title:t("CREATE_KS_WORKSPACE")}},{key:"edge",path:"/access/edge-workspaces",title:t("EDGE_WORKSPACE_PL"),description:t("EDGE_WORKSPACE_DESC"),requestParams:{labelSelector:"cluster-role.kubesphere.io/edge"},createModal:{title:t("CREATE_EDGE_WORKSPACE")}}],e.handleTabChange=function(t){e.props.routing.push(t)},e.getData=(0,d.default)(c.default.mark((function t(){var r,n,a,o,s,i=arguments;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},n=r.silent,a=(0,u.default)(r,["silent"]),o=e.props.store,s=e.workspaceConfig.requestParams,n&&(o.list.silent=!0),t.next=6,o.fetchList(_(_({},a),s));case 6:o.list.silent=!1;case 7:case"end":return t.stop()}}),t)}))),e}return(0,h.default)(n,[{key:"componentDidMount",value:function(){this.getClusters()}},{key:"showAction",value:function(t){return globals.config.systemWorkspace!==t.name}},{key:"render",value:function(){var t=this.props,e=t.bannerProps,r=t.tableProps,n=this.workspaceConfig,a=n.title,o=n.description,c=this.clusterStore.list.isLoading;return P.default.createElement(w.ListPage,(0,s.default)({},this.props,{getData:this.getData}),P.default.createElement(O.default,(0,s.default)({},e,{title:a,description:o,tabs:this.tabs})),P.default.createElement(k.default,(0,s.default)({className:"table-2-6"},r,{columns:this.getColumns(),columnSearch:this.columnSearch,itemActions:this.itemActions,tableActions:this.tableActions,enabledActions:this.enabledActions,onCreate:this.showCreate,isLoading:r.isLoading||c,onRefresh:this.getClusters,justRefresh:!1})))}},{key:"clusters",get:function(){return this.clusterStore.list.data}},{key:"columnSearch",get:function(){return[{dataIndex:"name",title:t("NAME"),search:!0},{dataIndex:"alias",title:t("ALIAS"),search:!0}]}},{key:"enabledActions",get:function(){return"/access/workspaces"===this.props.location.pathname?globals.app.getActions(_({module:"workspaces"},this.props.match.params)):globals.app.getActions(_({module:"clusters"},this.props.match.params))}},{key:"itemActions",get:function(){var e=this.props,r=e.name,n=e.routing,a=e.trigger;return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:this.showAction,onClick:function(t){return a("resource.baseinfo.edit",{detail:t,success:n.query})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",show:this.showAction,onClick:function(t){return a("workspace.delete",{type:r,resource:t.name,detail:t,success:n.query})}}]}},{key:"tableActions",get:function(){var e=this,r=this.props,n=r.tableProps,a=r.trigger,o=r.name;return _(_({},n.tableActions),{},{selectActions:[{key:"delete",type:"danger",text:t("DELETE"),action:"delete",onClick:function(){return a("workspace.batch.delete",{type:o,rowKey:"name"})}}],getCheckboxProps:function(t){return{disabled:!e.showAction(t),name:t.name}}})}},{key:"workspaceConfig",get:function(){var t,e=this.props.match.path;return null!==(t=this.workspaceConfigs.find((function(t){return t.path===e})))&&void 0!==t?t:this.workspaceConfigs[0]}},{key:"tabs",get:function(){var t=this.workspaceConfig.path;return{options:this.workspaceConfigs.map((function(t){return{value:t.path,label:t.title}})),value:t,onChange:this.handleTabChange}}}]),n}(P.default.Component),(0,v.default)(f.prototype,"clusters",[A.computed],Object.getOwnPropertyDescriptor(f.prototype,"clusters"),f.prototype),l=f))||l;r.default=I},4390:function(t,e,r){"use strict";r(15);var n=r(20);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(4391)),o=n(r(4395)),s=[{path:"".concat("/access","/accounts/:name"),component:a.default},{path:"".concat("/access","/roles/:name"),component:o.default}];e.default=s},4391:function(e,r,n){"use strict";n(15);var a=n(20);n(5),n(84),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(45),n(5),n(84),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,s=a(n(315)),c=a(n(36)),i=a(n(37)),u=a(n(55)),l=a(n(56)),f=a(n(51)),d=a(n(0)),p=n(14),h=n(239),m=a(n(26)),g=a(n(63)),y=n(186),v=n(52),b=n(791),E=a(n(322)),O=a(n(899)),S=a(n(4392));function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var k=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,b.trigger)(o=function(e){(0,u.default)(n,e);var r=w(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).store=new E.default,e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("user.edit",{detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"modifyPassword",icon:"pen",text:t("CHANGE_PASSWORD"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("user.modifypassword",{detail:(0,p.toJS)(e.store.detail)})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("resource.delete",{type:"USER",resource:e.store.detail.username,detail:(0,p.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,g.default)(r))return[{name:t("PLATFORM_ROLE"),value:r.globalrole},{name:t("EMAIL"),value:r.email},{name:t("LAST_LOGIN"),value:r.lastLoginTime?(0,v.getLocalTime)(r.lastLoginTime).format("YYYY-MM-DD HH:mm:ss"):t("NOT_LOGIN_YET")}]},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.username)return d.default.createElement(y.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,m.default)(this.store.detail,"username"),desc:this.detailDesc,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("USER_PL"),url:this.listUrl}]};return d.default.createElement(O.default,(0,s.default)({stores:e,routes:S.default},r))}},{key:"module",get:function(){return"accounts"}},{key:"authKey",get:function(){return"users"}},{key:"name",get:function(){return"USER"}},{key:"listUrl",get:function(){return"/access/accounts"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"detailDesc",get:function(){return globals.config.presetUsers.includes("admin")?t((0,m.default)(this.store.detail,"description")):(0,m.default)(this.store.detail,"description")}},{key:"showEdit",get:function(){var t=this.store.detail.name;return!globals.config.presetUsers.includes(t)}}]),n}(d.default.Component))||o)||o)||o;r.default=k},4392:function(t,e,r){"use strict";r(15);var n=r(20);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(317),o=n(r(4393)),s="/access/accounts/:name",c=[{path:"".concat(s,"/login-history"),title:"LOGIN_HISTORY",component:o.default,exact:!0},(0,a.getIndexRoute)({path:s,to:"".concat(s,"/login-history"),exact:!0})];e.default=c},4393:function(e,r,n){"use strict";var a=n(20);n(12),n(5),n(11),n(6),n(16),n(9),n(13),n(10),n(4),n(23),n(17),n(7),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(45),n(5),n(11),n(6),n(28),n(42),n(16),n(34),n(15),n(9),n(13),n(10),n(4),n(23),n(57),n(17),n(7);var o,s=a(n(30)),c=a(n(36)),i=a(n(37)),u=a(n(55)),l=a(n(56)),f=a(n(51)),d=a(n(0)),p=n(14),h=n(239),m=n(186),g=a(n(801)),y=a(n(839)),v=n(52),b=a(n(4394));function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){(0,s.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var w=(0,h.inject)("rootStore","detailStore")(o=(0,h.observer)(o=function(e){(0,u.default)(n,e);var r=S(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).fetchData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.store.detail.name;e.store.fetchLoginRecords(O({name:r},t))},e.handlePagination=function(t){e.fetchData({page:t})},e.getColumns=function(){return[{title:t("TIME"),dataIndex:"createTime",render:function(t){return(0,v.getLocalTime)(t).format("YYYY-MM-DD HH:mm:ss")}},{title:t("STATUS"),dataIndex:"spec.success",render:function(e){return d.default.createElement("div",{className:b.default.status},d.default.createElement(y.default,{type:e?"success":"failed"})," ",d.default.createElement("span",null,e?t("SUCCESSFUL"):t("FAILED")))}},{title:t("SOURCE_IP_ADDRESS"),dataIndex:"spec.sourceIP"},{title:t("REASON"),dataIndex:"spec.reason"}]},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderContent",value:function(){var t=(0,p.toJS)(this.store.records).data;return d.default.createElement(m.Table,{className:b.default.table,dataSource:t,rowKey:"login_time",columns:this.getColumns()})}},{key:"render",value:function(){var e=this.store.records,r=e.page,n=e.total,a=e.limit;return d.default.createElement(g.default,{title:t("LOGIN_HISTORY"),empty:t("NO_LOGIN_HISTORY")},this.renderContent(),n>a&&d.default.createElement("div",{className:"margin-t12 text-right"},d.default.createElement(m.Pagination,{page:r,total:n,limit:a,onChange:this.handlePagination})))}},{key:"store",get:function(){return this.props.detailStore}}]),n}(d.default.Component))||o)||o;r.default=w},4394:function(t,e,r){t.exports={table:"_3ImdJfx5RMcfYKur4H9XOG",status:"_2Vvekd1YEzb-HeO8sQFK8a"}},4395:function(e,r,n){"use strict";n(15);var a=n(20);n(12),n(109),n(5),n(84),n(16),n(4),n(23),n(24),n(17),n(85),n(62),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,n(12),n(109),n(45),n(5),n(84),n(28),n(42),n(16),n(4),n(23),n(57),n(24),n(17),n(85),n(62);var o,s=a(n(315)),c=a(n(36)),i=a(n(37)),u=a(n(55)),l=a(n(56)),f=a(n(51)),d=a(n(0)),p=n(14),h=n(239),m=a(n(63)),g=n(186),y=n(52),v=n(791),b=a(n(441)),E=a(n(899)),O=a(n(4396));function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var w=(0,h.inject)("rootStore")(o=(0,h.observer)(o=(0,v.trigger)(o=function(e){(0,u.default)(n,e);var r=S(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=r.call.apply(r,[this].concat(o))).store=new b.default("globalroles"),e.fetchData=function(){e.store.fetchDetail(e.props.match.params)},e.getOperations=function(){return[{key:"edit",icon:"pen",text:t("EDIT_INFORMATION"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("resource.baseinfo.edit",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:e.fetchData})}},{key:"editRole",icon:"pen",text:t("EDIT_PERMISSIONS"),action:"edit",show:e.showEdit,onClick:function(){return e.trigger("role.edit",{module:e.module,detail:(0,p.toJS)(e.store.detail),roleTemplates:(0,p.toJS)(e.store.roleTemplates.data),roleModules:(0,p.toJS)(e.store.roleCategory),success:e.fetchData})}},{key:"delete",icon:"trash",text:t("DELETE"),action:"delete",type:"danger",show:e.showEdit,onClick:function(){return e.trigger("role.delete",{type:e.name,detail:(0,p.toJS)(e.store.detail),success:function(){return e.routing.push(e.listUrl)}})}}]},e.getAttrs=function(){var r=(0,p.toJS)(e.store.detail);if(!(0,m.default)(r))return[{name:t("CREATION_TIME_TCAP"),value:(0,y.getLocalTime)(r.createTime).format("YYYY-MM-DD HH:mm:ss")},{name:t("CREATOR"),value:r.creator}]},e}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.fetchData(),this.store.fetchRoleTemplates("global"),this.store.fetchTemplatesCategory("global")}},{key:"render",value:function(){var e={detailStore:this.store};if(this.store.isLoading&&!this.store.detail.name)return d.default.createElement(g.Loading,{className:"ks-page-loading"});var r={module:this.module,authKey:this.authKey,name:(0,y.getDisplayName)(this.store.detail),desc:this.store.detail.description,operations:this.getOperations(),attrs:this.getAttrs(),breadcrumbs:[{label:t("PLATFORM_ROLE_PL"),url:this.listUrl}]};return d.default.createElement(E.default,(0,s.default)({stores:e,routes:O.default},r))}},{key:"module",get:function(){return this.store.module}},{key:"authKey",get:function(){return"roles"}},{key:"name",get:function(){return"PLATFORM_ROLE"}},{key:"listUrl",get:function(){return"/access/roles"}},{key:"routing",get:function(){return this.props.rootStore.routing}},{key:"showEdit",get:function(){var t=this.props.match.params.name;return!globals.config.presetGlobalRoles.includes(t)}}]),n}(d.default.Component))||o)||o)||o;r.default=w},4396:function(t,e,r){"use strict";r(15);var n=r(20);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(317),o=n(r(1022)),s=n(r(1074)),c="/access/roles/:name",i=[{path:"".concat(c,"/authorizations"),title:"PERMISSION_PL",component:o.default,exact:!0},{path:"".concat(c,"/users"),title:"AUTHORIZED_USER_PL",component:s.default,exact:!0},(0,a.getIndexRoute)({path:c,to:"".concat(c,"/authorizations"),exact:!0})];e.default=i},779:function(t,e,r){"use strict";r(15);var n=r(20);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(239),o=r(317),s=n(r(4384)),c=(0,a.inject)("rootStore")((function(){return(0,o.renderRoutes)(s.default)}));e.default=c}}]);